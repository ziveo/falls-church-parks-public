(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HJ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mg={exports:{}},mi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S3=Symbol.for("react.element"),iye=Symbol.for("react.portal"),rye=Symbol.for("react.fragment"),nye=Symbol.for("react.strict_mode"),sye=Symbol.for("react.profiler"),oye=Symbol.for("react.provider"),aye=Symbol.for("react.context"),lye=Symbol.for("react.forward_ref"),uye=Symbol.for("react.suspense"),cye=Symbol.for("react.memo"),hye=Symbol.for("react.lazy"),Lj=Symbol.iterator;function pye(e){return e===null||typeof e!="object"?null:(e=Lj&&e[Lj]||e["@@iterator"],typeof e=="function"?e:null)}var WJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JJ=Object.assign,KJ={};function ov(e,t,i){this.props=e,this.context=t,this.refs=KJ,this.updater=i||WJ}ov.prototype.isReactComponent={};ov.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ov.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ZJ(){}ZJ.prototype=ov.prototype;function jO(e,t,i){this.props=e,this.context=t,this.refs=KJ,this.updater=i||WJ}var zO=jO.prototype=new ZJ;zO.constructor=jO;JJ(zO,ov.prototype);zO.isPureReactComponent=!0;var Pj=Array.isArray,YJ=Object.prototype.hasOwnProperty,VO={current:null},XJ={key:!0,ref:!0,__self:!0,__source:!0};function QJ(e,t,i){var r,s={},l=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(l=""+t.key),t)YJ.call(t,r)&&!XJ.hasOwnProperty(r)&&(s[r]=t[r]);var y=arguments.length-2;if(y===1)s.children=i;else if(1<y){for(var v=Array(y),_=0;_<y;_++)v[_]=arguments[_+2];s.children=v}if(e&&e.defaultProps)for(r in y=e.defaultProps,y)s[r]===void 0&&(s[r]=y[r]);return{$$typeof:S3,type:e,key:l,ref:d,props:s,_owner:VO.current}}function dye(e,t){return{$$typeof:S3,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function UO(e){return typeof e=="object"&&e!==null&&e.$$typeof===S3}function fye(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Rj=/\/+/g;function p7(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fye(""+e.key):t.toString(36)}function P5(e,t,i,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(l){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case S3:case iye:d=!0}}if(d)return d=e,s=s(d),e=r===""?"."+p7(d,0):r,Pj(s)?(i="",e!=null&&(i=e.replace(Rj,"$&/")+"/"),P5(s,t,i,"",function(_){return _})):s!=null&&(UO(s)&&(s=dye(s,i+(!s.key||d&&d.key===s.key?"":(""+s.key).replace(Rj,"$&/")+"/")+e)),t.push(s)),1;if(d=0,r=r===""?".":r+":",Pj(e))for(var y=0;y<e.length;y++){l=e[y];var v=r+p7(l,y);d+=P5(l,t,i,v,s)}else if(v=pye(e),typeof v=="function")for(e=v.call(e),y=0;!(l=e.next()).done;)l=l.value,v=r+p7(l,y++),d+=P5(l,t,i,v,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function ex(e,t,i){if(e==null)return e;var r=[],s=0;return P5(e,r,"","",function(l){return t.call(i,l,s++)}),r}function yye(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xo={current:null},R5={transition:null},mye={ReactCurrentDispatcher:xo,ReactCurrentBatchConfig:R5,ReactCurrentOwner:VO};mi.Children={map:ex,forEach:function(e,t,i){ex(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return ex(e,function(){t++}),t},toArray:function(e){return ex(e,function(t){return t})||[]},only:function(e){if(!UO(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mi.Component=ov;mi.Fragment=rye;mi.Profiler=sye;mi.PureComponent=jO;mi.StrictMode=nye;mi.Suspense=uye;mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mye;mi.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=JJ({},e.props),s=e.key,l=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,d=VO.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var y=e.type.defaultProps;for(v in t)YJ.call(t,v)&&!XJ.hasOwnProperty(v)&&(r[v]=t[v]===void 0&&y!==void 0?y[v]:t[v])}var v=arguments.length-2;if(v===1)r.children=i;else if(1<v){y=Array(v);for(var _=0;_<v;_++)y[_]=arguments[_+2];r.children=y}return{$$typeof:S3,type:e.type,key:s,ref:l,props:r,_owner:d}};mi.createContext=function(e){return e={$$typeof:aye,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oye,_context:e},e.Consumer=e};mi.createElement=QJ;mi.createFactory=function(e){var t=QJ.bind(null,e);return t.type=e,t};mi.createRef=function(){return{current:null}};mi.forwardRef=function(e){return{$$typeof:lye,render:e}};mi.isValidElement=UO;mi.lazy=function(e){return{$$typeof:hye,_payload:{_status:-1,_result:e},_init:yye}};mi.memo=function(e,t){return{$$typeof:cye,type:e,compare:t===void 0?null:t}};mi.startTransition=function(e){var t=R5.transition;R5.transition={};try{e()}finally{R5.transition=t}};mi.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};mi.useCallback=function(e,t){return xo.current.useCallback(e,t)};mi.useContext=function(e){return xo.current.useContext(e)};mi.useDebugValue=function(){};mi.useDeferredValue=function(e){return xo.current.useDeferredValue(e)};mi.useEffect=function(e,t){return xo.current.useEffect(e,t)};mi.useId=function(){return xo.current.useId()};mi.useImperativeHandle=function(e,t,i){return xo.current.useImperativeHandle(e,t,i)};mi.useInsertionEffect=function(e,t){return xo.current.useInsertionEffect(e,t)};mi.useLayoutEffect=function(e,t){return xo.current.useLayoutEffect(e,t)};mi.useMemo=function(e,t){return xo.current.useMemo(e,t)};mi.useReducer=function(e,t,i){return xo.current.useReducer(e,t,i)};mi.useRef=function(e){return xo.current.useRef(e)};mi.useState=function(e){return xo.current.useState(e)};mi.useSyncExternalStore=function(e,t,i){return xo.current.useSyncExternalStore(e,t,i)};mi.useTransition=function(){return xo.current.useTransition()};mi.version="18.2.0";(function(e){e.exports=mi})(Mg);const gye=HJ(Mg.exports);var Z8={},eK={exports:{}},Ua={},tK={exports:{}},iK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,me){var we=pe.length;pe.push(me);e:for(;0<we;){var Ee=we-1>>>1,Re=pe[Ee];if(0<s(Re,me))pe[Ee]=me,pe[we]=Re,we=Ee;else break e}}function i(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var me=pe[0],we=pe.pop();if(we!==me){pe[0]=we;e:for(var Ee=0,Re=pe.length,qe=Re>>>1;Ee<qe;){var ft=2*(Ee+1)-1,jt=pe[ft],bi=ft+1,tn=pe[bi];if(0>s(jt,we))bi<Re&&0>s(tn,jt)?(pe[Ee]=tn,pe[bi]=we,Ee=bi):(pe[Ee]=jt,pe[ft]=we,Ee=ft);else if(bi<Re&&0>s(tn,we))pe[Ee]=tn,pe[bi]=we,Ee=bi;else break e}}return me}function s(pe,me){var we=pe.sortIndex-me.sortIndex;return we!==0?we:pe.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var d=Date,y=d.now();e.unstable_now=function(){return d.now()-y}}var v=[],_=[],M=1,k=null,O=3,R=!1,D=!1,z=!1,B=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(pe){for(var me=i(_);me!==null;){if(me.callback===null)r(_);else if(me.startTime<=pe)r(_),me.sortIndex=me.expirationTime,t(v,me);else break;me=i(_)}}function ne(pe){if(z=!1,J(pe),!D)if(i(v)!==null)D=!0,pi(re);else{var me=i(_);me!==null&&he(ne,me.startTime-pe)}}function re(pe,me){D=!1,z&&(z=!1,V(xe),xe=-1),R=!0;var we=O;try{for(J(me),k=i(v);k!==null&&(!(k.expirationTime>me)||pe&&!Ge());){var Ee=k.callback;if(typeof Ee=="function"){k.callback=null,O=k.priorityLevel;var Re=Ee(k.expirationTime<=me);me=e.unstable_now(),typeof Re=="function"?k.callback=Re:k===i(v)&&r(v),J(me)}else r(v);k=i(v)}if(k!==null)var qe=!0;else{var ft=i(_);ft!==null&&he(ne,ft.startTime-me),qe=!1}return qe}finally{k=null,O=we,R=!1}}var ue=!1,_e=null,xe=-1,Ne=5,Ce=-1;function Ge(){return!(e.unstable_now()-Ce<Ne)}function Ze(){if(_e!==null){var pe=e.unstable_now();Ce=pe;var me=!0;try{me=_e(!0,pe)}finally{me?lt():(ue=!1,_e=null)}}else ue=!1}var lt;if(typeof q=="function")lt=function(){q(Ze)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,zt=et.port2;et.port1.onmessage=Ze,lt=function(){zt.postMessage(null)}}else lt=function(){B(Ze,0)};function pi(pe){_e=pe,ue||(ue=!0,lt())}function he(pe,me){xe=B(function(){pe(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){D||R||(D=!0,pi(re))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return i(v)},e.unstable_next=function(pe){switch(O){case 1:case 2:case 3:var me=3;break;default:me=O}var we=O;O=me;try{return pe()}finally{O=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,me){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var we=O;O=pe;try{return me()}finally{O=we}},e.unstable_scheduleCallback=function(pe,me,we){var Ee=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ee+we:Ee):we=Ee,pe){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=we+Re,pe={id:M++,callback:me,priorityLevel:pe,startTime:we,expirationTime:Re,sortIndex:-1},we>Ee?(pe.sortIndex=we,t(_,pe),i(v)===null&&pe===i(_)&&(z?(V(xe),xe=-1):z=!0,he(ne,we-Ee))):(pe.sortIndex=Re,t(v,pe),D||R||(D=!0,pi(re))),pe},e.unstable_shouldYield=Ge,e.unstable_wrapCallback=function(pe){var me=O;return function(){var we=O;O=me;try{return pe.apply(this,arguments)}finally{O=we}}}})(iK);(function(e){e.exports=iK})(tK);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rK=Mg.exports,ja=tK.exports;function it(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nK=new Set,Sb={};function j1(e,t){Eg(e,t),Eg(e+"Capture",t)}function Eg(e,t){for(Sb[e]=t,e=0;e<t.length;e++)nK.add(t[e])}var ep=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Y8=Object.prototype.hasOwnProperty,vye=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nj={},Fj={};function wye(e){return Y8.call(Fj,e)?!0:Y8.call(Nj,e)?!1:vye.test(e)?Fj[e]=!0:(Nj[e]=!0,!1)}function bye(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _ye(e,t,i,r){if(t===null||typeof t>"u"||bye(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function So(e,t,i,r,s,l,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=d}var ys={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ys[e]=new So(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ys[t]=new So(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ys[e]=new So(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ys[e]=new So(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ys[e]=new So(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ys[e]=new So(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ys[e]=new So(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ys[e]=new So(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ys[e]=new So(e,5,!1,e.toLowerCase(),null,!1,!1)});var BO=/[\-:]([a-z])/g;function GO(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(BO,GO);ys[t]=new So(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(BO,GO);ys[t]=new So(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(BO,GO);ys[t]=new So(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ys[e]=new So(e,1,!1,e.toLowerCase(),null,!1,!1)});ys.xlinkHref=new So("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ys[e]=new So(e,1,!1,e.toLowerCase(),null,!0,!0)});function qO(e,t,i,r){var s=ys.hasOwnProperty(t)?ys[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_ye(t,i,s,r)&&(i=null),r||s===null?wye(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):s.mustUseProperty?e[s.propertyName]=i===null?s.type===3?!1:"":i:(t=s.attributeName,r=s.attributeNamespace,i===null?e.removeAttribute(t):(s=s.type,i=s===3||s===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var pp=rK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tx=Symbol.for("react.element"),Em=Symbol.for("react.portal"),Tm=Symbol.for("react.fragment"),HO=Symbol.for("react.strict_mode"),X8=Symbol.for("react.profiler"),sK=Symbol.for("react.provider"),oK=Symbol.for("react.context"),WO=Symbol.for("react.forward_ref"),Q8=Symbol.for("react.suspense"),eT=Symbol.for("react.suspense_list"),JO=Symbol.for("react.memo"),xd=Symbol.for("react.lazy"),aK=Symbol.for("react.offscreen"),Dj=Symbol.iterator;function ew(e){return e===null||typeof e!="object"?null:(e=Dj&&e[Dj]||e["@@iterator"],typeof e=="function"?e:null)}var Ur=Object.assign,d7;function Rw(e){if(d7===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);d7=t&&t[1]||""}return`
`+d7+e}var f7=!1;function y7(e,t){if(!e||f7)return"";f7=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var r=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){r=_}e.call(t.prototype)}else{try{throw Error()}catch(_){r=_}e()}}catch(_){if(_&&r&&typeof _.stack=="string"){for(var s=_.stack.split(`
`),l=r.stack.split(`
`),d=s.length-1,y=l.length-1;1<=d&&0<=y&&s[d]!==l[y];)y--;for(;1<=d&&0<=y;d--,y--)if(s[d]!==l[y]){if(d!==1||y!==1)do if(d--,y--,0>y||s[d]!==l[y]){var v=`
`+s[d].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=d&&0<=y);break}}}finally{f7=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Rw(e):""}function xye(e){switch(e.tag){case 5:return Rw(e.type);case 16:return Rw("Lazy");case 13:return Rw("Suspense");case 19:return Rw("SuspenseList");case 0:case 2:case 15:return e=y7(e.type,!1),e;case 11:return e=y7(e.type.render,!1),e;case 1:return e=y7(e.type,!0),e;default:return""}}function tT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tm:return"Fragment";case Em:return"Portal";case X8:return"Profiler";case HO:return"StrictMode";case Q8:return"Suspense";case eT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oK:return(e.displayName||"Context")+".Consumer";case sK:return(e._context.displayName||"Context")+".Provider";case WO:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case JO:return t=e.displayName||null,t!==null?t:tT(e.type)||"Memo";case xd:t=e._payload,e=e._init;try{return tT(e(t))}catch{}}return null}function Sye(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tT(t);case 8:return t===HO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sf(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lK(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $ye(e){var t=lK(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,l=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(d){r=""+d,l.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ix(e){e._valueTracker||(e._valueTracker=$ye(e))}function uK(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=lK(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function m4(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function iT(e,t){var i=t.checked;return Ur({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function jj(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=sf(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cK(e,t){t=t.checked,t!=null&&qO(e,"checked",t,!1)}function rT(e,t){cK(e,t);var i=sf(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nT(e,t.type,i):t.hasOwnProperty("defaultValue")&&nT(e,t.type,sf(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zj(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function nT(e,t,i){(t!=="number"||m4(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Nw=Array.isArray;function eg(e,t,i,r){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&r&&(e[i].defaultSelected=!0)}else{for(i=""+sf(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function sT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(it(91));return Ur({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vj(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(it(92));if(Nw(i)){if(1<i.length)throw Error(it(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:sf(i)}}function hK(e,t){var i=sf(t.value),r=sf(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function Uj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pK(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pK(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rx,dK=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rx=rx||document.createElement("div"),rx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $b(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var N2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mye=["Webkit","ms","Moz","O"];Object.keys(N2).forEach(function(e){Mye.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),N2[t]=N2[e]})});function fK(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||N2.hasOwnProperty(e)&&N2[e]?(""+t).trim():t+"px"}function yK(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,s=fK(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,s):e[i]=s}}var Eye=Ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aT(e,t){if(t){if(Eye[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(it(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(it(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(it(61))}if(t.style!=null&&typeof t.style!="object")throw Error(it(62))}}function lT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uT=null;function KO(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cT=null,tg=null,ig=null;function Bj(e){if(e=E3(e)){if(typeof cT!="function")throw Error(it(280));var t=e.stateNode;t&&(t=v6(t),cT(e.stateNode,e.type,t))}}function mK(e){tg?ig?ig.push(e):ig=[e]:tg=e}function gK(){if(tg){var e=tg,t=ig;if(ig=tg=null,Bj(e),t)for(e=0;e<t.length;e++)Bj(t[e])}}function vK(e,t){return e(t)}function wK(){}var m7=!1;function bK(e,t,i){if(m7)return e(t,i);m7=!0;try{return vK(e,t,i)}finally{m7=!1,(tg!==null||ig!==null)&&(wK(),gK())}}function Mb(e,t){var i=e.stateNode;if(i===null)return null;var r=v6(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(it(231,t,typeof i));return i}var hT=!1;if(ep)try{var tw={};Object.defineProperty(tw,"passive",{get:function(){hT=!0}}),window.addEventListener("test",tw,tw),window.removeEventListener("test",tw,tw)}catch{hT=!1}function Tye(e,t,i,r,s,l,d,y,v){var _=Array.prototype.slice.call(arguments,3);try{t.apply(i,_)}catch(M){this.onError(M)}}var F2=!1,g4=null,v4=!1,pT=null,Iye={onError:function(e){F2=!0,g4=e}};function Cye(e,t,i,r,s,l,d,y,v){F2=!1,g4=null,Tye.apply(Iye,arguments)}function kye(e,t,i,r,s,l,d,y,v){if(Cye.apply(this,arguments),F2){if(F2){var _=g4;F2=!1,g4=null}else throw Error(it(198));v4||(v4=!0,pT=_)}}function z1(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function _K(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gj(e){if(z1(e)!==e)throw Error(it(188))}function Aye(e){var t=e.alternate;if(!t){if(t=z1(e),t===null)throw Error(it(188));return t!==e?null:e}for(var i=e,r=t;;){var s=i.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){i=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===i)return Gj(s),e;if(l===r)return Gj(s),t;l=l.sibling}throw Error(it(188))}if(i.return!==r.return)i=s,r=l;else{for(var d=!1,y=s.child;y;){if(y===i){d=!0,i=s,r=l;break}if(y===r){d=!0,r=s,i=l;break}y=y.sibling}if(!d){for(y=l.child;y;){if(y===i){d=!0,i=l,r=s;break}if(y===r){d=!0,r=l,i=s;break}y=y.sibling}if(!d)throw Error(it(189))}}if(i.alternate!==r)throw Error(it(190))}if(i.tag!==3)throw Error(it(188));return i.stateNode.current===i?e:t}function xK(e){return e=Aye(e),e!==null?SK(e):null}function SK(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=SK(e);if(t!==null)return t;e=e.sibling}return null}var $K=ja.unstable_scheduleCallback,qj=ja.unstable_cancelCallback,Oye=ja.unstable_shouldYield,Lye=ja.unstable_requestPaint,cn=ja.unstable_now,Pye=ja.unstable_getCurrentPriorityLevel,ZO=ja.unstable_ImmediatePriority,MK=ja.unstable_UserBlockingPriority,w4=ja.unstable_NormalPriority,Rye=ja.unstable_LowPriority,EK=ja.unstable_IdlePriority,f6=null,Mc=null;function Nye(e){if(Mc&&typeof Mc.onCommitFiberRoot=="function")try{Mc.onCommitFiberRoot(f6,e,void 0,(e.current.flags&128)===128)}catch{}}var ku=Math.clz32?Math.clz32:jye,Fye=Math.log,Dye=Math.LN2;function jye(e){return e>>>=0,e===0?32:31-(Fye(e)/Dye|0)|0}var nx=64,sx=4194304;function Fw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function b4(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,d=i&268435455;if(d!==0){var y=d&~s;y!==0?r=Fw(y):(l&=d,l!==0&&(r=Fw(l)))}else d=i&~s,d!==0?r=Fw(d):l!==0&&(r=Fw(l));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if((r&4)!==0&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-ku(t),s=1<<i,r|=e[i],t&=~s;return r}function zye(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vye(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var d=31-ku(l),y=1<<d,v=s[d];v===-1?((y&i)===0||(y&r)!==0)&&(s[d]=zye(y,t)):v<=t&&(e.expiredLanes|=y),l&=~y}}function dT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TK(){var e=nx;return nx<<=1,(nx&4194240)===0&&(nx=64),e}function g7(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function $3(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ku(t),e[t]=i}function Uye(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var s=31-ku(i),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,i&=~l}}function YO(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-ku(i),s=1<<r;s&t|e[r]&t&&(e[r]|=t),i&=~s}}var Ji=0;function IK(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var CK,XO,kK,AK,OK,fT=!1,ox=[],Gd=null,qd=null,Hd=null,Eb=new Map,Tb=new Map,Od=[],Bye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hj(e,t){switch(e){case"focusin":case"focusout":Gd=null;break;case"dragenter":case"dragleave":qd=null;break;case"mouseover":case"mouseout":Hd=null;break;case"pointerover":case"pointerout":Eb.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tb.delete(t.pointerId)}}function iw(e,t,i,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=E3(t),t!==null&&XO(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gye(e,t,i,r,s){switch(t){case"focusin":return Gd=iw(Gd,e,t,i,r,s),!0;case"dragenter":return qd=iw(qd,e,t,i,r,s),!0;case"mouseover":return Hd=iw(Hd,e,t,i,r,s),!0;case"pointerover":var l=s.pointerId;return Eb.set(l,iw(Eb.get(l)||null,e,t,i,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Tb.set(l,iw(Tb.get(l)||null,e,t,i,r,s)),!0}return!1}function LK(e){var t=B0(e.target);if(t!==null){var i=z1(t);if(i!==null){if(t=i.tag,t===13){if(t=_K(i),t!==null){e.blockedOn=t,OK(e.priority,function(){kK(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function N5(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=yT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);uT=r,i.target.dispatchEvent(r),uT=null}else return t=E3(i),t!==null&&XO(t),e.blockedOn=i,!1;t.shift()}return!0}function Wj(e,t,i){N5(e)&&i.delete(t)}function qye(){fT=!1,Gd!==null&&N5(Gd)&&(Gd=null),qd!==null&&N5(qd)&&(qd=null),Hd!==null&&N5(Hd)&&(Hd=null),Eb.forEach(Wj),Tb.forEach(Wj)}function rw(e,t){e.blockedOn===t&&(e.blockedOn=null,fT||(fT=!0,ja.unstable_scheduleCallback(ja.unstable_NormalPriority,qye)))}function Ib(e){function t(s){return rw(s,e)}if(0<ox.length){rw(ox[0],e);for(var i=1;i<ox.length;i++){var r=ox[i];r.blockedOn===e&&(r.blockedOn=null)}}for(Gd!==null&&rw(Gd,e),qd!==null&&rw(qd,e),Hd!==null&&rw(Hd,e),Eb.forEach(t),Tb.forEach(t),i=0;i<Od.length;i++)r=Od[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<Od.length&&(i=Od[0],i.blockedOn===null);)LK(i),i.blockedOn===null&&Od.shift()}var rg=pp.ReactCurrentBatchConfig,_4=!0;function Hye(e,t,i,r){var s=Ji,l=rg.transition;rg.transition=null;try{Ji=1,QO(e,t,i,r)}finally{Ji=s,rg.transition=l}}function Wye(e,t,i,r){var s=Ji,l=rg.transition;rg.transition=null;try{Ji=4,QO(e,t,i,r)}finally{Ji=s,rg.transition=l}}function QO(e,t,i,r){if(_4){var s=yT(e,t,i,r);if(s===null)T7(e,t,r,x4,i),Hj(e,r);else if(Gye(s,e,t,i,r))r.stopPropagation();else if(Hj(e,r),t&4&&-1<Bye.indexOf(e)){for(;s!==null;){var l=E3(s);if(l!==null&&CK(l),l=yT(e,t,i,r),l===null&&T7(e,t,r,x4,i),l===s)break;s=l}s!==null&&r.stopPropagation()}else T7(e,t,r,null,i)}}var x4=null;function yT(e,t,i,r){if(x4=null,e=KO(r),e=B0(e),e!==null)if(t=z1(e),t===null)e=null;else if(i=t.tag,i===13){if(e=_K(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return x4=e,null}function PK(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pye()){case ZO:return 1;case MK:return 4;case w4:case Rye:return 16;case EK:return 536870912;default:return 16}default:return 16}}var Nd=null,eL=null,F5=null;function RK(){if(F5)return F5;var e,t=eL,i=t.length,r,s="value"in Nd?Nd.value:Nd.textContent,l=s.length;for(e=0;e<i&&t[e]===s[e];e++);var d=i-e;for(r=1;r<=d&&t[i-r]===s[l-r];r++);return F5=s.slice(e,1<r?1-r:void 0)}function D5(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ax(){return!0}function Jj(){return!1}function Ba(e){function t(i,r,s,l,d){this._reactName=i,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(i=e[y],this[y]=i?i(l):l[y]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ax:Jj,this.isPropagationStopped=Jj,this}return Ur(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ax)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ax)},persist:function(){},isPersistent:ax}),t}var av={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tL=Ba(av),M3=Ur({},av,{view:0,detail:0}),Jye=Ba(M3),v7,w7,nw,y6=Ur({},M3,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iL,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nw&&(nw&&e.type==="mousemove"?(v7=e.screenX-nw.screenX,w7=e.screenY-nw.screenY):w7=v7=0,nw=e),v7)},movementY:function(e){return"movementY"in e?e.movementY:w7}}),Kj=Ba(y6),Kye=Ur({},y6,{dataTransfer:0}),Zye=Ba(Kye),Yye=Ur({},M3,{relatedTarget:0}),b7=Ba(Yye),Xye=Ur({},av,{animationName:0,elapsedTime:0,pseudoElement:0}),Qye=Ba(Xye),eme=Ur({},av,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tme=Ba(eme),ime=Ur({},av,{data:0}),Zj=Ba(ime),rme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ome(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sme[e])?!!t[e]:!1}function iL(){return ome}var ame=Ur({},M3,{key:function(e){if(e.key){var t=rme[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=D5(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nme[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iL,charCode:function(e){return e.type==="keypress"?D5(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?D5(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lme=Ba(ame),ume=Ur({},y6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yj=Ba(ume),cme=Ur({},M3,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iL}),hme=Ba(cme),pme=Ur({},av,{propertyName:0,elapsedTime:0,pseudoElement:0}),dme=Ba(pme),fme=Ur({},y6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yme=Ba(fme),mme=[9,13,27,32],rL=ep&&"CompositionEvent"in window,D2=null;ep&&"documentMode"in document&&(D2=document.documentMode);var gme=ep&&"TextEvent"in window&&!D2,NK=ep&&(!rL||D2&&8<D2&&11>=D2),Xj=String.fromCharCode(32),Qj=!1;function FK(e,t){switch(e){case"keyup":return mme.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DK(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Im=!1;function vme(e,t){switch(e){case"compositionend":return DK(t);case"keypress":return t.which!==32?null:(Qj=!0,Xj);case"textInput":return e=t.data,e===Xj&&Qj?null:e;default:return null}}function wme(e,t){if(Im)return e==="compositionend"||!rL&&FK(e,t)?(e=RK(),F5=eL=Nd=null,Im=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return NK&&t.locale!=="ko"?null:t.data;default:return null}}var bme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ez(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bme[e.type]:t==="textarea"}function jK(e,t,i,r){mK(r),t=S4(t,"onChange"),0<t.length&&(i=new tL("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var j2=null,Cb=null;function _me(e){ZK(e,0)}function m6(e){var t=Am(e);if(uK(t))return e}function xme(e,t){if(e==="change")return t}var zK=!1;if(ep){var _7;if(ep){var x7="oninput"in document;if(!x7){var tz=document.createElement("div");tz.setAttribute("oninput","return;"),x7=typeof tz.oninput=="function"}_7=x7}else _7=!1;zK=_7&&(!document.documentMode||9<document.documentMode)}function iz(){j2&&(j2.detachEvent("onpropertychange",VK),Cb=j2=null)}function VK(e){if(e.propertyName==="value"&&m6(Cb)){var t=[];jK(t,Cb,e,KO(e)),bK(_me,t)}}function Sme(e,t,i){e==="focusin"?(iz(),j2=t,Cb=i,j2.attachEvent("onpropertychange",VK)):e==="focusout"&&iz()}function $me(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return m6(Cb)}function Mme(e,t){if(e==="click")return m6(t)}function Eme(e,t){if(e==="input"||e==="change")return m6(t)}function Tme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nu=typeof Object.is=="function"?Object.is:Tme;function kb(e,t){if(Nu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var s=i[r];if(!Y8.call(t,s)||!Nu(e[s],t[s]))return!1}return!0}function rz(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nz(e,t){var i=rz(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=rz(i)}}function UK(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UK(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BK(){for(var e=window,t=m4();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=m4(e.document)}return t}function nL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ime(e){var t=BK(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&UK(i.ownerDocument.documentElement,i)){if(r!==null&&nL(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=i.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=nz(i,l);var d=nz(i,r);s&&d&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cme=ep&&"documentMode"in document&&11>=document.documentMode,Cm=null,mT=null,z2=null,gT=!1;function sz(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;gT||Cm==null||Cm!==m4(r)||(r=Cm,"selectionStart"in r&&nL(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),z2&&kb(z2,r)||(z2=r,r=S4(mT,"onSelect"),0<r.length&&(t=new tL("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Cm)))}function lx(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var km={animationend:lx("Animation","AnimationEnd"),animationiteration:lx("Animation","AnimationIteration"),animationstart:lx("Animation","AnimationStart"),transitionend:lx("Transition","TransitionEnd")},S7={},GK={};ep&&(GK=document.createElement("div").style,"AnimationEvent"in window||(delete km.animationend.animation,delete km.animationiteration.animation,delete km.animationstart.animation),"TransitionEvent"in window||delete km.transitionend.transition);function g6(e){if(S7[e])return S7[e];if(!km[e])return e;var t=km[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in GK)return S7[e]=t[i];return e}var qK=g6("animationend"),HK=g6("animationiteration"),WK=g6("animationstart"),JK=g6("transitionend"),KK=new Map,oz="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,t){KK.set(e,t),j1(t,[e])}for(var $7=0;$7<oz.length;$7++){var M7=oz[$7],kme=M7.toLowerCase(),Ame=M7[0].toUpperCase()+M7.slice(1);ff(kme,"on"+Ame)}ff(qK,"onAnimationEnd");ff(HK,"onAnimationIteration");ff(WK,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(JK,"onTransitionEnd");Eg("onMouseEnter",["mouseout","mouseover"]);Eg("onMouseLeave",["mouseout","mouseover"]);Eg("onPointerEnter",["pointerout","pointerover"]);Eg("onPointerLeave",["pointerout","pointerover"]);j1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));j1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));j1("onBeforeInput",["compositionend","keypress","textInput","paste"]);j1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));j1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));j1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ome=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dw));function az(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,kye(r,t,void 0,e),e.currentTarget=null}function ZK(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var d=r.length-1;0<=d;d--){var y=r[d],v=y.instance,_=y.currentTarget;if(y=y.listener,v!==l&&s.isPropagationStopped())break e;az(s,y,_),l=v}else for(d=0;d<r.length;d++){if(y=r[d],v=y.instance,_=y.currentTarget,y=y.listener,v!==l&&s.isPropagationStopped())break e;az(s,y,_),l=v}}}if(v4)throw e=pT,v4=!1,pT=null,e}function fr(e,t){var i=t[xT];i===void 0&&(i=t[xT]=new Set);var r=e+"__bubble";i.has(r)||(YK(t,e,2,!1),i.add(r))}function E7(e,t,i){var r=0;t&&(r|=4),YK(i,e,r,t)}var ux="_reactListening"+Math.random().toString(36).slice(2);function Ab(e){if(!e[ux]){e[ux]=!0,nK.forEach(function(i){i!=="selectionchange"&&(Ome.has(i)||E7(i,!1,e),E7(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ux]||(t[ux]=!0,E7("selectionchange",!1,t))}}function YK(e,t,i,r){switch(PK(t)){case 1:var s=Hye;break;case 4:s=Wye;break;default:s=QO}i=s.bind(null,t,i,e),s=void 0,!hT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function T7(e,t,i,r,s){var l=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var y=r.stateNode.containerInfo;if(y===s||y.nodeType===8&&y.parentNode===s)break;if(d===4)for(d=r.return;d!==null;){var v=d.tag;if((v===3||v===4)&&(v=d.stateNode.containerInfo,v===s||v.nodeType===8&&v.parentNode===s))return;d=d.return}for(;y!==null;){if(d=B0(y),d===null)return;if(v=d.tag,v===5||v===6){r=l=d;continue e}y=y.parentNode}}r=r.return}bK(function(){var _=l,M=KO(i),k=[];e:{var O=KK.get(e);if(O!==void 0){var R=tL,D=e;switch(e){case"keypress":if(D5(i)===0)break e;case"keydown":case"keyup":R=lme;break;case"focusin":D="focus",R=b7;break;case"focusout":D="blur",R=b7;break;case"beforeblur":case"afterblur":R=b7;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Kj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Zye;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=hme;break;case qK:case HK:case WK:R=Qye;break;case JK:R=dme;break;case"scroll":R=Jye;break;case"wheel":R=yme;break;case"copy":case"cut":case"paste":R=tme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Yj}var z=(t&4)!==0,B=!z&&e==="scroll",V=z?O!==null?O+"Capture":null:O;z=[];for(var q=_,J;q!==null;){J=q;var ne=J.stateNode;if(J.tag===5&&ne!==null&&(J=ne,V!==null&&(ne=Mb(q,V),ne!=null&&z.push(Ob(q,ne,J)))),B)break;q=q.return}0<z.length&&(O=new R(O,D,null,i,M),k.push({event:O,listeners:z}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",O&&i!==uT&&(D=i.relatedTarget||i.fromElement)&&(B0(D)||D[tp]))break e;if((R||O)&&(O=M.window===M?M:(O=M.ownerDocument)?O.defaultView||O.parentWindow:window,R?(D=i.relatedTarget||i.toElement,R=_,D=D?B0(D):null,D!==null&&(B=z1(D),D!==B||D.tag!==5&&D.tag!==6)&&(D=null)):(R=null,D=_),R!==D)){if(z=Kj,ne="onMouseLeave",V="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(z=Yj,ne="onPointerLeave",V="onPointerEnter",q="pointer"),B=R==null?O:Am(R),J=D==null?O:Am(D),O=new z(ne,q+"leave",R,i,M),O.target=B,O.relatedTarget=J,ne=null,B0(M)===_&&(z=new z(V,q+"enter",D,i,M),z.target=J,z.relatedTarget=B,ne=z),B=ne,R&&D)t:{for(z=R,V=D,q=0,J=z;J;J=gy(J))q++;for(J=0,ne=V;ne;ne=gy(ne))J++;for(;0<q-J;)z=gy(z),q--;for(;0<J-q;)V=gy(V),J--;for(;q--;){if(z===V||V!==null&&z===V.alternate)break t;z=gy(z),V=gy(V)}z=null}else z=null;R!==null&&lz(k,O,R,z,!1),D!==null&&B!==null&&lz(k,B,D,z,!0)}}e:{if(O=_?Am(_):window,R=O.nodeName&&O.nodeName.toLowerCase(),R==="select"||R==="input"&&O.type==="file")var re=xme;else if(ez(O))if(zK)re=Eme;else{re=$me;var ue=Sme}else(R=O.nodeName)&&R.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(re=Mme);if(re&&(re=re(e,_))){jK(k,re,i,M);break e}ue&&ue(e,O,_),e==="focusout"&&(ue=O._wrapperState)&&ue.controlled&&O.type==="number"&&nT(O,"number",O.value)}switch(ue=_?Am(_):window,e){case"focusin":(ez(ue)||ue.contentEditable==="true")&&(Cm=ue,mT=_,z2=null);break;case"focusout":z2=mT=Cm=null;break;case"mousedown":gT=!0;break;case"contextmenu":case"mouseup":case"dragend":gT=!1,sz(k,i,M);break;case"selectionchange":if(Cme)break;case"keydown":case"keyup":sz(k,i,M)}var _e;if(rL)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Im?FK(e,i)&&(xe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(xe="onCompositionStart");xe&&(NK&&i.locale!=="ko"&&(Im||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Im&&(_e=RK()):(Nd=M,eL="value"in Nd?Nd.value:Nd.textContent,Im=!0)),ue=S4(_,xe),0<ue.length&&(xe=new Zj(xe,e,null,i,M),k.push({event:xe,listeners:ue}),_e?xe.data=_e:(_e=DK(i),_e!==null&&(xe.data=_e)))),(_e=gme?vme(e,i):wme(e,i))&&(_=S4(_,"onBeforeInput"),0<_.length&&(M=new Zj("onBeforeInput","beforeinput",null,i,M),k.push({event:M,listeners:_}),M.data=_e))}ZK(k,t)})}function Ob(e,t,i){return{instance:e,listener:t,currentTarget:i}}function S4(e,t){for(var i=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Mb(e,i),l!=null&&r.unshift(Ob(e,l,s)),l=Mb(e,t),l!=null&&r.push(Ob(e,l,s))),e=e.return}return r}function gy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lz(e,t,i,r,s){for(var l=t._reactName,d=[];i!==null&&i!==r;){var y=i,v=y.alternate,_=y.stateNode;if(v!==null&&v===r)break;y.tag===5&&_!==null&&(y=_,s?(v=Mb(i,l),v!=null&&d.unshift(Ob(i,v,y))):s||(v=Mb(i,l),v!=null&&d.push(Ob(i,v,y)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var Lme=/\r\n?/g,Pme=/\u0000|\uFFFD/g;function uz(e){return(typeof e=="string"?e:""+e).replace(Lme,`
`).replace(Pme,"")}function cx(e,t,i){if(t=uz(t),uz(e)!==t&&i)throw Error(it(425))}function $4(){}var vT=null,wT=null;function bT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _T=typeof setTimeout=="function"?setTimeout:void 0,Rme=typeof clearTimeout=="function"?clearTimeout:void 0,cz=typeof Promise=="function"?Promise:void 0,Nme=typeof queueMicrotask=="function"?queueMicrotask:typeof cz<"u"?function(e){return cz.resolve(null).then(e).catch(Fme)}:_T;function Fme(e){setTimeout(function(){throw e})}function I7(e,t){var i=t,r=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(r===0){e.removeChild(s),Ib(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=s}while(i);Ib(t)}function Wd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hz(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var lv=Math.random().toString(36).slice(2),_c="__reactFiber$"+lv,Lb="__reactProps$"+lv,tp="__reactContainer$"+lv,xT="__reactEvents$"+lv,Dme="__reactListeners$"+lv,jme="__reactHandles$"+lv;function B0(e){var t=e[_c];if(t)return t;for(var i=e.parentNode;i;){if(t=i[tp]||i[_c]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=hz(e);e!==null;){if(i=e[_c])return i;e=hz(e)}return t}e=i,i=e.parentNode}return null}function E3(e){return e=e[_c]||e[tp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Am(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(it(33))}function v6(e){return e[Lb]||null}var ST=[],Om=-1;function yf(e){return{current:e}}function gr(e){0>Om||(e.current=ST[Om],ST[Om]=null,Om--)}function lr(e,t){Om++,ST[Om]=e.current,e.current=t}var of={},js=yf(of),Ho=yf(!1),v1=of;function Tg(e,t){var i=e.type.contextTypes;if(!i)return of;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in i)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Wo(e){return e=e.childContextTypes,e!=null}function M4(){gr(Ho),gr(js)}function pz(e,t,i){if(js.current!==of)throw Error(it(168));lr(js,t),lr(Ho,i)}function XK(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(it(108,Sye(e)||"Unknown",s));return Ur({},i,r)}function E4(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||of,v1=js.current,lr(js,e),lr(Ho,Ho.current),!0}function dz(e,t,i){var r=e.stateNode;if(!r)throw Error(it(169));i?(e=XK(e,t,v1),r.__reactInternalMemoizedMergedChildContext=e,gr(Ho),gr(js),lr(js,e)):gr(Ho),lr(Ho,i)}var Rh=null,w6=!1,C7=!1;function QK(e){Rh===null?Rh=[e]:Rh.push(e)}function zme(e){w6=!0,QK(e)}function mf(){if(!C7&&Rh!==null){C7=!0;var e=0,t=Ji;try{var i=Rh;for(Ji=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Rh=null,w6=!1}catch(s){throw Rh!==null&&(Rh=Rh.slice(e+1)),$K(ZO,mf),s}finally{Ji=t,C7=!1}}return null}var Lm=[],Pm=0,T4=null,I4=0,yl=[],ml=0,w1=null,jh=1,zh="";function Gf(e,t){Lm[Pm++]=I4,Lm[Pm++]=T4,T4=e,I4=t}function eZ(e,t,i){yl[ml++]=jh,yl[ml++]=zh,yl[ml++]=w1,w1=e;var r=jh;e=zh;var s=32-ku(r)-1;r&=~(1<<s),i+=1;var l=32-ku(t)+s;if(30<l){var d=s-s%5;l=(r&(1<<d)-1).toString(32),r>>=d,s-=d,jh=1<<32-ku(t)+s|i<<s|r,zh=l+e}else jh=1<<l|i<<s|r,zh=e}function sL(e){e.return!==null&&(Gf(e,1),eZ(e,1,0))}function oL(e){for(;e===T4;)T4=Lm[--Pm],Lm[Pm]=null,I4=Lm[--Pm],Lm[Pm]=null;for(;e===w1;)w1=yl[--ml],yl[ml]=null,zh=yl[--ml],yl[ml]=null,jh=yl[--ml],yl[ml]=null}var Aa=null,ka=null,Er=!1,xu=null;function tZ(e,t){var i=_l(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function fz(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Aa=e,ka=Wd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Aa=e,ka=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=w1!==null?{id:jh,overflow:zh}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=_l(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Aa=e,ka=null,!0):!1;default:return!1}}function $T(e){return(e.mode&1)!==0&&(e.flags&128)===0}function MT(e){if(Er){var t=ka;if(t){var i=t;if(!fz(e,t)){if($T(e))throw Error(it(418));t=Wd(i.nextSibling);var r=Aa;t&&fz(e,t)?tZ(r,i):(e.flags=e.flags&-4097|2,Er=!1,Aa=e)}}else{if($T(e))throw Error(it(418));e.flags=e.flags&-4097|2,Er=!1,Aa=e}}}function yz(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Aa=e}function hx(e){if(e!==Aa)return!1;if(!Er)return yz(e),Er=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bT(e.type,e.memoizedProps)),t&&(t=ka)){if($T(e))throw iZ(),Error(it(418));for(;t;)tZ(e,t),t=Wd(t.nextSibling)}if(yz(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(it(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ka=Wd(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ka=null}}else ka=Aa?Wd(e.stateNode.nextSibling):null;return!0}function iZ(){for(var e=ka;e;)e=Wd(e.nextSibling)}function Ig(){ka=Aa=null,Er=!1}function aL(e){xu===null?xu=[e]:xu.push(e)}var Vme=pp.ReactCurrentBatchConfig;function mu(e,t){if(e&&e.defaultProps){t=Ur({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var C4=yf(null),k4=null,Rm=null,lL=null;function uL(){lL=Rm=k4=null}function cL(e){var t=C4.current;gr(C4),e._currentValue=t}function ET(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function ng(e,t){k4=e,lL=Rm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Go=!0),e.firstContext=null)}function Al(e){var t=e._currentValue;if(lL!==e)if(e={context:e,memoizedValue:t,next:null},Rm===null){if(k4===null)throw Error(it(308));Rm=e,k4.dependencies={lanes:0,firstContext:e}}else Rm=Rm.next=e;return t}var G0=null;function hL(e){G0===null?G0=[e]:G0.push(e)}function rZ(e,t,i,r){var s=t.interleaved;return s===null?(i.next=i,hL(t)):(i.next=s.next,s.next=i),t.interleaved=i,ip(e,r)}function ip(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Sd=!1;function pL(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nZ(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jd(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ei&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ip(e,i)}return s=r.interleaved,s===null?(t.next=t,hL(r)):(t.next=s.next,s.next=t),r.interleaved=t,ip(e,i)}function j5(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,YO(e,i)}}function mz(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var s=null,l=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};l===null?s=l=d:l=l.next=d,i=i.next}while(i!==null);l===null?s=l=t:l=l.next=t}else s=l=t;i={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function A4(e,t,i,r){var s=e.updateQueue;Sd=!1;var l=s.firstBaseUpdate,d=s.lastBaseUpdate,y=s.shared.pending;if(y!==null){s.shared.pending=null;var v=y,_=v.next;v.next=null,d===null?l=_:d.next=_,d=v;var M=e.alternate;M!==null&&(M=M.updateQueue,y=M.lastBaseUpdate,y!==d&&(y===null?M.firstBaseUpdate=_:y.next=_,M.lastBaseUpdate=v))}if(l!==null){var k=s.baseState;d=0,M=_=v=null,y=l;do{var O=y.lane,R=y.eventTime;if((r&O)===O){M!==null&&(M=M.next={eventTime:R,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var D=e,z=y;switch(O=t,R=i,z.tag){case 1:if(D=z.payload,typeof D=="function"){k=D.call(R,k,O);break e}k=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=z.payload,O=typeof D=="function"?D.call(R,k,O):D,O==null)break e;k=Ur({},k,O);break e;case 2:Sd=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,O=s.effects,O===null?s.effects=[y]:O.push(y))}else R={eventTime:R,lane:O,tag:y.tag,payload:y.payload,callback:y.callback,next:null},M===null?(_=M=R,v=k):M=M.next=R,d|=O;if(y=y.next,y===null){if(y=s.shared.pending,y===null)break;O=y,y=O.next,O.next=null,s.lastBaseUpdate=O,s.shared.pending=null}}while(1);if(M===null&&(v=k),s.baseState=v,s.firstBaseUpdate=_,s.lastBaseUpdate=M,t=s.shared.interleaved,t!==null){s=t;do d|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);_1|=d,e.lanes=d,e.memoizedState=k}}function gz(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=i,typeof s!="function")throw Error(it(191,s));s.call(r)}}}var sZ=new rK.Component().refs;function TT(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:Ur({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var b6={isMounted:function(e){return(e=e._reactInternals)?z1(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=ho(),s=Zd(e),l=Gh(r,s);l.payload=t,i!=null&&(l.callback=i),t=Jd(e,l,s),t!==null&&(Au(t,e,s,r),j5(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=ho(),s=Zd(e),l=Gh(r,s);l.tag=1,l.payload=t,i!=null&&(l.callback=i),t=Jd(e,l,s),t!==null&&(Au(t,e,s,r),j5(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ho(),r=Zd(e),s=Gh(i,r);s.tag=2,t!=null&&(s.callback=t),t=Jd(e,s,r),t!==null&&(Au(t,e,r,i),j5(t,e,r))}};function vz(e,t,i,r,s,l,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,d):t.prototype&&t.prototype.isPureReactComponent?!kb(i,r)||!kb(s,l):!0}function oZ(e,t,i){var r=!1,s=of,l=t.contextType;return typeof l=="object"&&l!==null?l=Al(l):(s=Wo(t)?v1:js.current,r=t.contextTypes,l=(r=r!=null)?Tg(e,s):of),t=new t(i,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=b6,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function wz(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&b6.enqueueReplaceState(t,t.state,null)}function IT(e,t,i,r){var s=e.stateNode;s.props=i,s.state=e.memoizedState,s.refs=sZ,pL(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Al(l):(l=Wo(t)?v1:js.current,s.context=Tg(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(TT(e,t,l,i),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&b6.enqueueReplaceState(s,s.state,null),A4(e,i,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function sw(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(it(309));var r=i.stateNode}if(!r)throw Error(it(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(d){var y=s.refs;y===sZ&&(y=s.refs={}),d===null?delete y[l]:y[l]=d},t._stringRef=l,t)}if(typeof e!="string")throw Error(it(284));if(!i._owner)throw Error(it(290,e))}return e}function px(e,t){throw e=Object.prototype.toString.call(t),Error(it(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bz(e){var t=e._init;return t(e._payload)}function aZ(e){function t(V,q){if(e){var J=V.deletions;J===null?(V.deletions=[q],V.flags|=16):J.push(q)}}function i(V,q){if(!e)return null;for(;q!==null;)t(V,q),q=q.sibling;return null}function r(V,q){for(V=new Map;q!==null;)q.key!==null?V.set(q.key,q):V.set(q.index,q),q=q.sibling;return V}function s(V,q){return V=Yd(V,q),V.index=0,V.sibling=null,V}function l(V,q,J){return V.index=J,e?(J=V.alternate,J!==null?(J=J.index,J<q?(V.flags|=2,q):J):(V.flags|=2,q)):(V.flags|=1048576,q)}function d(V){return e&&V.alternate===null&&(V.flags|=2),V}function y(V,q,J,ne){return q===null||q.tag!==6?(q=N7(J,V.mode,ne),q.return=V,q):(q=s(q,J),q.return=V,q)}function v(V,q,J,ne){var re=J.type;return re===Tm?M(V,q,J.props.children,ne,J.key):q!==null&&(q.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===xd&&bz(re)===q.type)?(ne=s(q,J.props),ne.ref=sw(V,q,J),ne.return=V,ne):(ne=q5(J.type,J.key,J.props,null,V.mode,ne),ne.ref=sw(V,q,J),ne.return=V,ne)}function _(V,q,J,ne){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=F7(J,V.mode,ne),q.return=V,q):(q=s(q,J.children||[]),q.return=V,q)}function M(V,q,J,ne,re){return q===null||q.tag!==7?(q=a1(J,V.mode,ne,re),q.return=V,q):(q=s(q,J),q.return=V,q)}function k(V,q,J){if(typeof q=="string"&&q!==""||typeof q=="number")return q=N7(""+q,V.mode,J),q.return=V,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case tx:return J=q5(q.type,q.key,q.props,null,V.mode,J),J.ref=sw(V,null,q),J.return=V,J;case Em:return q=F7(q,V.mode,J),q.return=V,q;case xd:var ne=q._init;return k(V,ne(q._payload),J)}if(Nw(q)||ew(q))return q=a1(q,V.mode,J,null),q.return=V,q;px(V,q)}return null}function O(V,q,J,ne){var re=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return re!==null?null:y(V,q,""+J,ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case tx:return J.key===re?v(V,q,J,ne):null;case Em:return J.key===re?_(V,q,J,ne):null;case xd:return re=J._init,O(V,q,re(J._payload),ne)}if(Nw(J)||ew(J))return re!==null?null:M(V,q,J,ne,null);px(V,J)}return null}function R(V,q,J,ne,re){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return V=V.get(J)||null,y(q,V,""+ne,re);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case tx:return V=V.get(ne.key===null?J:ne.key)||null,v(q,V,ne,re);case Em:return V=V.get(ne.key===null?J:ne.key)||null,_(q,V,ne,re);case xd:var ue=ne._init;return R(V,q,J,ue(ne._payload),re)}if(Nw(ne)||ew(ne))return V=V.get(J)||null,M(q,V,ne,re,null);px(q,ne)}return null}function D(V,q,J,ne){for(var re=null,ue=null,_e=q,xe=q=0,Ne=null;_e!==null&&xe<J.length;xe++){_e.index>xe?(Ne=_e,_e=null):Ne=_e.sibling;var Ce=O(V,_e,J[xe],ne);if(Ce===null){_e===null&&(_e=Ne);break}e&&_e&&Ce.alternate===null&&t(V,_e),q=l(Ce,q,xe),ue===null?re=Ce:ue.sibling=Ce,ue=Ce,_e=Ne}if(xe===J.length)return i(V,_e),Er&&Gf(V,xe),re;if(_e===null){for(;xe<J.length;xe++)_e=k(V,J[xe],ne),_e!==null&&(q=l(_e,q,xe),ue===null?re=_e:ue.sibling=_e,ue=_e);return Er&&Gf(V,xe),re}for(_e=r(V,_e);xe<J.length;xe++)Ne=R(_e,V,xe,J[xe],ne),Ne!==null&&(e&&Ne.alternate!==null&&_e.delete(Ne.key===null?xe:Ne.key),q=l(Ne,q,xe),ue===null?re=Ne:ue.sibling=Ne,ue=Ne);return e&&_e.forEach(function(Ge){return t(V,Ge)}),Er&&Gf(V,xe),re}function z(V,q,J,ne){var re=ew(J);if(typeof re!="function")throw Error(it(150));if(J=re.call(J),J==null)throw Error(it(151));for(var ue=re=null,_e=q,xe=q=0,Ne=null,Ce=J.next();_e!==null&&!Ce.done;xe++,Ce=J.next()){_e.index>xe?(Ne=_e,_e=null):Ne=_e.sibling;var Ge=O(V,_e,Ce.value,ne);if(Ge===null){_e===null&&(_e=Ne);break}e&&_e&&Ge.alternate===null&&t(V,_e),q=l(Ge,q,xe),ue===null?re=Ge:ue.sibling=Ge,ue=Ge,_e=Ne}if(Ce.done)return i(V,_e),Er&&Gf(V,xe),re;if(_e===null){for(;!Ce.done;xe++,Ce=J.next())Ce=k(V,Ce.value,ne),Ce!==null&&(q=l(Ce,q,xe),ue===null?re=Ce:ue.sibling=Ce,ue=Ce);return Er&&Gf(V,xe),re}for(_e=r(V,_e);!Ce.done;xe++,Ce=J.next())Ce=R(_e,V,xe,Ce.value,ne),Ce!==null&&(e&&Ce.alternate!==null&&_e.delete(Ce.key===null?xe:Ce.key),q=l(Ce,q,xe),ue===null?re=Ce:ue.sibling=Ce,ue=Ce);return e&&_e.forEach(function(Ze){return t(V,Ze)}),Er&&Gf(V,xe),re}function B(V,q,J,ne){if(typeof J=="object"&&J!==null&&J.type===Tm&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case tx:e:{for(var re=J.key,ue=q;ue!==null;){if(ue.key===re){if(re=J.type,re===Tm){if(ue.tag===7){i(V,ue.sibling),q=s(ue,J.props.children),q.return=V,V=q;break e}}else if(ue.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===xd&&bz(re)===ue.type){i(V,ue.sibling),q=s(ue,J.props),q.ref=sw(V,ue,J),q.return=V,V=q;break e}i(V,ue);break}else t(V,ue);ue=ue.sibling}J.type===Tm?(q=a1(J.props.children,V.mode,ne,J.key),q.return=V,V=q):(ne=q5(J.type,J.key,J.props,null,V.mode,ne),ne.ref=sw(V,q,J),ne.return=V,V=ne)}return d(V);case Em:e:{for(ue=J.key;q!==null;){if(q.key===ue)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){i(V,q.sibling),q=s(q,J.children||[]),q.return=V,V=q;break e}else{i(V,q);break}else t(V,q);q=q.sibling}q=F7(J,V.mode,ne),q.return=V,V=q}return d(V);case xd:return ue=J._init,B(V,q,ue(J._payload),ne)}if(Nw(J))return D(V,q,J,ne);if(ew(J))return z(V,q,J,ne);px(V,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,q!==null&&q.tag===6?(i(V,q.sibling),q=s(q,J),q.return=V,V=q):(i(V,q),q=N7(J,V.mode,ne),q.return=V,V=q),d(V)):i(V,q)}return B}var Cg=aZ(!0),lZ=aZ(!1),T3={},Ec=yf(T3),Pb=yf(T3),Rb=yf(T3);function q0(e){if(e===T3)throw Error(it(174));return e}function dL(e,t){switch(lr(Rb,t),lr(Pb,e),lr(Ec,T3),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oT(t,e)}gr(Ec),lr(Ec,t)}function kg(){gr(Ec),gr(Pb),gr(Rb)}function uZ(e){q0(Rb.current);var t=q0(Ec.current),i=oT(t,e.type);t!==i&&(lr(Pb,e),lr(Ec,i))}function fL(e){Pb.current===e&&(gr(Ec),gr(Pb))}var Dr=yf(0);function O4(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var k7=[];function yL(){for(var e=0;e<k7.length;e++)k7[e]._workInProgressVersionPrimary=null;k7.length=0}var z5=pp.ReactCurrentDispatcher,A7=pp.ReactCurrentBatchConfig,b1=0,Vr=null,Fn=null,Xn=null,L4=!1,V2=!1,Nb=0,Ume=0;function Es(){throw Error(it(321))}function mL(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Nu(e[i],t[i]))return!1;return!0}function gL(e,t,i,r,s,l){if(b1=l,Vr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z5.current=e===null||e.memoizedState===null?Hme:Wme,e=i(r,s),V2){l=0;do{if(V2=!1,Nb=0,25<=l)throw Error(it(301));l+=1,Xn=Fn=null,t.updateQueue=null,z5.current=Jme,e=i(r,s)}while(V2)}if(z5.current=P4,t=Fn!==null&&Fn.next!==null,b1=0,Xn=Fn=Vr=null,L4=!1,t)throw Error(it(300));return e}function vL(){var e=Nb!==0;return Nb=0,e}function gc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?Vr.memoizedState=Xn=e:Xn=Xn.next=e,Xn}function Ol(){if(Fn===null){var e=Vr.alternate;e=e!==null?e.memoizedState:null}else e=Fn.next;var t=Xn===null?Vr.memoizedState:Xn.next;if(t!==null)Xn=t,Fn=e;else{if(e===null)throw Error(it(310));Fn=e,e={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Xn===null?Vr.memoizedState=Xn=e:Xn=Xn.next=e}return Xn}function Fb(e,t){return typeof t=="function"?t(e):t}function O7(e){var t=Ol(),i=t.queue;if(i===null)throw Error(it(311));i.lastRenderedReducer=e;var r=Fn,s=r.baseQueue,l=i.pending;if(l!==null){if(s!==null){var d=s.next;s.next=l.next,l.next=d}r.baseQueue=s=l,i.pending=null}if(s!==null){l=s.next,r=r.baseState;var y=d=null,v=null,_=l;do{var M=_.lane;if((b1&M)===M)v!==null&&(v=v.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),r=_.hasEagerState?_.eagerState:e(r,_.action);else{var k={lane:M,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};v===null?(y=v=k,d=r):v=v.next=k,Vr.lanes|=M,_1|=M}_=_.next}while(_!==null&&_!==l);v===null?d=r:v.next=y,Nu(r,t.memoizedState)||(Go=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=v,i.lastRenderedState=r}if(e=i.interleaved,e!==null){s=e;do l=s.lane,Vr.lanes|=l,_1|=l,s=s.next;while(s!==e)}else s===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function L7(e){var t=Ol(),i=t.queue;if(i===null)throw Error(it(311));i.lastRenderedReducer=e;var r=i.dispatch,s=i.pending,l=t.memoizedState;if(s!==null){i.pending=null;var d=s=s.next;do l=e(l,d.action),d=d.next;while(d!==s);Nu(l,t.memoizedState)||(Go=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),i.lastRenderedState=l}return[l,r]}function cZ(){}function hZ(e,t){var i=Vr,r=Ol(),s=t(),l=!Nu(r.memoizedState,s);if(l&&(r.memoizedState=s,Go=!0),r=r.queue,wL(fZ.bind(null,i,r,e),[e]),r.getSnapshot!==t||l||Xn!==null&&Xn.memoizedState.tag&1){if(i.flags|=2048,Db(9,dZ.bind(null,i,r,s,t),void 0,null),es===null)throw Error(it(349));(b1&30)!==0||pZ(i,t,s)}return s}function pZ(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Vr.updateQueue,t===null?(t={lastEffect:null,stores:null},Vr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function dZ(e,t,i,r){t.value=i,t.getSnapshot=r,yZ(t)&&mZ(e)}function fZ(e,t,i){return i(function(){yZ(t)&&mZ(e)})}function yZ(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Nu(e,i)}catch{return!0}}function mZ(e){var t=ip(e,1);t!==null&&Au(t,e,1,-1)}function _z(e){var t=gc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fb,lastRenderedState:e},t.queue=e,e=e.dispatch=qme.bind(null,Vr,e),[t.memoizedState,e]}function Db(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=Vr.updateQueue,t===null?(t={lastEffect:null,stores:null},Vr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function gZ(){return Ol().memoizedState}function V5(e,t,i,r){var s=gc();Vr.flags|=e,s.memoizedState=Db(1|t,i,void 0,r===void 0?null:r)}function _6(e,t,i,r){var s=Ol();r=r===void 0?null:r;var l=void 0;if(Fn!==null){var d=Fn.memoizedState;if(l=d.destroy,r!==null&&mL(r,d.deps)){s.memoizedState=Db(t,i,l,r);return}}Vr.flags|=e,s.memoizedState=Db(1|t,i,l,r)}function xz(e,t){return V5(8390656,8,e,t)}function wL(e,t){return _6(2048,8,e,t)}function vZ(e,t){return _6(4,2,e,t)}function wZ(e,t){return _6(4,4,e,t)}function bZ(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _Z(e,t,i){return i=i!=null?i.concat([e]):null,_6(4,4,bZ.bind(null,t,e),i)}function bL(){}function xZ(e,t){var i=Ol();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&mL(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function SZ(e,t){var i=Ol();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&mL(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function $Z(e,t,i){return(b1&21)===0?(e.baseState&&(e.baseState=!1,Go=!0),e.memoizedState=i):(Nu(i,t)||(i=TK(),Vr.lanes|=i,_1|=i,e.baseState=!0),t)}function Bme(e,t){var i=Ji;Ji=i!==0&&4>i?i:4,e(!0);var r=A7.transition;A7.transition={};try{e(!1),t()}finally{Ji=i,A7.transition=r}}function MZ(){return Ol().memoizedState}function Gme(e,t,i){var r=Zd(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},EZ(e))TZ(t,i);else if(i=rZ(e,t,i,r),i!==null){var s=ho();Au(i,e,r,s),IZ(i,t,r)}}function qme(e,t,i){var r=Zd(e),s={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(EZ(e))TZ(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var d=t.lastRenderedState,y=l(d,i);if(s.hasEagerState=!0,s.eagerState=y,Nu(y,d)){var v=t.interleaved;v===null?(s.next=s,hL(t)):(s.next=v.next,v.next=s),t.interleaved=s;return}}catch{}finally{}i=rZ(e,t,s,r),i!==null&&(s=ho(),Au(i,e,r,s),IZ(i,t,r))}}function EZ(e){var t=e.alternate;return e===Vr||t!==null&&t===Vr}function TZ(e,t){V2=L4=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function IZ(e,t,i){if((i&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,YO(e,i)}}var P4={readContext:Al,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},Hme={readContext:Al,useCallback:function(e,t){return gc().memoizedState=[e,t===void 0?null:t],e},useContext:Al,useEffect:xz,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,V5(4194308,4,bZ.bind(null,t,e),i)},useLayoutEffect:function(e,t){return V5(4194308,4,e,t)},useInsertionEffect:function(e,t){return V5(4,2,e,t)},useMemo:function(e,t){var i=gc();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=gc();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gme.bind(null,Vr,e),[r.memoizedState,e]},useRef:function(e){var t=gc();return e={current:e},t.memoizedState=e},useState:_z,useDebugValue:bL,useDeferredValue:function(e){return gc().memoizedState=e},useTransition:function(){var e=_z(!1),t=e[0];return e=Bme.bind(null,e[1]),gc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=Vr,s=gc();if(Er){if(i===void 0)throw Error(it(407));i=i()}else{if(i=t(),es===null)throw Error(it(349));(b1&30)!==0||pZ(r,t,i)}s.memoizedState=i;var l={value:i,getSnapshot:t};return s.queue=l,xz(fZ.bind(null,r,l,e),[e]),r.flags|=2048,Db(9,dZ.bind(null,r,l,i,t),void 0,null),i},useId:function(){var e=gc(),t=es.identifierPrefix;if(Er){var i=zh,r=jh;i=(r&~(1<<32-ku(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=Nb++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Ume++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wme={readContext:Al,useCallback:xZ,useContext:Al,useEffect:wL,useImperativeHandle:_Z,useInsertionEffect:vZ,useLayoutEffect:wZ,useMemo:SZ,useReducer:O7,useRef:gZ,useState:function(){return O7(Fb)},useDebugValue:bL,useDeferredValue:function(e){var t=Ol();return $Z(t,Fn.memoizedState,e)},useTransition:function(){var e=O7(Fb)[0],t=Ol().memoizedState;return[e,t]},useMutableSource:cZ,useSyncExternalStore:hZ,useId:MZ,unstable_isNewReconciler:!1},Jme={readContext:Al,useCallback:xZ,useContext:Al,useEffect:wL,useImperativeHandle:_Z,useInsertionEffect:vZ,useLayoutEffect:wZ,useMemo:SZ,useReducer:L7,useRef:gZ,useState:function(){return L7(Fb)},useDebugValue:bL,useDeferredValue:function(e){var t=Ol();return Fn===null?t.memoizedState=e:$Z(t,Fn.memoizedState,e)},useTransition:function(){var e=L7(Fb)[0],t=Ol().memoizedState;return[e,t]},useMutableSource:cZ,useSyncExternalStore:hZ,useId:MZ,unstable_isNewReconciler:!1};function Ag(e,t){try{var i="",r=t;do i+=xye(r),r=r.return;while(r);var s=i}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function P7(e,t,i){return{value:e,source:null,stack:i!=null?i:null,digest:t!=null?t:null}}function CT(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Kme=typeof WeakMap=="function"?WeakMap:Map;function CZ(e,t,i){i=Gh(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){N4||(N4=!0,jT=r),CT(e,t)},i}function kZ(e,t,i){i=Gh(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;i.payload=function(){return r(s)},i.callback=function(){CT(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(i.callback=function(){CT(e,t),typeof r!="function"&&(Kd===null?Kd=new Set([this]):Kd.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function Sz(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new Kme;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(i)||(s.add(i),e=uge.bind(null,e,t,i),t.then(e,e))}function $z(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mz(e,t,i,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Gh(-1,1),t.tag=2,Jd(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Zme=pp.ReactCurrentOwner,Go=!1;function no(e,t,i,r){t.child=e===null?lZ(t,null,i,r):Cg(t,e.child,i,r)}function Ez(e,t,i,r,s){i=i.render;var l=t.ref;return ng(t,s),r=gL(e,t,i,r,l,s),i=vL(),e!==null&&!Go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rp(e,t,s)):(Er&&i&&sL(t),t.flags|=1,no(e,t,r,s),t.child)}function Tz(e,t,i,r,s){if(e===null){var l=i.type;return typeof l=="function"&&!IL(l)&&l.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=l,AZ(e,t,l,r,s)):(e=q5(i.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,(e.lanes&s)===0){var d=l.memoizedProps;if(i=i.compare,i=i!==null?i:kb,i(d,r)&&e.ref===t.ref)return rp(e,t,s)}return t.flags|=1,e=Yd(l,r),e.ref=t.ref,e.return=t,t.child=e}function AZ(e,t,i,r,s){if(e!==null){var l=e.memoizedProps;if(kb(l,r)&&e.ref===t.ref)if(Go=!1,t.pendingProps=r=l,(e.lanes&s)!==0)(e.flags&131072)!==0&&(Go=!0);else return t.lanes=e.lanes,rp(e,t,s)}return kT(e,t,i,r,s)}function OZ(e,t,i){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(Fm,$a),$a|=i;else{if((i&1073741824)===0)return e=l!==null?l.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lr(Fm,$a),$a|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:i,lr(Fm,$a),$a|=r}else l!==null?(r=l.baseLanes|i,t.memoizedState=null):r=i,lr(Fm,$a),$a|=r;return no(e,t,s,i),t.child}function LZ(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function kT(e,t,i,r,s){var l=Wo(i)?v1:js.current;return l=Tg(t,l),ng(t,s),i=gL(e,t,i,r,l,s),r=vL(),e!==null&&!Go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rp(e,t,s)):(Er&&r&&sL(t),t.flags|=1,no(e,t,i,s),t.child)}function Iz(e,t,i,r,s){if(Wo(i)){var l=!0;E4(t)}else l=!1;if(ng(t,s),t.stateNode===null)U5(e,t),oZ(t,i,r),IT(t,i,r,s),r=!0;else if(e===null){var d=t.stateNode,y=t.memoizedProps;d.props=y;var v=d.context,_=i.contextType;typeof _=="object"&&_!==null?_=Al(_):(_=Wo(i)?v1:js.current,_=Tg(t,_));var M=i.getDerivedStateFromProps,k=typeof M=="function"||typeof d.getSnapshotBeforeUpdate=="function";k||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==r||v!==_)&&wz(t,d,r,_),Sd=!1;var O=t.memoizedState;d.state=O,A4(t,r,d,s),v=t.memoizedState,y!==r||O!==v||Ho.current||Sd?(typeof M=="function"&&(TT(t,i,M,r),v=t.memoizedState),(y=Sd||vz(t,i,y,r,O,v,_))?(k||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=v),d.props=r,d.state=v,d.context=_,r=y):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,nZ(e,t),y=t.memoizedProps,_=t.type===t.elementType?y:mu(t.type,y),d.props=_,k=t.pendingProps,O=d.context,v=i.contextType,typeof v=="object"&&v!==null?v=Al(v):(v=Wo(i)?v1:js.current,v=Tg(t,v));var R=i.getDerivedStateFromProps;(M=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==k||O!==v)&&wz(t,d,r,v),Sd=!1,O=t.memoizedState,d.state=O,A4(t,r,d,s);var D=t.memoizedState;y!==k||O!==D||Ho.current||Sd?(typeof R=="function"&&(TT(t,i,R,r),D=t.memoizedState),(_=Sd||vz(t,i,_,r,O,D,v)||!1)?(M||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,D,v),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,D,v)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=D),d.props=r,d.state=D,d.context=v,r=_):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),r=!1)}return AT(e,t,i,r,l,s)}function AT(e,t,i,r,s,l){LZ(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return s&&dz(t,i,!1),rp(e,t,l);r=t.stateNode,Zme.current=t;var y=d&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=Cg(t,e.child,null,l),t.child=Cg(t,null,y,l)):no(e,t,y,l),t.memoizedState=r.state,s&&dz(t,i,!0),t.child}function PZ(e){var t=e.stateNode;t.pendingContext?pz(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pz(e,t.context,!1),dL(e,t.containerInfo)}function Cz(e,t,i,r,s){return Ig(),aL(s),t.flags|=256,no(e,t,i,r),t.child}var OT={dehydrated:null,treeContext:null,retryLane:0};function LT(e){return{baseLanes:e,cachePool:null,transitions:null}}function RZ(e,t,i){var r=t.pendingProps,s=Dr.current,l=!1,d=(t.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(s&2)!==0),y?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),lr(Dr,s&1),e===null)return MT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(d=r.children,e=r.fallback,l?(r=t.mode,l=t.child,d={mode:"hidden",children:d},(r&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=d):l=$6(d,r,0,null),e=a1(e,r,i,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=LT(i),t.memoizedState=OT,e):_L(t,d));if(s=e.memoizedState,s!==null&&(y=s.dehydrated,y!==null))return Yme(e,t,d,r,y,s,i);if(l){l=r.fallback,d=t.mode,s=e.child,y=s.sibling;var v={mode:"hidden",children:r.children};return(d&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=v,t.deletions=null):(r=Yd(s,v),r.subtreeFlags=s.subtreeFlags&14680064),y!==null?l=Yd(y,l):(l=a1(l,d,i,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,d=e.child.memoizedState,d=d===null?LT(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=e.childLanes&~i,t.memoizedState=OT,r}return l=e.child,e=l.sibling,r=Yd(l,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function _L(e,t){return t=$6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dx(e,t,i,r){return r!==null&&aL(r),Cg(t,e.child,null,i),e=_L(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Yme(e,t,i,r,s,l,d){if(i)return t.flags&256?(t.flags&=-257,r=P7(Error(it(422))),dx(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=$6({mode:"visible",children:r.children},s,0,null),l=a1(l,s,d,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,(t.mode&1)!==0&&Cg(t,e.child,null,d),t.child.memoizedState=LT(d),t.memoizedState=OT,l);if((t.mode&1)===0)return dx(e,t,d,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var y=r.dgst;return r=y,l=Error(it(419)),r=P7(l,r,void 0),dx(e,t,d,r)}if(y=(d&e.childLanes)!==0,Go||y){if(r=es,r!==null){switch(d&-d){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|d))!==0?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,ip(e,s),Au(r,e,s,-1))}return TL(),r=P7(Error(it(421))),dx(e,t,d,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=cge.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,ka=Wd(s.nextSibling),Aa=t,Er=!0,xu=null,e!==null&&(yl[ml++]=jh,yl[ml++]=zh,yl[ml++]=w1,jh=e.id,zh=e.overflow,w1=t),t=_L(t,r.children),t.flags|=4096,t)}function kz(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ET(e.return,t,i)}function R7(e,t,i,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=i,l.tailMode=s)}function NZ(e,t,i){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(no(e,t,r.children,i),r=Dr.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kz(e,i,t);else if(e.tag===19)kz(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lr(Dr,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&O4(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),R7(t,!1,s,i,l);break;case"backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&O4(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}R7(t,!0,i,null,l);break;case"together":R7(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function U5(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rp(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),_1|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(it(153));if(t.child!==null){for(e=t.child,i=Yd(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Yd(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Xme(e,t,i){switch(t.tag){case 3:PZ(t),Ig();break;case 5:uZ(t);break;case 1:Wo(t.type)&&E4(t);break;case 4:dL(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;lr(C4,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(lr(Dr,Dr.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?RZ(e,t,i):(lr(Dr,Dr.current&1),e=rp(e,t,i),e!==null?e.sibling:null);lr(Dr,Dr.current&1);break;case 19:if(r=(i&t.childLanes)!==0,(e.flags&128)!==0){if(r)return NZ(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),lr(Dr,Dr.current),r)break;return null;case 22:case 23:return t.lanes=0,OZ(e,t,i)}return rp(e,t,i)}var FZ,PT,DZ,jZ;FZ=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};PT=function(){};DZ=function(e,t,i,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,q0(Ec.current);var l=null;switch(i){case"input":s=iT(e,s),r=iT(e,r),l=[];break;case"select":s=Ur({},s,{value:void 0}),r=Ur({},r,{value:void 0}),l=[];break;case"textarea":s=sT(e,s),r=sT(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$4)}aT(i,r);var d;i=null;for(_ in s)if(!r.hasOwnProperty(_)&&s.hasOwnProperty(_)&&s[_]!=null)if(_==="style"){var y=s[_];for(d in y)y.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(Sb.hasOwnProperty(_)?l||(l=[]):(l=l||[]).push(_,null));for(_ in r){var v=r[_];if(y=s!=null?s[_]:void 0,r.hasOwnProperty(_)&&v!==y&&(v!=null||y!=null))if(_==="style")if(y){for(d in y)!y.hasOwnProperty(d)||v&&v.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in v)v.hasOwnProperty(d)&&y[d]!==v[d]&&(i||(i={}),i[d]=v[d])}else i||(l||(l=[]),l.push(_,i)),i=v;else _==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,y=y?y.__html:void 0,v!=null&&y!==v&&(l=l||[]).push(_,v)):_==="children"?typeof v!="string"&&typeof v!="number"||(l=l||[]).push(_,""+v):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(Sb.hasOwnProperty(_)?(v!=null&&_==="onScroll"&&fr("scroll",e),l||y===v||(l=[])):(l=l||[]).push(_,v))}i&&(l=l||[]).push("style",i);var _=l;(t.updateQueue=_)&&(t.flags|=4)}};jZ=function(e,t,i,r){i!==r&&(t.flags|=4)};function ow(e,t){if(!Er)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ts(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function Qme(e,t,i){var r=t.pendingProps;switch(oL(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ts(t),null;case 1:return Wo(t.type)&&M4(),Ts(t),null;case 3:return r=t.stateNode,kg(),gr(Ho),gr(js),yL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,xu!==null&&(UT(xu),xu=null))),PT(e,t),Ts(t),null;case 5:fL(t);var s=q0(Rb.current);if(i=t.type,e!==null&&t.stateNode!=null)DZ(e,t,i,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(it(166));return Ts(t),null}if(e=q0(Ec.current),hx(t)){r=t.stateNode,i=t.type;var l=t.memoizedProps;switch(r[_c]=t,r[Lb]=l,e=(t.mode&1)!==0,i){case"dialog":fr("cancel",r),fr("close",r);break;case"iframe":case"object":case"embed":fr("load",r);break;case"video":case"audio":for(s=0;s<Dw.length;s++)fr(Dw[s],r);break;case"source":fr("error",r);break;case"img":case"image":case"link":fr("error",r),fr("load",r);break;case"details":fr("toggle",r);break;case"input":jj(r,l),fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},fr("invalid",r);break;case"textarea":Vj(r,l),fr("invalid",r)}aT(i,l),s=null;for(var d in l)if(l.hasOwnProperty(d)){var y=l[d];d==="children"?typeof y=="string"?r.textContent!==y&&(l.suppressHydrationWarning!==!0&&cx(r.textContent,y,e),s=["children",y]):typeof y=="number"&&r.textContent!==""+y&&(l.suppressHydrationWarning!==!0&&cx(r.textContent,y,e),s=["children",""+y]):Sb.hasOwnProperty(d)&&y!=null&&d==="onScroll"&&fr("scroll",r)}switch(i){case"input":ix(r),zj(r,l,!0);break;case"textarea":ix(r),Uj(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=$4)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pK(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(i,{is:r.is}):(e=d.createElement(i),i==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,i),e[_c]=t,e[Lb]=r,FZ(e,t,!1,!1),t.stateNode=e;e:{switch(d=lT(i,r),i){case"dialog":fr("cancel",e),fr("close",e),s=r;break;case"iframe":case"object":case"embed":fr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Dw.length;s++)fr(Dw[s],e);s=r;break;case"source":fr("error",e),s=r;break;case"img":case"image":case"link":fr("error",e),fr("load",e),s=r;break;case"details":fr("toggle",e),s=r;break;case"input":jj(e,r),s=iT(e,r),fr("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ur({},r,{value:void 0}),fr("invalid",e);break;case"textarea":Vj(e,r),s=sT(e,r),fr("invalid",e);break;default:s=r}aT(i,s),y=s;for(l in y)if(y.hasOwnProperty(l)){var v=y[l];l==="style"?yK(e,v):l==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&dK(e,v)):l==="children"?typeof v=="string"?(i!=="textarea"||v!=="")&&$b(e,v):typeof v=="number"&&$b(e,""+v):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Sb.hasOwnProperty(l)?v!=null&&l==="onScroll"&&fr("scroll",e):v!=null&&qO(e,l,v,d))}switch(i){case"input":ix(e),zj(e,r,!1);break;case"textarea":ix(e),Uj(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sf(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?eg(e,!!r.multiple,l,!1):r.defaultValue!=null&&eg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=$4)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ts(t),null;case 6:if(e&&t.stateNode!=null)jZ(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(it(166));if(i=q0(Rb.current),q0(Ec.current),hx(t)){if(r=t.stateNode,i=t.memoizedProps,r[_c]=t,(l=r.nodeValue!==i)&&(e=Aa,e!==null))switch(e.tag){case 3:cx(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cx(r.nodeValue,i,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[_c]=t,t.stateNode=r}return Ts(t),null;case 13:if(gr(Dr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Er&&ka!==null&&(t.mode&1)!==0&&(t.flags&128)===0)iZ(),Ig(),t.flags|=98560,l=!1;else if(l=hx(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(it(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(it(317));l[_c]=t}else Ig(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ts(t),l=!1}else xu!==null&&(UT(xu),xu=null),l=!0;if(!l)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Dr.current&1)!==0?Vn===0&&(Vn=3):TL())),t.updateQueue!==null&&(t.flags|=4),Ts(t),null);case 4:return kg(),PT(e,t),e===null&&Ab(t.stateNode.containerInfo),Ts(t),null;case 10:return cL(t.type._context),Ts(t),null;case 17:return Wo(t.type)&&M4(),Ts(t),null;case 19:if(gr(Dr),l=t.memoizedState,l===null)return Ts(t),null;if(r=(t.flags&128)!==0,d=l.rendering,d===null)if(r)ow(l,!1);else{if(Vn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=O4(e),d!==null){for(t.flags|=128,ow(l,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)l=i,e=r,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,e=d.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return lr(Dr,Dr.current&1|2),t.child}e=e.sibling}l.tail!==null&&cn()>Og&&(t.flags|=128,r=!0,ow(l,!1),t.lanes=4194304)}else{if(!r)if(e=O4(d),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),ow(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Er)return Ts(t),null}else 2*cn()-l.renderingStartTime>Og&&i!==1073741824&&(t.flags|=128,r=!0,ow(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(i=l.last,i!==null?i.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=cn(),t.sibling=null,i=Dr.current,lr(Dr,r?i&1|2:i&1),t):(Ts(t),null);case 22:case 23:return EL(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?($a&1073741824)!==0&&(Ts(t),t.subtreeFlags&6&&(t.flags|=8192)):Ts(t),null;case 24:return null;case 25:return null}throw Error(it(156,t.tag))}function ege(e,t){switch(oL(t),t.tag){case 1:return Wo(t.type)&&M4(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kg(),gr(Ho),gr(js),yL(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return fL(t),null;case 13:if(gr(Dr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(it(340));Ig()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gr(Dr),null;case 4:return kg(),null;case 10:return cL(t.type._context),null;case 22:case 23:return EL(),null;case 24:return null;default:return null}}var fx=!1,Ns=!1,tge=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Nm(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){Yr(e,t,r)}else i.current=null}function RT(e,t,i){try{i()}catch(r){Yr(e,t,r)}}var Az=!1;function ige(e,t){if(vT=_4,e=BK(),nL(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{i.nodeType,l.nodeType}catch{i=null;break e}var d=0,y=-1,v=-1,_=0,M=0,k=e,O=null;t:for(;;){for(var R;k!==i||s!==0&&k.nodeType!==3||(y=d+s),k!==l||r!==0&&k.nodeType!==3||(v=d+r),k.nodeType===3&&(d+=k.nodeValue.length),(R=k.firstChild)!==null;)O=k,k=R;for(;;){if(k===e)break t;if(O===i&&++_===s&&(y=d),O===l&&++M===r&&(v=d),(R=k.nextSibling)!==null)break;k=O,O=k.parentNode}k=R}i=y===-1||v===-1?null:{start:y,end:v}}else i=null}i=i||{start:0,end:0}}else i=null;for(wT={focusedElem:e,selectionRange:i},_4=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var D=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var z=D.memoizedProps,B=D.memoizedState,V=t.stateNode,q=V.getSnapshotBeforeUpdate(t.elementType===t.type?z:mu(t.type,z),B);V.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var J=t.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(it(163))}}catch(ne){Yr(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return D=Az,Az=!1,D}function U2(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&RT(t,i,l)}s=s.next}while(s!==r)}}function x6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function NT(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function zZ(e){var t=e.alternate;t!==null&&(e.alternate=null,zZ(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_c],delete t[Lb],delete t[xT],delete t[Dme],delete t[jme])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function VZ(e){return e.tag===5||e.tag===3||e.tag===4}function Oz(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||VZ(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function FT(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=$4));else if(r!==4&&(e=e.child,e!==null))for(FT(e,t,i),e=e.sibling;e!==null;)FT(e,t,i),e=e.sibling}function DT(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(DT(e,t,i),e=e.sibling;e!==null;)DT(e,t,i),e=e.sibling}var hs=null,vu=!1;function Ip(e,t,i){for(i=i.child;i!==null;)UZ(e,t,i),i=i.sibling}function UZ(e,t,i){if(Mc&&typeof Mc.onCommitFiberUnmount=="function")try{Mc.onCommitFiberUnmount(f6,i)}catch{}switch(i.tag){case 5:Ns||Nm(i,t);case 6:var r=hs,s=vu;hs=null,Ip(e,t,i),hs=r,vu=s,hs!==null&&(vu?(e=hs,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):hs.removeChild(i.stateNode));break;case 18:hs!==null&&(vu?(e=hs,i=i.stateNode,e.nodeType===8?I7(e.parentNode,i):e.nodeType===1&&I7(e,i),Ib(e)):I7(hs,i.stateNode));break;case 4:r=hs,s=vu,hs=i.stateNode.containerInfo,vu=!0,Ip(e,t,i),hs=r,vu=s;break;case 0:case 11:case 14:case 15:if(!Ns&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,d=l.destroy;l=l.tag,d!==void 0&&((l&2)!==0||(l&4)!==0)&&RT(i,t,d),s=s.next}while(s!==r)}Ip(e,t,i);break;case 1:if(!Ns&&(Nm(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(y){Yr(i,t,y)}Ip(e,t,i);break;case 21:Ip(e,t,i);break;case 22:i.mode&1?(Ns=(r=Ns)||i.memoizedState!==null,Ip(e,t,i),Ns=r):Ip(e,t,i);break;default:Ip(e,t,i)}}function Lz(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new tge),t.forEach(function(r){var s=hge.bind(null,e,r);i.has(r)||(i.add(r),r.then(s,s))})}}function Ul(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var s=i[r];try{var l=e,d=t,y=d;e:for(;y!==null;){switch(y.tag){case 5:hs=y.stateNode,vu=!1;break e;case 3:hs=y.stateNode.containerInfo,vu=!0;break e;case 4:hs=y.stateNode.containerInfo,vu=!0;break e}y=y.return}if(hs===null)throw Error(it(160));UZ(l,d,s),hs=null,vu=!1;var v=s.alternate;v!==null&&(v.return=null),s.return=null}catch(_){Yr(s,t,_)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BZ(t,e),t=t.sibling}function BZ(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ul(t,e),Ju(e),r&4){try{U2(3,e,e.return),x6(3,e)}catch(z){Yr(e,e.return,z)}try{U2(5,e,e.return)}catch(z){Yr(e,e.return,z)}}break;case 1:Ul(t,e),Ju(e),r&512&&i!==null&&Nm(i,i.return);break;case 5:if(Ul(t,e),Ju(e),r&512&&i!==null&&Nm(i,i.return),e.flags&32){var s=e.stateNode;try{$b(s,"")}catch(z){Yr(e,e.return,z)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,d=i!==null?i.memoizedProps:l,y=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{y==="input"&&l.type==="radio"&&l.name!=null&&cK(s,l),lT(y,d);var _=lT(y,l);for(d=0;d<v.length;d+=2){var M=v[d],k=v[d+1];M==="style"?yK(s,k):M==="dangerouslySetInnerHTML"?dK(s,k):M==="children"?$b(s,k):qO(s,M,k,_)}switch(y){case"input":rT(s,l);break;case"textarea":hK(s,l);break;case"select":var O=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var R=l.value;R!=null?eg(s,!!l.multiple,R,!1):O!==!!l.multiple&&(l.defaultValue!=null?eg(s,!!l.multiple,l.defaultValue,!0):eg(s,!!l.multiple,l.multiple?[]:"",!1))}s[Lb]=l}catch(z){Yr(e,e.return,z)}}break;case 6:if(Ul(t,e),Ju(e),r&4){if(e.stateNode===null)throw Error(it(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(z){Yr(e,e.return,z)}}break;case 3:if(Ul(t,e),Ju(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Ib(t.containerInfo)}catch(z){Yr(e,e.return,z)}break;case 4:Ul(t,e),Ju(e);break;case 13:Ul(t,e),Ju(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||($L=cn())),r&4&&Lz(e);break;case 22:if(M=i!==null&&i.memoizedState!==null,e.mode&1?(Ns=(_=Ns)||M,Ul(t,e),Ns=_):Ul(t,e),Ju(e),r&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!M&&(e.mode&1)!==0)for(gt=e,M=e.child;M!==null;){for(k=gt=M;gt!==null;){switch(O=gt,R=O.child,O.tag){case 0:case 11:case 14:case 15:U2(4,O,O.return);break;case 1:Nm(O,O.return);var D=O.stateNode;if(typeof D.componentWillUnmount=="function"){r=O,i=O.return;try{t=r,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(z){Yr(r,i,z)}}break;case 5:Nm(O,O.return);break;case 22:if(O.memoizedState!==null){Rz(k);continue}}R!==null?(R.return=O,gt=R):Rz(k)}M=M.sibling}e:for(M=null,k=e;;){if(k.tag===5){if(M===null){M=k;try{s=k.stateNode,_?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(y=k.stateNode,v=k.memoizedProps.style,d=v!=null&&v.hasOwnProperty("display")?v.display:null,y.style.display=fK("display",d))}catch(z){Yr(e,e.return,z)}}}else if(k.tag===6){if(M===null)try{k.stateNode.nodeValue=_?"":k.memoizedProps}catch(z){Yr(e,e.return,z)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;M===k&&(M=null),k=k.return}M===k&&(M=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Ul(t,e),Ju(e),r&4&&Lz(e);break;case 21:break;default:Ul(t,e),Ju(e)}}function Ju(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(VZ(i)){var r=i;break e}i=i.return}throw Error(it(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($b(s,""),r.flags&=-33);var l=Oz(e);DT(e,l,s);break;case 3:case 4:var d=r.stateNode.containerInfo,y=Oz(e);FT(e,y,d);break;default:throw Error(it(161))}}catch(v){Yr(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rge(e,t,i){gt=e,GZ(e)}function GZ(e,t,i){for(var r=(e.mode&1)!==0;gt!==null;){var s=gt,l=s.child;if(s.tag===22&&r){var d=s.memoizedState!==null||fx;if(!d){var y=s.alternate,v=y!==null&&y.memoizedState!==null||Ns;y=fx;var _=Ns;if(fx=d,(Ns=v)&&!_)for(gt=s;gt!==null;)d=gt,v=d.child,d.tag===22&&d.memoizedState!==null?Nz(s):v!==null?(v.return=d,gt=v):Nz(s);for(;l!==null;)gt=l,GZ(l),l=l.sibling;gt=s,fx=y,Ns=_}Pz(e)}else(s.subtreeFlags&8772)!==0&&l!==null?(l.return=s,gt=l):Pz(e)}}function Pz(e){for(;gt!==null;){var t=gt;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ns||x6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ns)if(i===null)r.componentDidMount();else{var s=t.elementType===t.type?i.memoizedProps:mu(t.type,i.memoizedProps);r.componentDidUpdate(s,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&gz(t,l,r);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}gz(t,d,i)}break;case 5:var y=t.stateNode;if(i===null&&t.flags&4){i=y;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&i.focus();break;case"img":v.src&&(i.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var _=t.alternate;if(_!==null){var M=_.memoizedState;if(M!==null){var k=M.dehydrated;k!==null&&Ib(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(it(163))}Ns||t.flags&512&&NT(t)}catch(O){Yr(t,t.return,O)}}if(t===e){gt=null;break}if(i=t.sibling,i!==null){i.return=t.return,gt=i;break}gt=t.return}}function Rz(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,gt=i;break}gt=t.return}}function Nz(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{x6(4,t)}catch(v){Yr(t,i,v)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(v){Yr(t,s,v)}}var l=t.return;try{NT(t)}catch(v){Yr(t,l,v)}break;case 5:var d=t.return;try{NT(t)}catch(v){Yr(t,d,v)}}}catch(v){Yr(t,t.return,v)}if(t===e){gt=null;break}var y=t.sibling;if(y!==null){y.return=t.return,gt=y;break}gt=t.return}}var nge=Math.ceil,R4=pp.ReactCurrentDispatcher,xL=pp.ReactCurrentOwner,Tl=pp.ReactCurrentBatchConfig,Ei=0,es=null,$n=null,ds=0,$a=0,Fm=yf(0),Vn=0,jb=null,_1=0,S6=0,SL=0,B2=null,zo=null,$L=0,Og=1/0,Ah=null,N4=!1,jT=null,Kd=null,yx=!1,Fd=null,F4=0,G2=0,zT=null,B5=-1,G5=0;function ho(){return(Ei&6)!==0?cn():B5!==-1?B5:B5=cn()}function Zd(e){return(e.mode&1)===0?1:(Ei&2)!==0&&ds!==0?ds&-ds:Vme.transition!==null?(G5===0&&(G5=TK()),G5):(e=Ji,e!==0||(e=window.event,e=e===void 0?16:PK(e.type)),e)}function Au(e,t,i,r){if(50<G2)throw G2=0,zT=null,Error(it(185));$3(e,i,r),((Ei&2)===0||e!==es)&&(e===es&&((Ei&2)===0&&(S6|=i),Vn===4&&Ld(e,ds)),Jo(e,r),i===1&&Ei===0&&(t.mode&1)===0&&(Og=cn()+500,w6&&mf()))}function Jo(e,t){var i=e.callbackNode;Vye(e,t);var r=b4(e,e===es?ds:0);if(r===0)i!==null&&qj(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&qj(i),t===1)e.tag===0?zme(Fz.bind(null,e)):QK(Fz.bind(null,e)),Nme(function(){(Ei&6)===0&&mf()}),i=null;else{switch(IK(r)){case 1:i=ZO;break;case 4:i=MK;break;case 16:i=w4;break;case 536870912:i=EK;break;default:i=w4}i=XZ(i,qZ.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function qZ(e,t){if(B5=-1,G5=0,(Ei&6)!==0)throw Error(it(327));var i=e.callbackNode;if(sg()&&e.callbackNode!==i)return null;var r=b4(e,e===es?ds:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=D4(e,r);else{t=r;var s=Ei;Ei|=2;var l=WZ();(es!==e||ds!==t)&&(Ah=null,Og=cn()+500,o1(e,t));do try{age();break}catch(y){HZ(e,y)}while(1);uL(),R4.current=l,Ei=s,$n!==null?t=0:(es=null,ds=0,t=Vn)}if(t!==0){if(t===2&&(s=dT(e),s!==0&&(r=s,t=VT(e,s))),t===1)throw i=jb,o1(e,0),Ld(e,r),Jo(e,cn()),i;if(t===6)Ld(e,r);else{if(s=e.current.alternate,(r&30)===0&&!sge(s)&&(t=D4(e,r),t===2&&(l=dT(e),l!==0&&(r=l,t=VT(e,l))),t===1))throw i=jb,o1(e,0),Ld(e,r),Jo(e,cn()),i;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(it(345));case 2:qf(e,zo,Ah);break;case 3:if(Ld(e,r),(r&130023424)===r&&(t=$L+500-cn(),10<t)){if(b4(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ho(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=_T(qf.bind(null,e,zo,Ah),t);break}qf(e,zo,Ah);break;case 4:if(Ld(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var d=31-ku(r);l=1<<d,d=t[d],d>s&&(s=d),r&=~l}if(r=s,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nge(r/1960))-r,10<r){e.timeoutHandle=_T(qf.bind(null,e,zo,Ah),r);break}qf(e,zo,Ah);break;case 5:qf(e,zo,Ah);break;default:throw Error(it(329))}}}return Jo(e,cn()),e.callbackNode===i?qZ.bind(null,e):null}function VT(e,t){var i=B2;return e.current.memoizedState.isDehydrated&&(o1(e,t).flags|=256),e=D4(e,t),e!==2&&(t=zo,zo=i,t!==null&&UT(t)),e}function UT(e){zo===null?zo=e:zo.push.apply(zo,e)}function sge(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var s=i[r],l=s.getSnapshot;s=s.value;try{if(!Nu(l(),s))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ld(e,t){for(t&=~SL,t&=~S6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ku(t),r=1<<i;e[i]=-1,t&=~r}}function Fz(e){if((Ei&6)!==0)throw Error(it(327));sg();var t=b4(e,0);if((t&1)===0)return Jo(e,cn()),null;var i=D4(e,t);if(e.tag!==0&&i===2){var r=dT(e);r!==0&&(t=r,i=VT(e,r))}if(i===1)throw i=jb,o1(e,0),Ld(e,t),Jo(e,cn()),i;if(i===6)throw Error(it(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qf(e,zo,Ah),Jo(e,cn()),null}function ML(e,t){var i=Ei;Ei|=1;try{return e(t)}finally{Ei=i,Ei===0&&(Og=cn()+500,w6&&mf())}}function x1(e){Fd!==null&&Fd.tag===0&&(Ei&6)===0&&sg();var t=Ei;Ei|=1;var i=Tl.transition,r=Ji;try{if(Tl.transition=null,Ji=1,e)return e()}finally{Ji=r,Tl.transition=i,Ei=t,(Ei&6)===0&&mf()}}function EL(){$a=Fm.current,gr(Fm)}function o1(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Rme(i)),$n!==null)for(i=$n.return;i!==null;){var r=i;switch(oL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&M4();break;case 3:kg(),gr(Ho),gr(js),yL();break;case 5:fL(r);break;case 4:kg();break;case 13:gr(Dr);break;case 19:gr(Dr);break;case 10:cL(r.type._context);break;case 22:case 23:EL()}i=i.return}if(es=e,$n=e=Yd(e.current,null),ds=$a=t,Vn=0,jb=null,SL=S6=_1=0,zo=B2=null,G0!==null){for(t=0;t<G0.length;t++)if(i=G0[t],r=i.interleaved,r!==null){i.interleaved=null;var s=r.next,l=i.pending;if(l!==null){var d=l.next;l.next=s,r.next=d}i.pending=r}G0=null}return e}function HZ(e,t){do{var i=$n;try{if(uL(),z5.current=P4,L4){for(var r=Vr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}L4=!1}if(b1=0,Xn=Fn=Vr=null,V2=!1,Nb=0,xL.current=null,i===null||i.return===null){Vn=1,jb=t,$n=null;break}e:{var l=e,d=i.return,y=i,v=t;if(t=ds,y.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var _=v,M=y,k=M.tag;if((M.mode&1)===0&&(k===0||k===11||k===15)){var O=M.alternate;O?(M.updateQueue=O.updateQueue,M.memoizedState=O.memoizedState,M.lanes=O.lanes):(M.updateQueue=null,M.memoizedState=null)}var R=$z(d);if(R!==null){R.flags&=-257,Mz(R,d,y,l,t),R.mode&1&&Sz(l,_,t),t=R,v=_;var D=t.updateQueue;if(D===null){var z=new Set;z.add(v),t.updateQueue=z}else D.add(v);break e}else{if((t&1)===0){Sz(l,_,t),TL();break e}v=Error(it(426))}}else if(Er&&y.mode&1){var B=$z(d);if(B!==null){(B.flags&65536)===0&&(B.flags|=256),Mz(B,d,y,l,t),aL(Ag(v,y));break e}}l=v=Ag(v,y),Vn!==4&&(Vn=2),B2===null?B2=[l]:B2.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var V=CZ(l,v,t);mz(l,V);break e;case 1:y=v;var q=l.type,J=l.stateNode;if((l.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Kd===null||!Kd.has(J)))){l.flags|=65536,t&=-t,l.lanes|=t;var ne=kZ(l,y,t);mz(l,ne);break e}}l=l.return}while(l!==null)}KZ(i)}catch(re){t=re,$n===i&&i!==null&&($n=i=i.return);continue}break}while(1)}function WZ(){var e=R4.current;return R4.current=P4,e===null?P4:e}function TL(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),es===null||(_1&268435455)===0&&(S6&268435455)===0||Ld(es,ds)}function D4(e,t){var i=Ei;Ei|=2;var r=WZ();(es!==e||ds!==t)&&(Ah=null,o1(e,t));do try{oge();break}catch(s){HZ(e,s)}while(1);if(uL(),Ei=i,R4.current=r,$n!==null)throw Error(it(261));return es=null,ds=0,Vn}function oge(){for(;$n!==null;)JZ($n)}function age(){for(;$n!==null&&!Oye();)JZ($n)}function JZ(e){var t=YZ(e.alternate,e,$a);e.memoizedProps=e.pendingProps,t===null?KZ(e):$n=t,xL.current=null}function KZ(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=Qme(i,t,$a),i!==null){$n=i;return}}else{if(i=ege(i,t),i!==null){i.flags&=32767,$n=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vn=6,$n=null;return}}if(t=t.sibling,t!==null){$n=t;return}$n=t=e}while(t!==null);Vn===0&&(Vn=5)}function qf(e,t,i){var r=Ji,s=Tl.transition;try{Tl.transition=null,Ji=1,lge(e,t,i,r)}finally{Tl.transition=s,Ji=r}return null}function lge(e,t,i,r){do sg();while(Fd!==null);if((Ei&6)!==0)throw Error(it(327));i=e.finishedWork;var s=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(it(177));e.callbackNode=null,e.callbackPriority=0;var l=i.lanes|i.childLanes;if(Uye(e,l),e===es&&($n=es=null,ds=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||yx||(yx=!0,XZ(w4,function(){return sg(),null})),l=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||l){l=Tl.transition,Tl.transition=null;var d=Ji;Ji=1;var y=Ei;Ei|=4,xL.current=null,ige(e,i),BZ(i,e),Ime(wT),_4=!!vT,wT=vT=null,e.current=i,rge(i),Lye(),Ei=y,Ji=d,Tl.transition=l}else e.current=i;if(yx&&(yx=!1,Fd=e,F4=s),l=e.pendingLanes,l===0&&(Kd=null),Nye(i.stateNode),Jo(e,cn()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)s=t[i],r(s.value,{componentStack:s.stack,digest:s.digest});if(N4)throw N4=!1,e=jT,jT=null,e;return(F4&1)!==0&&e.tag!==0&&sg(),l=e.pendingLanes,(l&1)!==0?e===zT?G2++:(G2=0,zT=e):G2=0,mf(),null}function sg(){if(Fd!==null){var e=IK(F4),t=Tl.transition,i=Ji;try{if(Tl.transition=null,Ji=16>e?16:e,Fd===null)var r=!1;else{if(e=Fd,Fd=null,F4=0,(Ei&6)!==0)throw Error(it(331));var s=Ei;for(Ei|=4,gt=e.current;gt!==null;){var l=gt,d=l.child;if((gt.flags&16)!==0){var y=l.deletions;if(y!==null){for(var v=0;v<y.length;v++){var _=y[v];for(gt=_;gt!==null;){var M=gt;switch(M.tag){case 0:case 11:case 15:U2(8,M,l)}var k=M.child;if(k!==null)k.return=M,gt=k;else for(;gt!==null;){M=gt;var O=M.sibling,R=M.return;if(zZ(M),M===_){gt=null;break}if(O!==null){O.return=R,gt=O;break}gt=R}}}var D=l.alternate;if(D!==null){var z=D.child;if(z!==null){D.child=null;do{var B=z.sibling;z.sibling=null,z=B}while(z!==null)}}gt=l}}if((l.subtreeFlags&2064)!==0&&d!==null)d.return=l,gt=d;else e:for(;gt!==null;){if(l=gt,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:U2(9,l,l.return)}var V=l.sibling;if(V!==null){V.return=l.return,gt=V;break e}gt=l.return}}var q=e.current;for(gt=q;gt!==null;){d=gt;var J=d.child;if((d.subtreeFlags&2064)!==0&&J!==null)J.return=d,gt=J;else e:for(d=q;gt!==null;){if(y=gt,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:x6(9,y)}}catch(re){Yr(y,y.return,re)}if(y===d){gt=null;break e}var ne=y.sibling;if(ne!==null){ne.return=y.return,gt=ne;break e}gt=y.return}}if(Ei=s,mf(),Mc&&typeof Mc.onPostCommitFiberRoot=="function")try{Mc.onPostCommitFiberRoot(f6,e)}catch{}r=!0}return r}finally{Ji=i,Tl.transition=t}}return!1}function Dz(e,t,i){t=Ag(i,t),t=CZ(e,t,1),e=Jd(e,t,1),t=ho(),e!==null&&($3(e,1,t),Jo(e,t))}function Yr(e,t,i){if(e.tag===3)Dz(e,e,i);else for(;t!==null;){if(t.tag===3){Dz(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kd===null||!Kd.has(r))){e=Ag(i,e),e=kZ(t,e,1),t=Jd(t,e,1),e=ho(),t!==null&&($3(t,1,e),Jo(t,e));break}}t=t.return}}function uge(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=ho(),e.pingedLanes|=e.suspendedLanes&i,es===e&&(ds&i)===i&&(Vn===4||Vn===3&&(ds&130023424)===ds&&500>cn()-$L?o1(e,0):SL|=i),Jo(e,t)}function ZZ(e,t){t===0&&((e.mode&1)===0?t=1:(t=sx,sx<<=1,(sx&130023424)===0&&(sx=4194304)));var i=ho();e=ip(e,t),e!==null&&($3(e,t,i),Jo(e,i))}function cge(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),ZZ(e,i)}function hge(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(it(314))}r!==null&&r.delete(t),ZZ(e,i)}var YZ;YZ=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ho.current)Go=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return Go=!1,Xme(e,t,i);Go=(e.flags&131072)!==0}else Go=!1,Er&&(t.flags&1048576)!==0&&eZ(t,I4,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;U5(e,t),e=t.pendingProps;var s=Tg(t,js.current);ng(t,i),s=gL(null,t,r,e,s,i);var l=vL();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wo(r)?(l=!0,E4(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pL(t),s.updater=b6,t.stateNode=s,s._reactInternals=t,IT(t,r,e,i),t=AT(null,t,r,!0,l,i)):(t.tag=0,Er&&l&&sL(t),no(null,t,s,i),t=t.child),t;case 16:r=t.elementType;e:{switch(U5(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=dge(r),e=mu(r,e),s){case 0:t=kT(null,t,r,e,i);break e;case 1:t=Iz(null,t,r,e,i);break e;case 11:t=Ez(null,t,r,e,i);break e;case 14:t=Tz(null,t,r,mu(r.type,e),i);break e}throw Error(it(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mu(r,s),kT(e,t,r,s,i);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mu(r,s),Iz(e,t,r,s,i);case 3:e:{if(PZ(t),e===null)throw Error(it(387));r=t.pendingProps,l=t.memoizedState,s=l.element,nZ(e,t),A4(t,r,null,i);var d=t.memoizedState;if(r=d.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Ag(Error(it(423)),t),t=Cz(e,t,r,i,s);break e}else if(r!==s){s=Ag(Error(it(424)),t),t=Cz(e,t,r,i,s);break e}else for(ka=Wd(t.stateNode.containerInfo.firstChild),Aa=t,Er=!0,xu=null,i=lZ(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),r===s){t=rp(e,t,i);break e}no(e,t,r,i)}t=t.child}return t;case 5:return uZ(t),e===null&&MT(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,d=s.children,bT(r,s)?d=null:l!==null&&bT(r,l)&&(t.flags|=32),LZ(e,t),no(e,t,d,i),t.child;case 6:return e===null&&MT(t),null;case 13:return RZ(e,t,i);case 4:return dL(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Cg(t,null,r,i):no(e,t,r,i),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mu(r,s),Ez(e,t,r,s,i);case 7:return no(e,t,t.pendingProps,i),t.child;case 8:return no(e,t,t.pendingProps.children,i),t.child;case 12:return no(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,d=s.value,lr(C4,r._currentValue),r._currentValue=d,l!==null)if(Nu(l.value,d)){if(l.children===s.children&&!Ho.current){t=rp(e,t,i);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var y=l.dependencies;if(y!==null){d=l.child;for(var v=y.firstContext;v!==null;){if(v.context===r){if(l.tag===1){v=Gh(-1,i&-i),v.tag=2;var _=l.updateQueue;if(_!==null){_=_.shared;var M=_.pending;M===null?v.next=v:(v.next=M.next,M.next=v),_.pending=v}}l.lanes|=i,v=l.alternate,v!==null&&(v.lanes|=i),ET(l.return,i,t),y.lanes|=i;break}v=v.next}}else if(l.tag===10)d=l.type===t.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(it(341));d.lanes|=i,y=d.alternate,y!==null&&(y.lanes|=i),ET(d,i,t),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===t){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}no(e,t,s.children,i),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ng(t,i),s=Al(s),r=r(s),t.flags|=1,no(e,t,r,i),t.child;case 14:return r=t.type,s=mu(r,t.pendingProps),s=mu(r.type,s),Tz(e,t,r,s,i);case 15:return AZ(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mu(r,s),U5(e,t),t.tag=1,Wo(r)?(e=!0,E4(t)):e=!1,ng(t,i),oZ(t,r,s),IT(t,r,s,i),AT(null,t,r,!0,e,i);case 19:return NZ(e,t,i);case 22:return OZ(e,t,i)}throw Error(it(156,t.tag))};function XZ(e,t){return $K(e,t)}function pge(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _l(e,t,i,r){return new pge(e,t,i,r)}function IL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dge(e){if(typeof e=="function")return IL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===WO)return 11;if(e===JO)return 14}return 2}function Yd(e,t){var i=e.alternate;return i===null?(i=_l(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function q5(e,t,i,r,s,l){var d=2;if(r=e,typeof e=="function")IL(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Tm:return a1(i.children,s,l,t);case HO:d=8,s|=8;break;case X8:return e=_l(12,i,t,s|2),e.elementType=X8,e.lanes=l,e;case Q8:return e=_l(13,i,t,s),e.elementType=Q8,e.lanes=l,e;case eT:return e=_l(19,i,t,s),e.elementType=eT,e.lanes=l,e;case aK:return $6(i,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sK:d=10;break e;case oK:d=9;break e;case WO:d=11;break e;case JO:d=14;break e;case xd:d=16,r=null;break e}throw Error(it(130,e==null?e:typeof e,""))}return t=_l(d,i,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function a1(e,t,i,r){return e=_l(7,e,r,t),e.lanes=i,e}function $6(e,t,i,r){return e=_l(22,e,r,t),e.elementType=aK,e.lanes=i,e.stateNode={isHidden:!1},e}function N7(e,t,i){return e=_l(6,e,null,t),e.lanes=i,e}function F7(e,t,i){return t=_l(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fge(e,t,i,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g7(0),this.expirationTimes=g7(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g7(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function CL(e,t,i,r,s,l,d,y,v){return e=new fge(e,t,i,y,v),t===1?(t=1,l===!0&&(t|=8)):t=0,l=_l(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},pL(l),e}function yge(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Em,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function QZ(e){if(!e)return of;e=e._reactInternals;e:{if(z1(e)!==e||e.tag!==1)throw Error(it(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(it(171))}if(e.tag===1){var i=e.type;if(Wo(i))return XK(e,i,t)}return t}function eY(e,t,i,r,s,l,d,y,v){return e=CL(i,r,!0,e,s,l,d,y,v),e.context=QZ(null),i=e.current,r=ho(),s=Zd(i),l=Gh(r,s),l.callback=t!=null?t:null,Jd(i,l,s),e.current.lanes=s,$3(e,s,r),Jo(e,r),e}function M6(e,t,i,r){var s=t.current,l=ho(),d=Zd(s);return i=QZ(i),t.context===null?t.context=i:t.pendingContext=i,t=Gh(l,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Jd(s,t,d),e!==null&&(Au(e,s,d,l),j5(e,s,d)),d}function j4(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jz(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function kL(e,t){jz(e,t),(e=e.alternate)&&jz(e,t)}function mge(){return null}var tY=typeof reportError=="function"?reportError:function(e){console.error(e)};function AL(e){this._internalRoot=e}E6.prototype.render=AL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(it(409));M6(e,t,null,null)};E6.prototype.unmount=AL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;x1(function(){M6(null,e,null,null)}),t[tp]=null}};function E6(e){this._internalRoot=e}E6.prototype.unstable_scheduleHydration=function(e){if(e){var t=AK();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Od.length&&t!==0&&t<Od[i].priority;i++);Od.splice(i,0,e),i===0&&LK(e)}};function OL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function T6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zz(){}function gge(e,t,i,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var _=j4(d);l.call(_)}}var d=eY(t,r,e,0,null,!1,!1,"",zz);return e._reactRootContainer=d,e[tp]=d.current,Ab(e.nodeType===8?e.parentNode:e),x1(),d}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var y=r;r=function(){var _=j4(v);y.call(_)}}var v=CL(e,0,!1,null,null,!1,!1,"",zz);return e._reactRootContainer=v,e[tp]=v.current,Ab(e.nodeType===8?e.parentNode:e),x1(function(){M6(t,v,i,r)}),v}function I6(e,t,i,r,s){var l=i._reactRootContainer;if(l){var d=l;if(typeof s=="function"){var y=s;s=function(){var v=j4(d);y.call(v)}}M6(t,d,e,s)}else d=gge(i,t,e,s,r);return j4(d)}CK=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Fw(t.pendingLanes);i!==0&&(YO(t,i|1),Jo(t,cn()),(Ei&6)===0&&(Og=cn()+500,mf()))}break;case 13:x1(function(){var r=ip(e,1);if(r!==null){var s=ho();Au(r,e,1,s)}}),kL(e,1)}};XO=function(e){if(e.tag===13){var t=ip(e,134217728);if(t!==null){var i=ho();Au(t,e,134217728,i)}kL(e,134217728)}};kK=function(e){if(e.tag===13){var t=Zd(e),i=ip(e,t);if(i!==null){var r=ho();Au(i,e,t,r)}kL(e,t)}};AK=function(){return Ji};OK=function(e,t){var i=Ji;try{return Ji=e,t()}finally{Ji=i}};cT=function(e,t,i){switch(t){case"input":if(rT(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var s=v6(r);if(!s)throw Error(it(90));uK(r),rT(r,s)}}}break;case"textarea":hK(e,i);break;case"select":t=i.value,t!=null&&eg(e,!!i.multiple,t,!1)}};vK=ML;wK=x1;var vge={usingClientEntryPoint:!1,Events:[E3,Am,v6,mK,gK,ML]},aw={findFiberByHostInstance:B0,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wge={bundleType:aw.bundleType,version:aw.version,rendererPackageName:aw.rendererPackageName,rendererConfig:aw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pp.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xK(e),e===null?null:e.stateNode},findFiberByHostInstance:aw.findFiberByHostInstance||mge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mx.isDisabled&&mx.supportsFiber)try{f6=mx.inject(wge),Mc=mx}catch{}}Ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vge;Ua.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OL(t))throw Error(it(200));return yge(e,t,null,i)};Ua.createRoot=function(e,t){if(!OL(e))throw Error(it(299));var i=!1,r="",s=tY;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=CL(e,1,!1,null,null,i,!1,r,s),e[tp]=t.current,Ab(e.nodeType===8?e.parentNode:e),new AL(t)};Ua.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(it(188)):(e=Object.keys(e).join(","),Error(it(268,e)));return e=xK(t),e=e===null?null:e.stateNode,e};Ua.flushSync=function(e){return x1(e)};Ua.hydrate=function(e,t,i){if(!T6(t))throw Error(it(200));return I6(null,e,t,!0,i)};Ua.hydrateRoot=function(e,t,i){if(!OL(e))throw Error(it(405));var r=i!=null&&i.hydratedSources||null,s=!1,l="",d=tY;if(i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=eY(t,null,e,1,i!=null?i:null,s,!1,l,d),e[tp]=t.current,Ab(e),r)for(e=0;e<r.length;e++)i=r[e],s=i._getVersion,s=s(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,s]:t.mutableSourceEagerHydrationData.push(i,s);return new E6(t)};Ua.render=function(e,t,i){if(!T6(t))throw Error(it(200));return I6(null,e,t,!1,i)};Ua.unmountComponentAtNode=function(e){if(!T6(e))throw Error(it(40));return e._reactRootContainer?(x1(function(){I6(null,null,e,!1,function(){e._reactRootContainer=null,e[tp]=null})}),!0):!1};Ua.unstable_batchedUpdates=ML;Ua.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!T6(i))throw Error(it(200));if(e==null||e._reactInternals===void 0)throw Error(it(38));return I6(e,t,i,!1,r)};Ua.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=Ua})(eK);var Vz=eK.exports;Z8.createRoot=Vz.createRoot,Z8.hydrateRoot=Vz.hydrateRoot;function g(e,t,i,r){var s,l=arguments.length,d=l<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(e,t,i,r);else for(var y=e.length-1;y>=0;y--)(s=e[y])&&(d=(l<3?s(d):l>3?s(t,i,d):s(t,i))||d);return l>3&&d&&Object.defineProperty(t,i,d),d}const bge="modulepreload",_ge=function(e,t){return new URL(e,t).href},Uz={},Le=function(t,i,r){return!i||i.length===0?t():Promise.all(i.map(s=>{if(s=_ge(s,r),s in Uz)return;Uz[s]=!0;const l=s.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${d}`))return;const y=document.createElement("link");if(y.rel=l?"stylesheet":bge,l||(y.as="script",y.crossOrigin=""),y.href=s,document.head.appendChild(y),l)return new Promise((v,_)=>{y.addEventListener("load",v),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};function xge(e){return e&&e.release&&typeof e.release=="function"}function Sge(e){return e&&e.acquire&&typeof e.acquire=="function"}class Fu{constructor(t,i,r,s=1,l=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=r,this.allocationSize=s,this._pool=new Array(l),this._initialSize=l,this.ctor)for(let d=0;d<l;d++)this._pool[d]=new this.ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(Fu.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):Sge(i)&&i.acquire(...t),i}release(t){t&&!Fu.test.disabled&&(this.releaseFunction?this.releaseFunction(t):xge(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}Fu.test={disabled:!1};function $ge(e){e.length=0}class ao{constructor(t=50,i=50){this._pool=new Fu(Array,void 0,$ge,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return D7.acquire()}static release(t){return D7.release(t)}static prune(){D7.prune()}}const D7=new ao(100);function UHe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function BHe(e,t){for(const i of e)if(i!=null&&t(i))return i}function BT(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const Mge=null;function K(e){return e!=null}function ce(e){return e==null}function Uo(e,t){return K(e)?t(e):Mge}function GHe(e){return e}function Ege(e,t){if(ce(e))throw new Error(t);return e}function hn(e,t){return K(e)?e:typeof t=="function"?t():t}function qHe(e,t){return K(e)?e:t}function Oi(e){return K(e)&&e.destroy(),null}function HHe(e){return K(e)&&e.dispose(),null}function po(e){return K(e)&&e.remove(),null}function S1(e){return K(e)&&e.abort(),null}function WHe(e){return K(e)&&e.release(),null}function iY(e,t,i){return K(e)&&K(t)?K(i)?i(e,t):e.equals(t):e===t}function Tge(e){return null}function JHe(e,t){const i=new Array;for(const r of e)i.push(jw(r,null,t));return i}function KHe(e,t){for(const i of e)Uo(i,t)}function jw(e,t,i){return K(e)?i(e):t}function Ige(e){return e.filter(t=>K(t))}function LL(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function ZHe(e){return e}function I3(e){return V1(()=>e.forEach(t=>K(t)&&t.remove()))}function V1(e){return{remove:()=>{e&&(e(),e=void 0)}}}class Su{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*Su._m:t}getInt(){return this._seed=(Su._a*this._seed+Su._c)%Su._m,this._seed}getFloat(){return this.getInt()/(Su._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Su._m*r}}Su._m=2147483647,Su._a=48271,Su._c=0;function Cge(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):e.filter((i,r,s)=>s.indexOf(i)===r)}function $1(e,t,i){if(ce(e)&&ce(t))return!0;if(ce(e)||ce(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function YHe(e,t){let i=e.length!==t.length;e.length=t.length;for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function XHe(e,t,i){let r,s;return i?(r=t.filter(l=>!e.some(d=>i(d,l))),s=e.filter(l=>!t.some(d=>i(d,l)))):(r=t.filter(l=>!e.includes(l)),s=e.filter(l=>!t.includes(l))),{added:r,removed:s}}function QHe(e){return e&&typeof e.length=="number"}const kge=!!Array.prototype.fill;function eWe(e,t){if(kge)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function tWe(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class rY{constructor(){this.last=0}}const nY=new rY;function sY(e,t,i,r){r=r||nY;const s=Math.max(0,r.last-10);for(let d=s;d<i;++d)if(e[d]===t)return r.last=d,d;const l=Math.min(s,i);for(let d=0;d<l;++d)if(e[d]===t)return r.last=d,d;return-1}function PL(e,t,i,r){const s=i==null?e.length:i,l=sY(e,t,s,r);if(l!==-1)return e[l]=e[s-1],i==null&&e.pop(),t}const Bl=new Set;function Age(e,t,i=e.length,r=t.length,s,l){if(r===0||i===0)return i;Bl.clear();for(let y=0;y<r;++y)Bl.add(t[y]);s=s||nY;const d=Math.max(0,s.last-10);for(let y=d;y<i;++y)if(Bl.has(e[y])&&(l&&l.push(e[y]),Bl.delete(e[y]),e[y]=e[i-1],--i,--y,Bl.size===0||i===0))return Bl.clear(),i;for(let y=0;y<d;++y)if(Bl.has(e[y])&&(l&&l.push(e[y]),Bl.delete(e[y]),e[y]=e[i-1],--i,--y,Bl.size===0||i===0))return Bl.clear(),i;return Bl.clear(),i}new Su;function oY(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}let Dd;function ke(e){return typeof Dd[e]=="function"?Dd[e]=Dd[e](globalThis):Dd[e]}var FJ,DJ,jJ,zJ;Dd=((FJ=globalThis.dojoConfig)==null?void 0:FJ.has)||((DJ=globalThis.esriConfig)==null?void 0:DJ.has)?{...(jJ=globalThis.dojoConfig)==null?void 0:jJ.has,...(zJ=globalThis.esriConfig)==null?void 0:zJ.has}:{},ke.add=(e,t,i,r)=>((r||Dd[e]===void 0)&&(Dd[e]=t),i&&ke(e)),ke.cache=Dd,ke.add("esri-deprecation-warnings",!0),(()=>{var t;ke.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ke.add("host-browser",e),ke.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),ke.add("dom",e),ke("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,l=parseFloat(s);if(ke.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ke.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ke.add("khtml",s.includes("Konqueror")?l:void 0),ke.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ke.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ke.add("webkit",!ke("wp")&&!ke("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ke.add("chrome",!ke("edge")&&!ke("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ke.add("android",!ke("wp")&&parseFloat(r.split("Android ")[1])||void 0),ke.add("safari",!s.includes("Safari")||ke("wp")||ke("chrome")||ke("android")||ke("edge")||ke("opr")?void 0:parseFloat(s.split("Version/")[1])),ke.add("mac",s.includes("Macintosh")),!ke("wp")&&r.match(/(iPhone|iPod|iPad)/)){const d=RegExp.$1.replace(/P/,"p"),y=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",v=parseFloat(y.replace(/_/,".").replace(/_/g,""));ke.add(d,v),ke.add("ios",v)}ke.add("trident",parseFloat(s.split("Trident/")[1])||void 0),ke("webkit")||(!r.includes("Gecko")||ke("wp")||ke("khtml")||ke("trident")||ke("edge")||ke.add("mozilla",l),ke("mozilla")&&ke.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&ke.add("esri-mobile",t),i&&ke.add("esri-iPhone",i),ke.add("esri-geolocation",!!navigator.geolocation)}ke.add("esri-canvas-svg-support",!ke("trident")),ke.add("esri-wasm","WebAssembly"in globalThis),ke.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),ke.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),ke.add("esri-atomics","Atomics"in globalThis),ke.add("esri-workers","Worker"in globalThis),ke.add("web-feat:cache","caches"in globalThis),ke.add("esri-workers-arraybuffer-transfer",!ke("safari")||Number(ke("safari"))>=12),ke.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ke.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ke.add("featurelayer-snapshot-enabled",!0),ke.add("featurelayer-snapshot-point-min-threshold",8e4),ke.add("featurelayer-snapshot-point-max-threshold",4e5),ke.add("featurelayer-snapshot-point-coverage",.1),ke.add("featurelayer-advanced-symbols",!1),ke.add("featurelayer-pbf",!0),ke.add("featurelayer-pbf-statistics",!1),ke.add("feature-layers-workers",!0),ke.add("feature-polyline-generalization-factor",1),ke.add("mapview-transitions-duration",200),ke.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ke.add("mapserver-pbf-enabled",!1),ke.add("mapimagelayer-popup-identify-max-tolerance",20),ke.add("heatmap-allow-raster-fallback",!0),ke.add("heatmap-force-raster",!1),ke("host-webworker")||ke("host-browser")&&(ke.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ke.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{ke.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ke.add("esri-image-decode",!1,!0,!0)})}return!1}),ke.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function iWe(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function Oge(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),s=new e.constructor(r);for(let l=0;l<r;l++)s[l]=e[t+l];return s}function rWe(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function Lge(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function Pge(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function Rge(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function Nge(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function Fge(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function Dge(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function jge(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function zge(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function Vge(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function aY(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&aY(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function Me(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=hY(e);if(K(t))return t;if(lY(e))return e.clone();if(uY(e))return e.map(Me);if(cY(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=Me(e[r]);return i}function GT(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=hY(e);if(K(t))return t;if(uY(e)){let i=!0;const r=e.map(s=>{const l=GT(s);return s!=null&&l==null&&(i=!1),l});return i?r:null}if(lY(e))return e.clone();if(!cY(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],l=GT(s);if(s!=null&&l==null)return null;i[r]=l}return i}return null}function lY(e){return typeof e.clone=="function"}function uY(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function cY(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function Bz(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function hY(e){if(Lge(e)||Pge(e)||Rge(e)||Nge(e)||Fge(e)||Dge(e)||jge(e)||zge(e)||Vge(e))return Oge(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,r)=>{t.set(r,Me(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add(Me(i))}),t}return null}function RL(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function Uge(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&$1(e,t):e instanceof Set?t instanceof Set&&Gge(e,t):e instanceof Map?t instanceof Map&&qge(e,t):!!Bz(e)&&Bz(t)&&Bge(e,t))}function Bge(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function Gge(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function qge(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function zs(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function Hge(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function H5(e,t,i){return i?z4(e,t,{policy:i,path:""}):z4(e,t,null)}function z4(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let l=null,d="merge";if(i&&(l=i.path?`${i.path}.${s}`:s,d=i.policy(l)),d==="replace")return r[s]=t[s],r;if(r[s]===void 0)return r[s]=Me(t[s]),r;let y=r[s],v=t[s];if(y===v)return r;if(Array.isArray(v)||Array.isArray(r))y=y?Array.isArray(y)?r[s]=y.concat():r[s]=[y]:r[s]=[],v&&(Array.isArray(v)||(v=[v]),v.forEach(_=>{y.includes(_)||y.push(_)}));else if(v&&typeof v=="object")if(i){const _=i.path;i.path=l,r[s]=z4(y,v,i),i.path=_}else r[s]=z4(y,v,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=v);return r},e||{}):e}function pY(e){return Array.isArray(e)?e:e.split(".")}function Gz(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Wge(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...Gz(i));return t}return Gz(e)}function dY(e,t,i,r){const s=Wge(t);if(s.length!==1){const l=s.map(d=>r(e,d,i));return I3(l)}return r(e,s[0],i)}function fY(e){let t=!1;return()=>{t||(t=!0,e())}}function yY(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.getItemAt(s)}const r=zs(t);return Hge(r,i)?r.get(i):t[i]}function mY(e,t,i){if(e==null)return e;const r=yY(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:mY(r,t,i+1)}function C3(e,t,i=0){return typeof t!="string"||t.includes(".")?mY(e,pY(t),i):yY(t,e)}function V4(e,t){return C3(e,t)}function qz(e,t){return C3(t,e)!==void 0}var xc;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(xc||(xc={}));class Hz{constructor(t){this.autoDestroy=!1,this.properties=t}}function k3(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),s=t.autoDestroy;for(const l in r)r[l]=Me(r[l]);t=new Hz(r),t.autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new Hz({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Jge(e){return k3(e).properties}function C6(e,t){const i=Jge(e);let r=i[t];return r||(r=i[t]={}),r}function Kge(e,t){return H5(e,t,Yge)}const Zge=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Yge(e){return Zge.test(e)?"replace":"merge"}function gY(e,t,i=!1){return wY(e,t,i)}function uv(e,t){if(t!=null)return t[e]||vY(e.split("."),!1,t)}function Xo(e,t,i){const r=e.split("."),s=r.pop(),l=vY(r,!0,i);l&&s&&(l[s]=t)}function vY(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function wY(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let l=r[s],d=t[s];return l===d?r:l===void 0?(r[s]=Me(d),r):(Array.isArray(d)||Array.isArray(r)?(l=l?Array.isArray(l)?r[s]=l.concat():r[s]=[l]:r[s]=[],d&&(Array.isArray(d)||(d=[d]),i?d.forEach(y=>{l.includes(y)||l.push(y)}):r[s]=d.concat())):d&&typeof d=="object"?r[s]=wY(l,d,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=d),r)},e||{}):e}var VJ;const hi={apiKey:void 0,applicationUrl:(VJ=globalThis.location)==null?void 0:VJ.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(gY(hi,globalThis.esriConfig,!0),delete hi.has),!hi.assetsPath){const e="4.24.7";hi.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}hi.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(hi,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),hi.request.corsEnabledServers=[],hi.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const Xge=/\{([^\}]+)\}/g;function Wz(e){return e==null?"":e}function Ac(e,t){return e.replace(Xge,typeof t=="object"?(i,r)=>Wz(uv(r,t)):(i,r)=>Wz(t(r)))}function bY(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function NL(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function nWe(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const Jz={info:0,warn:1,error:2,none:3};class Ke{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Ke._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Ke.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=Ke._loggers;return Ke._loggers=t,i},set throttlingDisabled(t){Ke._throttlingDisabled=t}}}static getLogger(t){let i=Ke._loggers[t];return i||(i=new Ke({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!Ke._throttlingDisabled){const s=this._argsToKey(r),l=this._loggedMessages[t].get(s);if(i==="once"&&l!=null||i==="oncePerTick"&&l&&l>=Ke._tickCounter)return;this._loggedMessages[t].set(s,Ke._tickCounter),Ke._scheduleTickCounterIncrement()}for(const s of hi.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;K(r);){const s=r[t];if(K(s))return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=hi.log.level?hi.log.level:"warn";return Jz[this._parentWithMember("level",i)]<=Jz[t]}_argsToKey(...t){const i=(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]";return NL(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){Ke._tickCounterScheduled||(Ke._tickCounterScheduled=!0,Promise.resolve().then(()=>{Ke._tickCounter++,Ke._tickCounterScheduled=!1}))}}Ke._loggers={},Ke._tickCounter=0,Ke._tickCounterScheduled=!1,Ke._throttlingDisabled=!1;var Ft;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(Ft||(Ft={}));const qT=Ft.USER+1;function jd(e){switch(e){case"defaults":return Ft.DEFAULTS;case"service":return Ft.SERVICE;case"portal-item":return Ft.PORTAL_ITEM;case"web-scene":return Ft.WEB_SCENE;case"web-map":return Ft.WEB_MAP;case"user":return Ft.USER}}function U4(e){switch(e){case Ft.DEFAULTS:return"defaults";case Ft.SERVICE:return"service";case Ft.PORTAL_ITEM:return"portal-item";case Ft.WEB_SCENE:return"web-scene";case Ft.WEB_MAP:return"web-map";case Ft.USER:return"user"}return void 0}function Qge(e){return U4(e)}var Ni;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ni||(Ni={}));let B4,zw=[];const eve=Ke.getLogger("esri.core.Accessor");function Bt(e){B4!==void 0&&B4.onObservableAccessed(e)}let W5=!1,J5=!1;function np(e,t,i){if(W5)return FL(e,t,i);_Y(e);const r=t.call(i);return xY(),r}function tve(e,t){return np(void 0,e,t)}function FL(e,t,i){const r=W5;W5=!0,_Y(e);let s=null;try{s=t.call(i)}catch(l){J5&&eve.error(l)}return xY(),W5=r,s}function _Y(e){B4=e,zw.push(e)}function xY(){const e=zw.pop();B4=zw.length>0?zw[zw.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function SY(e,t){if(t.flags&Ni.DepTrackingInitialized)return;const i=J5;J5=!1,t.flags&Ni.AutoTracked?FL(t,t.metadata.get,e):$Y(e,t),J5=i}const ive=[];function $Y(e,t){t.flags&Ni.ExplicitlyTracking||(t.flags|=Ni.ExplicitlyTracking,FL(t,()=>{const i=t.metadata.dependsOn||ive;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=pY(r);for(let l=0,d=e;l<s.length&&d!=null&&typeof d=="object";++l)d=Kz(d,s[l],l!==s.length-1)}else Kz(e,r,!1)}),t.flags&=~Ni.ExplicitlyTracking)}function Kz(e,t,i){var l;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const d=parseInt(r,10);if(!isNaN(d))return Array.isArray(e)?e[d]:e.getItemAt(d)}const s=(l=zs(e))==null?void 0:l.properties.get(r);return s&&(Bt(s),SY(e,s)),i?e[r]:void 0}class MY{constructor(t,i){this._observers=t,this._observer=i}remove(){oY(this._observers,this._observer)}}class Zz{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=Ni.Dirty|(r.nonNullable?Ni.NonNullable:0)|(r.hasOwnProperty("value")?Ni.HasDefaultValue:0)|(r.get===void 0?Ni.DepTrackingInitialized:0)|(r.dependsOn===void 0?Ni.AutoTracked:0)}destroy(){if(this.flags&Ni.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Bt(this);const t=this.properties.store,i=this.propertyName,r=this.flags,s=t.get(i);if(r&Ni.Computing||~r&Ni.Dirty&&t.has(i))return s;this.flags|=Ni.Computing;const l=this.properties.host;let d;r&Ni.AutoTracked?d=np(this,this.metadata.get,l):($Y(l,this),d=this.metadata.get.call(l)),t.set(i,d,Ft.COMPUTED);const y=t.get(i);return y===s?this.flags&=~Ni.Dirty:tve(this.commit,this),this.flags&=~Ni.Computing,y}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ni.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new MY(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Ni.Overriden&&(this.flags|=Ni.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~Ni.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class DL{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new DL;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,Me(r))}),i}get(t){return this._values.get(t)}originOf(){return Ft.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function gx(e,t,i){return e!==void 0}function Yz(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Ni.NonNullable)||(r.lifecycle,xc.INITIALIZING,!1))}function rve(e){return e&&typeof e.destroy=="function"}Ke.getLogger("esri.core.accessorSupport.Properties");class nve{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=xc.INITIALIZING,this.store=new DL,this._origin=Ft.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const s in r){const l=new Zz(this,s,r[s]);this.properties.set(s,l)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=xc.CONSTRUCTING}constructed(){this.lifecycle=xc.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&rve(r)&&(r.destroy(),~i.flags&Ni.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==xc.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();Bt(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&Ni.HasDefaultValue)return"defaults"}return U4(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(gx(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);gx(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.properties.get(i);if(!gx(s))return"";const l=new Set,d=np({onObservableAccessed:v=>l.add(v),onTrackingEnd:()=>{}},()=>{var v;return(v=s.metadata.get)==null?void 0:v.call(t)});let y=`${r}${t.declaredClass.split(".").pop()}.${i}: ${d}
`;if(l.size===0)return y;r+="  ";for(const v of l){if(!(v instanceof Zz))continue;const _=v.properties.host,M=v.propertyName,k=zs(_);y+=k?k.getDependsInfo(_,M,r):`${r}${M}: undefined
`}return y}setAtOrigin(t,i,r){const s=this.properties.get(t);if(gx(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&Ni.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&Ni.Overriden&&(i.flags&=~Ni.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!Yz(r,t,i,this))return;const s=r.metadata.cast;if(s){const l=this._cast(s,i),{valid:d,value:y}=l;if(j7.release(l),!d)return;i=y}r.flags|=Ni.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!Yz(r,t,i,this))return;const s=r.metadata.cast;if(s){const d=this._cast(s,i),{valid:y,value:v}=d;if(j7.release(d),!y)return;i=v}const l=r.metadata.set;l?l.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=jd(t)}getDefaultOrigin(){return U4(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==xc.INITIALIZING?this._origin:Ft.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,l=t.propertyName;s.has(l,r)&&RL(i,s.get(l))&&~t.flags&Ni.Overriden&&r===s.originOf(l)||(t.invalidate(),s.set(l,i,r),t.commit(),SY(this.host,t))}_cast(t,i){const r=j7.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class sve{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const j7=new Fu(sve);function ove(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const s=uv(r,t),l=s==null?"":s;if(l===void 0)throw new Error(`could not find key "${r}" in template`);return l.toString()})}class k6{constructor(t,i,r){this.name=t,this.details=r,this.message=void 0,this instanceof k6&&(this.message=i&&ove(i,r)||"")}toString(){return"["+this.name+"]: "+this.message}}class ge extends k6{constructor(t,i,r){if(super(t,i,r),!(this instanceof ge))return new ge(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return Me(i)}catch{return"[object]"}}))}}catch(t){throw Ke.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new ge(t.name,t.message,t.details)}}ge.prototype.type="error";function G4(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))G4(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),l=s.splice(s.length-1,1)[0];return void G4(V4(e,s),l,i)}const r=e.__accessor__;r!=null&&ave(t,r),e[t]=i}}function ave(e,t){if(ke("esri-unknown-property-errors")&&!lve(e,t))throw new ge("set:unknown-property",uve(e,t))}function lve(e,t){return t.metadatas[e]!=null}function uve(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}Ke.getLogger("esri.core.accessorSupport.set");class EY extends Fu{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=Tge(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const vx=[];function Lg(e){vx.push(e),vx.length===1&&queueMicrotask(()=>{const t=vx.slice();vx.length=0;for(const i of t)i()})}const cve=29;class q2{constructor(t,i=cve){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var HT;(function(e){const t=(l,d,y,v)=>{let _=d,M=d;const k=y>>>1,O=l[_-1];for(;M<=k;){M=_<<1,M<y&&v(l[M-1],l[M])<0&&++M;const R=l[M-1];if(v(R,O)<=0)break;l[_-1]=R,_=M}l[_-1]=O},i=(l,d)=>l<d?-1:l>d?1:0;function r(l,d,y,v){d===void 0&&(d=0),y===void 0&&(y=l.length),v===void 0&&(v=i);for(let M=y>>>1;M>d;M--)t(l,M,y,v);const _=d+1;for(let M=y-1;M>d;M--){const k=l[d];l[d]=l[M],l[M]=k,t(l,_,M,v)}}function*s(l,d,y,v){d===void 0&&(d=0),y===void 0&&(y=l.length),v===void 0&&(v=i);for(let M=y>>>1;M>d;M--)t(l,M,y,v),yield;const _=d+1;for(let M=y-1;M>d;M--){const k=l[d];l[d]=l[M],l[M]=k,t(l,_,M,v),yield}}e.sort=r,e.iterableSort=s})(HT||(HT={}));const Xz=HT,hve=1.5,pve=1.1;class l1{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new rY,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Qz(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Qz(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=sY(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=PL(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=Age(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){Xz.sort(this.data,0,this.length,t)}iterableSort(t){return Xz.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const l=this.data[s];t.call(i,l,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=l,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,s=this.data;for(let l=0;l<r;++l)t.call(i,s[l],l,s)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}}function Qz(e){e.data.length>hve*e.length&&(e.data.length=Math.floor(e.length*pve))}function dve(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const A3=dve(globalThis),eV=new Set;function fve(e,t,i=!1){i&&eV.has(t)||(i&&eV.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function yve(e,t,i={}){if(ke("esri-deprecation-warnings")){const{moduleName:r}=i;TY(e,`Property: ${(r?r+"::":"")+t}`,i)}}function TY(e,t,i={}){if(ke("esri-deprecation-warnings")){const{replacement:r,version:s,see:l,warnOnce:d}=i;let y=t;r&&(y+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),s&&(y+=`
	\u2699\uFE0F Version: ${s}`),l&&(y+=`
	\u{1F517} See ${l} for more details.`),fve(e,y,d)}}function A6(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function O6(e,t,i){if(!A6(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const s of r)e.addEventListener(s,i);return{remove(){for(const s of r)e.removeEventListener(s,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function IY(e,t,i){if(!A6(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=O6(e,t,s=>{r.remove(),i.call(e,s)});return{remove(){r.remove()}}}const mve={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function C0({key:e}){return mve[e]||e}function Cr(e="Aborted"){return new ge("AbortError",e)}function ur(e,t="Aborted"){if(Du(e))throw Cr(t)}function L6(e){return K(e)?"aborted"in e?e:e.signal:e}function Du(e){const t=L6(e);return K(t)&&t.aborted}function O3(e){if(Vs(e))throw e}function WT(e){if(!Vs(e))throw e}function Ll(e,t){const i=L6(e);if(!ce(i)){if(!i.aborted)return IY(i,"abort",()=>t());t()}}function jL(e,t){const i=L6(e);if(!ce(i))return ur(i),IY(i,"abort",()=>t(Cr()))}function gve(e,t){const i=L6(t);return ce(i)?e:new Promise((r,s)=>{let l=Ll(t,()=>s(Cr()));const d=()=>l=po(l);e.then(d,d),e.then(r,s)})}function Vs(e){return e&&e.name==="AbortError"}async function M1(e){try{return await e}catch(t){if(!Vs(t))throw t}}function sp(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function Qr(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(d=>e[d]),s=await Qr(r),l={};return i.map((d,y)=>l[d]=s[y]),l}const t=e;return new Promise(i=>{const r=[];let s=t.length;s===0&&i(r),t.forEach(l=>{const d={promise:l||Promise.resolve(l)};r.push(d),d.promise.then(y=>{d.value=y}).catch(y=>{d.error=y}).then(()=>{--s,s===0&&i(r)})})})}async function vve(e){return(await Qr(e)).filter(t=>!!t.value).map(t=>t.value)}function zL(e,t,i){const r=new AbortController;return Ll(i,()=>r.abort()),new Promise((s,l)=>{let d=setTimeout(()=>{d=0,s(t)},e);Ll(r,()=>{d&&(clearTimeout(d),l(Cr()))})})}function dp(e){return e&&typeof e.then=="function"}function JT(e){return dp(e)?e:Promise.resolve(e)}function cv(e,t=-1){let i,r,s,l,d=null;const y=(...v)=>{if(i){r=v,l&&l.reject(Cr()),l=sp();const O=l.promise;if(d){const R=d;d=null,R.abort()}return O}if(s=l||sp(),l=null,t>0){const O=new AbortController;i=JT(e(...v,O.signal));const R=i;zL(t).then(()=>{i===R&&(l?O.abort():d=O)})}else i=1,i=JT(e(...v));const _=()=>{const O=r;r=s=i=d=null,O!=null&&y(...O)},M=i,k=s;return M.then(_,_),M.then(k.resolve,k.reject),k.promise};return y}function VL(){let e,t;const i=new Promise((s,l)=>{e=s,t=l}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,l)=>A3.setTimeout(()=>r.reject(l),s),r.promise=i,r}function CY(e,t){let i,r=new AbortController;const s=e(r.signal);let l={promise:s,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const d=()=>{l&&(l.finished=!0,l=null),K(i)&&(i.remove(),i=null),r=null};return s.then(d,d),i=Ll(t,()=>{K(l)&&l.abort()}),l}async function tV(e){await Promise.resolve(),ur(e)}function sWe(e){return e}class wve{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class bve{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let KT=0;const lw={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},ZT=["prepare","preRender","render","postRender","update","finish"],YT=[],E1=new l1;class _ve{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const q4={frameTasks:E1,willDispatch:!1,clearFrameTasks:xve,dispatch:OY,executeFrameTasks:Sve};function hv(e){const t=new bve(e);return YT.push(t),q4.willDispatch||(q4.willDispatch=!0,Lg(OY)),t}function Pg(e){const t=new wve(e);return E1.push(t),H4==null&&(KT=performance.now(),H4=requestAnimationFrame(kY)),new _ve(t)}let H4=null;function xve(e=!1){E1.forAll(t=>{t.removed=!0}),e&&AY()}function kY(){const e=performance.now();H4=null,H4=E1.length>0?requestAnimationFrame(kY):null,q4.executeFrameTasks(e)}function Sve(e){const t=e-KT;KT=e;const i=1e3/60,r=Math.max(0,t-i);for(let s=0;s<ZT.length;s++){const l=performance.now(),d=ZT[s];E1.forAll(y=>{var v;y.paused||y.removed||(s===0&&y.ticks++,y.phases[d]&&(lw.time=e,lw.deltaTime=y.ticks===0?0:t,lw.elapsedFrameTime=performance.now()-e,lw.frameDuration=i-r,(v=y.phases[d])==null||v.call(y,lw)))}),$ve[s].record(performance.now()-l)}AY(),Mve.record(performance.now()-e)}const wx=new l1;function AY(){E1.forAll(e=>{e.removed&&wx.push(e)}),E1.removeUnorderedMany(wx.data,wx.length),wx.clear()}function OY(){for(;YT.length;){const e=YT.shift();e.isActive&&e.callback()}q4.willDispatch=!1}function oWe(e=1,t){const i=VL(),r=()=>{Du(t)?i.reject(Cr()):e===0?i():(--e,Lg(()=>r()))};return r(),i.promise}const $ve=ZT.map(e=>new q2(e)),Mve=new q2("total");function Eve(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let Tve=0;function H2(){return++Tve}class P6{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let og=!1;const W4=[];function LY(e,t){let i=new P6(l),r=null,s=!1;function l(){if(!i||s)return;if(og)return void NY(l);const y=r;i.clear(),og=!0,s=!0,r=np(i,e),s=!1,og=!1,t(r,y),FY()}function d(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=np(i,e),s=!1,{remove:d}}function PY(e,t){let i=new P6(s),r=null;function s(){t(r,d)}function l(){i&&(i.destroy(),i=null),r=null}function d(){return i?(i.clear(),r=np(i,e),r):null}return d(),{remove:l}}function RY(e){let t=new P6(r),i=!1;function r(){t&&!i&&(og?NY(r):(t.clear(),og=!0,i=!0,np(t,e),i=!1,og=!1,FY()))}function s(){t&&(t.destroy(),t=null)}return i=!0,np(t,e),i=!1,{remove:s}}function NY(e){W4.includes(e)||W4.unshift(e)}function FY(){for(;W4.length;)W4.pop()()}var W2;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(W2||(W2={}));class zb{constructor(){this.uid=H2(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,l){return this.pool.acquire(W2.Untracked,t,i,r,s,l,RL)}static acquireTracked(t,i,r,s){return this.pool.acquire(W2.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===W2.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,s,l,d,y){this.uid=H2(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=l,this.path=d,this.equals=y}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=H2(),this.removed=!0}}zb.pool=new EY(zb);const K5=new ao,qh=new Set;let J4;function K4(e){qh.delete(e),qh.add(e),J4||(J4=hv(kve))}function Ive(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Cve(e){for(const t of qh.values())t.target===e&&(t.removed=!0)}function kve(){let e=10;for(;J4&&e--;){J4=null;const t=Ave(),i=K5.acquire();for(const r of t){const s=r.uid;Ive(r),s===r.uid&&r.removed&&i.push(r)}for(const r of qh)r.removed&&(i.push(r),qh.delete(r));for(const r of i)zb.pool.release(r);K5.release(i),K5.release(t),XT.forEach(r=>r())}}function Ave(){const e=K5.acquire();e.length=qh.size;let t=0;for(const i of qh)e[t]=i,++t;return qh.clear(),e}const XT=new Set;function Ove(e){return XT.add(e),{remove(){XT.delete(e)}}}function Lve(e,t,i){let r=dY(e,t,i,(s,l,d)=>{let y,v,_=PY(()=>C3(s,l),(M,k)=>{s.__accessor__.destroyed||y&&y.uid!==v?r.remove():(y||(y=zb.acquireUntracked(M,d,k,s,l),v=y.uid),K4(y))});return{remove:fY(()=>{_.remove(),y&&(y.uid!==v||y.removed||(y.removed=!0,K4(y)),y=null),r=_=null})}});return r}function Pve(e,t,i){const r=dY(e,t,i,(s,l,d)=>{let y=!1;return LY(()=>C3(s,l),(v,_)=>{s.__accessor__.destroyed?r.remove():y||(y=!0,RL(_,v)||d.call(s,v,_,l,s),y=!1)})});return r}function Rve(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?Pve(e,t,i):Lve(e,t,i)}function Nve(e,t,i){let r,s,l=PY(e,(d,y)=>{r&&r.uid!==s?l.remove():(r||(r=zb.acquireTracked(d,t,y,i),s=r.uid),K4(r))});return{remove:fY(()=>{l.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,K4(r)),r=null),l=null})}}function Fve(e,t,i){let r=!1;return LY(e,(s,l)=>{r||(r=!0,i(l,s)||t(s,l),r=!1)})}function Dve(e,t,i=!1,r=Uge){return i?Fve(e,t,r):Nve(e,t,r)}function iV(e){return Eve(qh,t=>t.oldValue===e)}function R6(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function DY(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}const ag=Ke.getLogger("esri.core.Accessor");function jve(e){return e==null?e:new Date(e)}function zve(e){return e==null?e:!!e}function L3(e){return e==null?e:e.toString()}function gl(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function UL(e){return e==null?e:Math.round(parseFloat(e))}function jY(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Z4(e,t){return t!=null&&e&&!(t instanceof e)}function zY(e){return e&&"isCollection"in e}function rV(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Vve(e,t){if(!t||!t.constructor||!zY(t.constructor))return QT(e,t)?t:new e(t);const i=rV(e.prototype.itemType),r=rV(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(QT(e,t),t):new e(t):t}function QT(e,t){return!!jY(t)&&(ag.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+N6(e)+"'"),!0)}function BL(e,t){return t==null?t:zY(e)?Vve(e,t):Z4(e,t)?QT(e,t)?t:new e(t):t}function N6(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const Uve=new WeakMap;function Bve(e){switch(e){case Number:return gl;case Yi:return UL;case Boolean:return zve;case String:return L3;case Date:return jve;default:return DY(Uve,e,()=>BL.bind(null,e))}}function er(e,t){const i=Bve(e);return arguments.length===1?i:i(t)}function Vb(e,t,i){return arguments.length===1?Vb.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function Gve(e,t){return arguments.length===1?Vb(er.bind(null,e)):Vb(er.bind(null,e),t)}function VY(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>VY(e,t-1,r)):e(i)}function Y4(e,t,i){if(arguments.length===2)return Y4.bind(null,e,t);if(!i)return i;let r=t,s=i=VY(e,t,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let l=0;l<r;l++)i=[i];return i}function qve(e,t,i){return arguments.length===2?Y4(er.bind(null,e),t):Y4(er.bind(null,e),t,i)}function UY(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function eI(e,t){if(arguments.length===2)return eI(e).call(null,t);const i=new Set,r=e.filter(y=>typeof y!="function"),s=e.filter(y=>typeof y=="function");for(const y of e)typeof y!="string"&&typeof y!="number"||i.add(y);let l=null,d=null;return(y,v)=>{if(y==null)return y;const _=typeof y,M=_==="string"||_==="number";return M&&(i.has(y)||s.some(k=>_==="string"&&k===String||_==="number"&&k===Number))||_==="object"&&s.some(k=>!Z4(y,k))?y:(M&&r.length?(l||(l=r.map(k=>typeof k=="string"?`'${k}'`:`${k}`).join(", ")),ag.error("Accessor#set",`'${y}' is not a valid value for this property, only the following values are valid: ${l}`)):typeof y=="object"&&s.length?(d||(d=s.map(k=>N6(k)).join(", ")),ag.error("Accessor#set",`'${y}' is not a valid value for this property, value must be one of ${d}`)):ag.error("Accessor#set",`'${y}' is not a valid value for this property`),v&&(v.valid=!1),null)}}function Oc(e,t){if(arguments.length===2)return Oc(e).call(null,t);const i={},r=[],s=[];for(const v in e.typeMap){const _=e.typeMap[v];i[v]=er(_),r.push(N6(_)),s.push(v)}const l=()=>`'${r.join("', '")}'`,d=()=>`'${s.join("', '")}'`,y=typeof e.key=="string"?v=>v[e.key]:e.key;return v=>{if(e.base&&!Z4(e.base,v)||v==null)return v;const _=y(v)||e.defaultKeyValue,M=i[_];if(!M)return ag.error("Accessor#set",`Invalid property value, value needs to be one of ${l()}, or a plain object that can autocast (having .type = ${d()})`),null;if(!Z4(e.typeMap[_],v))return v;if(typeof e.key=="string"&&!jY(v)){const k={};for(const O in v)O!==e.key&&(k[O]=v[O]);return M(k)}return M(v)}}class Yi{}const aWe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Hve(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function BY(e){switch(e.type){case"native":return er(e.value);case"array":return Vb(BY(e.value));case"one-of":return Wve(e);default:return null}}function Wve(e){let t=null;return(i,r)=>iI(i,e)?i:(t==null&&(t=tI(e)),ag.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function tI(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Yi:return"integer";case Date:return"date";default:return N6(e.value)}case"array":return`array of ${tI(e.value)}`;case"one-of":{const t=e.values.map(i=>tI(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function iI(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Yi:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!iI(i,t.value));case"one-of":return t.values.some(i=>iI(e,i))}}function S(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=C6(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&Ke.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const l=e.aliasOf;if(l){const v=typeof l=="string"?l:l.source,_=typeof l=="string"?null:l.overridable===!0;let M;s.dependsOn=[v],s.get=function(){let k=V4(this,v);if(typeof k=="function"){M||(M=v.split(".").slice(0,-1).join("."));const O=V4(this,M);O&&(k=k.bind(O))}return k},s.readOnly||(s.set=_?function(k){k!==void 0?this._override(i,k):this._clearOverride(i)}:function(k){G4(this,v,k)})}const d=e.type,y=e.types;s.cast||(d?s.cast=Jve(d):y&&(Array.isArray(y)?s.cast=Vb(Oc(y[0])):s.cast=Oc(y))),e.range&&(s.cast=Kve(s.cast,e.range)),Kge(s,e)}}function GY(e,t,i){const r=C6(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function Jve(e){let t=0,i=e;if(Hve(e))return BY(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(UY(r))return t===0?eI(r):Y4(eI(r),t);if(t===1)return Gve(r);if(t>1)return qve(r,t);const s=e;return s.from?s.from:er(s)}function Kve(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function Zve(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(l=>{t[l]=s}),delete t[r]}}}class mo extends k6{constructor(t,i,r){if(super(t,i,r),!(this instanceof mo))return new mo(t,i,r)}}mo.prototype.type="warning";function qY(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const rI=Ke.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function nV(e,t,i){var r,s;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((s=t.read)==null?void 0:s.enabled)===!1||Qve(e)&&Xo("read.reader",pv(e),t))}function pv(e){var i,r,s;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return Xve(e);if(t===1)return sV(e);if("type"in e&&WY(e.type)){const l=(s=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:s.Type,d=sV(typeof l=="function"?{type:l}:{types:l});return(y,v,_)=>{const M=d(y,v,_);return M&&new e.type(M)}}return GL(e)}function GL(e){return"type"in e?Yve(e.type):ewe(e.types)}function Yve(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void rI.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const l=new e;return l.read(t,r),l}:e.fromJSON}function HY(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>HY(e,s,i,r-1)):e(t,void 0,i)}function Xve(e){var s;const t=GL(e),i=HY.bind(null,t),r=(s=e.ndimArray)!=null?s:0;return(l,d,y)=>{if(l==null)return l;l=i(l,y,r);let v=r,_=l;for(;v>0&&Array.isArray(_);)v--,_=_[0];if(_!==void 0)for(let M=0;M<v;M++)l=[l];return l}}function sV(e){const t=GL(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const d=[];for(const y of i){const v=t(y,void 0,s);v!==void 0&&d.push(v)}return d}const l=t(i,void 0,s);return l!==void 0?[l]:void 0}}function WY(e){if(!qY(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?qL(t.Type):JY(t.Type))}function Qve(e){return"types"in e?JY(e.types):qL(e.type)}function qL(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||WY(e))}function JY(e){for(const t in e.typeMap)if(!qL(e.typeMap[t]))return!1;return!0}function ewe(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(s,l,d)=>{if(s==null)return s;const y=typeof s;if(y!=="object")return void rI.error(`Expected JSON value of type 'object' to deserialize, but got '${y}'`);t||(t=twe(e));const v=e.key;if(typeof v!="string")return;const _=s[v],M=_?t[_]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!M){const O=`Type '${_||"unknown"}' is not supported`;return d&&d.messages&&s&&d.messages.push(new mo(`${i}:unsupported`,O,{definition:s,context:d})),void rI.error(O)}const k=new M;return k.read(s,d),k}}function twe(e){var i,r;const t={};for(const s in e.typeMap){const l=e.typeMap[s],d=k3(l.prototype);if(typeof e.key=="function")continue;const y=d.properties[e.key];if(!y)continue;((i=y.json)==null?void 0:i.type)&&Array.isArray(y.json.type)&&y.json.type.length===1&&typeof y.json.type[0]=="string"&&(t[y.json.type[0]]=l);const v=(r=y.json)==null?void 0:r.write;if(!v||!v.writer){t[s]=l;continue}const _=v.target,M=typeof _=="string"?_:e.key,k={};v.writer(s,k,M),k[M]&&(t[k[M]]=l)}return t}function iwe(e){if(e.json||(e.json={}),aV(e.json),lV(e.json),oV(e.json),e.json.origins)for(const t in e.json.origins)aV(e.json.origins[t]),lV(e.json.origins[t]),oV(e.json.origins[t]);return!0}function oV(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function aV(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function lV(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const rwe=Ke.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function uV(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&qY(e.type))?t.write.writer=owe:i>1?t.write.writer=awe(i):t.types?Array.isArray(t.types)?t.write.writer=swe(t.types[0]):t.write.writer=nwe(t.types):t.write.writer=Ub}function nwe(e){return(t,i,r,s)=>t?KY(t,e,s)?Ub(t,i,r,s):void 0:Ub(t,i,r,s)}function KY(e,t,i){var r,s;for(const l in t.typeMap)if(e instanceof t.typeMap[l])return!0;if(i!=null&&i.messages){const l=(r=t.errorContext)!=null?r:"type",d=`Values of type '${(s=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?s:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new ge(`${l}:unsupported`,d,{definition:e,context:i})),rwe.error(d)}return!1}function swe(e){return(t,i,r,s)=>!t||!Array.isArray(t)?Ub(t,i,r,s):Ub(t.filter(l=>KY(l,e,s)),i,r,s)}function Ub(e,t,i,r){Xo(i,X4(e,r),t)}function X4(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Q4(e):e}function Q4(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function owe(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(l=>X4(l,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[X4(e,r)],Xo(i,s,t)}function ZY(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>ZY(r,t,i-1)):X4(e,t)}function awe(e){return(t,i,r,s)=>{let l;if(t===null)l=null;else{l=ZY(t,s,e);let d=e,y=l;for(;d>0&&Array.isArray(y);)d--,y=y[0];if(y!==void 0)for(let v=0;v<d;v++)l=[l]}Xo(r,l,i)}}function nI(e,t){return HL(e,"read",t)}function YY(e,t){return HL(e,"write",t)}function HL(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const s=e.json.origins[i.origin];s&&(t==="any"||t in s)&&(r=s)}return r}function lwe(e){const t=uwe(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?cwe(r):t;nV(s,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),uV(s,r)}nV(t,e.json,!0),uV(t,e.json)}function uwe(e){return e.json.types?sI(e.json):e.type?XY(e):sI(e)}function cwe(e){return e.type?XY(e):sI(e)}function XY(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!UY(i);)i=i[0],t++;return{type:i,ndimArray:t}}function sI(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function hwe(e){iwe(e)&&(Zve(e),lwe(e))}const z7=new Set,V7=new Set;function Q(e){return t=>{t.prototype.declaredClass=e,dwe(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!z7.has(s.initialize)&&(z7.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!V7.has(s.destroy)&&(V7.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);z7.clear(),V7.clear();class l extends t{constructor(...y){if(super(...y),this.constructor===l&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let v=i.length-1;v>=0;v--)i[v].call(this)}}),r.length){let v=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!v){v=!0;for(let _=0;_<r.length;_++)r[_].call(this)}}})}this.postscript(...y)}}}return l.__accessorMetadata__=k3(t.prototype),l.prototype.declaredClass=e,l}}function pwe(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;Bt(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function dwe(e){const t=e.prototype,i=k3(t).properties,r={};for(const s of Object.getOwnPropertyNames(i)){const l=i[s];hwe(l),r[s]={enumerable:!0,configurable:!0,get:pwe(s,l),set(d){const y=this.__accessor__;if(y!==void 0){if(!Object.isFrozen(this)){if(y.initialized&&l.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(y.lifecycle===xc.CONSTRUCTED&&l.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);y.set(s,d)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:d})}}}Object.defineProperties(e.prototype,r)}var QY;function fwe(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Vw=Symbol("Accessor-Handles");class st{constructor(...t){if(this[QY]=null,this.constructor===st)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new nve(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const l=this;class d extends l{constructor(...v){super(...v),this.inherited=null,s&&s.apply(this,v)}}k3(d.prototype);for(const y in t){const v=t[y];d.prototype[y]=typeof v=="function"?function(..._){const M=this.inherited;let k;this.inherited=function(...O){if(l.prototype[y])return l.prototype[y].apply(this,O)};try{k=v.apply(this,_)}catch(O){throw this.inherited=M,O}return this.inherited=M,k}:t[y]}for(const y in i){const v=fwe(i[y]);S(v)(d.prototype,y)}return Q(r)(d)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Uo(this[Vw],t=>{t.forEach(i=>i.remove())}),this[Vw]=null,Cve(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===xc.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return V4(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return G4(this,t,i),this}watch(t,i,r){return Rve(this,t,i,r)}own(t){let i=this[Vw];if(ce(i)&&(i=this[Vw]=new Set),BT(t))for(const r of t)i.add(r);else i.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}QY=Vw;class lg{constructor(){this._emitter=new lg.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(s=null){this.target=s,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(s,l){const d=this._listenersMap&&this._listenersMap.get(s);if(!d)return!1;const y=this.target||this;return[...d].forEach(v=>{v.call(y,l)}),d.length>0}on(s,l){if(Array.isArray(s)){const y=s.map(v=>this.on(v,l));return I3(y)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const d=this._listenersMap.get(s)||[];return d.push(l),this._listenersMap.set(s,d),{remove:()=>{const y=this._listenersMap&&this._listenersMap.get(s)||[],v=y.indexOf(l);v>=0&&y.splice(v,1)}}}once(s,l){const d=this.on(s,y=>{d.remove(),l.call(null,y)});return d}hasEventListener(s){const l=this._listenersMap&&this._listenersMap.get(s);return l!=null&&l.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(l,d){return this._emitter.emit(l,d)}on(l,d){return this._emitter.on(l,d)}once(l,d){return this._emitter.once(l,d)}hasEventListener(l){return this._emitter.hasEventListener(l)}};return s=g([Q("esri.core.Evented")],s),s};let i=class extends st{constructor(){super(...arguments),this._emitter=new lg.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=g([Q("esri.core.Evented")],i),e.EventedAccessor=i})(lg||(lg={}));const bs=lg;var Ai;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Ai||(Ai={}));function WL(e){return(t,i)=>{t[i]=e}}class eX{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new MY(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var Nh;class ywe{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Xa=new Fu(ywe,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),mwe=()=>{};function U7(e){return e?e instanceof k0?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function B7(e){if(e&&e.length)return e[0]}function gwe(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let l=0;for(;l<s&&e[i+l]===t[r+l];)l++;return l}function tX(e,t,i,r){t&&t.forEach((s,l,d)=>{e.push(s),tX(e,i.call(r,s,l,d),i,r)})}const Cp=new Set,kp=new Set,Ap=new Set,G7=new Map;let vwe=0,k0=Nh=class extends bs.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new eX,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:vwe++})}static isCollection(e){return e!=null&&e instanceof Nh}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Nh?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Bt(this._observable),this._items}set items(e){this._emitBeforeChanges(Ai.ADD)||(this._splice(0,this.length,U7(e)),this._emitAfterChanges(Ai.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=mwe,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(Bt(this._observable),this._emitBeforeChanges(Ai.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Ai.ADD),this}addMany(e,t=this._items.length){if(Bt(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Ai.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,U7(e)),this._emitAfterChanges(Ai.ADD),this}at(e){if(Bt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Bt(this._observable),!this.length||this._emitBeforeChanges(Ai.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Ai.REMOVE),e}clone(){return Bt(this._observable),this._createNewInstance({items:this._items.map(Me)})}concat(...e){Bt(this._observable);const t=e.map(U7);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Bt(this._observable),!this.length||this._emitBeforeChanges(Ai.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(Ai.REMOVE)}every(e,t){return Bt(this._observable),this._items.every(e,t)}filter(e,t){let i;return Bt(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Bt(this._observable),this._items.find(e,t)}findIndex(e,t){return Bt(this._observable),this._items.findIndex(e,t)}flatten(e,t){Bt(this._observable);const i=[];return tX(i,this,e,t),new Nh(i)}forEach(e,t){return Bt(this._observable),this._items.forEach(e,t)}getItemAt(e){return Bt(this._observable),this._items[e]}getNextIndex(e){Bt(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Bt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Bt(this._observable),this._items.indexOf(e,t)}join(e=","){return Bt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Bt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Bt(this._observable);const i=this._items.map(e,t);return new Nh({items:i})}reorder(e,t=this.length-1){Bt(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Ai.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Ai.MOVE)}return e}}pop(){if(Bt(this._observable),!this.length||this._emitBeforeChanges(Ai.REMOVE))return;const e=B7(this._splice(this.length-1,1));return this._emitAfterChanges(Ai.REMOVE),e}push(...e){return Bt(this._observable),this._emitBeforeChanges(Ai.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ai.ADD)),this.length}reduce(e,t){Bt(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Bt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Bt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Bt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ai.REMOVE))return;const t=B7(this._splice(e,1));return this._emitAfterChanges(Ai.REMOVE),t}removeMany(e){if(Bt(this._observable),!e||!e.length||this._emitBeforeChanges(Ai.REMOVE))return[];const t=e instanceof Nh?e.toArray():e,i=this._items,r=[],s=t.length;for(let l=0;l<s;l++){const d=t[l],y=i.indexOf(d);if(y>-1){const v=1+gwe(t,i,l+1,y+1),_=this._splice(y,v);_&&_.length>0&&r.push.apply(r,_),l+=v-1}}return this._emitAfterChanges(Ai.REMOVE),r}reverse(){if(Bt(this._observable),this._emitBeforeChanges(Ai.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ai.MOVE),this}shift(){if(Bt(this._observable),!this.length||this._emitBeforeChanges(Ai.REMOVE))return;const e=B7(this._splice(0,1));return this._emitAfterChanges(Ai.REMOVE),e}slice(e=0,t=this.length){return Bt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Bt(this._observable),this._items.some(e,t)}sort(e){if(Bt(this._observable),!this.length||this._emitBeforeChanges(Ai.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Ai.MOVE),this}splice(e,t,...i){Bt(this._observable);const r=(t?Ai.REMOVE:0)|(i.length?Ai.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return Bt(this._observable),this._items.slice()}toJSON(){return Bt(this._observable),this.toArray()}toLocaleString(){return Bt(this._observable),this._items.toLocaleString()}toString(){return Bt(this._observable),this._items.toString()}unshift(...e){return Bt(this._observable),!e.length||this._emitBeforeChanges(Ai.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ai.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let l,d;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=hv(()=>this._dispatchChange())),t){if(d=r.splice(e,t),this.hasEventListener("before-remove")){const y=Xa.acquire();y.target=this,y.cancellable=!0;for(let v=0,_=d.length;v<_;v++)l=d[v],y.reset(l),this.emit("before-remove",y),y.defaultPrevented&&(d.splice(v,1),r.splice(e,0,l),e+=1,v-=1,_-=1);Xa.release(y)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const y=Xa.acquire();y.target=this,y.cancellable=!1;const v=d.length;for(let _=0;_<v;_++)y.reset(d[_]),this.emit("after-remove",y);Xa.release(y)}}if(i&&i.length){if(s){const M=[];for(const k of i){const O=s.ensureType(k);O==null&&k!=null||M.push(O)}i=M}const y=this.hasEventListener("before-add"),v=this.hasEventListener("after-add"),_=e===this.length;if(y||v){const M=Xa.acquire();M.target=this,M.cancellable=!0;const k=Xa.acquire();k.target=this,k.cancellable=!1;for(const O of i)y?(M.reset(O),this.emit("before-add",M),M.defaultPrevented||(_?r.push(O):r.splice(e++,0,O),this._set("length",r.length),v&&(k.reset(O),this.emit("after-add",k)))):(_?r.push(O):r.splice(e++,0,O),this._set("length",r.length),k.reset(O),this.emit("after-add",k));Xa.release(k),Xa.release(M)}else{if(_)for(const M of i)r.push(M);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||d&&d.length)&&this._notifyChangeEvent(i,d),d}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Xa.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Xa.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Xa.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Xa.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Cp.clear(),kp.clear(),Ap.clear();for(const{added:v,removed:_}of i){if(v)if(Ap.size===0&&kp.size===0)for(const M of v)Cp.add(M);else for(const M of v)kp.has(M)?(Ap.add(M),kp.delete(M)):Ap.has(M)||Cp.add(M);if(_)if(Ap.size===0&&Cp.size===0)for(const M of _)kp.add(M);else for(const M of _)Cp.has(M)?Cp.delete(M):(Ap.delete(M),kp.add(M))}const r=ao.acquire();Cp.forEach(v=>{r.push(v)});const s=ao.acquire();kp.forEach(v=>{s.push(v)});const l=this._items,d=t.items,y=ao.acquire();if(Ap.forEach(v=>{d.indexOf(v)!==l.indexOf(v)&&y.push(v)}),t.listeners&&(r.length||s.length||y.length)){const v={target:this,added:r,removed:s,moved:y},_=t.listeners.length;for(let M=0;M<_;M++){const k=t.listeners[M];k.removed||k.callback.call(this,v)}}ao.release(r),ao.release(s),ao.release(y)}Cp.clear(),kp.clear(),Ap.clear()}};k0.ofType=e=>{if(!e)return Nh;if(G7.has(e))return G7.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends Nh{};return g([WL({Type:e,ensureType:typeof e=="function"?er(e):Oc(e)})],i.prototype,"itemType",void 0),i=g([Q(`esri.core.Collection<${t}>`)],i),G7.set(e,i),i},g([S()],k0.prototype,"length",void 0),g([S()],k0.prototype,"items",null),k0=Nh=g([Q("esri.core.Collection")],k0);const vt=k0;function T1(e,t,i=vt){return t||(t=new i),t===e||(t.removeAll(),wwe(e)?t.addMany(e):e&&t.add(e)),t}function iX(e){return e}function wwe(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class JL{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new JL;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,Me(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:Ft.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===Ft.DEFAULTS){const s=this._values.get(t);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(t,new bwe(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===Ft.DEFAULTS?t:Ft.USER}}class bwe{constructor(t,i){this.value=t,this.origin=i}}function rX(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),Ft.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),Ft.DEFAULTS)})}function _we(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&qz(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&qz(s,i))return!0;return!1}function xwe(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Swe(e,t,i,r,s){let l=nI(t[i],s);xwe(l)&&(e[i]=!0);for(const d of Object.getOwnPropertyNames(t))l=nI(t[d],s),_we(l,i,r)&&(e[d]=!0)}function $we(e,t,i,r){const s=i.metadatas,l=HL(s[t],"any",r),d=l&&l.default;if(d===void 0)return;const y=typeof d=="function"?d.call(e,t,r):d;y!==void 0&&i.set(t,y)}const nX={origin:"service"};function sX(e,t,i=nX){if(!t||typeof t!="object")return;const r=zs(e),s=r.metadatas,l={};for(const d of Object.getOwnPropertyNames(t))Swe(l,s,d,t,i);r.setDefaultOrigin(i.origin);for(const d of Object.getOwnPropertyNames(l)){const y=nI(s[d],i).read,v=y&&y.source;let _;_=v&&typeof v=="string"?C3(t,v):t[d],y&&y.reader&&(_=y.reader.call(e,_,t,i)),_!==void 0&&r.set(d,_)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const d of Object.getOwnPropertyNames(s))l[d]||$we(e,d,r,i)}r.setDefaultOrigin("user")}function Mwe(e,t,i,r=nX){var l;const s={...r,messages:[]};i(s),(l=s.messages)==null||l.forEach(d=>{d.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(d):e.loadWarnings.push(d)})}const Ewe=Ke.getLogger("esri.core.accessorSupport.write");function Twe(e,t,i,r,s){var d,y;const l={};return(y=(d=t.write)==null?void 0:d.writer)==null||y.call(e,r,l,i,s),l}function oX(e,t,i,r,s,l){if(!r||!r.write)return!1;const d=e.get(i);if(!s&&r.write.overridePolicy){const y=r.write.overridePolicy.call(e,d,i,l);y!==void 0&&(s=y)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((d===null&&!s.allowNull&&!s.writerEnsuresNonNull||d===void 0)&&s.isRequired){const y=new ge("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return y&&l&&l.messages?l.messages.push(y):y&&!l&&Ewe.error(y.name,y.message),!1}return!(d===void 0||d===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===Ft.DEFAULTS)&&Iwe(e,i,l,r,d)||!s.ignoreOrigin&&l&&l.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<jd(l.origin))}function Iwe(e,t,i,r,s){const l=r.default;if(l===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof l=="function"){if(Array.isArray(s)){const d=l.call(e,t,i);return $1(d,s)}return!1}return l===s}function Cwe(e,t,i,r){const s=zs(e),l=s.metadatas,d=YY(l[t],r);return!!d&&oX(e,s,t,d,i,r)}function aX(e,t,i){var l,d;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return H5(t,e.toJSON(i));const r=zs(e),s=r.metadatas;for(const y in s){const v=YY(s[y],i);if(!oX(e,r,y,v,void 0,i))continue;const _=e.get(y),M=Twe(e,v,v.write&&typeof v.write.target=="string"?v.write.target:y,_,i);Object.keys(M).length>0&&(t=H5(t,M),(d=(l=i==null?void 0:i.resources)==null?void 0:l.pendingOperations)!=null&&d.length&&Promise.all(i.resources.pendingOperations).then(()=>H5(t,M)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:y,oldOrigin:Qge(r.store.originOf(y)),newOrigin:i.origin}))}return t}const P3=e=>{let t=class extends e{constructor(...i){super(...i);const r=zs(this),s=r.store,l=new JL;r.store=l,rX(r,s,l)}read(i,r){sX(this,i,r)}write(i={},r){return aX(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return kwe.call(this,i,r)}};return t=g([Q("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function kwe(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let Ve=class extends P3(st){};Ve=g([Q("esri.core.JSONSupport")],Ve);var $d;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})($d||($d={}));class Awe{constructor(t){this.instance=t,this._resolver=sp(),this._status=$d.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=$d.RESOLVED,this._cleanUp()},()=>{this._status=$d.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===$d.RESOLVED}isRejected(){return this._status===$d.REJECTED}isFulfilled(){return this._status!==$d.PENDING}abort(){this._resolver.reject(Cr())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=sp(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||Vs(s)||this._resolver.reject(s)}),t.resolve()}}const R3=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new Awe(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,l)=>{this._promiseProps.when(s,l)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=g([Q("esri.core.Promise")],t),t};let eS=class extends R3(st){};eS=g([Q("esri.core.Promise")],eS);const Owe="not-loaded",Lwe="loading",Pwe="failed",cV="loaded",lX=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=l=>{const d=new Promise((y,v)=>{const _=jL(l,v);this.destroyed&&v(new ge("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(y,v).finally(()=>{_&&_.remove()})});if(this.loadStatus===Owe){this._set("loadStatus",Lwe);const y=this._loadController=new AbortController;s({signal:y.signal}),Ll(y.signal,()=>{this._promiseProps.abort()})}return r(),d}})),this.when(()=>{this._set("loadStatus",cV),this._loadController=null},r=>{this._set("loadStatus",Pwe),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===cV}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ge("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return g([S({readOnly:!0})],t.prototype,"loaded",null),g([S({readOnly:!0})],t.prototype,"loadError",void 0),g([S({clonable:!1})],t.prototype,"loadStatus",void 0),g([S({type:[mo],readOnly:!0})],t.prototype,"loadWarnings",null),t=g([Q("esri.core.Loadable")],t),t};let Uw=class extends lX(eS){};Uw=g([Q("esri.core.Loadable")],Uw),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=lX,e.isLoadable=t}(Uw||(Uw={}));const za=Uw;function Rwe(e,t,i){return Qr(e.map((r,s)=>t.apply(i,[r,s])))}async function Nwe(e,t,i){return(await Qr(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}async function F6(e){if(ce(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function lWe(e){try{return{ok:!0,value:await e}}catch(t){return O3(t),{ok:!1,error:t}}}async function uX(e,t){return await e.load(),Fwe(e,t)}async function Fwe(e,t){const i=[],r=(...l)=>{for(const d of l)ce(d)||(Array.isArray(d)?r(...d):vt.isCollection(d)?d.forEach(y=>r(y)):za.isLoadable(d)&&i.push(d))};t(r);let s=null;if(await Nwe(i,async l=>{(await F6(Dwe(l)?l.loadAll():l.load())).ok!==!1||s||(s=l)}),s)throw s.loadError;return e}function Dwe(e){return"loadAll"in e&&typeof e.loadAll=="function"}const jwe=Ke.getLogger("esri.core.urlUtils"),dv=hi.request,hV="esri/config: esriConfig.request.proxyUrl is not set.",cX=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,hX=/^\s*http:/i,zwe=/^\s*https:/i,Vwe=/^\s*file:/i,Uwe=/:\d+$/,Bwe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Gwe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),qwe=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class ug{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Gwe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(qwe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const bx={},Hwe=new ug(hi.applicationUrl);let Fs=Hwe;const Wwe=Jwe();let KL=Wwe;const ZL=()=>Fs,uWe=()=>KL;function Jwe(){const e=Fs.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Fs.scheme}://${Fs.host}${Fs.port!=null?`:${Fs.port}`:""}`}${t}`}function en(e){const t={path:null,query:null},i=new ug(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=pX(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function pX(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let l,d;s<0?(l=decodeURIComponent(r),d=""):(l=decodeURIComponent(r.slice(0,s)),d=decodeURIComponent(r.slice(s+1)));let y=i[l];typeof y=="string"&&(y=i[l]=[y]),Array.isArray(y)?y.push(d):i[l]=d}return i}function pV(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function Bb(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",l=t&&t[i];return l?s+encodeURIComponent(l(r)):Array.isArray(r)?r.map(d=>pV(d)?s+encodeURIComponent(JSON.stringify(d)):s+encodeURIComponent(d)).join("&"):pV(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Kwe(e=!1){let t,i=dv.proxyUrl;if(typeof e=="string"){t=t2e(e);const r=D6(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw jwe.warn(hV),new ge("urlutils:proxy-not-set",hV);return t&&oI()&&(i=tP(i)),en(i)}function cWe(e){const t=D6(e);let i,r;if(t){const s=YL(t.proxyUrl);i=s.path,r=s.query?pX(s.query):null}if(i){const s=en(e);e=i+"?"+s.path;const l=Bb({...r,...s.query});l&&(e=`${e}?${l}`)}return e}const uw={path:"",query:""};function YL(e){const t=e.indexOf("?");return t!==-1?(uw.path=e.slice(0,t),uw.query=e.slice(t+1)):(uw.path=e,uw.query=null),uw}function dX(e){return e=(e=tS(e=o2e(e=YL(e).path),!0)).toLowerCase()}function Zwe(e){const t={proxyUrl:e.proxyUrl,urlPrefix:dX(e.urlPrefix)},i=dv.proxyRules,r=t.urlPrefix;let s=i.length;for(let l=0;l<i.length;l++){const d=i[l].urlPrefix;if(r.indexOf(d)===0){if(r.length===d.length)return-1;s=l;break}d.indexOf(r)===0&&(s=l+1)}return i.splice(s,0,t),s}function D6(e){const t=dv.proxyRules,i=dX(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function fX(e,t){return e=dV(e),t=dV(t),tS(e)===tS(t)}function dV(e){const t=(e=Il(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function yX(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=dv.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function Gb(e,t,i=!1){const r=lI(e),s=lI(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function XL(e){if(typeof e=="string"){if(!Oa(e))return!0;e=lI(e)}if(Gb(e,Fs))return!0;const t=dv.trustedServers||[];for(let i=0;i<t.length;i++){const r=Ywe(t[i]);for(let s=0;s<r.length;s++)if(Gb(e,r[s]))return!0}return!1}function Ywe(e){return bx[e]||(eP(e)||Lc(e)?bx[e]=[new ug(Mu(e))]:bx[e]=[new ug(`http://${e}`),new ug(`https://${e}`)]),bx[e]}function Mu(e,t=KL,i){return Lc(e)?i&&i.preserveProtocolRelative?e:Fs.scheme==="http"&&Fs.authority===Ou(e).slice(2)?`http:${e}`:`https:${e}`:eP(e)?e:I1(e[0]==="/"?s2e(t):t,e)}function QL(e,t=KL,i){if(!Oa(e))return e;const r=Il(e),s=r.toLowerCase(),l=Il(t).toLowerCase().replace(/\/+$/,""),d=i?Il(i).toLowerCase().replace(/\/+$/,""):null;if(d&&l.indexOf(d)!==0)return e;const y=(k,O,R)=>(R=k.indexOf(O,R))===-1?k.length:R;let v=y(s,"/",s.indexOf("//")+2),_=-1;for(;s.slice(0,v+1)===l.slice(0,v)+"/"&&(_=v+1,v!==s.length);)v=y(s,"/",v+1);if(_===-1||d&&_<d.length)return e;e=r.slice(_);const M=l.slice(_-1).replace(/[^/]+/g,"").length;if(M>0)for(let k=0;k<M;k++)e=`../${e}`;else e=`./${e}`;return e}function Il(e){return e=u2e(e=l2e(e=a2e(e=Mu(e=e.trim()))))}function I1(...e){const t=e.filter(K);if(!t||!t.length)return;const i=[];if(Oa(t[0])){const s=t[0],l=s.indexOf("//");l!==-1&&(i.push(s.slice(0,l+1)),r2e(t[0])&&(i[0]+="/"),t[0]=s.slice(l+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,l)=>l?s.concat(l.split("/")):s,[]);for(let s=0;s<r.length;s++){const l=r[s];l===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!l&&s===r.length-1||l&&(l!=="."||i.length===0))&&i.push(l)}return i.join("/")}function Ou(e,t=!1){if(j6(e)||U1(e))return null;let i=e.indexOf("://");if(i===-1&&Lc(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=tS(e,!0)),e}function Oa(e){return Lc(e)||eP(e)}function j6(e){return e!=null&&e.slice(0,5)==="blob:"}function U1(e){return e.slice(0,5)==="data:"}function hWe(e){const t=mX(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function pWe(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Xwe=/^data:(.*?)(;base64)?,(.*)$/;function mX(e){const t=e.match(Xwe);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function gX(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function dWe(e,t){Qwe(e,t)||e2e(e,t)}function Qwe(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function e2e(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function Lc(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function eP(e){return cX.test(e)}function t2e(e){return zwe.test(e)||Fs.scheme==="https"&&Lc(e)}function i2e(e){return hX.test(e)||Fs.scheme==="http"&&Lc(e)}function r2e(e){return Vwe.test(e)}function tP(e){return Lc(e)?`https:${e}`:e.replace(hX,"https:")}function n2e(){return Fs.scheme==="http"}function oI(){return Fs.scheme==="https"}function tS(e,t=!1){return Lc(e)?e.slice(2):(e=e.replace(cX,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function s2e(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function iP(e){let t=0;if(Oa(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function fWe(e,t){if(!e)return"";const i=en(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const s=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(s,"")}function o2e(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function vX(e){return e.replace(/\/+$/,"")}function a2e(e){if(/^https?:\/\//i.test(e)){const t=YL(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function l2e(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function u2e(e){const t=dv.httpsDomains;if(!i2e(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),Uwe.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return n2e()&&r===Fs.authority&&!Bwe.test(e)||(oI()&&r===Fs.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||oI()&&!D6(e))&&(e=tP(e)),e}function aI(e,t,i){if(!(t&&i&&e&&Oa(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),l=e.indexOf(":",r+2),d=Math.min(s<0?e.length:s,l<0?e.length:l);return e.slice(r+2,d).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(d)}`}function lI(e){return typeof e=="string"?new ug(Mu(e)):(e.scheme||(e.scheme=Fs.scheme),e)}function yWe(e){return h2e.test(e)}function wX(e,t){const i=en(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function bX(e,t,i){const r=en(e),s=r.query||{};return s[t]=String(i),`${r.path}?${Bb(s)}`}function Z5(e,t){const i=en(e),r=i.query||{};for(const l in t)r[l]=t[l];const s=Bb(r);return s?`${i.path}?${s}`:i.path}function mWe(e){if(ce(e))return null;const t=e.match(c2e);return t?t[1]:null}const c2e=/.*?\.([^\/]*)$/,h2e=/(^data:image\/svg|\.svg$)/i;function pt(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(l,d)=>{const y=l.constructor.prototype;for(const v of r){const _=GY(l,v,s);_.write&&typeof _.write=="object"||(_.write={}),i&&(_.write.target=i),_.write.writer=y[d]}}}var bl;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(bl||(bl={}));let I;const te={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)te[I]=0;for(I=2056;I<=2065;I++)te[I]=0;for(I=2067;I<=2135;I++)te[I]=0;for(I=2137;I<=2154;I++)te[I]=0;for(I=2161;I<=2170;I++)te[I]=0;for(I=2172;I<=2193;I++)te[I]=0;for(I=2195;I<=2198;I++)te[I]=0;for(I=2200;I<=2203;I++)te[I]=0;for(I=2205;I<=2217;I++)te[I]=0;for(I=2222;I<=2224;I++)te[I]=1;for(I=2225;I<=2250;I++)te[I]=2;for(I=2251;I<=2253;I++)te[I]=1;for(I=2257;I<=2264;I++)te[I]=2;for(I=2274;I<=2279;I++)te[I]=2;for(I=2280;I<=2282;I++)te[I]=1;for(I=2283;I<=2289;I++)te[I]=2;for(I=2290;I<=2292;I++)te[I]=0;for(I=2308;I<=2313;I++)te[I]=0;for(I=2315;I<=2491;I++)te[I]=0;for(I=2494;I<=2866;I++)te[I]=0;for(I=2867;I<=2869;I++)te[I]=1;for(I=2870;I<=2888;I++)te[I]=2;for(I=2891;I<=2895;I++)te[I]=2;for(I=2896;I<=2898;I++)te[I]=1;for(I=2902;I<=2908;I++)te[I]=2;for(I=2915;I<=2920;I++)te[I]=2;for(I=2921;I<=2923;I++)te[I]=1;for(I=2924;I<=2930;I++)te[I]=2;for(I=2931;I<=2962;I++)te[I]=0;for(I=2964;I<=2968;I++)te[I]=2;for(I=2969;I<=2973;I++)te[I]=0;for(I=2975;I<=2991;I++)te[I]=0;for(I=2995;I<=3051;I++)te[I]=0;for(I=3054;I<=3079;I++)te[I]=0;for(I=3081;I<=3088;I++)te[I]=0;for(I=3092;I<=3101;I++)te[I]=0;for(I=3106;I<=3138;I++)te[I]=0;for(I=3146;I<=3151;I++)te[I]=0;for(I=3153;I<=3166;I++)te[I]=0;for(I=3168;I<=3172;I++)te[I]=0;for(I=3174;I<=3203;I++)te[I]=0;for(I=3294;I<=3358;I++)te[I]=0;for(I=3367;I<=3403;I++)te[I]=0;for(I=3408;I<=3416;I++)te[I]=0;for(I=3417;I<=3438;I++)te[I]=2;for(I=3441;I<=3446;I++)te[I]=2;for(I=3447;I<=3450;I++)te[I]=0;for(I=3451;I<=3459;I++)te[I]=2;for(I=3460;I<=3478;I++)te[I]=0;for(I=3554;I<=3559;I++)te[I]=0;for(I=3560;I<=3570;I++)te[I]=2;for(I=3571;I<=3581;I++)te[I]=0;for(I=3594;I<=3597;I++)te[I]=0;for(I=3601;I<=3604;I++)te[I]=0;for(I=3637;I<=3639;I++)te[I]=0;for(I=3665;I<=3667;I++)te[I]=0;for(I=3693;I<=3695;I++)te[I]=0;for(I=3701;I<=3727;I++)te[I]=0;for(I=3728;I<=3739;I++)te[I]=2;for(I=3740;I<=3751;I++)te[I]=0;for(I=3753;I<=3760;I++)te[I]=2;for(I=3761;I<=3773;I++)te[I]=0;for(I=3775;I<=3777;I++)te[I]=0;for(I=3779;I<=3781;I++)te[I]=0;for(I=3783;I<=3785;I++)te[I]=0;for(I=3788;I<=3791;I++)te[I]=0;for(I=3797;I<=3802;I++)te[I]=0;for(I=3814;I<=3816;I++)te[I]=0;for(I=3825;I<=3829;I++)te[I]=0;for(I=3832;I<=3841;I++)te[I]=0;for(I=3844;I<=3852;I++)te[I]=0;for(I=3873;I<=3885;I++)te[I]=0;for(I=3890;I<=3893;I++)te[I]=0;for(I=3907;I<=3912;I++)te[I]=0;for(I=3942;I<=3950;I++)te[I]=0;for(I=3968;I<=3970;I++)te[I]=0;for(I=3973;I<=3976;I++)te[I]=0;for(I=3986;I<=3989;I++)te[I]=0;for(I=3994;I<=3997;I++)te[I]=0;for(I=4048;I<=4051;I++)te[I]=0;for(I=4056;I<=4063;I++)te[I]=0;for(I=4093;I<=4096;I++)te[I]=0;for(I=4390;I<=4398;I++)te[I]=0;for(I=4399;I<=4413;I++)te[I]=2;for(I=4418;I<=4433;I++)te[I]=2;for(I=4455;I<=4457;I++)te[I]=2;for(I=4484;I<=4489;I++)te[I]=0;for(I=4491;I<=4554;I++)te[I]=0;for(I=4568;I<=4589;I++)te[I]=0;for(I=4652;I<=4656;I++)te[I]=0;for(I=4766;I<=4800;I++)te[I]=0;for(I=5014;I<=5016;I++)te[I]=0;for(I=5069;I<=5072;I++)te[I]=0;for(I=5105;I<=5130;I++)te[I]=0;for(I=5173;I<=5188;I++)te[I]=0;for(I=5253;I<=5259;I++)te[I]=0;for(I=5269;I<=5275;I++)te[I]=0;for(I=5292;I<=5311;I++)te[I]=0;for(I=5329;I<=5331;I++)te[I]=0;for(I=5343;I<=5349;I++)te[I]=0;for(I=5355;I<=5357;I++)te[I]=0;for(I=5387;I<=5389;I++)te[I]=0;for(I=5459;I<=5463;I++)te[I]=0;for(I=5479;I<=5482;I++)te[I]=0;for(I=5518;I<=5520;I++)te[I]=0;for(I=5530;I<=5539;I++)te[I]=0;for(I=5550;I<=5552;I++)te[I]=0;for(I=5562;I<=5583;I++)te[I]=0;for(I=5623;I<=5625;I++)te[I]=2;for(I=5631;I<=5639;I++)te[I]=0;for(I=5649;I<=5653;I++)te[I]=0;for(I=5663;I<=5680;I++)te[I]=0;for(I=5682;I<=5685;I++)te[I]=0;for(I=5875;I<=5877;I++)te[I]=0;for(I=5896;I<=5899;I++)te[I]=0;for(I=5921;I<=5940;I++)te[I]=0;for(I=6050;I<=6125;I++)te[I]=0;for(I=6244;I<=6275;I++)te[I]=0;for(I=6328;I<=6348;I++)te[I]=0;for(I=6350;I<=6356;I++)te[I]=0;for(I=6366;I<=6372;I++)te[I]=0;for(I=6381;I<=6387;I++)te[I]=0;for(I=6393;I<=6404;I++)te[I]=0;for(I=6480;I<=6483;I++)te[I]=0;for(I=6511;I<=6514;I++)te[I]=0;for(I=6579;I<=6581;I++)te[I]=0;for(I=6619;I<=6624;I++)te[I]=0;for(I=6625;I<=6627;I++)te[I]=2;for(I=6628;I<=6632;I++)te[I]=0;for(I=6634;I<=6637;I++)te[I]=0;for(I=6669;I<=6692;I++)te[I]=0;for(I=6707;I<=6709;I++)te[I]=0;for(I=6720;I<=6723;I++)te[I]=0;for(I=6732;I<=6738;I++)te[I]=0;for(I=6931;I<=6933;I++)te[I]=0;for(I=6956;I<=6959;I++)te[I]=0;for(I=7005;I<=7007;I++)te[I]=0;for(I=7057;I<=7070;I++)te[I]=2;for(I=7074;I<=7082;I++)te[I]=0;for(I=7109;I<=7118;I++)te[I]=0;for(I=7119;I<=7127;I++)te[I]=1;for(I=7374;I<=7376;I++)te[I]=0;for(I=7528;I<=7586;I++)te[I]=0;for(I=7587;I<=7645;I++)te[I]=2;for(I=7692;I<=7696;I++)te[I]=0;for(I=7755;I<=7787;I++)te[I]=0;for(I=7791;I<=7795;I++)te[I]=0;for(I=7799;I<=7801;I++)te[I]=0;for(I=7803;I<=7805;I++)te[I]=0;for(I=7825;I<=7831;I++)te[I]=0;for(I=7845;I<=7859;I++)te[I]=0;for(I=8013;I<=8032;I++)te[I]=0;for(I=8065;I<=8068;I++)te[I]=1;for(I=8518;I<=8529;I++)te[I]=2;for(I=8533;I<=8536;I++)te[I]=2;for(I=8538;I<=8540;I++)te[I]=2;for(I=8677;I<=8679;I++)te[I]=0;for(I=8836;I<=8840;I++)te[I]=0;for(I=8857;I<=8859;I++)te[I]=0;for(I=8908;I<=8910;I++)te[I]=0;for(I=9154;I<=9159;I++)te[I]=0;for(I=9205;I<=9218;I++)te[I]=0;for(I=9271;I<=9273;I++)te[I]=0;for(I=9295;I<=9297;I++)te[I]=0;for(I=9356;I<=9360;I++)te[I]=0;for(I=9404;I<=9407;I++)te[I]=0;for(I=9476;I<=9482;I++)te[I]=0;for(I=9487;I<=9494;I++)te[I]=0;for(I=9697;I<=9699;I++)te[I]=0;for(I=20002;I<=20032;I++)te[I]=0;for(I=20062;I<=20092;I++)te[I]=0;for(I=20135;I<=20138;I++)te[I]=0;for(I=20248;I<=20258;I++)te[I]=0;for(I=20348;I<=20358;I++)te[I]=0;for(I=20436;I<=20440;I++)te[I]=0;for(I=20822;I<=20824;I++)te[I]=0;for(I=20904;I<=20932;I++)te[I]=0;for(I=20934;I<=20936;I++)te[I]=0;for(I=21004;I<=21032;I++)te[I]=0;for(I=21035;I<=21037;I++)te[I]=0;for(I=21095;I<=21097;I++)te[I]=0;for(I=21148;I<=21150;I++)te[I]=0;for(I=21207;I<=21264;I++)te[I]=0;for(I=21307;I<=21364;I++)te[I]=0;for(I=21413;I<=21423;I++)te[I]=0;for(I=21453;I<=21463;I++)te[I]=0;for(I=21473;I<=21483;I++)te[I]=0;for(I=21780;I<=21782;I++)te[I]=0;for(I=21891;I<=21894;I++)te[I]=0;for(I=21896;I<=21899;I++)te[I]=0;for(I=22171;I<=22177;I++)te[I]=0;for(I=22181;I<=22187;I++)te[I]=0;for(I=22191;I<=22197;I++)te[I]=0;for(I=22234;I<=22236;I++)te[I]=0;for(I=22521;I<=22525;I++)te[I]=0;for(I=22991;I<=22994;I++)te[I]=0;for(I=23028;I<=23038;I++)te[I]=0;for(I=23830;I<=23853;I++)te[I]=0;for(I=23866;I<=23872;I++)te[I]=0;for(I=23877;I<=23884;I++)te[I]=0;for(I=23886;I<=23894;I++)te[I]=0;for(I=23946;I<=23948;I++)te[I]=0;for(I=24311;I<=24313;I++)te[I]=0;for(I=24342;I<=24347;I++)te[I]=0;for(I=24370;I<=24374;I++)te[I]=10;for(I=24375;I<=24381;I++)te[I]=0;for(I=24718;I<=24721;I++)te[I]=0;for(I=24817;I<=24821;I++)te[I]=0;for(I=24877;I<=24882;I++)te[I]=0;for(I=24891;I<=24893;I++)te[I]=0;for(I=25391;I<=25395;I++)te[I]=0;for(I=25828;I<=25838;I++)te[I]=0;for(I=26191;I<=26195;I++)te[I]=0;for(I=26391;I<=26393;I++)te[I]=0;for(I=26701;I<=26722;I++)te[I]=0;for(I=26729;I<=26799;I++)te[I]=2;for(I=26801;I<=26803;I++)te[I]=2;for(I=26811;I<=26813;I++)te[I]=2;for(I=26847;I<=26870;I++)te[I]=2;for(I=26891;I<=26899;I++)te[I]=0;for(I=26901;I<=26923;I++)te[I]=0;for(I=26929;I<=26946;I++)te[I]=0;for(I=26948;I<=26998;I++)te[I]=0;for(I=27037;I<=27040;I++)te[I]=0;for(I=27205;I<=27232;I++)te[I]=0;for(I=27258;I<=27260;I++)te[I]=0;for(I=27391;I<=27398;I++)te[I]=0;for(I=27561;I<=27564;I++)te[I]=0;for(I=27571;I<=27574;I++)te[I]=0;for(I=27581;I<=27584;I++)te[I]=0;for(I=27591;I<=27594;I++)te[I]=0;for(I=28191;I<=28193;I++)te[I]=0;for(I=28348;I<=28358;I++)te[I]=0;for(I=28402;I<=28432;I++)te[I]=0;for(I=28462;I<=28492;I++)te[I]=0;for(I=29118;I<=29122;I++)te[I]=0;for(I=29168;I<=29172;I++)te[I]=0;for(I=29177;I<=29185;I++)te[I]=0;for(I=29187;I<=29195;I++)te[I]=0;for(I=29900;I<=29903;I++)te[I]=0;for(I=30161;I<=30179;I++)te[I]=0;for(I=30491;I<=30494;I++)te[I]=0;for(I=30729;I<=30732;I++)te[I]=0;for(I=31251;I<=31259;I++)te[I]=0;for(I=31265;I<=31268;I++)te[I]=0;for(I=31275;I<=31279;I++)te[I]=0;for(I=31281;I<=31297;I++)te[I]=0;for(I=31461;I<=31469;I++)te[I]=0;for(I=31491;I<=31495;I++)te[I]=0;for(I=31917;I<=31922;I++)te[I]=0;for(I=31965;I<=32e3;I++)te[I]=0;for(I=32001;I<=32003;I++)te[I]=2;for(I=32005;I<=32031;I++)te[I]=2;for(I=32033;I<=32060;I++)te[I]=2;for(I=32064;I<=32067;I++)te[I]=2;for(I=32074;I<=32077;I++)te[I]=2;for(I=32081;I<=32086;I++)te[I]=0;for(I=32107;I<=32130;I++)te[I]=0;for(I=32133;I<=32158;I++)te[I]=0;for(I=32164;I<=32167;I++)te[I]=2;for(I=32180;I<=32199;I++)te[I]=0;for(I=32201;I<=32260;I++)te[I]=0;for(I=32301;I<=32360;I++)te[I]=0;for(I=32601;I<=32662;I++)te[I]=0;for(I=32664;I<=32667;I++)te[I]=2;for(I=32701;I<=32761;I++)te[I]=0;for(I=53001;I<=53004;I++)te[I]=0;for(I=53008;I<=53019;I++)te[I]=0;for(I=53021;I<=53032;I++)te[I]=0;for(I=53034;I<=53037;I++)te[I]=0;for(I=53042;I<=53046;I++)te[I]=0;for(I=53074;I<=53080;I++)te[I]=0;for(I=54001;I<=54004;I++)te[I]=0;for(I=54008;I<=54019;I++)te[I]=0;for(I=54021;I<=54032;I++)te[I]=0;for(I=54034;I<=54037;I++)te[I]=0;for(I=54042;I<=54046;I++)te[I]=0;for(I=54048;I<=54053;I++)te[I]=0;for(I=54074;I<=54080;I++)te[I]=0;for(I=54098;I<=54101;I++)te[I]=0;for(I=102001;I<=102040;I++)te[I]=0;for(I=102042;I<=102063;I++)te[I]=0;for(I=102065;I<=102067;I++)te[I]=0;for(I=102070;I<=102117;I++)te[I]=0;for(I=102122;I<=102216;I++)te[I]=0;for(I=102221;I<=102377;I++)te[I]=0;for(I=102382;I<=102388;I++)te[I]=0;for(I=102389;I<=102398;I++)te[I]=2;for(I=102399;I<=102444;I++)te[I]=0;for(I=102445;I<=102447;I++)te[I]=2;for(I=102448;I<=102458;I++)te[I]=0;for(I=102459;I<=102468;I++)te[I]=2;for(I=102469;I<=102499;I++)te[I]=0;for(I=102500;I<=102519;I++)te[I]=1;for(I=102520;I<=102524;I++)te[I]=0;for(I=102525;I<=102529;I++)te[I]=2;for(I=102530;I<=102588;I++)te[I]=0;for(I=102590;I<=102598;I++)te[I]=0;for(I=102601;I<=102603;I++)te[I]=0;for(I=102605;I<=102628;I++)te[I]=0;for(I=102629;I<=102646;I++)te[I]=2;for(I=102648;I<=102700;I++)te[I]=2;for(I=102701;I<=102703;I++)te[I]=0;for(I=102707;I<=102730;I++)te[I]=2;for(I=102733;I<=102758;I++)te[I]=2;for(I=102767;I<=102900;I++)te[I]=0;for(I=102901;I<=102933;I++)te[I]=2;for(I=102934;I<=102950;I++)te[I]=13;for(I=102951;I<=102955;I++)te[I]=0;for(I=102961;I<=102963;I++)te[I]=0;for(I=102965;I<=102969;I++)te[I]=0;for(I=102971;I<=102973;I++)te[I]=0;for(I=102975;I<=102989;I++)te[I]=0;for(I=102990;I<=102992;I++)te[I]=1;for(I=102997;I<=103002;I++)te[I]=0;for(I=103003;I<=103008;I++)te[I]=2;for(I=103009;I<=103011;I++)te[I]=0;for(I=103012;I<=103014;I++)te[I]=2;for(I=103019;I<=103021;I++)te[I]=0;for(I=103022;I<=103024;I++)te[I]=2;for(I=103029;I<=103031;I++)te[I]=0;for(I=103032;I<=103034;I++)te[I]=2;for(I=103065;I<=103068;I++)te[I]=0;for(I=103074;I<=103076;I++)te[I]=0;for(I=103077;I<=103079;I++)te[I]=1;for(I=103080;I<=103082;I++)te[I]=0;for(I=103083;I<=103085;I++)te[I]=2;for(I=103090;I<=103093;I++)te[I]=0;for(I=103097;I<=103099;I++)te[I]=0;for(I=103100;I<=103102;I++)te[I]=2;for(I=103107;I<=103109;I++)te[I]=0;for(I=103110;I<=103112;I++)te[I]=2;for(I=103113;I<=103116;I++)te[I]=0;for(I=103117;I<=103120;I++)te[I]=2;for(I=103153;I<=103157;I++)te[I]=0;for(I=103158;I<=103162;I++)te[I]=2;for(I=103163;I<=103165;I++)te[I]=0;for(I=103166;I<=103168;I++)te[I]=1;for(I=103169;I<=103171;I++)te[I]=2;for(I=103186;I<=103188;I++)te[I]=0;for(I=103189;I<=103191;I++)te[I]=2;for(I=103192;I<=103195;I++)te[I]=0;for(I=103196;I<=103199;I++)te[I]=2;for(I=103200;I<=103224;I++)te[I]=0;for(I=103225;I<=103227;I++)te[I]=1;for(I=103232;I<=103237;I++)te[I]=0;for(I=103238;I<=103243;I++)te[I]=2;for(I=103244;I<=103246;I++)te[I]=0;for(I=103247;I<=103249;I++)te[I]=2;for(I=103254;I<=103256;I++)te[I]=0;for(I=103257;I<=103259;I++)te[I]=2;for(I=103264;I<=103266;I++)te[I]=0;for(I=103267;I<=103269;I++)te[I]=2;for(I=103300;I<=103375;I++)te[I]=0;for(I=103381;I<=103383;I++)te[I]=0;for(I=103384;I<=103386;I++)te[I]=1;for(I=103387;I<=103389;I++)te[I]=0;for(I=103390;I<=103392;I++)te[I]=2;for(I=103397;I<=103399;I++)te[I]=0;for(I=103400;I<=103471;I++)te[I]=2;for(I=103476;I<=103478;I++)te[I]=0;for(I=103479;I<=103481;I++)te[I]=2;for(I=103486;I<=103488;I++)te[I]=0;for(I=103489;I<=103491;I++)te[I]=2;for(I=103492;I<=103495;I++)te[I]=0;for(I=103496;I<=103499;I++)te[I]=2;for(I=103528;I<=103543;I++)te[I]=0;for(I=103544;I<=103548;I++)te[I]=2;for(I=103549;I<=103551;I++)te[I]=0;for(I=103552;I<=103554;I++)te[I]=1;for(I=103555;I<=103557;I++)te[I]=2;for(I=103558;I<=103560;I++)te[I]=0;for(I=103571;I<=103573;I++)te[I]=0;for(I=103574;I<=103576;I++)te[I]=2;for(I=103577;I<=103580;I++)te[I]=0;for(I=103581;I<=103583;I++)te[I]=2;for(I=103595;I<=103694;I++)te[I]=0;for(I=103696;I<=103699;I++)te[I]=0;for(I=103700;I<=103793;I++)te[I]=2;for(I=103794;I<=103887;I++)te[I]=0;for(I=103900;I<=103971;I++)te[I]=2;const p2e={102113:!0,102100:!0,3857:!0,3785:!0},d2e={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},fV='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',_x=[-20037508342788905e-9,20037508342788905e-9],xx=[-20037508342787e-6,20037508342787e-6],_X={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:_x,origin:xx,dx:1e-5},102100:{wkTemplate:fV,valid:_x,origin:xx,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:_x,origin:xx,dx:1e-5},3857:{wkTemplate:fV,valid:_x,origin:xx,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ms(e,t){return!ce(e)&&!ce(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||af(e)&&af(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function La(e){return Us(e)&&e.wkid&&_X[e.wkid]||null}function z6(e){return!!Us(e)&&(e.wkid?te[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function f2e(e){return!(fv(e)||yv(e))}function qb(e){return Us(e)&&e.wkid===4326}function gWe(e){return Us(e)&&e.wkid===bl.CGCS2000}function af(e){return Us(e)&&e.wkid!=null&&p2e[e.wkid]===!0}function y2e(e){return Us(e)&&e.wkid===32662}function rP(e){return e===bl.GCSMARS2000||e===bl.GCSMARS2000_SPHERE}function fv(e){return Us(e)&&e.wkid!=null&&rP(e.wkid)}function nP(e){return e===bl.GCSMOON2000}function yv(e){return Us(e)&&e.wkid!=null&&nP(e.wkid)}function m2e(e){return Us(e)&&e.wkid!=null&&d2e[e.wkid]===!0}function Us(e){return K(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const g2e={wkid:4326,wkt:Ac(_X[4326].wkTemplate,{Central_Meridian:"0.0"})},v2e={wkid:102100,latestWkid:3857},w2e={wkid:32662};var Qu;let Vi=Qu=class extends Ve{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Qu.WebMercator;if(e.wkid===4326)return Qu.WGS84}const t=new Qu;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return qb(this)}get isWebMercator(){return af(this)}get isGeographic(){return z6(this)}get isWrappable(){return m2e(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Qu.WGS84)return Qu.WGS84;if(this===Qu.WebMercator)return Qu.WebMercator;const e=new Qu;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Me(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return ms(this,e)}toJSON(e){return this.write(void 0,e)}};Vi.GCS_NAD_1927=null,Vi.WGS84=null,Vi.WebMercator=null,Vi.PlateCarree=null,g([S({readOnly:!0})],Vi.prototype,"isWGS84",null),g([S({readOnly:!0})],Vi.prototype,"isWebMercator",null),g([S({readOnly:!0})],Vi.prototype,"isGeographic",null),g([S({readOnly:!0})],Vi.prototype,"isWrappable",null),g([S({type:Yi,json:{write:!0}})],Vi.prototype,"latestWkid",void 0),g([S({type:Yi,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Vi.prototype,"wkid",void 0),g([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Vi.prototype,"wkt",void 0),g([pt("wkt"),pt("web-scene","wkt")],Vi.prototype,"writeWkt",null),g([S({type:Yi,json:{write:!0}})],Vi.prototype,"vcsWkid",void 0),g([S({type:Yi,json:{write:!0}})],Vi.prototype,"latestVcsWkid",void 0),g([S()],Vi.prototype,"imageCoordinateSystem",void 0),Vi=Qu=g([Q("esri.geometry.SpatialReference")],Vi),Vi.prototype.toJSON.isDefaultToJSON=!0,Vi.GCS_NAD_1927=new Vi({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Vi.WGS84=new Vi(g2e),Vi.WebMercator=new Vi(v2e),Vi.PlateCarree=new Vi(w2e),Object.freeze&&(Object.freeze(Vi.GCS_NAD_1927),Object.freeze(Vi.WGS84),Object.freeze(Vi.WebMercator));const Ct=Vi,xX="20220708",SX="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",$X="4.24",b2e={async request(e,t){var y;const{default:i}=await Le(()=>Promise.resolve().then(()=>D2e),void 0,import.meta.url),r=e.options,s=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=s==="native"||s==="native-request-init"?"native-request-init":["blob","json","text"].includes(s)&&((y=yX(e.url))==null?void 0:y.after)?s:"array-buffer";const l=await i(e.url,r),d={data:l.data,ssl:l.ssl};switch(l.requestOptions.responseType){case"native-request-init":return delete d.data.signal,d;case"blob":d.data=await d.data.arrayBuffer();break;case"json":d.data=new TextEncoder().encode(JSON.stringify(d.data)).buffer;break;case"text":d.data=new TextEncoder().encode(d.data).buffer}return{result:d,transferList:[d.data]}}};let vr;function vWe(e){vr=e}function _2e(e){const t=vr&&vr.findCredential(e);return t&&t.token?bX(e,"token",t.token):e}ke("host-webworker")||(ke("edge")||ke("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const x2e=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function MX(e){const t=Ou(e,!0);return t&&t.endsWith(".arcgis.com")&&!x2e.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function S2e(e,t,i=!1,r){return new Promise((s,l)=>{if(Du(r))return void l(yV());let d=()=>{_(),l(new Error(`Unable to load ${t}`))},y=()=>{const M=e;_(),s(M)},v=()=>{if(!e)return;const M=e;_(),M.src="",l(yV())};const _=()=>{ke("esri-image-decode")||(e.removeEventListener("error",d),e.removeEventListener("load",y)),d=null,y=null,e=null,K(r)&&r.removeEventListener("abort",v),v=null,i&&URL.revokeObjectURL(t)};K(r)&&r.addEventListener("abort",v),ke("esri-image-decode")?e.decode().then(y,d):(e.addEventListener("error",d),e.addEventListener("load",y))})}function yV(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function $2e(e){hi.request.crossOriginNoCorsDomains||(hi.request.crossOriginNoCorsDomains={});const t=hi.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[Ou(i)]=0:(t[Ou("http://"+i)]=0,t[Ou("https://"+i)]=0)}function M2e(e){const t=hi.request.crossOriginNoCorsDomains;if(t){let i=Ou(e);if(i)return i=i.toLowerCase(),!Gb(i,ZL())&&t[i]<Date.now()-36e5}return!1}async function E2e(e){var r;const t=hi.request.crossOriginNoCorsDomains;t&&(t[Ou(e).toLowerCase()]=Date.now());const i=en(e);e=i.path,((r=i.query)==null?void 0:r.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Bi(e,t){var _;const i=U1(e),r=j6(e);r||i||(e=Il(e));const s={url:e,requestOptions:{...t}};let l=yX(e);if(l){const M=await P2e(l,s);if(M!=null)return{data:M,getHeader:sP,requestOptions:s.requestOptions,url:s.url};l.after||l.error||(l=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"){if(ke("host-webworker")||ke("host-node"))throw Eu("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw Eu("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),s);if(t.method==="head"){if(t.body)throw Eu("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw Eu("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await A2e(),iS)return iS.execute(e,t);const d=new AbortController;Ll(t,()=>d.abort());const y={controller:d,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:l,params:s,redoRequest:!1,useIdentity:wu.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=await N2e(y);return(_=l==null?void 0:l.after)==null||_.call(l,v),v}let iS;const wu=hi.request,EX="FormData"in globalThis,T2e=[499,498,403,401],I2e=["COM_0056","COM_0057","SB_0008"],C2e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],sP=()=>null,uI=Symbol();function k2e(e){const t=Ou(e);t&&!Bi._corsServers.includes(t)&&Bi._corsServers.push(t)}function mV(e){const t=Ou(e);return!t||t.endsWith(".arcgis.com")||Bi._corsServers.includes(t)||XL(t)}function Eu(e,t,i,r){let s="Error";const l={url:i.url,requestOptions:i.requestOptions,getHeader:sP,ssl:!1};if(t instanceof ge)return t.details?(t.details=Me(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=l,t;if(t){const d=r&&(_=>r.headers.get(_)),y=r&&r.status,v=t.message;v&&(s=v),d&&(l.getHeader=d),l.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||y||0,l.subCode=t.subcode,l.messageCode=t.messageCode,typeof t.details=="string"?l.messages=[t.details]:l.messages=t.details,l.raw=uI in t?t[uI]:t}return Vs(t)?Cr():new ge(e,s,l)}async function A2e(){ke("host-webworker")?iS||(iS=await Le(()=>import("./request.10840202.js"),[],import.meta.url)):Bi._abortableFetch||(Bi._abortableFetch=globalThis.fetch.bind(globalThis))}async function cI(){vr||await Le(()=>import("./IdentityManager.482dbce1.js"),[],import.meta.url)}async function O2e(e){var y;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let l=null,d=null;if(EX&&"HTMLFormElement"in globalThis&&(s instanceof FormData?l=s:s instanceof HTMLFormElement&&(l=new FormData(s))),typeof s=="string"&&(d=s),e.fetchOptions={cache:i.cacheBust&&!Bi._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:wu.priority,redirect:"follow",signal:r},(l||d)&&(e.fetchOptions.body=l||d),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((y=i.query)==null?void 0:y.token)||(l==null?void 0:l.get("token"))),!e.hasToken&&hi.apiKey&&MX(t)&&(i.query||(i.query={}),i.query.token=hi.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!TX(t)&&!Du(r)){let v;i.authMode==="immediate"?(await cI(),v=await vr.getCredential(t,{signal:r}),e.credential=v):i.authMode==="no-prompt"?(await cI(),v=await vr.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=v):vr&&(v=vr.findCredential(t)),v&&(e.credentialToken=v.token,e.useSSL=!!v.ssl)}}function TX(e){return C2e.some(t=>t.test(e))}async function L2e(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions,s=j6(t)||U1(t),l=i.responseType||"json",d=s?0:i.timeout!=null?i.timeout:wu.timeout;let y=!1;if(!s){e.useSSL&&(t=tP(t)),i.cacheBust&&r.cache==="default"&&(t=bX(t,"request.preventCache",Date.now()));let O={...i.query};e.credentialToken&&(O.token=e.credentialToken);let R=Bb(O);ke("esri-url-encodes-apostrophe")&&(R=R.replace(/'/g,"%27"));const D=t.length+1+R.length;let z;y=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||D>wu.maxUrlLength;const B=i.useProxy||!!D6(t);if(B){const V=Kwe(t);z=V.path,!y&&z.length+1+D>wu.maxUrlLength&&(y=!0),V.query&&(O={...V.query,...O})}if(r.method==="HEAD"&&(y||B)){if(y)throw D>wu.maxUrlLength?Eu("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Eu("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(B)throw Eu("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(y?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=Z5(t,O):(r.body=Bb(O),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Z5(t,O),B&&(e.useProxy=!0,t=`${z}?${t}`),O.token&&EX&&r.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&r.body.set("token",O.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!Gb(t,ZL())){if(XL(t))e.withCredentials=!0;else if(vr){const V=vr.findServerInfo(t);V&&V.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",M2e(t)&&await E2e(y?Z5(t,O):t))}let v,_,M=0,k=!1;d>0&&(M=setTimeout(()=>{k=!0,e.controller.abort()},d));try{if(i.responseType==="native-request-init")_=r,_.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||y||R2e(i.headers)||!s&&!e.useProxy&&wu.proxyUrl&&!mV(t)){if(v=await Bi._abortableFetch(t,r),e.useProxy||k2e(t),i.responseType==="native")_=v;else if(r.method!=="HEAD")if(v.ok){switch(l){case"array-buffer":_=await v.arrayBuffer();break;case"blob":case"image":_=await v.blob();break;default:_=await v.text()}if(M&&(clearTimeout(M),M=0),l==="json"||l==="xml"||l==="document")if(_)switch(l){case"json":_=JSON.parse(_);break;case"xml":_=gV(_,"application/xml");break;case"document":_=gV(_,"text/html")}else _=null;if(_){if(l==="array-buffer"||l==="blob"){const O=v.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(O)&&_[l==="blob"?"size":"byteLength"]<=750)try{const R=await new Response(_).json();R.error&&(_=R)}catch{}}l==="image"&&_ instanceof Blob&&(_=await vV(URL.createObjectURL(_),e,!0))}}else _=await v.text()}else _=await vV(t,e)}catch(O){if(O.name==="AbortError")throw k?new Error("Timeout exceeded"):Cr("Request canceled");if(!(!v&&O instanceof TypeError&&wu.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||mV(t))throw O;e.redoRequest=!0,Zwe({proxyUrl:wu.proxyUrl,urlPrefix:Ou(t)})}finally{M&&clearTimeout(M)}return[v,_]}async function P2e(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(s){i=Eu("request:interceptor",s,t)}if((r instanceof Error||r instanceof ge)&&(i=Eu("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function R2e(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function gV(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function N2e(e){var l;let t,i;await O2e(e);try{do[t,i]=await L2e(e);while(!await F2e(e,t,i))}catch(d){const y=Eu("request:server",d,e.params,t);throw y.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(y),y}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((l=i.user)==null?void 0:l.username)&&!XL(r)){const d=Ou(r,!0);d&&wu.trustedServers.push(d)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&$2e(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&vr){const d=vr.findServerInfo(s.server);let y=d&&d.owningSystemUrl;if(y){y=y.replace(/\/?$/,"/sharing");const v=vr.findCredential(y,s.userId);v&&vr._getIdenticalSvcIdx(y,v)===-1&&v.resources.unshift(y)}}return{data:i,getHeader:t?d=>t.headers.get(d):sP,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function F2e(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,l,d,y;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[uI]=i,s;i!=null&&i.error&&(s=i.error),s&&(l=Number(s.code),d=s.hasOwnProperty("subcode")?Number(s.subcode):null,y=s.messageCode,y=y&&y.toUpperCase());const v=r.authMode;if(l===403&&(d===4||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(v!=="no-prompt"||l===498)&&T2e.includes(l)&&!TX(e.params.url)&&(l!==403||!I2e.includes(y)&&(d==null||d===2&&e.credentialToken))){await cI();try{const _=await vr.getCredential(e.params.url,{error:Eu("request:server",s,e.params),prompt:v!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=_,e.credentialToken=_.token,e.useSSL=e.useSSL||_.ssl,!1}catch(_){if(v==="no-prompt")return e.credential=null,e.credentialToken=null,!1;s=_}}if(s)throw s;return!0}function vV(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=wu.priority,s.src=e,S2e(s,e,i,r)}Bi._abortableFetch=null,Bi._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const D2e=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"}));function nt(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(l,d)=>{const y=l.constructor.prototype;r.forEach(v=>{const _=GY(l,v,s);_.read&&typeof _.read=="object"||(_.read={}),_.read.reader=y[d],i&&(_.read.source=(_.read.source||[]).concat(i))})}}let ec=class extends Ve{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ct.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Ct)return e;if(e!=null){const i=new Ct;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};g([S()],ec.prototype,"type",void 0),g([S({readOnly:!0})],ec.prototype,"cache",null),g([S({readOnly:!0})],ec.prototype,"extent",null),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ec.prototype,"hasM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ec.prototype,"hasZ",void 0),g([S({type:Ct,json:{write:!0}})],ec.prototype,"spatialReference",void 0),g([nt("spatialReference")],ec.prototype,"readSpatialReference",null),ec=g([Q("esri.geometry.Geometry")],ec);const Qo=ec,j2e=Object.prototype.toString;function z2e(e){const t="__accessorMetadata__"in e?er(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return V2e.apply(this,i)}}function V2e(e,t,i,r){C6(e,t).cast=r}function U2e(e){return(t,i)=>{C6(t,e).cast=t[i]}}function oi(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&j2e.call(e[0])==="[object Function]"?z2e(e[0]):e.length===1&&typeof e[0]=="string"?U2e(e[0]):void 0}function B2e(e,t,i,r){var s;return e.x=e.x+t,e.y=e.y+i,r!=null&&(e.z=((s=e.z)!=null?s:0)+r),e}function G2e(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}class oP{constructor(t,i,r,s){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const tr=new oP(6378137,1/298.257223563,3e5,.006694379990137799),Hh=new oP(3396190,1/169.8944472236118,23e4),lf=new oP(1737400,0,0),q2e=57.29577951308232,H2e=.017453292519943;function wV(e){return e*q2e}function bV(e){return e*H2e}function _V(e){return e/tr.radius}function xV(e){return Math.PI/2-2*Math.atan(Math.exp(-e/tr.radius))}function hI(e){return e.wkid!=null||e.wkt!=null}const q7=[0,0];function rS(e,t,i,r,s){const l=e,d=s;if(d.spatialReference=i,"x"in l&&"x"in d)[d.x,d.y]=t(l.x,l.y,q7,r);else if("xmin"in l&&"xmin"in d)[d.xmin,d.ymin]=t(l.xmin,l.ymin,q7,r),[d.xmax,d.ymax]=t(l.xmax,l.ymax,q7,r);else if("paths"in l&&"paths"in d||"rings"in l&&"rings"in d){const y="paths"in l?l.paths:l.rings,v=[];let _;for(let M=0;M<y.length;M++){const k=y[M];_=[],v.push(_);for(let O=0;O<k.length;O++)_.push(t(k[O][0],k[O][1],[0,0],r)),k[O].length>2&&_[O].push(k[O][2]),k[O].length>3&&_[O].push(k[O][3])}"paths"in d?d.paths=v:d.rings=v}else if("points"in l&&"points"in d){const y=l.points,v=[];for(let _=0;_<y.length;_++)v[_]=t(y[_][0],y[_][1],[0,0],r),y[_].length>2&&v[_].push(y[_][2]),y[_].length>3&&v[_].push(y[_][3]);d.points=v}return s}function Y5(e,t){const i=e&&(hI(e)?e:e.spatialReference),r=t&&(hI(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!ms(r,i)||af(r)&&qb(i)||af(i)&&qb(r))}function V6(e,t){if(ce(e))return null;const i=e.spatialReference,r=t&&(hI(t)?t:t.spatialReference);return Y5(i,r)?ms(i,r)?Me(e):af(r)?rS(e,Dm,Ct.WebMercator,!1,Me(e)):qb(r)?rS(e,J2,Ct.WGS84,!1,Me(e)):null:null}function Dm(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=bV(t);return i[0]=bV(e)*tr.radius,i[1]=tr.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function J2(e,t,i=[0,0],r=!1){const s=wV(e/tr.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=wV(Math.PI/2-2*Math.atan(Math.exp(-t/tr.radius))),i}function Wh(e,t=!1,i=Me(e)){return rS(e,Dm,Ct.WebMercator,t,i)}function jm(e,t=!1,i=Me(e)){return rS(e,J2,Ct.WGS84,t,i)}var X5;const cw=[0,0];function SV(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const Sx=Ke.getLogger("esri.geometry.Point");let Ys=X5=class extends Qo{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,s){let l;if(Array.isArray(e))l=e,s=t,e=l[0],t=l[1],i=l[2],r=l[3];else if(e&&typeof e=="object"){if(l=e,e=l.x!=null?l.x:l.longitude,t=l.y!=null?l.y:l.latitude,i=l.z,r=l.m,(s=l.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Ct(s)),l.longitude!=null||l.latitude!=null){if(l.longitude==null)Sx.warn(".longitude=","Latitude was defined without longitude");else if(l.latitude==null)Sx.warn(".latitude=","Longitude was defined without latitude");else if(!l.declaredClass&&s&&s.isWebMercator){const y=Dm(l.longitude,l.latitude,cw);e=y[0],t=y[1]}}}else SV(i)?(s=i,i=null):SV(r)&&(s=r,r=null);const d={x:e,y:t};return d.x==null&&d.y!=null?Sx.warn(".y=","Y coordinate was defined without an X coordinate"):d.y==null&&d.x!=null&&Sx.warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(d.spatialReference=s),i!=null&&(d.z=i),r!=null&&(d.m=r),d}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return J2(t,i,cw)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",Dm(i,e,cw)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return J2(e,t,cw)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",Dm(e,t,cw)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new X5;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return X5.copy(e,this),this}equals(e){if(ce(e))return!1;const{x:t,y:i,z:r,m:s,spatialReference:l}=this,{z:d,m:y}=e;let{x:v,y:_,spatialReference:M}=e;if(!l.equals(M))if(l.isWebMercator&&M.isWGS84)[v,_]=Dm(v,_),M=l;else{if(!l.isWGS84||!M.isWebMercator)return!1;[v,_]=J2(v,_),M=l}return t===v&&i===_&&r===d&&s===y&&l.wkid===M.wkid}offset(e,t,i){return B2e(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=La(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let l;return t>r?(l=Math.ceil(Math.abs(t-r)/s),t-=l*s):t<i&&(l=Math.ceil(Math.abs(t-i)/s),t+=l*s),this._set("x",t),this}distance(e){return G2e(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};g([S({readOnly:!0})],Ys.prototype,"cache",null),g([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ys.prototype,"hasM",null),g([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ys.prototype,"hasZ",null),g([S({type:Number})],Ys.prototype,"latitude",null),g([S({type:Number})],Ys.prototype,"longitude",null),g([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),oi(e=>isNaN(e)?e:gl(e))],Ys.prototype,"x",void 0),g([pt("x")],Ys.prototype,"writeX",null),g([nt("x")],Ys.prototype,"readX",null),g([S({type:Number,json:{write:!0}})],Ys.prototype,"y",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ys.prototype,"z",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ys.prototype,"m",void 0),Ys=X5=g([Q("esri.geometry.Point")],Ys),Ys.prototype.toJSON.isDefaultToJSON=!0;const ut=Ys,H7=[0,0];function U6(e,t){return!!K(t)&&ro(e,t.x,t.y,t.z)}function wWe(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!Rg(e,i))return!1;return!0}function W2e(e,t){const{xmin:i,ymin:r,zmin:s,xmax:l,ymax:d,zmax:y}=t;return e.hasZ&&t.hasZ?ro(e,i,r,s)&&ro(e,i,d,s)&&ro(e,l,d,s)&&ro(e,l,r,s)&&ro(e,i,r,y)&&ro(e,i,d,y)&&ro(e,l,d,y)&&ro(e,l,r,y):ro(e,i,r)&&ro(e,i,d)&&ro(e,l,d)&&ro(e,l,r)}function Rg(e,t){return ro(e,t[0],t[1])}function J2e(e,t){return ro(e,t[0],t[1],t[2])}function ro(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function IX(e,t){return H7[1]=t.y,H7[0]=t.x,K2e(e,H7)}function K2e(e,t){return CX(e.rings,t)}function CX(e,t){if(!e)return!1;if(Z2e(e))return $V(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=$V(i,e[r],t);return i}function Z2e(e){return!Array.isArray(e[0][0])}function $V(e,t,i){const[r,s]=i;let l=e,d=0;for(let y=0,v=t.length;y<v;y++){d++,d===v&&(d=0);const[_,M]=t[y],[k,O]=t[d];(M<s&&O>=s||O<s&&M>=s)&&_+(s-M)/(O-M)*(k-_)<r&&(l=!l)}return l}function Y2e(e,t){return U6(e,t)}function X2e(e,t){const i=e.hasZ&&t.hasZ;let r,s,l;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(l=t.zmin,e.zmax<l)return!1}else if(l=e.zmin,t.zmax<l)return!1}return!0}function Q2e(e,t){const{points:i,hasZ:r}=t,s=r?J2e:Rg;for(const l of i)if(s(e,l))return!0;return!1}const C1=[0,0],k1=[0,0],A1=[0,0],O1=[0,0],ebe=[C1,k1,A1,O1],kX=[[A1,C1],[C1,k1],[k1,O1],[O1,A1]];function tbe(e,t){return ibe(e,t.rings)}function ibe(e,t){C1[0]=e.xmin,C1[1]=e.ymax,k1[0]=e.xmax,k1[1]=e.ymax,A1[0]=e.xmin,A1[1]=e.ymin,O1[0]=e.xmax,O1[1]=e.ymin;for(const i of ebe)if(CX(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(Rg(e,r))return!0;for(let s=1;s<i.length;s++){const l=i[s];if(Rg(e,l)||AX(r,l,kX))return!0;r=l}}return!1}function rbe(e,t){C1[0]=e.xmin,C1[1]=e.ymax,k1[0]=e.xmax,k1[1]=e.ymax,A1[0]=e.xmin,A1[1]=e.ymin,O1[0]=e.xmax,O1[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(Rg(e,s))return!0;for(let l=1;l<r.length;l++){const d=r[l];if(Rg(e,d)||AX(s,d,kX))return!0;s=d}}return!1}const Hn=[0,0];function nbe(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const l=i[s],d=i[s+1];for(let y=t+1;y<e.length;y++)for(let v=0;v<e[y].length-1;v++){const _=e[y][v],M=e[y][v+1];if(pI(l,d,_,M,Hn)&&!(Hn[0]===l[0]&&Hn[1]===l[1]||Hn[0]===_[0]&&Hn[1]===_[1]||Hn[0]===d[0]&&Hn[1]===d[1]||Hn[0]===M[0]&&Hn[1]===M[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let l=r-1;s===0&&(l=r-2);const d=i[s],y=i[s+1];for(let v=s+2;v<l;v++){const _=i[v],M=i[v+1];if(pI(d,y,_,M,Hn)&&!(Hn[0]===d[0]&&Hn[1]===d[1]||Hn[0]===_[0]&&Hn[1]===_[1]||Hn[0]===y[0]&&Hn[1]===y[1]||Hn[0]===M[0]&&Hn[1]===M[1]))return!0}}}return!1}function AX(e,t,i){for(let r=0;r<i.length;r++)if(pI(e,t,i[r][0],i[r][1]))return!0;return!1}function pI(e,t,i,r,s){const[l,d]=e,[y,v]=t,[_,M]=i,[k,O]=r,R=k-_,D=l-_,z=y-l,B=O-M,V=d-M,q=v-d,J=B*z-R*q;if(J===0)return!1;const ne=(R*V-B*D)/J,re=(z*V-q*D)/J;return ne>=0&&ne<=1&&re>=0&&re<=1&&(s&&(s[0]=l+ne*(y-l),s[1]=d+ne*(v-d)),!0)}function sbe(e){switch(e){case"esriGeometryEnvelope":case"extent":return X2e;case"esriGeometryMultipoint":case"multipoint":return Q2e;case"esriGeometryPoint":case"point":return Y2e;case"esriGeometryPolygon":case"polygon":return tbe;case"esriGeometryPolyline":case"polyline":return rbe}}var il;function obe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Op(e,t,i){return t==null?i:i==null?t:e(t,i)}let In=il=class extends Qo{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return obe(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ct.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s==null?Ct.WGS84:s}}static fromBounds(e,t){return new il({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new il({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new ut({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new il;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Y5(t,i)&&(e=t.isWebMercator?Wh(e):jm(e,!0)),e.type==="point"?U6(this,e):e.type==="extent"&&W2e(this,e)}equals(e){if(this===e)return!0;if(ce(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Y5(t,i)&&(e=t.isWebMercator?Wh(e):jm(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(ce(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Y5(t,i)&&(e=t.isWebMercator?Wh(e):jm(e,!0)),sbe(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Op(Math.min,this.zmin,e.zmin),this.zmax=Op(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Op(Math.min,this.mmin,e.mmin),this.mmax=Op(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:ce(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Op(Math.max,this.zmin,e.zmin),this.zmax=Op(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Op(Math.max,this.mmin,e.mmin),this.mmax=Op(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=La(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?jm(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new Ct(Ac(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,l=this.xmax;return s>=i&&s<=r&&l>=i&&l<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;if(!(i=i||La(r)))return this;const s=this._getParts(i).map(y=>y.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return s;let l=!0,d=!0;return s.forEach(y=>{y.hasZ||(l=!1),y.hasM||(d=!1)}),{rings:s.map(y=>{const v=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(l){const _=(y.zmax-y.zmin)/2;for(let M=0;M<v.length;M++)v[M].push(_)}if(d){const _=(y.mmax-y.mmin)/2;for(let M=0;M<v.length;M++)v[M].push(_)}return v}),hasZ:l,hasM:d,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:l,spatialReference:d}=this,y=this.width,v=this.xmin,_=this.xmax;let M;e=e||La(d);const[k,O]=e.valid;M=this._normalizeX(this.xmin,e);const R=M.x,D=M.frameId;M=this._normalizeX(this.xmax,e);const z=M.x,B=M.frameId,V=R===z&&y>0;if(y>2*O){const q=new il(v<_?R:z,s,O,l,d),J=new il(k,s,v<_?z:R,l,d),ne=new il(0,s,O,l,d),re=new il(k,s,0,l,d),ue=[],_e=[];q.contains(ne)&&ue.push(D),q.contains(re)&&_e.push(D),J.contains(ne)&&ue.push(B),J.contains(re)&&_e.push(B);for(let xe=D+1;xe<B;xe++)ue.push(xe),_e.push(xe);t.push({extent:q,frameIds:[D]},{extent:J,frameIds:[B]},{extent:ne,frameIds:ue},{extent:re,frameIds:_e})}else R>z||V?t.push({extent:new il(R,s,O,l,d),frameIds:[D]},{extent:new il(k,s,z,l,d),frameIds:[B]}):t.push({extent:new il(R,s,z,l,d),frameIds:[D]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let l=0;l<t.length;l++)t[l].extent.set(s)}return t}_normalizeX(e,t){const[i,r]=t.valid,s=2*r;let l,d=0;return e>r?(l=Math.ceil(Math.abs(e-r)/s),e-=l*s,d=l):e<i&&(l=Math.ceil(Math.abs(e-i)/s),e+=l*s,d=-l),{x:e,frameId:d}}};g([S({readOnly:!0})],In.prototype,"cache",null),g([S({readOnly:!0})],In.prototype,"center",null),g([S({readOnly:!0})],In.prototype,"extent",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],In.prototype,"hasM",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],In.prototype,"hasZ",null),g([S({readOnly:!0})],In.prototype,"height",null),g([S({readOnly:!0})],In.prototype,"width",null),g([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],In.prototype,"xmin",void 0),g([S({type:Number,json:{write:!0}})],In.prototype,"ymin",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],In.prototype,"mmin",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],In.prototype,"zmin",void 0),g([S({type:Number,json:{write:!0}})],In.prototype,"xmax",void 0),g([S({type:Number,json:{write:!0}})],In.prototype,"ymax",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],In.prototype,"mmax",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],In.prototype,"zmax",void 0),In=il=g([Q("esri.geometry.Extent")],In),In.prototype.toJSON.isDefaultToJSON=!0;const yi=In;let K2;var UJ,BJ,GJ;const W7=(GJ=(UJ=globalThis.esriConfig)==null?void 0:UJ.locale)!=null?GJ:(BJ=globalThis.dojoConfig)==null?void 0:BJ.locale;function OX(){var e,t;return(t=W7!=null?W7:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function Pa(){return K2===void 0&&(K2=OX()),K2}const Z2=[];function B6(e){return Z2.push(e),{remove(){Z2.splice(Z2.indexOf(e),1)}}}const dI=[];function aP(e){return dI.push(e),{remove(){Z2.splice(dI.indexOf(e),1)}}}function abe(){const e=OX();K2!==e&&(K2=e,[...dI].forEach(t=>{t.call(null,e)}),[...Z2].forEach(t=>{t.call(null,e)}))}var qJ;(qJ=globalThis.addEventListener)==null||qJ.call(globalThis,"languagechange",abe);class Dt{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,l)=>{const d=this.toJSON(r);d!==void 0&&Xo(l,d,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function _s(){return function(e,t){return new Dt(e,{ignoreUnknown:!0,...t})}}var fI;const lbe=new Dt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let rl=fI=class extends st{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new fI({categories:this.categories?Me(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(d=>Array.isArray(d)?JSON.stringify(d):d)),this.extent){const d=V6(this.extent,Ct.WGS84);K(d)&&(r=`${d.xmin},${d.ymin},${d.xmax},${d.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const l={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(l.sortField=this.sortField.split(",").map(d=>lbe.toJSON(d.trim())).join(","),l.sortOrder=this.sortOrder),{query:{...t,...l}}}};g([S()],rl.prototype,"categories",void 0),g([S()],rl.prototype,"disableExtraQuery",void 0),g([S({type:yi})],rl.prototype,"extent",void 0),g([S()],rl.prototype,"filter",void 0),g([S()],rl.prototype,"num",void 0),g([S()],rl.prototype,"query",void 0),g([S()],rl.prototype,"sortField",void 0),g([S()],rl.prototype,"sortOrder",null),g([S()],rl.prototype,"start",void 0),rl=fI=g([Q("esri.portal.PortalQueryParams")],rl);const Dh=rl;let Hf=class extends st{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};g([S()],Hf.prototype,"nextQueryParams",void 0),g([S()],Hf.prototype,"queryParams",void 0),g([S()],Hf.prototype,"results",void 0),g([S()],Hf.prototype,"total",void 0),Hf=g([Q("esri.portal.PortalQueryResult")],Hf);const ube=Hf;let lh=class extends Ve{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ge("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};g([S({type:Date})],lh.prototype,"created",void 0),g([S()],lh.prototype,"id",void 0),g([S()],lh.prototype,"portal",void 0),g([S()],lh.prototype,"title",void 0),g([S({readOnly:!0})],lh.prototype,"url",null),g([S()],lh.prototype,"username",void 0),lh=g([Q("esri.portal.PortalFolder")],lh);const cbe=lh;let Cn=class extends Ve{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new ge("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=er(Dh,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new Dh,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new Dh,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const r=i.contentCategorySetsGroupQuery;if(r){const s=new Dh;return s.disableExtraQuery=!0,s.num=1,s.query=r,this.portal.queryGroups(s,t)}throw new ge("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const r=i.results[0],s=new Dh;return s.num=1,s.query=`typekeywords:"${e}"`,r.queryItems(s,t)}throw new ge("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(r=>{const s=r&&r.categorySchema;return s&&s.length?s:[]}):[])}};g([S()],Cn.prototype,"access",void 0),g([S({type:Date})],Cn.prototype,"created",void 0),g([S()],Cn.prototype,"description",void 0),g([S()],Cn.prototype,"id",void 0),g([S()],Cn.prototype,"isInvitationOnly",void 0),g([S({type:Date})],Cn.prototype,"modified",void 0),g([S()],Cn.prototype,"owner",void 0),g([S()],Cn.prototype,"portal",void 0),g([S()],Cn.prototype,"snippet",void 0),g([S()],Cn.prototype,"sortField",void 0),g([S()],Cn.prototype,"sortOrder",void 0),g([S()],Cn.prototype,"tags",void 0),g([S()],Cn.prototype,"thumbnail",void 0),g([S({readOnly:!0})],Cn.prototype,"thumbnailUrl",null),g([S()],Cn.prototype,"title",void 0),g([S({readOnly:!0})],Cn.prototype,"url",null),Cn=g([Q("esri.portal.PortalGroup")],Cn);const yI=Cn,hbe=Object.freeze(Object.defineProperty({__proto__:null,default:yI},Symbol.toStringTag,{value:"Module"}));var mI;let sr=mI=class extends Ve{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let l=this.userContentUrl;return r&&(l+="/"+(typeof r=="string"?r:r.id)),this.portal._request(l+"/addItem",s).then(d=>(t.id=d.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const s=cbe.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=yI.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),Le(()=>Promise.resolve().then(()=>LX),void 0,import.meta.url).then(({default:r})=>{t=r;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:s})}).then(r=>{let s;return r&&r.items?(s=r.items.map(l=>{const d=t.fromJSON(l);return d.portal=this.portal,d}),Promise.all(s.map(l=>l.load())).catch(l=>l).then(()=>({items:s,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new yI({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new ge("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new ge("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new mI;return t.sourceJSON=e,t.read(e),t}};g([S()],sr.prototype,"access",void 0),g([S({type:Date})],sr.prototype,"created",void 0),g([S()],sr.prototype,"culture",void 0),g([S()],sr.prototype,"description",void 0),g([S()],sr.prototype,"email",void 0),g([S()],sr.prototype,"favGroupId",void 0),g([S()],sr.prototype,"fullName",void 0),g([S({type:Date})],sr.prototype,"modified",void 0),g([S()],sr.prototype,"orgId",void 0),g([S()],sr.prototype,"portal",void 0),g([S()],sr.prototype,"preferredView",void 0),g([S()],sr.prototype,"privileges",void 0),g([S()],sr.prototype,"region",void 0),g([S()],sr.prototype,"role",void 0),g([S()],sr.prototype,"roleId",void 0),g([S()],sr.prototype,"sourceJSON",void 0),g([S()],sr.prototype,"thumbnail",void 0),g([S({readOnly:!0})],sr.prototype,"thumbnailUrl",null),g([S()],sr.prototype,"units",void 0),g([S({readOnly:!0})],sr.prototype,"userContentUrl",null),g([S({readOnly:!0})],sr.prototype,"url",null),g([S()],sr.prototype,"username",void 0),g([S()],sr.prototype,"userType",void 0),sr=mI=g([Q("esri.portal.PortalUser")],sr);const lP=sr,pbe=Object.freeze(Object.defineProperty({__proto__:null,default:lP},Symbol.toStringTag,{value:"Module"}));var da;let J7;const MV={PortalGroup:()=>Le(()=>Promise.resolve().then(()=>hbe),void 0,import.meta.url),PortalItem:()=>Le(()=>Promise.resolve().then(()=>LX),void 0,import.meta.url),PortalUser:()=>Le(()=>Promise.resolve().then(()=>pbe),void 0,import.meta.url)};let rt=da=class extends P3(za){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=hi.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)hi.request.trustedServers.includes(t)||hi.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=lP.fromJSON(e),t.portal=this),t}load(e){const t=Le(()=>Promise.resolve().then(()=>Abe),void 0,import.meta.url).then(({default:i})=>{ur(e),J7=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(vr){const r=vr;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==da.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await Le(()=>import("./ElevationLayer.4101d8de.js"),["ElevationLayer.4101d8de.js","ArcGISCachedService.ea105920.js","TilemapCache.00d4084c.js"],import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new Dh;return i.query=e||(hi.apiKey&&MX(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,t)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(l=>l.type==="Web Map").map(l=>new J7({portalItem:l})):[],s})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Du(e)?Promise.reject(Cr()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Dh;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return Du(e)?Promise.reject(Cr()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Pa();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Pa();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return da._default&&!da._default.destroyed||(da._default=new da),da._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new ge("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new da({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new ge("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new ge("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Pa().toLowerCase()},...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(r,s)}_queryPortal(e,t,i,r){const s=er(Dh,t),l=d=>this._request(this.restUrl+e,{...s.toRequestOptions(this),...r}).then(y=>{const v=s.clone();return v.start=y.nextStart,new ube({nextQueryParams:v,queryParams:s,total:y.total,results:da._resultsToTypedArray(d,{portal:this},y,r)})}).then(y=>Promise.all(y.results.map(v=>typeof v.when=="function"?v.when():y)).then(()=>y,v=>(O3(v),y)));return i&&MV[i]?MV[i]().then(({default:d})=>(ur(r),l(d))):l()}_signIn(){if(this.authMode===da.AUTH_MODE_ANONYMOUS)return Promise.reject(new ge("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return vr?vr.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const s=da._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(l=>typeof l.when=="function"?l.when():r)).then(()=>s,()=>s)})}_readBasemap(e){if(e){const t=J7.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===da.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:l=!1,method:d="auto",responseType:y="json",signal:v}=t,_={authMode:r,body:s,cacheBust:l,method:d,query:i,responseType:y,timeout:0,signal:v};return Bi(this._normalizeSSL(e),_).then(M=>M.data)}static _resultsToTypedArray(e,t,i,r){let s;if(i){const l=K(r)?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(d=>{const y=Object.assign(e?e.fromJSON(d):d,t);return typeof y.load=="function"&&y.load(l),y}))}else s=[];return s}};rt.AUTH_MODE_ANONYMOUS="anonymous",rt.AUTH_MODE_AUTO="auto",rt.AUTH_MODE_IMMEDIATE="immediate",g([S()],rt.prototype,"access",void 0),g([S()],rt.prototype,"allSSL",void 0),g([S()],rt.prototype,"authMode",void 0),g([S()],rt.prototype,"authorizedCrossOriginDomains",void 0),g([nt("authorizedCrossOriginDomains")],rt.prototype,"readAuthorizedCrossOriginDomains",null),g([S()],rt.prototype,"basemapGalleryGroupQuery",void 0),g([S()],rt.prototype,"bingKey",void 0),g([S()],rt.prototype,"canListApps",void 0),g([S()],rt.prototype,"canListData",void 0),g([S()],rt.prototype,"canListPreProvisionedItems",void 0),g([S()],rt.prototype,"canProvisionDirectPurchase",void 0),g([S()],rt.prototype,"canSearchPublic",void 0),g([S()],rt.prototype,"canShareBingPublic",void 0),g([S()],rt.prototype,"canSharePublic",void 0),g([S()],rt.prototype,"canSignInArcGIS",void 0),g([S()],rt.prototype,"canSignInIDP",void 0),g([S()],rt.prototype,"colorSetsGroupQuery",void 0),g([S()],rt.prototype,"commentsEnabled",void 0),g([S({type:Date})],rt.prototype,"created",void 0),g([S()],rt.prototype,"credential",void 0),g([S()],rt.prototype,"culture",void 0),g([S()],rt.prototype,"currentVersion",void 0),g([S()],rt.prototype,"customBaseUrl",void 0),g([S()],rt.prototype,"defaultBasemap",void 0),g([nt("defaultBasemap")],rt.prototype,"readDefaultBasemap",null),g([S()],rt.prototype,"defaultDevBasemap",void 0),g([nt("defaultDevBasemap")],rt.prototype,"readDefaultDevBasemap",null),g([S({type:yi})],rt.prototype,"defaultExtent",void 0),g([S()],rt.prototype,"defaultVectorBasemap",void 0),g([nt("defaultVectorBasemap")],rt.prototype,"readDefaultVectorBasemap",null),g([S()],rt.prototype,"description",void 0),g([S()],rt.prototype,"devBasemapGalleryGroupQuery",void 0),g([S()],rt.prototype,"eueiEnabled",void 0),g([S({readOnly:!0})],rt.prototype,"extraQuery",null),g([S()],rt.prototype,"featuredGroups",void 0),g([S()],rt.prototype,"featuredItemsGroupQuery",void 0),g([S()],rt.prototype,"galleryTemplatesGroupQuery",void 0),g([S()],rt.prototype,"livingAtlasGroupQuery",void 0),g([S()],rt.prototype,"hasCategorySchema",void 0),g([S()],rt.prototype,"helpBase",void 0),g([S()],rt.prototype,"helperServices",void 0),g([S()],rt.prototype,"helpMap",void 0),g([S()],rt.prototype,"homePageFeaturedContent",void 0),g([S()],rt.prototype,"homePageFeaturedContentCount",void 0),g([S()],rt.prototype,"httpPort",void 0),g([S()],rt.prototype,"httpsPort",void 0),g([S()],rt.prototype,"id",void 0),g([S()],rt.prototype,"ipCntryCode",void 0),g([S({readOnly:!0})],rt.prototype,"isOrganization",null),g([S()],rt.prototype,"isPortal",void 0),g([S()],rt.prototype,"isReadOnly",void 0),g([S()],rt.prototype,"layerTemplatesGroupQuery",void 0),g([S()],rt.prototype,"maxTokenExpirationMinutes",void 0),g([S({type:Date})],rt.prototype,"modified",void 0),g([S()],rt.prototype,"name",void 0),g([S()],rt.prototype,"portalHostname",void 0),g([S()],rt.prototype,"portalMode",void 0),g([S()],rt.prototype,"portalProperties",void 0),g([S()],rt.prototype,"region",void 0),g([S({readOnly:!0})],rt.prototype,"restUrl",null),g([S()],rt.prototype,"rotatorPanels",void 0),g([S()],rt.prototype,"showHomePageDescription",void 0),g([S()],rt.prototype,"sourceJSON",void 0),g([S()],rt.prototype,"staticImagesUrl",void 0),g([S({json:{name:"2DStylesGroupQuery"}})],rt.prototype,"stylesGroupQuery2d",void 0),g([S({json:{name:"stylesGroupQuery"}})],rt.prototype,"stylesGroupQuery3d",void 0),g([S()],rt.prototype,"supportsHostedServices",void 0),g([S()],rt.prototype,"symbolSetsGroupQuery",void 0),g([S()],rt.prototype,"templatesGroupQuery",void 0),g([S()],rt.prototype,"thumbnail",void 0),g([S({readOnly:!0})],rt.prototype,"thumbnailUrl",null),g([S()],rt.prototype,"units",void 0),g([S()],rt.prototype,"url",void 0),g([S()],rt.prototype,"urlKey",void 0),g([nt("urlKey")],rt.prototype,"readUrlKey",null),g([S()],rt.prototype,"user",void 0),g([nt("user")],rt.prototype,"readUser",null),g([S()],rt.prototype,"useStandardizedQuery",void 0),g([S()],rt.prototype,"useVectorBasemaps",void 0),g([S()],rt.prototype,"vectorBasemapGalleryGroupQuery",void 0),rt=da=g([Q("esri.portal.Portal")],rt);const Bn=rt,dbe=Ke.getLogger("esri.assets");function li(e){if(!hi.assetsPath)throw dbe.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ge("assets:path-not-set","config.assetsPath is not set");return I1(hi.assetsPath,e)}const fbe=Ke.getLogger("esri.portal.PortalItemResource");let Wp=class extends st{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){K(e)&&Oa(e)?fbe.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(ce(i))throw new ge("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:LL(t,"signal")})}async update(e,t){return(await Le(()=>import("./resourceUtils.f3fa96d1.js"),[],import.meta.url)).addOrUpdateResource(this,"update",e,t)}hasPath(){return K(this.path)}_normalizePath(e,t){return ce(e)?e:(e=e.replace(/^\/+/,""),K(t)&&Oa(e)&&(e=QL(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};g([S()],Wp.prototype,"portalItem",void 0),g([S({type:String,value:null})],Wp.prototype,"path",null),g([oi("path")],Wp.prototype,"_castPath",null),g([S({type:String,readOnly:!0})],Wp.prototype,"url",null),g([S({type:String,readOnly:!0})],Wp.prototype,"itemRelativeUrl",null),Wp=g([Q("esri.portal.PortalItemResource")],Wp);const ybe=Wp;let Bw=class extends st{constructor(e){super(e),this.created=null,this.rating=null}};g([S()],Bw.prototype,"created",void 0),g([S()],Bw.prototype,"rating",void 0),Bw=g([Q("esri.portal.PortalRating")],Bw);const K7=Bw;var Ny;let Wt=Ny=class extends P3(za){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return BL(Ny,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new yi(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,l=!1,d=!1,y=!1,v=!1,_=!1,M=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(l=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(d=t.includes("Table"),y=t.includes("Route Layer"),v=t.includes("Markup"),_=t.includes("Spatiotemporal"),M=t.includes("UtilityNetwork"),s=_&&d?"spatiotemporaltable":d?"table":y?"routelayer":v?"markup":_?"spatiotemporal":l?"featureshosted":M?"utilitynetwork":"features"):s=e==="map service"||e==="wms"||e==="wmts"?l||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):s=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",s?li(i+s+r+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=Bn.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:K(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof K7&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new K7({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Me(this.applicationProxies),avgRating:this.avgRating,categories:Me(this.categories),created:Me(this.created),culture:this.culture,description:this.description,extent:Me(this.extent),groupCategories:Me(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Me(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Me(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:Me(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Me(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new Ny({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new K7(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Ny)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ge("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")U1(t)?r.query={data:t}:r.query={url:Mu(t)},K(i)&&(r.query.filename=i);else{const s=new FormData;K(i)?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ge("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await Le(()=>import("./resourceUtils.f3fa96d1.js"),[],import.meta.url)).fetchResources(this,e,t)}async addResource(e,t,i){const r=await Le(()=>import("./resourceUtils.f3fa96d1.js"),[],import.meta.url);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await Le(()=>import("./resourceUtils.f3fa96d1.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new ge("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await Le(()=>import("./resourceUtils.f3fa96d1.js"),[],import.meta.url)).removeAllResources(this,e)}resourceFromPath(e){return new ybe({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:Me(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:Me(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Me(this.typeKeywords),url:this.url};return aY(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ny({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};g([S({type:["private","shared","org","public"]})],Wt.prototype,"access",void 0),g([S()],Wt.prototype,"accessInformation",void 0),g([S({type:String})],Wt.prototype,"apiKey",void 0),g([S({json:{read:{source:"appProxies"}}})],Wt.prototype,"applicationProxies",void 0),g([S()],Wt.prototype,"avgRating",void 0),g([S()],Wt.prototype,"categories",void 0),g([S({type:Date})],Wt.prototype,"created",void 0),g([S()],Wt.prototype,"culture",void 0),g([S()],Wt.prototype,"description",void 0),g([S({readOnly:!0})],Wt.prototype,"displayName",null),g([S({type:yi})],Wt.prototype,"extent",void 0),g([nt("extent")],Wt.prototype,"readExtent",null),g([S()],Wt.prototype,"groupCategories",void 0),g([S({readOnly:!0})],Wt.prototype,"iconUrl",null),g([S()],Wt.prototype,"id",void 0),g([S({readOnly:!0})],Wt.prototype,"isLayer",null),g([S()],Wt.prototype,"itemControl",void 0),g([S({readOnly:!0})],Wt.prototype,"itemUrl",null),g([S()],Wt.prototype,"licenseInfo",void 0),g([S({type:Date})],Wt.prototype,"modified",void 0),g([S()],Wt.prototype,"name",void 0),g([S()],Wt.prototype,"numComments",void 0),g([S()],Wt.prototype,"numRatings",void 0),g([S()],Wt.prototype,"numViews",void 0),g([S()],Wt.prototype,"owner",void 0),g([S()],Wt.prototype,"ownerFolder",void 0),g([S({type:Bn})],Wt.prototype,"portal",void 0),g([S()],Wt.prototype,"screenshots",void 0),g([S()],Wt.prototype,"size",void 0),g([S()],Wt.prototype,"snippet",void 0),g([S()],Wt.prototype,"sourceJSON",void 0),g([S({type:String})],Wt.prototype,"spatialReference",void 0),g([S()],Wt.prototype,"tags",void 0),g([S()],Wt.prototype,"thumbnail",void 0),g([S({readOnly:!0})],Wt.prototype,"thumbnailUrl",null),g([S()],Wt.prototype,"title",void 0),g([S()],Wt.prototype,"type",void 0),g([S()],Wt.prototype,"typeKeywords",void 0),g([S({type:String,json:{read(e,t){var r;if(t.type!=="KML")return e;const i=(r=this.portal)==null?void 0:r.restUrl;return e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null),e}}})],Wt.prototype,"url",void 0),g([S({readOnly:!0})],Wt.prototype,"userItemUrl",null),Wt=Ny=g([Q("esri.portal.PortalItem")],Wt);const nS=Wt,LX=Object.freeze(Object.defineProperty({__proto__:null,default:nS},Symbol.toStringTag,{value:"Module"})),EV=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,mbe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function TV(e){var t;return(t=mbe[e])!=null?t:!1}const Gw=[],cg=new Map;function IV(e){for(const t of cg.keys())PX(e.pattern,t)&&cg.delete(t)}function gbe(e){return Gw.includes(e)||(IV(e),Gw.unshift(e)),{remove(){const t=Gw.indexOf(e);t>-1&&(Gw.splice(t,1),IV(e))}}}async function Hb(e){const t=Pa();cg.has(e)||cg.set(e,wbe(e,t));const i=cg.get(e);return await bbe.add(i),i}function vbe(e){if(!EV.test(e))return null;const[,t,i]=EV.exec(e),r=t+(i?"-"+i.toUpperCase():"");return TV(r)?r:TV(t)?t:null}async function wbe(e,t){const i=[];for(const r of Gw)if(PX(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new ge("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new ge("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function PX(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}aP(()=>{cg.clear()});const bbe=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=sp())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function _be(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await Hb("esri/t9n/basemaps");return i[e]||i[t]}const gI={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return li("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return li("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return li("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return li("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return li("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return li("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return li("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return li("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return li("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return li("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return li("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return li("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return li("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return li("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return li("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return li("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function CV(e){const t=e==null?void 0:e.type;return t==="imagery-tile"||t==="tile"||t==="open-street-map"||t==="vector-tile"||t==="web-tile"||t==="wmts"}function xbe(e){const t=e==null?void 0:e.type;return t==="base-tile"||t==="tile"||t==="elevation"||t==="imagery-tile"||t==="base-elevation"||t==="open-street-map"||t==="wcs"||t==="web-tile"||t==="wmts"||t==="vector-tile"}function uP(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function bWe(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}function Sbe(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const i=e.activeLayer.tileMatrixSets;if(i)return i}return null}const $be=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Mbe=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Ebe(e){return e.layerContainerType==="basemap"?$be:e.layerContainerType==="operational-layers"?Mbe:null}function Tbe(e,t){if(t.restrictedWebMapWriting){const i=Ebe(t);return!K(i)||i.has(e.type)&&!uP(e)}return!0}function Ibe(e,t){if(uP(e)){const i=uv("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&Z7(e,r)}else e.type==="stream"?Z7(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&Z7(e,t)}function Z7(e,t){"maxScale"in e&&(t.maxScale=Q4(e.maxScale)),"minScale"in e&&(t.minScale=Q4(e.minScale))}function Cbe(e,t){if(Ibe(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=Q4(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(uP(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function kV(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new ge("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Tbe(e,i)){const r={};return e.write(r,i)?r:null}return K(t)&&Cbe(e,t=Me(t)),t}var Q5;let kbe=0;const Y7=Ke.getLogger("esri.Basemap");let nl=Q5=class extends P3(za){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+kbe++,this.baseLayers=new vt,this.referenceLayers=new vt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Y7.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Y7.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",T1(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const l=kV(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);K(l)&&r.push(l)}),this.referenceLayers.forEach(s=>{const l=kV(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);K(l)&&(l.isReference=!0,r.push(l))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",T1(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return uX(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Q5({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=Me(i);return r.url&&Lc(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&Lc(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;ur(e);const r=[];if(t){const s=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const l=t.data.id;r.push(_be(l).then(d=>{d&&this.read({title:d},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,l=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:d}=await Le(()=>import("./layersCreator.b08606c9.js"),["layersCreator.b08606c9.js","lazyLayerLoader.e3c4b311.js","portalLayers.89d52ed1.js","layersLoader.1a12577c.js","jsonContext.42efcaec.js","portalItemUtils.6aff0acf.js"],import.meta.url),y=[];if(ur(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const v={context:{origin:l,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},_=d(this.baseLayers,e.baseMapLayers.filter(k=>!k.isReference),v);y.push(_);const M=d(this.referenceLayers,e.baseMapLayers.filter(k=>k.isReference),v);y.push(M)}await Qr(y)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),s=en(e.itemUrl);return this._set("resourceInfo",{data:r.baseMap,context:{origin:"web-map",portal:e.portal||Bn.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Bn.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=gI[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),TY(Y7,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Q5.fromJSON(t)}return null}};g([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:vt}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],nl.prototype,"baseLayers",null),g([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],nl.prototype,"id",void 0),g([S({type:nS})],nl.prototype,"portalItem",void 0),g([S()],nl.prototype,"referenceLayers",null),g([S({readOnly:!0})],nl.prototype,"resourceInfo",void 0),g([S({type:Ct})],nl.prototype,"spatialReference",void 0),g([S()],nl.prototype,"thumbnailUrl",void 0),g([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],nl.prototype,"title",void 0),g([pt("title")],nl.prototype,"writeTitle",null),nl=Q5=g([Q("esri.Basemap")],nl);const Tc=nl,Abe=Object.freeze(Object.defineProperty({__proto__:null,default:Tc},Symbol.toStringTag,{value:"Module"})),sS={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function RX(e){return sS[e]||sS[e.toLowerCase()]}function cP(e){var t;return(t=sS[e])!=null?t:sS[e.toLowerCase()]}function Obe(e){return[...cP(e)]}function X7(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function NX(e,t,i,r=1){const s=(e%360+360)%360/360,l=i<=.5?i*(t+1):i+t-i*t,d=2*i-l;return[Math.round(255*X7(d,l,s+1/3)),Math.round(255*X7(d,l,s)),Math.round(255*X7(d,l,s-1/3)),r]}function Lbe(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,l=t?e.length===9:e.length===5;let d=Number("0x"+e.substr(1));if(isNaN(d))return null;const y=[0,0,0,1];let v;return l&&(v=d&r,d>>=i,y[3]=s*v/255),v=d&r,d>>=i,y[2]=s*v,v=d&r,d>>=i,y[1]=s*v,v=d&r,d>>=i,y[0]=s*v,y}function wt(){return[0,0,0]}function Wb(e){return[e[0],e[1],e[2]]}function Qn(e,t,i){return[e,t,i]}function FX(e){const t=wt(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function DX(e,t){return new Float64Array(e,t,3)}function jX(){return wt()}function zX(){return Qn(1,1,1)}function VX(){return Qn(1,0,0)}function UX(){return Qn(0,1,0)}function BX(){return Qn(0,0,1)}const Pbe=jX(),GX=zX(),Rbe=VX(),Nbe=UX(),Fbe=BX();Object.freeze(Object.defineProperty({__proto__:null,create:wt,clone:Wb,fromValues:Qn,fromArray:FX,createView:DX,zeros:jX,ones:zX,unitX:VX,unitY:UX,unitZ:BX,ZEROS:Pbe,ONES:GX,UNIT_X:Rbe,UNIT_Y:Nbe,UNIT_Z:Fbe},Symbol.toStringTag,{value:"Module"}));const Ot=1e-6,Tu=Math.random,Dbe=Math.PI/180,jbe=180/Math.PI;function hP(e){return e*Dbe}function zbe(e){return e*jbe}function Vbe(e,t){return Math.abs(e-t)<=Ot*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:Ot,RANDOM:Tu,toRadian:hP,toDegree:zbe,equals:Vbe},Symbol.toStringTag,{value:"Module"}));function Pl(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function xl(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ju(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function Ia(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function ts(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function qX(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function HX(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function Ube(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Bbe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Gbe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function qbe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function Hbe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function Wbe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function Jbe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Nl(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Kbe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function Jh(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function pP(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function G6(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function vI(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Zbe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Sl(e,t){const i=t[0],r=t[1],s=t[2];let l=i*i+r*r+s*s;return l>0&&(l=1/Math.sqrt(l),e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l),e}function Ds(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ra(e,t,i){const r=t[0],s=t[1],l=t[2],d=i[0],y=i[1],v=i[2];return e[0]=s*v-l*y,e[1]=l*d-r*v,e[2]=r*y-s*d,e}function WX(e,t,i,r){const s=t[0],l=t[1],d=t[2];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e[2]=d+r*(i[2]-d),e}function Ybe(e,t,i,r,s,l){const d=l*l,y=d*(2*l-3)+1,v=d*(l-2)+l,_=d*(l-1),M=d*(3-2*l);return e[0]=t[0]*y+i[0]*v+r[0]*_+s[0]*M,e[1]=t[1]*y+i[1]*v+r[1]*_+s[1]*M,e[2]=t[2]*y+i[2]*v+r[2]*_+s[2]*M,e}function Xbe(e,t,i,r,s,l){const d=1-l,y=d*d,v=l*l,_=y*d,M=3*l*y,k=3*v*d,O=v*l;return e[0]=t[0]*_+i[0]*M+r[0]*k+s[0]*O,e[1]=t[1]*_+i[1]*M+r[1]*k+s[1]*O,e[2]=t[2]*_+i[2]*M+r[2]*k+s[2]*O,e}function Qbe(e,t){t=t||1;const i=2*Tu()*Math.PI,r=2*Tu()-1,s=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=r*t,e}function JX(e,t,i){const r=t[0],s=t[1],l=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*l+i[12],e[1]=i[1]*r+i[5]*s+i[9]*l+i[13],e[2]=i[2]*r+i[6]*s+i[10]*l+i[14],e}function e3e(e,t,i){const r=t[0],s=t[1],l=t[2];return e[0]=r*i[0]+s*i[3]+l*i[6],e[1]=r*i[1]+s*i[4]+l*i[7],e[2]=r*i[2]+s*i[5]+l*i[8],e}function wI(e,t,i){const r=i[0],s=i[1],l=i[2],d=i[3],y=t[0],v=t[1],_=t[2];let M=s*_-l*v,k=l*y-r*_,O=r*v-s*y,R=s*O-l*k,D=l*M-r*O,z=r*k-s*M;const B=2*d;return M*=B,k*=B,O*=B,R*=2,D*=2,z*=2,e[0]=y+M+R,e[1]=v+k+D,e[2]=_+O+z,e}function t3e(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[0],l[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),l[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function i3e(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),l[1]=s[1],l[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function r3e(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),l[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),l[2]=s[2],e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function n3e(e,t){xl($x,e),xl(Mx,t),Sl($x,$x),Sl(Mx,Mx);const i=Ds($x,Mx);return i>1?0:i<-1?Math.PI:Math.acos(i)}const $x=wt(),Mx=wt();function s3e(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function e9(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function bI(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],l=t[0],d=t[1],y=t[2];return Math.abs(i-l)<=Ot*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-d)<=Ot*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-y)<=Ot*Math.max(1,Math.abs(s),Math.abs(y))}function _I(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],l=i[2]-t[2];let d=r*r+s*s+l*l;return d>0?(d=1/Math.sqrt(d),e[0]=r*d,e[1]=s*d,e[2]=l*d,e):(e[0]=0,e[1]=0,e[2]=0,e)}const o3e=ts,a3e=qX,l3e=HX,u3e=Jh,c3e=pP,KX=Pl,h3e=G6;Object.freeze(Object.defineProperty({__proto__:null,length:Pl,copy:xl,set:ju,add:Ia,subtract:ts,multiply:qX,divide:HX,ceil:Ube,floor:Bbe,abs:Gbe,sign:qbe,min:Hbe,max:Wbe,round:Jbe,scale:Nl,scaleAndAdd:Kbe,distance:Jh,squaredDistance:pP,squaredLength:G6,negate:vI,inverse:Zbe,normalize:Sl,dot:Ds,cross:Ra,lerp:WX,hermite:Ybe,bezier:Xbe,random:Qbe,transformMat4:JX,transformMat3:e3e,transformQuat:wI,rotateX:t3e,rotateY:i3e,rotateZ:r3e,angle:n3e,str:s3e,exactEquals:e9,equals:bI,direction:_I,sub:o3e,mul:a3e,div:l3e,dist:u3e,sqrDist:c3e,len:KX,sqrLen:h3e},Symbol.toStringTag,{value:"Module"}));function q6(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ZX(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function YX(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function XX(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function QX(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function eQ(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function p3e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function d3e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function f3e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function y3e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function m3e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function tQ(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function g3e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function iQ(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],l=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+l*l)}function rQ(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],l=t[3]-e[3];return i*i+r*r+s*s+l*l}function dP(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function fP(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function v3e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function w3e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function nQ(e,t){const i=t[0],r=t[1],s=t[2],l=t[3];let d=i*i+r*r+s*s+l*l;return d>0&&(d=1/Math.sqrt(d),e[0]=i*d,e[1]=r*d,e[2]=s*d,e[3]=l*d),e}function sQ(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function H6(e,t,i,r){const s=t[0],l=t[1],d=t[2],y=t[3];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e[2]=d+r*(i[2]-d),e[3]=y+r*(i[3]-y),e}function b3e(e,t){let i,r,s,l,d,y;t=t||1;do i=2*Tu()-1,r=2*Tu()-1,d=i*i+r*r;while(d>=1);do s=2*Tu()-1,l=2*Tu()-1,y=s*s+l*l;while(y>=1);const v=Math.sqrt((1-d)/y);return e[0]=t*i,e[1]=t*r,e[2]=t*s*v,e[3]=t*l*v,e}function _3e(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*l+i[12]*d,e[1]=i[1]*r+i[5]*s+i[9]*l+i[13]*d,e[2]=i[2]*r+i[6]*s+i[10]*l+i[14]*d,e[3]=i[3]*r+i[7]*s+i[11]*l+i[15]*d,e}function x3e(e,t,i){const r=t[0],s=t[1],l=t[2],d=i[0],y=i[1],v=i[2],_=i[3],M=_*r+y*l-v*s,k=_*s+v*r-d*l,O=_*l+d*s-y*r,R=-d*r-y*s-v*l;return e[0]=M*_+R*-d+k*-v-O*-y,e[1]=k*_+R*-y+O*-d-M*-v,e[2]=O*_+R*-v+M*-y-k*-d,e[3]=t[3],e}function S3e(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function oQ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function aQ(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],d=t[0],y=t[1],v=t[2],_=t[3];return Math.abs(i-d)<=Ot*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-y)<=Ot*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(s-v)<=Ot*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-_)<=Ot*Math.max(1,Math.abs(l),Math.abs(_))}const $3e=XX,M3e=QX,E3e=eQ,T3e=iQ,I3e=rQ,C3e=dP,k3e=fP;Object.freeze(Object.defineProperty({__proto__:null,copy:q6,set:ZX,add:YX,subtract:XX,multiply:QX,divide:eQ,ceil:p3e,floor:d3e,min:f3e,max:y3e,round:m3e,scale:tQ,scaleAndAdd:g3e,distance:iQ,squaredDistance:rQ,length:dP,squaredLength:fP,negate:v3e,inverse:w3e,normalize:nQ,dot:sQ,lerp:H6,random:b3e,transformMat4:_3e,transformQuat:x3e,str:S3e,exactEquals:oQ,equals:aQ,sub:$3e,mul:M3e,div:E3e,dist:T3e,sqrDist:I3e,len:C3e,sqrLen:k3e},Symbol.toStringTag,{value:"Module"}));const AV=new Float32Array(1);function _We(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Bs(e,t,i){return Math.min(Math.max(e,t),i)}function xWe(e){return(e&e-1)==0}function SWe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function $We(e,t,i){return e+(t-e)*i}function zm(e){return e*Math.PI/180}function lQ(e){return 180*e/Math.PI}function uQ(e){return Math.acos(Bs(e,-1,1))}function cQ(e){return Math.asin(Bs(e,-1,1))}function A3e(e,t,i=1e-6){if(isNaN(e)||isNaN(t))return!1;if(e===t)return!0;const r=Math.abs(e-t),s=Math.abs(e),l=Math.abs(t);if(e===0||t===0||s<1e-12&&l<1e-12){if(r>.01*i)return!1}else if(r/(s+l)>i)return!1;return!0}function hg(e,t,i=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=i}function O3e(e){return hQ(Math.max(-xI,Math.min(e,xI)))}function hQ(e){return AV[0]=e,AV[0]}function OV(e,t){const i=Pl(e),r=cQ(e[2]/i),s=Math.atan2(e[1]/i,e[0]/i);return ju(t,i,r,s),t}function MWe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(hg(t,1)&&hg(i,1)&&hg(r,1))}const xI=hQ(34028234663852886e22);function Ex(e){return Bs(UL(e),0,255)}function Tx(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class ln{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,s=new ln){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),l=r[1];if(l==="rgb"&&s.length===3||l==="rgba"&&s.length===4){const d=s[0];if(d.charAt(d.length-1)==="%"){const y=s.map(v=>2.56*parseFloat(v));return s.length===4&&(y[3]=parseFloat(s[3])),ln.fromArray(y,i)}return ln.fromArray(s.map(y=>parseFloat(y)),i)}if(l==="hsl"&&s.length===3||l==="hsla"&&s.length===4)return ln.fromArray(NX(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new ln){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,s=(1<<r)-1;let l=Number("0x"+t.substr(1));return isNaN(l)?null:(["b","g","r"].forEach(d=>{const y=l&s;l>>=r,i[d]=r===4?17*y:y}),i.a=1,i)}static fromArray(t,i=new ln){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=RX(t)?cP(t):null;return r&&ln.fromArray(r,i)||ln.fromRgb(t,i)||ln.fromHex(t,i)}static fromJSON(t){return t&&new ln([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return K(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return K(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,s,l;return typeof t=="string"?ln.fromString(t,this):Array.isArray(t)?ln.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(s=t.b)!=null?s:0,(l=t.a)!=null?l:1),t instanceof ln||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=ln.AlphaMode.ALWAYS){const i=Ex(this.r),r=Ex(this.g),s=Ex(this.b);return t===ln.AlphaMode.ALWAYS||this.a!==1?[i,r,s,Ex(255*this.a)]:[i,r,s]}clone(){return new ln(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return K(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Tx(this.r,0,255)),this.g=Math.round(Tx(this.g,0,255)),this.b=Math.round(Tx(this.b,0,255)),this.a=Tx(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}}ln.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(ln||(ln={}));const ot=ln;function EWe(e){}function L3e(e){return()=>e}function Mt(e,t={}){var s;const i=e instanceof Dt?e:new Dt(e,t),r={type:(s=t==null?void 0:t.ignoreUnknown)==null||s?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),S(r)}var SI;let t9=SI=class extends Ve{constructor(e){super(e),this.type="none"}clone(){return new SI({type:this.type})}};g([Mt({none:"none",stayAbove:"stay-above"})],t9.prototype,"type",void 0),t9=SI=g([Q("esri.ground.NavigationConstraint")],t9);function W6(e){const t=UL(100*(1-e));return Math.max(0,Math.min(t,100))}function Jb(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var $I;const LV=Ke.getLogger("esri.Ground");let uh=$I=class extends P3(za){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new vt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&LV.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{LV.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",T1(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(l=>{if("write"in l){const d={};L3e(l)().write(d,r)&&s.push(d)}else r&&r.messages&&r.messages.push(new ge("layer:unsupported",`Layers (${l.title}, ${l.id}) of type '${l.declaredClass}' cannot be persisted in the ground`,{layer:l}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return uX(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await Le(()=>import("./ElevationQuery.950eb067.js"),[],import.meta.url);ur(t);const r=new i,s=this.layers.filter(PV).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await Le(()=>import("./ElevationQuery.950eb067.js"),[],import.meta.url);ur(t);const r=new i,s=this.layers.filter(PV).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Me(this.surfaceColor),navigationConstraint:Me(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new $I({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",s=t&&t.portal||null,l=t&&t.url||null;return Le(()=>import("./layersCreator.b08606c9.js"),["layersCreator.b08606c9.js","lazyLayerLoader.e3c4b311.js","portalLayers.89d52ed1.js","layersLoader.1a12577c.js","jsonContext.42efcaec.js","portalItemUtils.6aff0acf.js"],import.meta.url).then(({populateOperationalLayers:d})=>{ur(i);const y=[];if(e.layers&&Array.isArray(e.layers)){const v={context:{origin:r,url:l,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};y.push(d(this.layers,e.layers,v))}return Qr(y)}).then(()=>{})}};function P3e(e){return e&&"createElevationSampler"in e}function PV(e){return e.type==="elevation"||P3e(e)}g([S({json:{read:!1}})],uh.prototype,"layers",null),g([pt("layers")],uh.prototype,"writeLayers",null),g([S({readOnly:!0})],uh.prototype,"resourceInfo",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Yi,read:{reader:Jb,source:"transparency"},write:{writer:(e,t)=>{t.transparency=W6(e)},target:"transparency"}}})],uh.prototype,"opacity",void 0),g([S({type:ot,json:{type:[Yi],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],uh.prototype,"surfaceColor",void 0),g([S({type:t9,json:{write:!0}})],uh.prototype,"navigationConstraint",void 0),uh=$I=g([Q("esri.Ground")],uh);const oS=uh;let i9=class extends st{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!vt.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||vt.isCollection(e)?e.forEach(r=>this._isHandle(r)&&i.push(r)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||vt.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};g([S({readOnly:!0})],i9.prototype,"size",null),i9=g([Q("esri.core.Handles")],i9);const ir=i9;function Pe(e,t,i={}){return yP(e,t,i,pQ)}function gs(e,t,i={}){return yP(e,t,i,dQ)}function yP(e,t,i={},r){let s=null;const l=i.once?(d,y)=>{r(d)&&(po(s),t(d,y))}:(d,y)=>{r(d)&&t(d,y)};if(s=Dve(e,l,i.sync,i.equals),i.initial){const d=e();l(d,d)}return s}function Ko(e,t,i,r={}){let s=null,l=null,d=null;function y(){var M;s&&l&&(l.remove(),(M=r.onListenerRemove)==null||M.call(r,s),s=null,l=null)}function v(M){r.once&&r.once&&po(d),i(M)}const _=Pe(e,(M,k)=>{var O;y(),A6(M)&&(s=M,l=O6(M,t,v),(O=r.onListenerAdd)==null||O.call(r,M))},{sync:r.sync,initial:!0});return d=V1(()=>{_.remove(),y()}),d}function mv(e,t){return R3e(e,dQ,t)}function R3e(e,t,i){if(Du(i))return Promise.reject(Cr());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let s=null;function l(){s=po(s)}return new Promise((d,y)=>{s=I3([Ll(i,()=>{l(),y(Cr())}),yP(e,v=>{l(),d(v)},{sync:!1,once:!0},t!=null?t:pQ)])})}function pQ(e){return!0}function dQ(e){return!!e}function N3e(e,t,i={}){let r=!1;const s=Pe(e,(l,d)=>{r||t(l,d)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const L1={sync:!0},Jt={initial:!0},vl={sync:!0,initial:!0};let pg=class extends st{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new ir,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,Pe)}addWhen(e,t,i={}){return this._installWatch(e,t,i,gs)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const s=++this.handleId;return this.handles.add([Ko(e,"after-changes",this._createSyncUpdatingCallback(),L1),Ko(e,"change",t,{onListenerAdd:i?l=>t({added:l.toArray(),removed:[]}):void 0,onListenerRemove:r?l=>t({added:[],removed:l.toArray()}):void 0})],s),{remove:()=>this.handles.remove(s)}}addPromise(e){if(ce(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(Ix)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const s=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,s);const l=r(e,t,i);return this.handles.add(l,s),{remove:()=>this.handles.remove(s)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=Pe(e,i,{sync:!0,equals:()=>!1});return this.handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this.handles.remove(Ix),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(hv(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(Ix))}),Ix)}}};g([S({readOnly:!0})],pg.prototype,"updating",void 0),pg=g([Q("esri.core.support.WatchUpdatingTracking")],pg);const Ix=-42;var RV;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(RV||(RV={}));const Uu=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new ir}get updatingHandles(){return this._get("updatingHandles")||new pg}};return g([S({readOnly:!0})],t.prototype,"handles",null),g([S({readOnly:!0})],t.prototype,"updatingHandles",null),t=g([Q("esri.core.HandleOwner")],t),t};let Ng=class extends Uu(st){};Ng=g([Q("esri.core.HandleOwner")],Ng);let Fy=class extends Uu(vt){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(RY(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=K(this.getCollections)?this.getCollections():null;if(ce(e))return void this.removeAll();let t=0;for(const i of e)K(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new vt(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const l of s)e=this._processCollection(e,l);else e=this._processCollection(e,s)}}return e}};g([S()],Fy.prototype,"getCollections",void 0),g([S()],Fy.prototype,"getChildrenFunction",void 0),g([S()],Fy.prototype,"itemFilterFunction",void 0),Fy=g([Q("esri.core.CollectionFlattener")],Fy);const Fg=Fy;function F3e(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const NV=Ke.getLogger("esri.support.basemapUtils");function D3e(){return{}}function j3e(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function z3e(e,t){let i;if(typeof e=="string"){if(!(e in gI)){const r=Object.entries(gI).filter(([s,l])=>hi.apiKey&&!l.classic||!hi.apiKey&&l.classic&&!l.deprecated).map(([s])=>`"${s}"`).join(", ");return NV.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=Tc.fromId(e),t&&(t[e]=i))}else i=er(Tc,e);return i!=null&&i.destroyed&&(NV.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function V3e(e,t){return e===t?!0:H3e(FV(e),FV(t),{mustMatchReferences:!0})==="equal"}function U3e(e,t){var s,l,d;if(ce(t)||ce(e))return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.getItemAt(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(s=i.tileInfo)==null?void 0:s.spatialReference:i.spatialReference]).filter(Boolean);return e.spatialReference?{spatialReference:(d=(l=r.find(y=>e.spatialReference.equals(y)))!=null?l:r[0])!=null?d:null,updating:!1}:{spatialReference:r[0],updating:!1}}function FV(e){return e?!e.loaded&&e.resourceInfo?G3e(e.resourceInfo.data):{baseLayers:DV(e.baseLayers),referenceLayers:DV(e.referenceLayers)}:null}function DV(e){return(vt.isCollection(e)?e.toArray():e).map(B3e)}function B3e(e){var t,i;return{type:e.type,url:fQ("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||!K(e.sublayers)||(t=e.sublayers)==null?void 0:t.map(r=>({id:r.id,visible:r.visible})),activeLayerId:e.type==="wmts"?(i=e.activeLayer)==null?void 0:i.id:void 0}}function G3e(e){return e?{baseLayers:jV(e.baseMapLayers.filter(t=>!t.isReference)),referenceLayers:jV(e.baseMapLayers.filter(t=>t.isReference))}:null}function jV(e){return e.map(t=>q3e(t))}function q3e(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:fQ(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale!=null?e.minScale:0,maxScale:e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function H3e(e,t,i){return e!=null!=(t!=null)?"not-equal":e?zV(e.baseLayers,t.baseLayers)?zV(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function zV(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!W3e(e[i],t[i]))return!1;return!0}function W3e(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(K(e.activeLayerId)||K(t.activeLayerId))return e.activeLayerId===t.activeLayerId;if(K(e.sublayers)||K(t.sublayers)){if(ce(e.sublayers)||ce(t.sublayers)||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),s=t.sublayers.at(i);if(r.id!==s.id||r.visible!==s.visible)return!1}}return!0}function fQ(e){return e?Il(e).replace(/^\s*https?:/i,"").toLowerCase():""}function J3e(e){return new Fg({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const K3e=Ke.getLogger("esri.support.groundUtils"),VV={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Z3e(e){let t=null;if(typeof e=="string")if(e in VV){const i=VV[e];t=new oS({resourceInfo:{data:{layers:[i]}}})}else K3e.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=er(oS,e);return t}function Dg(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var MI;function UV(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function Y3e(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Jp=MI=class extends Qo{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):Y3e(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new yi,i=this.hasZ,r=this.hasM,s=i?3:2,l=e[0],d=UV(Math.min),y=UV(Math.max);let v,_,M,k,[O,R]=l,[D,z]=l;for(let B=0,V=e.length;B<V;B++){const q=e[B],[J,ne]=q;if(O=d(O,J),R=d(R,ne),D=y(D,J),z=y(z,ne),i&&q.length>2){const re=q[2];v=d(v,re),M=y(M,re)}if(r&&q.length>s){const re=q[s];_=d(_,re),k=y(k,re)}}return t.xmin=O,t.ymin=R,t.xmax=D,t.ymax=z,t.spatialReference=this.spatialReference,i?(t.zmin=v,t.zmax=M):(t.zmin=null,t.zmax=null),r?(t.mmin=_,t.mmax=k):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=Me(this.points)}addPoint(e){return Dg(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:Me(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new MI(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new ut(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new ut(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Dg(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};g([S({readOnly:!0})],Jp.prototype,"cache",null),g([S()],Jp.prototype,"extent",null),g([S({type:[[Number]],json:{write:{isRequired:!0}}})],Jp.prototype,"points",void 0),g([pt("points")],Jp.prototype,"writePoints",null),Jp=MI=g([Q("esri.geometry.Multipoint")],Jp),Jp.prototype.toJSON.isDefaultToJSON=!0;const B1=Jp;function X3e(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice(0);if(e.type==="polyline")return e.paths.slice(0);if(e.type==="multipoint")return e.points.slice(0);if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let s=!1,l=!1;return r.forEach(d=>{d.hasZ&&(s=!0),d.hasM&&(l=!0)}),r.map(d=>{const y=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(s&&d.hasZ){const v=.5*(d.zmax-d.zmin);for(let _=0;_<y.length;_++)y[_].push(v)}if(l&&d.hasM){const v=.5*(d.mmax-d.mmin);for(let _=0;_<y.length;_++)y[_].push(v)}return y})}return null}function Q3e(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function e_e(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function t_e(e,t,i,r){const[s,l]=t,[d,y]=i[r],[v,_]=i[r+1],M=v-d,k=_-y,O=M*M+k*k,R=(s-d)*M+(l-y)*k,D=Math.min(1,Math.max(0,R/O));return e[0]=d+M*D,e[1]=y+k*D,e}function i_e(e,t){return e_e(e,t,.5)}function mP(e,t,i){const r=e.length;let s=0,l=0,d=0;for(let y=0;y<r;y++){const v=e[y],_=e[(y+1)%r];let M=2;s+=v[0]*_[1]-_[0]*v[1],v.length>2&&_.length>2&&i&&(l+=v[0]*_[2]-_[0]*v[2],M=3),v.length>M&&_.length>M&&t&&(d+=v[0]*_[M]-_[0]*v[M])}return s<=0&&l<=0&&d<=0}function TWe(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!mP(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function IWe(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function CWe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function r_e(e){return e?n_e(e.rings,e.hasZ):null}function n_e(e,t){if(!e||!e.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let l=0,d=e.length;l<d;l++){const y=s_e(e[l],t,s);y&&r.push(y)}if(r.sort((l,d)=>{let y=l[2]-d[2];return y===0&&t&&(y=l[4]-d[4]),y}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const l=e[0]&&e[0].length?o_e(e[0],t):null;if(!l)return null;i[0]=l[0],i[1]=l[1],t&&l.length>2&&(i[2]=l[2])}return i}function s_e(e,t,i){let r=0,s=0,l=0,d=0,y=0;const v=e.length?e[0][0]:0,_=e.length?e[0][1]:0,M=e.length&&t?e[0][2]:0;for(let O=0;O<e.length;O++){const R=e[O],D=e[(O+1)%e.length],[z,B,V]=R,q=z-v,J=B-_,ne=t?V-M:void 0,[re,ue,_e]=D,xe=re-v,Ne=ue-_,Ce=t?_e-M:void 0,Ge=q*Ne-xe*J;if(d+=Ge,r+=(q+xe)*Ge,s+=(J+Ne)*Ge,t&&R.length>2&&D.length>2){const Ze=q*Ce-xe*ne;l+=(ne+Ce)*Ze,y+=Ze}z<i[0]&&(i[0]=z),z>i[1]&&(i[1]=z),B<i[2]&&(i[2]=B),B>i[3]&&(i[3]=B),t&&(V<i[4]&&(i[4]=V),V>i[5]&&(i[5]=V))}if(d>0&&(d*=-1),y>0&&(y*=-1),!d)return null;d*=.5,y*=.5;const k=[r/(6*d)+v,s/(6*d)+_,d];return t&&(i[4]===i[5]||y===0?(k[3]=(i[4]+i[5])/2,k[4]=0):(k[3]=l/(6*y)+M,k[4]=y)),k}function o_e(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,l=0,d=0,y=0;for(let v=0,_=e.length;v<_-1;v++){const M=e[v],k=e[v+1];if(M&&k){i[0]=M[0],i[1]=M[1],r[0]=k[0],r[1]=k[1],t&&M.length>2&&k.length>2&&(i[2]=M[2],r[2]=k[2]);const O=Q3e(i,r);if(O){s+=O;const R=i_e(M,k);l+=O*R[0],d+=O*R[1],t&&R.length>2&&(y+=O*R[2])}}}return s>0?t?[l/s,d/s,y/s]:[l/s,d/s]:e.length?e[0]:null}function yQ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function mQ(e){return e.points!==void 0}function gQ(e){return e.x!==void 0&&e.y!==void 0}function vQ(e){return e.paths!==void 0}function wQ(e){return e.rings!==void 0}function bQ(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const zd=bQ(Math.min),Vd=bQ(Math.max);function kWe(e,t){return vQ(t)?jg(e,t.paths,!1,!1):wQ(t)?jg(e,t.rings,!1,!1):mQ(t)?gP(e,t.points,!1,!1,!1,!1):yQ(t)?_Q(e,t):(gQ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function AWe(e,t){return vQ(t)?jg(e,t.paths,!0,!1):wQ(t)?jg(e,t.rings,!0,!1):mQ(t)?gP(e,t.points,!0,!1,!0,!1):yQ(t)?_Q(e,t,!0,!1,!0,!1):(gQ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function jg(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let l,d,y,v,[_,M]=t[0][0],[k,O]=t[0][0];for(let R=0;R<t.length;R++){const D=t[R];for(let z=0;z<D.length;z++){const B=D[z],[V,q]=B;if(_=zd(_,V),M=zd(M,q),k=Vd(k,V),O=Vd(O,q),i&&B.length>2){const J=B[2];l=zd(l,J),d=Vd(d,J)}if(r&&B.length>s){const J=B[s];y=zd(l,J),v=Vd(d,J)}}}return i?r?(e[0]=_,e[1]=M,e[2]=l,e[3]=y,e[4]=k,e[5]=O,e[6]=d,e[7]=v,e.length=8,e):(e[0]=_,e[1]=M,e[2]=l,e[3]=k,e[4]=O,e[5]=d,e.length=6,e):r?(e[0]=_,e[1]=M,e[2]=y,e[3]=k,e[4]=O,e[5]=v,e.length=6,e):(e[0]=_,e[1]=M,e[2]=k,e[3]=O,e.length=4,e)}function _Q(e,t,i,r,s,l){const d=t.xmin,y=t.xmax,v=t.ymin,_=t.ymax;let M=t.zmin,k=t.zmax,O=t.mmin,R=t.mmax;return s?(M=M||0,k=k||0,l?(O=O||0,R=R||0,e[0]=d,e[1]=v,e[2]=M,e[3]=O,e[4]=y,e[5]=_,e[6]=k,e[7]=R,e):(e[0]=d,e[1]=v,e[2]=M,e[3]=y,e[4]=_,e[5]=k,e)):l?(O=O||0,R=R||0,e[0]=d,e[1]=v,e[2]=O,e[3]=y,e[4]=_,e[5]=R,e):(e[0]=d,e[1]=v,e[2]=y,e[3]=_,e)}function gP(e,t,i,r,s,l){const d=i?3:2,y=r&&l,v=i&&s;if(!t.length||!t[0].length)return null;let _,M,k,O,[R,D]=t[0],[z,B]=t[0];for(let V=0;V<t.length;V++){const q=t[V],[J,ne]=q;if(R=zd(R,J),D=zd(D,ne),z=Vd(z,J),B=Vd(B,ne),v&&q.length>2){const re=q[2];_=zd(_,re),M=Vd(M,re)}if(y&&q.length>d){const re=q[d];k=zd(_,re),O=Vd(M,re)}}return s?(_=_||0,M=M||0,l?(k=k||0,O=O||0,e[0]=R,e[1]=D,e[2]=_,e[3]=k,e[4]=z,e[5]=B,e[6]=M,e[7]=O,e):(e[0]=R,e[1]=D,e[2]=_,e[3]=z,e[4]=B,e[5]=M,e)):l?(k=k||0,O=O||0,e[0]=R,e[1]=D,e[2]=k,e[3]=z,e[4]=B,e[5]=O,e):(e[0]=R,e[1]=D,e[2]=z,e[3]=B,e)}function a_e(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function l_e(e){return e.points!==void 0}function u_e(e){return e.x!==void 0&&e.y!==void 0}function c_e(e){return e.paths!==void 0}function h_e(e){return e.rings!==void 0}const vP=[];function xQ(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function SQ(e,t,i,r,s,l){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:l}}function $Q(e,t,i,r,s,l){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:l}}function MQ(e,t,i,r,s,l,d,y){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:l,zmax:d,mmax:y}}function wP(e,t=!1,i=!1){return t?i?MQ(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):SQ(e[0],e[1],e[2],e[3],e[4],e[5]):i?$Q(e[0],e[1],e[2],e[3],e[4],e[5]):xQ(e[0],e[1],e[2],e[3])}function OWe(e){return e?a_e(e)?e:u_e(e)?d_e(e):h_e(e)?EQ(e):c_e(e)?TQ(e):l_e(e)?p_e(e):null:null}function p_e(e){const{hasZ:t,hasM:i,points:r}=e;return wP(gP(vP,r,t,i),t,i)}function d_e(e){const{x:t,y:i,z:r,m:s}=e,l=s!=null;return r!=null?l?MQ(t,i,r,s,t,i,r,s):SQ(t,i,r,t,i,r):l?$Q(t,i,s,t,i,s):xQ(t,i,t,i)}function EQ(e){const{hasZ:t,hasM:i,rings:r}=e,s=jg(vP,r,t,i);return s?wP(s,t,i):null}function TQ(e){const{hasZ:t,hasM:i,paths:r}=e,s=jg(vP,r,t,i);return s?wP(s,t,i):null}var r9;function BV(e){return!Array.isArray(e[0])}let tc=r9=class extends Qo{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,s=!1;for(const d of t)d.hasZ&&(r=!0),d.hasM&&(s=!0);const l={rings:t.map(d=>{const y=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(r&&d.hasZ){const v=d.zmin+.5*(d.zmax-d.zmin);for(let _=0;_<y.length;_++)y[_].push(v)}if(s&&d.hasM){const v=d.mmin+.5*(d.mmax-d.mmin);for(let _=0;_<y.length;_++)y[_].push(v)}return y}),spatialReference:i};return r&&(l.hasZ=!0),s&&(l.hasM=!0),new r9(l)}normalizeCtorArgs(e,t){let i,r,s=null,l=null;return e&&!Array.isArray(e)?(s=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||Ct.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),l=s[0]&&s[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=l.length>3):i===void 0?i=r?l.length>3:l.length>2:r===void 0&&(r=i?l.length>3:l.length>2)),{rings:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=r_e(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new ut;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=EQ(this);if(!t)return null;const i=new yi(t);return i.spatialReference=e,i}get isSelfIntersecting(){return nbe(this.rings)}writeRings(e,t){t.rings=Me(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(BV(e)){const r=[];for(let s=0,l=e.length;s<l;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new r9;return e.spatialReference=this.spatialReference,e.rings=Me(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(ce(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(K(t)!==K(i)||K(t)&&K(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,l,d,y],[v,_,M,k])=>s===v&&l===_&&(d==null&&M==null||d===M)&&(y==null&&k==null||y===k);for(let s=0;s<this.rings.length;s++){const l=this.rings[s],d=e.rings[s];if(!$1(l,d,r))return!1}return!0}contains(e){if(!e)return!1;const t=V6(e,this.spatialReference);return IX(this,K(t)?t:e)}isClockwise(e){let t;return t=BV(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,mP(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new ut(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ut(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ut(i[0],i[1],i[2],i[3],this.spatialReference):new ut(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Dg(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new ut(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new ut(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Dg(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};g([S({readOnly:!0})],tc.prototype,"cache",null),g([S({readOnly:!0})],tc.prototype,"centroid",null),g([S({readOnly:!0})],tc.prototype,"extent",null),g([S({readOnly:!0})],tc.prototype,"isSelfIntersecting",null),g([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],tc.prototype,"rings",void 0),g([pt("rings")],tc.prototype,"writeRings",null),tc=r9=g([Q("esri.geometry.Polygon")],tc),tc.prototype.toJSON.isDefaultToJSON=!0;const go=tc;var EI;function f_e(e){return!Array.isArray(e[0])}let Kp=EI=class extends Qo{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,s=null,l=null;return e&&!Array.isArray(e)?(s=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||Ct.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),l=s[0]&&s[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=!1):i===void 0?i=!r&&l.length>3:r===void 0&&(r=!i&&l.length>3)),{paths:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=TQ(this);if(!t)return null;const i=new yi(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=Me(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(f_e(e)){const r=[];for(let s=0,l=e.length;s<l;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new EI;return e.spatialReference=this.spatialReference,e.paths=Me(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new ut(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new ut(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new ut(i[0],i[1],i[2],i[3],this.spatialReference):new ut(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Dg(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new ut(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new ut(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Dg(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};g([S({readOnly:!0})],Kp.prototype,"cache",null),g([S({readOnly:!0})],Kp.prototype,"extent",null),g([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Kp.prototype,"paths",void 0),g([pt("paths")],Kp.prototype,"writePaths",null),Kp=EI=g([Q("esri.geometry.Polyline")],Kp),Kp.prototype.toJSON.isDefaultToJSON=!0;const zr=Kp,bP=_s()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),GV=_s()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function IQ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function _P(e){return e.points!==void 0}function xP(e){return e.x!==void 0&&e.y!==void 0}function SP(e){return e.paths!==void 0}function u1(e){return e.rings!==void 0}function vo(e){return ce(e)?null:e instanceof Qo?e:xP(e)?ut.fromJSON(e):SP(e)?zr.fromJSON(e):u1(e)?go.fromJSON(e):_P(e)?B1.fromJSON(e):IQ(e)?yi.fromJSON(e):null}function gv(e){return e?xP(e)?"esriGeometryPoint":SP(e)?"esriGeometryPolyline":u1(e)?"esriGeometryPolygon":IQ(e)?"esriGeometryEnvelope":_P(e)?"esriGeometryMultipoint":null:null}const y_e={esriGeometryPoint:ut,esriGeometryPolyline:zr,esriGeometryPolygon:go,esriGeometryEnvelope:yi,esriGeometryMultipoint:B1};function CQ(e){return e&&y_e[e]||null}const G1={base:Qo,key:"type",typeMap:{extent:yi,multipoint:B1,point:ut,polyline:zr,polygon:go}};Oc(G1);let m_e=0;const $P=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+m_e++})}};return t=g([Q("esri.core.Identifiable")],t),t};let qV=class extends $P(class{}){};qV=g([Q("esri.core.Identifiable")],qV);const g_e=Ke.getLogger("esri.layers.support.fromPortalItem");async function v_e(e){const t="portalItem"in e?e:{portalItem:e},i=await Le(()=>import("./portalLayers.89d52ed1.js"),["portalLayers.89d52ed1.js","lazyLayerLoader.e3c4b311.js","layersLoader.1a12577c.js","jsonContext.42efcaec.js","portalItemUtils.6aff0acf.js"],import.meta.url);try{return await i.fromItem(t)}catch(r){const s=t&&t.portalItem,l=s&&s.id||"unset",d=s&&s.portal&&s.portal.url||hi.portalUrl;throw g_e.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+d+"', id: '"+l+"')",r),r}}let w_e=0,kn=class extends bs.EventedMixin($P(za)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new yi(-180,-90,180,90,Ct.WGS84),this.id=Date.now().toString(16)+"-layer-"+w_e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ct.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await Le(()=>import("./arcgisLayers.c1c128e0.js"),["arcgisLayers.c1c128e0.js","lazyLayerLoader.e3c4b311.js"],import.meta.url)).fromUrl(t)}static fromPortalItem(e){return v_e(e)}initialize(){this.when().catch(e=>{var t,i;Vs(e)||Ke.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?en(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Bi(e,{query:{f:"json"},responseType:"json"})).data;throw new ge("layer:no-attribution-data","Layer does not have attribution data")}};g([S({type:String})],kn.prototype,"attributionDataUrl",void 0),g([S({type:yi})],kn.prototype,"fullExtent",void 0),g([S({readOnly:!0})],kn.prototype,"hasAttributionData",null),g([S({type:String,clonable:!1})],kn.prototype,"id",void 0),g([S({type:Boolean,nonNullable:!0})],kn.prototype,"legendEnabled",void 0),g([S({type:["show","hide","hide-children"]})],kn.prototype,"listMode",void 0),g([S({type:Number,range:{min:0,max:1},nonNullable:!0})],kn.prototype,"opacity",void 0),g([S({clonable:!1})],kn.prototype,"parent",void 0),g([S({readOnly:!0})],kn.prototype,"parsedUrl",null),g([S({type:Boolean})],kn.prototype,"popupEnabled",void 0),g([S({type:Boolean})],kn.prototype,"attributionVisible",void 0),g([S({type:Ct})],kn.prototype,"spatialReference",void 0),g([S({type:String})],kn.prototype,"title",void 0),g([S({readOnly:!0,json:{read:!1}})],kn.prototype,"type",void 0),g([S()],kn.prototype,"url",void 0),g([S({type:Boolean,nonNullable:!0})],kn.prototype,"visible",void 0),kn=g([Q("esri.layers.Layer")],kn);const zg=kn;function TI(e,t,i){let r,s;if(e)for(let l=0,d=e.length;l<d;l++){if(r=e.getItemAt(l),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(s=TI(r.layers,t,i),s))return s}}const HV=Ke.getLogger("esri.support.LayersMixin"),b_e=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new vt;const r=d=>{d.parent&&"remove"in d.parent&&d.parent.remove(d)},s=d=>{d.parent=this,this.layerAdded(d),d.type!=="elevation"&&d.type!=="base-elevation"||HV.error(`Layer 'title:${d.title}, id:${d.id}' of type '${d.type}' is not supported as an operational layer and will therefore be ignored.`)},l=d=>{d.parent=null,this.layerRemoved(d)};this.layers.on("before-add",d=>r(d.item)),this.layers.on("after-add",d=>s(d.item)),this.layers.on("after-remove",d=>l(d.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",T1(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof zg){const l=i;l.parent===this?this.reorder(l,r):s.add(l,r)}else dp(i)?i.then(l=>{this.destroyed||this.add(l,r)}):HV.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;r=s.getNextIndex(r),i.slice().forEach(l=>{l.parent!==this?(s.add(l,r),r+=1):this.reorder(l,r)})}findLayerById(i){return TI(this.layers,"id",i)}findLayerByUid(i){return TI(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return g([S()],t.prototype,"layers",null),t=g([Q("esri.support.LayersMixin")],t),t},kQ="esri.support.TablesMixin",__e=Ke.getLogger(kQ);function II(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const l=e.getItemAt(r);if(l[t]===i)return l;if((l==null?void 0:l.type)==="group"){const d=II(l.tables,t,i);if(d)return d}}}const x_e=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new vt,this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&__e.error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",T1(i,this._get("tables")))}findTableById(i){return II(this.tables,"id",i)}findTableByUid(i){return II(this.tables,"uid",i)}};return g([S()],t.prototype,"tables",null),t=g([Q(kQ)],t),t};let ic=class extends x_e(b_e(bs.EventedMixin(st))){constructor(e){super(e),this.allLayers=new Fg({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=J3e(this),this.basemap=null,this.editableLayers=new Fg({getCollections:()=>[this.allLayers],itemFilterFunction:F3e}),this.ground=new oS,this._basemapCache=D3e()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),j3e(this._basemapCache),this._basemapCache=null}castBasemap(e){return z3e(e,this._basemapCache)}castGround(e){const t=Z3e(e);return ce(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};g([S({readOnly:!0,dependsOn:[]})],ic.prototype,"allLayers",void 0),g([S({readOnly:!0})],ic.prototype,"allTables",void 0),g([S({type:Tc})],ic.prototype,"basemap",void 0),g([oi("basemap")],ic.prototype,"castBasemap",null),g([S({readOnly:!0})],ic.prototype,"editableLayers",void 0),g([S({type:oS,nonNullable:!0})],ic.prototype,"ground",void 0),g([oi("ground")],ic.prototype,"castGround",null),ic=g([Q("esri.Map")],ic);const AQ=ic;var Vg;function S_e(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return Vg.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return Vg.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Vg||(Vg={}));let Q7;function op(){return Q7||(Q7=(async()=>{const e=await Le(()=>import("./arcadeUtils.66d2e6b2.js").then(t=>t.t),[],import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Q7}const LWe=(e,t,i)=>N3.create(e,t,i,null,["$feature"]),PWe=(e,t,i)=>N3.create(e,t,i,null,["$feature","$view"]),$_e=(e,t,i,r)=>N3.create(e,t,i,r,["$feature","$view"]);class N3{constructor(t,i,r,s,l,d,y,v){this.script=t,this.evaluate=l;const _=Array.isArray(y)?y:y.fields;this.fields=_,this._syntaxTree=s,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=d,this._spatialReference=v,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,s,l,d){const{arcade:y,Feature:v,Dictionary:_}=await op(),M=Ct.fromJSON(i),k=y.parseScript(t,d),O=l.reduce((re,ue)=>({...re,[ue]:null}),{});let R=null;K(s)&&(R=new _(s),R.immutable=!0,O.$config=null);const D=y.scriptUsesGeometryEngine(k)&&y.enableGeometrySupport(),z=y.scriptUsesFeatureSet(k)&&y.enableFeatureSetSupport(),B=y.scriptIsAsync(k)&&y.enableAsyncSupport(),V={vars:O,spatialReference:M,useAsync:!!B},q=new _;q.immutable=!1,q.setField("scale",0);const J=y.compileScript(k,V),ne=re=>("$view"in re&&re.$view&&(q.setField("scale",re.$view.scale),re.$view=q),R&&(re.$config=R),J({vars:re,spatialReference:M}));return await Promise.all([D,z,B]),new N3(t,y,_,k,ne,new v,r,M)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const M_e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],E_e=["field","normalizationField"];function aS(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(WV(M_e,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)WV(E_e,r,t)}}function WV(e,t,i){if(e)for(const r of e){const s=uv(r,t),l=s&&typeof s!="function"&&i.get(s);l&&Xo(r,l.name,t)}}function MP(e,t){if(e!=null&&(t==null?void 0:t.fields.length))if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const eE=new Set;function OQ(e,t){return e&&t?(eE.clear(),Kb(eE,e,t),Array.from(eE).sort()):[]}function Kb(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)Cl(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)e.add(s)}}function Cl(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function RWe(e,t){return ce(t)||ce(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function wo(e,t,i){var l;if(!i)return;const{arcadeUtils:r}=await op(),s=r.extractFieldNames(i,(l=t==null?void 0:t.fields)==null?void 0:l.map(d=>d.name));for(const d of s)Cl(e,t,d)}async function LQ(e,t,i){if(i&&i!=="1=1"){const r=(await Le(()=>import("./WhereClause.bf01d283.js"),[],import.meta.url)).WhereClause.create(i,t);if(!r.isStandardized)throw new ge("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Kb(e,t,r.fieldNames)}}function T_e({displayField:e,fields:t}){return e||(t&&t.length?tE(t,"name-or-title")||tE(t,"unique-identifier")||tE(t,"type-or-category")||I_e(t):null)}function I_e(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function tE(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function NWe(e,t){if(!t)return;const i=uv("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function C_e(e,t,i){i.outStatistic.onStatisticValueExpression?wo(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function FWe(e,t,i){var s,l;if(!t||!i||!("fields"in i))return;const r=[];if((s=i.popupTemplate)!=null&&s.expressionInfos&&r.push(...i.popupTemplate.expressionInfos.map(d=>wo(e,t.fieldsIndex,d.expression))),Array.isArray((l=i.popupTemplate)==null?void 0:l.content)){const d=i.popupTemplate.content;for(const y of d)y.type==="expression"&&y.expressionInfo&&r.push(wo(e,t.fieldsIndex,y.expressionInfo.expression))}i.fields&&r.push(...i.fields.map(d=>C_e(e,t.fieldsIndex,d))),await Promise.all(r)}async function DWe(e,t,i){t&&(t.timeInfo&&K(i)&&i.timeExtent&&Kb(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Kb(e,t.fieldsIndex,[t.floorInfo.floorField]),K(i)&&K(i.where)&&await LQ(e,t.fieldsIndex,i.where))}async function jWe(e,t,i){t&&i&&await Promise.all(i.map(r=>k_e(e,t,r)))}async function k_e(e,t,i){t&&i&&(i.valueExpression?await wo(e,t.fieldsIndex,i.valueExpression):i.field&&Cl(e,t.fieldsIndex,i.field))}function zWe(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?OQ(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function VWe(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(s=>A_e(e,r,s)))}async function A_e(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await wo(e,t,r.expression);else{const l=r.expression.match(/{[^}]*}/g);l&&l.forEach(d=>{Cl(e,t,d.slice(1,-1))})}await LQ(e,t,s)}function O_e(e){const t=e.defaultValue;return t!==void 0&&NQ(e,t)?t:e.nullable?null:void 0}function PQ(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function L_e(e){return e===null||PQ(e)}const EP="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function P_e(e){return e===null||EP(e)}function RQ(e){return e!=null&&typeof e=="string"}function R_e(e){return e===null||RQ(e)}function N_e(){return!0}function NQ(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?P_e:EP;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?L_e:PQ;break;case"string":case"esriFieldTypeString":i=e.nullable?R_e:RQ;break;default:i=N_e}return arguments.length===1?i:i(t)}const F_e=["integer","small-integer","single","double"],D_e=new Set([...F_e,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function TP(e){return e!=null&&D_e.has(e.type)}function UWe(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function j_e(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}var lS,uS;function BWe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function GWe(e,t){return e.nullable&&t===null?null:TP(e)&&!z_e(e.type,Number(t))?lS.OUT_OF_RANGE:NQ(e,t)?e.domain?S_e(e.domain,t):null:uS.INVALID_TYPE}function z_e(e,t){const i=typeof e=="string"?FQ(e):e;return!!i&&(i.isInteger?EP(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function FQ(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return V_e;case"esriFieldTypeInteger":case"integer":return U_e;case"esriFieldTypeSingle":case"single":return B_e;case"esriFieldTypeDouble":case"double":return G_e}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(lS||(lS={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(uS||(uS={}));const V_e={min:-32768,max:32767,isInteger:!0},U_e={min:-2147483648,max:2147483647,isInteger:!0},B_e={min:-34e37,max:12e37,isInteger:!1},G_e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function qWe(e,t,i){switch(e){case Vg.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Vg.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case uS.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case lS.OUT_OF_RANGE:{const{min:r,max:s}=FQ(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function q_e(e,t){return!H_e(e,t,null)}function H_e(e,t,i){if(!t||!t.attributes||!e){if(K(i))for(const l of e)i.add(l);return!0}const r=t.attributes;let s=!1;for(const l of e)if(!(l in r)){if(s=!0,!K(i))break;i.add(l)}return s}function DQ(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let n9=class extends Ve{constructor(e){super(e),this.type=null}};g([S({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],n9.prototype,"type",void 0),n9=g([Q("esri.popup.content.Content")],n9);const q1=n9;var CI;let Wf=CI=class extends q1{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new CI({description:this.description,displayType:this.displayType,title:this.title})}};g([S({type:String,json:{write:!0}})],Wf.prototype,"description",void 0),g([S({type:["auto","preview","list"],json:{write:!0}})],Wf.prototype,"displayType",void 0),g([S({type:String,json:{write:!0}})],Wf.prototype,"title",void 0),g([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Wf.prototype,"type",void 0),Wf=CI=g([Q("esri.popup.content.AttachmentsContent")],Wf);const Zb=Wf;var kI;let Jf=kI=class extends q1{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new kI({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Me(this.outFields):null})}};g([S()],Jf.prototype,"creator",void 0),g([S()],Jf.prototype,"destroyer",void 0),g([S()],Jf.prototype,"outFields",void 0),g([S({type:["custom"],readOnly:!0})],Jf.prototype,"type",void 0),Jf=kI=g([Q("esri.popup.content.CustomContent")],Jf);const W_e=Jf;var AI;let Dy=AI=class extends Ve{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new AI({title:this.title,expression:this.expression})}};g([S({type:String,json:{write:!0}})],Dy.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],Dy.prototype,"expression",void 0),g([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Dy.prototype,"returnType",void 0),Dy=AI=g([Q("esri.popup.ElementExpressionInfo")],Dy);const jQ=Dy;var OI;let qw=OI=class extends q1{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new OI({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};g([S({type:jQ,json:{write:!0}})],qw.prototype,"expressionInfo",void 0),g([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],qw.prototype,"type",void 0),qw=OI=g([Q("esri.popup.content.ExpressionContent")],qw);const IP=qw,Yb=_s()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Yb.toJSON.bind(Yb);Yb.fromJSON.bind(Yb);const Ku={year:"numeric",month:"numeric",day:"numeric"},hw={year:"numeric",month:"long",day:"numeric"},pw={year:"numeric",month:"short",day:"numeric"},dw={year:"numeric",month:"long",weekday:"long",day:"numeric"},sl={hour:"numeric",minute:"numeric"},Gl={...sl,second:"numeric"},CP={"short-date":Ku,"short-date-short-time":{...Ku,...sl},"short-date-short-time-24":{...Ku,...sl,hour12:!1},"short-date-long-time":{...Ku,...Gl},"short-date-long-time-24":{...Ku,...Gl,hour12:!1},"short-date-le":Ku,"short-date-le-short-time":{...Ku,...sl},"short-date-le-short-time-24":{...Ku,...sl,hour12:!1},"short-date-le-long-time":{...Ku,...Gl},"short-date-le-long-time-24":{...Ku,...Gl,hour12:!1},"long-month-day-year":hw,"long-month-day-year-short-time":{...hw,...sl},"long-month-day-year-short-time-24":{...hw,...sl,hour12:!1},"long-month-day-year-long-time":{...hw,...Gl},"long-month-day-year-long-time-24":{...hw,...Gl,hour12:!1},"day-short-month-year":pw,"day-short-month-year-short-time":{...pw,...sl},"day-short-month-year-short-time-24":{...pw,...sl,hour12:!1},"day-short-month-year-long-time":{...pw,...Gl},"day-short-month-year-long-time-24":{...pw,...Gl,hour12:!1},"long-date":dw,"long-date-short-time":{...dw,...sl},"long-date-short-time-24":{...dw,...sl,hour12:!1},"long-date-long-time":{...dw,...Gl},"long-date-long-time-24":{...dw,...Gl,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":sl,"long-time":Gl},Xb=_s()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Xb.apiValues;Xb.toJSON.bind(Xb);Xb.fromJSON.bind(Xb);const J_e={ar:"ar-u-nu-latn-ca-gregory"};let s9=new WeakMap,zQ=CP["short-date-short-time"];function K_e(e){const t=e||zQ;if(!s9.has(t)){const i=Pa(),r=J_e[Pa()]||i;s9.set(t,new Intl.DateTimeFormat(r,t))}return s9.get(t)}function kP(e){return CP[e]||null}function ap(e,t){return K_e(t).format(e)}aP(()=>{s9=new WeakMap,zQ=CP["short-date-short-time"]});const Z_e={ar:"ar-u-nu-latn"};let o9=new WeakMap,VQ={};function Y_e(e){const t=e||VQ;if(!o9.has(t)){const i=Pa(),r=Z_e[Pa()]||i;o9.set(t,new Intl.NumberFormat(r,e))}return o9.get(t)}function UQ(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function fs(e,t){return e===-0&&(e=0),Y_e(t).format(e)}aP(()=>{o9=new WeakMap,VQ={}});var LI;let Kf=LI=class extends Ve{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new LI({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?ap(e,{...kP(this.dateFormat),...this.dateTimeFormatOptions}):fs(e,UQ(this))}formatRasterPixelValue(e){let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(s=>this.format(Number(s))).join(i):e}};g([Mt(Yb)],Kf.prototype,"dateFormat",void 0),g([S({type:Object,json:{read:!1}})],Kf.prototype,"dateTimeFormatOptions",void 0),g([S({type:Boolean,json:{write:!0}})],Kf.prototype,"digitSeparator",void 0),g([S({type:Yi,json:{write:!0}})],Kf.prototype,"places",void 0),Kf=LI=g([Q("esri.popup.support.FieldInfoFormat")],Kf);const Vm=Kf;var PI;let Yl=PI=class extends Ve{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new PI({fieldName:this.fieldName,format:this.format?Me(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};g([S({type:String,json:{write:!0}})],Yl.prototype,"fieldName",void 0),g([S({type:Vm,json:{write:!0}})],Yl.prototype,"format",void 0),g([S({type:Boolean,json:{write:!0,default:!1}})],Yl.prototype,"isEditable",void 0),g([S({type:String,json:{write:!0}})],Yl.prototype,"label",void 0),g([Mt(new Dt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Yl.prototype,"stringFieldOption",void 0),g([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Yl.prototype,"statisticType",void 0),g([S({type:String,json:{write:!0}})],Yl.prototype,"tooltip",void 0),g([S({type:Boolean,json:{write:!0}})],Yl.prototype,"visible",void 0),Yl=PI=g([Q("esri.popup.FieldInfo")],Yl);const F3=Yl;var RI;let ch=RI=class extends q1{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new RI(Me({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};g([S({type:Object,json:{write:!0}})],ch.prototype,"attributes",void 0),g([S({type:String,json:{write:!0}})],ch.prototype,"description",void 0),g([S({type:[F3]})],ch.prototype,"fieldInfos",void 0),g([pt("fieldInfos")],ch.prototype,"writeFieldInfos",null),g([S({type:String,json:{write:!0}})],ch.prototype,"title",void 0),g([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],ch.prototype,"type",void 0),ch=RI=g([Q("esri.popup.content.FieldsContent")],ch);const Ug=ch;let Zf=class extends Ve{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};g([S({type:String,json:{write:!0}})],Zf.prototype,"altText",void 0),g([S({type:String,json:{write:!0}})],Zf.prototype,"caption",void 0),g([S({type:String,json:{write:!0}})],Zf.prototype,"title",void 0),g([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Zf.prototype,"type",void 0),Zf=g([Q("esri.popup.content.mixins.MediaInfo")],Zf);const AP=Zf;var NI;let jy=NI=class extends st{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new NI({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};g([S()],jy.prototype,"fieldName",void 0),g([S()],jy.prototype,"tooltip",void 0),g([S()],jy.prototype,"value",void 0),jy=NI=g([Q("esri.popup.content.support.ChartMediaInfoValueSeries")],jy);const BQ=jy;var FI;let Yf=FI=class extends Ve{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new FI({fields:Me(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};g([S({type:[String],json:{write:!0}})],Yf.prototype,"fields",void 0),g([S({type:String,json:{write:!0}})],Yf.prototype,"normalizeField",void 0),g([S({type:[BQ],json:{read:!1}})],Yf.prototype,"series",void 0),g([S({type:String,json:{write:!0}})],Yf.prototype,"tooltipField",void 0),Yf=FI=g([Q("esri.popup.content.support.ChartMediaInfoValue")],Yf);const X_e=Yf;let Hw=class extends AP{constructor(e){super(e),this.type=null,this.value=null}};g([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Hw.prototype,"type",void 0),g([S({type:X_e,json:{write:!0}})],Hw.prototype,"value",void 0),Hw=g([Q("esri.popup.content.mixins.ChartMediaInfo")],Hw);const J6=Hw,K6=_s()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var DI;let a9=DI=class extends J6{constructor(e){super(e),this.type="bar-chart"}clone(){return new DI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:K6.write}})],a9.prototype,"type",void 0),a9=DI=g([Q("esri.popup.content.BarChartMediaInfo")],a9);const GQ=a9;var jI;let l9=jI=class extends J6{constructor(e){super(e),this.type="column-chart"}clone(){return new jI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:K6.write}})],l9.prototype,"type",void 0),l9=jI=g([Q("esri.popup.content.ColumnChartMediaInfo")],l9);const qQ=l9;var zI;let Ww=zI=class extends Ve{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new zI({linkURL:this.linkURL,sourceURL:this.sourceURL})}};g([S({type:String,json:{write:!0}})],Ww.prototype,"linkURL",void 0),g([S({type:String,json:{write:!0}})],Ww.prototype,"sourceURL",void 0),Ww=zI=g([Q("esri.popup.content.support.ImageMediaInfoValue")],Ww);const Q_e=Ww;var VI;let zy=VI=class extends AP{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new VI({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};g([S({type:Number,json:{write:!0}})],zy.prototype,"refreshInterval",void 0),g([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],zy.prototype,"type",void 0),g([S({type:Q_e,json:{write:!0}})],zy.prototype,"value",void 0),zy=VI=g([Q("esri.popup.content.ImageMediaInfo")],zy);const HQ=zy;var UI;let u9=UI=class extends J6{constructor(e){super(e),this.type="line-chart"}clone(){return new UI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:K6.write}})],u9.prototype,"type",void 0),u9=UI=g([Q("esri.popup.content.LineChartMediaInfo")],u9);const WQ=u9;var BI;let c9=BI=class extends J6{constructor(e){super(e),this.type="pie-chart"}clone(){return new BI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:K6.write}})],c9.prototype,"type",void 0),c9=BI=g([Q("esri.popup.content.PieChartMediaInfo")],c9);const JQ=c9,KQ={base:AP,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":GQ,"column-chart":qQ,"line-chart":WQ,"pie-chart":JQ,image:HQ}};var GI;let Xl=GI=class extends q1{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?HQ.fromJSON(t):t.type==="barchart"?GQ.fromJSON(t):t.type==="columnchart"?qQ.fromJSON(t):t.type==="linechart"?WQ.fromJSON(t):t.type==="piechart"?JQ.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new GI(Me({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};g([S()],Xl.prototype,"activeMediaInfoIndex",void 0),g([S({type:Object,json:{write:!0}})],Xl.prototype,"attributes",void 0),g([S({type:String,json:{write:!0}})],Xl.prototype,"description",void 0),g([S({types:[KQ]})],Xl.prototype,"mediaInfos",void 0),g([nt("mediaInfos")],Xl.prototype,"readMediaInfos",null),g([pt("mediaInfos")],Xl.prototype,"writeMediaInfos",null),g([S({type:String,json:{write:!0}})],Xl.prototype,"title",void 0),g([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Xl.prototype,"type",void 0),Xl=GI=g([Q("esri.popup.content.MediaContent")],Xl);const Qb=Xl;var qI;let Jw=qI=class extends q1{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new qI({text:this.text})}};g([S({type:String,json:{write:!0}})],Jw.prototype,"text",void 0),g([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Jw.prototype,"type",void 0),Jw=qI=g([Q("esri.popup.content.TextContent")],Jw);const Bg=Jw,exe={base:null,key:"type",typeMap:{attachment:Zb,media:Qb,text:Bg,expression:IP,field:Ug}};var HI;let Xf=HI=class extends Ve{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new HI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([S({type:String,json:{write:!0}})],Xf.prototype,"name",void 0),g([S({type:String,json:{write:!0}})],Xf.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],Xf.prototype,"expression",void 0),g([S({type:["string","number"],json:{write:!0}})],Xf.prototype,"returnType",void 0),Xf=HI=g([Q("esri.popup.ExpressionInfo")],Xf);const ZQ=Xf;var WI;let Kw=WI=class extends Ve{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new WI({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};g([S({type:Boolean,json:{write:!0}})],Kw.prototype,"returnTopmostRaster",void 0),g([S({type:Boolean,json:{write:!0}})],Kw.prototype,"showNoDataRecords",void 0),Kw=WI=g([Q("esri.popup.LayerOptions")],Kw);const txe=Kw;var JI;let Zw=JI=class extends Ve{constructor(e){super(e),this.field=null,this.order=null}clone(){return new JI({field:this.field,order:this.order})}};g([S({type:String,json:{write:!0}})],Zw.prototype,"field",void 0),g([S({type:["asc","desc"],json:{write:!0}})],Zw.prototype,"order",void 0),Zw=JI=g([Q("esri.popup.support.RelatedRecordsInfoFieldOrder")],Zw);const YQ=Zw;var KI;let Yw=KI=class extends Ve{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new KI({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Me(this.orderByFields):null})}};g([S({type:Boolean,json:{write:!0}})],Yw.prototype,"showRelatedRecords",void 0),g([S({type:[YQ],json:{write:!0}})],Yw.prototype,"orderByFields",void 0),Yw=KI=g([Q("esri.popup.RelatedRecordsInfo")],Yw);const ixe=Yw;var ZI;let Ql=ZI=class extends $P(st){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new ZI({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};g([S()],Ql.prototype,"active",void 0),g([S()],Ql.prototype,"className",void 0),g([S()],Ql.prototype,"disabled",void 0),g([S()],Ql.prototype,"id",void 0),g([S()],Ql.prototype,"indicator",void 0),g([S()],Ql.prototype,"title",void 0),g([S()],Ql.prototype,"type",void 0),g([S()],Ql.prototype,"visible",void 0),Ql=ZI=g([Q("esri.support.actions.ActionBase")],Ql);const Z6=Ql;var YI;let h9=YI=class extends Z6{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new YI({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};g([S()],h9.prototype,"image",void 0),h9=YI=g([Q("esri.support.Action.ActionButton")],h9);const vv=h9;var XI;let Xw=XI=class extends Z6{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new XI({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};g([S()],Xw.prototype,"image",void 0),g([S()],Xw.prototype,"value",void 0),Xw=XI=g([Q("esri.support.Action.ActionToggle")],Xw);const XQ=Xw;var QI;const rxe=vt.ofType({key:"type",defaultKeyValue:"button",base:Z6,typeMap:{button:vv,toggle:XQ}}),nxe={base:q1,key:"type",typeMap:{media:Qb,custom:W_e,text:Bg,attachments:Zb,fields:Ug,expression:IP}},QQ="esri.PopupTemplate",sxe=Ke.getLogger(QQ),oxe=["attachments","fields","media","text","expression"];let mn=QI=class extends Ve{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>Oc(nxe,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||dp(e)?e:(sxe.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(s=>oxe.includes(s.type)).map(s=>s&&s.toJSON(r)),t.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(t):s.type==="media"?this._writeMediaContent(s,t):s.type==="text"&&this._writeTextContent(s,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:s}=this,l=Array.isArray(s)?s:null;if(e){const d=l?l.filter(v=>v.type==="fields"):[],y=d.length&&d.every(v=>{var _;return(_=v.fieldInfos)==null?void 0:_.length});t.fieldInfos=e.filter(Boolean).map(v=>{const _=v.toJSON(r);return y&&(_.visible=!1),_})}if(l)for(const d of l)d.type==="fields"&&this._writeFieldsContent(d,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?Me(e.toArray()):[];return new QI({actions:t,content:Array.isArray(this.content)?Me(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?Me(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?Me(this.fieldInfos):null,layerOptions:this.layerOptions?Me(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?Me(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?Me(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),Kb(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=Me(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const s=t.fieldInfos.find(l=>l.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=Me(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const r={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!t||r.mediaInfos||(s.mediaInfos=t,r.mediaInfos=!0),Qb.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),Bg.fromJSON(s)):s.type==="attachments"?Zb.fromJSON(s):s.type==="fields"?Ug.fromJSON(s):s.type==="expression"?IP.fromJSON(s):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const r=[];return e?r.push(new Bg({text:e})):r.push(new Ug),Array.isArray(t)&&t.length&&r.push(Qb.fromJSON({mediaInfos:t})),i&&r.push(Zb.fromJSON({displayType:"auto"})),r.length?r:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((r,s)=>[...r,...this._getMediaInfoFields(s)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,s=r||{},{fields:l=[],normalizeField:d,tooltipField:y,sourceURL:v,linkURL:_}=s,M=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(v),...this._extractFieldNames(_),...l];return d&&M.push(d),y&&M.push(y),M}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>wo(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,s=i.filter(l=>!(l.indexOf("{relationships/")===0||l.indexOf("{expression/")===0)).map(l=>l.replace(r,"{$1}"));return s?s.map(l=>l.slice(1,-1)):[]}};g([S({type:rxe})],mn.prototype,"actions",void 0),g([S()],mn.prototype,"content",void 0),g([oi("content")],mn.prototype,"castContent",null),g([nt("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],mn.prototype,"readContent",null),g([pt("content",{popupElements:{type:vt.ofType(exe)},showAttachments:{type:Boolean},mediaInfos:{type:vt.ofType(KQ)},description:{type:String}})],mn.prototype,"writeContent",null),g([S({type:[ZQ],json:{write:!0}})],mn.prototype,"expressionInfos",void 0),g([S({type:[F3]})],mn.prototype,"fieldInfos",void 0),g([pt("fieldInfos")],mn.prototype,"writeFieldInfos",null),g([S({type:txe})],mn.prototype,"layerOptions",void 0),g([pt("layerOptions")],mn.prototype,"writeLayerOptions",null),g([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],mn.prototype,"lastEditInfoEnabled",void 0),g([S()],mn.prototype,"outFields",void 0),g([S()],mn.prototype,"overwriteActions",void 0),g([S()],mn.prototype,"returnGeometry",void 0),g([S({json:{type:String}})],mn.prototype,"title",void 0),g([pt("title")],mn.prototype,"writeTitle",null),g([S({type:ixe,json:{write:!0}})],mn.prototype,"relatedRecordsInfo",void 0),mn=QI=g([Q(QQ)],mn);const H1=mn,JV=new Dt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let axe=0,Vy=class extends Ve{constructor(e){super(e),this.id="sym"+axe++,this.type=null,this.color=new ot([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};g([S({type:JV.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:JV.write}}})],Vy.prototype,"type",void 0),g([S({type:ot,json:{write:{allowNull:!0}}})],Vy.prototype,"color",void 0),g([nt("color")],Vy.prototype,"readColor",null),Vy=g([Q("esri.symbols.Symbol")],Vy);const ta=Vy;var eC;let Zp=eC=class extends ta{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const l=s.valueExpressionInfo;return wo(e,t,l.expression)});await Promise.all(r)}}}clone(){return new eC({data:Me(this.data)})}hash(){return NL(JSON.stringify(this.data)).toString()}};g([S({json:{write:!1}})],Zp.prototype,"color",void 0),g([S({json:{write:!0}})],Zp.prototype,"data",void 0),g([nt("data",["symbol"])],Zp.prototype,"readData",null),g([pt("data",{})],Zp.prototype,"writeData",null),g([Mt({CIMSymbolReference:"cim"},{readOnly:!0})],Zp.prototype,"type",void 0),Zp=eC=g([Q("esri.symbols.CIMSymbol")],Zp);const fp=Zp;let Uy=class extends Ve{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};g([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Uy.prototype,"enabled",void 0),g([pt("enabled")],Uy.prototype,"writeEnabled",null),g([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Uy.prototype,"type",void 0),Uy=g([Q("esri.symbols.Symbol3DLayer")],Uy);const Fc=Uy,lxe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,uxe="screenUtils.toPt: input not recognized!",eee=96;function Xi(e){return e?e/72*eee:0}function bo(e){return e?72*e/eee:0}function Si(e){if(typeof e=="string"){const t=e.match(lxe);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",l=r==="px"?bo(i):i;return s?-l:l}return console.warn(uxe),null}return e}function Un(e=0,t=0){return{x:e,y:t}}function e3(e=0,t=0){return[e,t]}function cxe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function hxe(e,t){const i=t.transparency!=null?Jb(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new ot([r[0]||0,r[1]||0,r[2]||0,i]):null}function pxe(e,t){t.color=e.toJSON().slice(0,3);const i=W6(e.a);i!==0&&(t.transparency=i)}const gf={type:ot,json:{type:[Yi],default:null,read:{source:["color","transparency"],reader:hxe},write:{target:{color:{type:[Yi]},transparency:{type:Yi}},writer:pxe}}},Pc={type:Number,cast:Si,json:{write:!0}};let Qf=class extends Ve{constructor(e){super(e),this.color=new ot([0,0,0,1]),this.extensionLength=0,this.size=bo(1)}clone(){}cloneProperties(){return{color:Me(this.color),size:this.size,extensionLength:this.extensionLength}}};g([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Qf.prototype,"type",void 0),g([S(gf)],Qf.prototype,"color",void 0),g([S({...Pc,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Qf.prototype,"extensionLength",void 0),g([S(Pc)],Qf.prototype,"size",void 0),Qf=g([Q("esri.symbols.edges.Edges3D")],Qf);const OP=Qf;var tC;let p9=tC=class extends OP{constructor(e){super(e),this.type="sketch"}clone(){return new tC(this.cloneProperties())}};g([Mt({sketch:"sketch"},{readOnly:!0})],p9.prototype,"type",void 0),p9=tC=g([Q("esri.symbols.edges.SketchEdges3D")],p9);const dxe=p9;var iC;let d9=iC=class extends OP{constructor(e){super(e),this.type="solid"}clone(){return new iC(this.cloneProperties())}};g([Mt({solid:"solid"},{readOnly:!0})],d9.prototype,"type",void 0),d9=iC=g([Q("esri.symbols.support.SolidEdges3D")],d9);const fxe=d9,tee={types:{key:"type",base:OP,typeMap:{solid:fxe,sketch:dxe}},json:{write:!0}};var rC;let Na=rC=class extends Ve{constructor(e){super(e),this.color=null}clone(){const e={color:K(this.color)?this.color.clone():null};return new rC(e)}};g([S(gf)],Na.prototype,"color",void 0),Na=rC=g([Q("esri.symbols.support.Symbol3DMaterial")],Na);var nC;let Yp=nC=class extends Fc{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new nC({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:K(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};g([Mt({Extrude:"extrude"},{readOnly:!0})],Yp.prototype,"type",void 0),g([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Yp.prototype,"size",void 0),g([S({type:Na,json:{write:!0}})],Yp.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Yp.prototype,"castShadows",void 0),g([S(tee)],Yp.prototype,"edges",void 0),Yp=nC=g([Q("esri.symbols.ExtrudeSymbol3DLayer")],Yp);const iee=Yp;let Qw=class extends ta{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};g([Mt({esriSLS:"simple-line"},{readOnly:!0})],Qw.prototype,"type",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],Qw.prototype,"width",void 0),Qw=g([Q("esri.symbols.LineSymbol")],Qw);const yxe=Qw,mxe=["begin","end","begin-end"],ree=["arrow","circle","square","diamond","cross","x"];var sC;let rc=sC=class extends Ve{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new sC({color:Me(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};g([S({type:["begin","end","begin-end"],json:{write:!0}})],rc.prototype,"placement",void 0),g([Mt({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],rc.prototype,"type",void 0),g([S({type:ree})],rc.prototype,"style",void 0),g([pt("style")],rc.prototype,"writeStyle",null),g([S({type:ot,value:null,json:{write:{allowNull:!0}}})],rc.prototype,"color",null),g([nt("color")],rc.prototype,"readColor",null),g([pt("color")],rc.prototype,"writeColor",null),rc=sC=g([Q("esri.symbols.LineSymbolMarker")],rc);const gxe=rc;var oC;const iE=new Dt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let hh=oC=class extends yxe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,l){if(e&&typeof e!="string")return e;const d={};return e!=null&&(d.style=e),t!=null&&(d.color=t),i!=null&&(d.width=Si(i)),r!=null&&(d.cap=r),s!=null&&(d.join=s),l!=null&&(d.miterLimit=Si(l)),d}clone(){var e;return new oC({color:Me(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};g([Mt({esriSLS:"simple-line"},{readOnly:!0})],hh.prototype,"type",void 0),g([S({type:iE.apiValues,json:{read:iE.read,write:iE.write}})],hh.prototype,"style",void 0),g([S({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],hh.prototype,"cap",void 0),g([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],hh.prototype,"join",void 0),g([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":gxe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],hh.prototype,"marker",void 0),g([S({type:Number,json:{read:!1,write:!1}})],hh.prototype,"miterLimit",void 0),hh=oC=g([Q("esri.symbols.SimpleLineSymbol")],hh);const $o=hh;let e2=class extends ta{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};g([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":$o}},json:{default:null,write:!0}})],e2.prototype,"outline",void 0),g([S({type:["simple-fill","picture-fill"],readOnly:!0})],e2.prototype,"type",void 0),e2=g([Q("esri.symbols.FillSymbol")],e2);const nee=e2;let f9=class extends Ve{constructor(e){super(e)}clone(){}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],f9.prototype,"type",void 0),f9=g([Q("esri.symbols.patterns.LinePattern3D")],f9);const see=f9,vxe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var aC;const wxe=_s()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let t2=aC=class extends see{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new aC(e)}};g([S({type:["style"]})],t2.prototype,"type",void 0),g([Mt(wxe),S({type:vxe})],t2.prototype,"style",void 0),t2=aC=g([Q("esri.symbols.patterns.LineStylePattern3D")],t2);const LP=t2;let y9=class extends Ve{constructor(e){super(e)}clone(){}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],y9.prototype,"type",void 0),y9=g([Q("esri.symbols.patterns.Pattern3D")],y9);const oee=y9,bxe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var lC;let i2=lC=class extends oee{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new lC(e)}};g([S({type:["style"]})],i2.prototype,"type",void 0),g([S({type:bxe,json:{read:!0,write:!0}})],i2.prototype,"style",void 0),i2=lC=g([Q("esri.symbols.patterns.StylePattern3D")],i2);const aee=i2,_xe={types:{key:"type",base:oee,typeMap:{style:aee}},json:{write:!0}},lee={types:{key:"type",base:see,typeMap:{style:LP}},json:{write:!0}},Y2=new ot("white");new ot("black");const xxe=new ot([255,255,255,0]);function Sxe(e){return e.r===0&&e.g===0&&e.b===0}var uC;let X2=uC=class extends Na{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:K(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new uC(e)}};g([Mt({multiply:"multiply",replace:"replace",tint:"tint"})],X2.prototype,"colorMixMode",void 0),X2=uC=g([Q("esri.symbols.support.Symbol3DFillMaterial")],X2);function Va(e=Oxe){return[e[0],e[1],e[2],e[3]]}function HWe(e){return[e[0],e[1],e[2],e[3]]}function $xe(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function WWe(e,t,i,r,s=Va()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function Mxe(e,t=Va()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function JWe(e,t){return new yi({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function KWe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Exe(e){return ce(e)||e[0]>=e[2]?0:e[2]-e[0]}function Txe(e){return e[1]>=e[3]?0:e[3]-e[1]}function ZWe(e){return Exe(e)*Txe(e)}function Ixe(e,t){return Cxe(e,t[0],t[1])}function Cxe(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function kxe(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function YWe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Axe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function XWe(e){return e?$xe(e,KV):Va(KV)}const KV=[1/0,1/0,-1/0,-1/0],Oxe=[0,0,0,0];function Y6(e=Fxe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function PP(e,t,i,r,s,l,d=Y6()){return d[0]=e,d[1]=t,d[2]=i,d[3]=r,d[4]=s,d[5]=l,d}function QWe(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new yi(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function eJe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function tJe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Lxe(e){return e[0]>=e[3]?0:e[3]-e[0]}function Pxe(e){return e[1]>=e[4]?0:e[4]-e[1]}function Rxe(e){return e[2]>=e[5]?0:e[5]-e[2]}function iJe(e,t=[0,0,0]){return t[0]=Lxe(e),t[1]=Pxe(e),t[2]=Rxe(e),t}function rJe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function nJe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function Nxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function sJe(e){return e?Nxe(e,YV):Y6(YV)}function oJe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function ZV(e){return e.length===6}function aJe(e,t,i){if(ce(e)||ce(t))return e===t;if(!ZV(e)||!ZV(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const YV=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Fxe=[0,0,0,0,0,0];Y6();function lJe(e,{isPrimitive:t,width:i,depth:r,height:s}){const l=t?10:1;if(i==null&&s==null&&r==null)return[l*e[0],l*e[1],l*e[2]];const d=Qn(i,r,s);let y;for(let v=0;v<3;v++){const _=d[v];if(_!=null){y=_/e[v];break}}for(let v=0;v<3;v++)d[v]==null&&(d[v]=e[v]*y);return d}const Dxe=PP(-.5,-.5,-.5,.5,.5,.5),jxe=PP(-.5,-.5,0,.5,.5,1),zxe=PP(-.5,-.5,0,.5,.5,.5);function uJe(e){switch(e){case"sphere":case"cube":case"diamond":return Dxe;case"cylinder":case"cone":case"inverted-cone":return jxe;case"tetrahedron":return zxe;default:return}}const RP=["butt","square","round"],Vxe=[...RP,"none"],uee=["miter","bevel","round"];var cC;let e0=cC=class extends Ve{constructor(e){super(e),this.color=new ot([0,0,0,1]),this.size=bo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:K(this.color)?this.color.clone():null,size:this.size,pattern:K(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new cC(e)}};g([S(gf)],e0.prototype,"color",void 0),g([S(Pc)],e0.prototype,"size",void 0),g([S(lee)],e0.prototype,"pattern",void 0),g([S({type:RP,json:{default:"butt",write:{overridePolicy(){return{enabled:K(this.pattern)}}}}})],e0.prototype,"patternCap",void 0),e0=cC=g([Q("esri.symbols.support.Symbol3DOutline")],e0);var m9;let ph=m9=class extends Fc{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:K(this.edges)?this.edges.clone():null,enabled:this.enabled,material:K(this.material)?this.material.clone():null,pattern:K(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:K(this.outline)?this.outline.clone():null};return new m9(e)}static fromSimpleFillSymbol(e){var r,s,l,d,y,v;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new LP({style:e.outline.style}):null,i={size:(s=(r=e.outline)==null?void 0:r.width)!=null?s:0,color:((d=(l=e.outline)==null?void 0:l.color)!=null?d:Y2).clone(),pattern:t};return t&&((y=e.outline)==null?void 0:y.cap)&&(i.patternCap=e.outline.cap),new m9({material:new X2({color:((v=e.color)!=null?v:xxe).clone()}),pattern:e.style&&e.style!=="solid"?new aee({style:e.style}):null,outline:i})}};g([Mt({Fill:"fill"},{readOnly:!0})],ph.prototype,"type",void 0),g([S({type:X2,json:{write:!0}})],ph.prototype,"material",void 0),g([S(_xe)],ph.prototype,"pattern",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ph.prototype,"castShadows",void 0),g([S({type:e0,json:{write:!0}})],ph.prototype,"outline",void 0),g([S(tee)],ph.prototype,"edges",void 0),ph=m9=g([Q("esri.symbols.FillSymbol3DLayer")],ph);const X6=ph,Uxe=["none","underline","line-through"],Bxe=["normal","italic","oblique"],Gxe=["normal","lighter","bold","bolder"],cee={type:Number,cast:e=>{const t=gl(e);return t===0?1:Bs(t,.1,4)},nonNullable:!0},qxe=["left","right","center"],Hxe=["baseline","top","middle","bottom"],hee={type:qxe,nonNullable:!0},pee={type:Hxe,nonNullable:!0};var hC;let dh=hC=class extends Ve{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Si(e)}clone(){return new hC({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};g([S({type:Uxe,json:{default:"none",write:!0}})],dh.prototype,"decoration",void 0),g([S({type:String,json:{write:!0}})],dh.prototype,"family",void 0),g([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],dh.prototype,"size",void 0),g([oi("size")],dh.prototype,"castSize",null),g([S({type:Bxe,json:{default:"normal",write:!0}})],dh.prototype,"style",void 0),g([S({type:Gxe,json:{default:"normal",write:!0}})],dh.prototype,"weight",void 0),dh=hC=g([Q("esri.symbols.Font")],dh);const D3=dh;function uf(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=Mu(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=QL(e,t.portalItem.itemUrl);Jxe.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return pC(e,t&&t.portal)}function j3(e,t,i=t3.YES){if(!e)return e;!Oa(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=Mu(e);if(t){const s=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(s){const l=pC(s,t.portal);r=QL(pC(r,t.portal),l,l),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=dee(r,t&&t.portal),Oa(r)&&(r=Il(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!Oa(r)&&!U1(r)&&i===t3.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function NP(e,t,i){return uf(e,i)}function P1(e,t,i,r){const s=j3(e,r);s!==void 0&&(t[i]=s)}const Wxe=/\/items\/([^\/]+)\/resources\//,Jxe=/^\.\/resources\//;function Kxe(e){const t=K(e)?e.match(Wxe):null;return K(t)?t[1]:null}function dee(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?aI(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function pC(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=ZL();return Gb(r,`${r.scheme}://${i}`)?aI(e,t.portalHostname,i):aI(e,i,t.portalHostname)}var t3;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(t3||(t3={}));const cJe=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:uf,toJSON:j3,read:NP,write:P1,itemIdFromResourceUrl:Kxe,ensureMainOnlineDomain:dee,get MarkKeep(){return t3}},Symbol.toStringTag,{value:"Module"}));var dC;const Zxe=_s()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let t0=dC=class extends Ve{constructor(e){super(e)}readHref(e,t,i){return e?uf(e,i):t.dataURI}writeHref(e,t,i,r){e&&(U1(e)?t.dataURI=e:(t.href=j3(e,r),Oa(t.href)&&(t.href=Il(t.href))))}clone(){return new dC({href:this.href,primitive:this.primitive})}};g([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],t0.prototype,"href",void 0),g([nt("href")],t0.prototype,"readHref",null),g([pt("href",{href:{type:String},dataURI:{type:String}})],t0.prototype,"writeHref",null),g([Mt(Zxe)],t0.prototype,"primitive",void 0),t0=dC=g([Q("esri.symbols.support.IconSymbol3DLayerResource")],t0);const Yxe="circle";var fC;let Um=fC=class extends st{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new fC({x:this.x,y:this.y})}};g([S({type:Number})],Um.prototype,"x",void 0),g([S({type:Number})],Um.prototype,"y",void 0),Um=fC=g([Q("esri.symbols.support.Symbol3DAnchorPosition2D")],Um);var yC;let r2=yC=class extends Ve{constructor(e){super(e),this.color=new ot([0,0,0,1]),this.size=bo(1)}clone(){const e={color:K(this.color)?this.color.clone():null,size:this.size};return new yC(e)}};g([S(gf)],r2.prototype,"color",void 0),g([S(Pc)],r2.prototype,"size",void 0),r2=yC=g([Q("esri.symbols.support.Symbol3DIconOutline")],r2);var By;const Xxe=Ke.getLogger("esri.symbols.IconSymbol3DLayer");let nc=By=class extends Fc{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new By({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:K(this.material)?this.material.clone():null,outline:K(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Y2,i=XV(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Y2).clone()}:null;return new By({size:e.size,resource:{primitive:e5e(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||Sxe(e.color)?Y2:e.color,i=XV(e);return new By({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new By({resource:{href:gX({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function XV(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=QV(e.xoffset),s=QV(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function QV(e){return isFinite(e)?e:0}g([S({type:Na,json:{write:!0}})],nc.prototype,"material",void 0),g([S({type:t0,json:{write:!0}})],nc.prototype,"resource",void 0),g([Mt({Icon:"icon"},{readOnly:!0})],nc.prototype,"type",void 0),g([S(Pc)],nc.prototype,"size",void 0),g([Mt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],nc.prototype,"anchor",void 0),g([S({type:Um,json:{type:[Number],read:{reader:e=>new Um({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],nc.prototype,"anchorPosition",void 0),g([S({type:r2,json:{write:!0}})],nc.prototype,"outline",void 0),nc=By=g([Q("esri.symbols.IconSymbol3DLayer")],nc);const Qxe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function e5e(e){return Qxe[e]||(Xxe.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const H0=nc;Ke.getLogger("esri.core.Clonable");const ia=e=>{let t=class extends e{clone(){var v;const i=Ege(zs(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,l={},d=new Map;for(const _ in r){const M=r[_],k=s==null?void 0:s.originOf(_),O=M.clonable;if(M.readOnly||O===!1||k!==Ft.USER&&k!==Ft.DEFAULTS&&k!==Ft.WEB_MAP&&k!==Ft.WEB_SCENE)continue;const R=this[_];let D=null;D=typeof O=="function"?O(R):O==="reference"?R:GT(R),R!=null&&D==null||(k===Ft.DEFAULTS?d.set(_,D):l[_]=D)}const y=new(Object.getPrototypeOf(this)).constructor(l);if(d.size){const _=(v=zs(y))==null?void 0:v.store;if(_)for(const[M,k]of d)_.set(M,k,Ft.DEFAULTS)}return y}};return t=g([Q("esri.core.Clonable")],t),t};let eU=class extends ia(st){};eU=g([Q("esri.core.Clonable")],eU);let i0=class extends ia(Ve){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return K(e)&&e.placement===this.placement&&e.style===this.style&&(ce(this.color)&&ce(e.color)||K(this.color)&&K(e.color)&&this.color.toJSON()===e.color.toJSON())}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],i0.prototype,"type",void 0),g([S({type:mxe,json:{default:"begin-end",write:!0}})],i0.prototype,"placement",void 0),g([S({type:ree,json:{default:"arrow",write:!0}})],i0.prototype,"style",void 0),g([S({type:ot,json:{type:[Yi],default:null,write:!0}})],i0.prototype,"color",void 0),i0=g([Q("esri.symbols.LineStyleMarker3D")],i0);const mC=i0;var g9;let sc=g9=class extends Fc{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=bo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:K(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:K(this.pattern)?this.pattern.clone():null,marker:K(this.marker)?this.marker.clone():null};return new g9(e)}static fromSimpleLineSymbol(e){var i,r,s;const t={enabled:!0,size:(i=e.width)!=null?i:bo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new LP({style:e.style}):null,material:new Na({color:(e.color||Y2).clone()}),marker:e.marker?new mC({placement:e.marker.placement,style:e.marker.style,color:(s=(r=e.marker.color)==null?void 0:r.clone())!=null?s:null}):null};return new g9(t)}};g([S({type:Na,json:{write:!0}})],sc.prototype,"material",void 0),g([Mt({Line:"line"},{readOnly:!0})],sc.prototype,"type",void 0),g([S({type:uee,json:{write:!0,default:"miter"}})],sc.prototype,"join",void 0),g([S({type:RP,json:{write:!0,default:"butt"}})],sc.prototype,"cap",void 0),g([S(Pc)],sc.prototype,"size",void 0),g([S(lee)],sc.prototype,"pattern",void 0),g([S({types:{key:"type",base:mC,typeMap:{style:mC}},json:{write:!0}})],sc.prototype,"marker",void 0),sc=g9=g([Q("esri.symbols.LineSymbol3DLayer")],sc);const z3=sc;var gC;const t5e=_s()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let n2=gC=class extends Ve{clone(){return new gC({href:this.href,primitive:this.primitive})}};g([S({type:String,json:{read:NP,write:P1}})],n2.prototype,"href",void 0),g([Mt(t5e)],n2.prototype,"primitive",void 0),n2=gC=g([Q("esri.symbols.support.ObjectSymbol3DLayerResource")],n2);const i5e="sphere";var vC;let A0=vC=class extends st{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new vC({x:this.x,y:this.y,z:this.z})}};g([S({type:Number})],A0.prototype,"x",void 0),g([S({type:Number})],A0.prototype,"y",void 0),g([S({type:Number})],A0.prototype,"z",void 0),A0=vC=g([Q("esri.symbols.support.Symbol3DAnchorPosition3D")],A0);var wC;let Is=wC=class extends Fc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new wC({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:K(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};g([S({type:Na,json:{write:!0}})],Is.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Is.prototype,"castShadows",void 0),g([S({type:n2,json:{write:!0}})],Is.prototype,"resource",void 0),g([Mt({Object:"object"},{readOnly:!0})],Is.prototype,"type",void 0),g([S({type:Number,json:{write:!0}})],Is.prototype,"width",void 0),g([S({type:Number,json:{write:!0}})],Is.prototype,"height",void 0),g([S({type:Number,json:{write:!0}})],Is.prototype,"depth",void 0),g([Mt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],Is.prototype,"anchor",void 0),g([S({type:A0,json:{type:[Number],read:{reader:e=>new A0({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Is.prototype,"anchorPosition",void 0),g([S({type:Number,json:{write:!0}})],Is.prototype,"heading",void 0),g([S({type:Number,json:{write:!0}})],Is.prototype,"tilt",void 0),g([S({type:Number,json:{write:!0}})],Is.prototype,"roll",void 0),g([S({readOnly:!0})],Is.prototype,"isPrimitive",null),Is=wC=g([Q("esri.symbols.ObjectSymbol3DLayer")],Is);const FP=Is;var bC;let Xs=bC=class extends Fc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new bC({enabled:this.enabled,material:K(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};g([S({type:Na,json:{write:!0}})],Xs.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Xs.prototype,"castShadows",void 0),g([Mt({Path:"path"},{readOnly:!0})],Xs.prototype,"type",void 0),g([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],Xs.prototype,"profile",void 0),g([S({type:uee,json:{write:!0,default:"miter"}})],Xs.prototype,"join",void 0),g([S({type:Vxe,json:{write:!0,default:"butt"}})],Xs.prototype,"cap",void 0),g([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Xs.prototype,"width",void 0),g([nt("width",["width","size","height"])],Xs.prototype,"readWidth",null),g([S({type:Number,json:{write:!0}})],Xs.prototype,"height",void 0),g([nt("height",["height","size","width"])],Xs.prototype,"readHeight",null),g([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Xs.prototype,"anchor",void 0),g([S({type:["heading","all"],json:{write:!0,default:"all"}})],Xs.prototype,"profileRotation",void 0),Xs=bC=g([Q("esri.symbols.PathSymbol3DLayer")],Xs);const DP=Xs;var _C;let Bm=_C=class extends Ve{constructor(){super(...arguments),this.color=new ot([0,0,0,1]),this.size=0}clone(){const e={color:Me(this.color),size:this.size};return new _C(e)}};g([S(gf)],Bm.prototype,"color",void 0),g([S(Pc)],Bm.prototype,"size",void 0),Bm=_C=g([Q("esri.symbols.support.Symbol3DHalo")],Bm);let Q2=class extends ia(Ve){constructor(e){super(e),this.color=null}};g([S(gf)],Q2.prototype,"color",void 0),Q2=g([Q("esri.symbols.support.Symbol3DTextBackground")],Q2);var v9;let Ao=v9=class extends Fc{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){K(e)&&K(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s={...r,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){return K(this._userSize)?this._userSize:K(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,K(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new v9({enabled:this.enabled,font:this.font&&Me(this.font),halo:this.halo&&Me(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:K(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Me(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new v9({font:K(e.font)?e.font.clone():new D3,halo:r5e(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Na({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Q2({color:e.backgroundColor.clone()}):null})}};function r5e(e,t){return e&&t>0?new Bm({color:Me(e),size:t}):null}g([S({type:D3,json:{write:!0}})],Ao.prototype,"font",null),g([pt("font")],Ao.prototype,"writeFont",null),g([S({type:Bm,json:{write:!0}})],Ao.prototype,"halo",void 0),g([S({...hee,json:{default:"center",write:!0}})],Ao.prototype,"horizontalAlignment",void 0),g([S({...cee,json:{default:1,write:!0}})],Ao.prototype,"lineHeight",void 0),g([S({type:Na,json:{write:!0}})],Ao.prototype,"material",void 0),g([S({type:Q2,json:{write:!0}})],Ao.prototype,"background",void 0),g([S(Pc)],Ao.prototype,"size",null),g([S({type:String,json:{write:!0}})],Ao.prototype,"text",void 0),g([Mt({Text:"text"},{readOnly:!0})],Ao.prototype,"type",void 0),g([S({...pee,json:{default:"baseline",write:!0}})],Ao.prototype,"verticalAlignment",void 0),Ao=v9=g([Q("esri.symbols.TextSymbol3DLayer")],Ao);const wv=Ao;var xC;let Xp=xC=class extends Fc{constructor(e){super(e),this.color=SC.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new xC({color:Me(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};g([S({type:ot,nonNullable:!0,json:{type:[Yi],write:(e,t,i)=>t[i]=e.toArray(ot.AlphaMode.UNLESS_OPAQUE),default:()=>SC.clone(),defaultEquals:e=>e.toCss(!0)===SC.toCss(!0)}})],Xp.prototype,"color",void 0),g([Mt({Water:"water"},{readOnly:!0})],Xp.prototype,"type",void 0),g([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Xp.prototype,"waterbodySize",void 0),g([S({type:Number,json:{write:!0,default:null}})],Xp.prototype,"waveDirection",void 0),g([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Xp.prototype,"waveStrength",void 0),Xp=xC=g([Q("esri.symbols.WaterSymbol3DLayer")],Xp);const SC=new ot([0,119,190]),fee=Xp;var $C;let r0=$C=class extends st{constructor(){super(...arguments),this.portal=null}clone(){return new $C({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};g([S({type:String})],r0.prototype,"name",void 0),g([S({type:String})],r0.prototype,"styleUrl",void 0),g([S({type:String})],r0.prototype,"styleName",void 0),g([S({type:Bn})],r0.prototype,"portal",void 0),r0=$C=g([Q("esri.symbols.support.StyleOrigin")],r0);const i3=r0;var MC;let c1=MC=class extends st{clone(){return new MC({url:this.url})}};g([S({type:String})],c1.prototype,"url",void 0),c1=MC=g([Q("esri.symbols.support.Thumbnail")],c1);const yee={icon:H0,object:FP,line:z3,path:DP,fill:X6,extrude:iee,text:wv,water:fee},n5e=vt.ofType({base:Fc,key:"type",typeMap:yee,errorContext:"symbol-layer"}),s5e=Ke.getLogger("esri.symbols.Symbol3D");let oc=class extends ta{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||vt;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&s5e.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){T1(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=uf(e.styleUrl,i);return new i3({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new i3({portal:i&&i.portal||Bn.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new mo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let s=j3(e.styleUrl,r);Oa(s)&&(s=Il(s)),t.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!fX(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new mo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Fc||e&&yee[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};g([S({json:{read:!1,write:!1}})],oc.prototype,"color",null),g([S({type:n5e,nonNullable:!0,json:{write:!0}}),oi(iX)],oc.prototype,"symbolLayers",null),g([S({type:i3})],oc.prototype,"styleOrigin",void 0),g([nt("styleOrigin")],oc.prototype,"readStyleOrigin",null),g([pt("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],oc.prototype,"writeStyleOrigin",null),g([S({type:c1,json:{read:!1}})],oc.prototype,"thumbnail",void 0),g([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],oc.prototype,"type",void 0),oc=g([Q("esri.symbols.Symbol3D")],oc);const bv=oc;let s2=class extends Ve{constructor(e){super(e),this.visible=!0}clone(){}};g([S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],s2.prototype,"type",void 0),g([S({readOnly:!0})],s2.prototype,"visible",void 0),s2=g([Q("esri.symbols.callouts.Callout3D")],s2);const mee=s2;var EC;let w9=EC=class extends Ve{constructor(){super(...arguments),this.color=new ot("white")}clone(){return new EC({color:Me(this.color)})}};g([S(gf)],w9.prototype,"color",void 0),w9=EC=g([Q("esri.symbols.callouts.LineCallout3DBorder")],w9);const gee=w9;Object.freeze(Object.defineProperty({__proto__:null,default:gee},Symbol.toStringTag,{value:"Module"}));var TC;let Qp=TC=class extends mee{constructor(e){super(e),this.type="line",this.color=new ot([0,0,0,1]),this.size=bo(1),this.border=null}get visible(){return this.size>0&&K(this.color)&&this.color.a>0}clone(){return new TC({color:Me(this.color),size:this.size,border:Me(this.border)})}};g([Mt({line:"line"},{readOnly:!0})],Qp.prototype,"type",void 0),g([S(gf)],Qp.prototype,"color",void 0),g([S(Pc)],Qp.prototype,"size",void 0),g([S({type:gee,json:{write:!0}})],Qp.prototype,"border",void 0),g([S({readOnly:!0})],Qp.prototype,"visible",null),Qp=TC=g([Q("esri.symbols.callouts.LineCallout3D")],Qp);const o5e=Qp;function jP(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function vee(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!jP(e)}const wee={types:{key:"type",base:mee,typeMap:{line:o5e}},json:{write:!0}};var IC;let O0=IC=class extends Ve{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new IC({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};g([S(Pc)],O0.prototype,"screenLength",void 0),g([S({type:Number,json:{write:!0,default:0}})],O0.prototype,"minWorldLength",void 0),g([S({type:Number,json:{write:!0}})],O0.prototype,"maxWorldLength",void 0),O0=IC=g([Q("esri.symbols.support.Symbol3DVerticalOffset")],O0);var b9;const bee=vt.ofType({base:null,key:"type",typeMap:{text:wv}});let ed=b9=class extends bv{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new bee,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return vee(this)}hasVisibleVerticalOffset(){return jP(this)}clone(){return new b9({styleOrigin:Me(this.styleOrigin),symbolLayers:Me(this.symbolLayers),thumbnail:Me(this.thumbnail),callout:Me(this.callout),verticalOffset:Me(this.verticalOffset)})}static fromTextSymbol(e){return new b9({symbolLayers:[wv.fromTextSymbol(e)]})}};g([S({type:O0,json:{write:!0}})],ed.prototype,"verticalOffset",void 0),g([S(wee)],ed.prototype,"callout",void 0),g([S({json:{read:!1,write:!1}})],ed.prototype,"styleOrigin",void 0),g([S({type:bee})],ed.prototype,"symbolLayers",void 0),g([Mt({LabelSymbol3D:"label-3d"},{readOnly:!0})],ed.prototype,"type",void 0),ed=b9=g([Q("esri.symbols.LabelSymbol3D")],ed);const Q6=ed;var _9;const _ee=vt.ofType({base:null,key:"type",typeMap:{line:z3,path:DP}}),a5e=vt.ofType({base:null,key:"type",typeMap:{line:z3,path:DP}});let o2=_9=class extends bv{constructor(e){super(e),this.symbolLayers=new _ee,this.type="line-3d"}clone(){return new _9({styleOrigin:Me(this.styleOrigin),symbolLayers:Me(this.symbolLayers),thumbnail:Me(this.thumbnail)})}static fromSimpleLineSymbol(e){return new _9({symbolLayers:[z3.fromSimpleLineSymbol(e)]})}};g([S({type:_ee,json:{type:a5e}})],o2.prototype,"symbolLayers",void 0),g([Mt({LineSymbol3D:"line-3d"},{readOnly:!0})],o2.prototype,"type",void 0),o2=_9=g([Q("esri.symbols.LineSymbol3D")],o2);const e$=o2;let td=class extends ta{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};g([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],td.prototype,"angle",void 0),g([S({type:["simple-marker","picture-marker"],readOnly:!0})],td.prototype,"type",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],td.prototype,"xoffset",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],td.prototype,"yoffset",void 0),g([S({type:Number,cast:e=>e==="auto"?e:Si(e),json:{write:!0}})],td.prototype,"size",void 0),td=g([Q("esri.symbols.MarkerSymbol")],td);const xee=td;var CC;const See=vt.ofType({base:null,key:"type",typeMap:{fill:X6}});let a2=CC=class extends bv{constructor(e){super(e),this.symbolLayers=new See,this.type="mesh-3d"}clone(){return new CC({styleOrigin:Me(this.styleOrigin),symbolLayers:Me(this.symbolLayers),thumbnail:Me(this.thumbnail)})}};g([S({type:See})],a2.prototype,"symbolLayers",void 0),g([Mt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],a2.prototype,"type",void 0),a2=CC=g([Q("esri.symbols.MeshSymbol3D")],a2);const zP=a2;function l5e(e,t,i){return t.imageData?gX({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):$ee(t.url,i)}function $ee(e,t){return c5e(t)&&!Oa(e)&&t.layer.parsedUrl?I1(t.layer.parsedUrl.path,"images",e):uf(e,t)}function u5e(e,t,i,r){if(U1(e)){const s=mX(e);t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&P1(i.url,t,"url",r)}else P1(e,t,"url",r)}const Mee={json:{read:{source:["imageData","url"],reader:l5e},write:{writer(e,t,i,r){u5e(e,t,this.source,r)}}}},Eee={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=$ee(t.url,i)),r}}}};function c5e(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var kC;let ol=kC=class extends nee{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=Si(i)),r!=null&&(s.height=Si(r)),s}clone(){const e=new kC({color:Me(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",Me(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};g([Mt({esriPFS:"picture-fill"},{readOnly:!0})],ol.prototype,"type",void 0),g([S(Mee)],ol.prototype,"url",void 0),g([S({type:Number,json:{write:!0}})],ol.prototype,"xscale",void 0),g([S({type:Number,json:{write:!0}})],ol.prototype,"yscale",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"width",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"height",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"xoffset",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"yoffset",void 0),g([S(Eee)],ol.prototype,"source",void 0),ol=kC=g([Q("esri.symbols.PictureFillSymbol")],ol);const Tee=ol;var AC;let eu=AC=class extends xee{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=Si(t)),i!=null&&(r.height=Si(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new AC({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",Me(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};g([S({json:{write:!1}})],eu.prototype,"color",void 0),g([Mt({esriPMS:"picture-marker"},{readOnly:!0})],eu.prototype,"type",void 0),g([S(Mee)],eu.prototype,"url",void 0),g([S(Eee)],eu.prototype,"source",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],eu.prototype,"height",void 0),g([nt("height",["height","size"])],eu.prototype,"readHeight",null),g([S({type:Number,cast:Si,json:{write:!0}})],eu.prototype,"width",void 0),g([S({json:{write:!1}})],eu.prototype,"size",void 0),eu=AC=g([Q("esri.symbols.PictureMarkerSymbol")],eu);const V3=eu;var id;const Iee=vt.ofType({base:null,key:"type",typeMap:{icon:H0,object:FP,text:wv}});let n0=id=class extends bv{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Iee,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return vee(this)}hasVisibleVerticalOffset(){return jP(this)}clone(){return new id({verticalOffset:Me(this.verticalOffset),callout:Me(this.callout),styleOrigin:Me(this.styleOrigin),symbolLayers:Me(this.symbolLayers),thumbnail:Me(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new id({symbolLayers:[H0.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new id({symbolLayers:[H0.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var i,r;return((r=(i=e.data)==null?void 0:i.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new id({symbolLayers:[H0.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new id({symbolLayers:[H0.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new id({symbolLayers:[wv.fromTextSymbol(e)]})}};g([S({type:O0,json:{write:!0}})],n0.prototype,"verticalOffset",void 0),g([S(wee)],n0.prototype,"callout",void 0),g([S({type:Iee,json:{origins:{"web-scene":{write:!0}}}})],n0.prototype,"symbolLayers",void 0),g([Mt({PointSymbol3D:"point-3d"},{readOnly:!0})],n0.prototype,"type",void 0),n0=id=g([Q("esri.symbols.PointSymbol3D")],n0);const W0=n0;var l2;const Cee=vt.ofType({base:null,key:"type",typeMap:{extrude:iee,fill:X6,icon:H0,line:z3,object:FP,text:wv,water:fee}});let u2=l2=class extends bv{constructor(e){super(e),this.symbolLayers=new Cee,this.type="polygon-3d"}clone(){return new l2({styleOrigin:Me(this.styleOrigin),symbolLayers:Me(this.symbolLayers),thumbnail:Me(this.thumbnail)})}static fromJSON(e){const t=new l2;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:K(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new l2({symbolLayers:[X6.fromSimpleFillSymbol(e)]})}};g([S({type:Cee,json:{write:!0}})],u2.prototype,"symbolLayers",void 0),g([Mt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],u2.prototype,"type",void 0),u2=l2=g([Q("esri.symbols.PolygonSymbol3D")],u2);const U3=u2;var OC;const rE=new Dt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let s0=OC=class extends nee{constructor(...e){super(...e),this.color=new ot([0,0,0,.25]),this.outline=new $o,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new OC({color:Me(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};g([S()],s0.prototype,"color",void 0),g([S()],s0.prototype,"outline",void 0),g([Mt({esriSFS:"simple-fill"},{readOnly:!0})],s0.prototype,"type",void 0),g([S({type:rE.apiValues,json:{read:rE.read,write:rE.write}})],s0.prototype,"style",void 0),s0=OC=g([Q("esri.symbols.SimpleFillSymbol")],s0);const Dc=s0;var LC;const nE=new Dt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ac=LC=class extends xee{constructor(...e){super(...e),this.color=new ot([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new $o}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Si(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new LC({angle:this.angle,color:Me(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};g([S()],ac.prototype,"color",void 0),g([pt("color")],ac.prototype,"writeColor",null),g([Mt({esriSMS:"simple-marker"},{readOnly:!0})],ac.prototype,"type",void 0),g([S()],ac.prototype,"size",void 0),g([S({type:nE.apiValues,json:{read:nE.read,write:nE.write}})],ac.prototype,"style",void 0),g([S({type:String,json:{write:!0}})],ac.prototype,"path",null),g([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":$o}},json:{default:null,write:!0}})],ac.prototype,"outline",void 0),ac=LC=g([Q("esri.symbols.SimpleMarkerSymbol")],ac);const is=ac;var PC;let yr=PC=class extends ta{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new D3,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return Si(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new PC({angle:this.angle,backgroundColor:Me(this.backgroundColor),borderLineColor:Me(this.borderLineColor),borderLineSize:this.borderLineSize,color:Me(this.color),font:this.font&&this.font.clone(),haloColor:Me(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};g([S({type:ot,json:{write:!0}})],yr.prototype,"backgroundColor",void 0),g([S({type:ot,json:{write:!0}})],yr.prototype,"borderLineColor",void 0),g([S({type:Number,json:{write:!0}})],yr.prototype,"borderLineSize",void 0),g([S({type:D3,json:{write:!0}})],yr.prototype,"font",void 0),g([S({...hee,json:{write:!0}})],yr.prototype,"horizontalAlignment",void 0),g([S({type:Boolean,json:{write:!0}})],yr.prototype,"kerning",void 0),g([S({type:ot,json:{write:!0}})],yr.prototype,"haloColor",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],yr.prototype,"haloSize",void 0),g([S({type:Boolean,json:{write:!0}})],yr.prototype,"rightToLeft",void 0),g([S({type:Boolean,json:{write:!0}})],yr.prototype,"rotated",void 0),g([S({type:String,json:{write:!0}})],yr.prototype,"text",void 0),g([Mt({esriTS:"text"},{readOnly:!0})],yr.prototype,"type",void 0),g([S({...pee,json:{write:!0}})],yr.prototype,"verticalAlignment",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],yr.prototype,"xoffset",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],yr.prototype,"yoffset",void 0),g([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],yr.prototype,"angle",void 0),g([S({type:Number,json:{write:!0}})],yr.prototype,"width",void 0),g([S({type:Number})],yr.prototype,"lineWidth",void 0),g([pt("lineWidth")],yr.prototype,"writeLineWidth",null),g([oi("lineWidth")],yr.prototype,"castLineWidth",null),g([S(cee)],yr.prototype,"lineHeight",void 0),g([pt("lineHeight")],yr.prototype,"writeLineHeight",null),yr=PC=g([Q("esri.symbols.TextSymbol")],yr);const W1=yr;var RC;const h5e=Ke.getLogger("esri.symbols.WebStyleSymbol");let tu=RC=class extends ta{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=K(this.portal)?this.portal:Bn.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new RC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=K(t)?t.cache:null,r=i?this.fetchCacheKey:null;if(K(i)){const y=i.get(r);if(y)return y.clone()}const s=await p5e();ur(t);const l=s.resolveWebStyleSymbol(this,{portal:this.portal},e,t);l.catch(y=>{h5e.error("#fetchSymbol()","Failed to create symbol from style",y)});const d=await l;return e==="webRef"&&d.type==="point-3d"||e==="cimRef"&&d.type==="cim"?(K(i)&&i.set(r,d.clone()),d):null}};function p5e(){return Le(()=>Promise.resolve().then(()=>xDe),void 0,import.meta.url)}g([S({json:{write:!1}})],tu.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],tu.prototype,"styleName",void 0),g([S({type:Bn,json:{write:!1}})],tu.prototype,"portal",void 0),g([S({type:String,json:{read:NP,write:P1}})],tu.prototype,"styleUrl",void 0),g([S({type:c1,json:{read:!1}})],tu.prototype,"thumbnail",void 0),g([S({type:String,json:{write:!0}})],tu.prototype,"name",void 0),g([Mt({styleSymbolReference:"web-style"},{readOnly:!0})],tu.prototype,"type",void 0),g([S()],tu.prototype,"fetchCacheKey",null),tu=RC=g([Q("esri.symbols.WebStyleSymbol")],tu);const J1=tu;function t$(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Rc(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const h1={base:ta,key:"type",typeMap:{"simple-fill":Dc,"picture-fill":Tee,"picture-marker":V3,"simple-line":$o,"simple-marker":is,text:W1,"label-3d":Q6,"line-3d":e$,"mesh-3d":zP,"point-3d":W0,"polygon-3d":U3,"web-style":J1,cim:fp},errorContext:"symbol"},d5e={base:ta,key:"type",typeMap:{"picture-marker":V3,"simple-marker":is,text:W1,"web-style":J1,cim:fp},errorContext:"symbol"},f5e=pv({types:h1}),kee={base:ta,key:"type",typeMap:{"simple-fill":Dc,"picture-fill":Tee,"picture-marker":V3,"simple-line":$o,"simple-marker":is,text:W1,"line-3d":e$,"mesh-3d":zP,"point-3d":W0,"polygon-3d":U3,"web-style":J1,cim:fp},errorContext:"symbol"},y5e={base:ta,key:"type",typeMap:{text:W1,"label-3d":Q6},errorContext:"symbol"},tU={base:ta,key:"type",typeMap:{"line-3d":e$,"mesh-3d":zP,"point-3d":W0,"polygon-3d":U3,"web-style":J1,cim:fp},errorContext:"symbol"},m5e={base:ta,key:"type",typeMap:{"label-3d":Q6},errorContext:"symbol"},Aee=Oc(h1);function g5e(e){if(!e)return null;const t={};for(const i in e){const r=vo(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function v5e(e){if(!K(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Oo=class extends ia(Ve){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:H2(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&K(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:v5e(this.aggregateGeometries),geometry:K(this.geometry)?this.geometry.toJSON():null,symbol:K(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){K(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}};g([S({value:null,json:{read:g5e}})],Oo.prototype,"aggregateGeometries",null),g([S({value:null})],Oo.prototype,"attributes",null),g([S({value:null,types:G1,json:{read:vo}})],Oo.prototype,"geometry",null),g([S({type:Boolean})],Oo.prototype,"isAggregate",void 0),g([S({clonable:"reference"})],Oo.prototype,"layer",void 0),g([S({type:H1})],Oo.prototype,"popupTemplate",void 0),g([S({clonable:"reference"})],Oo.prototype,"sourceLayer",void 0),g([S({value:null,types:h1})],Oo.prototype,"symbol",null),g([S({type:Boolean,value:!0})],Oo.prototype,"visible",null),Oo=g([Q("esri.Graphic")],Oo),function(e){e.generateUID=H2}(Oo||(Oo={}));const pn=Oo;class VP{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,s=0,l=!1){return(r-=s)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),l&&r===i&&(r=t),r+s}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return Bs(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function UP(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}UP(new VP(0,2*Math.PI));UP(new VP(-Math.PI,Math.PI));const Oee=UP(new VP(0,360));let fh=class extends ia(Ve){constructor(...e){super(...e),this.position=new ut([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return t!=null&&(s.heading=t),i!=null&&(s.tilt=i),r!=null&&(s.fov=r),s}return e}writePosition(e,t,i,r){const s=e.clone();s.x=gl(e.x||0),s.y=gl(e.y||0),s.z=e.hasZ?gl(e.z||0):e.z,t[i]=s.write({},r)}readPosition(e,t){const i=new ut;return i.read(e,t),i.x=gl(i.x||0),i.y=gl(i.y||0),i.z=i.hasZ?gl(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};g([S({type:ut,json:{write:{isRequired:!0}}})],fh.prototype,"position",void 0),g([pt("position")],fh.prototype,"writePosition",null),g([nt("position")],fh.prototype,"readPosition",null),g([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),oi(e=>Oee.normalize(gl(e)))],fh.prototype,"heading",void 0),g([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),oi(e=>Bs(gl(e),-180,180))],fh.prototype,"tilt",void 0),g([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],fh.prototype,"fov",void 0),fh=g([Q("esri.Camera")],fh);const w5e=fh;var NC;let rd=NC=class extends Ve{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new NC({rotation:this.rotation,scale:this.scale,targetGeometry:K(this.targetGeometry)?this.targetGeometry.clone():null,camera:K(this.camera)?this.camera.clone():null})}};function sE(){return{enabled:!this.camera}}g([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:sE}}}}})],rd.prototype,"rotation",void 0),g([oi("rotation")],rd.prototype,"castRotation",null),g([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:sE}}}}})],rd.prototype,"scale",void 0),g([S({types:G1,json:{read:vo,write:!0,origins:{"web-scene":{read:vo,write:{overridePolicy:sE}}}}})],rd.prototype,"targetGeometry",void 0),g([S({type:w5e,json:{write:!0}})],rd.prototype,"camera",void 0),rd=NC=g([Q("esri.Viewpoint")],rd);const Lu=rd;class cS{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var fo;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(fo||(fo={}));let b5e=0;function Lee(){return b5e++}function _5e(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function hS(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function Pee(e,t,i,r){if(t.type===fo.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==fo.INVOKE&&t.type!==fo.RESPONSE)return void e.postMessage(t);let s;_5e(i)?(s=iU(i.transferList),t.data=i.result):(s=iU(r),t.data=i),s?e.postMessage(t,s):e.postMessage(t)}function r3(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function iU(e){if(!e||!e.length)return null;if(ke("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!x5e(i));return t.length?t:null}function x5e(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const S5e={statsWorker:()=>Le(()=>import("./statsWorker.005510c3.js"),["statsWorker.005510c3.js","quantizationUtils.d707a317.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js"],import.meta.url),geometryEngineWorker:()=>Le(()=>import("./geometryEngineWorker.0d215572.js"),["geometryEngineWorker.0d215572.js","geometryEngineJSON.58446c85.js","json.8bd707cf.js"],import.meta.url),CSVSourceWorker:()=>Le(()=>import("./CSVSourceWorker.d12b9582.js"),["CSVSourceWorker.d12b9582.js","json.8bd707cf.js","FeatureStore.f62a4d07.js","PooledRBush.a83f433a.js","centroid.d71a978e.js","projectionSupport.5ef1eff5.js","QueryEngine.89b7451c.js","QueryEngineResult.7ed77ff1.js","quantizationUtils.d707a317.js","WhereClause.bf01d283.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js","utils.3cf09243.js","timeSupport.d477cc56.js"],import.meta.url),EdgeProcessingWorker:()=>Le(()=>import("./EdgeProcessingWorker.a66a6422.js"),["EdgeProcessingWorker.a66a6422.js","deduplicate.f083e52b.js","InterleavedLayout.dbee1542.js","BufferView.cd94a44a.js","types.5f4a0b28.js","VertexAttribute.c697ed2b.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js"],import.meta.url),ElevationSamplerWorker:()=>Le(()=>import("./ElevationSamplerWorker.7f5d1f5d.js"),["ElevationSamplerWorker.7f5d1f5d.js","PooledRBush.a83f433a.js","georeference.eabddf8f.js","BufferView.cd94a44a.js","vec33.44d99a37.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>Le(()=>import("./FeatureServiceSnappingSourceWorker.e2369236.js"),["FeatureServiceSnappingSourceWorker.e2369236.js","FeatureStore.f62a4d07.js","PooledRBush.a83f433a.js","centroid.d71a978e.js","QueryEngine.89b7451c.js","QueryEngineResult.7ed77ff1.js","quantizationUtils.d707a317.js","WhereClause.bf01d283.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","utils.3cf09243.js","timeSupport.d477cc56.js"],import.meta.url),GeoJSONSourceWorker:()=>Le(()=>import("./GeoJSONSourceWorker.e98bae79.js"),["GeoJSONSourceWorker.e98bae79.js","FeatureStore.f62a4d07.js","PooledRBush.a83f433a.js","centroid.d71a978e.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","QueryEngine.89b7451c.js","QueryEngineResult.7ed77ff1.js","quantizationUtils.d707a317.js","WhereClause.bf01d283.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js","utils.3cf09243.js","timeSupport.d477cc56.js","geojson.2649e75e.js","sourceUtils.a7defd80.js"],import.meta.url),LercWorker:()=>Le(()=>import("./LercWorker.105edf23.js"),[],import.meta.url),MemorySourceWorker:()=>Le(()=>import("./MemorySourceWorker.412db94c.js"),["MemorySourceWorker.412db94c.js","objectIdUtils.5d771dff.js","FeatureStore.f62a4d07.js","PooledRBush.a83f433a.js","centroid.d71a978e.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","QueryEngine.89b7451c.js","QueryEngineResult.7ed77ff1.js","quantizationUtils.d707a317.js","WhereClause.bf01d283.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js","utils.3cf09243.js","timeSupport.d477cc56.js","sourceUtils.a7defd80.js"],import.meta.url),PBFDecoderWorker:()=>Le(()=>import("./PBFDecoderWorker.caa60721.js"),[],import.meta.url),Pipeline:()=>Le(()=>import("./Pipeline.02d02be1.js"),["Pipeline.02d02be1.js","QueryEngine.89b7451c.js","QueryEngineResult.7ed77ff1.js","quantizationUtils.d707a317.js","WhereClause.bf01d283.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","utils.3cf09243.js","timeSupport.d477cc56.js","FeatureStore2D.7e7192ea.js","CircularArray.0ec22ba2.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","definitions.a48e52ac.js","visualVariablesUtils.eb44e100.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","visualVariablesUtils.4ccb186b.js","ogcFeatureUtils.e01e26b4.js","geojson.2649e75e.js"],import.meta.url),PointCloudWorker:()=>Le(()=>import("./PointCloudWorker.260c1229.js"),["PointCloudWorker.260c1229.js","vec3f32.ca7a14c1.js","PointCloudUniqueValueRenderer.9d058421.js","VertexAttribute.c697ed2b.js"],import.meta.url),RasterWorker:()=>Le(()=>import("./RasterWorker.d5238a38.js"),["RasterWorker.d5238a38.js","pixelUtils.0c287117.js","RasterSymbolizer.620213af.js","rasterProjectionHelper.a859f5db.js","dataUtils.e27a69a1.js","utils.0612b2b8.js"],import.meta.url),SceneLayerSnappingSourceWorker:()=>Le(()=>import("./SceneLayerSnappingSourceWorker.86b95297.js"),["SceneLayerSnappingSourceWorker.86b95297.js","QueryEngineResult.7ed77ff1.js","quantizationUtils.d707a317.js","WhereClause.bf01d283.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","utils.3cf09243.js","EdgeProcessingWorker.a66a6422.js","deduplicate.f083e52b.js","InterleavedLayout.dbee1542.js","BufferView.cd94a44a.js","types.5f4a0b28.js","VertexAttribute.c697ed2b.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js"],import.meta.url),SceneLayerWorker:()=>Le(()=>import("./SceneLayerWorker.fe7439f9.js"),[],import.meta.url),WFSSourceWorker:()=>Le(()=>import("./WFSSourceWorker.87a71805.js"),["WFSSourceWorker.87a71805.js","FeatureStore.f62a4d07.js","PooledRBush.a83f433a.js","centroid.d71a978e.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","QueryEngine.89b7451c.js","QueryEngineResult.7ed77ff1.js","quantizationUtils.d707a317.js","WhereClause.bf01d283.js","utils.af49be5e.js","ClassBreaksDefinition.c9b8718c.js","utils.3cf09243.js","timeSupport.d477cc56.js","geojson.2649e75e.js","sourceUtils.a7defd80.js","wfsUtils.26f56cdf.js","xmlUtils.fe1322c5.js"],import.meta.url),WorkerTileHandler:()=>Le(()=>import("./WorkerTileHandler.086f6c32.js"),["WorkerTileHandler.086f6c32.js","enums.58eeda20.js","GeometryUtils.f3664fe1.js","BidiEngine.95523203.js","config.ded6d251.js","StyleDefinition.f1dd8ba9.js","Geometry.f2d62961.js","TileClipper.46fbd347.js","definitions.a48e52ac.js","GeometryUtils.b4d0dc88.js","StyleRepository.bc0efb0e.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js"],import.meta.url)},{CLOSE:rU,ABORT:nU,INVOKE:sU,RESPONSE:fw,OPEN_PORT:oU,ON:$5e}=fo,M5e=2;class E5e{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===fo.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Bo{constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new E5e(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Bo(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),Bo.clients.set(s,r),i.port2}static loadWorker(t){const i=S5e[t];return i?i():Promise.resolve(null)}close(){this._post({type:rU}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const s=r&&r.signal,l=r&&r.transferList;if(!this._port)return Promise.reject(new ge("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const d=Lee();return new Promise((y,v)=>{if(Du(s))return this._processWork(),void v(Cr());const _=Ll(s,()=>{const k=this._outJobs.get(d);k&&(this._outJobs.delete(d),this._processWork(),po(k.abortHandle),this._post({type:nU,jobId:d}),v(Cr()))}),M={resolve:y,reject:v,abortHandle:_,debugInfo:t};this._outJobs.set(d,M),this._post({type:sU,jobId:d,methodName:t,abortable:s!=null},i,l)})}on(t,i){const r=new MessageChannel;function s(l){i(l.data)}return this._port.postMessage({type:fo.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:fo.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:oU,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=M5e)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:s,deferred:l}=t;this.invoke(i,r,s).then(d=>l.resolve(d)).catch(d=>l.reject(d))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{po(t.abortHandle),t.reject(Cr(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){K(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=r3(t);if(i)switch(i.type){case fw:this._onResponseMessage(i);break;case sU:this._invokeQueue.push(i);break;case nU:this._onAbortMessage(i);break;case rU:this._onCloseMessage();break;case oU:this._onOpenPortMessage(i);break;case $5e:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Bo.clients.get(this)===t&&t.destroy(),Bo.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:l}=t,d=l?new AbortController:null,y=this._inJobs;let v,_=this._client,M=_[i];try{if(!M&&i&&i.includes(".")){const k=i.split(".");for(let O=0;O<k.length-1;O++)_=_[k[O]],M=_[k[O+1]]}if(typeof M!="function")throw new TypeError(`${i} is not a function`);v=M.call(_,s,{client:this,signal:d?d.signal:null})}catch(k){return void this._post({type:fw,jobId:r,error:hS(k)})}dp(v)?(y.set(r,{controller:d,promise:v}),v.then(k=>{y.has(r)&&(y.delete(r),this._post({type:fw,jobId:r},k))},k=>{y.has(r)&&(y.delete(r),Vs(k)||this._post({type:fw,jobId:r,error:hS(k||{message:`Error encountered at method ${i}`})}))})):this._post({type:fw,jobId:r},v)}_onOpenPortMessage(t){new Bo(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,l=>{i.postMessage(l)}),s=O6(t.port,"message",l=>{r3(l).type===fo.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,l=this._outJobs;if(!l.has(i))return;const d=l.get(i);this._processWork(),l.delete(i),po(d.abortHandle),r?d.reject(ge.fromJSON(JSON.parse(r))):d.resolve(s)}_post(t,i,r){return Pee(this._port,t,i,r)}}Bo.kernelInfo={revision:SX,version:$X,buildDate:xX},Bo.clients=new Map;const T5e=Ke.getLogger("esri.core.workers.Connection");class I5e{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new cS}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,s)=>{let l=!0;const d=y=>{ur(i.signal),l&&(l=!1,y())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let y=0;y<t.length;++y){const v=t[y];dp(v)?this._clientPromises[y]=v.then(_=>(this._clients[y]=new Bo(_,i,()=>this._ongoingJobsQueue.pop()),d(r),this._clients[y]),()=>(d(s),null)):(this._clients[y]=new Bo(v,i,()=>this._ongoingJobsQueue.pop()),this._clientPromises[y]=Promise.resolve(this._clients[y]),d(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let l=0;l<this._clientPromises.length;++l){const d=this._clientPromises[l];s[l]=d.then(y=>y.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(Cr(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let s=null;Array.isArray(r)?(T5e.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r;const l=sp();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:s,deferred:l});for(let d=0;d<this._clientPromises.length;d++){const y=this._clients[d];y?y.jobAdded():this._clientPromises[d].then(v=>v.jobAdded())}return l.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>I3(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(l=>{i[s]=l.openPort(),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const Ree=Ke.getLogger("esri.intl");function pl(e,t,i={}){const{format:r={}}=i;return Ac(e,s=>C5e(s,t,r))}function C5e(e,t,i){let r,s;const l=e.indexOf(":");if(l===-1?r=e.trim():(r=e.slice(0,l).trim(),s=e.slice(l+1).trim()),!r)return"";const d=uv(r,t);if(d==null)return"";const y=i[s]||i[r];return y?k5e(d,y):s?A5e(d,s):BP(d)}function k5e(e,t){switch(t.type){case"date":return ap(e,t.intlOptions);case"number":return fs(e,t.intlOptions);default:return Ree.warn("missing format descriptor for key {key}"),BP(e)}}function A5e(e,t){switch(t.toLowerCase()){case"dateformat":return ap(e);case"numberformat":return fs(e);default:return Ree.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?ap(e):/^numberformat/i.test(t)?fs(e):BP(e)}}function BP(e){switch(typeof e){case"string":return e;case"number":return fs(e);case"boolean":return""+e;default:return e instanceof Date?ap(e):""}}async function O5e(e,t,i,r){const s=t.exec(i);if(!s)throw new ge("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const l=s[1]?`${s[1]}/`:"",d=s[2],y=vbe(r),v=`${l}${d}.json`,_=y?`${l}${d}_${y}.json`:v;let M;try{M=await aU(e(_))}catch(k){if(_===v)throw new ge("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:k});try{M=await aU(e(v))}catch(O){throw new ge("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:O})}}return M}async function aU(e){if(K(lU.fetchBundleAsset))return lU.fetchBundleAsset(e);const t=await Bi(e,{responseType:"text"});return JSON.parse(t.data)}class L5e{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?l=>new URL(l,new URL(r,window.location.href)).href:r instanceof URL?l=>new URL(l,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return O5e(this.getAssetUrl,this.matcher,t,i)}}function P5e(e){return new L5e(e)}const lU={};gbe(P5e({pattern:"esri/",location:li}));const uU={};function R5e(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function N5e(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=uU.baseUrl),(i=uU.packages)==null||i.forEach(r=>{R5e(t.packages,r)}),t}class F5e{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class x9{constructor(){this._dispatcher=new F5e,this._workerPostMessage({type:fo.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Lg(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){Lg(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=r3(t);if(i&&i.type===fo.OPEN){const{modulePath:r,jobId:s}=i;let l=await Bo.loadWorker(r);l||(l=await Le(()=>import(r),[],import.meta.url));const d=Bo.connect(l);this._workerPostMessage({type:fo.OPENED,jobId:s,data:d})}}}const FC=Ke.getLogger("esri.core.workers"),{HANDSHAKE:D5e}=fo,j5e='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Cx,kx;const cU="Failed to create Worker. Fallback to execute module in main thread";async function z5e(){if(!ke("esri-workers")||(ke("mozilla"),0))return hU(new x9);if(!Cx&&!kx)try{const t=j5e.replace('"{CONFIGURATION}"',`'${V5e()}'`);Cx=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){kx=t||{}}let e;if(Cx)try{e=new Worker(Cx,{name:"esri-worker-"+U5e++})}catch{FC.warn(cU,kx),e=new x9}else FC.warn(cU,kx),e=new x9;return hU(e)}async function hU(e){return new Promise(t=>{function i(s){const l=r3(s);l&&l.type===D5e&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),FC.warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new x9).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function V5e(){let e;if(hi.default!=null){const s={...hi};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(hi));e.assetsPath=Mu(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Pa(),e.has={"esri-csp-restrictions":ke("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ke("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":ke("esri-2d-query-centroid-enabled"),"featurelayer-pbf":ke("featurelayer-pbf"),"featurelayer-simplify-thresholds":ke("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ke("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ke("featurelayer-simplify-mobile-factor"),"esri-atomics":ke("esri-atomics"),"esri-shared-array-buffer":ke("esri-shared-array-buffer"),"esri-tiles-debug":ke("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ke("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ke("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Mu(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Mu(e.workers.workerPath):e.workers.workerPath=Mu(li("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=hi.workers.loaderConfig,i=N5e({baseUrl:t==null?void 0:t.baseUrl,locale:Pa(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),r={version:$X,buildDate:xX,revision:SX};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let U5e=0;const B5e=Ke.getLogger("esri.core.workers"),{ABORT:pU,INVOKE:G5e,OPEN:q5e,OPENED:H5e,RESPONSE:yw}=fo;class GP{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),B5e.error(r)})}static async create(t){const i=await z5e();return new GP(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=Lee();return new Promise((l,d)=>{const y={resolve:l,reject:d,abortHandle:jL(r,()=>{this._outJobs.delete(s),this._post({type:pU,jobId:s})})};this._outJobs.set(s,y),this._post({type:q5e,jobId:s,modulePath:t})})}_onMessage(t){const i=r3(t);if(i)switch(i.type){case H5e:this._onOpenedMessage(i);break;case yw:this._onResponseMessage(i);break;case pU:this._onAbortMessage(i);break;case G5e:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:l}=t,d=l?new AbortController:null,y=this._inJobs,v=b2e[i];let _;try{if(typeof v!="function")throw new TypeError(`${i} is not a function`);_=v.call(null,s,{signal:d?d.signal:null})}catch(M){return void this._post({type:yw,jobId:r,error:hS(M)})}dp(_)?(y.set(r,{controller:d,promise:_}),_.then(M=>{y.has(r)&&(y.delete(r),this._post({type:yw,jobId:r},M))},M=>{y.has(r)&&(y.delete(r),M||(M={message:"Error encountered at method"+i}),Vs(M)||this._post({type:yw,jobId:r,error:hS(M||{message:`Error encountered at method ${i}`})}))})):this._post({type:yw,jobId:r},_)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),po(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,l=this._outJobs.get(i);l&&(this._outJobs.delete(i),po(l.abortHandle),r?l.reject(ge.fromJSON(JSON.parse(r))):l.resolve(s))}_post(t,i,r){return Pee(this.worker,t,i,r)}}let J0=ke("esri-workers-debug")?1:ke("host-browser")?navigator.hardwareConcurrency-1:0;J0||(J0=ke("safari")&&ke("mac")||ke("trident")?7:2);let dU=0;const S9=[];function W5e(){Fee()}async function Ax(e,t){const i=new I5e;return await i.open(e,t),i}async function Nee(e,t={}){if(typeof e!="string")throw new ge("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(ke("host-webworker")&&!ke("esri-workers")&&(i="local"),i==="local"){let r=await Bo.loadWorker(e);r||(r=await Le(()=>import(e),[],import.meta.url)),ur(t.signal);const s=t.client||r;return Ax([Bo.connect(r)],{...t,client:s})}if(await Fee(),ur(t.signal),i==="dedicated"){const r=dU++%J0;return Ax([await S9[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,J0);if(r<J0){const s=new Array(r);for(let l=0;l<r;++l){const d=dU++%J0;s[l]=S9[d].open(e,t)}return Ax(s,t)}}return Ax(S9.map(r=>r.open(e,t)),t)}let Ox=null;async function Fee(){if(Ox)return Ox;new AbortController;const e=[];for(let t=0;t<J0;t++){const i=GP.create(t).then(r=>(S9[t]=r,r));e.push(i)}return Ox=Promise.all(e),Ox}function qP(e){return new Ct({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const HP=qP(tr),pS=qP(Hh),dS=qP(lf),Dee=new Ct({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${tr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function J5e(e){return e&&(fv(e)||e===pS)?pS:e&&(yv(e)||e===dS)?dS:HP}function K5e(e){return e&&(fv(e)||e===pS)?Hh:e&&(yv(e)||e===dS)?lf:tr}function hJe(e){return rP(e)?Hh:nP(e)?lf:tr}const pJe=39.37,Z5e=tr.radius*Math.PI/200,jee=/UNIT\[([^\]]+)\]\]$/i,p1=te,zee=/UNIT\[([^\]]+)\]/i,Y5e=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),X5e=_s()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Zu=e=>e*e,Lp=e=>e*e*e,n3={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Zu(.001)},"square-centimeters":{inBaseUnits:Zu(.01)},"square-decimeters":{inBaseUnits:Zu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Zu(1e3)},"square-inches":{inBaseUnits:Zu(.0254)},"square-feet":{inBaseUnits:Zu(.3048)},"square-yards":{inBaseUnits:Zu(.9144)},"square-miles":{inBaseUnits:Zu(1609.344)},"square-us-feet":{inBaseUnits:Zu(1200/3937)},acres:{inBaseUnits:.0015625*Zu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Lp(.001)},"cubic-centimeters":{inBaseUnits:1e3*Lp(.01)},"cubic-decimeters":{inBaseUnits:1e3*Lp(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Lp(1e3)},"cubic-inches":{inBaseUnits:1e3*Lp(.0254)},"cubic-feet":{inBaseUnits:1e3*Lp(.3048)},"cubic-yards":{inBaseUnits:1e3*Lp(.9144)},"cubic-miles":{inBaseUnits:1e3*Lp(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Q5e=(()=>{const e={};for(const t in n3)for(const i in n3[t].units)e[i]=t;return e})();function e9e(e,t,i){return e*n3[i].units[t].inBaseUnits}function t9e(e,t,i){return e/n3[i].units[t].inBaseUnits}const $9=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],i9e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function r9e(e){return e==="imperial"||e==="metric"}function Gg(e){const t=Q5e[e];if(!t)throw new Error("unknown type");return t}function fU(e,t=null){return t=t||Gg(e),n3[t].baseUnit===e}function xi(e,t,i){if(t===i)return e;const r=Gg(t);if(r!==Gg(i))throw new Error("incompatible units");const s=fU(t,r)?e:e9e(e,t,r);return fU(i,r)?s:t9e(s,i,r)}function Vee(e,t){const i=xi(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Uee(e,t){const i=xi(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Bee(e,t){const i=xi(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Gee(e,t){const i=xi(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function n9e(e,t){const i=xi(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function s9e(e,t){const i=xi(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function o9e(e,t,i){return xi(e,t,"meters")/(i*Math.PI/180)}function qee(e){return X5e.fromJSON(e.toLowerCase())||null}function R1(e){if(e&&typeof e=="object"&&!f2e(e))return 1;const t=cf(e);return t>1e5?1:t}function a9e(e){return cf(e)>=(e instanceof Ct?K5e(e).metersPerDegree:1e5)?"meters":i$(e)}function cf(e,t=tr.metersPerDegree){return hn(l9e(e,!0),t)}function l9e(e,t=!1){let i,r,s=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,r=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(r=e)),i){if(rP(i))return Hh.metersPerDegree;if(nP(i))return lf.metersPerDegree;s=p1.values[p1[i]],!s&&t&&Y5e.has(i)&&(s=Z5e)}else r&&(Kee(r)?s=yU(jee.exec(r),s):Jee(r)&&(s=yU(zee.exec(r),s)));return s}function yU(e,t){return e&&e[1]?Hee(e[1]):t}function Hee(e){return parseFloat(e.split(",")[1])}function i$(e){let t,i,r=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)r=p1.units[p1[t]];else if(i){const s=Kee(i)?jee:Jee(i)?zee:null;if(s){const l=s.exec(i);l&&l[1]&&(r=h9e(l[1]))}}return K(r)?qee(r):null}function Wee(e){const t=i$(e);return ce(t)||!$9.includes(t)?null:t}function u9e(e){const t=i$(e);return ce(t)?null:i9e.get(t)}function Jee(e){return/^GEOCCS/i.test(e)}function Kee(e){return/^PROJCS/i.test(e)}const c9e=1e-7;function h9e(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!p1.units.includes(i)){const r=Hee(e);i=null;const s=p1.values;for(let l=0;l<s.length;++l)if(Math.abs(r-s[l])<c9e){i=p1.units[l];break}}return i}function p9e(e){const t=i$(e);if(ce(t))return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}function Zee(e){var s,l,d;const t="metric";if(ce(e))return t;const i=e.map,r=i&&"portalItem"in i?(s=i.portalItem)==null?void 0:s.portal:null;if(r)switch((d=(l=r==null?void 0:r.user)==null?void 0:l.units)!=null?d:r.units){case t:return t;case"english":return"imperial"}return hn(p9e(e.spatialReference),t)}const Yee={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Xee={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},d9e=_s()(Yee),f9e=_s()(Xee);_s()({...Yee,...Xee});function y9e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vf(e,t,i,r,s,l,d,y,v,_,M,k,O,R,D,z,B){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=d,e[6]=y,e[7]=v,e[8]=_,e[9]=M,e[10]=k,e[11]=O,e[12]=R,e[13]=D,e[14]=z,e[15]=B,e}function WP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yp(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],l=t[6],d=t[7],y=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=l,e[11]=t[14],e[12]=s,e[13]=d,e[14]=y}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function m9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],y=t[5],v=t[6],_=t[7],M=t[8],k=t[9],O=t[10],R=t[11],D=t[12],z=t[13],B=t[14],V=t[15],q=i*y-r*d,J=i*v-s*d,ne=i*_-l*d,re=r*v-s*y,ue=r*_-l*y,_e=s*_-l*v,xe=M*z-k*D,Ne=M*B-O*D,Ce=M*V-R*D,Ge=k*B-O*z,Ze=k*V-R*z,lt=O*V-R*B;let et=q*lt-J*Ze+ne*Ge+re*Ce-ue*Ne+_e*xe;return et?(et=1/et,e[0]=(y*lt-v*Ze+_*Ge)*et,e[1]=(s*Ze-r*lt-l*Ge)*et,e[2]=(z*_e-B*ue+V*re)*et,e[3]=(O*ue-k*_e-R*re)*et,e[4]=(v*Ce-d*lt-_*Ne)*et,e[5]=(i*lt-s*Ce+l*Ne)*et,e[6]=(B*ne-D*_e-V*J)*et,e[7]=(M*_e-O*ne+R*J)*et,e[8]=(d*Ze-y*Ce+_*xe)*et,e[9]=(r*Ce-i*Ze-l*xe)*et,e[10]=(D*ue-z*ne+V*q)*et,e[11]=(k*ne-M*ue-R*q)*et,e[12]=(y*Ne-d*Ge-v*xe)*et,e[13]=(i*Ge-r*Ne+s*xe)*et,e[14]=(z*J-D*re-B*q)*et,e[15]=(M*re-k*J+O*q)*et,e):null}function g9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],y=t[5],v=t[6],_=t[7],M=t[8],k=t[9],O=t[10],R=t[11],D=t[12],z=t[13],B=t[14],V=t[15];return e[0]=y*(O*V-R*B)-k*(v*V-_*B)+z*(v*R-_*O),e[1]=-(r*(O*V-R*B)-k*(s*V-l*B)+z*(s*R-l*O)),e[2]=r*(v*V-_*B)-y*(s*V-l*B)+z*(s*_-l*v),e[3]=-(r*(v*R-_*O)-y*(s*R-l*O)+k*(s*_-l*v)),e[4]=-(d*(O*V-R*B)-M*(v*V-_*B)+D*(v*R-_*O)),e[5]=i*(O*V-R*B)-M*(s*V-l*B)+D*(s*R-l*O),e[6]=-(i*(v*V-_*B)-d*(s*V-l*B)+D*(s*_-l*v)),e[7]=i*(v*R-_*O)-d*(s*R-l*O)+M*(s*_-l*v),e[8]=d*(k*V-R*z)-M*(y*V-_*z)+D*(y*R-_*k),e[9]=-(i*(k*V-R*z)-M*(r*V-l*z)+D*(r*R-l*k)),e[10]=i*(y*V-_*z)-d*(r*V-l*z)+D*(r*_-l*y),e[11]=-(i*(y*R-_*k)-d*(r*R-l*k)+M*(r*_-l*y)),e[12]=-(d*(k*B-O*z)-M*(y*B-v*z)+D*(y*O-v*k)),e[13]=i*(k*B-O*z)-M*(r*B-s*z)+D*(r*O-s*k),e[14]=-(i*(y*B-v*z)-d*(r*B-s*z)+D*(r*v-s*y)),e[15]=i*(y*O-v*k)-d*(r*O-s*k)+M*(r*v-s*y),e}function v9e(e){const t=e[0],i=e[1],r=e[2],s=e[3],l=e[4],d=e[5],y=e[6],v=e[7],_=e[8],M=e[9],k=e[10],O=e[11],R=e[12],D=e[13],z=e[14],B=e[15];return(t*d-i*l)*(k*B-O*z)-(t*y-r*l)*(M*B-O*D)+(t*v-s*l)*(M*z-k*D)+(i*y-r*d)*(_*B-O*R)-(i*v-s*d)*(_*z-k*R)+(r*v-s*y)*(_*D-M*R)}function Qee(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],k=t[8],O=t[9],R=t[10],D=t[11],z=t[12],B=t[13],V=t[14],q=t[15];let J=i[0],ne=i[1],re=i[2],ue=i[3];return e[0]=J*r+ne*y+re*k+ue*z,e[1]=J*s+ne*v+re*O+ue*B,e[2]=J*l+ne*_+re*R+ue*V,e[3]=J*d+ne*M+re*D+ue*q,J=i[4],ne=i[5],re=i[6],ue=i[7],e[4]=J*r+ne*y+re*k+ue*z,e[5]=J*s+ne*v+re*O+ue*B,e[6]=J*l+ne*_+re*R+ue*V,e[7]=J*d+ne*M+re*D+ue*q,J=i[8],ne=i[9],re=i[10],ue=i[11],e[8]=J*r+ne*y+re*k+ue*z,e[9]=J*s+ne*v+re*O+ue*B,e[10]=J*l+ne*_+re*R+ue*V,e[11]=J*d+ne*M+re*D+ue*q,J=i[12],ne=i[13],re=i[14],ue=i[15],e[12]=J*r+ne*y+re*k+ue*z,e[13]=J*s+ne*v+re*O+ue*B,e[14]=J*l+ne*_+re*R+ue*V,e[15]=J*d+ne*M+re*D+ue*q,e}function w9e(e,t,i){const r=i[0],s=i[1],l=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*l+t[12],e[13]=t[1]*r+t[5]*s+t[9]*l+t[13],e[14]=t[2]*r+t[6]*s+t[10]*l+t[14],e[15]=t[3]*r+t[7]*s+t[11]*l+t[15];else{const d=t[0],y=t[1],v=t[2],_=t[3],M=t[4],k=t[5],O=t[6],R=t[7],D=t[8],z=t[9],B=t[10],V=t[11];e[0]=d,e[1]=y,e[2]=v,e[3]=_,e[4]=M,e[5]=k,e[6]=O,e[7]=R,e[8]=D,e[9]=z,e[10]=B,e[11]=V,e[12]=d*r+M*s+D*l+t[12],e[13]=y*r+k*s+z*l+t[13],e[14]=v*r+O*s+B*l+t[14],e[15]=_*r+R*s+V*l+t[15]}return e}function b9e(e,t,i){const r=i[0],s=i[1],l=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*l,e[9]=t[9]*l,e[10]=t[10]*l,e[11]=t[11]*l,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function _9e(e,t,i,r){let s,l,d,y,v,_,M,k,O,R,D,z,B,V,q,J,ne,re,ue,_e,xe,Ne,Ce,Ge,Ze=r[0],lt=r[1],et=r[2],zt=Math.sqrt(Ze*Ze+lt*lt+et*et);return zt<Ot?null:(zt=1/zt,Ze*=zt,lt*=zt,et*=zt,s=Math.sin(i),l=Math.cos(i),d=1-l,y=t[0],v=t[1],_=t[2],M=t[3],k=t[4],O=t[5],R=t[6],D=t[7],z=t[8],B=t[9],V=t[10],q=t[11],J=Ze*Ze*d+l,ne=lt*Ze*d+et*s,re=et*Ze*d-lt*s,ue=Ze*lt*d-et*s,_e=lt*lt*d+l,xe=et*lt*d+Ze*s,Ne=Ze*et*d+lt*s,Ce=lt*et*d-Ze*s,Ge=et*et*d+l,e[0]=y*J+k*ne+z*re,e[1]=v*J+O*ne+B*re,e[2]=_*J+R*ne+V*re,e[3]=M*J+D*ne+q*re,e[4]=y*ue+k*_e+z*xe,e[5]=v*ue+O*_e+B*xe,e[6]=_*ue+R*_e+V*xe,e[7]=M*ue+D*_e+q*xe,e[8]=y*Ne+k*Ce+z*Ge,e[9]=v*Ne+O*Ce+B*Ge,e[10]=_*Ne+R*Ce+V*Ge,e[11]=M*Ne+D*Ce+q*Ge,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function x9e(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[4],d=t[5],y=t[6],v=t[7],_=t[8],M=t[9],k=t[10],O=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=l*s+_*r,e[5]=d*s+M*r,e[6]=y*s+k*r,e[7]=v*s+O*r,e[8]=_*s-l*r,e[9]=M*s-d*r,e[10]=k*s-y*r,e[11]=O*s-v*r,e}function S9e(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[0],d=t[1],y=t[2],v=t[3],_=t[8],M=t[9],k=t[10],O=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s-_*r,e[1]=d*s-M*r,e[2]=y*s-k*r,e[3]=v*s-O*r,e[8]=l*r+_*s,e[9]=d*r+M*s,e[10]=y*r+k*s,e[11]=v*r+O*s,e}function $9e(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[0],d=t[1],y=t[2],v=t[3],_=t[4],M=t[5],k=t[6],O=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s+_*r,e[1]=d*s+M*r,e[2]=y*s+k*r,e[3]=v*s+O*r,e[4]=_*s-l*r,e[5]=M*s-d*r,e[6]=k*s-y*r,e[7]=O*s-v*r,e}function ete(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function M9e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tte(e,t,i){let r,s,l,d=i[0],y=i[1],v=i[2],_=Math.sqrt(d*d+y*y+v*v);return _<Ot?null:(_=1/_,d*=_,y*=_,v*=_,r=Math.sin(t),s=Math.cos(t),l=1-s,e[0]=d*d*l+s,e[1]=y*d*l+v*r,e[2]=v*d*l-y*r,e[3]=0,e[4]=d*y*l-v*r,e[5]=y*y*l+s,e[6]=v*y*l+d*r,e[7]=0,e[8]=d*v*l+y*r,e[9]=y*v*l-d*r,e[10]=v*v*l+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function E9e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T9e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function I9e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ite(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=r+r,v=s+s,_=l+l,M=r*y,k=r*v,O=r*_,R=s*v,D=s*_,z=l*_,B=d*y,V=d*v,q=d*_;return e[0]=1-(R+z),e[1]=k+q,e[2]=O-V,e[3]=0,e[4]=k-q,e[5]=1-(M+z),e[6]=D+B,e[7]=0,e[8]=O+V,e[9]=D-B,e[10]=1-(M+R),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function C9e(e,t){const i=k9e,r=-t[0],s=-t[1],l=-t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],k=r*r+s*s+l*l+d*d;return k>0?(i[0]=2*(y*d+M*r+v*l-_*s)/k,i[1]=2*(v*d+M*s+_*r-y*l)/k,i[2]=2*(_*d+M*l+y*s-v*r)/k):(i[0]=2*(y*d+M*r+v*l-_*s),i[1]=2*(v*d+M*s+_*r-y*l),i[2]=2*(_*d+M*l+y*s-v*r)),ite(e,t,i),e}const k9e=wt();function A9e(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function O9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[4],d=t[5],y=t[6],v=t[8],_=t[9],M=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(l*l+d*d+y*y),e[2]=Math.sqrt(v*v+_*_+M*M),e}function L9e(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function P9e(e,t,i,r){const s=t[0],l=t[1],d=t[2],y=t[3],v=s+s,_=l+l,M=d+d,k=s*v,O=s*_,R=s*M,D=l*_,z=l*M,B=d*M,V=y*v,q=y*_,J=y*M,ne=r[0],re=r[1],ue=r[2];return e[0]=(1-(D+B))*ne,e[1]=(O+J)*ne,e[2]=(R-q)*ne,e[3]=0,e[4]=(O-J)*re,e[5]=(1-(k+B))*re,e[6]=(z+V)*re,e[7]=0,e[8]=(R+q)*ue,e[9]=(z-V)*ue,e[10]=(1-(k+D))*ue,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function R9e(e,t,i,r,s){const l=t[0],d=t[1],y=t[2],v=t[3],_=l+l,M=d+d,k=y+y,O=l*_,R=l*M,D=l*k,z=d*M,B=d*k,V=y*k,q=v*_,J=v*M,ne=v*k,re=r[0],ue=r[1],_e=r[2],xe=s[0],Ne=s[1],Ce=s[2],Ge=(1-(z+V))*re,Ze=(R+ne)*re,lt=(D-J)*re,et=(R-ne)*ue,zt=(1-(O+V))*ue,pi=(B+q)*ue,he=(D+J)*_e,pe=(B-q)*_e,me=(1-(O+z))*_e;return e[0]=Ge,e[1]=Ze,e[2]=lt,e[3]=0,e[4]=et,e[5]=zt,e[6]=pi,e[7]=0,e[8]=he,e[9]=pe,e[10]=me,e[11]=0,e[12]=i[0]+xe-(Ge*xe+et*Ne+he*Ce),e[13]=i[1]+Ne-(Ze*xe+zt*Ne+pe*Ce),e[14]=i[2]+Ce-(lt*xe+pi*Ne+me*Ce),e[15]=1,e}function N9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=i+i,y=r+r,v=s+s,_=i*d,M=r*d,k=r*y,O=s*d,R=s*y,D=s*v,z=l*d,B=l*y,V=l*v;return e[0]=1-k-D,e[1]=M+V,e[2]=O-B,e[3]=0,e[4]=M-V,e[5]=1-_-D,e[6]=R+z,e[7]=0,e[8]=O+B,e[9]=R-z,e[10]=1-_-k,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F9e(e,t,i,r,s,l,d){const y=1/(i-t),v=1/(s-r),_=1/(l-d);return e[0]=2*l*y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*l*v,e[6]=0,e[7]=0,e[8]=(i+t)*y,e[9]=(s+r)*v,e[10]=(d+l)*_,e[11]=-1,e[12]=0,e[13]=0,e[14]=d*l*2*_,e[15]=0,e}function D9e(e,t,i,r,s){const l=1/Math.tan(t/2);let d;return e[0]=l/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(d=1/(r-s),e[10]=(s+r)*d,e[14]=2*s*r*d):(e[10]=-1,e[14]=-2*r),e}function j9e(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),l=Math.tan(t.downDegrees*Math.PI/180),d=Math.tan(t.leftDegrees*Math.PI/180),y=Math.tan(t.rightDegrees*Math.PI/180),v=2/(d+y),_=2/(s+l);return e[0]=v,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=_,e[6]=0,e[7]=0,e[8]=-(d-y)*v*.5,e[9]=(s-l)*_*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function z9e(e,t,i,r,s,l,d){const y=1/(t-i),v=1/(r-s),_=1/(l-d);return e[0]=-2*y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*_,e[11]=0,e[12]=(t+i)*y,e[13]=(s+r)*v,e[14]=(d+l)*_,e[15]=1,e}function V9e(e,t,i,r){let s,l,d,y,v,_,M,k,O,R;const D=t[0],z=t[1],B=t[2],V=r[0],q=r[1],J=r[2],ne=i[0],re=i[1],ue=i[2];return Math.abs(D-ne)<Ot&&Math.abs(z-re)<Ot&&Math.abs(B-ue)<Ot?WP(e):(M=D-ne,k=z-re,O=B-ue,R=1/Math.sqrt(M*M+k*k+O*O),M*=R,k*=R,O*=R,s=q*O-J*k,l=J*M-V*O,d=V*k-q*M,R=Math.sqrt(s*s+l*l+d*d),R?(R=1/R,s*=R,l*=R,d*=R):(s=0,l=0,d=0),y=k*d-O*l,v=O*s-M*d,_=M*l-k*s,R=Math.sqrt(y*y+v*v+_*_),R?(R=1/R,y*=R,v*=R,_*=R):(y=0,v=0,_=0),e[0]=s,e[1]=y,e[2]=M,e[3]=0,e[4]=l,e[5]=v,e[6]=k,e[7]=0,e[8]=d,e[9]=_,e[10]=O,e[11]=0,e[12]=-(s*D+l*z+d*B),e[13]=-(y*D+v*z+_*B),e[14]=-(M*D+k*z+O*B),e[15]=1,e)}function U9e(e,t,i,r){const s=t[0],l=t[1],d=t[2],y=r[0],v=r[1],_=r[2];let M=s-i[0],k=l-i[1],O=d-i[2],R=M*M+k*k+O*O;R>0&&(R=1/Math.sqrt(R),M*=R,k*=R,O*=R);let D=v*O-_*k,z=_*M-y*O,B=y*k-v*M;return R=D*D+z*z+B*B,R>0&&(R=1/Math.sqrt(R),D*=R,z*=R,B*=R),e[0]=D,e[1]=z,e[2]=B,e[3]=0,e[4]=k*B-O*z,e[5]=O*D-M*B,e[6]=M*z-k*D,e[7]=0,e[8]=M,e[9]=k,e[10]=O,e[11]=0,e[12]=s,e[13]=l,e[14]=d,e[15]=1,e}function B9e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function G9e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function q9e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function rte(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function H9e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function W9e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function J9e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function K9e(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],l=e[3],d=e[4],y=e[5],v=e[6],_=e[7],M=e[8],k=e[9],O=e[10],R=e[11],D=e[12],z=e[13],B=e[14],V=e[15],q=t[0],J=t[1],ne=t[2],re=t[3],ue=t[4],_e=t[5],xe=t[6],Ne=t[7],Ce=t[8],Ge=t[9],Ze=t[10],lt=t[11],et=t[12],zt=t[13],pi=t[14],he=t[15];return Math.abs(i-q)<=Ot*Math.max(1,Math.abs(i),Math.abs(q))&&Math.abs(r-J)<=Ot*Math.max(1,Math.abs(r),Math.abs(J))&&Math.abs(s-ne)<=Ot*Math.max(1,Math.abs(s),Math.abs(ne))&&Math.abs(l-re)<=Ot*Math.max(1,Math.abs(l),Math.abs(re))&&Math.abs(d-ue)<=Ot*Math.max(1,Math.abs(d),Math.abs(ue))&&Math.abs(y-_e)<=Ot*Math.max(1,Math.abs(y),Math.abs(_e))&&Math.abs(v-xe)<=Ot*Math.max(1,Math.abs(v),Math.abs(xe))&&Math.abs(_-Ne)<=Ot*Math.max(1,Math.abs(_),Math.abs(Ne))&&Math.abs(M-Ce)<=Ot*Math.max(1,Math.abs(M),Math.abs(Ce))&&Math.abs(k-Ge)<=Ot*Math.max(1,Math.abs(k),Math.abs(Ge))&&Math.abs(O-Ze)<=Ot*Math.max(1,Math.abs(O),Math.abs(Ze))&&Math.abs(R-lt)<=Ot*Math.max(1,Math.abs(R),Math.abs(lt))&&Math.abs(D-et)<=Ot*Math.max(1,Math.abs(D),Math.abs(et))&&Math.abs(z-zt)<=Ot*Math.max(1,Math.abs(z),Math.abs(zt))&&Math.abs(B-pi)<=Ot*Math.max(1,Math.abs(B),Math.abs(pi))&&Math.abs(V-he)<=Ot*Math.max(1,Math.abs(V),Math.abs(he))}function Z9e(e){const t=Ot,i=e[0],r=e[1],s=e[2],l=e[4],d=e[5],y=e[6],v=e[8],_=e[9],M=e[10];return Math.abs(1-(i*i+l*l+v*v))<=t&&Math.abs(1-(r*r+d*d+_*_))<=t&&Math.abs(1-(s*s+y*y+M*M))<=t}const Y9e=Qee,X9e=rte;Object.freeze(Object.defineProperty({__proto__:null,copy:y9e,set:vf,identity:WP,transpose:yp,invert:m9e,adjoint:g9e,determinant:v9e,multiply:Qee,translate:w9e,scale:b9e,rotate:_9e,rotateX:x9e,rotateY:S9e,rotateZ:$9e,fromTranslation:ete,fromScaling:M9e,fromRotation:tte,fromXRotation:E9e,fromYRotation:T9e,fromZRotation:I9e,fromRotationTranslation:ite,fromQuat2:C9e,getTranslation:A9e,getScaling:O9e,getRotation:L9e,fromRotationTranslationScale:P9e,fromRotationTranslationScaleOrigin:R9e,fromQuat:N9e,frustum:F9e,perspective:D9e,perspectiveFromFieldOfView:j9e,ortho:z9e,lookAt:V9e,targetTo:U9e,str:B9e,frob:G9e,add:q9e,subtract:rte,multiplyScalar:H9e,multiplyScalarAndAdd:W9e,exactEquals:J9e,equals:K9e,isOrthoNormal:Z9e,mul:Y9e,sub:X9e},Symbol.toStringTag,{value:"Module"}));let oE,$e=null;function nte(){return!!$e}function Q9e(){return!!ke("esri-wasm")}function ste(){return oE||(oE=Le(()=>import("./pe-wasm.9649c26b.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>li(`esri/geometry/support/${t}`)})).then(e=>{ate(e)}),oE)}var DC,mr,jC;(function(e){function t(l,d,y){$e.ensureCache.prepare();const v=L0(y),_=y===v,M=$e.ensureFloat64(v),k=$e._pe_geog_to_proj($e.getPointer(l),d,M);return k&&Pd(y,d,M,_),k}function i(l,d,y,v){switch(v){case mr.PE_TRANSFORM_P_TO_G:return r(l,d,y);case mr.PE_TRANSFORM_G_TO_P:return t(l,d,y)}return 0}function r(l,d,y){return s(l,d,y,0)}function s(l,d,y,v){$e.ensureCache.prepare();const _=L0(y),M=y===_,k=$e.ensureFloat64(_),O=$e._pe_proj_to_geog_center($e.getPointer(l),d,k,v);return O&&Pd(y,d,k,M),O}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(DC||(DC={})),function(e){function t(){e.PE_BUFFER_MAX=$e.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=$e.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=$e.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=$e.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=$e.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=$e.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=$e.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=$e.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=$e.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=$e.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=$e.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=$e.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=$e.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=$e.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=$e.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=$e.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=$e.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=$e.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=$e.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=$e.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=$e.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=$e.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=$e.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=$e.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=$e.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=$e.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=$e.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=$e.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=$e.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=$e.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(mr||(mr={})),function(e){const t={},i={},r=R=>{if(R){const D=R.getType();switch(D){case mr.PE_TYPE_GEOGCS:R=$e.castObject(R,$e.PeGeogcs);break;case mr.PE_TYPE_PROJCS:R=$e.castObject(R,$e.PeProjcs);break;case mr.PE_TYPE_GEOGTRAN:R=$e.castObject(R,$e.PeGeogtran);break;default:D&mr.PE_TYPE_UNIT&&(R=$e.castObject(R,$e.PeUnit))}}return R};function s(){$e.PeFactory.prototype.initialize(null)}function l(R){return d(mr.PE_TYPE_COORDSYS,R)}function d(R,D){let z=null,B=t[R];if(B||(B={},t[R]=B),B.hasOwnProperty(String(D)))z=B[D];else{const V=$e.PeFactory.prototype.factoryByType(R,D);$e.compare(V,$e.NULL)||(z=V,B[D]=z)}return z=r(z),z}function y(R,D){let z=null,B=i[R];if(B||(B={},i[R]=B),B.hasOwnProperty(D))z=B[D];else{const V=$e.PeFactory.prototype.fromString(R,D);$e.compare(V,$e.NULL)||(z=V,B[D]=z)}return z=r(z),z}function v(R){return d(mr.PE_TYPE_GEOGCS,R)}function _(R){return d(mr.PE_TYPE_GEOGTRAN,R)}function M(R){return $e.PeFactory.prototype.getCode(R)}function k(R){return d(mr.PE_TYPE_PROJCS,R)}function O(R){return d(mr.PE_TYPE_UNIT,R)}e.initialize=s,e.coordsys=l,e.factoryByType=d,e.fromString=y,e.geogcs=v,e.geogtran=_,e.getCode=M,e.projcs=k,e.unit=O}(jC||(jC={}));let ote=null;var fS,zC,VC,UC,yS,BC,mS,gS,GC;function ate(e){function t(l,d,y){l[d]=y(l[d])}$e=e,mr.init(),fS.init(),yS.init(),mS.init(),gS.init(),ote=class extends $e.PeGCSExtent{destroy(){$e.destroy(this)}};const i=[$e.PeDatum,$e.PeGeogcs,$e.PeGeogtran,$e.PeObject,$e.PeParameter,$e.PePrimem,$e.PeProjcs,$e.PeSpheroid,$e.PeUnit];for(const l of i)t(l.prototype,"getName",d=>function(){return d.call(this,new Array(mr.PE_NAME_MAX))});for(const l of[$e.PeGeogtran,$e.PeProjcs])t(l.prototype,"getParameters",d=>function(){const y=new Array(mr.PE_PARM_MAX);let v=d.call(this);for(let _=0;_<y.length;_++){const M=$e.getValue(v,"*");y[_]=M?$e.wrapPointer(M,$e.PeParameter):null,v+=Int32Array.BYTES_PER_ELEMENT}return y});t($e.PeHorizon.prototype,"getCoord",l=>function(){const d=this.getSize();if(!d)return null;const y=[];return Pd(y,d,l.call(this)),y}),t($e.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const d=$e._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;const v=l.call(this);if(!$e.compare(v,$e.NULL)){y=[v];const _=this.getSteps();if(_>1){const M=$e.getPointer(v);for(let k=1;k<_;k++)y.push($e.wrapPointer(M+d*k,$e.PeGTlistExtendedGTs))}}return y}});const r=$e._pe_getPeHorizonSize(),s=l=>function(){let d=this._cache;if(d||(d=new Map,this._cache=d),d.has(l))return d.get(l);let y=null;const v=l.call(this);if(!$e.compare(v,$e.NULL)){y=[v];const _=v.getNump();if(_>1){const M=$e.getPointer(v);for(let k=1;k<_;k++)y.push($e.wrapPointer(M+r*k,$e.PeHorizon))}}return d.set(l,y),y};t($e.PeProjcs.prototype,"horizonGcsGenerate",s),t($e.PeProjcs.prototype,"horizonPcsGenerate",s),$e.PeObject.prototype.toString=function(l=mr.PE_STR_OPTS_NONE){$e.ensureCache.prepare();const d=$e.getPointer(this),y=$e.ensureInt8(new Array(mr.PE_BUFFER_MAX));return $e.UTF8ToString($e._pe_object_to_string_ext(d,l,y))}}function Xc(e){if(!e)return;const t=$e.getClass(e);if(!t)return;const i=$e.getCache(t);if(!i)return;const r=$e.getPointer(e);r&&delete i[r]}function Lx(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push($e.ensureInt8(r));return i}function L0(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function Pd(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=$e.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let l=0;l<t;l++)s&&(e[l]=new Array(2)),e[l][0]=$e.getValue(i,"double"),e[l][1]=$e.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=$e.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=$e._pe_getPeGTlistExtendedEntrySize()}function r(s,l,d,y,v,_){let M=null;const k=new $e.PeInteger(_);try{const O=$e.PeGTlistExtended.prototype.getGTlist(s,l,d,y,v,k);if((_=k.val)&&(M=[O],_>1)){const R=$e.getPointer(O);for(let D=1;D<_;D++)M.push($e.wrapPointer(R+t*D,$e.PeGTlistExtendedEntry))}}finally{$e.destroy(k)}return M}e.init=i,e.getGTlist=r})(fS||(fS={})),function(e){function t(i){if(i&&i.length){for(const r of i)Xc(r),r.getEntries().forEach(s=>{Xc(s);const l=s.getGeogtran();Xc(l),l.getParameters().forEach(Xc),[l.getGeogcs1(),l.getGeogcs2()].forEach(d=>{Xc(d);const y=d.getDatum();Xc(y),Xc(y.getSpheroid()),Xc(d.getPrimem()),Xc(d.getUnit())})});$e.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(zC||(zC={})),function(e){function t(i,r,s,l,d){$e.ensureCache.prepare();const y=L0(s),v=s===y,_=$e.ensureFloat64(y);let M=0;l&&(M=$e.ensureFloat64(l));const k=$e._pe_geog_to_geog($e.getPointer(i),r,_,M,d);return k&&Pd(s,r,_,v),k}e.geogToGeog=t}(VC||(VC={})),function(e){const t=(_,M,k,O,R,D)=>{let z,B;switch($e.ensureCache.prepare(),_){case"dd":z=$e._pe_geog_to_dd,B=mr.PE_DD_MAX;break;case"ddm":z=$e._pe_geog_to_ddm,B=mr.PE_DDM_MAX;break;case"dms":z=$e._pe_geog_to_dms,B=mr.PE_DMS_MAX}let V=0;M&&(V=$e.getPointer(M));const q=L0(O),J=$e.ensureFloat64(q),ne=Lx(k,B),re=z(V,k,J,R,$e.ensureInt32(ne));if(re)for(let ue=0;ue<k;ue++)D[ue]=$e.UTF8ToString(ne[ue]);return re},i=(_,M,k,O,R)=>{let D;switch($e.ensureCache.prepare(),_){case"dd":D=$e._pe_dd_to_geog;break;case"ddm":D=$e._pe_ddm_to_geog;break;case"dms":D=$e._pe_dms_to_geog}let z=0;M&&(z=$e.getPointer(M));const B=O.map(ne=>$e.ensureString(ne)),V=$e.ensureInt32(B),q=$e.ensureFloat64(new Array(2*k)),J=D(z,k,V,q);return J&&Pd(R,k,q),J};function r(_,M,k,O,R){return t("dms",_,M,k,O,R)}function s(_,M,k,O){return i("dms",_,M,k,O)}function l(_,M,k,O,R){return t("ddm",_,M,k,O,R)}function d(_,M,k,O){return i("ddm",_,M,k,O)}function y(_,M,k,O,R){return t("dd",_,M,k,O,R)}function v(_,M,k,O){return i("dd",_,M,k,O)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=l,e.ddmToGeog=d,e.geogToDd=y,e.ddToGeog=v}(UC||(UC={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=$e.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=$e.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=$e.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=$e.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=$e.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,l,d,y,v,_,M){$e.ensureCache.prepare();let k=0;s&&(k=$e.getPointer(s));const O=L0(d),R=$e.ensureFloat64(O),D=Lx(l,mr.PE_MGRS_MAX),z=$e.ensureInt32(D),B=$e._pe_geog_to_mgrs_extended(k,l,R,y,v,_,z);if(B)for(let V=0;V<l;V++)M[V]=$e.UTF8ToString(D[V]);return B}function r(s,l,d,y,v){$e.ensureCache.prepare();let _=0;s&&(_=$e.getPointer(s));const M=d.map(D=>$e.ensureString(D)),k=$e.ensureInt32(M),O=$e.ensureFloat64(new Array(2*l)),R=$e._pe_mgrs_to_geog_extended(_,l,k,y,O);return R&&Pd(v,l,O),R}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(yS||(yS={})),function(e){function t(r,s,l,d,y,v,_){$e.ensureCache.prepare();let M=0;r&&(M=$e.getPointer(r));const k=L0(l),O=$e.ensureFloat64(k),R=Lx(s,mr.PE_MGRS_MAX),D=$e.ensureInt32(R),z=$e._pe_geog_to_usng(M,s,O,d,y,v,D);if(z)for(let B=0;B<s;B++)_[B]=$e.UTF8ToString(R[B]);return z}function i(r,s,l,d){$e.ensureCache.prepare();let y=0;r&&(y=$e.getPointer(r));const v=l.map(O=>$e.ensureString(O)),_=$e.ensureInt32(v),M=$e.ensureFloat64(new Array(2*s)),k=$e._pe_usng_to_geog(y,s,_,M);return k&&Pd(d,s,M),k}e.geogToUsng=t,e.usngToGeog=i}(BC||(BC={})),function(e){function t(){e.PE_UTM_OPTS_NONE=$e.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=$e.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=$e.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,l,d,y,v){$e.ensureCache.prepare();let _=0;s&&(_=$e.getPointer(s));const M=L0(d),k=$e.ensureFloat64(M),O=Lx(l,mr.PE_UTM_MAX),R=$e.ensureInt32(O),D=$e._pe_geog_to_utm(_,l,k,y,R);if(D)for(let z=0;z<l;z++)v[z]=$e.UTF8ToString(O[z]);return D}function r(s,l,d,y,v){$e.ensureCache.prepare();let _=0;s&&(_=$e.getPointer(s));const M=d.map(D=>$e.ensureString(D)),k=$e.ensureInt32(M),O=$e.ensureFloat64(new Array(2*l)),R=$e._pe_utm_to_geog(_,l,k,y,O);return R&&Pd(v,l,O),R}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(mS||(mS={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=$e.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=$e.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=$e.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=$e.PePCSInfo.prototype.PE_POLE_POINT}function r(s,l=e.PE_PCSINFO_OPTION_DOMAIN){let d,y;return t.has(s)&&(y=t.get(s),y[l]&&(d=y[l])),d||(d=$e.PePCSInfo.prototype.generate(s,l),y||(y=[],t.set(s,y)),y[l]=d),d}e.init=i,e.generate=r}(gS||(gS={})),function(e){function t(){return $e.PeVersion.prototype.version_string()}e.versionString=t}(GC||(GC={}));const e4e=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return $e},isLoaded:nte,isSupported:Q9e,load:ste,get PeCSTransformations(){return DC},get PeDefs(){return mr},get PeFactory(){return jC},get PeGCSExtent(){return ote},get PeGTlistExtended(){return fS},get PeGTlistExtendedEntry(){return zC},get PeGTTransformations(){return VC},get PeNotationDms(){return UC},get PeNotationMgrs(){return yS},get PeNotationUsng(){return BC},get PeNotationUtm(){return mS},get PePCSInfo(){return gS},get PeVersion(){return GC},_init:ate},Symbol.toStringTag,{value:"Module"})),Do=Math.PI/180,t4e=/SPHEROID\[([^\]]+)]/i,Pp=tr.radius,ql=tr.eccentricitySquared,i4e={a1:Pp*ql,a2:Pp*ql*Pp*ql,a3:Pp*ql*ql/2,a4:Pp*ql*Pp*ql*2.5,a5:Pp*ql+Pp*ql*ql/2,a6:1-ql},r4e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:tr.radius,f:tr.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:lf.radius,f:lf.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Hh.radius,f:Hh.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Hh.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let Px=0;class dg{constructor(t=null){this.uid=Px++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new dg;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Px++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Px++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Px++}getInverse(){const t=new dg;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class Ud{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof dg?this.steps.push(i):this.steps.push(new dg({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new Ud;let r="";for(const s of t.steps){const l=dg.fromGE(s);i.steps.push(l),r+=l.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new Ud;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cached_projection[Ud.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const l of this.steps)r+=l.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const s=this._cached_projection[Ud.cacheKey(t,i)];return s===void 0?null:s}}function lte(e,t,i){if(ce(t)||ce(i)||i.vcsWkid||ms(t,i))return null;const r=R1(t)/R1(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>n4e(s,r);case"polyline":case"esriGeometryPolyline":return s=>o4e(s,r);case"polygon":case"esriGeometryPolygon":return s=>s4e(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>a4e(s,r);case"extent":case"esriGeometryExtent":return s=>l4e(s,r);default:return null}}function n4e(e,t){e&&e.z!=null&&(e.z*=t)}function s4e(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function o4e(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function a4e(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function l4e(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Xd=null,vS=null,aE=null,lE={};const ute=new eX;function hf(){return!!Xd&&nte()}function lp(e){return ce(aE)&&(aE=Promise.all([ste(),Le(()=>Promise.resolve().then(()=>$ze),void 0,import.meta.url).then(t=>t.g),Le(()=>Promise.resolve().then(()=>Aze),void 0,import.meta.url)])),aE.then(([,t,{hydratedAdapter:i}])=>{ur(e),vS=i,Xd=t.default,Xd._enableProjection(e4e),ute.notify()})}function uo(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:mU(vS,e,e[0].spatialReference,t,i,r):mU(vS,[e],e.spatialReference,t,i,r)[0]}function mU(e,t,i,r,s=null,l=null){if(ce(i)||ce(r))return t;if(zu(i,r,s))return t.map(d=>h4e(d,i,r));if(ce(s)){const d=Ud.cacheKey(i,r);lE[d]!==void 0?s=lE[d]:(s=u4e(i,r,null),ce(s)&&(s=new Ud),lE[d]=s)}if(ce(Xd))throw new JP;return K(l)?Xd._project(e,t,i,r,s,l):Xd._project(e,t,i,r,s)}function dJe(e,t){return ce(e)?{pending:null,geometry:null}:ms(e.spatialReference,t)?{pending:null,geometry:e}:Us(e.spatialReference)&&Us(t)?zu(e.spatialReference,t)||hf()?{pending:null,geometry:c4e(e,t)}:(Bt(ute),{pending:lp(),geometry:null}):{pending:null,geometry:null}}function u4e(e,t,i=null){if(ce(Xd))throw new JP;if(ce(e)||ce(t))return null;const r=Xd._getTransformation(vS,e,t,i,i==null?void 0:i.spatialReference);return r!==null?Ud.fromGE(r):null}class JP extends ge{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var ye;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(ye||(ye={}));function c4e(e,t){try{const i=uo(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=lte(i.type,e.spatialReference,t);return K(r)&&r(i),i}catch(i){if(!(i instanceof JP))throw i;return null}}function zu(e,t,i){return!i&&(!!ms(e,t)||Us(e)&&Us(t)&&!!dte(e,t,fte))}async function fJe(e,t,i,r){if(hf())return tV(r);if(Array.isArray(e)){for(const{source:s,dest:l,geographicTransformation:d}of e)if(!zu(s,l,d))return lp(r)}else if(!zu(e,t,i))return lp(r);return tV(r)}function h4e(e,t,i){return e?"x"in e?p4e(e,t,new ut,i,0):"xmin"in e?g4e(e,t,new yi,i,0):"rings"in e?cte(e,t,new go,i,0):"paths"in e?f4e(e,t,new zr,i,0):"points"in e?d4e(e,t,new B1,i,0):null:null}function p4e(e,t,i,r,s){Xr[0]=e.x,Xr[1]=e.y;const l=e.z;return Xr[2]=l!==void 0?l:s,_v(Xr,t,0,Xr,r,0,1)?(i.x=Xr[0],i.y=Xr[1],i.spatialReference=r,l===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Xr[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function d4e(e,t,i,r,s){const{points:l,hasZ:d,hasM:y}=e,v=[],_=l.length,M=[];for(const k of l)M.push(k[0],k[1],d?k[2]:s);if(!_v(M,t,0,M,r,0,_))return null;for(let k=0;k<_;++k){const O=3*k,R=M[O],D=M[O+1];d&&y?v.push([R,D,M[O+2],l[k][3]]):d?v.push([R,D,M[O+2]]):y?v.push([R,D,l[k][2]]):v.push([R,D])}return i.points=v,i.spatialReference=r,i.hasZ=d,i.hasM=y,i}function f4e(e,t,i,r,s){const{paths:l,hasZ:d,hasM:y}=e,v=[];return hte(l,d,y,t,v,r,s)?(i.paths=v,i.spatialReference=r,i.hasZ=d,i.hasM=y,i):null}function y4e({hasZ:e,spatialReference:t,paths:i},r,s=0){const l=pf(t,B3),d=Vh[l][ye.WGS84_COMPARABLE_LON_LAT];if(ce(d))return!1;const y=e?v=>v:v=>ju(Xr,v[0],v[1],s);for(const v of i){const _=[];for(const M of v){const k=[0,0,s];d(y(M),0,k,0),_.push(k)}r.push(_)}return!0}function m4e({hasZ:e,spatialReference:t,rings:i},r,s=0){const l=pf(t,B3),d=Vh[l][ye.WGS84_COMPARABLE_LON_LAT];if(ce(d))return!1;const y=e?v=>v:v=>ju(Xr,v[0],v[1],s);for(const v of i){const _=[];for(const M of v){const k=[0,0,s];d(y(M),0,k,0),_.push(k)}r.push(_)}return!0}function yJe(e,t,i=t.spatialReference,r=0){return K(i)&&K(cte(e,e.spatialReference,t,i,r))}function cte(e,t,i,r,s){const{rings:l,hasZ:d,hasM:y}=e,v=[];return hte(l,d,y,t,v,r,s)?(i.rings=v,i.spatialReference=r,i.hasZ=d,i.hasM=y,i):null}function g4e(e,t,i,r,s){const{xmin:l,ymin:d,xmax:y,ymax:v,hasZ:_,hasM:M}=e;return gU(l,d,_?e.zmin:s,t,Xr,r)?(i.xmin=Xr[0],i.ymin=Xr[1],_&&(i.zmin=Xr[2]),gU(y,v,_?e.zmax:s,t,Xr,r)?(i.xmax=Xr[0],i.ymax=Xr[1],_&&(i.zmax=Xr[2]),M&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function v4e(e,t,i,r=0){Xr[0]=e.x,Xr[1]=e.y;const s=e.z;return Xr[2]=s!==void 0?s:r,_v(Xr,e.spatialReference,0,t,i,0,1)}function gU(e,t,i,r,s,l){return Ca[0]=e,Ca[1]=t,Ca[2]=i,_v(Ca,r,0,s,l,0,1)}function eb(e,t,i,r){return!(ce(t)||ce(r)||e.length<2)&&(e.length===2&&(Ca[0]=e[0],Ca[1]=e[1],Ca[2]=0,e=Ca),_v(e,t,0,i,r,0,1))}function vU(e,t,i){return w4e(e,t,i)}function w4e(e,t,i){if(ce(t))return!1;const r=pf(t,B3),s=Vh[r][ye.WGS84_COMPARABLE_LON_LAT];return!ce(s)&&(s(e,0,Ca,0),i!==Ca&&(i[0]=Ca[0],i[1]=Ca[1],i.length>2&&(i[2]=Ca[2])),!0)}function _v(e,t,i,r,s,l,d=1){const y=dte(t,s,fte);if(ce(y))return!1;if(y===Wi){if(e===r&&i===l)return!0;const _=i+3*d;for(let M=i,k=l;M<_;M++,k++)r[k]=e[M];return!0}const v=i+3*d;for(let _=i,M=l;_<v;_+=3,M+=3)y(e,_,r,M);return!0}function hte(e,t,i,r,s,l,d=0){const y=new Array;for(const _ of e)for(const M of _)y.push(M[0],M[1],t?M[2]:d);if(!_v(y,r,0,y,l,0,y.length/3))return!1;let v=0;s.length=0;for(const _ of e){const M=new Array;for(const k of _)t&&i?M.push([y[v++],y[v++],y[v++],k[3]]):t?M.push([y[v++],y[v++],y[v++]]):i?(M.push([y[v++],y[v++],k[2]]),v++):(M.push([y[v++],y[v++]]),v++);s.push(M)}return!0}function mJe(e,t,i,r){if(ce(e)||ce(r))return!1;const s=pf(e,B3),l=pf(r,N4e);if(s===l&&!wU(l)&&(s!==ye.UNKNOWN||ms(e,r)))return ete(i,t),!0;if(wU(l)){const d=Vh[s][ye.LON_LAT],y=Vh[ye.LON_LAT][l];return!ce(d)&&!ce(y)&&(d(t,0,Rp,0),y(Rp,0,Np,0),pte(Sc*Rp[0],Sc*Rp[1],i),i[12]=Np[0],i[13]=Np[1],i[14]=Np[2],!0)}if((l===ye.WEB_MERCATOR||l===ye.PLATE_CARREE)&&(s===ye.WGS84||s===ye.CGCS2000&&l===ye.PLATE_CARREE||s===ye.SPHERICAL_ECEF||s===ye.WEB_MERCATOR)){const d=Vh[s][ye.LON_LAT],y=Vh[ye.LON_LAT][l];return!ce(d)&&!ce(y)&&(d(t,0,Rp,0),y(Rp,0,Np,0),s===ye.SPHERICAL_ECEF?b4e(Sc*Rp[0],Sc*Rp[1],i):WP(i),i[12]=Np[0],i[13]=Np[1],i[14]=Np[2],!0)}return!1}function wU(e){return e===ye.SPHERICAL_ECEF||e===ye.SPHERICAL_MARS_PCPF||e===ye.SPHERICAL_MOON_PCPF}function pte(e,t,i){const r=Math.sin(e),s=Math.cos(e),l=Math.sin(t),d=Math.cos(t),y=i;return y[0]=-r,y[4]=-l*s,y[8]=d*s,y[12]=0,y[1]=s,y[5]=-l*r,y[9]=d*r,y[13]=0,y[2]=0,y[6]=d,y[10]=l,y[14]=0,y[3]=0,y[7]=0,y[11]=0,y[15]=1,y}function b4e(e,t,i){return pte(e,t,i),yp(i,i),i}function pf(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=cf(e,1)),e.wkt===HP.wkt?t.spatialReferenceId=ye.SPHERICAL_ECEF:qb(e)?t.spatialReferenceId=ye.WGS84:af(e)?t.spatialReferenceId=ye.WEB_MERCATOR:y2e(e)?t.spatialReferenceId=ye.PLATE_CARREE:e.wkt===Dee.wkt?t.spatialReferenceId=ye.WGS84_ECEF:e.wkid===bl.CGCS2000?t.spatialReferenceId=ye.CGCS2000:e.wkt===pS.wkt?t.spatialReferenceId=ye.SPHERICAL_MARS_PCPF:e.wkt===dS.wkt?t.spatialReferenceId=ye.SPHERICAL_MOON_PCPF:fv(e)?t.spatialReferenceId=ye.GCSMARS2000:yv(e)?t.spatialReferenceId=ye.GCSMOON2000:t.spatialReferenceId=ye.UNKNOWN)}function Wi(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function fg(e,t,i,r){i[r++]=qg*(e[t++]/tr.radius),i[r++]=qg*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/tr.radius))),i[r]=e[t]}function _4e(e,t,i,r){fg(e,t,i,r),Y0(i,r,i,r)}function x4e(e,t,i,r){fg(e,t,i,r),Q0(i,r,i,r)}function S4e(e,t,i,r,s){const l=.4999999*Math.PI,d=Bs(Sc*e[t+1],-l,l),y=Math.sin(d);i[r++]=Sc*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+y)/(1-y)),i[r]=e[t+2]}function s3(e,t,i,r){S4e(e,t,i,r,tr)}const bU=tr.radius*Math.PI/180,_U=180/(tr.radius*Math.PI);function K0(e,t,i,r){i[r]=e[t]*bU,i[r+1]=e[t+1]*bU,i[r+2]=e[t+2]}function Z0(e,t,i,r){i[r]=e[t]*_U,i[r+1]=e[t+1]*_U,i[r+2]=e[t+2]}function $4e(e,t,i,r){fg(e,t,i,r),K0(i,r,i,r)}function M4e(e,t,i,r){e1(e,t,i,r),K0(i,r,i,r)}function E4e(e,t,i,r){X0(e,t,i,r),K0(i,r,i,r)}function T4e(e,t,i,r){Z0(e,t,i,r),Y0(i,r,i,r)}function I4e(e,t,i,r){Z0(e,t,i,r),s3(i,r,i,r)}function C4e(e,t,i,r){Z0(e,t,i,r),Q0(i,r,i,r)}function KP(e){if(ce(e))return!1;const t=pf(e,B3);return!!Vh[t][ye.WGS84_COMPARABLE_LON_LAT]}function ZP(e,t,i,r,s){const l=s+e[t+2],d=Sc*e[t+1],y=Sc*e[t],v=Math.cos(d);i[r++]=Math.cos(y)*v*l,i[r++]=Math.sin(y)*v*l,i[r]=Math.sin(d)*l}function xU(e,t,i,r){ZP(e,t,i,r,lf.radius)}function SU(e,t,i,r){ZP(e,t,i,r,Hh.radius)}function Y0(e,t,i,r){ZP(e,t,i,r,tr.radius)}function YP(e,t,i,r,s){const l=e[t],d=e[t+1],y=e[t+2],v=Math.sqrt(l*l+d*d+y*y),_=cQ(y/(v===0?1:v)),M=Math.atan2(d,l);i[r++]=qg*M,i[r++]=qg*_,i[r]=v-s}function $U(e,t,i,r){YP(e,t,i,r,lf.radius)}function MU(e,t,i,r){YP(e,t,i,r,Hh.radius)}function X0(e,t,i,r){YP(e,t,i,r,tr.radius)}function k4e(e,t,i,r){X0(e,t,i,r),s3(i,r,i,r)}function A4e(e,t,i,r){X0(e,t,i,r),Q0(i,r,i,r)}function O4e(e,t,i,r,s){const l=Sc*e[t],d=Sc*e[t+1],y=e[t+2],v=Math.sin(d),_=Math.cos(d),M=s.radius/Math.sqrt(1-s.eccentricitySquared*v*v);i[r++]=(M+y)*_*Math.cos(l),i[r++]=(M+y)*_*Math.sin(l),i[r++]=(M*(1-s.eccentricitySquared)+y)*v}function Q0(e,t,i,r){O4e(e,t,i,r,tr)}function e1(e,t,i,r){const s=i4e,l=e[t],d=e[t+1],y=e[t+2];let v,_,M,k,O,R,D,z,B,V,q,J,ne,re,ue,_e,xe,Ne,Ce,Ge,Ze;v=Math.abs(y),_=l*l+d*d,M=Math.sqrt(_),k=_+y*y,O=Math.sqrt(k),Ge=Math.atan2(d,l),R=y*y/k,D=_/k,re=s.a2/O,ue=s.a3-s.a4/O,D>.3?(z=v/O*(1+D*(s.a1+re+R*ue)/O),Ce=Math.asin(z),V=z*z,B=Math.sqrt(1-V)):(B=M/O*(1-R*(s.a5-re-D*ue)/O),Ce=Math.acos(B),V=1-B*B,z=Math.sqrt(V)),q=1-tr.eccentricitySquared*V,J=tr.radius/Math.sqrt(q),ne=s.a6*J,re=M-J*B,ue=v-ne*z,xe=B*re+z*ue,_e=B*ue-z*re,Ne=_e/(ne/q+xe),Ce+=Ne,Ze=xe+_e*Ne/2,y<0&&(Ce=-Ce),i[r++]=qg*Ge,i[r++]=qg*Ce,i[r]=Ze}function L4e(e,t,i,r){e1(e,t,i,r),Y0(i,r,i,r)}function P4e(e,t,i,r){e1(e,t,i,r),s3(i,r,i,r)}const Vh={[ye.WGS84]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Wi,[ye.WGS84_COMPARABLE_LON_LAT]:Wi,[ye.SPHERICAL_ECEF]:Y0,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:s3,[ye.PLATE_CARREE]:K0,[ye.WGS84]:Wi,[ye.WGS84_ECEF]:Q0},[ye.CGCS2000]:{[ye.CGCS2000]:Wi,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Wi,[ye.WGS84_COMPARABLE_LON_LAT]:Wi,[ye.SPHERICAL_ECEF]:Y0,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:K0,[ye.WGS84]:null,[ye.WGS84_ECEF]:Q0},[ye.GCSMARS2000]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:Wi,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Wi,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:SU,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.GCSMOON2000]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:Wi,[ye.LON_LAT]:Wi,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:xU,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.WEB_MERCATOR]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:fg,[ye.WGS84_COMPARABLE_LON_LAT]:fg,[ye.SPHERICAL_ECEF]:_4e,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:Wi,[ye.PLATE_CARREE]:$4e,[ye.WGS84]:fg,[ye.WGS84_ECEF]:x4e},[ye.WGS84_ECEF]:{[ye.CGCS2000]:e1,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:e1,[ye.WGS84_COMPARABLE_LON_LAT]:e1,[ye.SPHERICAL_ECEF]:L4e,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:P4e,[ye.PLATE_CARREE]:M4e,[ye.WGS84]:e1,[ye.WGS84_ECEF]:Wi},[ye.SPHERICAL_ECEF]:{[ye.CGCS2000]:X0,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:X0,[ye.WGS84_COMPARABLE_LON_LAT]:X0,[ye.SPHERICAL_ECEF]:Wi,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:k4e,[ye.PLATE_CARREE]:E4e,[ye.WGS84]:X0,[ye.WGS84_ECEF]:A4e},[ye.SPHERICAL_MARS_PCPF]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:MU,[ye.GCSMOON2000]:null,[ye.LON_LAT]:MU,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:Wi,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.SPHERICAL_MOON_PCPF]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:$U,[ye.LON_LAT]:$U,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:Wi,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.UNKNOWN]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:null,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:Wi,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.LON_LAT]:{[ye.CGCS2000]:Wi,[ye.GCSMARS2000]:Wi,[ye.GCSMOON2000]:Wi,[ye.LON_LAT]:Wi,[ye.WGS84_COMPARABLE_LON_LAT]:Wi,[ye.SPHERICAL_ECEF]:Y0,[ye.SPHERICAL_MARS_PCPF]:SU,[ye.SPHERICAL_MOON_PCPF]:xU,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:s3,[ye.PLATE_CARREE]:K0,[ye.WGS84]:Wi,[ye.WGS84_ECEF]:Q0},[ye.WGS84_COMPARABLE_LON_LAT]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Wi,[ye.WGS84_COMPARABLE_LON_LAT]:Wi,[ye.SPHERICAL_ECEF]:Y0,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:K0,[ye.WGS84]:Wi,[ye.WGS84_ECEF]:Q0},[ye.PLATE_CARREE]:{[ye.CGCS2000]:Z0,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Z0,[ye.WGS84_COMPARABLE_LON_LAT]:Z0,[ye.SPHERICAL_ECEF]:T4e,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:I4e,[ye.PLATE_CARREE]:Wi,[ye.WGS84]:Z0,[ye.WGS84_ECEF]:C4e}};function dte(e,t,i=XP()){return ce(e)||ce(t)?null:R4e(e,t,i).projector}function R4e(e,t,i){if(ce(e)||ce(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=pf(e,i.source),s=pf(t,i.dest);return r===ye.UNKNOWN&&s===ye.UNKNOWN?ms(e,t)?i.projector=Wi:i.projector=null:i.projector=Vh[r][s],i}function XP(){return{source:{spatialReference:null,spatialReferenceId:ye.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ye.UNKNOWN,metersPerUnit:1},projector:Wi}}const B3={spatialReference:null,spatialReferenceId:ye.UNKNOWN},N4e={spatialReference:null,spatialReferenceId:ye.UNKNOWN},fte=XP();XP();const Sc=zm(1),qg=lQ(1),Ca=wt(),Rp=wt(),Np=wt(),Xr=wt();var qC;let lc=qC=class extends Ve{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new qC({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],lc.prototype,"cols",void 0),g([S({type:Yi,json:{write:!0}})],lc.prototype,"level",void 0),g([S({type:String,json:{write:!0}})],lc.prototype,"levelValue",void 0),g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],lc.prototype,"origin",void 0),g([S({type:Number,json:{write:!0}})],lc.prototype,"resolution",void 0),g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],lc.prototype,"rows",void 0),g([S({type:Number,json:{write:!0}})],lc.prototype,"scale",void 0),lc=qC=g([Q("esri.layers.support.LOD")],lc);const QP=lc;var nd;const EU=new Dt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let An=nd=class extends Ve{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=Ct.WebMercator,numLODs:l=24}=e;if(!Us(s)){const k=[];if(i)for(let O=0;O<i.length;O++){const R=i[O];k.push({level:O,scale:R,resolution:R})}else{let O=5e-4;for(let R=l-1;R>=0;R--)k.unshift({level:R,scale:O,resolution:O}),O*=2}return new nd({dpi:96,lods:k,origin:new ut(0,0,s),size:[r,r],spatialReference:s})}const d=La(s),y=e.origin?new ut({x:e.origin.x,y:e.origin.y,spatialReference:s}):new ut(d?{x:d.origin[0],y:d.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),v=96,_=1/(cf(s)*39.37*v),M=[];if(i)for(let k=0;k<i.length;k++){const O=i[k],R=O*_;M.push({level:k,scale:O,resolution:R})}else{let k=z6(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const O=Math.ceil(l/t);M.push({level:0,scale:k,resolution:k*_});for(let R=1;R<O;R++){const D=k/2**t,z=D*_;M.push({level:R,scale:D,resolution:z}),k=D}}return new nd({dpi:v,lods:M,origin:y,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=La(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return ut.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(s=>{r.push(s.scale),t=s.scale>t?s.scale:t,i=s.scale<i?s.scale:i,this._levelToLOD[s.level]=s})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],l=t[r+1];if(s<=e)return r;if(l===e)return r+1;if(s>e&&l<e)return r+Math.log(s/e)/Math.log(s/l)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let l,d;if(typeof t=="number")l=t,d=i;else if(ms(t.spatialReference,this.spatialReference))l=t.x,d=t.y,r=i;else{const _=V6(t,this.spatialReference);if(ce(_))return null;l=_.x,d=_.y,r=i}const y=s.resolution*this.size[0],v=s.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Va()}),r.level=e,r.row=Math.floor((this.origin.y-d)/v+.001),r.col=Math.floor((l-this.origin.x)/y+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=nd.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===nd.ExtrapolateOptions.POWER_OF_TWO){const d=this.lods[this.lods.length-1];d.level<e.level&&(i=d)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,l=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Va()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*l,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+l}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return nd.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const l=this.lods[s],d=l.resolution*t;i.push(new QP({level:l.level,scale:l.scale,resolution:d}))}return new nd({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};g([S({type:Number,json:{write:!0}})],An.prototype,"compressionQuality",void 0),g([S({type:Number,json:{write:!0}})],An.prototype,"dpi",void 0),g([S({type:String,json:{read:EU.read,write:EU.write,origins:{"web-scene":{read:!1,write:!1}}}})],An.prototype,"format",void 0),g([S({readOnly:!0})],An.prototype,"isWrappable",null),g([S({type:ut,json:{write:!0}})],An.prototype,"origin",void 0),g([nt("origin")],An.prototype,"readOrigin",null),g([S({type:[QP],value:null,json:{write:!0}})],An.prototype,"lods",null),g([S({readOnly:!0})],An.prototype,"minScale",void 0),g([S({readOnly:!0})],An.prototype,"maxScale",void 0),g([S({readOnly:!0})],An.prototype,"scales",void 0),g([S({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],An.prototype,"size",void 0),g([nt("size",["rows","cols"])],An.prototype,"readSize",null),g([pt("size",{cols:{type:Yi},rows:{type:Yi}})],An.prototype,"writeSize",null),g([S({type:Ct,json:{write:!0}})],An.prototype,"spatialReference",void 0),An=nd=g([Q("esri.layers.support.TileInfo")],An),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(An||(An={}));const tb=An,M9={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},uE={xsmall:544,small:768,medium:992,large:1200};function F4e(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function cE(e,t){return t?M9[e].valueToClassName[t].split(" "):[]}const D4e=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new ir,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=uE}initialize(){this._breakpointsHandles.add(Pe(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Jt))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Oi(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=F4e(i);if(!r){const s=JSON.stringify(uE,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:uE,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=ao.acquire(),r=ao.acquire();let s,l=!1;for(s in M9){const d=this[s],y=M9[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});d!==y&&(l=!0,this[s]=y,cE(s,d).forEach(v=>r.push(v)),cE(s,y).forEach(v=>i.push(v)))}l&&(this._applyClassNameChanges(i,r),ao.release(i),ao.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(l=>s.classList.remove(l)),i.forEach(l=>s.classList.add(l)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in M9)cE(r,this[r]).forEach(s=>i.classList.remove(s))}};return g([S()],t.prototype,"breakpoints",null),g([S()],t.prototype,"orientation",void 0),g([S()],t.prototype,"widthBreakpoint",void 0),g([S()],t.prototype,"heightBreakpoint",void 0),t=g([Q("esri.views.BreakpointsOwner")],t),t};function eR(e){return typeof e=="string"?document.getElementById(e):e}function yte(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function TU(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function IU(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var j4e="[object Object]";function z4e(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function V4e(e,t){return function(i){return e(t(i))}}var U4e=Function.prototype,mte=Object.prototype,gte=U4e.toString,B4e=mte.hasOwnProperty,G4e=gte.call(Object),q4e=mte.toString,H4e=V4e(Object.getPrototypeOf,Object);function W4e(e){return!!e&&typeof e=="object"}function J4e(e){if(!W4e(e)||q4e.call(e)!=j4e||z4e(e))return!1;var t=H4e(e);if(t===null)return!0;var i=B4e.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&gte.call(i)==G4e}var K4e=J4e,P0={exports:{}},Br={},o3={exports:{}},K1={};function vte(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Z4e(e,t,i){}function Y4e(e,t,i){}var X4e=/javascript\s*\:/img;function Q4e(e,t){return X4e.test(t)?"":t}K1.whiteList=vte();K1.getDefaultWhiteList=vte;K1.onAttr=Z4e;K1.onIgnoreAttr=Y4e;K1.safeAttrValue=Q4e;var eSe={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},mw=eSe;function tSe(e,t){e=mw.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,l=0,d="";function y(){if(!r){var M=mw.trim(e.slice(s,l)),k=M.indexOf(":");if(k!==-1){var O=mw.trim(M.slice(0,k)),R=mw.trim(M.slice(k+1));if(O){var D=t(s,d.length,O,R,M);D&&(d+=D+"; ")}}}s=l+1}for(;l<i;l++){var v=e[l];if(v==="/"&&e[l+1]==="*"){var _=e.indexOf("*/",l+2);if(_===-1)break;l=_+1,s=l+1,r=!1}else v==="("?r=!0:v===")"?r=!1:v===";"?r||y():v===`
`&&y()}return mw.trim(d)}var iSe=tSe,Rx=K1,rSe=iSe;function CU(e){return e==null}function nSe(e){var t={};for(var i in e)t[i]=e[i];return t}function wte(e){e=nSe(e||{}),e.whiteList=e.whiteList||Rx.whiteList,e.onAttr=e.onAttr||Rx.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Rx.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Rx.safeAttrValue,this.options=e}wte.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,l=i.onIgnoreAttr,d=i.safeAttrValue,y=rSe(e,function(v,_,M,k,O){var R=r[M],D=!1;if(R===!0?D=R:typeof R=="function"?D=R(k):R instanceof RegExp&&(D=R.test(k)),D!==!0&&(D=!1),k=d(M,k),!!k){var z={position:_,sourcePosition:v,source:O,isWhite:D};if(D){var B=s(M,k,z);return CU(B)?M+":"+k:B}else{var B=l(M,k,z);if(!CU(B))return B}}});return y};var sSe=wte;(function(e,t){var i=K1,r=sSe;function s(d,y){var v=new r(y);return v.process(d)}t=e.exports=s,t.FilterCSS=r;for(var l in i)t[l]=i[l]})(o3,o3.exports);var tR={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},oSe=o3.exports.FilterCSS,aSe=o3.exports.getDefaultWhiteList,wS=tR;function bte(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var _te=new oSe;function lSe(e,t,i){}function uSe(e,t,i){}function cSe(e,t,i){}function hSe(e,t,i){}function xte(e){return e.replace(dSe,"&lt;").replace(fSe,"&gt;")}function pSe(e,t,i,r){if(i=Ite(i),t==="href"||t==="src"){if(i=wS.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(Nx.lastIndex=0,Nx.test(i))return""}else if(t==="style"){if(kU.lastIndex=0,kU.test(i)||(AU.lastIndex=0,AU.test(i)&&(Nx.lastIndex=0,Nx.test(i))))return"";r!==!1&&(r=r||_te,i=r.process(i))}return i=Cte(i),i}var dSe=/</g,fSe=/>/g,ySe=/"/g,mSe=/&quot;/g,gSe=/&#([a-zA-Z0-9]*);?/gim,vSe=/&colon;?/gim,wSe=/&newline;?/gim,Nx=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,kU=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,AU=/u\s*r\s*l\s*\(.*/gi;function Ste(e){return e.replace(ySe,"&quot;")}function $te(e){return e.replace(mSe,'"')}function Mte(e){return e.replace(gSe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Ete(e){return e.replace(vSe,":").replace(wSe," ")}function Tte(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return wS.trim(t)}function Ite(e){return e=$te(e),e=Mte(e),e=Ete(e),e=Tte(e),e}function Cte(e){return e=Ste(e),e=xte(e),e}function bSe(){return""}function _Se(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(d){return i?!0:wS.indexOf(e,d)!==-1}var s=[],l=!1;return{onIgnoreTag:function(d,y,v){if(r(d))if(v.isClosing){var _="[/removed]",M=v.position+_.length;return s.push([l!==!1?l:v.position,M]),l=!1,_}else return l||(l=v.position),"[removed]";else return t(d,y,v)},remove:function(d){var y="",v=0;return wS.forEach(s,function(_){y+=d.slice(v,_[0]),v=_[1]}),y+=d.slice(v),y}}}function xSe(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function SSe(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Br.whiteList=bte();Br.getDefaultWhiteList=bte;Br.onTag=lSe;Br.onIgnoreTag=uSe;Br.onTagAttr=cSe;Br.onIgnoreTagAttr=hSe;Br.safeAttrValue=pSe;Br.escapeHtml=xte;Br.escapeQuote=Ste;Br.unescapeQuote=$te;Br.escapeHtmlEntities=Mte;Br.escapeDangerHtml5Entities=Ete;Br.clearNonPrintableCharacter=Tte;Br.friendlyAttrValue=Ite;Br.escapeAttrValue=Cte;Br.onIgnoreTagStripAll=bSe;Br.StripTagBody=_Se;Br.stripCommentTag=xSe;Br.stripBlankChar=SSe;Br.cssFilter=_te;Br.getDefaultCSSWhiteList=aSe;var r$={},Md=tR;function $Se(e){var t=Md.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=Md.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function MSe(e){return e.slice(0,2)==="</"}function ESe(e,t,i){var r="",s=0,l=!1,d=!1,y=0,v=e.length,_="",M="";e:for(y=0;y<v;y++){var k=e.charAt(y);if(l===!1){if(k==="<"){l=y;continue}}else if(d===!1){if(k==="<"){r+=i(e.slice(s,y)),l=y,s=y;continue}if(k===">"){r+=i(e.slice(s,l)),M=e.slice(l,y+1),_=$Se(M),r+=t(l,r.length,_,M,MSe(M)),s=y+1,l=!1;continue}if(k==='"'||k==="'")for(var O=1,R=e.charAt(y-O);R.trim()===""||R==="=";){if(R==="="){d=k;continue e}R=e.charAt(y-++O)}}else if(k===d){d=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var TSe=/[^a-zA-Z0-9_:\.\-]/gim;function ISe(e,t){var i=0,r=[],s=!1,l=e.length;function d(k,O){if(k=Md.trim(k),k=k.replace(TSe,"").toLowerCase(),!(k.length<1)){var R=t(k,O||"");R&&r.push(R)}}for(var y=0;y<l;y++){var v=e.charAt(y),_,M;if(s===!1&&v==="="){s=e.slice(i,y),i=y+1;continue}if(s!==!1&&y===i&&(v==='"'||v==="'")&&e.charAt(y-1)==="="){if(M=e.indexOf(v,y+1),M===-1)break;_=Md.trim(e.slice(i+1,M)),d(s,_),s=!1,y=M,i=y+1;continue}if(/\s|\n|\t/.test(v))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(M=CSe(e,y),M===-1){_=Md.trim(e.slice(i,y)),d(_),s=!1,i=y+1;continue}else{y=M-1;continue}else if(M=kSe(e,y-1),M===-1){_=Md.trim(e.slice(i,y)),_=OU(_),d(s,_),s=!1,i=y+1;continue}else continue}return i<e.length&&(s===!1?d(e.slice(i)):d(s,OU(Md.trim(e.slice(i))))),Md.trim(r.join(" "))}function CSe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function kSe(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function ASe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function OU(e){return ASe(e)?e.substr(1,e.length-2):e}r$.parseTag=ESe;r$.parseAttr=ISe;var OSe=o3.exports.FilterCSS,gu=Br,kte=r$,LSe=kte.parseTag,PSe=kte.parseAttr,E9=tR;function Fx(e){return e==null}function RSe(e){var t=E9.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=E9.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=E9.trim(e.slice(0,-1))),{html:e,closing:i}}function NSe(e){var t={};for(var i in e)t[i]=e[i];return t}function Ate(e){e=NSe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=gu.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||gu.whiteList,e.onTag=e.onTag||gu.onTag,e.onTagAttr=e.onTagAttr||gu.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||gu.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||gu.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||gu.safeAttrValue,e.escapeHtml=e.escapeHtml||gu.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new OSe(e.css))}Ate.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,l=i.onIgnoreTag,d=i.onTagAttr,y=i.onIgnoreTagAttr,v=i.safeAttrValue,_=i.escapeHtml,M=t.cssFilter;i.stripBlankChar&&(e=gu.stripBlankChar(e)),i.allowCommentTag||(e=gu.stripCommentTag(e));var k=!1;if(i.stripIgnoreTagBody){var k=gu.StripTagBody(i.stripIgnoreTagBody,l);l=k.onIgnoreTag}var O=LSe(e,function(R,D,z,B,V){var q={sourcePosition:R,position:D,isClosing:V,isWhite:r.hasOwnProperty(z)},J=s(z,B,q);if(!Fx(J))return J;if(q.isWhite){if(q.isClosing)return"</"+z+">";var ne=RSe(B),re=r[z],ue=PSe(ne.html,function(xe,Ne){var Ce=E9.indexOf(re,xe)!==-1,Ge=d(z,xe,Ne,Ce);if(!Fx(Ge))return Ge;if(Ce)return Ne=v(z,xe,Ne,M),Ne?xe+'="'+Ne+'"':xe;var Ge=y(z,xe,Ne,Ce);return Fx(Ge)?void 0:Ge}),B="<"+z;return ue&&(B+=" "+ue),ne.closing&&(B+=" /"),B+=">",B}else{var J=l(z,B,q);return Fx(J)?_(B):J}},_);return k&&(O=k.remove(O)),O};var FSe=Ate;(function(e,t){var i=Br,r=r$,s=FSe;function l(v,_){var M=new s(_);return M.process(v)}t=e.exports=l,t.filterXSS=l,t.FilterXSS=s;for(var d in i)t[d]=i[d];for(var d in r)t[d]=r[d];function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=e.exports)})(P0,P0.exports);var DSe=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(l,d,y,v){return l==="a"&&d==="href"||(l==="img"||l==="source")&&d==="src"?r.sanitizeUrl(y):P0.exports.safeAttrValue(l,d,y,v)}};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(l){l==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):s[l]=t[l]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new P0.exports.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,s=r===void 0?!0:r,l=this._trim(t.substring(0,t.indexOf(":"))),d=t==="/",y=/^#/.test(t),v=l&&this.allowedProtocols.indexOf(l.toLowerCase())>-1;return d||y||v?P0.exports.escapeAttrValue(t):!l&&!s?P0.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):P0.exports.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,l=void 0;if(Array.isArray(t))l=t.reduce(function(y,v){var _=r.validate(v,i);return _.isValid?y.concat([v]):(s=!0,y.concat([_.sanitized]))},[]);else if(K4e(t)){var d=Object.keys(t);l=d.reduce(function(y,v){var _=t[v],M=r.validate(_,i);return M.isValid?y[v]=_:(s=!0,y[v]=M.sanitized),y},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return s?l:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const n$=new Map;function Ote(){n$.clear()}function jSe(e){return n$.get(e)}function zSe(e,t){n$.set(e,t)}function hE(e){n$.delete(e)}var N1,Hg,VSe=function(e){if("WebkitTransition"in e.style)N1="webkitTransitionEnd",Hg="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");N1="transitionend",Hg="animationend"}},Lte=function(e){N1||VSe(e)},USe=function(e,t){return t===void 0&&(t=e+"-active"),function(i){Lte(i);var r=!1,s=function(l){r||(r=!0,i.removeEventListener(N1,s),i.removeEventListener(Hg,s),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(N1,s),i.addEventListener(Hg,s),requestAnimationFrame(function(){i.classList.add(t)})}},BSe=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){Lte(i);var s=!1,l=function(d){s||(s=!0,i.removeEventListener(N1,l),i.removeEventListener(Hg,l),r())};i.classList.add(e),i.addEventListener(N1,l),i.addEventListener(Hg,l),requestAnimationFrame(function(){i.classList.add(t)})}};const GSe=Ke.getLogger("esri.widgets.support.widgetUtils");function Gm(e){const t=ao.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],l=typeof s;if(l==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(l==="object")for(const d in s)s[d]&&t.push(d)}const i=t.join(" ");return ao.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{Ote();for(const r of i)e.get(r.target)(r)});return(i,r,s)=>(e.has(i)&&GSe.error("Already observing element",i),e.set(i,r),t.observe(i,s),V1(()=>{t.unobserve(i),e.delete(i)}))})();function $l(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function LU(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function HC(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function qSe(e,t){return(e==="enter"?USe:BSe)(t)}const HSe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],WSe=HSe.reduce((e,t)=>(e[t]=[],e),{}),JSe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Pte=new DSe({whiteList:WSe,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(JSe.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function KSe(e){return e==="Enter"||e===" "}const Rte="http://www.w3.org/",s$=`${Rte}2000/svg`,Nte=`${Rte}1999/xlink`;let bS,PU=[],iR=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},rR=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Fte=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},ZSe=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(rR(e[r],t))return r}return-1},pE=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let l=s.properties;if(!(l&&(l.key===void 0?l.bind:l.key))){for(let d=0;d<e.length;d++)if(d!==t){let y=e[d];if(rR(y,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},YSe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},WC=[],JC=!1,Dte=e=>{(e.children||[]).forEach(Dte),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},RU=()=>{JC=!1,WC.forEach(Dte),WC.length=0},NU=e=>{WC.push(e),JC||(JC=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(RU,{timeout:16}):setTimeout(RU,16))},FU=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),NU(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),NU(e))},XSe=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),l=s.length;for(let d=0;d<l;d++){let y=s[d],v=t[y];if(y==="className")throw new Error('Property "className" is not supported, use "class".');if(y==="class")KC(e,v,!0);else if(y==="classes"){let _=Object.keys(v),M=_.length;for(let k=0;k<M;k++){let O=_[k];v[O]&&e.classList.add(O)}}else if(y==="styles"){let _=Object.keys(v),M=_.length;for(let k=0;k<M;k++){let O=_[k],R=v[O];R&&(Fte(R),i.styleApplyer(e,O,R))}}else if(y!=="key"&&v!=null){let _=typeof v;_==="function"?(y.lastIndexOf("on",0)===0&&(r&&(v=r(y,v,e,t)),y==="oninput"&&function(){let M=v;v=function(k){M.apply(this,[k]),k.target["oninput-value"]=k.target.value}}()),e[y]=v):i.namespace===s$?y==="href"?e.setAttributeNS(Nte,y,v):e.setAttribute(y,v):_==="string"&&y!=="value"?y==="innerHTML"?e[y]=Pte.sanitize(v):e.setAttribute(y,v):e[y]=v}}},QSe=(e,t,i)=>{if(t)for(let r of t)qm(r,e,void 0,i)},jte=(e,t,i)=>{QSe(e,t.children,i),t.text&&(e.textContent=t.text),XSe(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},qm=(e,t,i,r)=>{let s,l=0,d=e.vnodeSelector,y=t.ownerDocument;if(d==="")s=e.domNode=y.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let v=0;v<=d.length;++v){let _=d.charAt(v);if(v===d.length||_==="."||_==="#"){let M=d.charAt(l-1),k=d.slice(l,v);M==="."?s.classList.add(k):M==="#"?s.id=k:(k==="svg"&&(r=iR(r,{namespace:s$})),r.namespace!==void 0?s=e.domNode=y.createElementNS(r.namespace,k):(s=e.domNode=e.domNode||y.createElement(k),k==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),l=v+1}}jte(s,e,r)}},KC=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},e6e=(e,t,i,r)=>{if(!i)return;let s=!1,l=Object.keys(i),d=l.length;for(let y=0;y<d;y++){let v=l[y],_=i[v],M=t[v];if(v==="class")M!==_&&(KC(e,M,!1),KC(e,_,!0));else if(v==="classes"){let k=e.classList,O=Object.keys(_),R=O.length;for(let D=0;D<R;D++){let z=O[D],B=!!_[z];B!==!!M[z]&&(s=!0,B?k.add(z):k.remove(z))}}else if(v==="styles"){let k=Object.keys(_),O=k.length;for(let R=0;R<O;R++){let D=k[R],z=_[D];z!==M[D]&&(s=!0,z?(Fte(z),r.styleApplyer(e,D,z)):r.styleApplyer(e,D,""))}}else if(_||typeof M!="string"||(_=""),v==="value"){let k=e[v];k!==_&&(e["oninput-value"]?k===e["oninput-value"]:_!==M)&&(e[v]=_,e["oninput-value"]=void 0),_!==M&&(s=!0)}else if(_!==M){let k=typeof _;k==="function"&&r.eventHandlerInterceptor||(r.namespace===s$?v==="href"?e.setAttributeNS(Nte,v,_):e.setAttribute(v,_):k==="string"?v==="innerHTML"?e[v]=Pte.sanitize(_):v==="role"&&_===""?e.removeAttribute(v):e.setAttribute(v,_):e[v]!==_&&(e[v]=_),s=!0)}}return s},t6e=(e,t,i,r,s)=>{if(i===r)return!1;r=r||PU;let l,d=(i=i||PU).length,y=r.length,v=0,_=0,M=!1;for(;_<y;){let k=v<d?i[v]:void 0,O=r[_];if(k!==void 0&&rR(k,O))M=bS(k,O,s)||M,v++;else{let R=ZSe(i,O,v+1);if(R>=0){for(l=v;l<R;l++)FU(i[l]),pE(i,l,e,"removed");M=bS(i[R],O,s)||M,v=R+1}else qm(O,t,v<d?i[v].domNode:void 0,s),YSe(O),pE(r,_,e,"added")}_++}if(d>v)for(l=v;l<d;l++)FU(i[l]),pE(i,l,e,"removed");return M};bS=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let l=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let d=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(d,r),t.domNode=d,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=iR(i,{namespace:s$})),e.text!==t.text&&(l=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,l=t6e(t,r,e.children,t.children,i)||l,l=e6e(r,e.properties,t.properties,i)||l,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return l&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let gw=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,bS(r,i,t)},domNode:e.domNode});const i6e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Gy=e=>iR(i6e,e),Bd={create:(e,t)=>(t=Gy(t),qm(e,document.createElement("div"),void 0,t),gw(e,t)),append:(e,t,i)=>(i=Gy(i),qm(t,e,void 0,i),gw(t,i)),insertBefore:(e,t,i)=>(i=Gy(i),qm(t,e.parentNode,e,i),gw(t,i)),merge:(e,t,i)=>(i=Gy(i),t.domNode=e,jte(e,t,i),gw(t,i)),replace:(e,t,i)=>(i=Gy(i),qm(t,e.parentNode,e,i),e.parentNode.removeChild(e),gw(t,i))},zte,r6e=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};zte=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let n6e=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?zte(i.children,s=>s.domNode===r):void 0}),i},s6e=(e,t,i)=>{let r=function(s){i("domEvent",s);let l=t(),d=r6e(s.currentTarget,l.domNode);d.reverse();let y,v=n6e(l.getLastRender(),d);return e.scheduleRender(),v&&(y=v.properties[`on${s.type}`].apply(v.properties.bind||this,arguments)),i("domEventProcessed",s),y};return(s,l,d,y)=>r},_S=e=>{let t,i,r=Gy(e),s=r.performanceLogger,l=!0,d=!1,y=[],v=[],_=(k,O,R)=>{let D,z=()=>D;r.eventHandlerInterceptor=s6e(t,z,s),D=k(O,R(),r),y.push(D),v.push(R)},M=()=>{if(i=void 0,l){l=!1,s("renderStart",void 0);for(let k=0;k<y.length;k++){let O=v[k]();s("rendered",void 0),y[k].update(O),s("patched",void 0)}s("renderDone",void 0),l=!0}};return t={renderNow:M,scheduleRender:()=>{i||d||(i=requestAnimationFrame(M))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),d=!0},resume:()=>{d=!1,l=!0,t.scheduleRender()},append:(k,O)=>{_(Bd.append,k,O)},insertBefore:(k,O)=>{_(Bd.insertBefore,k,O)},merge:(k,O)=>{_(Bd.merge,k,O)},replace:(k,O)=>{_(Bd.replace,k,O)},detach:k=>{for(let O=0;O<v.length;O++)if(v[O]===k)return v.splice(O,1),y.splice(O,1)[0];throw new Error("renderFunction was not found")}},t},sd=class extends st{constructor(){super(...arguments),this.items=new vt,this._watchUpdatingTracking=new pg,this._callbacks=new Map,this._projector=_S(),this._hiddenProjector=_S()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const s=()=>(r=e.render(),r);i.append(t,s),i.renderNow();const l={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const d=r.domNode.getBoundingClientRect();l.left=d.left,l.top=d.top,l.right=d.right,l.bottom=d.bottom}for(i.detach(s);t.firstChild;)t.removeChild(t.firstChild);return l}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};g([S({readOnly:!0})],sd.prototype,"surface",void 0),g([S({readOnly:!0})],sd.prototype,"items",void 0),g([S({readOnly:!0})],sd.prototype,"needsRender",null),g([S({readOnly:!0})],sd.prototype,"_watchUpdatingTracking",void 0),g([S({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],sd.prototype,"updating",void 0),sd=g([Q("esri.views.overlay.ViewOverlay")],sd);const DU=sd;function nR(e,t,i,r){let s=null,l=1e3;typeof t=="number"?(l=t,r=i):(s=t!=null?t:null,l=i);let d,y=0;const v=()=>{y=0,e.apply(r,d)},_=(...M)=>{s&&s.apply(r,M),d=M,l?y||(y=setTimeout(v,l)):v()};return _.remove=()=>{y&&(clearTimeout(y),y=0)},_.forceUpdate=()=>{y&&(clearTimeout(y),v())},_.hasPendingUpdates=()=>!!y,_}function tt(e,t){const i=t?{...t,source:e}:e;return S({aliasOf:i})}const o6e="randomUUID"in crypto;function a6e(){if(o6e)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const l6e={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},u6e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},c6e=e=>({...u6e,...e}),h6e=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},p6e=(e,t)=>e.find(t),jU=(e,t,i=!1)=>{let r=e;return t.forEach((s,l)=>{const d=r!=null&&r.children?p6e(r.children,y=>y.domNode===s):void 0;i&&!d&&l!==t.length-1||(r=d)}),r},d6e=e=>{let t;const i={...l6e,...e},r=c6e(i),s=r.performanceLogger;let l,d=!0,y=!1;const v=[],_=[],M=(O,R,D)=>{var V;let z;r.eventHandlerInterceptor=(q,J,ne,re)=>function(ue){let _e;s("domEvent",ue);const xe=h6e(ue.currentTarget,z.domNode),Ne=xe.some(Ge=>{var Ze;return customElements.get((Ze=Ge==null?void 0:Ge.tagName)==null?void 0:Ze.toLowerCase())});if(ue.eventPhase===Event.CAPTURING_PHASE||!Ne)xe.reverse(),_e=jU(z.getLastRender(),xe);else{const Ge=ue.composedPath(),Ze=Ge.slice(Ge.indexOf(ue.currentTarget),Ge.indexOf(z.domNode)).filter(lt=>lt.getRootNode()===lt.ownerDocument).reverse();_e=jU(z.getLastRender(),Ze,!0)}let Ce;return _e&&(Ce=i.handleInterceptedEvent(t,_e,this,ue)),s("domEventProcessed",ue),Ce},(V=i.postProcessProjectionOptions)==null||V.call(i,r);const B=D();z=O(R,B,r),v.push(z),_.push(D),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(z,B)};let k=()=>{if(l=void 0,d){d=!1,s("renderStart",void 0);for(let O=0;O<v.length;O++){const R=_[O]();s("rendered",void 0),v[O].update(R),s("patched",void 0)}s("renderDone",void 0),d=!0}};return i.modifyDoRenderImplementation&&(k=i.modifyDoRenderImplementation(k,v,_)),t={renderNow:k,scheduleRender:()=>{l||y||(l=requestAnimationFrame(k))},stop:()=>{l&&(cancelAnimationFrame(l),l=void 0),y=!0},resume:()=>{y=!1,d=!0,t.scheduleRender()},append:(O,R)=>{M(Bd.append,O,R)},insertBefore:(O,R)=>{M(Bd.insertBefore,O,R)},merge:(O,R)=>{M(Bd.merge,O,R)},replace:(O,R)=>{M(Bd.replace,O,R)},detach:O=>{for(let R=0;R<_.length;R++)if(_[R]===O)return _.splice(R,1),v.splice(R,1)[0];throw new Error("renderFunction was not found")}},t},si={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let qy,Vte,o$,Ute=!1,xS=!1,sR=!1,Ma=!1,zU=null,ZC=!1;const xv=typeof window<"u"?window:{};si.cssVarShim&&xv.CSS;const Pu=xv.document||{head:{}},gJe=xv.HTMLElement||class{},vs={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},SS=si.shadowDomShim&&si.shadowDom?(()=>(Pu.head.attachShadow+"").indexOf("[native")>-1)():!0,f6e=(()=>{let e=!1;try{Pu.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),y6e=e=>Promise.resolve(e),m6e=si.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,Bte=(e,t,i,r)=>{i&&i.map(([s,l,d])=>{const y=v6e(e,s),v=g6e(t,d),_=w6e(s);vs.ael(y,l,v,_),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>vs.rel(y,l,v,_))})},g6e=(e,t)=>i=>{try{si.lazyLoad||e.$hostElement$[t](i)}catch(r){G3(r)}},v6e=(e,t)=>t&4?Pu:t&8?xv:t&16?Pu.body:e,w6e=e=>f6e?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,VU="http://www.w3.org/1999/xlink",F1=(e,t="")=>()=>{},UU=new WeakMap,b6e=(e,t,i)=>{let r=ES.get(e);m6e&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,ES.set(e,r)},_6e=(e,t,i,r)=>{let s=Gte(t,i),l=ES.get(s);if(e=e.nodeType===11?e:Pu,l)if(typeof l=="string"){e=e.head||e;let d=UU.get(e),y;d||UU.set(e,d=new Set),d.has(s)||(y=Pu.createElement("style"),y.innerHTML=l,e.insertBefore(y,e.querySelector("link")),d&&d.add(s))}else e.adoptedStyleSheets.includes(l)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,l]);return s},x6e=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,s=F1("attachStyles",t.$tagName$),l=_6e(SS&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=l,i.classList.add(l+"-h"),r&2&&i.classList.add(l+"-s")),s()},Gte=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),S6e=e=>Q6e.map(t=>t(e)).find(t=>!!t),BU={},$6e="http://www.w3.org/2000/svg",M6e="http://www.w3.org/1999/xhtml",E6e=e=>e!=null,oR=e=>(e=typeof e,e==="object"||e==="function"),qte=(e,t,...i)=>{let r=null,s=null,l=null,d=!1,y=!1,v=[];const _=k=>{for(let O=0;O<k.length;O++)r=k[O],Array.isArray(r)?_(r):r!=null&&typeof r!="boolean"&&((d=typeof e!="function"&&!oR(r))&&(r=String(r)),d&&y?v[v.length-1].$text$+=r:v.push(d?$S(null,r):r),y=d)};if(_(i),t&&(si.isDev&&e==="input"&&k6e(t),si.vdomKey&&t.key&&(s=t.key),si.slotRelocation&&t.name&&(l=t.name),si.vdomClass)){const k=t.className||t.class;k&&(t.class=typeof k!="object"?k:Object.keys(k).filter(O=>k[O]).join(" "))}if(si.isDev&&v.some(Hte)&&X6e(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),si.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,v,I6e);const M=$S(e,null);return M.$attrs$=t,v.length>0&&(M.$children$=v),si.vdomKey&&(M.$key$=s),si.slotRelocation&&(M.$name$=l),M},$S=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return si.vdomAttribute&&(i.$attrs$=null),si.vdomKey&&(i.$key$=null),si.slotRelocation&&(i.$name$=null),i},T6e={},Hte=e=>e&&e.$tag$===T6e,I6e={forEach:(e,t)=>e.map(GU).forEach(t),map:(e,t)=>e.map(GU).map(t).map(C6e)},GU=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),C6e=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),qte(e.vtag,i,...e.vchildren||[])}const t=$S(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},k6e=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),s=t.indexOf("min"),l=t.indexOf("max"),d=t.indexOf("step");(i<r||i<s||i<l||i<d)&&iie('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},qU=(e,t,i,r,s,l)=>{if(i!==r){let d=KU(e,t),y=t.toLowerCase();if(t==="class"){const v=e.classList,_=HU(i),M=HU(r);v.remove(..._.filter(k=>k&&!M.includes(k))),v.add(...M.filter(k=>k&&!_.includes(k)))}else if(t==="style"){for(const v in i)(!r||r[v]==null)&&(v.includes("-")?e.style.removeProperty(v):e.style[v]="");for(const v in r)(!i||r[v]!==i[v])&&(v.includes("-")?e.style.setProperty(v,r[v]):e.style[v]=r[v])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):KU(xv,y)?t=y.slice(2):t=y[2]+t.slice(3),i&&vs.rel(e,t,i,!1),r&&vs.ael(e,t,r,!1);else{const v=oR(r);if((d||v&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{let M=r==null?"":r;t==="list"?d=!1:(i==null||e[t]!=M)&&(e[t]=M)}}catch{}let _=!1;y!==(y=y.replace(/^xlink\:?/,""))&&(t=y,_=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(_?e.removeAttributeNS(VU,t):e.removeAttribute(t)):(!d||l&4||s)&&!v&&(r=r===!0?"":r,_?e.setAttributeNS(VU,t,r):e.setAttribute(t,r))}}},A6e=/\s/,HU=e=>e?e.split(A6e):[],Wte=(e,t,i,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,l=e&&e.$attrs$||BU,d=t.$attrs$||BU;for(r in l)r in d||qU(s,r,l[r],void 0,i,t.$flags$);for(r in d)qU(s,r,l[r],d[r],i,t.$flags$)},MS=(e,t,i,r)=>{let s=t.$children$[i],l=0,d,y,v;if(Ute||(sR=!0,s.$tag$==="slot"&&(qy&&r.classList.add(qy+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)d=s.$elm$=Pu.createTextNode(s.$text$);else if(s.$flags$&1)d=s.$elm$=Pu.createTextNode("");else{if(Ma||(Ma=s.$tag$==="svg"),d=s.$elm$=Pu.createElementNS(Ma?$6e:M6e,s.$flags$&2?"slot-fb":s.$tag$),Ma&&s.$tag$==="foreignObject"&&(Ma=!1),Wte(null,s,Ma),E6e(qy)&&d["s-si"]!==qy&&d.classList.add(d["s-si"]=qy),s.$children$)for(l=0;l<s.$children$.length;++l)y=MS(e,s,l,d),y&&d.appendChild(y);s.$tag$==="svg"?Ma=!1:d.tagName==="foreignObject"&&(Ma=!0)}return d["s-hn"]=o$,s.$flags$&3&&(d["s-sr"]=!0,d["s-cr"]=Vte,d["s-sn"]=s.$name$||"",v=e&&e.$children$&&e.$children$[i],v&&v.$tag$===s.$tag$&&e.$elm$&&a3(e.$elm$,!1)),d},a3=(e,t)=>{vs.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==o$&&s["s-ol"]&&(Zte(s).insertBefore(s,aR(s)),s["s-ol"].remove(),s["s-ol"]=void 0,sR=!0),t&&a3(s,t)}vs.$flags$&=-2},Jte=(e,t,i,r,s,l)=>{let d=e["s-cr"]&&e["s-cr"].parentNode||e,y;for(d.shadowRoot&&d.tagName===o$&&(d=d.shadowRoot);s<=l;++s)r[s]&&(y=MS(null,i,s,e),y&&(r[s].$elm$=y,d.insertBefore(y,aR(t))))},Kte=(e,t,i,r,s)=>{for(;t<=i;++t)(r=e[t])&&(s=r.$elm$,Qte(r),xS=!0,s["s-ol"]?s["s-ol"].remove():a3(s,!0),s.remove())},O6e=(e,t,i,r)=>{let s=0,l=0,d=0,y=0,v=t.length-1,_=t[0],M=t[v],k=r.length-1,O=r[0],R=r[k],D,z;for(;s<=v&&l<=k;)if(_==null)_=t[++s];else if(M==null)M=t[--v];else if(O==null)O=r[++l];else if(R==null)R=r[--k];else if(Dx(_,O))Hy(_,O),_=t[++s],O=r[++l];else if(Dx(M,R))Hy(M,R),M=t[--v],R=r[--k];else if(Dx(_,R))(_.$tag$==="slot"||R.$tag$==="slot")&&a3(_.$elm$.parentNode,!1),Hy(_,R),e.insertBefore(_.$elm$,M.$elm$.nextSibling),_=t[++s],R=r[--k];else if(Dx(M,O))(_.$tag$==="slot"||R.$tag$==="slot")&&a3(M.$elm$.parentNode,!1),Hy(M,O),e.insertBefore(M.$elm$,_.$elm$),M=t[--v],O=r[++l];else{for(d=-1,y=s;y<=v;++y)if(t[y]&&t[y].$key$!==null&&t[y].$key$===O.$key$){d=y;break}d>=0?(z=t[d],z.$tag$!==O.$tag$?D=MS(t&&t[l],i,d,e):(Hy(z,O),t[d]=void 0,D=z.$elm$),O=r[++l]):(D=MS(t&&t[l],i,l,e),O=r[++l]),D&&Zte(_.$elm$).insertBefore(D,aR(_.$elm$))}s>v?Jte(e,r[k+1]==null?null:r[k+1].$elm$,i,r,l,k):l>k&&Kte(t,s,v)},Dx=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,aR=e=>e&&e["s-ol"]||e,Zte=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Hy=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,l=t.$tag$,d=t.$text$;let y;d===null?(Ma=l==="svg"?!0:l==="foreignObject"?!1:Ma,l==="slot"||Wte(e,t,Ma),r!==null&&s!==null?O6e(i,r,t,s):s!==null?(e.$text$!==null&&(i.textContent=""),Jte(i,null,t,s,0,s.length-1)):r!==null&&Kte(r,0,r.length-1),Ma&&l==="svg"&&(Ma=!1)):(y=i["s-cr"])?y.parentNode.textContent=d:e.$text$!==d&&(i.data=d)},Yte=e=>{let t=e.childNodes,i,r,s,l,d,y;for(r=0,s=t.length;r<s;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(d=i["s-sn"],i.hidden=!1,l=0;l<s;l++)if(y=t[l].nodeType,t[l]["s-hn"]!==i["s-hn"]||d!==""){if(y===1&&d===t[l].getAttribute("slot")){i.hidden=!0;break}}else if(y===1||y===3&&t[l].textContent.trim()!==""){i.hidden=!0;break}}Yte(i)}},$u=[],Xte=e=>{let t,i,r,s,l,d,y=0,v=e.childNodes,_=v.length;for(;y<_;y++){if(t=v[y],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=t["s-sn"],d=r.length-1;d>=0;d--)i=r[d],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(WU(i,s)?(l=$u.find(M=>M.$nodeToRelocate$===i),xS=!0,i["s-sn"]=i["s-sn"]||s,l?l.$slotRefNode$=t:$u.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&$u.map(M=>{WU(M.$nodeToRelocate$,i["s-sn"])&&(l=$u.find(k=>k.$nodeToRelocate$===i),l&&!M.$slotRefNode$&&(M.$slotRefNode$=l.$slotRefNode$))})):$u.some(M=>M.$nodeToRelocate$===i)||$u.push({$nodeToRelocate$:i}));t.nodeType===1&&Xte(t)}},WU=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",Qte=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Qte)},L6e=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,s=e.$vnode$||$S(null,null),l=Hte(t)?t:qte(null,null,t);o$=i.tagName,r.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},r.$attrsToReflect$.map(([d,y])=>l.$attrs$[y]=i[d])),l.$tag$=null,l.$flags$|=4,e.$vnode$=l,l.$elm$=s.$elm$=i.shadowRoot||i,qy=i["s-sc"],Vte=i["s-cr"],Ute=SS&&(r.$flags$&1)!==0,xS=!1,Hy(s,l);{if(vs.$flags$|=1,sR){Xte(l.$elm$);let d,y,v,_,M,k,O=0;for(;O<$u.length;O++)d=$u[O],y=d.$nodeToRelocate$,y["s-ol"]||(v=Pu.createTextNode(""),v["s-nr"]=y,y.parentNode.insertBefore(y["s-ol"]=v,y));for(O=0;O<$u.length;O++)if(d=$u[O],y=d.$nodeToRelocate$,d.$slotRefNode$){for(_=d.$slotRefNode$.parentNode,M=d.$slotRefNode$.nextSibling,v=y["s-ol"];v=v.previousSibling;)if(k=v["s-nr"],k&&k["s-sn"]===y["s-sn"]&&_===k.parentNode&&(k=k.nextSibling,!k||!k["s-nr"])){M=k;break}(!M&&_!==y.parentNode||y.nextSibling!==M)&&y!==M&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),_.insertBefore(y,M))}else y.nodeType===1&&(y.hidden=!0)}xS&&Yte(l.$elm$),vs.$flags$&=-2,$u.length=0}},P6e=e=>si.lazyLoad?Sv(e).$hostElement$:e,vJe=(e,t,i)=>{const r=P6e(e);return{emit:s=>(si.isDev&&!r.isConnected&&iie(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),R6e(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s}))}},R6e=(e,t,i)=>{const r=vs.ce(t,i);return e.dispatchEvent(r),r},N6e=(e,t)=>{},lR=(e,t)=>(e.$flags$|=16,N6e(e,e.$ancestorComponent$),i$e(()=>F6e(e,t))),F6e=(e,t)=>{const i=e.$hostElement$,r=F1("scheduleUpdate",e.$cmpMeta$.$tagName$),s=i;let l;return t?l=yg(s,"componentWillLoad"):l=yg(s,"componentWillUpdate"),l=JU(l,()=>yg(s,"componentWillRender")),r(),JU(l,()=>D6e(e,s,t))},D6e=async(e,t,i)=>{const r=e.$hostElement$,s=F1("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&x6e(e);const l=F1("render",e.$cmpMeta$.$tagName$);j6e(e,t,r),l(),s(),z6e(e)},j6e=(e,t,i)=>{try{zU=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(si.hasRenderFn||si.reflect)&&(si.vdomRender||si.reflect)&&(si.hydrateServerSide||L6e(e,t))}catch(y){G3(y,e.$hostElement$)}return zU=null,null},z6e=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=F1("postUpdate",t),s=i;e.$ancestorComponent$,yg(s,"componentDidRender"),e.$flags$&64?(yg(s,"componentDidUpdate"),r()):(e.$flags$|=64,yg(s,"componentDidLoad"),r())},wJe=e=>{if(si.updatable){const t=Sv(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&lR(t,!1),i}return!1},yg=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){G3(r)}},JU=(e,t)=>e&&e.then?e.then(t):t(),V6e=(e,t)=>e!=null&&!oR(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,U6e=(e,t)=>Sv(e).$instanceValues$.get(t),B6e=(e,t,i,r)=>{const s=Sv(e),l=e,d=s.$instanceValues$.get(t),y=s.$flags$,v=l;i=V6e(i,r.$members$[t][0]);const _=Number.isNaN(d)&&Number.isNaN(i);if(i!==d&&!_){s.$instanceValues$.set(t,i);{if(r.$watchers$&&y&128){const k=r.$watchers$[t];k&&k.map(O=>{try{v[O](i,d,t)}catch(R){G3(R,l)}})}if((y&18)===2){if(v.componentShouldUpdate&&v.componentShouldUpdate(i,d,t)===!1)return;lR(s,!1)}}}},G6e=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),s=e.prototype;r.map(([l,[d]])=>{(d&31||d&32)&&Object.defineProperty(s,l,{get(){return U6e(this,l)},set(y){B6e(this,l,y,t)},configurable:!0,enumerable:!0})});{const l=new Map;s.attributeChangedCallback=function(d,y,v){vs.jmp(()=>{const _=l.get(d);if(this.hasOwnProperty(_))v=this[_],delete this[_];else if(s.hasOwnProperty(_)&&typeof this[_]=="number"&&this[_]==v)return;this[_]=v===null&&typeof this[_]=="boolean"?!1:v})},e.observedAttributes=r.filter(([d,y])=>y[0]&15).map(([d,y])=>{const v=y[1]||d;return l.set(v,d),y[0]&512&&t.$attrsToReflect$.push([d,v]),v})}}return e},q6e=async(e,t,i,r,s)=>{if((t.$flags$&32)===0&&(s=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),s.style)){let d=s.style;typeof d!="string"&&(d=d[t.$modeName$=S6e(e)]);const y=Gte(i,t.$modeName$);if(!ES.has(y)){const v=F1("registerStyles",i.$tagName$);b6e(y,d,!!(i.$flags$&1)),v()}}t.$ancestorComponent$,(()=>lR(t,!0))()},H6e=e=>{},W6e=e=>{if((vs.$flags$&1)===0){const t=Sv(e),i=t.$cmpMeta$,r=F1("connectedCallback",i.$tagName$);t.$flags$&1?(Bte(e,t,i.$listeners$),H6e(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&J6e(e),i.$members$&&Object.entries(i.$members$).map(([s,[l]])=>{if(l&31&&e.hasOwnProperty(s)){const d=e[s];delete e[s],e[s]=d}}),q6e(e,t,i)),r()}},J6e=e=>{const t=e["s-cr"]=Pu.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},K6e=e=>{if((vs.$flags$&1)===0){const t=Sv(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},bJe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};si.member&&(i.$members$=t[2]),si.hostListener&&(i.$listeners$=t[3]),si.watchCallback&&(i.$watchers$=e.$watchers$),si.reflect&&(i.$attrsToReflect$=[]),si.shadowDom&&!SS&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Y6e(this,i)},connectedCallback(){W6e(this),si.connectedCallback&&r&&r.call(this)},disconnectedCallback(){K6e(this),si.disconnectedCallback&&s&&s.call(this)},__attachShadow(){SS?si.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,G6e(e,i)},_Je=e=>{const t=new URL(e,vs.$resourcesUrl$);return t.origin!==xv.location.origin?t.href:t.pathname},Z6e=e=>vs.$resourcesUrl$=e,eie=new WeakMap,Sv=e=>eie.get(e),Y6e=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return si.isDev&&(i.$renderCount$=0),si.method&&si.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),si.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),Bte(e,i,t.$listeners$),eie.set(e,i)},KU=(e,t)=>t in e,G3=(e,t)=>(0,console.error)(e,t),tie=si.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],X6e=(...e)=>console.error(...tie,...e),iie=(...e)=>console.warn(...tie,...e),ES=new Map,Q6e=[],ZU=[],rie=[],e$e=(e,t)=>i=>{e.push(i),ZC||(ZC=!0,t&&vs.$flags$&4?t$e(YC):vs.raf(YC))},YU=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){G3(i)}e.length=0},YC=()=>{YU(ZU),YU(rie),(ZC=ZU.length>0)&&vs.raf(YC)},t$e=e=>y6e().then(e),i$e=e$e(rie,!0),xJe={isDev:!!si.isDev,isBrowser:!0,isServer:!1,isTesting:!!si.isTesting};let nie;function r$e(){Z6e(Mu(li(nie)))}nie="components/assets";const sie=Symbol("widget"),n$e=[],s$e={},TS=new WeakMap;function oie(e,t){let i=t.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=oie(e,i[s]);else i=n$e;const r=t.vnodeSelector;if(uR(r)){const s=t.properties||s$e,l=s.key||r;return{vnodeSelector:"div",properties:{key:l,afterCreate:o$e,afterUpdate:a$e,afterRemoved:aie,parentWidget:e,widgetConstructor:r,widgetProperties:{...s,key:l,children:i}},children:void 0,text:void 0,domNode:null}}return t}function o$e(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:l}){var y;const d=new s(l);d.container=e,TS.set(e,d),(y=d.afterCreate)==null||y.call(d,d,e),r._internalHandles.add(V1(()=>aie(e)))}function a$e(e,t,i,{widgetProperties:r}){var l;const s=TS.get(e);s&&(s.set(r),(l=s.afterUpdate)==null||l.call(s,s,e))}function aie(e){const t=TS.get(e);t&&(t.destroy(),TS.delete(e))}function uR(e){return typeof e=="function"&&e[sie]}const XU=new Set;function l$e(e){XU.add(e),e.finally(()=>XU.delete(e))}const lie="esri.widgets.Widget",u$e=Ke.getLogger(lie);let c$e=0;const h$e={widgetIcon:"esri-icon-checkbox-unchecked"};function uie(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?uie(e[i],t[i]):e[i]=t[i]);return e}const p$e=d6e({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,l,d)=>{const y=t(r,s,l,d),v=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in l)||v){const _=r[2].toLowerCase()+r.slice(3),M=R=>y.call(l,R);l.addEventListener(_,M,v);const k=()=>l.removeEventListener(_,M,v),O=d.afterRemoved;d.afterRemoved=R=>{O==null||O(R),k()}}return y}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:l}=r,d=s===Event.CAPTURING_PHASE;let y=`on${l}${d?"capture":""}`;const v=t.properties;(y in v||(y=`on${l[0].toUpperCase()}${l.slice(1)}${d?"Capture":""}`,y in v))&&(Ote(),e.scheduleRender(),v[y].call(v.bind||i,r))}});let dE=!1,gn=class extends R3(bs.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new ir,this._projector=p$e,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=h$e.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=cv(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const l=await Qr(this._messageBundleProps.map(async({bundlePath:d,propertyName:y})=>{let v=await Hb(d);this.uiStrings&&Object.keys(this.uiStrings)&&(v=uie(Me(v),this.uiStrings)),this[y]=v}));for(const d of l)d.error&&u$e.error("widget-intl:locale-error",this.declaredClass,d.error)}await this.loadLocale()}),r$e();const i="esri-widget-uid-"+a6e(),r=this.render.bind(this);this._trackingTarget=new P6(()=>this.scheduleRender());const s=()=>{var M;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const l=r();let{properties:d}=l;d||(l.properties=d={});let{key:y,styles:v}=d;y||(d.key=i),v||(d.styles=v={}),v.display||(v.display="");let _=0;return(M=l.children)==null||M.forEach(k=>{if(uR(k.vnodeSelector))return;let{properties:O}=k;O||(k.properties=O={}),O.key||(O.key=`${this.id}--${_++}`)}),oie(this,l)};this.render=()=>{if(dE)return s();let l=jSe(this);if(l)return l;this._trackingTarget.clear(),dE=!0;try{l=np(this._trackingTarget,s)}catch(d){throw console.error(d),d}finally{dE=!1}return zSe(this,l),l},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),l$e(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(WT)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Oi(this._trackingTarget),Oi(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,hE(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return eR(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+c$e++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(hE(this),this._projector.scheduleRender())}classes(...e){return Gm.apply(this,e)}renderNow(){hE(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add(Pe(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&A6(i)&&this._internalHandles.add(this._delegatedEventNames.map(s=>O6(i,s,l=>{this.emit(s,l)})),"delegated-events")},Jt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(WT),this.scheduleRender()};this._internalHandles.add([B6(e),Pe(()=>this.uiStrings,e),gs(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};gn[sie]=!0,g([S()],gn.prototype,"_readyForTrueRender",void 0),g([S({value:null})],gn.prototype,"container",null),g([oi("container")],gn.prototype,"castContainer",null),g([S({aliasOf:"container"})],gn.prototype,"domNode",void 0),g([S()],gn.prototype,"iconClass",void 0),g([S()],gn.prototype,"id",null),g([S()],gn.prototype,"label",void 0),g([S()],gn.prototype,"renderable",null),g([S()],gn.prototype,"uiStrings",void 0),g([S()],gn.prototype,"viewModel",void 0),g([S()],gn.prototype,"visible",void 0),g([S()],gn.prototype,"key",void 0),g([S()],gn.prototype,"children",void 0),g([S()],gn.prototype,"afterCreate",void 0),g([S()],gn.prototype,"afterUpdate",void 0),g([S()],gn.prototype,"afterRemoved",void 0),gn=g([Q(lie)],gn);const rr=gn;function d$e(e){return 32+e.length}function f$e(){return 16}function SJe(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=d$e(r);break;case"number":t+=f$e();break;case"boolean":t+=4}}return t}function $Je(e,t){return 32+e.length*t}var l3;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(l3||(l3={}));function cie(e,t,i){return e.units[t][i]}function wf(e,t,i,r=2,s="abbr"){return`${fs(t,{minimumFractionDigits:r,maximumFractionDigits:r})} ${cie(e,i,s)}`}function q3(e,t,i,r=2,s="abbr"){return`${fs(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${cie(e,i,s)}`}function hie(e,t,i,r=2,s="abbr"){const l=Vee(t,i);return wf(e,xi(t,i,l),l,r,s)}function y$e(e,t,i,r=2,s="abbr"){const l=Vee(t,i);return q3(e,xi(t,i,l),l,r,s)}function m$e(e,t,i,r=2,s="abbr"){const l=Uee(t,i);return wf(e,xi(t,i,l),l,r,s)}function g$e(e,t,i,r=2,s="abbr"){const l=Uee(t,i);return q3(e,xi(t,i,l),l,r,s)}function pie(e,t,i,r=2,s="abbr"){const l=Bee(t,i);return wf(e,xi(t,i,l),l,r,s)}function v$e(e,t,i,r=2,s="abbr"){const l=Bee(t,i);return q3(e,xi(t,i,l),l,r,s)}function w$e(e,t,i,r=2,s="abbr"){const l=Gee(t,i);return wf(e,xi(t,i,l),l,r,s)}function b$e(e,t,i,r=2,s="abbr"){const l=Gee(t,i);return q3(e,xi(t,i,l),l,r,s)}function _$e(e,t,i,r=2,s="abbr"){const l=n9e(t,i);return wf(e,xi(t,i,l),l,r,s)}function x$e(e,t,i,r=2,s="abbr"){const l=s9e(t,i);return wf(e,xi(t,i,l),l,r,s)}function S$e(e,t,i,r,s){const l=Oee.normalize($$e(xi(e,t,"degrees"),i,r),0,!0);return s=hn(s,2),fs(l,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s})}function $$e(e,t,i){if(t===i)return e;switch(i){case"arithmetic":return M$e(e);case"geographic":return E$e(e)}}function M$e(e){return 90-e}function E$e(e){return-e-90}function T$e(e,t,i,r,s){i!==r&&(e=-e);const l=xi(e,t,"degrees")%360;return s=hn(s,2),fs(l,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s,signDisplay:"exceptZero"})}const QU=["B","kB","MB","GB","TB"];function I$e(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(l3.KILOBYTES));i=Bs(i,0,QU.length-1);const r=fs(t/l3.KILOBYTES**i,{maximumFractionDigits:2});return Ac(e.units.bytes[QU[i]],{fileSize:r})}function C$e(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const s=t.find(l=>l.name===i);return s?k$e({tagName:r,tags:s.tags}):null}function k$e(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(s=>s.name===t);return r&&r.value||null}var XC;const A$e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Lo=XC=class extends Ve{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=C$e({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return A$e[t]||null}clone(){return new XC({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};g([S({type:String})],Lo.prototype,"contentType",void 0),g([S()],Lo.prototype,"exifInfo",void 0),g([S({readOnly:!0})],Lo.prototype,"orientationInfo",null),g([S({type:Yi})],Lo.prototype,"id",void 0),g([S({type:String})],Lo.prototype,"globalId",void 0),g([S({type:String})],Lo.prototype,"keywords",void 0),g([S({type:String})],Lo.prototype,"name",void 0),g([S({json:{read:!1}})],Lo.prototype,"parentGlobalId",void 0),g([S({json:{read:!1}})],Lo.prototype,"parentObjectId",void 0),g([S({type:Yi})],Lo.prototype,"size",void 0),g([S({json:{read:!1}})],Lo.prototype,"url",void 0),Lo=XC=g([Q("esri.layers.support.AttachmentInfo")],Lo);const O$e=Lo;var QC;let Wn=QC=class extends Ve{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new QC(Me({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};g([S({type:[String],json:{write:!0}})],Wn.prototype,"attachmentTypes",void 0),g([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Wn.prototype,"attachmentsWhere",void 0),g([S({type:Boolean,json:{write:!0}})],Wn.prototype,"cacheHint",void 0),g([S({type:[String],json:{write:!0}})],Wn.prototype,"keywords",void 0),g([S({type:[Number],json:{write:!0}})],Wn.prototype,"globalIds",void 0),g([S({json:{write:!0}})],Wn.prototype,"name",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Wn.prototype,"num",void 0),g([S({type:[Number],json:{write:!0}})],Wn.prototype,"objectIds",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Wn.prototype,"returnMetadata",void 0),g([S({type:[Number],json:{write:!0}})],Wn.prototype,"size",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],Wn.prototype,"start",void 0),g([pt("start"),pt("num")],Wn.prototype,"writeStart",null),g([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Wn.prototype,"where",void 0),Wn=QC=g([Q("esri.rest.support.AttachmentQuery")],Wn),Wn.from=er(Wn);const ek=Wn,L$e="esri.widgets.Feature.support.featureUtils",eB=Ke.getLogger(L$e),P$e=/href=(""|'')/gi,R$e=/(\{([^\{\r\n]+)\})/g,N$e=/\'/g,die=/^\s*expression\//i,F$e=/(\n)/gi,D$e=/[\u00A0-\u9999<>\&]/gim,j$e=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,z$e=/^(?:mailto:|tel:)/,fie="relationships/",tk=kP("short-date-short-time");function yie(e){if(!ce(e))return e.get("sourceLayer")||e.get("layer")}async function IS(e,t){return typeof e=="function"?e.call(null,t):e}function mie(e=""){if(e)return!z$e.test(e.trim().toLowerCase())}function gie(e){return!!e&&die.test(e)}function V$e(e,t){if(!gie(t)||!e)return null;const i=t.replace(die,"").toLowerCase();let r;return e.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function vie(e,t){const i=V$e(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function U$e(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function B$e(e){return e.replace(P$e,"")}function CS(e,t){const i=cR(t,e);return i?i.name:e}function G$e(e,t){return e&&e.map(i=>CS(i,t))}function cR(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function wie(e){return`${e}`.trim()}function t1({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:s,fieldInfoMap:l}){return r?ik({formattedAttributes:t,template:J$e(r,{...t,...s,...e},i),fieldInfoMap:l}):""}function ik({formattedAttributes:e,template:t,fieldInfoMap:i}){return wie(B$e(Ac(Ac(t,r=>U$e(r,i)),e)))}function q$e(e,t,i=!1){const r=t[e];if(typeof r=="string"){const s="%27",l=(i?encodeURIComponent(r):r).replace(N$e,s);t[e]=l}}function H$e(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>q$e(r,i,t)),i}function W$e(e,t,i){const r=(t=wie(t))&&t[0]!=="{";return Ac(e,H$e(i,r))}function rk(e,t){return e.replace(R$e,(i,r,s)=>{const l=cR(t,s);return l?`{${l.name}}`:r})}function J$e(e,t,i){const r=rk(e,i);return r&&r.replace(j$e,(s,l,d)=>W$e(s,l||d,t))}function K$e(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function Z$e(e){return(e==null?void 0:e.type)==="feature"}function tB(e){return!!(e!=null&&e.layer)}function Y$e(e){return(e==null?void 0:e.type)==="map-image"}function X$e(e,t){var _;const i=t.fieldInfos,r=t.fieldName,s=(_=bie(i,r))==null?void 0:_.clone(),l=t.preventPlacesFormatting,d=t.layer,y=cR(d,r);if(s&&(y==null?void 0:y.type)==="date"){const M=s.format||new Vm;M.dateFormat=M.dateFormat||"short-date-short-time",M.dateTimeFormatOptions=!tB(d)&&Z$e(d)&&d.datesInUnknownTimezone||tB(d)&&Y$e(d.layer)&&d.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=M}const v=s&&s.format;return typeof e=="string"&&DQ(r)&&v?v.formatRasterPixelValue(e):typeof(e=K$e(e,v))=="string"||e==null||v==null?H3(e):l?fs(e,{...UQ(v),minimumFractionDigits:0,maximumFractionDigits:20}):v.format(e)}function bie(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function Q$e({fieldName:e,graphic:t,layer:i}){if(Uh(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const s=i.getFeatureType(t);return s?s.name:null}function eMe({fieldName:e,value:t,graphic:i,layer:r}){if(Uh(e)||!r||typeof r.getFieldDomain!="function")return null;const s=r.getFieldDomain(e,{feature:i});return s&&s.type==="coded-value"?s.getName(t):null}function tMe(e,t){const{creatorField:i,creationDateField:r,editorField:s,editDateField:l}=e;if(!t)return;const d=t[l];if(typeof d=="number"){const v=t[s];return{type:"edit",date:ap(d,tk),user:v}}const y=t[r];if(typeof y=="number"){const v=t[i];return{type:"create",date:ap(y,tk),user:v}}return null}function iMe(e,t){const i=new Map;return e&&e.forEach(r=>{const s=CS(r.fieldName,t);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function iB(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const l=s&&s.fieldInfos;l&&t.push(...l)}}),t}function hR(e){return e.replace(D$e,t=>`&#${t.charCodeAt(0)};`)}function H3(e){return typeof e=="string"?e.replace(F$e,'<br class="esri-text-new-line" />'):e}function _ie(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:l,graphic:d}=e;if(t==null)return"";const y=eMe({fieldName:i,value:t,graphic:d,layer:l});if(y)return y;const v=Q$e({fieldName:i,graphic:d,layer:l});if(v)return v;if(s.get(i.toLowerCase()))return X$e(t,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:l});const _=l&&l.fieldsIndex;return _&&_.isDateField(i)?ap(t,tk):H3(t)}function fE({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:l}){const d={};return l==null||l.forEach(y=>aMe({attributes:d,relatedInfo:y,fieldInfoMap:s,fieldInfos:e,layer:i})),Object.keys(t).forEach(y=>{const v=t[y];d[y]=_ie({fieldName:y,fieldInfos:e,fieldInfoMap:s,layer:i,value:v,graphic:r})}),d}async function rMe(e,t){var M,k;const{layer:i,graphic:r,outFields:s,objectIds:l,returnGeometry:d,spatialReference:y}=e,v=l[0];if(typeof v!="number"&&typeof v!="string"){const O="Could not query required fields for the specified feature. The feature's ID is invalid.",R={layer:i,graphic:r,objectId:v,requiredFields:s};return eB.warn(O,R),null}if(!((k=(M=i.capabilities)==null?void 0:M.operations)!=null&&k.supportsQuery)){const O="The specified layer cannot be queried. The following fields will not be available.",R={layer:i,graphic:r,requiredFields:s,returnGeometry:d};return eB.warn(O,R),null}const _=i.createQuery();return _.objectIds=l,_.outFields=s!=null&&s.length?s:[i.objectIdField],_.returnGeometry=!!d,_.returnZ=!!d,_.returnM=!!d,_.outSpatialReference=y,(await i.queryFeatures(_,t)).features[0]}async function nMe(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await op(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function sMe({graphic:e,popupTemplate:t,layer:i,spatialReference:r},s){if(!i||!t||(typeof i.load=="function"&&await i.load(s),!e.attributes))return;const l=e.attributes[i.objectIdField];if(l==null)return;const d=[l],y=await t.getRequiredFields(i.fieldsIndex),v=q_e(y,e),_=v?[]:y,M=t.returnGeometry||await nMe(t);if(v&&!M)return;const k=await rMe({layer:i,graphic:e,outFields:_,objectIds:d,returnGeometry:M,spatialReference:r},s);k&&(k.geometry&&(e.geometry=k.geometry),k.attributes&&(e.attributes={...e.attributes,...k.attributes}))}function Uh(e=""){return!!e&&e.includes(fie)}function oMe(e){return e?`${fie}${e.layerId}/${e.fieldName}`:""}function rB({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:l}){e&&t&&i&&Object.keys(t.attributes).forEach(d=>{const y=oMe({layerId:i.relation.id.toString(),fieldName:d}),v=t.attributes[d];e[y]=_ie({fieldName:y,fieldInfos:r,fieldInfoMap:s,layer:l,value:v,graphic:t})})}function aMe({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(l=>rB({attributes:e,graphic:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(l=>rB({attributes:e,graphic:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})))}const nB=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},xie=({layer:e,method:t,query:i,definitionExpression:r})=>{var d,y;if(!((y=(d=e.capabilities)==null?void 0:d.query)!=null&&y.supportsCacheHint)||t==="attachments")return;const s=K(i.where)&&i.where,l=K(i.geometry)&&i.geometry;nB(r)||nB(s)||(l==null?void 0:l.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},lMe=({query:e,layer:t,method:i})=>{xie({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},uMe=({queryPayload:e,layer:t,method:i})=>{xie({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},sB={editing:!1,operations:{add:!0,update:!0,delete:!0}},Sie=vt.ofType(O$e),cMe="graphic.layer.capabilities.operations.supportsResizeAttachments";let iu=class extends st{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...sB},this.activeAttachmentInfo=null,this.attachmentInfos=new Sie,this.graphic=null,this.mode="view",this.own(Pe(()=>this.graphic,()=>this._graphicChanged(),Jt))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...sB,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(cMe)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new ge("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),r=new ek({objectIds:[i],returnMetadata:!0}),s=[],l=e.queryAttachments(r).then(y=>y[i]||s).catch(()=>s);this._getAttachmentsPromise=l,this.notifyChange("state");const d=await l;return t.removeAll(),d.length&&t.addMany(d),this._getAttachmentsPromise=null,this.notifyChange("state"),d}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new ge("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!s.operations.add)throw new ge("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new ge("invalid-layer","addAttachment(): A valid layer is required.");const l=t.addAttachment(r,e).then(y=>this._queryAttachment(y.objectId)),d=await l;return i.add(d),d}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new ge("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.delete)throw new ge("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new ge("invalid-layer","deleteAttachment(): A valid layer is required.");const l=t.deleteAttachments(r,[e.id]).then(()=>e),d=await l;return i.remove(d),d}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:l}=this;if(!e)throw new ge("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new ge("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!l.operations.update)throw new ge("invalid-abilities","updateAttachment(): Update abilities are required.");const d=r.findIndex(_=>_===t);if(!i||typeof i.updateAttachment!="function")throw new ge("invalid-layer","updateAttachment(): A valid layer is required.");const y=i.updateAttachment(s,t.id,e).then(_=>this._queryAttachment(_.objectId)),v=await y;return r.splice(d,1,v),v}async _queryAttachment(e){if(!e)throw new ge("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),r=new ek({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(r).then(s=>s[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:r}=t;return r&&r[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=yie(e);this._attachmentLayer=t?t.type==="scene"&&K(t.associatedLayer)?t.associatedLayer:t:null}};g([S()],iu.prototype,"abilities",void 0),g([oi("abilities")],iu.prototype,"castAbilities",null),g([S()],iu.prototype,"activeAttachmentInfo",void 0),g([S({readOnly:!0,type:Sie})],iu.prototype,"attachmentInfos",void 0),g([S({type:pn})],iu.prototype,"graphic",void 0),g([S()],iu.prototype,"mode",void 0),g([S({readOnly:!0})],iu.prototype,"state",null),g([S({readOnly:!0})],iu.prototype,"supportsResizeAttachments",null),iu=g([Q("esri.widgets.Attachments.AttachmentsViewModel")],iu);const pR=iu;function hMe(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function pMe(e){const t=li("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Gi(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var dMe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},$ie=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?$ie(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=dMe(s)),t.push(s))}},fMe=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return $ie(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function Z(e,t,...i){return typeof e!="function"||uR(e)?fMe(e,t,...i):e(t,...i)}const oB={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},dt={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},yE=window.CSS;let Cs=class extends rr{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new pR,this.visibleElements={...oB},this._supportsImageOrientation=yE&&yE.supports&&yE.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([Ko(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Pe(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),Jt)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...oB,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new ge("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new ge("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new ge("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return Z("div",{class:this.classes(dt.base,dt.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?Z("div",{key:"error-message",class:dt.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return Z("div",{class:dt.loaderContainer,key:"loader"},Z("div",{class:dt.loader}))}renderProgressBar(){return this.visibleElements.progressBar?Z("div",{class:dt.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?Z("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(dt.esriButton,dt.esriButtonTertiary,dt.esriButtonSmall,dt.esriButtonHalf,e&&dt.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?Z("button",{type:"submit",disabled:i,class:this.classes(dt.esriButton,dt.esriButtonSecondary,dt.esriButtonSmall,dt.esriButtonHalf,{[dt.buttonDisabled]:i})},this.messages.add):null,l=t?Z("span",{key:"file-name",class:dt.fileName},t.name):null,d=Z("form",{bind:this,afterCreate:HC,afterRemoved:LU,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},Z("fieldset",{class:dt.fileFieldset},l,Z("label",{class:this.classes(dt.fileLabel,dt.esriButton,dt.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,Z("input",{class:dt.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,r);return Z("div",{key:"add-form-container",class:dt.formNode},d)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:s}=this,{contentType:l,size:d,url:y}=e,{abilities:v}=i,_=s||!r,M=v.editing&&v.operations.delete&&t.deleteButton?Z("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:q=>this._submitDeleteAttachment(q,e),class:this.classes(dt.esriButton,dt.esriButtonSmall,dt.esriButtonTertiary,dt.deleteButton,{[dt.buttonDisabled]:s})},this.messages.delete):null,k=v.editing&&v.operations.update&&t.updateButton?Z("button",{disabled:_,key:"update-button",type:"submit",class:this.classes(dt.esriButton,dt.esriButtonSmall,dt.esriButtonThird,{[dt.buttonDisabled]:_})},this.messages.update):null,O=this.visibleElements.cancelUpdateButton?Z("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(dt.esriButton,dt.esriButtonSmall,dt.esriButtonTertiary,dt.esriButtonThird,{[dt.buttonDisabled]:s})},this.messages.cancel):null,R=r?Z("span",{key:"file-name",class:dt.fileName},r.name):null,D=v.editing&&v.operations.update?Z("fieldset",{key:"file",class:dt.fileFieldset},R,Z("label",{class:this.classes(dt.fileLabel,dt.esriButton,dt.esriButtonSecondary)},this.messages.changeFile,Z("input",{class:dt.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,z=Z("fieldset",{key:"size",class:dt.metadataFieldset},Z("label",null,I$e(this.messagesUnits,d))),B=Z("fieldset",{key:"content-type",class:dt.metadataFieldset},Z("label",null,l)),V=Z("form",{bind:this,afterCreate:HC,afterRemoved:LU,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},Z("div",{class:dt.metadata},z,B),D,Z("div",{class:dt.actions},M,O,k));return Z("div",{key:"edit-form-container",class:dt.formNode},Z("a",{class:dt.itemLink,href:y,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),Z("div",{class:dt.itemLinkOverlay},Z("span",{class:dt.itemLinkOverlayIcon},Z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},Z("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),Z("path",{fill:"none",d:"M0 0h32v32H0z"}))))),V)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:s,url:l}=e,d=i&&hMe(r),y=this._getCSSTransform(e,d),v=y?{transform:y,"image-orientation":"none"}:{},_=l.includes("?")?"&":"?",M=d?`${l}${_}w=${t}`:pMe(r),k={[dt.itemMaskIcon]:!d},O={[dt.itemImageResizable]:i};return Z("div",{class:this.classes(k,dt.itemMask)},Z("img",{styles:v,alt:s,src:M,class:this.classes(O,dt.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:r}=i,{name:s,url:l}=e,d=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),y=r.editing?Z("span",{"aria-hidden":"true",class:this.classes(dt.itemChevronIcon,$l(this.container)?dt.iconLeft:dt.iconRight)}):null,v=[d,Z("label",{class:dt.itemLabel},Z("span",{class:dt.itemFilename},s||this.messages.noTitle),y)],_=r.editing?Z("button",{key:"details-button",bind:this,class:dt.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},v):Z("a",{key:"details-link",class:dt.itemButton,href:l,target:"_blank"},v);return Z("li",{class:dt.item,key:e},_)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:s}=t,l=r&&r.length,d={[dt.containerList]:e!=="preview",[dt.containerPreview]:e==="preview"},y=s.editing&&s.operations.add&&i.addButton?Z("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(dt.esriButton,dt.esriButtonTertiary,dt.addAttachmentButton),type:"button"},Z("span",{"aria-hidden":"true",class:this.classes(dt.itemAddIcon,dt.iconPlus)}),this.messages.add):null,v=l?Z("ul",{class:dt.items},r.toArray().map(_=>this.renderAttachmentInfo({attachmentInfo:_,displayType:e}))):Z("div",{class:dt.empty},this.messages.noAttachments);return Z("div",{key:"attachments-container",class:this.classes(dt.container,d)},v,y)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};g([tt("viewModel.abilities")],Cs.prototype,"abilities",void 0),g([S()],Cs.prototype,"displayType",void 0),g([S({readOnly:!0})],Cs.prototype,"effectiveDisplayType",null),g([tt("viewModel.graphic")],Cs.prototype,"graphic",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Cs.prototype,"label",void 0),g([S(),Gi("esri/widgets/Attachments/t9n/Attachments")],Cs.prototype,"messages",void 0),g([S(),Gi("esri/core/t9n/Units")],Cs.prototype,"messagesUnits",void 0),g([S({readOnly:!0})],Cs.prototype,"selectedFile",void 0),g([S({readOnly:!0})],Cs.prototype,"submitting",void 0),g([S({readOnly:!0})],Cs.prototype,"error",void 0),g([S({type:pR})],Cs.prototype,"viewModel",void 0),g([S()],Cs.prototype,"visibleElements",void 0),g([oi("visibleElements")],Cs.prototype,"castVisibleElements",null),Cs=g([Q("esri.widgets.Attachments")],Cs);const yMe=Cs;let c2=class extends pR{constructor(e){super(e),this.description=null,this.title=null}};g([S()],c2.prototype,"description",void 0),g([S()],c2.prototype,"title",void 0),c2=g([Q("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],c2);const dR=c2,mMe={heading:"esri-widget__heading"};function Qd(e,t){const i=Mie(e.level),r=`h${i}`;return delete e.level,Z(r,{...e,class:Gm(mMe.heading,e.class),role:"heading","aria-level":String(i)},t)}function Mie(e){return Bs(Math.ceil(e),1,6)}function gMe(e,t=1){return Mie(e+t)}const mE={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let Wy=class extends rr{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return Z("div",{class:mE.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?Z(Qd,{level:this.headingLevel,class:mE.title},e):null}renderDescription(){const{description:e}=this;return e?Z("div",{key:"description",class:mE.description},e):null}};g([S()],Wy.prototype,"description",void 0),g([S()],Wy.prototype,"headingLevel",void 0),g([S()],Wy.prototype,"title",void 0),Wy=g([Q("esri.widgets.Feature.support.FeatureElementInfo")],Wy);const fR=Wy,vMe={base:"esri-feature-attachments"};let uc=class extends rr{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new yMe,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new dR}initialize(){this._featureElementInfo=new fR,this.own([Pe(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),Jt),Pe(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,Jt)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var t;const{attachmentsWidget:e}=this;return Z("div",{class:vMe.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};g([S({readOnly:!0})],uc.prototype,"attachmentsWidget",void 0),g([tt("viewModel.description")],uc.prototype,"description",void 0),g([tt("attachmentsWidget.displayType")],uc.prototype,"displayType",void 0),g([tt("viewModel.graphic")],uc.prototype,"graphic",void 0),g([S()],uc.prototype,"headingLevel",void 0),g([tt("viewModel.title")],uc.prototype,"title",void 0),g([S({type:dR})],uc.prototype,"viewModel",void 0),uc=g([Q("esri.widgets.Feature.FeatureAttachments")],uc);const wMe=uc;let od=class extends Uu(st){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(Pe(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},Jt))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(IS(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=IS(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};g([S({readOnly:!0})],od.prototype,"created",void 0),g([S()],od.prototype,"creator",void 0),g([S()],od.prototype,"destroyer",void 0),g([S({type:pn})],od.prototype,"graphic",void 0),g([S({readOnly:!0})],od.prototype,"state",null),od=g([Q("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],od);const kS=od;function Dn(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:_Me(e[t])}}}function bMe(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function _Me(e){return function(t,...i){bMe(t)?KSe(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function xMe(e){return e.split(",").map(t=>t.trim())}function yR(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:xMe(e);i.push(...r)}}const Eie="calcite-theme-";function SMe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function mR(){return SMe().startsWith("dark")}function $Me(){return`${Eie}${mR()?"dark":"light"}`}function MMe(e){EMe(e),e.classList.add($Me())}function EMe(e){Array.from(e.classList).forEach(t=>{t.startsWith(Eie)&&e.classList.remove(t)})}function AS(e){return e&&typeof e.render=="function"}function Tie(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const gE={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let Jy=class extends rr{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{mie(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}renderLoading(){return Z("div",{class:gE.loaderContainer,key:"loader"},Z("div",{class:gE.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?Z("div",{key:e,bind:e,afterCreate:this._attachToNode}):AS(e)?Z("div",{key:e},!e.destroyed&&e.render()):Z("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return Z("div",{class:gE.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};g([tt("viewModel.creator")],Jy.prototype,"creator",void 0),g([tt("viewModel.graphic")],Jy.prototype,"graphic",void 0),g([S({type:kS})],Jy.prototype,"viewModel",void 0),Jy=g([Q("esri.widgets.Feature.FeatureContent")],Jy);const T9=Jy;let yh=class extends st{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const s=r.clone();s.label=vie(s,e),i.push(s)}),i}};g([S()],yh.prototype,"attributes",void 0),g([S({type:[ZQ]})],yh.prototype,"expressionInfos",void 0),g([S()],yh.prototype,"description",void 0),g([S({type:[F3]})],yh.prototype,"fieldInfos",void 0),g([S({readOnly:!0})],yh.prototype,"formattedFieldInfos",null),g([S()],yh.prototype,"title",void 0),yh=g([Q("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],yh);const a$=yh,TMe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function IMe(e){let t=null;return TMe.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function CMe(e,t){if(typeof t!="string"||!t)return t;const i=IMe(t);if(!i)return t;const r=t.match(i.pattern),s=r&&r[2],l=Ac(Ac(i.label,{messages:e,hierPart:s}),{appName:i.appName}),d=i.target?` target="${i.target}"`:"",y=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${d} href="$1"${y}>${l}</a>`)}const vw={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let ru=class extends rr{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new a$,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new fR,this.own(Pe(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),Jt))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,s=e.label||r,l=i?i[r]==null?"":i[r]:"",d=!(!e.format||!e.format.dateFormat),y=typeof l=="number"&&!d?this._forceLTR(l):CMe(this.messagesURIUtils,l),v={[vw.fieldDataDate]:d};return Z("tr",{key:`fields-element-info-row-${r}-${t}`},Z("th",{key:`fields-element-info-row-header-${r}-${t}`,class:vw.fieldHeader,innerHTML:s}),Z("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(vw.fieldData,v),innerHTML:y}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?Z("table",{class:vw.esriTable,summary:this.messages.fieldsSummary},Z("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return Z("div",{class:vw.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};g([tt("viewModel.attributes")],ru.prototype,"attributes",void 0),g([tt("viewModel.description")],ru.prototype,"description",void 0),g([tt("viewModel.expressionInfos")],ru.prototype,"expressionInfos",void 0),g([tt("viewModel.fieldInfos")],ru.prototype,"fieldInfos",void 0),g([tt("viewModel.title")],ru.prototype,"title",void 0),g([S({type:a$})],ru.prototype,"viewModel",void 0),g([S(),Gi("esri/widgets/Feature/t9n/Feature")],ru.prototype,"messages",void 0),g([S(),Gi("esri/widgets/support/t9n/uriUtils")],ru.prototype,"messagesURIUtils",void 0),ru=g([Q("esri.widgets.Feature.FeatureFields")],ru);const Iie=ru,kMe=/^-?(\d+)(\.(\d+))?$/i;function AMe(e,t){return e-t}function OMe(e,t){let i,r;return i=Number(e.toFixed(t)),i<e?r=i+1/10**t:(r=i,i-=1/10**t),i=Number(i.toFixed(t)),r=Number(r.toFixed(t)),[i,r]}function LMe(e,t,i,r,s){const l=I9(e,t,i,r),d=l.previous==null||l.previous<=s,y=l.next==null||l.next<=s;return d&&y||l.previous+l.next<=2*s}function OS(e){const t=String(e),i=t.match(kMe);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(t.toLowerCase().includes("e")){const r=t.split("e"),s=r[0],l=r[1];if(s&&l){const d=Number(s);let y=Number(l);const v=y>0;v||(y=Math.abs(y));const _=OS(d);return v?(_.integer+=y,y>_.fractional?_.fractional=0:_.fractional-=y):(_.fractional+=y,y>_.integer?_.integer=1:_.integer-=y),_}}return{integer:0,fractional:0}}function I9(e,t,i,r){const s={previous:null,next:null};if(i!=null){const l=e-i,d=t-i-l;s.previous=Math.floor(Math.abs(100*d/l))}if(r!=null){const l=r-e,d=r-t-l;s.next=Math.floor(Math.abs(100*d/l))}return s}function LS(e,t={}){const i=e.slice(0),{tolerance:r=2,strictBounds:s=!1,indexes:l=i.map((d,y)=>y)}=t;l.sort(AMe);for(let d=0;d<l.length;d++){const y=l[d],v=i[y],_=y===0?null:i[y-1],M=y===i.length-1?null:i[y+1],k=OS(v).fractional;if(k){let O,R=0,D=!1;for(;R<=k&&!D;){const z=OMe(v,R);O=s&&d===0?z[1]:z[0],D=LMe(v,O,_,M,r),R++}D&&(i[y]=O)}}return i}const PMe={maximumFractionDigits:20};function RMe(e){return fs(e,PMe)}var nk;let o0=nk=class extends Ve{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new nk({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};g([S({type:ot,json:{type:[Yi],write:!0}})],o0.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],o0.prototype,"label",void 0),g([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],o0.prototype,"value",void 0),g([pt("value")],o0.prototype,"writeValue",null),o0=nk=g([Q("esri.renderers.visualVariables.support.ColorStop")],o0);const NMe=o0;function l$(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function FMe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function DMe(e,t,i,r,s,l,d,y,v,_,M,k,O,R,D,z){const B=new Float32Array(16);return B[0]=e,B[1]=t,B[2]=i,B[3]=r,B[4]=s,B[5]=l,B[6]=d,B[7]=y,B[8]=v,B[9]=_,B[10]=M,B[11]=k,B[12]=O,B[13]=R,B[14]=D,B[15]=z,B}function jMe(e,t){return new Float32Array(e,t,16)}const zMe=l$();Object.freeze(Object.defineProperty({__proto__:null,create:l$,clone:FMe,fromValues:DMe,createView:jMe,IDENTITY:zMe},Symbol.toStringTag,{value:"Module"}));const VMe=(e,t)=>{const i=vf(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return yp(i,i)},UMe=(e,t)=>{const i=vf(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return yp(i,i)},BMe=(e,t)=>{const i=1-t,r=vf(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return yp(r,r)},GMe=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=vf(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return yp(s,s)},qMe=(e,t)=>{const i=1-2*t,r=vf(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return yp(r,r)},HMe=(e,t)=>{const i=vf(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return yp(i,i)},WMe=(e,t)=>{const i=1-t,r=vf(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return yp(r,r)};class u${constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=jo(t.strength,i.strength,r),this.radius=jo(t.radius,i.radius,r),this.threshold=jo(t.threshold,i.threshold,r)}clone(){return new u$(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:ib(this.radius),strength:this.strength,threshold:this.threshold}}}class c${constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(jo(t.radius,i.radius,r))}clone(){return new c$(this.radius)}toJSON(){return{type:"blur",radius:ib(this.radius)}}}class u3{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=jo(t.amount,i.amount,r),this._updateMatrix()}clone(){return new u3(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||l$();switch(this.type){case"brightness":this._colorMatrix=VMe(t,this.amount);break;case"contrast":this._colorMatrix=UMe(t,this.amount);break;case"grayscale":this._colorMatrix=BMe(t,this.amount);break;case"invert":this._colorMatrix=qMe(t,this.amount);break;case"saturate":this._colorMatrix=HMe(t,this.amount);break;case"sepia":this._colorMatrix=WMe(t,this.amount)}}}class h${constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=jo(t.offsetX,i.offsetX,r),this.offsetY=jo(t.offsetY,i.offsetY,r),this.blurRadius=jo(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(jo(t.color[0],i.color[0],r)),this.color[1]=Math.round(jo(t.color[1],i.color[1],r)),this.color[2]=Math.round(jo(t.color[2],i.color[2],r)),this.color[3]=jo(t.color[3],i.color[3],r)}clone(){return new h$(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:ib(this.offsetX),yoffset:ib(this.offsetY),blurRadius:ib(this.blurRadius),color:t}}}class p${constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=jo(t.angle,i.angle,r),this._updateMatrix()}clone(){return new p$(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||l$();this._colorMatrix=GMe(t,this.angle)}}class d${constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=jo(t.amount,i.amount,r)}clone(){return new d$(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function jo(e,t,i){return e+(t-e)*i}function ib(e){return Math.round(1e3*bo(e))/1e3}function JMe(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new u3(e.type,0);case"saturate":case"brightness":case"contrast":return new u3(e.type,1);case"opacity":return new d$(1);case"hue-rotate":return new p$(0);case"blur":return new c$(0);case"drop-shadow":return new h$(0,0,0,[...cP("transparent")]);case"bloom":return new u$(0,0,1)}}function Cie(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function kie(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(JMe(i[s]))}function KMe(e){const t=e[0];return!!t&&"type"in t}var aB,lB,Aie={exports:{}};function gR(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=uB(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ge("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:uB(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!Cie(t[i].effects,t[i+1].effects))throw new ge("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});kie(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function uB(e){let t;if(!e)return[];try{t=Aie.exports.parse(e)}catch(i){throw new ge("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>ZMe(i))}function ZMe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return YMe(e);case"opacity":return XMe(e);case"hue-rotate":return QMe(e);case"blur":return e7e(e);case"drop-shadow":return t7e(e);case"bloom":return i7e(e)}}catch(t){throw t.details.filter=e,t}throw new ge("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function YMe(e){let t=1;return $v(e.parameters,1),e.parameters.length===1&&(t=bu(e.parameters[0])),new u3(e.name,t)}function XMe(e){let t=1;return $v(e.parameters,1),e.parameters.length===1&&(t=bu(e.parameters[0])),new d$(t)}function QMe(e){let t=0;return $v(e.parameters,1),e.parameters.length===1&&(t=l7e(e.parameters[0])),new p$(t)}function e7e(e){let t=0;return $v(e.parameters,1),e.parameters.length===1&&(t=bR(e.parameters[0]),W3(t,e.parameters[0])),new c$(t)}function t7e(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new ge("effect:type-error","Accepts only one color",{});i=u7e(r)}else{const s=bR(r);if(Object.isFrozen(t))throw new ge("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&W3(s,r)}if(t.length<2||t.length>3)throw new ge("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new h$(t[0],t[1],t[2]||0,i||Oie("black"))}function i7e(e){let t=1,i=0,r=0;return $v(e.parameters,3),e.parameters[0]&&(t=bu(e.parameters[0])),e.parameters[1]&&(i=bR(e.parameters[1]),W3(i,e.parameters[1])),e.parameters[2]&&(r=bu(e.parameters[2])),new u$(t,i,r)}function $v(e,t){if(e.length>t)throw new ge("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function f$(e){if(e.type==="color")return"<color>";if(e.unit){if(wR[e.unit])return"<length>";if(vR[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function W3(e,t){if(e<0)throw new ge("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function r7e(e){if(e.type!=="quantity"||e.unit!==null)throw new ge("effect:type-error",`Expected <double>, Actual: ${f$(e)}`,{term:e})}function n7e(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new ge("effect:type-error",`Expected <double> or <percentage>, Actual: ${f$(e)}`,{term:e})}lB=function(){function e(s,l){function d(){this.constructor=s}d.prototype=l.prototype,s.prototype=new d}function t(s,l,d,y){var v=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(v,t.prototype),v.expected=l,v.found=d,v.location=y,v.name="SyntaxError",v}function i(s,l,d){return d=d||" ",s.length>l?s:(l-=s.length,s+(d+=d.repeat(l)).slice(0,l))}function r(s,l){var d,y={},v=(l=l!==void 0?l:{}).grammarSource,_={start:Vt},M=Vt,k="none",O=")",R=",",D="(",z="%",B="px",V="cm",q="mm",J="in",ne="pt",re="pc",ue="deg",_e="rad",xe="grad",Ne="turn",Ce="#",Ge=".",Ze="e",lt=/^[ \t\n\r]/,et=/^[a-z\-]/,zt=/^[0-9a-fA-F]/,pi=/^[+\-]/,he=/^[0-9]/,pe=Qt("none"),me=yt("none",!1),we=yt(")",!1),Ee=yt(",",!1),Re=Qt("whitespace"),qe=bt([" ","	",`
`,"\r"],!1,!1),ft=Qt("function"),jt=yt("(",!1),bi=Qt("identifier"),tn=bt([["a","z"],"-"],!1,!1),Ar=Qt("percentage"),Ki=yt("%",!1),gi=Qt("length"),ti=yt("px",!1),gp=yt("cm",!1),bf=yt("mm",!1),Ii=yt("in",!1),X=yt("pt",!1),Gn=yt("pc",!1),Mo=Qt("angle"),ai=yt("deg",!1),cr=yt("rad",!1),ns=yt("grad",!1),Gr=yt("turn",!1),Ss=Qt("number"),Eo=Qt("color"),iy=yt("#",!1),Fl=bt([["0","9"],["a","f"],["A","F"]],!1,!1),vp=bt(["+","-"],!1,!1),We=bt([["0","9"]],!1,!1),h=yt(".",!1),L=yt("e",!1),b=function(){return[]},c=function(de,De){return{type:"function",name:de,parameters:De||[]}},a=function(de,De){return De.length>0?f_(de,De,3):[de]},n=function(de){return{type:"quantity",value:de.value,unit:de.unit}},o=function(de){return{type:"color",colorType:de.type,value:de.value}},u=function(de){return de},p=function(){return Ye()},f=function(de){return{value:de,unit:"%"}},m=function(de){return{value:de,unit:"px"}},w=function(de){return{value:de,unit:"cm"}},x=function(de){return{value:de,unit:"mm"}},E=function(de){return{value:de,unit:"in"}},T=function(de){return{value:de,unit:"pt"}},A=function(de){return{value:de,unit:"pc"}},P=function(de){return{value:de,unit:"deg"}},F=function(de){return{value:de,unit:"rad"}},j=function(de){return{value:de,unit:"grad"}},H=function(de){return{value:de,unit:"turn"}},W=function(de){return{value:de,unit:null}},G=function(){return{type:"hex",value:Ye()}},ee=function(de){return{type:"function",value:de}},ae=function(){return{type:"named",value:Ye()}},le=function(){return parseFloat(Ye())},ie=0,be=0,Ie=[{line:1,column:1}],ze=0,Fe=[],Oe=0;if("startRule"in l){if(!(l.startRule in _))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');M=_[l.startRule]}function Ye(){return s.substring(be,ie)}function yt(de,De){return{type:"literal",text:de,ignoreCase:De}}function bt(de,De,He){return{type:"class",parts:de,inverted:De,ignoreCase:He}}function Kt(){return{type:"end"}}function Qt(de){return{type:"other",description:de}}function br(de){var De,He=Ie[de];if(He)return He;for(De=de-1;!Ie[De];)De--;for(He={line:(He=Ie[De]).line,column:He.column};De<de;)s.charCodeAt(De)===10?(He.line++,He.column=1):He.column++,De++;return Ie[de]=He,He}function Ci(de,De){var He=br(de),Ut=br(De);return{source:v,start:{offset:de,line:He.line,column:He.column},end:{offset:De,line:Ut.line,column:Ut.column}}}function at(de){ie<ze||(ie>ze&&(ze=ie,Fe=[]),Fe.push(de))}function di(de,De,He){return new t(t.buildMessage(de,De),de,De,He)}function Vt(){var de;return(de=Fi())===y&&(de=Di()),de}function Fi(){var de,De;return Oe++,de=ie,It(),s.substr(ie,4)===k?(De=k,ie+=4):(De=y,Oe===0&&at(me)),De!==y?(It(),be=de,de=b()):(ie=de,de=y),Oe--,de===y&&Oe===0&&at(pe),de}function Di(){var de,De;if(de=[],(De=dn())!==y)for(;De!==y;)de.push(De),De=dn();else de=y;return de}function dn(){var de,De,He,Ut;return de=ie,It(),(De=Vc())!==y?(It(),(He=Zt())===y&&(He=null),It(),s.charCodeAt(ie)===41?(Ut=O,ie++):(Ut=y,Oe===0&&at(we)),Ut!==y?(It(),be=de,de=c(De,He)):(ie=de,de=y)):(ie=de,de=y),de}function Zt(){var de,De,He,Ut,fn,hr,qs,xf;if(de=ie,(De=rn())!==y){for(He=[],Ut=ie,fn=It(),s.charCodeAt(ie)===44?(hr=R,ie++):(hr=y,Oe===0&&at(Ee)),hr===y&&(hr=null),qs=It(),(xf=rn())!==y?Ut=fn=[fn,hr,qs,xf]:(ie=Ut,Ut=y);Ut!==y;)He.push(Ut),Ut=ie,fn=It(),s.charCodeAt(ie)===44?(hr=R,ie++):(hr=y,Oe===0&&at(Ee)),hr===y&&(hr=null),qs=It(),(xf=rn())!==y?Ut=fn=[fn,hr,qs,xf]:(ie=Ut,Ut=y);be=de,de=a(De,He)}else ie=de,de=y;return de}function rn(){var de,De;return de=ie,(De=Uc())===y&&(De=_f())===y&&(De=eM())===y&&(De=tM()),De!==y&&(be=de,De=n(De)),(de=De)===y&&(de=ie,(De=iM())!==y&&(be=de,De=o(De)),de=De),de}function It(){var de,De;for(Oe++,de=[],lt.test(s.charAt(ie))?(De=s.charAt(ie),ie++):(De=y,Oe===0&&at(qe));De!==y;)de.push(De),lt.test(s.charAt(ie))?(De=s.charAt(ie),ie++):(De=y,Oe===0&&at(qe));return Oe--,De=y,Oe===0&&at(Re),de}function Vc(){var de,De,He;return Oe++,de=ie,(De=Gu())!==y?(s.charCodeAt(ie)===40?(He=D,ie++):(He=y,Oe===0&&at(jt)),He!==y?(be=de,de=u(De)):(ie=de,de=y)):(ie=de,de=y),Oe--,de===y&&(De=y,Oe===0&&at(ft)),de}function Gu(){var de,De,He;if(Oe++,de=ie,De=[],et.test(s.charAt(ie))?(He=s.charAt(ie),ie++):(He=y,Oe===0&&at(tn)),He!==y)for(;He!==y;)De.push(He),et.test(s.charAt(ie))?(He=s.charAt(ie),ie++):(He=y,Oe===0&&at(tn));else De=y;return De!==y&&(be=de,De=p()),Oe--,(de=De)===y&&(De=y,Oe===0&&at(bi)),de}function Uc(){var de,De,He;return Oe++,de=ie,It(),(De=Gs())!==y?(s.charCodeAt(ie)===37?(He=z,ie++):(He=y,Oe===0&&at(Ki)),He!==y?(be=de,de=f(De)):(ie=de,de=y)):(ie=de,de=y),Oe--,de===y&&Oe===0&&at(Ar),de}function _f(){var de,De,He;return Oe++,de=ie,It(),(De=Gs())!==y?(s.substr(ie,2)===B?(He=B,ie+=2):(He=y,Oe===0&&at(ti)),He!==y?(be=de,de=m(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,It(),(De=Gs())!==y?(s.substr(ie,2)===V?(He=V,ie+=2):(He=y,Oe===0&&at(gp)),He!==y?(be=de,de=w(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,It(),(De=Gs())!==y?(s.substr(ie,2)===q?(He=q,ie+=2):(He=y,Oe===0&&at(bf)),He!==y?(be=de,de=x(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,It(),(De=Gs())!==y?(s.substr(ie,2)===J?(He=J,ie+=2):(He=y,Oe===0&&at(Ii)),He!==y?(be=de,de=E(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,It(),(De=Gs())!==y?(s.substr(ie,2)===ne?(He=ne,ie+=2):(He=y,Oe===0&&at(X)),He!==y?(be=de,de=T(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,It(),(De=Gs())!==y?(s.substr(ie,2)===re?(He=re,ie+=2):(He=y,Oe===0&&at(Gn)),He!==y?(be=de,de=A(De)):(ie=de,de=y)):(ie=de,de=y)))))),Oe--,de===y&&Oe===0&&at(gi),de}function eM(){var de,De,He;return Oe++,de=ie,(De=Gs())!==y?(s.substr(ie,3)===ue?(He=ue,ie+=3):(He=y,Oe===0&&at(ai)),He!==y?(be=de,de=P(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,(De=Gs())!==y?(s.substr(ie,3)===_e?(He=_e,ie+=3):(He=y,Oe===0&&at(cr)),He!==y?(be=de,de=F(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,(De=Gs())!==y?(s.substr(ie,4)===xe?(He=xe,ie+=4):(He=y,Oe===0&&at(ns)),He!==y?(be=de,de=j(De)):(ie=de,de=y)):(ie=de,de=y),de===y&&(de=ie,(De=Gs())!==y?(s.substr(ie,4)===Ne?(He=Ne,ie+=4):(He=y,Oe===0&&at(Gr)),He!==y?(be=de,de=H(De)):(ie=de,de=y)):(ie=de,de=y)))),Oe--,de===y&&(De=y,Oe===0&&at(Mo)),de}function tM(){var de,De;return Oe++,de=ie,It(),(De=Gs())!==y?(be=de,de=W(De)):(ie=de,de=y),Oe--,de===y&&Oe===0&&at(Ss),de}function iM(){var de,De,He,Ut;if(Oe++,de=ie,s.charCodeAt(ie)===35?(De=Ce,ie++):(De=y,Oe===0&&at(iy)),De!==y){if(He=[],zt.test(s.charAt(ie))?(Ut=s.charAt(ie),ie++):(Ut=y,Oe===0&&at(Fl)),Ut!==y)for(;Ut!==y;)He.push(Ut),zt.test(s.charAt(ie))?(Ut=s.charAt(ie),ie++):(Ut=y,Oe===0&&at(Fl));else He=y;He!==y?(be=de,de=G()):(ie=de,de=y)}else ie=de,de=y;return de===y&&(de=ie,(De=dn())!==y&&(be=de,De=ee(De)),(de=De)===y&&(de=ie,(De=Gu())!==y&&(be=de,De=ae()),de=De)),Oe--,de===y&&(De=y,Oe===0&&at(Eo)),de}function Gs(){var de,De,He,Ut,fn,hr,qs;for(de=ie,pi.test(s.charAt(ie))?(s.charAt(ie),ie++):Oe===0&&at(vp),De=ie,He=[],he.test(s.charAt(ie))?(Ut=s.charAt(ie),ie++):(Ut=y,Oe===0&&at(We));Ut!==y;)He.push(Ut),he.test(s.charAt(ie))?(Ut=s.charAt(ie),ie++):(Ut=y,Oe===0&&at(We));if(s.charCodeAt(ie)===46?(Ut=Ge,ie++):(Ut=y,Oe===0&&at(h)),Ut!==y){if(fn=[],he.test(s.charAt(ie))?(hr=s.charAt(ie),ie++):(hr=y,Oe===0&&at(We)),hr!==y)for(;hr!==y;)fn.push(hr),he.test(s.charAt(ie))?(hr=s.charAt(ie),ie++):(hr=y,Oe===0&&at(We));else fn=y;fn!==y?De=He=[He,Ut,fn]:(ie=De,De=y)}else ie=De,De=y;if(De===y)if(De=[],he.test(s.charAt(ie))?(He=s.charAt(ie),ie++):(He=y,Oe===0&&at(We)),He!==y)for(;He!==y;)De.push(He),he.test(s.charAt(ie))?(He=s.charAt(ie),ie++):(He=y,Oe===0&&at(We));else De=y;if(De!==y){if(He=ie,s.charCodeAt(ie)===101?(Ut=Ze,ie++):(Ut=y,Oe===0&&at(L)),Ut!==y){if(pi.test(s.charAt(ie))?(fn=s.charAt(ie),ie++):(fn=y,Oe===0&&at(vp)),fn===y&&(fn=null),hr=[],he.test(s.charAt(ie))?(qs=s.charAt(ie),ie++):(qs=y,Oe===0&&at(We)),qs!==y)for(;qs!==y;)hr.push(qs),he.test(s.charAt(ie))?(qs=s.charAt(ie),ie++):(qs=y,Oe===0&&at(We));else hr=y;hr!==y?He=Ut=[Ut,fn,hr]:(ie=He,He=y)}else ie=He,He=y;He===y&&(He=null),be=de,de=le()}else ie=de,de=y;return de}function d_(de,De){return de.map(function(He){return He[De]})}function f_(de,De,He){return[de].concat(d_(De,He))}if((d=M())!==y&&ie===s.length)return d;throw d!==y&&ie<s.length&&at(Kt()),di(Fe,ze<s.length?s.charAt(ze):null,ze<s.length?Ci(ze,ze+1):Ci(ze,ze))}return e(t,Error),t.prototype.format=function(s){var l="Error: "+this.message;if(this.location){var d,y=null;for(d=0;d<s.length;d++)if(s[d].source===this.location.source){y=s[d].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,_=this.location.source+":"+v.line+":"+v.column;if(y){var M=this.location.end,k=i("",v.line.toString().length),O=y[v.line-1],R=v.line===M.line?M.column:O.length+1;l+=`
 --> `+_+`
`+k+` |
`+v.line+" | "+O+`
`+k+" | "+i("",v.column-1)+i("",R-v.column,"^")}else l+=`
 at `+_}return l},t.buildMessage=function(s,l){var d={literal:function(R){return'"'+v(R.text)+'"'},class:function(R){var D=R.parts.map(function(z){return Array.isArray(z)?_(z[0])+"-"+_(z[1]):_(z)});return"["+(R.inverted?"^":"")+D+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(R){return R.description}};function y(R){return R.charCodeAt(0).toString(16).toUpperCase()}function v(R){return R.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(D){return"\\x0"+y(D)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(D){return"\\x"+y(D)})}function _(R){return R.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(D){return"\\x0"+y(D)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(D){return"\\x"+y(D)})}function M(R){return d[R.type](R)}function k(R){var D,z,B=R.map(M);if(B.sort(),B.length>0){for(D=1,z=1;D<B.length;D++)B[D-1]!==B[D]&&(B[z]=B[D],z++);B.length=z}switch(B.length){case 1:return B[0];case 2:return B[0]+" or "+B[1];default:return B.slice(0,-1).join(", ")+", or "+B[B.length-1]}}function O(R){return R?'"'+v(R)+'"':"end of input"}return"Expected "+k(s)+" but "+O(l)+" found."},{SyntaxError:t,parse:r}},(aB=Aie).exports&&(aB.exports=lB());const vR={deg:1,grad:.9,rad:180/Math.PI,turn:360};function s7e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&vR[e.unit]!=null))throw new ge("effect:type-error",`Expected <angle>, Actual: ${f$(e)}`,{term:e})}const wR={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function o7e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&wR[e.unit]!=null))throw new ge("effect:type-error",`Expected <length>, Actual: ${f$(e)}`,{term:e})}function bu(e){n7e(e);const t=e.value;return W3(t,e),e.unit==="%"?.01*t:t}function a7e(e){return r7e(e),W3(e.value,e),e.value}function l7e(e){return s7e(e),e.value*vR[e.unit]||0}function bR(e){return o7e(e),e.value*wR[e.unit]||0}function u7e(e){switch(e.colorType){case"hex":return Lbe(e.value);case"named":return Oie(e.value);case"function":return p7e(e.value)}}function Oie(e){if(!RX(e))throw new ge("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Obe(e)}const c7e=/^rgba?/i,h7e=/^hsla?/i;function p7e(e){if($v(e.parameters,4),c7e.test(e.name))return[bu(e.parameters[0]),bu(e.parameters[1]),bu(e.parameters[2]),e.parameters[3]?bu(e.parameters[3]):1];if(h7e.test(e.name))return NX(a7e(e.parameters[0]),bu(e.parameters[1]),bu(e.parameters[2]),e.parameters[3]?bu(e.parameters[3]):1);throw new ge("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function _R(e,t,i){var r;try{return f7e(e)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function xR(e,t,i,r){try{const s=d7e(e);Xo(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function d7e(e){const t=gR(e);return t?KMe(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function f7e(e){if(!e||e.length===0)return null;if(y7e(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:PS(i.value)});return t}return PS(e)}function y7e(e){const t=e[0];return!!t&&"scale"in t}function PS(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Qc(i,"amount")];break;case"blur":r=[Qc(i,"radius","pt")];break;case"hue-rotate":r=[Qc(i,"angle","deg")];break;case"drop-shadow":r=[Qc(i,"xoffset","pt"),Qc(i,"yoffset","pt"),Qc(i,"blurRadius","pt"),m7e(i,"color")];break;case"bloom":r=[Qc(i,"strength"),Qc(i,"radius","pt"),Qc(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;gR(s),t.push(s)}return t.join(" ")}function Qc(e,t,i){if(e[t]==null)throw new ge("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function m7e(e,t){if(e[t]==null)throw new ge("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const vE=-3;var Ed;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Ed||(Ed={}));class MJe{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,s=0){this._storage.put(this._namespace+t,i,r,s)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class Lie{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new l1,this._users=new l1}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,s){const l=this._db.get(t);if(l&&(this._size-=l.size,this._db.delete(t),l.entry!==i&&this._notifyRemove(t,l.entry,Ed.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,Ed.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const d=1+Math.max(s,vE)-vE;this._db.set(t,{entry:i,size:r,lifetime:d,lives:d}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const l=this._notifyRemove(t,i,Ed.SOME);if(!(K(l)&&l>0))return void this._db.delete(t);r=l}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((d,y)=>{const v=d.lifetime;r[v]=(r[v]||0)+d.size,this._users.forAll(_=>{const M=_.namespace;if(y.startsWith(M)){const k=i[M]||0;i[M]=k+d.size}})});const s={};this._users.forAll(d=>{const y=d.namespace;if(!isNaN(d.hitRate)&&d.hitRate>0){const v=i[y]||0;i[y]=v,s[y]=Math.round(100*d.hitRate)+"%"}else s[y]="0%"});const l=Object.keys(i);l.sort((d,y)=>i[y]-i[d]),l.forEach(d=>t[d]=Math.round(i[d]/2**20)+"MB / "+s[d]);for(let d=r.length-1;d>=0;--d){const y=r[d];y&&(t["Priority "+(d+vE-1)]=Math.round(y/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,Ed.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,Ed.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let s;return this._removeFuncs.some(l=>{if(t.startsWith(l[0])){const d=l[1](i,r);return typeof d=="number"&&(s=d),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,Ed.SOME);K(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class g7e{constructor(t,i){this._storage=new Lie,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function v7e(e){return typeof e=="function"}function EJe(e,t,i,r){return v7e(e)?e(t,i,r):e}function TJe(e){return[e.r,e.g,e.b,e.a]}function IJe(e,t,i){const r=` /-,
`,s=v=>{let _=v.length;for(;_--;)if(!r.includes(v.charAt(_)))return!1;return!0},l=[];let d=0,y=-1;do if(y=t.indexOf("[",d),y>=d){if(y>d){const v=t.substr(d,y-d);l.push([v,null,s(v)])}if(d=y+1,y=t.indexOf("]",d),y>=d){if(y>d){const v=e[t.substr(d,y-d)];v&&l.push([null,v,!1])}d=y+1}}while(y!==-1);if(d<t.length-1){const v=t.substr(d);l.push([v,null,s(v)])}return v=>{let _="",M=null;for(const k of l){const[O,R,D]=k;if(O)D?M=O:(M&&(_+=M,M=null),_+=O);else{const z=v.attributes[R];z&&(M&&(_+=M,M=null),_+=z)}}return w7e(_,i)}}function w7e(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function CJe(e,t,i,r,s,l,d=!0){const y=t/s,v=i/l,_=Math.ceil(y/2),M=Math.ceil(v/2);for(let k=0;k<l;k++)for(let O=0;O<s;O++){const R=4*(O+(d?l-k-1:k)*s);let D=0,z=0,B=0,V=0,q=0,J=0,ne=0;const re=(k+.5)*v;for(let ue=Math.floor(k*v);ue<(k+1)*v;ue++){const _e=Math.abs(re-(ue+.5))/M,xe=(O+.5)*y,Ne=_e*_e;for(let Ce=Math.floor(O*y);Ce<(O+1)*y;Ce++){let Ge=Math.abs(xe-(Ce+.5))/_;const Ze=Math.sqrt(Ne+Ge*Ge);Ze>=-1&&Ze<=1&&(D=2*Ze*Ze*Ze-3*Ze*Ze+1,D>0&&(Ge=4*(Ce+ue*t),ne+=D*e[Ge+3],B+=D,e[Ge+3]<255&&(D=D*e[Ge+3]/250),V+=D*e[Ge],q+=D*e[Ge+1],J+=D*e[Ge+2],z+=D))}}r[R]=V/z,r[R+1]=q/z,r[R+2]=J/z,r[R+3]=ne/B}}function b7e(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function y$(e){var t;return(t=e.data)==null?void 0:t.symbol}function RS(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function NS(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function Pie(e){return e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill"}function FS(e){return e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices"}const kJe=e=>isNaN(e)||!e?0:e,AJe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function OJe(){return Le(()=>import("./geometryEngineJSON.1c890801.js"),["geometryEngineJSON.1c890801.js","geometryEngineJSON.58446c85.js","json.8bd707cf.js"],import.meta.url)}function _7e(e){const t=y$(e);if(t.type==="CIMTextSymbol")return t.height;let i=0;if(t.symbolLayers)for(const r of t.symbolLayers)RS(r)&&r.size>i?i=r.size:NS(r)&&r.width>i?i=r.width:Pie(r);return i}function LJe(e,t,i){const r=y$(e),s=_7e(e);if(s===0)return void x7e(r,t);SR(r,t/s,!1,i)}function x7e(e,t){if(e.type!=="CIMTextSymbol"){if(e.symbolLayers)for(const i of e.symbolLayers)switch(i.type){case"CIMPictureMarker":case"CIMVectorMarker":i.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":i.width=t}}else e.height=t}function SR(e,t,i,r){if(e.type!=="CIMTextSymbol"){if(i&&e.effects)for(const s of e.effects)M7e(s,t);if(e.symbolLayers)for(const s of e.symbolLayers)switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":S7e(s,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&s.width&&(s.width*=t);break;case"CIMPictureFill":s.height&&(s.height*=t),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t);break;case"CIMHatchFill":SR(s.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t),s.separation&&(s.separation*=t)}}else e.height*=t}function S7e(e,t,i){if(e.markerPlacement&&$7e(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,e.type==="CIMVectorMarker"&&e.markerGraphics)for(const r of e.markerGraphics)e.scaleSymbolsProportionally||SR(r.symbol,t,!0,i)}function $7e(e,t){switch(FS(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function M7e(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function E7e(e){const t=[];return sk(y$(e),t),t.length?new ot(b7e(t[0])):null}function sk(e,t){let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(NS(s)||RS(s)&&s.markerPlacement&&FS(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&cB(t,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics.forEach(l=>{sk(l.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":cB(t,s.color);break;case"CIMHatchFill":sk(s.lineSymbol,t)}}}function cB(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function Rie(e,t,i){t instanceof ot||(t=new ot(t));const r=y$(e);r&&ok(r,t,i)}function ok(e,t,i){let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const s=r.type==="CIMPolygonSymbol";if(r.symbolLayers)for(const l of r.symbolLayers){if(l.colorLocked)continue;if(s){if(i){const{layersToColor:y}=i;if((NS(l)||RS(l)&&l.markerPlacement&&FS(l.markerPlacement))&&y==="fill"||Pie(l)&&y==="outline")continue}else if(NS(l)||RS(l)&&l.markerPlacement&&FS(l.markerPlacement))continue}const d=t.toArray();switch(l.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":l.tintColor=d;break;case"CIMVectorMarker":l.markerGraphics.forEach(y=>{ok(y.symbol,t,i)});break;case"CIMSolidStroke":case"CIMSolidFill":l.color=d;break;case"CIMHatchFill":ok(l.lineSymbol,t,i)}}}const Nie="picture-fill",Fie="simple-fill",T7e="simple-line",Die="simple-marker",I7e="text",C7e="cim",wE=new g7e(1e3);function k7e(e){const t=e.style;let i=null;if(e)switch(e.type){case Die:t!=="cross"&&t!=="x"&&(i=e.color);break;case Fie:t==="solid"?i=e.color:t!=="none"&&(i={type:"pattern",x:0,y:0,src:li(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case Nie:i={type:"pattern",src:e.url,width:Xi(e.width)*e.xscale,height:Xi(e.height)*e.yscale,x:Xi(e.xoffset),y:Xi(e.yoffset)};break;case I7e:i=e.color;break;case C7e:i=E7e(e)}return i}function A7e(e,t){const i=e+"-"+t;return wE.get(i)!==void 0?Promise.resolve(wE.get(i)):Bi(e,{responseType:"image"}).then(r=>{const s=r.data,l=s.naturalWidth,d=s.naturalHeight,y=document.createElement("canvas");y.width=l,y.height=d;const v=y.getContext("2d");v.fillStyle=t,v.fillRect(0,0,l,d),v.globalCompositeOperation="destination-in",v.drawImage(s,0,0);const _=y.toDataURL();return wE.put(i,_),_})}function c3(e){if(!e)return null;let t;switch(e.type){case Fie:case Nie:case Die:t=c3(e.outline);break;case T7e:{const i=Xi(e.width);e.style!=="none"&&i!==0&&(t={color:e.color,style:$R(e.style),width:i,cap:e.cap,join:e.join==="miter"?Xi(e.miterLimit):e.join});break}default:t=null}return t}const $R=(()=>{const e={};return t=>{if(e[t])return e[t];const i=t.replace(/-/g,"");return e[t]=i,i}})(),O7e=new ot([128,128,128]),hB=/\/resource\/(.*?)\.svg$/,L7e=new ot("white");function P7e(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const i=e.symbolLayers.getItemAt(t-1);return"outline"in i?LL(i,"outline","size"):void 0}function R7e(e){if(!e)return 0;if(Rc(e)){const i=P7e(e);return K(i)?i:0}const t=c3(e);return t&&bo(t.width)||0}function m$(e){if(ce(e)||!("symbolLayers"in e)||ce(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function N7e(e,t){const i=t.resource.href;return!ke("esri-canvas-svg-support")&&e.styleOrigin&&hB.test(i)?i.replace(hB,"/resource/png/$1.png"):i}function vy(e,t){if(!e)return null;let i=null;return Rc(e)?i=F7e(e):t$(e)&&(i=e.color?new ot(e.color):null),i?h3(i,t):null}function F7e(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{r.type==="object"&&r.resource.href!=null||(i=r.type==="water"?r.color:K(r.material)?r.material.color:null)}),i?new ot(i):null}function h3(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new ot(i)}function D7e(e,t,i){const r=e.symbolLayers;if(!r)return;const s=l=>{const d=K(l)?l:null;return h3(t=t||d||i!=null&&L7e,i)};r.forEach(l=>{if(l.type!=="object"||l.resource.href==null||t)if(l.type==="water")l.color=s(l.color);else{const d=K(l.material)?l.material.color:null,y=s(d);ce(l.material)?l.material=new Na({color:y}):l.material.color=y,i!=null&&"outline"in l&&K(l.outline)&&K(l.outline.color)&&(l.outline.color=h3(l.outline.color,i))}})}function j7e(e,t,i){(t=t||e.color)&&(e.color=h3(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=h3(e.outline.color,i))}function bE(e,t,i){e&&(t||i!=null)&&(t&&(t=new ot(t)),Rc(e)?D7e(e,t,i):t$(e)&&j7e(e,t,i))}async function z7e(e,t){const i=e.symbolLayers;i&&await Rwe(i,async r=>V7e(r,t))}async function V7e(e,t){switch(e.type){case"extrude":B7e(e,t);break;case"icon":case"line":case"text":U7e(e,t);break;case"path":q7e(e,t);break;case"object":await G7e(e,t)}}function U7e(e,t){const i=jie(t);K(i)&&(e.size=i)}function jie(e){for(const t of e)if(typeof t=="number")return t;return null}function B7e(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function G7e(e,t){const{resourceSize:i,symbolSize:r}=await H7e(e),s=zie(t,i,r);e.width=rb(t[0],r[0],i[0],s),e.depth=rb(t[1],r[1],i[1],s),e.height=rb(t[2],r[2],i[2],s)}function q7e(e,t){const i=zie(t,GX,[e.width,void 0,e.height]);e.width=rb(t[0],e.width,1,i),e.height=rb(t[2],e.height,1,i)}function zie(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":return i[r]!=null?i[r]/t[r]:1;case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function H7e(e){const t=await Le(()=>import("./symbolLayerUtils.d50fa918.js"),[],import.meta.url),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:s,depth:l}=e,d=[r,l,s];let y=1;for(let v=0;v<3;v++)if(d[v]!=null){y=d[v]/i[v];break}for(let v=0;v<3;v++)d[v]==null&&(d[v]=i[v]*y);return{resourceSize:i,symbolSize:d}}function rb(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function W7e(e,t){const i=jie(t);if(!ce(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function J7e(e,t){if(e&&t)return Rc(e)?z7e(e,t):void(t$(e)&&W7e(e,t))}function K7e(e,t,i){if(e&&t!=null)if(Rc(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=t;break;case"roll":s.roll=t;break;default:s.heading=t}})}else t$(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function p3(e){if(!e)return null;const t=e.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return PS(t)}const Vie="<",Uie=">",Z7e=kP("short-date");function Bie(e,t,i,r){let s="";t===0?s=`${Vie} `:t===i&&(s=`${Uie} `);let l=null;return l=r?ap(e,Z7e):RMe(e),s+l}const Y7e=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function ak(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(d=>d.type==="color");if(!t)return null;let i=null,r=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;i=t.stops[0].value,r=t.stops[t.stops.length-1].value}const s=i+(r-i)/2,{getColor:l}=await Le(()=>Promise.resolve().then(()=>X1),void 0,import.meta.url);return l(t,s)}async function Gie(e,t){const i=e.trailCap,r=e.trailWidth||1,s=t||await ak(e)||e.color;return new $o({cap:i,color:s,width:r})}const X7e=new ot([64,64,64]);function qie(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,l)=>i.includes(l)?Bie(s,l,r,t):null)}async function lk(e,t,i){let r=!1,s=[],l=[];if(e.stops){const _=e.stops;s=_.map(M=>M.value),r=_.some(M=>!!M.label),r&&(l=_.map(M=>M.label))}const d=s[0],y=s[s.length-1];if(d==null&&y==null)return null;const v=r?null:qie(s,i);return(await Promise.all(s.map(async(_,M)=>({value:_,color:e.type==="opacity"?await Q7e(_,e,t):(await Le(()=>Promise.resolve().then(()=>X1),void 0,import.meta.url)).getColor(e,_),label:r?l[M]:v[M]})))).reverse()}async function Q7e(e,t,i=X7e){const r=new ot(i),s=(await Le(()=>Promise.resolve().then(()=>X1),void 0,import.meta.url)).getOpacity(t,e);return s!=null&&(r.a=s),r}function eEe(e){let t=!1,i=[],r=[];i=e.map(y=>y.value),t=e.some(y=>!!y.label),t&&(r=e.map(y=>y.label));const s=i[0],l=i[i.length-1];if(s==null&&l==null)return null;const d=t?null:qie(i,!1);return i.map((y,v)=>({value:y,color:Hie(y,e),label:t?r[v]:d[v]})).reverse()}function Hie(e,t){const{startIndex:i,endIndex:r,weight:s}=tEe(e,t);if(i===r)return t[i].color;const l=ot.blendColors(t[i].color,t[r].color,s);return new ot(l)}function tEe(e,t){let i=0,r=t.length-1;return t.some((s,l)=>e<s.value?(r=l,!0):(i=l,!1)),{startIndex:i,endIndex:r,weight:(e-t[i].value)/(t[r].value-t[i].value)}}function iEe(e,t){let i=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((r,s)=>{s===0?i.push({value:t.max,color:new ot(r.toColor),label:"high"}):i.push({value:null,color:new ot(r.toColor),label:""}),s===e.colorRamps.length-1?i.push({value:t.min,color:new ot(r.fromColor),label:"low"}):i.push({value:null,color:new ot(r.fromColor),label:""})});else{let r,s;e&&e.type==="algorithmic"?(r=e.fromColor,s=e.toColor):(r=[0,0,0,1],s=[255,255,255,1]),i=[{value:t.max,color:new ot(s),label:"high"},{value:t.min,color:new ot(r),label:"low"}]}return i}var uk;let h2=uk=class extends Ve{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new uk({color:this.color,ratio:this.ratio})}};g([S({type:ot,json:{type:[Yi],default:null,write:!0}})],h2.prototype,"color",void 0),g([S({type:Number,json:{write:!0}})],h2.prototype,"ratio",void 0),h2=uk=g([Q("esri.renderers.support.HeatmapColorStop")],h2);const nb=h2;function Wie(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new nb({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{var d,y;let l="";return s===0?l=((d=e.legendOptions)==null?void 0:d.minLabel)||"low":s===i&&(l=((y=e.legendOptions)==null?void 0:y.maxLabel)||"high"),{color:r.color,label:l,ratio:r.ratio}}).reverse()}Ke.getLogger("esri.renderers.support.utils");function ua(e,t,i){DY(e,t,()=>[]).push(...i)}async function rEe(e){var i,r;const t=new Map;if("visualVariables"in e&&e.visualVariables){const s=e.visualVariables.filter(l=>l.type==="color");for(const l of s){const d=l.field||l.valueExpression,y=(await lk(l)).map(v=>v.color);ua(t,d,y)}}if(e.type==="heatmap"){const s=Wie(e).map(l=>l.color);ua(t,e.field,s)}else if(e.type==="pie-chart"){for(const s of e.attributes)ua(t,s.field,[s.color]);ua(t,null,[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,vy(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const s of e.attributes)ua(t,s.field,[s.color]);ua(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const s of e.uniqueValueInfos)ua(t,s.value.toString(),[vy(s.symbol,null)]);else{const s=e.uniqueValueInfos.map(_=>vy(_.symbol,null)),{field:l,field2:d,field3:y,valueExpression:v}=e;(l||v)&&ua(t,l||v,s),d&&ua(t,d,s),y&&ua(t,y,s)}else if(e.type==="class-breaks"){const s=e.classBreakInfos.map(l=>vy(l.symbol,null));ua(t,e.field||e.valueExpression,s)}else e.type==="simple"&&ua(t,null,[vy(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&ua(t,null,[vy(e.defaultSymbol,null)]),t.forEach((s,l)=>{const d=Cge(s.filter(Boolean),(y,v)=>JSON.stringify(y)===JSON.stringify(v));t.set(l,d)}),t}var ck;let p2=ck=class extends Ve{constructor(e){super(e),this.name=null,this.code=null}clone(){return new ck({name:this.name,code:this.code})}};g([S({type:String,json:{write:!0}})],p2.prototype,"name",void 0),g([S({type:[String,Number],json:{write:!0}})],p2.prototype,"code",void 0),p2=ck=g([Q("esri.layers.support.CodedValue")],p2);const nEe=new Dt({inherited:"inherited",codedValue:"coded-value",range:"range"});let d2=class extends Ve{constructor(e){super(e),this.name=null,this.type=null}};g([S({type:String,json:{write:!0}})],d2.prototype,"name",void 0),g([Mt(nEe)],d2.prototype,"type",void 0),d2=g([Q("esri.layers.support.Domain")],d2);const g$=d2;var hk;let f2=hk=class extends g${constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new hk({codedValues:Me(this.codedValues),name:this.name})}};g([S({type:[p2],json:{write:!0}})],f2.prototype,"codedValues",void 0),g([Mt({codedValue:"coded-value"})],f2.prototype,"type",void 0),f2=hk=g([Q("esri.layers.support.CodedValueDomain")],f2);const Jie=f2;var pk;let C9=pk=class extends g${constructor(e){super(e),this.type="inherited"}clone(){return new pk}};g([Mt({inherited:"inherited"})],C9.prototype,"type",void 0),C9=pk=g([Q("esri.layers.support.InheritedDomain")],C9);const Kie=C9;var dk;let Ky=dk=class extends g${constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new dk({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};g([S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],Ky.prototype,"maxValue",void 0),g([S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],Ky.prototype,"minValue",void 0),g([Mt({range:"range"})],Ky.prototype,"type",void 0),Ky=dk=g([Q("esri.layers.support.RangeDomain")],Ky);const Zie=Ky,Yie={key:"type",base:g$,typeMap:{range:Zie,"coded-value":Jie,inherited:Kie}};function MR(e){if(!e||!e.type)return null;switch(e.type){case"range":return Zie.fromJSON(e);case"codedValue":return Jie.fromJSON(e);case"inherited":return Kie.fromJSON(e)}return null}const sEe=new Dt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var fk;const oEe=new Dt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Qs=fk=class extends Ve{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?oEe.fromJSON(i.fieldValueType):null}clone(){return new fk({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};g([S({type:String,json:{write:!0}})],Qs.prototype,"alias",void 0),g([S({type:[String,Number],json:{write:{allowNull:!0}}})],Qs.prototype,"defaultValue",void 0),g([S()],Qs.prototype,"description",void 0),g([nt("description")],Qs.prototype,"readDescription",null),g([S({types:Yie,json:{read:{reader:MR},write:!0}})],Qs.prototype,"domain",void 0),g([S({type:Boolean,json:{write:!0}})],Qs.prototype,"editable",void 0),g([S({type:Yi,json:{write:!0}})],Qs.prototype,"length",void 0),g([S({type:String,json:{write:!0}})],Qs.prototype,"name",void 0),g([S({type:Boolean,json:{write:!0}})],Qs.prototype,"nullable",void 0),g([Mt(sEe)],Qs.prototype,"type",void 0),g([S()],Qs.prototype,"valueType",void 0),g([nt("valueType",["description"])],Qs.prototype,"readValueType",null),Qs=fk=g([Q("esri.layers.support.Field")],Qs);const J3=Qs;var yk;let Zy=yk=class extends Ve{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new yk({mapLayerId:e,gdbVersion:t})}};g([Mt({mapLayer:"map-layer"})],Zy.prototype,"type",void 0),g([S({type:Yi,json:{write:!0}})],Zy.prototype,"mapLayerId",void 0),g([S({type:String,json:{write:!0}})],Zy.prototype,"gdbVersion",void 0),Zy=yk=g([Q("esri.layers.support.source.MapLayerSource")],Zy);var mk;let mh=mk=class extends Ve{constructor(e){super(e),this.type="query-table"}clone(){var d;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,l={workspaceId:e,query:t,oidFields:i,spatialReference:(d=r==null?void 0:r.clone())!=null?d:void 0,geometryType:s};return new mk(l)}};g([Mt({queryTable:"query-table"})],mh.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],mh.prototype,"workspaceId",void 0),g([S({type:String,json:{write:!0}})],mh.prototype,"query",void 0),g([S({type:String,json:{write:!0}})],mh.prototype,"oidFields",void 0),g([S({type:Ct,json:{write:!0}})],mh.prototype,"spatialReference",void 0),g([Mt(bP)],mh.prototype,"geometryType",void 0),mh=mk=g([Q("esri.layers.support.source.QueryTableDataSource")],mh);var gk;let Yy=gk=class extends Ve{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new gk({workspaceId:e,dataSourceName:t})}};g([Mt({raster:"raster"})],Yy.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Yy.prototype,"dataSourceName",void 0),g([S({type:String,json:{write:!0}})],Yy.prototype,"workspaceId",void 0),Yy=gk=g([Q("esri.layers.support.source.RasterDataSource")],Yy);var vk;let a0=vk=class extends Ve{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new vk({workspaceId:e,gdbVersion:t,dataSourceName:i})}};g([Mt({table:"table"})],a0.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],a0.prototype,"workspaceId",void 0),g([S({type:String,json:{write:!0}})],a0.prototype,"gdbVersion",void 0),g([S({type:String,json:{write:!0}})],a0.prototype,"dataSourceName",void 0),a0=vk=g([Q("esri.layers.support.source.TableDataSource")],a0);var wk,bk;const aEe=_s()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let fa=wk=class extends Ve{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return pB()(e,t,i)}castLeftTableSource(e){return Oc(_k(),e)}readRightTableSource(e,t,i){return pB()(e,t,i)}castRightTableSource(e){return Oc(_k(),e)}clone(){var d,y;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,l={leftTableKey:e,rightTableKey:t,leftTableSource:(d=i==null?void 0:i.clone())!=null?d:void 0,rightTableSource:(y=r==null?void 0:r.clone())!=null?y:void 0,joinType:s};return new wk(l)}};g([Mt({joinTable:"join-table"})],fa.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],fa.prototype,"leftTableKey",void 0),g([S({type:String,json:{write:!0}})],fa.prototype,"rightTableKey",void 0),g([S({json:{write:!0}})],fa.prototype,"leftTableSource",void 0),g([nt("leftTableSource")],fa.prototype,"readLeftTableSource",null),g([oi("leftTableSource")],fa.prototype,"castLeftTableSource",null),g([S({json:{write:!0}})],fa.prototype,"rightTableSource",void 0),g([nt("rightTableSource")],fa.prototype,"readRightTableSource",null),g([oi("rightTableSource")],fa.prototype,"castRightTableSource",null),g([Mt(aEe)],fa.prototype,"joinType",void 0),fa=wk=g([Q("esri.layers.support.source.JoinTableDataSource")],fa);let _E=null;function pB(){return _E||(_E=pv({types:_k()})),_E}let xE=null;function _k(){return xE||(xE={key:"type",base:null,typeMap:{"data-layer":_u,"map-layer":Zy}}),xE}const lEe={key:"type",base:null,typeMap:{"join-table":fa,"query-table":mh,raster:Yy,table:a0}};let _u=bk=class extends Ve{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new bk({fields:e,dataSource:t})}};g([Mt({dataLayer:"data-layer"})],_u.prototype,"type",void 0),g([S({type:[J3],json:{write:!0}})],_u.prototype,"fields",void 0),g([S({types:lEe,json:{write:!0}})],_u.prototype,"dataSource",void 0),_u=bk=g([Q("esri.layers.support.source.DataLayerSource")],_u),_u.from=er(_u);function uEe(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function Xie(e){return typeof e=="string"?en(e):Me(e)}function cEe(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const l=e[s];if(l!=null&&typeof l!="function")if(Array.isArray(l)){r[s]=[];for(let d=0;d<l.length;d++)r[s][d]=cEe(l[d])}else if(typeof l=="object")if(l.toJSON){const d=l.toJSON(i&&i[s]);r[s]=t?d:JSON.stringify(d)}else r[s]=t?l:JSON.stringify(l);else r[s]=l}return r}const jx={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new zr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ct.WebMercator}),minus180Line:new zr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ct.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new zr({paths:[[[180,-180],[180,180]]],spatialReference:Ct.WGS84}),minus180Line:new zr({paths:[[[-180,-180],[-180,180]]],spatialReference:Ct.WGS84})}};function i1(e,t){return Math.ceil((e-t)/(2*t))}function Qie(e,t){const i=sb(e);for(const r of i)for(const s of r)s[0]+=t;return e}function sb(e){return u1(e)?e.rings:e.paths}async function hEe(e,t,i,r){const s=typeof e=="string"?en(e):e,l=t[0].spatialReference,d={...r,query:{...s.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:gv(t[0]),geometries:t}),cutter:JSON.stringify(i)}},y=await Bi(s.path+"/cut",d),{cutIndexes:v,geometries:_=[]}=y.data;return{cutIndexes:v,geometries:_.map(M=>{const k=vo(M);return k.spatialReference=l,k})}}async function pEe(e,t,i){const r=typeof e=="string"?en(e):e,s=t[0].spatialReference,l=gv(t[0]),d={...i,query:{...r.query,f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(dEe(t))}};return fEe((await Bi(r.path+"/simplify",d)).data,l,s)}function dEe(e){return{geometryType:gv(e[0]),geometries:e.map(t=>t.toJSON())}}function fEe(e,t,i){const r=CQ(t);return e.map(s=>{const l=r.fromJSON(s);return l.spatialReference=i,l})}const ere=Ke.getLogger("esri.geometry.support.normalizeUtils");function yEe(e){return e.type==="polygon"}function mEe(e){return e[0].type==="polygon"}function gEe(e){return e[0].type==="polyline"}function tre(e,t){if(!(e instanceof zr||e instanceof go)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw ere.error(s),new ge(s)}const i=sb(e),r=[];for(const s of i){const l=[];r.push(l),l.push([s[0][0],s[0][1]]);for(let d=0;d<s.length-1;d++){const y=s[d][0],v=s[d][1],_=s[d+1][0],M=s[d+1][1],k=Math.sqrt((_-y)*(_-y)+(M-v)*(M-v)),O=(M-v)/k,R=(_-y)/k,D=k/t;if(D>1){for(let q=1;q<=D-1;q++){const J=q*t,ne=R*J+y,re=O*J+v;l.push([ne,re])}const z=(k+Math.floor(D-1)*t)/2,B=R*z+y,V=O*z+v;l.push([B,V])}l.push([_,M])}}return yEe(e)?new go({rings:r,spatialReference:e.spatialReference}):new zr({paths:r,spatialReference:e.spatialReference})}function dB(e,t,i){if(t){const r=tre(e,1e6);e=jm(r,!0)}return i&&(e=Qie(e,i)),e}function fB(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=i1(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=i1(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=i1(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=i1(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function vEe(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],l=t.geometries[r],d=sb(l);for(let y=0;y<d.length;y++){const v=d[y];v.some(_=>{if(_[0]<180)return!0;{let M=0;for(let O=0;O<v.length;O++){const R=v[O][0];M=R>M?R:M}M=Number(M.toFixed(9));const k=-360*i1(M,180);for(let O=0;O<v.length;O++){const R=l.getPoint(y,O);l.setPoint(y,O,R.clone().offset(k,0))}return!0}})}if(s===i){if(mEe(e))for(const y of sb(l))e[s]=e[s].addRing(y);else if(gEe(e))for(const y of sb(l))e[s]=e[s].addPath(y)}else i=s,e[s]=l}return e}async function ire(e,t,i){var ne;if(!Array.isArray(e))return ire([e],t);t&&typeof t!="string"&&ere.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(ne=t==null?void 0:t.url)!=null?ne:hi.geometryServiceUrl;let s,l,d,y,v,_,M,k,O=0;const R=[],D=[];for(const re of e)if(ce(re))D.push(re);else if(s||(s=re.spatialReference,l=La(s),d=s.isWebMercator,_=d?102100:4326,y=jx[_].maxX,v=jx[_].minX,M=jx[_].plus180Line,k=jx[_].minus180Line),l)if(re.type==="mesh")D.push(re);else if(re.type==="point")D.push(fB(re.clone(),y,v));else if(re.type==="multipoint"){const ue=re.clone();ue.points=ue.points.map(_e=>fB(_e,y,v)),D.push(ue)}else if(re.type==="extent"){const ue=re.clone()._normalize(!1,!1,l);D.push(ue.rings?new go(ue):ue)}else if(re.extent){const ue=re.extent,_e=i1(ue.xmin,v)*(2*y);let xe=_e===0?re.clone():Qie(re.clone(),_e);ue.offset(_e,0),ue.intersects(M)&&ue.xmax!==y?(O=ue.xmax>O?ue.xmax:O,xe=dB(xe,d),R.push(xe),D.push("cut")):ue.intersects(k)&&ue.xmin!==v?(O=ue.xmax*(2*y)>O?ue.xmax*(2*y):O,xe=dB(xe,d,360),R.push(xe),D.push("cut")):D.push(xe)}else D.push(re.clone());else D.push(re);let z=i1(O,y),B=-90;const V=z,q=new zr;for(;z>0;){const re=360*z-180;q.addPath([[re,B],[re,-1*B]]),B*=-1,z--}if(R.length>0&&V>0){const re=vEe(R,await hEe(r,R,q,i)),ue=[],_e=[];for(let Ce=0;Ce<D.length;Ce++){const Ge=D[Ce];if(Ge!=="cut")_e.push(Ge);else{const Ze=re.shift(),lt=e[Ce];K(lt)&&lt.type==="polygon"&&lt.rings&&lt.rings.length>1&&Ze.rings.length>=lt.rings.length?(ue.push(Ze),_e.push("simplify")):_e.push(d?Wh(Ze):Ze)}}if(!ue.length)return _e;const xe=await pEe(r,ue,i),Ne=[];for(let Ce=0;Ce<_e.length;Ce++){const Ge=_e[Ce];Ge!=="simplify"?Ne.push(Ge):Ne.push(d?Wh(xe.shift()):xe.shift())}return Ne}const J=[];for(let re=0;re<D.length;re++){const ue=D[re];if(ue!=="cut")J.push(ue);else{const _e=R.shift();J.push(d===!0?Wh(_e):_e)}}return J}function PJe(e,t){const i=La(t);if(i){const[r,s]=i.valid,l=s-r;if(e<r)for(;e<r;)e+=l;if(e>s)for(;e>s;)e-=l}return e}function rre(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=rre(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var Td;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Td||(Td={}));const yB=4294967296,wEe=new TextDecoder("utf-8"),bEe=ke("safari")||ke("ios")?6:ke("ff")?12:32;class d1{constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=Td.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}clone(){return new d1(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*yB;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*yB;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const l=this.getMessage(),d=t(l,i,r,s);return l.release(),d}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=d1.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){d1.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Td.varint:this._decodeVarint();break;case Td.fixed64:this._skip(8);break;case Td.delimited:this._skip(this._getLength());break;case Td.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,r=this._pos,s=0;if(this._end-r>=10)do{if(i=t[r++],s|=127&i,(128&i)==0||(i=t[r++],s|=(127&i)<<7,(128&i)==0)||(i=t[r++],s|=(127&i)<<14,(128&i)==0)||(i=t[r++],s|=(127&i)<<21,(128&i)==0)||(i=t[r++],s+=268435456*(127&i),(128&i)==0)||(i=t[r++],s+=34359738368*(127&i),(128&i)==0)||(i=t[r++],s+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],s+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],s+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],s+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let l=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,s+=(127&i)*l,l*=128;if(r===this._end)throw new Error("Varint overrun!");++r,s+=i*l}return this._pos=r,s}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==Td.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>bEe){const d=t.subarray(i,r);return wEe.decode(d)}let s="",l="";for(let d=i;d<r;++d){const y=t[d];128&y?l+="%"+y.toString(16):(s+=decodeURIComponent(l)+String.fromCharCode(y),l="")}return l.length&&(s+=decodeURIComponent(l)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}d1.pool=new Fu(d1,null,e=>{e._data=null,e._dataView=null});class yo{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,s,l]=t,d=s-i,y=l-r;return new yo([5],[i,r,d,0,0,y,-d,0,0,-y])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let l=0;l<s;l++)t(this.coords[2*(l+i)],this.coords[2*(l+i)+1]);i+=s}}clone(t){return t?(t.set(this.coords),new yo(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new yo(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class Nc{constructor(t=null,i={},r,s){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new Nc(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function _Ee(e){return!(ce(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class RJe extends Nc{}class v${constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new v$;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const nre=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class NJe{constructor(t){this.options=t,this.geometryTypes=nre,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new v$}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||ms(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=R1(this.options.sourceSpatialReference)/R1(t.spatialReference);if(i!==1)for(const r of t.features){if(!_Ee(r))continue;const s=r.geometry.coords;for(let l=2;l<s.length;l+=3)s[l]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new Nc}createSpatialReference(){return{wkid:0}}createGeometry(){return new yo}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new yo}}const mB=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],gB=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],vB=["upperLeft","lowerLeft"];function wB(e){return e>=mB.length?null:mB[e]}function xEe(e){return e>=gB.length?null:gB[e]}function bB(e){return e>=vB.length?null:vB[e]}function _B(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function SEe(e,t,i){const s=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const l=e.getUInt32(),d=e.pos()+l;let y=0;for(;e.pos()<d;)t.addCoordinatePoint(s,e.getSInt64(),y++);break}default:e.skip()}return s}function $Ee(e,t,i){const l=t.createGeometry(i),d=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const y=e.getUInt32(),v=e.pos()+y;let _=0;for(;e.pos()<v;)t.addLength(l,e.getUInt32(),_++);break}case 3:{const y=e.getUInt32(),v=e.pos()+y;let _=0;for(t.allocateCoordinates(l);e.pos()<v;)t.addCoordinate(l,e.getSInt64(),_),_++,_===d&&(_=0);break}default:e.skip()}return l}function MEe(e){const s=new yo;let l="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const d=e.getUInt32(),y=e.pos()+d;for(;e.pos()<y;)s.lengths.push(e.getUInt32());break}case 3:{const d=e.getUInt32(),y=e.pos()+d;for(;e.pos()<y;)s.coords.push(e.getSInt64());break}case 1:l=nre[e.getEnum()];break;default:e.skip()}return{queryGeometry:s,queryGeometryType:l}}function EEe(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function TEe(e){const y={type:wB(0)};for(;e.next();)switch(e.tag()){case 1:y.name=e.getString();break;case 2:y.type=wB(e.getEnum());break;case 3:y.alias=e.getString();break;case 4:y.sqlType=xEe(e.getEnum());break;case 5:e.skip();break;case 6:y.defaultValue=e.getString();break;default:e.skip()}return y}function IEe(e){const r={};for(;e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.isSystemMaintained=e.getBool();break;default:e.skip()}return r}function CEe(e,t,i,r){const y=t.createFeature(i);let v=0;for(;e.next();)switch(e.tag()){case 1:{const _=r[v++].name;y.attributes[_]=e.processMessage(EEe);break}case 2:y.geometry=e.processMessageWithArgs($Ee,t,i);break;case 4:y.centroid=e.processMessageWithArgs(SEe,t,i);break;default:e.skip()}return y}function kEe(e){const l=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:l[0]=e.getDouble();break;case 2:l[1]=e.getDouble();break;case 4:l[2]=e.getDouble();break;case 3:l[3]=e.getDouble();break;default:e.skip()}return l}function AEe(e){const l=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:l[0]=e.getDouble();break;case 2:l[1]=e.getDouble();break;case 4:l[2]=e.getDouble();break;case 3:l[3]=e.getDouble();break;default:e.skip()}return l}function OEe(e){const s={originPosition:bB(0)};for(;e.next();)switch(e.tag()){case 1:s.originPosition=bB(e.getEnum());break;case 2:s.scale=e.processMessage(kEe);break;case 3:s.translate=e.processMessage(AEe);break;default:e.skip()}return s}function LEe(e){const s={};for(;e.next();)switch(e.tag()){case 1:s.shapeAreaFieldName=e.getString();break;case 2:s.shapeLengthFieldName=e.getString();break;case 3:s.units=e.getString();break;default:e.skip()}return s}function PEe(e,t){const y=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:y.wkid=e.getUInt32();break;case 5:y.wkt=e.getString();break;case 2:y.latestWkid=e.getUInt32();break;case 3:y.vcsWkid=e.getUInt32();break;case 4:y.latestVcsWkid=e.getUInt32();break;default:e.skip()}return y}function REe(e,t){const z=t.createFeatureResult();z.geometryType=_B(t,0);let B=!1;for(;e.next();)switch(e.tag()){case 1:z.objectIdFieldName=e.getString();break;case 3:z.globalIdFieldName=e.getString();break;case 4:z.geohashFieldName=e.getString();break;case 5:z.geometryProperties=e.processMessage(LEe);break;case 7:z.geometryType=_B(t,e.getEnum());break;case 8:z.spatialReference=e.processMessageWithArgs(PEe,t);break;case 10:z.hasZ=e.getBool();break;case 11:z.hasM=e.getBool();break;case 12:z.transform=e.processMessage(OEe);break;case 9:{const V=e.getBool();z.exceededTransferLimit=V;break}case 13:t.addField(z,e.processMessage(TEe));break;case 15:B||(t.prepareFeatures(z),B=!0),t.addFeature(z,e.processMessageWithArgs(CEe,t,z,z.fields));break;case 2:z.uniqueIdField=e.processMessage(IEe);break;default:e.skip()}return t.finishFeatureResult(z),z}function NEe(e,t){const s={};let l=null;for(;e.next();)switch(e.tag()){case 4:l=e.processMessageWithArgs(MEe);break;case 1:s.featureResult=e.processMessageWithArgs(REe,t);break;default:e.skip()}return K(l)&&s.featureResult&&t.addQueryGeometry(s,l),s}function FEe(e,t){try{const r=new d1(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(NEe,t):r.skip();return s}catch(i){throw new ge("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function DEe(e,t){const i=FEe(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,l=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const d=r.objectIdFieldName;for(const y of r.features)y.attributes&&(y.objectId=y.attributes[d])}return r&&(r.queryGeometry=s,r.queryGeometryType=l),r}function xk(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=lte(i.geometryType,t,e.outSpatialReference);if(!ce(r))for(const s of i.features)r(s.geometry)}const xB="Layer does not support extent calculation.";function sre(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function ore(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let l,d,y;if(K(i)&&(d=i.spatialReference,y=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=gv(i),s.geometry=sre(i,e.compactGeometryEnabled),s.inSR=y),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=r.outSR.wkid||JSON.stringify(r.outSR),l=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,l=d),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&K(d)&&K(e.quantizationParameters)&&K(e.quantizationParameters.extent)&&d.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const v=r.timeExtent,{start:_,end:M}=v;_==null&&M==null||(s.time=_===M?_:`${_==null?"null":_},${M==null?"null":M}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&K(d)&&K(l)&&d.equals(l)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function are(e,t,i,r){const s=K(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Mv(e,t,"json",r);return xk(t,i,s.data),s}async function jEe(e,t,i,r){if(K(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await lre(e,t,r),l=s;return l.data=DEe(s.data,i),l}function lre(e,t,i){return Mv(e,t,"pbf",i)}function zEe(e,t,i){return K(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Mv(e,t,"json",i,{returnIdsOnly:!0})}function VEe(e,t,i){return K(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Mv(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function UEe(e,t,i){return K(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Mv(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(xB);if(s.hasOwnProperty("count"))throw new Error(xB);return r})}function Mv(e,t,i,r={},s={}){const l=typeof e=="string"?en(e):e,d=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",ire(d,null,r).then(y=>{const v=y&&y[0];K(v)&&((t=t.clone()).geometry=v);const _=rre({...l.query,f:i,...s,...ore(t,s)});return Bi(I1(l.path,"query"),{...r,query:{..._,...r.query}})})}const FJe=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:sre,executeQuery:are,executeQueryForCount:VEe,executeQueryForExtent:UEe,executeQueryForIds:zEe,executeQueryPBF:jEe,executeQueryPBFBuffer:lre,queryToQueryStringParameters:ore,runQuery:Mv},Symbol.toStringTag,{value:"Module"}));var Sk;const $k=new Dt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Jn=Sk=class extends Ve{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var s;const i=Ct.fromJSON(t.spatialReference),r=[];for(let l=0;l<e.length;l++){const d=e[l],y=pn.fromJSON(d),v=d.geometry&&d.geometry.spatialReference;K(y.geometry)&&!v&&(y.geometry.spatialReference=i);const _=d.aggregateGeometries,M=y.aggregateGeometries;if(_&&K(M))for(const k in M){const O=M[k],R=(s=_[k])==null?void 0:s.spatialReference;K(O)&&!R&&(O.spatialReference=i)}r.push(y)}return r}writeGeometryType(e,t,i,r){if(e)return void $k.write(e,t,i,r);const{features:s}=this;if(s){for(const l of s)if(l&&K(l.geometry))return void $k.write(l.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=vo(e);return!i&&t.spatialReference&&(r.spatialReference=Ct.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&K(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new Sk(this.cloneProperties())}cloneProperties(){return Me({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e&&e[i];r.geometry=s&&s.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,l=_=>Math.round((_-r)/t),d=_=>Math.round((s-_)/i),y=this.features,v=this._getQuantizationFunction(this.geometryType,l,d);for(let _=0,M=y.length;_<M;_++)v(y[_].geometry)||(y.splice(_,1),_--,M--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[l,d]}=i,y=M=>M*l+r,v=M=>s-M*d,_=this._getHydrationFunction(e,y,v);for(const{geometry:M}of t)K(M)&&_(M);return this.transform=null,this}_quantizePoints(e,t,i){let r,s;const l=[];for(let d=0,y=e.length;d<y;d++){const v=e[d];if(d>0){const _=t(v[0]),M=i(v[1]);_===r&&M===s||(l.push([_-r,M-s]),r=_,s=M)}else r=t(v[0]),s=i(v[1]),l.push([r,s])}return l.length>0?l:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=u1(r)?r.rings:r.paths,l=[];for(let d=0,y=s.length;d<y;d++){const v=s[d],_=this._quantizePoints(v,t,i);_&&l.push(_)}return l.length>0?(u1(r)?r.rings=l:r.paths=l,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const s=u1(r)?r.rings:r.paths;let l,d;for(let y=0,v=s.length;y<v;y++){const _=s[y];for(let M=0,k=_.length;M<k;M++){const O=_[M];M>0?(l+=O[0],d+=O[1]):(l=O[0],d=O[1]),O[0]=t(l),O[1]=i(d)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const s=r.points;let l,d;for(let y=0,v=s.length;y<v;y++){const _=s[y];y>0?(l+=_[0],d+=_[1]):(l=_[0],d=_[1]),_[0]=t(l),_[1]=i(d)}}:void 0}};g([S({type:String,json:{write:!0}})],Jn.prototype,"displayFieldName",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Jn.prototype,"exceededTransferLimit",void 0),g([S({type:[pn],json:{write:!0}})],Jn.prototype,"features",void 0),g([nt("features")],Jn.prototype,"readFeatures",null),g([S({type:[J3],json:{write:!0}})],Jn.prototype,"fields",void 0),g([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:$k.read}}})],Jn.prototype,"geometryType",void 0),g([pt("geometryType")],Jn.prototype,"writeGeometryType",null),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Jn.prototype,"hasM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Jn.prototype,"hasZ",void 0),g([S({types:G1,json:{write:!0}})],Jn.prototype,"queryGeometry",void 0),g([nt("queryGeometry")],Jn.prototype,"readQueryGeometry",null),g([S({type:Ct,json:{write:!0}})],Jn.prototype,"spatialReference",void 0),g([pt("spatialReference")],Jn.prototype,"writeSpatialReference",null),g([S({json:{write:!0}})],Jn.prototype,"transform",void 0),Jn=Sk=g([Q("esri.rest.support.FeatureSet")],Jn),Jn.prototype.toJSON.isDefaultToJSON=!0;const K3=Jn,DJe=Object.freeze(Object.defineProperty({__proto__:null,default:K3},Symbol.toStringTag,{value:"Module"})),SB={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},BEe={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function GEe(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function f1(e,t,i){const r=new Date(e.getTime());if(t&&i){const s=BEe[i],{getter:l,setter:d,multiplier:y}=s;if(i==="months"){const v=GEe(r.getFullYear(),r.getMonth()+t);r.getDate()>v&&r.setDate(v)}r[d](r[l]()+t*y)}return r}function $B(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function qEe(e,t,i){return e===0?0:e*SB[t]/SB[i]}var nu;let Sa=nu=class extends Ve{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return MB}static get empty(){return HEe}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(nu.allTime)}get isEmpty(){return this.equals(nu.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new nu({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=K(this.start)?this.start.getTime():this.start,i=K(this.end)?this.end.getTime():this.end,r=K(e.start)?e.start.getTime():e.start,s=K(e.end)?e.end.getTime():e.end;return t===r&&i===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Uo(this.start,r=>$B(r,e)),i=Uo(this.end,r=>f1($B(r,e),1,e));return new nu({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return nu.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=jw(this.start,-1/0,y=>y.getTime()),i=jw(this.end,1/0,y=>y.getTime()),r=jw(e.start,-1/0,y=>y.getTime()),s=jw(e.end,1/0,y=>y.getTime());let l,d;if(r>=t&&r<=i?l=r:t>=r&&t<=s&&(l=t),i>=r&&i<=s?d=i:s>=t&&s<=i&&(d=s),!isNaN(l)&&!isNaN(d)){const y=new nu;return y.start=l===-1/0?null:new Date(l),y.end=d===1/0?null:new Date(d),y}return nu.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new nu,{start:r,end:s}=this;return K(r)&&(i.start=f1(r,e,t)),K(s)&&(i.end=f1(s,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return MB.clone();const t=K(this.start)&&K(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=K(this.end)&&K(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new nu({start:t,end:i})}};g([S({type:Date,json:{write:{allowNull:!0}}})],Sa.prototype,"end",void 0),g([nt("end")],Sa.prototype,"readEnd",null),g([pt("end")],Sa.prototype,"writeEnd",null),g([S({readOnly:!0,json:{read:!1}})],Sa.prototype,"isAllTime",null),g([S({readOnly:!0,json:{read:!1}})],Sa.prototype,"isEmpty",null),g([S({type:Date,json:{write:{allowNull:!0}}})],Sa.prototype,"start",void 0),g([nt("start")],Sa.prototype,"readStart",null),g([pt("start")],Sa.prototype,"writeStart",null),Sa=nu=g([Q("esri.TimeExtent")],Sa);const MB=new Sa,HEe=new Sa({start:void 0,end:void 0}),jc=Sa;var Mk;const EB=new Dt({upperLeft:"upper-left",lowerLeft:"lower-left"});let l0=Mk=class extends Ve{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new Mk(Me({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};g([S({type:yi,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],l0.prototype,"extent",void 0),g([S({type:["view","edit"],json:{write:!0}})],l0.prototype,"mode",void 0),g([S({type:String,json:{read:EB.read,write:EB.write}})],l0.prototype,"originPosition",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],l0.prototype,"tolerance",void 0),l0=Mk=g([Q("esri.rest.support.QuantizationParameters")],l0);const ure=l0;var Ek;const TB=new Dt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let su=Ek=class extends Ve{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=Me(e))}clone(){return new Ek({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Me(this.statisticParameters)})}};g([S({type:Number,json:{write:!0}})],su.prototype,"maxPointCount",void 0),g([S({type:Number,json:{write:!0}})],su.prototype,"maxRecordCount",void 0),g([S({type:Number,json:{write:!0}})],su.prototype,"maxVertexCount",void 0),g([S({type:String,json:{write:!0}})],su.prototype,"onStatisticField",void 0),g([S({type:String,json:{write:!0}})],su.prototype,"outStatisticFieldName",void 0),g([S({type:String,json:{read:{source:"statisticType",reader:TB.read},write:{target:"statisticType",writer:TB.write}}})],su.prototype,"statisticType",void 0),g([S({type:Object})],su.prototype,"statisticParameters",void 0),g([pt("statisticParameters")],su.prototype,"writeStatisticParameters",null),su=Ek=g([Q("esri.rest.support.StatisticDefinition")],su);const cre=su;var mg;const WEe=new Dt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),JEe=new Dt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Et=mg=class extends Ve{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return BL(mg,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(l=>l instanceof Date?l.getTime():l):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new mg(Me({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:K(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Et.MAX_MAX_RECORD_COUNT_FACTOR=5,g([S({json:{write:!0}})],Et.prototype,"aggregateIds",void 0),g([S({type:Boolean,json:{write:!0}})],Et.prototype,"cacheHint",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Et.prototype,"compactGeometryEnabled",void 0),g([S({json:{write:!0}})],Et.prototype,"datumTransformation",void 0),g([oi("datumTransformation")],Et.prototype,"castDatumTransformation",null),g([S({type:Boolean,json:{default:!1,write:!0}})],Et.prototype,"defaultSpatialReferenceEnabled",void 0),g([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Et.prototype,"distance",void 0),g([S({type:_u,json:{write:!0}})],Et.prototype,"dynamicDataSource",void 0),g([S({type:String,json:{write:!0}})],Et.prototype,"formatOf3DObjects",void 0),g([S({type:String,json:{write:!0}})],Et.prototype,"gdbVersion",void 0),g([S({types:G1,json:{read:vo,write:!0}})],Et.prototype,"geometry",void 0),g([S({type:Number,json:{write:!0}})],Et.prototype,"geometryPrecision",void 0),g([S({type:[String],json:{write:!0}})],Et.prototype,"groupByFieldsForStatistics",void 0),g([S({type:String,json:{write:!0}})],Et.prototype,"having",void 0),g([S({type:Date})],Et.prototype,"historicMoment",void 0),g([pt("historicMoment")],Et.prototype,"writeHistoricMoment",null),g([S({type:Number,json:{write:!0}})],Et.prototype,"maxAllowableOffset",void 0),g([S({type:Number,cast:e=>e<1?1:e>mg.MAX_MAX_RECORD_COUNT_FACTOR?mg.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Et.prototype,"maxRecordCountFactor",void 0),g([S({type:["xyFootprint"],json:{write:!0}})],Et.prototype,"multipatchOption",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Et.prototype,"num",void 0),g([S({json:{write:!0}})],Et.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],Et.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],Et.prototype,"outFields",void 0),g([S({type:Ct,json:{name:"outSR",write:!0}})],Et.prototype,"outSpatialReference",void 0),g([S({type:[cre],json:{write:{enabled:!0,overridePolicy(){return{enabled:K(this.outStatistics)&&this.outStatistics.length>0}}}}})],Et.prototype,"outStatistics",void 0),g([S({json:{write:!0}})],Et.prototype,"parameterValues",void 0),g([pt("parameterValues")],Et.prototype,"writeParameterValues",null),g([S({type:ut,json:{write:!0}})],Et.prototype,"pixelSize",void 0),g([S({type:ure,json:{write:!0}})],Et.prototype,"quantizationParameters",void 0),g([S({type:[Object],json:{write:!0}})],Et.prototype,"rangeValues",void 0),g([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Et.prototype,"relationParameter",void 0),g([S({type:String,json:{write:!0}})],Et.prototype,"resultType",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Et.prototype,"returnCentroid",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Et.prototype,"returnDistinctValues",void 0),g([S({type:Boolean,json:{default:!0,write:!0}})],Et.prototype,"returnExceededLimitFeatures",void 0),g([S({type:Boolean,json:{write:!0}})],Et.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Et.prototype,"returnQueryGeometry",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Et.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Et.prototype,"returnZ",void 0),g([S({type:Ct,json:{write:!0}})],Et.prototype,"sourceSpatialReference",void 0),g([Mt(WEe,{ignoreUnknown:!1,name:"spatialRel"})],Et.prototype,"spatialRelationship",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],Et.prototype,"start",void 0),g([pt("start"),pt("num")],Et.prototype,"writeStart",null),g([S({type:String,json:{write:!0}})],Et.prototype,"sqlFormat",void 0),g([S({type:String,json:{write:!0}})],Et.prototype,"text",void 0),g([S({type:jc,json:{write:!0}})],Et.prototype,"timeExtent",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Et.prototype,"timeReferenceUnknownClient",void 0),g([Mt(JEe,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],Et.prototype,"units",void 0),g([S({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],Et.prototype,"where",void 0),g([pt("where")],Et.prototype,"writeWhere",null),Et=mg=g([Q("esri.rest.support.Query")],Et);const lo=Et;async function SE(e,t,i){const r=await KEe(e,t,i);return K3.fromJSON(r)}async function KEe(e,t,i){const r=Xie(e),s={...i},l=lo.from(t),{data:d}=await are(r,l,l.sourceSpatialReference,s);return d}function ws(e,t){return e?t?4:3:t?3:2}const Ev=Ke.getLogger("esri.layers.graphics.featureConversionUtils"),hre={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},pre=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l},DS=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+2]},ZEe=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+3]},dre=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+2],e[i+3]=t[r+3]};function ER(e,t,i,r){if(e){if(i)return t&&r?dre:DS;if(t&&r)return ZEe}else if(t&&r)return DS;return pre}function $E({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function ME({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function IB({scale:e,translate:t},i){return i*e[0]+t[0]}function CB({scale:e,translate:t},i){return t[1]-i*e[1]}function jJe(e,t,i){return e?t?i?CR(e):TR(e):i?IR(e):w$(e):null}function w$(e){const t=e.coords;return{x:t[0],y:t[1]}}function fre(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function TR(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function YEe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function IR(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function XEe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function CR(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function QEe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function e8e(e,t,i,r){let s=w$;i&&r?s=CR:i?s=TR:r&&(s=IR);for(const l of t){const{geometry:d,attributes:y}=l,v=K(d)?s(d):null;e.push({attributes:y,geometry:v})}return e}function yre(e,t){return e&&t?QEe:e?YEe:t?XEe:fre}function mre(e,t,i,r,s){const l=yre(i,r);for(const d of t){const{geometry:y,attributes:v}=d;let _;y&&(_=l(new yo,y)),e.push(new Nc(_,v,null,v[s]))}return e}function t8e(e,t,i,r){for(const s of t){const{geometry:l,attributes:d}=s;let y;l&&(y=gre(l,i,r)),e.push({attributes:d,geometry:y})}return e}function gre(e,t,i){if(ce(e))return null;const r=ws(t,i),s=[];for(let l=0;l<e.coords.length;l+=r){const d=[];for(let y=0;y<r;y++)d.push(e.coords[l+y]);s.push(d)}return t?i?{points:s,hasZ:t,hasM:i}:{points:s,hasZ:t}:i?{points:s,hasM:i}:{points:s}}function vre(e,t,i,r,s){const l=ws(i,r);for(const d of t){const y=d.geometry,v=d.attributes;let _;y&&(_=wre(new yo,y,l)),e.push(new Nc(_,v,null,v[s]))}return e}function wre(e,t,i=ws(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let s=0;for(const l of t.points)for(let d=0;d<i;d++)r[s++]=l[d];return e}function i8e(e,t,i,r){for(const s of t){const{geometry:l,attributes:d}=s;let y;K(l)&&(y=bre(l,i,r)),e.push({attributes:d,geometry:y})}return e}function bre(e,t,i){if(!e)return null;const r=ws(t,i),{coords:s,lengths:l}=e,d=[];let y=0;for(const v of l){const _=[];for(let M=0;M<v;M++){const k=[];for(let O=0;O<r;O++)k.push(s[y++]);_.push(k)}d.push(_)}return t?i?{paths:d,hasZ:t,hasM:i}:{paths:d,hasZ:t}:i?{paths:d,hasM:i}:{paths:d}}function _re(e,t,i,r,s){const l=ws(i,r);for(const d of t){const y=d.geometry,v=d.attributes;let _;y&&(_=xre(new yo,y,l)),e.push(new Nc(_,v,null,v[s]))}return e}function xre(e,t,i=ws(t.hasZ,t.hasM)){const{lengths:r,coords:s}=e;let l=0;for(const d of t.paths){for(const y of d)for(let v=0;v<i;v++)s[l++]=y[v];r.push(d.length)}return e}function r8e(e,t,i,r){for(const s of t){const{geometry:l,attributes:d,centroid:y}=s;let v;if(K(l)&&(v=Sre(l,i,r)),K(y)){const _=w$(y);e.push({attributes:d,centroid:_,geometry:v})}else e.push({attributes:d,geometry:v})}return e}function Sre(e,t,i){if(!e)return null;const r=ws(t,i),{coords:s,lengths:l}=e,d=[];let y=0;for(const v of l){const _=[];for(let M=0;M<v;M++){const k=[];for(let O=0;O<r;O++)k.push(s[y++]);_.push(k)}d.push(_)}return t?i?{rings:d,hasZ:t,hasM:i}:{rings:d,hasZ:t}:i?{rings:d,hasM:i}:{rings:d}}function $re(e,t,i,r,s){for(const l of t){const d=l.geometry,y=l.centroid,v=l.attributes;let _;d&&(_=Mre(new yo,d,i,r)),K(y)?e.push(new Nc(_,v,fre(new yo,y),v[s])):e.push(new Nc(_,v,null,v[s]))}return e}function Mre(e,t,i=t.hasZ,r=t.hasM){return n8e(e,t.rings,i,r),e}function n8e(e,t,i,r){const s=ws(i,r),{lengths:l,coords:d}=e;let y=0;l.length=d.length=0;for(const v of t){for(const _ of v)for(let M=0;M<s;M++)d[y++]=_[M];l.push(v.length)}return e}const gg=[],ob=[];function zJe(e,t,i,r,s){gg[0]=e;const[l]=Ere(ob,gg,t,i,r,s);return gg.length=ob.length=0,l}function Ere(e,t,i,r,s,l){if(e.length=0,!i){for(const d of t){const y=d.attributes[l];e.push(new Nc(null,d.attributes,null,y))}return e}switch(i){case"esriGeometryPoint":return mre(e,t,r,s,l);case"esriGeometryMultipoint":return vre(e,t,r,s,l);case"esriGeometryPolyline":return _re(e,t,r,s,l);case"esriGeometryPolygon":return $re(e,t,r,s,l);default:Ev.error("convertToFeatureSet:unknown-geometry",new ge(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function VJe(e,t,i,r,s,l){const d=e.length;switch(i){case"esriGeometryPoint":mre(e,t,r,s,l);break;case"esriGeometryMultipoint":vre(e,t,r,s,l);break;case"esriGeometryPolyline":_re(e,t,r,s,l);break;case"esriGeometryPolygon":$re(e,t,r,s,l);break;default:Ev.error("convertToFeatureSet:unknown-geometry",new ge(`Unable to parse unknown geometry type '${i}'`))}for(let y=0;y<t.length;y++)e[y+d].geometryType=i,e[y+d].insertAfter=t[y].insertAfter,e[y+d].groupId=t[y].groupId;return e}function UJe(e,t,i,r){ob[0]=e,Tre(gg,ob,t,i,r);const s=gg[0];return gg.length=ob.length=0,s}function BJe(e,t,i){if(ce(e))return null;const r=new yo;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),xP(e)?yre(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):u1(e)?Mre(r,e,t,i):SP(e)?xre(r,e,ws(t,i)):_P(e)?wre(r,e,ws(t,i)):void Ev.error("convertFromGeometry:unknown-geometry",new ge(`Unable to parse unknown geometry type '${e}'`))}function s8e(e,t,i,r){const s=e&&("coords"in e?e:e.geometry);if(ce(s))return null;switch(t){case"esriGeometryPoint":{let l=w$;return i&&r?l=CR:i?l=TR:r&&(l=IR),l(s)}case"esriGeometryMultipoint":return gre(s,i,r);case"esriGeometryPolyline":return bre(s,i,r);case"esriGeometryPolygon":return Sre(s,i,r);default:return void Ev.error("convertToGeometry:unknown-geometry",new ge(`Unable to parse unknown geometry type '${t}'`))}}function o8e(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function Tre(e,t,i,r,s){if(e.length=0,ce(i))return o8e(e,t);switch(i){case"esriGeometryPoint":return e8e(e,t,r,s);case"esriGeometryMultipoint":return t8e(e,t,r,s);case"esriGeometryPolyline":return i8e(e,t,r,s);case"esriGeometryPolygon":return r8e(e,t,r,s);default:Ev.error("convertToFeatureSet:unknown-geometry",new ge(`Unable to parse unknown geometry type '${i}'`))}return e}function GJe(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:s,hasM:l,hasZ:d,features:y,geometryType:v,exceededTransferLimit:_,uniqueIdField:M,queryGeometry:k,queryGeometryType:O}=e,R={features:Tre([],y,v,d,l),fields:s,geometryType:v,objectIdFieldName:t,spatialReference:i,uniqueIdField:M,queryGeometry:s8e(k,O,!1,!1)};return r&&(R.transform=r),_&&(R.exceededTransferLimit=_),l&&(R.hasM=l),d&&(R.hasZ=d),R}function qJe(e,t){const i=new v$,{hasM:r,hasZ:s,features:l,objectIdFieldName:d,spatialReference:y,geometryType:v,exceededTransferLimit:_,transform:M,fields:k}=e;return k&&(i.fields=k),i.geometryType=v,i.objectIdFieldName=d||t,i.spatialReference=y,i.objectIdFieldName?(l&&Ere(i.features,l,v,s,r,i.objectIdFieldName),_&&(i.exceededTransferLimit=_),r&&(i.hasM=r),s&&(i.hasZ=s),M&&(i.transform=M),i):(Ev.error(new ge("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function HJe(e){const{transform:t,features:i,hasM:r,hasZ:s}=e;if(!t)return e;for(const l of i)K(l.geometry)&&AB(l.geometry,l.geometry,r,s,t),K(l.centroid)&&AB(l.centroid,l.centroid,r,s,t);return e.transform=null,e}function WJe(e,t){const{geometryType:i,features:r,hasM:s,hasZ:l}=t;if(!e)return t;for(let d=0;d<r.length;d++){const y=r[d],v=y.weakClone();v.geometry=new yo,kB(v.geometry,y.geometry,s,l,i,e),y.centroid&&(v.centroid=new yo,kB(v.centroid,y.centroid,s,l,"esriGeometryPoint",e)),r[d]=v}return t.transform=e,t}function kB(e,t,i,r,s,l,d=i,y=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),ce(t)||!t.coords.length)return null;const v=hre[s],{coords:_,lengths:M}=t,k=ws(i,r),O=ws(i&&d,r&&y),R=ER(i,r,d,y);if(!M.length)return R(e.coords,_,0,0,$E(l,_[0]),ME(l,_[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=k,e;let D,z,B,V,q=0,J=0,ne=J;for(const re of M){if(re<v)continue;let ue=0;J=ne,B=D=$E(l,_[q]),V=z=ME(l,_[q+1]),R(e.coords,_,J,q,B,V),ue++,q+=k,J+=O;for(let _e=1;_e<re;_e++,q+=k)B=$E(l,_[q]),V=ME(l,_[q+1]),B===D&&V===z||(R(e.coords,_,J,q,B-D,V-z),J+=O,ue++,D=B,z=V);ue>=v&&(e.lengths.push(ue),ne=J)}return e.coords.length=ne,e.coords.length?e:null}function JJe(e,t,i,r,s,l,d=i,y=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const v=hre[s],{coords:_,lengths:M}=t,k=ws(i,r),O=ws(i&&d,r&&y),R=ER(i,r,d,y);if(!M.length)return R(e.coords,_,0,0,_[0],_[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=k,e;let D=0;const z=l*l;for(const B of M){if(B<v){D+=B*k;continue}const V=e.coords.length/O,q=D,J=D+(B-1)*k;R(e.coords,_,e.coords.length,q,_[q],_[q+1]),Tk(e.coords,_,k,z,R,q,J),R(e.coords,_,e.coords.length,J,_[J],_[J+1]);const ne=e.coords.length/O-V;ne>=v?e.lengths.push(ne):e.coords.length=V*O,D+=B*k}return e.coords.length?e:null}function a8e(e,t,i,r){const s=e[t],l=e[t+1],d=e[i],y=e[i+1],v=e[r],_=e[r+1];let M=d,k=y,O=v-M,R=_-k;if(O!==0||R!==0){const D=((s-M)*O+(l-k)*R)/(O*O+R*R);D>1?(M=v,k=_):D>0&&(M+=O*D,k+=R*D)}return O=s-M,R=l-k,O*O+R*R}function Tk(e,t,i,r,s,l,d){let y,v=r,_=0;for(let M=l+i;M<d;M+=i)y=a8e(t,M,l,d),y>v&&(_=M,v=y);v>r&&(_-l>i&&Tk(e,t,i,r,s,l,_),s(e,t,e.length,_,t[_],t[_+1]),d-_>i&&Tk(e,t,i,r,s,_,d))}function KJe(e,t,i,r){if(ce(t)||!t.coords||!t.coords.length)return null;const s=ws(i,r);let l=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY;if(t&&t.coords){const _=t.coords;for(let M=0;M<_.length;M+=s){const k=_[M],O=_[M+1];l=Math.min(l,k),y=Math.max(y,k),d=Math.min(d,O),v=Math.max(v,O)}}return e[0]=l,e[1]=d,e[2]=y,e[3]=v,e}function AB(e,t,i,r,s){const{coords:l,lengths:d}=t,y=i?r?dre:DS:r?DS:pre,v=ws(i,r);if(!l.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!d.length)return y(e.coords,l,0,0,IB(s,l[0]),CB(s,l[1])),e!==t&&(e.lengths.length=0,e.coords.length=v),e;const[_,M]=s.scale;let k=0;for(let O=0;O<d.length;O++){const R=d[O];e.lengths[O]=R;let D=IB(s,l[k]),z=CB(s,l[k+1]);y(e.coords,l,k,k,D,z),k+=v;for(let B=1;B<R;B++,k+=v)D+=l[k]*_,z-=l[k+1]*M,y(e.coords,l,k,k,D,z)}return e!==t&&(e.lengths.length=d.length,e.coords.length=l.length),e}function ZJe(e,t,i,r,s,l){const d=ws(i,r),y=ER(i,r,s,l),v=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let _=0;_<v.length;_+=d)y(e.coords,v,e.coords.length,_,v[_],v[_+1]);return e}function l8e(e,t,i,r){let s=0,l=e[r*t],d=e[r*(t+1)];for(let y=1;y<i;y++){const v=l+e[r*(t+y)],_=d+e[r*(t+y)+1],M=(v-l)*(_+d);l=v,d=_,s+=M}return .5*s}function YJe(e,t){const{coords:i,lengths:r}=e;let s=0,l=0;for(let d=0;d<r.length;d++)l+=l8e(i,s,r[d],t),s+=d;return Math.abs(l)}function XJe(e,t){if(ce(e))return null;const i=e.clone(),r=e.coords,s=e.lengths;let l=0;for(let d=0;d<s.length;d++){const y=s[d];let v=r[t*l],_=r[t*l+1];for(let M=1;M<y;M++){const k=v+r[t*(l+M)],O=_+r[t*(l+M)+1];i.coords[t*(l+M)]=k,i.coords[t*(l+M)+1]=O,v=k,_=O}l+=y}return i}var Ik;let xr=Ik=class extends Ve{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new Ik(Me({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};g([S({type:Boolean,json:{write:!0}})],xr.prototype,"cacheHint",void 0),g([S({type:_u,json:{write:!0}})],xr.prototype,"dynamicDataSource",void 0),g([S({type:String,json:{write:!0}})],xr.prototype,"gdbVersion",void 0),g([S({type:Number,json:{write:!0}})],xr.prototype,"geometryPrecision",void 0),g([S({type:Date})],xr.prototype,"historicMoment",void 0),g([pt("historicMoment")],xr.prototype,"_writeHistoricMoment",null),g([S({type:Number,json:{write:!0}})],xr.prototype,"maxAllowableOffset",void 0),g([S({type:[Number],json:{write:!0}})],xr.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],xr.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],xr.prototype,"outFields",void 0),g([S({type:Ct,json:{read:{source:"outSR"},write:{target:"outSR"}}})],xr.prototype,"outSpatialReference",void 0),g([S({json:{write:!0}})],xr.prototype,"relationshipId",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],xr.prototype,"start",void 0),g([pt("start"),pt("num")],xr.prototype,"writeStart",null),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],xr.prototype,"num",void 0),g([S({json:{write:!0}})],xr.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],xr.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],xr.prototype,"returnZ",void 0),g([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],xr.prototype,"where",void 0),xr=Ik=g([Q("esri.rest.support.RelationshipQuery")],xr),xr.from=er(xr);const Ck=xr;var kk;let Xy=kk=class extends Ve{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new kk({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};g([S({type:[String],json:{write:!0}})],Xy.prototype,"groupByFields",void 0),g([S({type:Number,json:{write:!0}})],Xy.prototype,"topCount",void 0),g([S({type:[String],json:{write:!0}})],Xy.prototype,"orderByFields",void 0),Xy=kk=g([Q("esri.rest.support.TopFilter")],Xy);const u8e=Xy;var Ak;const OB=new Dt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),LB=new Dt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let or=Ak=class extends Ve{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new Ak(Me({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};g([S({type:Boolean,json:{write:!0}})],or.prototype,"cacheHint",void 0),g([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],or.prototype,"distance",void 0),g([S({types:G1,json:{read:vo,write:!0}})],or.prototype,"geometry",void 0),g([S({type:Number,json:{write:!0}})],or.prototype,"geometryPrecision",void 0),g([S({type:Number,json:{write:!0}})],or.prototype,"maxAllowableOffset",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],or.prototype,"num",void 0),g([S({json:{write:!0}})],or.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],or.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],or.prototype,"outFields",void 0),g([S({type:Ct,json:{read:{source:"outSR"},write:{target:"outSR"}}})],or.prototype,"outSpatialReference",void 0),g([S({type:String,json:{write:!0}})],or.prototype,"resultType",void 0),g([S({json:{write:!0}})],or.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],or.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],or.prototype,"returnZ",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],or.prototype,"start",void 0),g([pt("start"),pt("num")],or.prototype,"writeStart",null),g([S({type:String,json:{read:{source:"spatialRel",reader:OB.read},write:{target:"spatialRel",writer:OB.write}}})],or.prototype,"spatialRelationship",void 0),g([S({type:jc,json:{write:!0}})],or.prototype,"timeExtent",void 0),g([S({type:u8e,json:{write:!0}})],or.prototype,"topFilter",void 0),g([S({type:String,json:{read:LB.read,write:{writer:LB.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],or.prototype,"units",void 0),g([S({type:String,json:{write:!0}})],or.prototype,"where",void 0),or=Ak=g([Q("esri.rest.support.TopFeaturesQuery")],or),or.from=er(or);const zx=or,c8e="esri.widgets.Feature.support.relatedFeatureUtils",PB=Ke.getLogger(c8e),RB=new Map;function Ok(e){if(!Uh(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function h8e(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(s=>s.id===parseInt(e,10)&&(i=s,!0)),i}function p8e({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(s=>(`${s.relatedTableId}`===i&&s.id===e.id&&(r=s),!!r)),r}function d8e(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function f8e(e,t){const i=h8e(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function y8e(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,s=i&&i.value;t.relatedFeatures=s?s.features:[];const l=r&&r.value;t.relatedStatsFeatures=l?l.features:[]}function m8e(e,t,i,r){const s=new Ck;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(s,r)}function g8e(e,t,i){let r=0;const s=[];for(;r<t.length;)s.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function v8e(e,t,i,r){const s=i.layerId.toString(),{layerInfo:l,relation:d,relatedFields:y,outStatistics:v,url:_,sourceSpatialReference:M}=t,k=p8e({originRelationship:d,relationships:l.relationships,layerId:s});if(k.relationshipTableId&&k.keyFieldInRelationshipTable){const R=(await m8e(e,k,i,r))[e.attributes[i.objectIdField]];if(!R)return null;const D=R.features.map(z=>z.attributes[l.objectIdField]);if((v==null?void 0:v.length)>0&&l.supportsStatistics){const z=new lo;z.where=g8e(l.objectIdField,D,1e3),z.outFields=y,z.outStatistics=v,z.sourceSpatialReference=M;const B={features:Promise.resolve(R),statsFeatures:SE(_,z)};return Qr(B)}}const O=k==null?void 0:k.keyField;if(O){const R=TP(S8e(l.fields,O)),D=d8e(e.attributes,d.keyField),z=R?`${O}=${D}`:`${O}='${D}'`,B=SE(_,new lo({where:z,outFields:t.relatedFields,sourceSpatialReference:M}),r),V=t.outStatistics&&t.outStatistics.length>0&&l.supportsStatistics?SE(_,new lo({where:z,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:M}),r):null,q={features:B};return V&&(q.statsFeatures=V),Qr(q)}return null}function w8e(e,t){return Bi(e,{query:{f:"json"},signal:t&&t.signal})}function b8e({relatedInfos:e,layer:t},i){const r={};return e.forEach((s,l)=>{const{relation:d}=s;if(!d){const k=new ge("relation-required","A relation is required on a layer to retrieve related records.");throw PB.error(k),k}const{relatedTableId:y}=d;if(typeof y!="number"){const k=new ge("A related table ID is required on a layer to retrieve related records.");throw PB.error(k),k}const v=`${t.url}/${y}`,_=RB.get(v),M=_||w8e(v,i);_||RB.set(v,M),r[l]=M}),Qr(r)}function _8e({graphic:e,relatedInfos:t,layer:i},r){const s={};return t.forEach((l,d)=>{l.layerInfo&&(s[d]=v8e(e,l,i,r))}),Qr(s)}function x8e({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new cre({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function S8e(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const NB={chartAnimation:!0};let On=class extends st{constructor(e){super(e),this.abilities={...NB},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...NB,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:s,layer:l}=this;return t==null?void 0:t.map(d=>{const y=d==null?void 0:d.clone();if(!y)return null;if(y.title=t1({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:y.title}),y.caption=t1({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:y.caption}),y.altText=t1({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:y.altText}),y.type==="image"){const{value:v}=y;return this._setImageValue({value:v,formattedAttributes:i,layer:l}),y.value.sourceURL?y:void 0}if(y.type==="pie-chart"||y.type==="line-chart"||y.type==="column-chart"||y.type==="bar-chart"){const{value:v}=y;return this._setChartValue({value:v,chartType:y.type,attributes:e,formattedAttributes:i,layer:l}),y}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:s}=e,{linkURL:l,sourceURL:d}=i;if(d){const y=rk(d,s);i.sourceURL=ik({formattedAttributes:r,template:y,fieldInfoMap:t})}if(l){const y=rk(l,s);i.linkURL=ik({formattedAttributes:r,template:y,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:s,layer:l}=e,{popupTemplate:d,relatedInfos:y}=this,{fields:v,normalizeField:_}=t;if(t.fields=G$e(v,l),_&&(t.normalizeField=CS(_,l)),!v.some(k=>!!(r[k]!=null||Uh(k)&&y.size)))return;const M=d==null?void 0:d.fieldInfos;v.forEach(k=>{if(Uh(k))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:M,fieldName:k,formattedAttributes:r,chartType:s,value:t})]);const O=this._getChartOption({value:t,attributes:i,chartType:s,formattedAttributes:r,fieldName:k,fieldInfos:M});t.series.push(O)})}_getRelatedChartInfos(e){var D;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:s,value:l}=e,d=[],y=Ok(i),{layerId:v,fieldName:_}=y,M=(D=this.relatedInfos)==null?void 0:D.get(v.toString());if(!M)return d;const{relatedFeatures:k,relation:O}=M;if(!O||!k)return d;const{cardinality:R}=O;return k.forEach(z=>{const{attributes:B}=z;B&&Object.keys(B).forEach(V=>{V===_&&d.push(this._getChartOption({value:l,attributes:B,formattedAttributes:r,fieldName:i,chartType:s,relatedFieldName:V,fieldInfos:t}))})}),R==="one-to-many"||R==="many-to-many"?d:[d[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var J,ne,re,ue,_e,xe;const{value:t,attributes:i,formattedAttributes:r,fieldName:s,relatedFieldName:l,fieldInfos:d,chartType:y}=e,{layer:v,fieldInfoMap:_}=this,{normalizeField:M,tooltipField:k}=t,O=M?Uh(M)?i[Ok(M).fieldName]:i[M]:null,R=l&&i[l]!==void 0?i[l]:i[s]!==void 0?i[s]:r[s],D=new BQ({fieldName:s,value:R===void 0?null:R&&O?R/O:R});if(Uh(s)){const Ne=_.get(s.toLowerCase()),Ce=_.get(k.toLowerCase()),Ge=(J=Ne==null?void 0:Ne.fieldName)!=null?J:s,Ze=(_e=(ue=(re=r[(ne=Ce==null?void 0:Ce.fieldName)!=null?ne:k])!=null?re:Ne==null?void 0:Ne.label)!=null?ue:Ne==null?void 0:Ne.fieldName)!=null?_e:l,lt=r[Ge];return D.tooltip=this._getTooltip({label:Ze,value:lt,chartType:y}),D}const z=bie(d,s),B=CS(s,v),V=k&&r[k]!==void 0?r[k]:vie(z||new F3({fieldName:B}),(xe=this.popupTemplate)==null?void 0:xe.expressionInfos),q=r[B];return D.tooltip=this._getTooltip({label:V,value:q,chartType:y}),D}};g([S()],On.prototype,"abilities",void 0),g([oi("abilities")],On.prototype,"castAbilities",null),g([S()],On.prototype,"activeMediaInfoIndex",void 0),g([S({readOnly:!0})],On.prototype,"activeMediaInfo",null),g([S()],On.prototype,"attributes",void 0),g([S()],On.prototype,"description",void 0),g([S()],On.prototype,"fieldInfoMap",void 0),g([S()],On.prototype,"formattedAttributes",void 0),g([S()],On.prototype,"expressionAttributes",void 0),g([S({readOnly:!0})],On.prototype,"formattedMediaInfos",null),g([S()],On.prototype,"layer",void 0),g([S({readOnly:!0})],On.prototype,"formattedMediaInfoCount",null),g([S()],On.prototype,"mediaInfos",void 0),g([S()],On.prototype,"popupTemplate",void 0),g([S()],On.prototype,"relatedInfos",void 0),g([S()],On.prototype,"title",void 0),On=g([Q("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],On);const r1=On;var FB=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],$8e=[].concat(FB.slice(30,39),FB.slice(28,30).reverse()),M8e=[{name:"default",colors:$8e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const DB="en-us",kR=new Map([["ar",()=>Le(()=>import("./ar.4dc6191a.js"),["ar.4dc6191a.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.a)],["bg-bg",()=>Le(()=>import("./bg_BG.c52f2d3f.js"),["bg_BG.c52f2d3f.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.b)],["bs-ba",()=>Le(()=>import("./bs_BA.dea32ce5.js"),["bs_BA.dea32ce5.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.b)],["ca-es",()=>Le(()=>import("./ca_ES.20b19104.js"),["ca_ES.20b19104.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.c)],["cs-cz",()=>Le(()=>import("./cs_CZ.30f0a0dc.js"),["cs_CZ.30f0a0dc.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.c)],["da-dk",()=>Le(()=>import("./da_DK.b8d0e7ac.js"),["da_DK.b8d0e7ac.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.d)],["de-de",()=>Le(()=>import("./de_DE.08196323.js"),["de_DE.08196323.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.d)],["de-ch",()=>Le(()=>import("./de_CH.5d6685a9.js"),["de_CH.5d6685a9.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.d)],["el-gr",()=>Le(()=>import("./el_GR.c34c39c2.js"),["el_GR.c34c39c2.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["en-us",()=>Le(()=>import("./en_US.58fb12c0.js"),["en_US.58fb12c0.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["en-ca",()=>Le(()=>import("./en_CA.bf2bc83b.js"),["en_CA.bf2bc83b.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["es-es",()=>Le(()=>import("./es_ES.990a5784.js"),["es_ES.990a5784.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["et-ee",()=>Le(()=>import("./et_EE.3eaec652.js"),["et_EE.3eaec652.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["fi-fi",()=>Le(()=>import("./fi_FI.5397a92e.js"),["fi_FI.5397a92e.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.f)],["fr-fr",()=>Le(()=>import("./fr_FR.1735cff8.js"),["fr_FR.1735cff8.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.f)],["he-il",()=>Le(()=>import("./he_IL.fa6085be.js"),["he_IL.fa6085be.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.h)],["hr-hr",()=>Le(()=>import("./hr_HR.e9361751.js"),["hr_HR.e9361751.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.h)],["hu-hu",()=>Le(()=>import("./hu_HU.37349893.js"),["hu_HU.37349893.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.h)],["id-id",()=>Le(()=>import("./id_ID.935d8150.js"),["id_ID.935d8150.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.i)],["it-it",()=>Le(()=>import("./it_IT.c73e8e5e.js"),["it_IT.c73e8e5e.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.i)],["ja-jp",()=>Le(()=>import("./ja_JP.17363a69.js"),["ja_JP.17363a69.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.j)],["ko-kr",()=>Le(()=>import("./ko_KR.b3c8049f.js"),["ko_KR.b3c8049f.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.k)],["lt-lt",()=>Le(()=>import("./lt_LT.520661ee.js"),["lt_LT.520661ee.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.l)],["lv-lv",()=>Le(()=>import("./lv_LV.c2022ffc.js"),["lv_LV.c2022ffc.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.l)],["nb-no",()=>Le(()=>import("./nb_NO.b81af806.js"),["nb_NO.b81af806.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.n)],["nl-nl",()=>Le(()=>import("./nl_NL.b5e4e1f8.js"),["nl_NL.b5e4e1f8.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.n)],["pl-pl",()=>Le(()=>import("./pl_PL.47a9df4a.js"),["pl_PL.47a9df4a.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.p)],["pt-br",()=>Le(()=>import("./pt_BR.512ff419.js"),["pt_BR.512ff419.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.p)],["pt-pt",()=>Le(()=>import("./pt_PT.89c766b3.js"),["pt_PT.89c766b3.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.p)],["ro-ro",()=>Le(()=>import("./ro_RO.cdb10687.js"),["ro_RO.cdb10687.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.r)],["ru-ru",()=>Le(()=>import("./ru_RU.fb5ffe9b.js"),["ru_RU.fb5ffe9b.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.r)],["sk-sk",()=>Le(()=>import("./sk_SK.c690c7d2.js"),["sk_SK.c690c7d2.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["sl-sl",()=>Le(()=>import("./sl_SL.b6513f33.js"),["sl_SL.b6513f33.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["sr-rs",()=>Le(()=>import("./sr_RS.71408a7c.js"),["sr_RS.71408a7c.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["sv-se",()=>Le(()=>import("./sv_SE.5f00a442.js"),["sv_SE.5f00a442.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["th-th",()=>Le(()=>import("./th_TH.e8c3ff07.js"),["th_TH.e8c3ff07.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.t)],["tr-tr",()=>Le(()=>import("./tr_TR.0d292c66.js"),["tr_TR.0d292c66.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.t)],["uk-ua",()=>Le(()=>import("./uk_UA.f4a29cdf.js"),["uk_UA.f4a29cdf.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.u)],["vi-vn",()=>Le(()=>import("./vi_VN.806d0c36.js"),["vi_VN.806d0c36.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.v)],["zh-cn",()=>Le(()=>import("./zh_Hans.a407cf98.js"),["zh_Hans.a407cf98.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.z)],["zh-hk",()=>Le(()=>import("./zh_Hant.7e13eee4.js"),["zh_Hant.7e13eee4.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.z)],["zh-tw",()=>Le(()=>import("./zh_Hant.7e13eee4.js"),["zh_Hant.7e13eee4.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.z)]]);function E8e(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of kR.keys())if(r.startsWith(t)){i=r;break}return i}function T8e(e){return e?kR.has(e.toLowerCase())?e.toLowerCase():E8e(e)||DB:DB}let wy,ww;async function I8e(e=Pa()){if(e=T8e(e),wy&&e===ww)return wy;wy=Le(()=>import("./index.80c6615c.js"),["index.80c6615c.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(t=>t.i),ww=e;try{const[t,i]=await Promise.all([wy,kR.get(ww)()]);ww===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return wy=null,ww=null,null}return wy}function C8e(e,t="default"){const i=M8e.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const Lr={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},EE=.05,TE=.95,IE=15,eh="color",Fp="tooltip",bw="value",jB="default-line-value";let Po=class extends rr{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new r1,this.messages=null,this._getChartDependencies=async i=>{const r=await I8e(),{destroyed:s,viewModel:l}=this;if(s||!l||!i)return;const{activeMediaInfo:d}=l,y=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:d,chartsModule:r,colorMap:y})}}initialize(){this._featureElementInfo=new fR,this.own([Pe(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),Jt),Pe(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),Jt)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return Z("div",{bind:this,class:Lr.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?Z("div",{key:"media-element-container",class:Lr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:l,altText:d,title:y,type:v}=e,{sourceURL:_,linkURL:M}=s,k=mie(M)?"_blank":"_self",O=k==="_blank"?"noreferrer":"",R=l?t:null,D=R?R.timestamp:0,z=R?R.sourceURL:_,B=Z("img",{alt:d||y,key:`media-${v}-${i}-${r}-${D}`,src:z});return(M?Z("a",{title:y,href:M,rel:O,target:k},B):null)||B}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return Z("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:Lr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?Z("div",{key:"media-title",class:Lr.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?Z("div",{key:"media-caption",class:Lr.mediaItemCaption,innerHTML:e.caption}):null;return Z("div",{key:"media-container",class:Lr.mediaItemContainer},Z("div",{key:"media-item-container",class:Lr.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(Lr.mediaButton,Lr.mediaPrevious):this.classes(Lr.mediaButton,Lr.mediaNext),s=t?this.classes(Lr.mediaIcon,Lr.mediaPreviousIconLTR,Lr.iconLeftTriangleArrow):this.classes(Lr.mediaIcon,Lr.mediaNextIconLTR,Lr.iconRightTriangleArrow),l=t?this.classes(Lr.mediaIcon,Lr.mediaPreviousIconRTL,Lr.iconRightTriangleArrow):this.classes(Lr.mediaIcon,Lr.mediaNextIconRTL,Lr.iconLeftTriangleArrow),d=t?"media-previous":"media-next",y=t?this._previous:this._next;return Z("button",{type:"button",key:d,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:y},Z("span",{"aria-hidden":"true",class:s}),Z("span",{"aria-hidden":"true",class:l}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var l;const{am4core:t}=e,i=(l=this.viewModel)==null?void 0:l.layer,r=new Map;if(!i)return r;const s=await rEe(i.renderer);return s.delete(null),Array.from(s.values()).every(d=>(d==null?void 0:d.length)===1)&&(r.set(jB,t.color({r:50,g:50,b:50,a:1})),Array.from(s.keys()).forEach(d=>{d&&r.set(d,t.color(s.get(d)[0].toCss(!0)))})),r}_handleMediaKeyup(e){const t=C0(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s,colorMap:l}=e,{value:d,type:y}=s,{am4core:v}=i,_=C8e(v);function M(R){R instanceof v.ColorSet&&_&&(R.list=_)}mR()&&v.useTheme(i.am4themes_dark);const k=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!k.matches?v.useTheme(i.am4themes_animated):v.unuseTheme(i.am4themes_animated),v.useTheme(M);const O=y==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",s.altText||s.title),O.data=d.series.map(R=>({[Fp]:R.tooltip,[bw]:R.value,[eh]:l.get(R.fieldName)})).filter(R=>y!=="pie-chart"||R.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,l=r.create(t,s.PieChart);l.rtl=$l(this.container);const d=l.series.push(new s.PieSeries);return d.labels.template.disabled=!0,d.ticks.template.disabled=!0,d.dataFields.value=bw,d.dataFields.category=Fp,this._customizeChartTooltip(d.tooltip,r),d.slices.template.tooltipText=l.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",d.slices.template.propertyFields.fill=eh,d.slices.template.propertyFields.stroke=eh,l}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:l,am4charts:d}=i,y=e.xAxes.push(new d.CategoryAxis);y.dataFields.category=Fp,y.renderer.labels.template.disabled=!0,this._customizeChartTooltip(y.tooltip,l),y.tooltip.events.on("sizechanged",()=>{y.tooltip.dy=-y.tooltip.contentHeight});const v=e.yAxes.push(new d.ValueAxis),_=v.renderer.labels.template;v.renderer.minLabelPosition=EE,v.renderer.maxLabelPosition=TE,v.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(v.tooltip,l),_.wrap=!0;const M=e.series.push(new d.ColumnSeries);M.dataFields.valueY=bw,M.dataFields.categoryX=Fp,M.columns.template.propertyFields.fill=eh,M.columns.template.propertyFields.stroke=eh,e.cursor=new d.XYCursor,s.series.length>IE&&(e.scrollbarX=new l.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:l,am4charts:d}=i,y=e.yAxes.push(new d.CategoryAxis);y.dataFields.category=Fp,y.renderer.inversed=!0,y.renderer.labels.template.disabled=!0,this._customizeChartTooltip(y.tooltip,l),y.tooltip.events.on("sizechanged",()=>{y.tooltip.dx=y.tooltip.contentWidth});const v=e.xAxes.push(new d.ValueAxis),_=v.renderer.labels.template;v.renderer.minLabelPosition=EE,v.renderer.maxLabelPosition=TE,v.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(v.tooltip,l),_.wrap=!0;const M=e.series.push(new d.ColumnSeries);M.dataFields.valueX=bw,M.dataFields.categoryY=Fp,M.columns.template.propertyFields.fill=eh,M.columns.template.propertyFields.stroke=eh,e.cursor=new d.XYCursor,s.series.length>IE&&(e.scrollbarY=new l.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:s}=t,{value:l}=r,{am4core:d,am4charts:y}=i,v=e.xAxes.push(new y.CategoryAxis);v.dataFields.category=Fp,v.renderer.labels.template.disabled=!0,this._customizeChartTooltip(v.tooltip,d),v.tooltip.events.on("sizechanged",()=>{v.tooltip.dy=-v.tooltip.contentHeight});const _=e.yAxes.push(new y.ValueAxis),M=_.renderer.labels.template;_.renderer.minLabelPosition=EE,_.renderer.maxLabelPosition=TE,_.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(_.tooltip,d),M.wrap=!0;const k=e.series.push(new y.LineSeries);k.dataFields.categoryX=Fp,k.dataFields.valueY=bw,k.strokeWidth=1;const O=s.get(jB);O&&(k.stroke=O);const R=k.bullets.push(new y.CircleBullet);R.propertyFields.fill=eh,R.propertyFields.stroke=eh,e.cursor=new y.XYCursor,l.series.length>IE&&(e.scrollbarX=new d.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:l,am4charts:d}=i,y=l.create(t,d.XYChart);return y.rtl=$l(this.container),s==="column-chart"&&this._createColumnChart(y,e),s==="bar-chart"&&this._createBarChart(y,e),s==="line-chart"&&this._createLineChart(y,e),y}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,s=""]=e.split("#");return`${r}${i}timestamp=${t}${s?"#":""}${s}`}};g([tt("viewModel.attributes")],Po.prototype,"attributes",void 0),g([tt("viewModel.activeMediaInfoIndex")],Po.prototype,"activeMediaInfoIndex",void 0),g([tt("viewModel.description")],Po.prototype,"description",void 0),g([tt("viewModel.fieldInfoMap")],Po.prototype,"fieldInfoMap",void 0),g([tt("viewModel.layer")],Po.prototype,"layer",void 0),g([tt("viewModel.mediaInfos")],Po.prototype,"mediaInfos",void 0),g([tt("viewModel.popupTemplate")],Po.prototype,"popupTemplate",void 0),g([tt("viewModel.relatedInfos")],Po.prototype,"relatedInfos",void 0),g([tt("viewModel.title")],Po.prototype,"title",void 0),g([S({type:r1})],Po.prototype,"viewModel",void 0),g([S(),Gi("esri/widgets/Feature/t9n/Feature")],Po.prototype,"messages",void 0),Po=g([Q("esri.widgets.Feature.FeatureMedia")],Po);const Ire=Po;class k8e{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class zc{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class Z1 extends zc{constructor(t,i,r,s,l,d){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=r,this._hasM=s,this._cacheId=l,this._partId=d}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const r=this._hasZ,s=this._hasM;let l=null;l=r&&!s?new ut(i[0],i[1],i[2],void 0,this._spRef):s&&!r?new ut(i[0],i[1],void 0,i[2],this._spRef):r&&s?new ut(i[0],i[1],i[2],i[3],this._spRef):new ut(i[0],i[1],this._spRef),l.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=l}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof Z1&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class AR extends zc{constructor(t,i,r,s,l){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=r,this._hasM=s,this._spRef=i,this._cacheId=l}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new Z1(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof AR&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class Y1 extends Error{}class A8e extends Y1{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class O8e extends Y1{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class L8e extends Y1{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class y2 extends Y1{}class Cre extends Y1{constructor(t){super(`Invalid unit ${t}`)}}class wl extends Y1{}class Dp extends Y1{constructor(){super("Zone is an abstract class")}}const ht="numeric",Vu="short",Fa="long",Lk={year:ht,month:ht,day:ht},kre={year:ht,month:Vu,day:ht},P8e={year:ht,month:Vu,day:ht,weekday:Vu},Are={year:ht,month:Fa,day:ht},Ore={year:ht,month:Fa,day:ht,weekday:Fa},Lre={hour:ht,minute:ht},Pre={hour:ht,minute:ht,second:ht},Rre={hour:ht,minute:ht,second:ht,timeZoneName:Vu},Nre={hour:ht,minute:ht,second:ht,timeZoneName:Fa},Fre={hour:ht,minute:ht,hourCycle:"h23"},Dre={hour:ht,minute:ht,second:ht,hourCycle:"h23"},jre={hour:ht,minute:ht,second:ht,hourCycle:"h23",timeZoneName:Vu},zre={hour:ht,minute:ht,second:ht,hourCycle:"h23",timeZoneName:Fa},Vre={year:ht,month:ht,day:ht,hour:ht,minute:ht},Ure={year:ht,month:ht,day:ht,hour:ht,minute:ht,second:ht},Bre={year:ht,month:Vu,day:ht,hour:ht,minute:ht},Gre={year:ht,month:Vu,day:ht,hour:ht,minute:ht,second:ht},R8e={year:ht,month:Vu,day:ht,weekday:Vu,hour:ht,minute:ht},qre={year:ht,month:Fa,day:ht,hour:ht,minute:ht,timeZoneName:Vu},Hre={year:ht,month:Fa,day:ht,hour:ht,minute:ht,second:ht,timeZoneName:Vu},Wre={year:ht,month:Fa,day:ht,weekday:Fa,hour:ht,minute:ht,timeZoneName:Fa},Jre={year:ht,month:Fa,day:ht,weekday:Fa,hour:ht,minute:ht,second:ht,timeZoneName:Fa};function _i(e){return typeof e>"u"}function y1(e){return typeof e=="number"}function b$(e){return typeof e=="number"&&e%1===0}function N8e(e){return typeof e=="string"}function F8e(e){return Object.prototype.toString.call(e)==="[object Date]"}function Kre(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function D8e(e){return Array.isArray(e)?e:[e]}function zB(e,t,i){if(e.length!==0)return e.reduce((r,s)=>{const l=[t(s),s];return r&&i(r[0],l[0])===r[0]?r:l},null)[1]}function j8e(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function Wg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bh(e,t,i){return b$(e)&&e>=t&&e<=i}function z8e(e,t){return e-t*Math.floor(e/t)}function Sn(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function Id(e){if(!(_i(e)||e===null||e===""))return parseInt(e,10)}function Of(e){if(!(_i(e)||e===null||e===""))return parseFloat(e)}function OR(e){if(!(_i(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function LR(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function Z3(e){return e%4===0&&(e%100!==0||e%400===0)}function ab(e){return Z3(e)?366:365}function jS(e,t){const i=z8e(t-1,12)+1,r=e+(t-i)/12;return i===2?Z3(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function PR(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function zS(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function Pk(e){return e>99?e:e>60?1900+e:2e3+e}function Zre(e,t,i,r=null){const s=new Date(e),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(l.timeZone=r);const d={timeZoneName:t,...l},y=new Intl.DateTimeFormat(i,d).formatToParts(s).find(v=>v.type.toLowerCase()==="timezonename");return y?y.value:null}function _$(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function Yre(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new wl(`Invalid unit value ${e}`);return t}function VS(e,t){const i={};for(const r in e)if(Wg(e,r)){const s=e[r];if(s==null)continue;i[t(r)]=Yre(s)}return i}function lb(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Sn(i,2)}:${Sn(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${Sn(i,2)}${Sn(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function x$(e){return j8e(e,["hour","minute","second","millisecond"])}const Xre=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,V8e=["January","February","March","April","May","June","July","August","September","October","November","December"],Qre=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],U8e=["J","F","M","A","M","J","J","A","S","O","N","D"];function ene(e){switch(e){case"narrow":return[...U8e];case"short":return[...Qre];case"long":return[...V8e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const tne=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ine=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],B8e=["M","T","W","T","F","S","S"];function rne(e){switch(e){case"narrow":return[...B8e];case"short":return[...ine];case"long":return[...tne];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const nne=["AM","PM"],G8e=["Before Christ","Anno Domini"],q8e=["BC","AD"],H8e=["B","A"];function sne(e){switch(e){case"narrow":return[...H8e];case"short":return[...q8e];case"long":return[...G8e];default:return null}}function W8e(e){return nne[e.hour<12?0:1]}function J8e(e,t){return rne(t)[e.weekday-1]}function K8e(e,t){return ene(t)[e.month-1]}function Z8e(e,t){return sne(t)[e.year<0?0:1]}function Y8e(e,t,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&l){const k=e==="days";switch(t){case 1:return k?"tomorrow":`next ${s[e][0]}`;case-1:return k?"yesterday":`last ${s[e][0]}`;case 0:return k?"today":`this ${s[e][0]}`}}const d=Object.is(t,-0)||t<0,y=Math.abs(t),v=y===1,_=s[e],M=r?v?_[1]:_[2]||_[1]:v?s[e][0]:e;return d?`${y} ${M} ago`:`in ${y} ${M}`}function VB(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const X8e={D:Lk,DD:kre,DDD:Are,DDDD:Ore,t:Lre,tt:Pre,ttt:Rre,tttt:Nre,T:Fre,TT:Dre,TTT:jre,TTTT:zre,f:Vre,ff:Bre,fff:qre,ffff:Wre,F:Ure,FF:Gre,FFF:Hre,FFFF:Jre};class qo{static create(t,i={}){return new qo(t,i)}static parseFormat(t){let i=null,r="",s=!1;const l=[];for(let d=0;d<t.length;d++){const y=t.charAt(d);y==="'"?(r.length>0&&l.push({literal:s,val:r}),i=null,r="",s=!s):s||y===i?r+=y:(r.length>0&&l.push({literal:!1,val:r}),r=y,i=y)}return r.length>0&&l.push({literal:s,val:r}),l}static macroTokenToFormatOpts(t){return X8e[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).formatToParts()}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return Sn(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",l=(R,D)=>this.loc.extract(t,R,D),d=R=>t.isOffsetFixed&&t.offset===0&&R.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,R.format):"",y=()=>r?W8e(t):l({hour:"numeric",hourCycle:"h12"},"dayperiod"),v=(R,D)=>r?K8e(t,R):l(D?{month:R}:{month:R,day:"numeric"},"month"),_=(R,D)=>r?J8e(t,R):l(D?{weekday:R}:{weekday:R,month:"long",day:"numeric"},"weekday"),M=R=>{const D=qo.macroTokenToFormatOpts(R);return D?this.formatWithSystemDefault(t,D):R},k=R=>r?Z8e(t,R):l({era:R},"era"),O=R=>{switch(R){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return y();case"d":return s?l({day:"numeric"},"day"):this.num(t.day);case"dd":return s?l({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return _("short",!0);case"cccc":return _("long",!0);case"ccccc":return _("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return _("short",!1);case"EEEE":return _("long",!1);case"EEEEE":return _("narrow",!1);case"L":return s?l({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?l({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return v("short",!0);case"LLLL":return v("long",!0);case"LLLLL":return v("narrow",!0);case"M":return s?l({month:"numeric"},"month"):this.num(t.month);case"MM":return s?l({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return v("short",!1);case"MMMM":return v("long",!1);case"MMMMM":return v("narrow",!1);case"y":return s?l({year:"numeric"},"year"):this.num(t.year);case"yy":return s?l({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?l({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?l({year:"numeric"},"year"):this.num(t.year,6);case"G":return k("short");case"GG":return k("long");case"GGGGG":return k("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return M(R)}};return VB(qo.parseFormat(i),O)}formatDurationFromString(t,i){const r=v=>{switch(v[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=v=>_=>{const M=r(_);return M?this.num(v.get(M),_.length):_},l=qo.parseFormat(i),d=l.reduce((v,{literal:_,val:M})=>_?v:v.concat(M),[]),y=t.shiftTo(...d.map(r).filter(v=>v));return VB(l,s(y))}}class Iu{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Y3{get type(){throw new Dp}get name(){throw new Dp}get ianaName(){return this.name}get isUniversal(){throw new Dp}offsetName(t,i){throw new Dp}formatOffset(t,i){throw new Dp}offset(t){throw new Dp}equals(t){throw new Dp}get isValid(){throw new Dp}}let CE=null;class RR extends Y3{static get instance(){return CE===null&&(CE=new RR),CE}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return Zre(t,i,r)}formatOffset(t,i){return lb(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let k9={};function Q8e(e){return k9[e]||(k9[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),k9[e]}const eTe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function tTe(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,l,d,y,v,_,M]=r;return[d,s,l,y,v,_,M]}function iTe(e,t){const i=e.formatToParts(t),r=[];for(let s=0;s<i.length;s++){const{type:l,value:d}=i[s],y=eTe[l];l==="era"?r[y]=d:_i(y)||(r[y]=parseInt(d,10))}return r}let Vx={};class up extends Y3{static create(t){return Vx[t]||(Vx[t]=new up(t)),Vx[t]}static resetCache(){Vx={},k9={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=up.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return Zre(t,i,r,this.name)}formatOffset(t,i){return lb(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=Q8e(this.name);let[s,l,d,y,v,_,M]=r.formatToParts?iTe(r,i):tTe(r,i);y==="BC"&&(s=-Math.abs(s)+1);const O=PR({year:s,month:l,day:d,hour:v===24?0:v,minute:_,second:M,millisecond:0});let R=+i;const D=R%1e3;return R-=D>=0?D:1e3+D,(O-R)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let kE=null;class co extends Y3{static get utcInstance(){return kE===null&&(kE=new co(0)),kE}static instance(t){return t===0?co.utcInstance:new co(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new co(_$(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${lb(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${lb(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return lb(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class rTe extends Y3{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Rd(e,t){if(_i(e)||e===null)return t;if(e instanceof Y3)return e;if(N8e(e)){const i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?co.utcInstance:co.parseSpecifier(i)||up.create(e)}else return y1(e)?co.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new rTe(e)}let UB=()=>Date.now(),BB="system",GB=null,qB=null,HB=null,WB;class Nn{static get now(){return UB}static set now(t){UB=t}static set defaultZone(t){BB=t}static get defaultZone(){return Rd(BB,RR.instance)}static get defaultLocale(){return GB}static set defaultLocale(t){GB=t}static get defaultNumberingSystem(){return qB}static set defaultNumberingSystem(t){qB=t}static get defaultOutputCalendar(){return HB}static set defaultOutputCalendar(t){HB=t}static get throwOnInvalid(){return WB}static set throwOnInvalid(t){WB=t}static resetCaches(){jr.resetCache(),up.resetCache()}}let JB={};function nTe(e,t={}){const i=JSON.stringify([e,t]);let r=JB[i];return r||(r=new Intl.ListFormat(e,t),JB[i]=r),r}let Rk={};function Nk(e,t={}){const i=JSON.stringify([e,t]);let r=Rk[i];return r||(r=new Intl.DateTimeFormat(e,t),Rk[i]=r),r}let Fk={};function sTe(e,t={}){const i=JSON.stringify([e,t]);let r=Fk[i];return r||(r=new Intl.NumberFormat(e,t),Fk[i]=r),r}let Dk={};function oTe(e,t={}){const{base:i,...r}=t,s=JSON.stringify([e,r]);let l=Dk[s];return l||(l=new Intl.RelativeTimeFormat(e,t),Dk[s]=l),l}let m2=null;function aTe(){return m2||(m2=new Intl.DateTimeFormat().resolvedOptions().locale,m2)}function lTe(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let i;const r=e.substring(0,t);try{i=Nk(e).resolvedOptions()}catch{i=Nk(r).resolvedOptions()}const{numberingSystem:s,calendar:l}=i;return[r,s,l]}}function uTe(e,t,i){return(i||t)&&(e+="-u",i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function cTe(e){const t=[];for(let i=1;i<=12;i++){const r=Gt.utc(2016,i,1);t.push(e(r))}return t}function hTe(e){const t=[];for(let i=1;i<=7;i++){const r=Gt.utc(2016,11,13+i);t.push(e(r))}return t}function Ux(e,t,i,r,s){const l=e.listingMode(i);return l==="error"?null:l==="en"?r(t):s(t)}function pTe(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class dTe{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:l,...d}=r;if(!i||Object.keys(d).length>0){const y={useGrouping:!1,...r};r.padTo>0&&(y.minimumIntegerDigits=r.padTo),this.inf=sTe(t,y)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):LR(t,3);return Sn(i,this.padTo)}}}class fTe{constructor(t,i,r){this.opts=r;let s;if(t.zone.isUniversal){const d=-1*(t.offset/60),y=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;t.offset!==0&&up.create(y).valid?(s=y,this.dt=t):(s="UTC",r.timeZoneName?this.dt=t:this.dt=t.offset===0?t:Gt.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,s=t.zone.name);const l={...this.opts};s&&(l.timeZone=s),this.dtf=Nk(i,l)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class yTe{constructor(t,i,r){this.opts={style:"long",...r},!i&&Kre()&&(this.rtf=oTe(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):Y8e(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class jr{static fromOpts(t){return jr.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,r,s=!1){const l=t||Nn.defaultLocale,d=l||(s?"en-US":aTe()),y=i||Nn.defaultNumberingSystem,v=r||Nn.defaultOutputCalendar;return new jr(d,y,v,l)}static resetCache(){m2=null,Rk={},Fk={},Dk={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r}={}){return jr.create(t,i,r)}constructor(t,i,r,s){const[l,d,y]=lTe(t);this.locale=l,this.numberingSystem=i||d||null,this.outputCalendar=r||y||null,this.intl=uTe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=pTe(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:jr.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1,r=!0){return Ux(this,t,r,ene,()=>{const s=i?{month:t,day:"numeric"}:{month:t},l=i?"format":"standalone";return this.monthsCache[l][t]||(this.monthsCache[l][t]=cTe(d=>this.extract(d,s,"month"))),this.monthsCache[l][t]})}weekdays(t,i=!1,r=!0){return Ux(this,t,r,rne,()=>{const s=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},l=i?"format":"standalone";return this.weekdaysCache[l][t]||(this.weekdaysCache[l][t]=hTe(d=>this.extract(d,s,"weekday"))),this.weekdaysCache[l][t]})}meridiems(t=!0){return Ux(this,void 0,t,()=>nne,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Gt.utc(2016,11,13,9),Gt.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return Ux(this,t,i,sne,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Gt.utc(-40,1,1),Gt.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,i,r){const s=this.dtFormatter(t,i),l=s.formatToParts(),d=l.find(y=>y.type.toLowerCase()===r);return d?d.value:null}numberFormatter(t={}){return new dTe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new fTe(t,this.intl,i)}relFormatter(t={}){return new yTe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return nTe(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function Tv(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function Iv(...e){return t=>e.reduce(([i,r,s],l)=>{const[d,y,v]=l(t,s);return[{...i,...d},y||r,v]},[{},null,1]).slice(0,2)}function Cv(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const s=i.exec(e);if(s)return r(s)}return[null,null]}function one(...e){return(t,i)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=Id(t[i+s]);return[r,null,i+s]}}const ane=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mTe=`(?:${ane.source}?(?:\\[(${Xre.source})\\])?)?`,NR=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,lne=RegExp(`${NR.source}${mTe}`),FR=RegExp(`(?:T${lne.source})?`),gTe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,vTe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,wTe=/(\d{4})-?(\d{3})/,bTe=one("weekYear","weekNumber","weekDay"),_Te=one("year","ordinal"),xTe=/(\d{4})-(\d\d)-(\d\d)/,une=RegExp(`${NR.source} ?(?:${ane.source}|(${Xre.source}))?`),STe=RegExp(`(?: ${une.source})?`);function vg(e,t,i){const r=e[t];return _i(r)?i:Id(r)}function $Te(e,t){return[{year:vg(e,t),month:vg(e,t+1,1),day:vg(e,t+2,1)},null,t+3]}function kv(e,t){return[{hours:vg(e,t,0),minutes:vg(e,t+1,0),seconds:vg(e,t+2,0),milliseconds:OR(e[t+3])},null,t+4]}function X3(e,t){const i=!e[t]&&!e[t+1],r=_$(e[t+1],e[t+2]),s=i?null:co.instance(r);return[{},s,t+3]}function Q3(e,t){const i=e[t]?up.create(e[t]):null;return[{},i,t+1]}const MTe=RegExp(`^T?${NR.source}$`),ETe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function TTe(e){const[t,i,r,s,l,d,y,v,_]=e,M=t[0]==="-",k=v&&v[0]==="-",O=(R,D=!1)=>R!==void 0&&(D||R&&M)?-R:R;return[{years:O(Of(i)),months:O(Of(r)),weeks:O(Of(s)),days:O(Of(l)),hours:O(Of(d)),minutes:O(Of(y)),seconds:O(Of(v),v==="-0"),milliseconds:O(OR(_),k)}]}const ITe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function DR(e,t,i,r,s,l,d){const y={year:t.length===2?Pk(Id(t)):Id(t),month:Qre.indexOf(i)+1,day:Id(r),hour:Id(s),minute:Id(l)};return d&&(y.second=Id(d)),e&&(y.weekday=e.length>3?tne.indexOf(e)+1:ine.indexOf(e)+1),y}const CTe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function kTe(e){const[,t,i,r,s,l,d,y,v,_,M,k]=e,O=DR(t,s,r,i,l,d,y);let R;return v?R=ITe[v]:_?R=0:R=_$(M,k),[O,new co(R)]}function ATe(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const OTe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,LTe=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,PTe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function KB(e){const[,t,i,r,s,l,d,y]=e;return[DR(t,s,r,i,l,d,y),co.utcInstance]}function RTe(e){const[,t,i,r,s,l,d,y]=e;return[DR(t,y,i,r,s,l,d),co.utcInstance]}const NTe=Tv(gTe,FR),FTe=Tv(vTe,FR),DTe=Tv(wTe,FR),jTe=Tv(lne),cne=Iv($Te,kv,X3,Q3),zTe=Iv(bTe,kv,X3,Q3),VTe=Iv(_Te,kv,X3,Q3),UTe=Iv(kv,X3,Q3);function BTe(e){return Cv(e,[NTe,cne],[FTe,zTe],[DTe,VTe],[jTe,UTe])}function GTe(e){return Cv(ATe(e),[CTe,kTe])}function qTe(e){return Cv(e,[OTe,KB],[LTe,KB],[PTe,RTe])}function HTe(e){return Cv(e,[ETe,TTe])}const WTe=Iv(kv);function JTe(e){return Cv(e,[MTe,WTe])}const KTe=Tv(xTe,STe),ZTe=Tv(une),YTe=Iv(kv,X3,Q3);function XTe(e){return Cv(e,[KTe,cne],[ZTe,YTe])}const QTe="Invalid Duration",hne={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},eIe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...hne},Qa=146097/400,by=146097/4800,tIe={years:{quarters:4,months:12,weeks:Qa/7,days:Qa,hours:Qa*24,minutes:Qa*24*60,seconds:Qa*24*60*60,milliseconds:Qa*24*60*60*1e3},quarters:{months:3,weeks:Qa/28,days:Qa/4,hours:Qa*24/4,minutes:Qa*24*60/4,seconds:Qa*24*60*60/4,milliseconds:Qa*24*60*60*1e3/4},months:{weeks:by/7,days:by,hours:by*24,minutes:by*24*60,seconds:by*24*60*60,milliseconds:by*24*60*60*1e3},...hne},u0=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],iIe=u0.slice(0).reverse();function Lf(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new Mi(r)}function rIe(e){return e<0?Math.floor(e):Math.ceil(e)}function pne(e,t,i,r,s){const l=e[s][i],d=t[i]/l,y=Math.sign(d)===Math.sign(r[s]),v=!y&&r[s]!==0&&Math.abs(d)<=1?rIe(d):Math.trunc(d);r[s]+=v,t[i]-=v*l}function nIe(e,t){iIe.reduce((i,r)=>_i(t[r])?i:(i&&pne(e,t,i,t,r),r),null)}class Mi{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||jr.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i?tIe:eIe,this.isLuxonDuration=!0}static fromMillis(t,i){return Mi.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new wl(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Mi({values:VS(t,Mi.normalizeUnit),loc:jr.fromObject(i),conversionAccuracy:i.conversionAccuracy})}static fromDurationLike(t){if(y1(t))return Mi.fromMillis(t);if(Mi.isDuration(t))return t;if(typeof t=="object")return Mi.fromObject(t);throw new wl(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=HTe(t);return r?Mi.fromObject(r,i):Mi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=JTe(t);return r?Mi.fromObject(r,i):Mi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new wl("need to specify a reason the Duration is invalid");const r=t instanceof Iu?t:new Iu(t,i);if(Nn.throwOnInvalid)throw new L8e(r);return new Mi({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new Cre(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?qo.create(this.loc,r).formatDurationFromString(this,t):QTe}toHuman(t={}){const i=u0.map(r=>{const s=this.values[r];return _i(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=LR(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let s=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(s+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||r.milliseconds!==0)&&(s+=".SSS"));let l=r.toFormat(s);return t.includePrefix&&(l="T"+l),l}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Mi.fromDurationLike(t),r={};for(const s of u0)(Wg(i.values,s)||Wg(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Lf(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=Mi.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Yre(t(this.values[r],r));return Lf(this,{values:i},!0)}get(t){return this[Mi.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...VS(t,Mi.normalizeUnit)};return Lf(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i}),l={loc:s};return r&&(l.conversionAccuracy=r),Lf(this,l)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return nIe(this.matrix,t),Lf(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(d=>Mi.normalizeUnit(d));const i={},r={},s=this.toObject();let l;for(const d of u0)if(t.indexOf(d)>=0){l=d;let y=0;for(const _ in r)y+=this.matrix[_][d]*r[_],r[_]=0;y1(s[d])&&(y+=s[d]);const v=Math.trunc(y);i[d]=v,r[d]=(y*1e3-v*1e3)/1e3;for(const _ in s)u0.indexOf(_)>u0.indexOf(d)&&pne(this.matrix,s,_,i,d)}else y1(s[d])&&(r[d]=s[d]);for(const d in r)r[d]!==0&&(i[l]+=d===l?r[d]:r[d]/this.matrix[l][d]);return Lf(this,{values:i},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Lf(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of u0)if(!i(this.values[r],t.values[r]))return!1;return!0}}const _w="Invalid Interval";function sIe(e,t){return!e||!e.isValid?Zr.invalid("missing or invalid start"):!t||!t.isValid?Zr.invalid("missing or invalid end"):t<e?Zr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Zr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new wl("need to specify a reason the Interval is invalid");const r=t instanceof Iu?t:new Iu(t,i);if(Nn.throwOnInvalid)throw new O8e(r);return new Zr({invalid:r})}static fromDateTimes(t,i){const r=$w(t),s=$w(i),l=sIe(r,s);return l==null?new Zr({start:r,end:s}):l}static after(t,i){const r=Mi.fromDurationLike(i),s=$w(t);return Zr.fromDateTimes(s,s.plus(r))}static before(t,i){const r=Mi.fromDurationLike(i),s=$w(t);return Zr.fromDateTimes(s.minus(r),s)}static fromISO(t,i){const[r,s]=(t||"").split("/",2);if(r&&s){let l,d;try{l=Gt.fromISO(r,i),d=l.isValid}catch{d=!1}let y,v;try{y=Gt.fromISO(s,i),v=y.isValid}catch{v=!1}if(d&&v)return Zr.fromDateTimes(l,y);if(d){const _=Mi.fromISO(s,i);if(_.isValid)return Zr.after(l,_)}else if(v){const _=Mi.fromISO(r,i);if(_.isValid)return Zr.before(y,_)}}return Zr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),r=this.end.startOf(t);return Math.floor(r.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?Zr.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map($w).filter(d=>this.contains(d)).sort(),r=[];let{s}=this,l=0;for(;s<this.e;){const d=i[l]||this.e,y=+d>+this.e?this.e:d;r.push(Zr.fromDateTimes(s,y)),s=y,l+=1}return r}splitBy(t){const i=Mi.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,l;const d=[];for(;r<this.e;){const y=this.start.plus(i.mapUnits(v=>v*s));l=+y>+this.e?this.e:y,d.push(Zr.fromDateTimes(r,l)),r=l,s+=1}return d}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:Zr.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return Zr.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((s,l)=>s.s-l.s).reduce(([s,l],d)=>l?l.overlaps(d)||l.abutsStart(d)?[s,l.union(d)]:[s.concat([l]),d]:[s,d],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const s=[],l=t.map(v=>[{time:v.s,type:"s"},{time:v.e,type:"e"}]),d=Array.prototype.concat(...l),y=d.sort((v,_)=>v.time-_.time);for(const v of y)r+=v.type==="s"?1:-1,r===1?i=v.time:(i&&+i!=+v.time&&s.push(Zr.fromDateTimes(i,v.time)),i=null);return Zr.merge(s)}difference(...t){return Zr.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:_w}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:_w}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:_w}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:_w}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:_w}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Mi.invalid(this.invalidReason)}mapEndpoints(t){return Zr.fromDateTimes(t(this.s),t(this.e))}}class Bx{static hasDST(t=Nn.defaultZone){const i=Gt.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return up.isValidZone(t)}static normalizeZone(t){return Rd(t,Nn.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:l="gregory"}={}){return(s||jr.create(i,r,l)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:l="gregory"}={}){return(s||jr.create(i,r,l)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||jr.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||jr.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return jr.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return jr.create(i,null,"gregory").eras(t)}static features(){return{relative:Kre()}}}function ZB(e,t){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(Mi.fromMillis(r).as("days"))}function oIe(e,t,i){const r=[["years",(y,v)=>v.year-y.year],["quarters",(y,v)=>v.quarter-y.quarter],["months",(y,v)=>v.month-y.month+(v.year-y.year)*12],["weeks",(y,v)=>{const _=ZB(y,v);return(_-_%7)/7}],["days",ZB]],s={};let l,d;for(const[y,v]of r)if(i.indexOf(y)>=0){l=y;let _=v(e,t);d=e.plus({[y]:_}),d>t?(e=e.plus({[y]:_-1}),_-=1):e=d,s[y]=_}return[e,s,d,l]}function aIe(e,t,i,r){let[s,l,d,y]=oIe(e,t,i);const v=t-s,_=i.filter(k=>["hours","minutes","seconds","milliseconds"].indexOf(k)>=0);_.length===0&&(d<t&&(d=s.plus({[y]:1})),d!==s&&(l[y]=(l[y]||0)+v/(d-s)));const M=Mi.fromObject(l,r);return _.length>0?Mi.fromMillis(v,r).shiftTo(..._).plus(M):M}const jR={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},YB={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},lIe=jR.hanidec.replace(/[\[|\]]/g,"").split("");function uIe(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(jR.hanidec)!==-1)t+=lIe.indexOf(e[i]);else for(const s in YB){const[l,d]=YB[s];r>=l&&r<=d&&(t+=r-l)}}return parseInt(t,10)}else return t}function Hl({numberingSystem:e},t=""){return new RegExp(`${jR[e||"latn"]}${t}`)}const cIe="missing Intl.DateTimeFormat.formatToParts support";function Ri(e,t=i=>i){return{regex:e,deser:([i])=>t(uIe(i))}}const hIe=String.fromCharCode(160),dne=`[ ${hIe}]`,fne=new RegExp(dne,"g");function pIe(e){return e.replace(/\./g,"\\.?").replace(fne,dne)}function XB(e){return e.replace(/\./g,"").replace(fne," ").toLowerCase()}function Wl(e,t){return e===null?null:{regex:RegExp(e.map(pIe).join("|")),deser:([i])=>e.findIndex(r=>XB(i)===XB(r))+t}}function QB(e,t){return{regex:e,deser:([,i,r])=>_$(i,r),groups:t}}function AE(e){return{regex:e,deser:([t])=>t}}function dIe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function fIe(e,t){const i=Hl(t),r=Hl(t,"{2}"),s=Hl(t,"{3}"),l=Hl(t,"{4}"),d=Hl(t,"{6}"),y=Hl(t,"{1,2}"),v=Hl(t,"{1,3}"),_=Hl(t,"{1,6}"),M=Hl(t,"{1,9}"),k=Hl(t,"{2,4}"),O=Hl(t,"{4,6}"),R=B=>({regex:RegExp(dIe(B.val)),deser:([V])=>V,literal:!0}),z=(B=>{if(e.literal)return R(B);switch(B.val){case"G":return Wl(t.eras("short",!1),0);case"GG":return Wl(t.eras("long",!1),0);case"y":return Ri(_);case"yy":return Ri(k,Pk);case"yyyy":return Ri(l);case"yyyyy":return Ri(O);case"yyyyyy":return Ri(d);case"M":return Ri(y);case"MM":return Ri(r);case"MMM":return Wl(t.months("short",!0,!1),1);case"MMMM":return Wl(t.months("long",!0,!1),1);case"L":return Ri(y);case"LL":return Ri(r);case"LLL":return Wl(t.months("short",!1,!1),1);case"LLLL":return Wl(t.months("long",!1,!1),1);case"d":return Ri(y);case"dd":return Ri(r);case"o":return Ri(v);case"ooo":return Ri(s);case"HH":return Ri(r);case"H":return Ri(y);case"hh":return Ri(r);case"h":return Ri(y);case"mm":return Ri(r);case"m":return Ri(y);case"q":return Ri(y);case"qq":return Ri(r);case"s":return Ri(y);case"ss":return Ri(r);case"S":return Ri(v);case"SSS":return Ri(s);case"u":return AE(M);case"uu":return AE(y);case"uuu":return Ri(i);case"a":return Wl(t.meridiems(),0);case"kkkk":return Ri(l);case"kk":return Ri(k,Pk);case"W":return Ri(y);case"WW":return Ri(r);case"E":case"c":return Ri(i);case"EEE":return Wl(t.weekdays("short",!1,!1),1);case"EEEE":return Wl(t.weekdays("long",!1,!1),1);case"ccc":return Wl(t.weekdays("short",!0,!1),1);case"cccc":return Wl(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return QB(new RegExp(`([+-]${y.source})(?::(${r.source}))?`),2);case"ZZZ":return QB(new RegExp(`([+-]${y.source})(${r.source})?`),2);case"z":return AE(/[a-z_+-/]{1,256}?/i);default:return R(B)}})(e)||{invalidReason:cIe};return z.token=e,z}const yIe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function mIe(e,t,i){const{type:r,value:s}=e;if(r==="literal")return{literal:!0,val:s};const l=i[r];let d=yIe[r];if(typeof d=="object"&&(d=d[l]),d)return{literal:!1,val:d}}function gIe(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function vIe(e,t,i){const r=e.match(t);if(r){const s={};let l=1;for(const d in i)if(Wg(i,d)){const y=i[d],v=y.groups?y.groups+1:1;!y.literal&&y.token&&(s[y.token.val[0]]=y.deser(r.slice(l,l+v))),l+=v}return[r,s]}else return[r,{}]}function wIe(e){const t=l=>{switch(l){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return _i(e.z)||(i=up.create(e.z)),_i(e.Z)||(i||(i=new co(e.Z)),r=e.Z),_i(e.q)||(e.M=(e.q-1)*3+1),_i(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),_i(e.u)||(e.S=OR(e.u)),[Object.keys(e).reduce((l,d)=>{const y=t(d);return y&&(l[y]=e[d]),l},{}),i,r]}let OE=null;function bIe(){return OE||(OE=Gt.fromMillis(1555555555555)),OE}function _Ie(e,t){if(e.literal)return e;const i=qo.macroTokenToFormatOpts(e.val);if(!i)return e;const l=qo.create(t,i).formatDateTimeParts(bIe()).map(d=>mIe(d,t,i));return l.includes(void 0)?e:l}function xIe(e,t){return Array.prototype.concat(...e.map(i=>_Ie(i,t)))}function yne(e,t,i){const r=xIe(qo.parseFormat(i),e),s=r.map(d=>fIe(d,e)),l=s.find(d=>d.invalidReason);if(l)return{input:t,tokens:r,invalidReason:l.invalidReason};{const[d,y]=gIe(s),v=RegExp(d,"i"),[_,M]=vIe(t,v,y),[k,O,R]=M?wIe(M):[null,null,void 0];if(Wg(M,"a")&&Wg(M,"H"))throw new y2("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:v,rawMatches:_,matches:M,result:k,zone:O,specificOffset:R}}}function SIe(e,t,i){const{result:r,zone:s,specificOffset:l,invalidReason:d}=yne(e,t,i);return[r,s,l,d]}const mne=[0,31,59,90,120,151,181,212,243,273,304,334],gne=[0,31,60,91,121,152,182,213,244,274,305,335];function Ml(e,t){return new Iu("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function vne(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function wne(e,t,i){return i+(Z3(e)?gne:mne)[t-1]}function bne(e,t){const i=Z3(e)?gne:mne,r=i.findIndex(l=>l<t),s=t-i[r];return{month:r+1,day:s}}function jk(e){const{year:t,month:i,day:r}=e,s=wne(t,i,r),l=vne(t,i,r);let d=Math.floor((s-l+10)/7),y;return d<1?(y=t-1,d=zS(y)):d>zS(t)?(y=t+1,d=1):y=t,{weekYear:y,weekNumber:d,weekday:l,...x$(e)}}function eG(e){const{weekYear:t,weekNumber:i,weekday:r}=e,s=vne(t,1,4),l=ab(t);let d=i*7+r-s-3,y;d<1?(y=t-1,d+=ab(y)):d>l?(y=t+1,d-=ab(t)):y=t;const{month:v,day:_}=bne(y,d);return{year:y,month:v,day:_,...x$(e)}}function LE(e){const{year:t,month:i,day:r}=e,s=wne(t,i,r);return{year:t,ordinal:s,...x$(e)}}function tG(e){const{year:t,ordinal:i}=e,{month:r,day:s}=bne(t,i);return{year:t,month:r,day:s,...x$(e)}}function $Ie(e){const t=b$(e.weekYear),i=Bh(e.weekNumber,1,zS(e.weekYear)),r=Bh(e.weekday,1,7);return t?i?r?!1:Ml("weekday",e.weekday):Ml("week",e.week):Ml("weekYear",e.weekYear)}function MIe(e){const t=b$(e.year),i=Bh(e.ordinal,1,ab(e.year));return t?i?!1:Ml("ordinal",e.ordinal):Ml("year",e.year)}function _ne(e){const t=b$(e.year),i=Bh(e.month,1,12),r=Bh(e.day,1,jS(e.year,e.month));return t?i?r?!1:Ml("day",e.day):Ml("month",e.month):Ml("year",e.year)}function xne(e){const{hour:t,minute:i,second:r,millisecond:s}=e,l=Bh(t,0,23)||t===24&&i===0&&r===0&&s===0,d=Bh(i,0,59),y=Bh(r,0,59),v=Bh(s,0,999);return l?d?y?v?!1:Ml("millisecond",s):Ml("second",r):Ml("minute",i):Ml("hour",t)}const PE="Invalid DateTime",iG=864e13;function Gx(e){return new Iu("unsupported zone",`the zone "${e.name}" is not supported`)}function RE(e){return e.weekData===null&&(e.weekData=jk(e.c)),e.weekData}function xw(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Gt({...i,...t,old:i})}function Sne(e,t,i){let r=e-t*60*1e3;const s=i.offset(r);if(t===s)return[r,t];r-=(s-t)*60*1e3;const l=i.offset(r);return s===l?[r,s]:[e-Math.min(s,l)*60*1e3,Math.max(s,l)]}function rG(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function A9(e,t,i){return Sne(PR(e),t,i)}function nG(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,l={...e.c,year:r,month:s,day:Math.min(e.c.day,jS(r,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},d=Mi.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),y=PR(l);let[v,_]=Sne(y,i,e.zone);return d!==0&&(v+=d,_=e.zone.offset(v)),{ts:v,o:_}}function Sw(e,t,i,r,s,l){const{setZone:d,zone:y}=i;if(e&&Object.keys(e).length!==0){const v=t||y,_=Gt.fromObject(e,{...i,zone:v,specificOffset:l});return d?_:_.setZone(y)}else return Gt.invalid(new Iu("unparsable",`the input "${s}" can't be parsed as ${r}`))}function qx(e,t,i=!0){return e.isValid?qo.create(jr.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function NE(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=Sn(e.c.year,i?6:4),t?(r+="-",r+=Sn(e.c.month),r+="-",r+=Sn(e.c.day)):(r+=Sn(e.c.month),r+=Sn(e.c.day)),r}function sG(e,t,i,r,s,l){let d=Sn(e.c.hour);return t?(d+=":",d+=Sn(e.c.minute),(e.c.second!==0||!i)&&(d+=":")):d+=Sn(e.c.minute),(e.c.second!==0||!i)&&(d+=Sn(e.c.second),(e.c.millisecond!==0||!r)&&(d+=".",d+=Sn(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!l?d+="Z":e.o<0?(d+="-",d+=Sn(Math.trunc(-e.o/60)),d+=":",d+=Sn(Math.trunc(-e.o%60))):(d+="+",d+=Sn(Math.trunc(e.o/60)),d+=":",d+=Sn(Math.trunc(e.o%60)))),l&&(d+="["+e.zone.ianaName+"]"),d}const $ne={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},EIe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},TIe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Mne=["year","month","day","hour","minute","second","millisecond"],IIe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],CIe=["year","ordinal","hour","minute","second","millisecond"];function oG(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Cre(e);return t}function aG(e,t){const i=Rd(t.zone,Nn.defaultZone),r=jr.fromObject(t),s=Nn.now();let l,d;if(_i(e.year))l=s;else{for(const _ of Mne)_i(e[_])&&(e[_]=$ne[_]);const y=_ne(e)||xne(e);if(y)return Gt.invalid(y);const v=i.offset(s);[l,d]=A9(e,v,i)}return new Gt({ts:l,zone:i,loc:r,o:d})}function lG(e,t,i){const r=_i(i.round)?!0:i.round,s=(d,y)=>(d=LR(d,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(d,y)),l=d=>i.calendary?t.hasSame(e,d)?0:t.startOf(d).diff(e.startOf(d),d).get(d):t.diff(e,d).get(d);if(i.unit)return s(l(i.unit),i.unit);for(const d of i.units){const y=l(d);if(Math.abs(y)>=1)return s(y,d)}return s(e>t?-0:0,i.units[i.units.length-1])}function uG(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class Gt{constructor(t){const i=t.zone||Nn.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new Iu("invalid input"):null)||(i.isValid?null:Gx(i));this.ts=_i(t.ts)?Nn.now():t.ts;let s=null,l=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,l]=[t.old.c,t.old.o];else{const y=i.offset(this.ts);s=rG(this.ts,y),r=Number.isNaN(s.year)?new Iu("invalid input"):null,s=r?null:s,l=r?null:y}this._zone=i,this.loc=t.loc||jr.create(),this.invalid=r,this.weekData=null,this.c=s,this.o=l,this.isLuxonDateTime=!0}static now(){return new Gt({})}static local(){const[t,i]=uG(arguments),[r,s,l,d,y,v,_]=i;return aG({year:r,month:s,day:l,hour:d,minute:y,second:v,millisecond:_},t)}static utc(){const[t,i]=uG(arguments),[r,s,l,d,y,v,_]=i;return t.zone=co.utcInstance,aG({year:r,month:s,day:l,hour:d,minute:y,second:v,millisecond:_},t)}static fromJSDate(t,i={}){const r=F8e(t)?t.valueOf():NaN;if(Number.isNaN(r))return Gt.invalid("invalid input");const s=Rd(i.zone,Nn.defaultZone);return s.isValid?new Gt({ts:r,zone:s,loc:jr.fromObject(i)}):Gt.invalid(Gx(s))}static fromMillis(t,i={}){if(y1(t))return t<-iG||t>iG?Gt.invalid("Timestamp out of range"):new Gt({ts:t,zone:Rd(i.zone,Nn.defaultZone),loc:jr.fromObject(i)});throw new wl(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(y1(t))return new Gt({ts:t*1e3,zone:Rd(i.zone,Nn.defaultZone),loc:jr.fromObject(i)});throw new wl("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Rd(i.zone,Nn.defaultZone);if(!r.isValid)return Gt.invalid(Gx(r));const s=Nn.now(),l=_i(i.specificOffset)?r.offset(s):i.specificOffset,d=VS(t,oG),y=!_i(d.ordinal),v=!_i(d.year),_=!_i(d.month)||!_i(d.day),M=v||_,k=d.weekYear||d.weekNumber,O=jr.fromObject(i);if((M||y)&&k)throw new y2("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(_&&y)throw new y2("Can't mix ordinal dates with month/day");const R=k||d.weekday&&!M;let D,z,B=rG(s,l);R?(D=IIe,z=EIe,B=jk(B)):y?(D=CIe,z=TIe,B=LE(B)):(D=Mne,z=$ne);let V=!1;for(const xe of D){const Ne=d[xe];_i(Ne)?V?d[xe]=z[xe]:d[xe]=B[xe]:V=!0}const q=R?$Ie(d):y?MIe(d):_ne(d),J=q||xne(d);if(J)return Gt.invalid(J);const ne=R?eG(d):y?tG(d):d,[re,ue]=A9(ne,l,r),_e=new Gt({ts:re,zone:r,o:ue,loc:O});return d.weekday&&M&&t.weekday!==_e.weekday?Gt.invalid("mismatched weekday",`you can't specify both a weekday of ${d.weekday} and a date of ${_e.toISO()}`):_e}static fromISO(t,i={}){const[r,s]=BTe(t);return Sw(r,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,s]=GTe(t);return Sw(r,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,s]=qTe(t);return Sw(r,s,i,"HTTP",i)}static fromFormat(t,i,r={}){if(_i(t)||_i(i))throw new wl("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:l=null}=r,d=jr.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0}),[y,v,_,M]=SIe(d,t,i);return M?Gt.invalid(M):Sw(y,v,r,`format ${i}`,t,_)}static fromString(t,i,r={}){return Gt.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,s]=XTe(t);return Sw(r,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new wl("need to specify a reason the DateTime is invalid");const r=t instanceof Iu?t:new Iu(t,i);if(Nn.throwOnInvalid)throw new A8e(r);return new Gt({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?RE(this).weekYear:NaN}get weekNumber(){return this.isValid?RE(this).weekNumber:NaN}get weekday(){return this.isValid?RE(this).weekday:NaN}get ordinal(){return this.isValid?LE(this.c).ordinal:NaN}get monthShort(){return this.isValid?Bx.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Bx.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Bx.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Bx.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Z3(this.year)}get daysInMonth(){return jS(this.year,this.month)}get daysInYear(){return this.isValid?ab(this.year):NaN}get weeksInWeekYear(){return this.isValid?zS(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:s}=qo.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(co.instance(t),i)}toLocal(){return this.setZone(Nn.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Rd(t,Nn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||r){const l=t.offset(this.ts),d=this.toObject();[s]=A9(d,l,t)}return xw(this,{ts:s,zone:t})}else return Gt.invalid(Gx(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return xw(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=VS(t,oG),r=!_i(i.weekYear)||!_i(i.weekNumber)||!_i(i.weekday),s=!_i(i.ordinal),l=!_i(i.year),d=!_i(i.month)||!_i(i.day),y=l||d,v=i.weekYear||i.weekNumber;if((y||s)&&v)throw new y2("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&s)throw new y2("Can't mix ordinal dates with month/day");let _;r?_=eG({...jk(this.c),...i}):_i(i.ordinal)?(_={...this.toObject(),...i},_i(i.day)&&(_.day=Math.min(jS(_.year,_.month),_.day))):_=tG({...LE(this.c),...i});const[M,k]=A9(_,this.o,this.zone);return xw(this,{ts:M,o:k})}plus(t){if(!this.isValid)return this;const i=Mi.fromDurationLike(t);return xw(this,nG(this,i))}minus(t){if(!this.isValid)return this;const i=Mi.fromDurationLike(t).negate();return xw(this,nG(this,i))}startOf(t){if(!this.isValid)return this;const i={},r=Mi.normalizeUnit(t);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?qo.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):PE}toLocaleString(t=Lk,i={}){return this.isValid?qo.create(this.loc.clone(i),t).formatDateTime(this):PE}toLocaleParts(t={}){return this.isValid?qo.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:l=!1}={}){if(!this.isValid)return null;const d=t==="extended";let y=NE(this,d);return y+="T",y+=sG(this,d,i,r,s,l),y}toISODate({format:t="extended"}={}){return this.isValid?NE(this,t==="extended"):null}toISOWeekDate(){return qx(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:l=!1,format:d="extended"}={}){return this.isValid?(s?"T":"")+sG(this,d==="extended",i,t,r,l):null}toRFC2822(){return qx(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return qx(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?NE(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(r&&(s+=" "),i?s+="z":t&&(s+="ZZ")),qx(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():PE}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return Mi.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},l=D8e(i).map(Mi.normalizeUnit),d=t.valueOf()>this.valueOf(),y=d?this:t,v=d?t:this,_=aIe(y,v,l,s);return d?_.negate():_}diffNow(t="milliseconds",i={}){return this.diff(Gt.now(),t,i)}until(t){return this.isValid?Zr.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const r=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(i)<=r&&r<=s.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Gt.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],l=t.unit;return Array.isArray(t.unit)&&(s=t.unit,l=void 0),lG(i,this.plus(r),{...t,numeric:"always",units:s,unit:l})}toRelativeCalendar(t={}){return this.isValid?lG(t.base||Gt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Gt.isDateTime))throw new wl("min requires all arguments be DateTimes");return zB(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Gt.isDateTime))throw new wl("max requires all arguments be DateTimes");return zB(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:s=null,numberingSystem:l=null}=r,d=jr.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return yne(d,t,i)}static fromStringExplain(t,i,r={}){return Gt.fromFormatExplain(t,i,r)}static get DATE_SHORT(){return Lk}static get DATE_MED(){return kre}static get DATE_MED_WITH_WEEKDAY(){return P8e}static get DATE_FULL(){return Are}static get DATE_HUGE(){return Ore}static get TIME_SIMPLE(){return Lre}static get TIME_WITH_SECONDS(){return Pre}static get TIME_WITH_SHORT_OFFSET(){return Rre}static get TIME_WITH_LONG_OFFSET(){return Nre}static get TIME_24_SIMPLE(){return Fre}static get TIME_24_WITH_SECONDS(){return Dre}static get TIME_24_WITH_SHORT_OFFSET(){return jre}static get TIME_24_WITH_LONG_OFFSET(){return zre}static get DATETIME_SHORT(){return Vre}static get DATETIME_SHORT_WITH_SECONDS(){return Ure}static get DATETIME_MED(){return Bre}static get DATETIME_MED_WITH_SECONDS(){return Gre}static get DATETIME_MED_WITH_WEEKDAY(){return R8e}static get DATETIME_FULL(){return qre}static get DATETIME_FULL_WITH_SECONDS(){return Hre}static get DATETIME_HUGE(){return Wre}static get DATETIME_HUGE_WITH_SECONDS(){return Jre}}function $w(e){if(Gt.isDateTime(e))return e;if(e&&e.valueOf&&y1(e.valueOf()))return Gt.fromJSDate(e);if(e&&typeof e=="object")return Gt.fromObject(e);throw new wl(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const FE={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function Ene(e){e||(e=Pa());let t=e in FE;if(!t){const l=e.split("-");l.length>1&&l[0]in FE&&(e=l[0],t=!0),t||(e="en")}const[i,r,s="#,##0.###"]=FE[e];return{decimal:i,group:r,pattern:s}}function kIe(e,t){const i=Ene((t={...t}).locale);t.customs=i;const r=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:AIe(e,r,t)}const Tne=/[#0,]*[#0](?:\.0*#*)?/;function AIe(e,t,i){const r=(i=i||{}).customs.group,s=i.customs.decimal,l=t.split(";"),d=l[0];if((t=l[e<0?1:0]||"-"+d).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const y=Tne,v=d.match(y);if(!v)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(y,OIe(e,v[0],{decimal:s,group:r,places:i.places,round:i.round}))}function OIe(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const r=t.split("."),s=typeof i.places=="string"&&i.places.indexOf(",");let l=i.places;s?l=i.places.substring(s+1):l>=0||(l=(r[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(l))));const d=String(Math.abs(e)).split("."),y=d[1]||"";if(r[1]||i.places){s&&(i.places=i.places.substring(0,s));const D=i.places!==void 0?i.places:r[1]&&r[1].lastIndexOf("0")+1;D>y.length&&(d[1]=y.padEnd(Number(D),"0")),l<y.length&&(d[1]=y.substr(0,Number(l)))}else d[1]&&d.pop();const v=r[0].replace(",","");let _=v.indexOf("0");_!==-1&&(_=v.length-_,_>d[0].length&&(d[0]=d[0].padStart(_,"0")),v.includes("#")||(d[0]=d[0].substr(d[0].length-_)));let M,k,O=r[0].lastIndexOf(",");if(O!==-1){M=r[0].length-O-1;const D=r[0].substr(0,O);O=D.lastIndexOf(","),O!==-1&&(k=D.length-O-1)}const R=[];for(let D=d[0];D;){const z=D.length-M;R.push(z>0?D.substr(z):D),D=z>0?D.slice(0,z):"",k&&(M=k,k=void 0)}return d[0]=R.reverse().join(i.group||","),d.join(i.decimal||".")}function LIe(e){const t=Ene((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,s=t.decimal;let l=1;if(i.includes("%"))l/=100;else if(i.includes("\u2030"))l/=1e3;else if(i.includes("\xA4"))throw new Error("currency notation not supported");const d=i.split(";");return d.length===1&&d.push("-"+d[0]),{regexp:d3(d,v=>(v="(?:"+bY(v,".")+")").replace(Tne,_=>{const M={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:s,exponent:!1},k=_.split(".");let O=e.places;k.length===1&&l!==1&&(k[1]="###"),k.length===1||O===0?M.fractional=!1:(O===void 0&&(O=e.pattern?k[1].lastIndexOf("0")+1:1/0),O&&e.fractional==null&&(M.fractional=!0),!e.places&&O<k[1].length&&(O+=","+k[1].length),M.places=O);const R=k[0].split(",");return R.length>1&&(M.groupSize=R.pop().length,R.length>1&&(M.groupSize2=R.pop().length)),"("+RIe(M)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:s,factor:l}}function PIe(e,t){const i=LIe(t),r=new RegExp("^"+i.regexp+"$").exec(e);if(!r)return NaN;let s=r[1];if(!r[1]){if(!r[2])return NaN;s=r[2],i.factor*=-1}return s=s.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(s)*i.factor}function RIe(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=cG(e),i=d3(e.fractional,s=>{let l="";return s&&e.places!==0&&(l="\\"+e.decimal,e.places===1/0?l="(?:"+l+"\\d+)?":l+="\\d{"+e.places+"}"),l},!0);let r=t+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+d3(e.exponent,s=>s?"([eE]"+cG({signed:e.eSigned})+")":"")}function cG(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",d3(e.signed,t=>t?"[-+]":"",!0)+d3(e.separator,t=>{if(!t)return"(?:\\d+)";(t=bY(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const s="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+s+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":s}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const d3=(e,t,i)=>{if(!(e instanceof Array))return t(e);const r=[];for(let s=0;s<e.length;s++)r.push(t(e[s]));return NIe(r.join("|"),i)},NIe=(e,t)=>"("+(t?"?:":"")+e+")";var hG,pG;function QJe(e){return J3.fromJSON(e.toJSON())}function FIe(e){return e.toJSON?e.toJSON():e}function eKe(e){return typeof e=="string"||e instanceof String}function tKe(e){return typeof e=="number"}function dG(e){return e instanceof Date}function iKe(e,t){return e===t||!(!dG(e)||!dG(t))&&e.getTime()===t.getTime()}function rKe(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function nKe(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new yi({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function sKe(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(hG||(hG={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(pG||(pG={}));const oKe=1e3,aKe={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},fG={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},lKe={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function uKe(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function cKe(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(s=t.cmp,function(d){return function(y,v){const _={key:y,value:d[y]},M={key:v,value:d[v]};return s(_,M)}});var s;const l=[];return function d(y){if(y&&y.toJSON&&typeof y.toJSON=="function"&&(y=y.toJSON()),y===void 0)return;if(typeof y=="number")return isFinite(y)?""+y:"null";if(typeof y!="object")return JSON.stringify(y);let v,_;if(Array.isArray(y)){for(_="[",v=0;v<y.length;v++)v&&(_+=","),_+=d(y[v])||"null";return _+"]"}if(y===null)return"null";if(l.includes(y)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const M=l.push(y)-1,k=Object.keys(y).sort(r&&r(y));for(_="",v=0;v<k.length;v++){const O=k[v],R=d(y[O]);R&&(_&&(_+=","),_+=JSON.stringify(O)+":"+R)}return l.splice(M,1),"{"+_+"}"}(e)}class Ine{constructor(t){this.value=t}}class Cne{constructor(t){this.value=t}}class zR{constructor(t){this.fn=t}}class VR{constructor(t,i){this.paramCount=i,this.fn=t}}const DIe=zR,jIe=Cne,zIe=Ine,VIe=VR,Ea={type:"VOID"},UIe={type:"BREAK"},BIe={type:"CONTINUE"};function f3(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function UR(e){return e instanceof zR||e instanceof k8e||e instanceof VR}function US(e){return!!ps(e)||!!oo(e)||!!Rs(e)||!!so(e)||e===null||e===Ea||typeof e=="number"}function GIe(e,t){return e===void 0?t:e}function ps(e){return typeof e=="string"||e instanceof String}function so(e){return typeof e=="boolean"}function oo(e){return typeof e=="number"}function qIe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Rl(e){return e instanceof Array}function HIe(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function WIe(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function JIe(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function D1(e){return e instanceof zc}function Rs(e){return e instanceof Date}function KIe(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function ZIe(e){return e<0?-Math.round(-e):Math.round(e)}function YIe(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function BR(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=f3(t,"\u2030",""),t=f3(t,"\xA4",""),kIe(e,{pattern:t})):e.toString()}function S$(e,t){const i=Gt.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(kne(t),{locale:Pa(),numberingSystem:"latn"})}function kne(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function zi(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function XIe(e,t,i){if(e===null){if(t===null||t===Ea)return zi(null,null,i);if(oo(t))return zi(0,t,i);if(ps(t)||so(t))return zi(0,Fr(t),i);if(Rs(t))return zi(0,t.getTime(),i)}if(e===Ea){if(t===null||t===Ea)return zi(null,null,i);if(oo(t))return zi(0,t,i);if(ps(t)||so(t))return zi(0,Fr(t),i);if(Rs(t))return zi(0,t.getTime(),i)}else if(oo(e)){if(oo(t))return zi(e,t,i);if(so(t))return zi(e,Fr(t),i);if(t===null||t===Ea)return zi(e,0,i);if(ps(t))return zi(e,Fr(t),i);if(Rs(t))return zi(e,t.getTime(),i)}else if(ps(e)){if(ps(t))return zi(ef(e),ef(t),i);if(Rs(t))return zi(Fr(e),t.getTime(),i);if(oo(t))return zi(Fr(e),t,i);if(t===null||t===Ea)return zi(Fr(e),0,i);if(so(t))return zi(Fr(e),Fr(t),i)}else if(Rs(e)){if(Rs(t))return zi(e,t,i);if(t===null||t===Ea)return zi(e.getTime(),0,i);if(oo(t))return zi(e.getTime(),t,i);if(so(t)||ps(t))return zi(e.getTime(),Fr(t),i)}else if(so(e)){if(so(t))return zi(e,t,i);if(oo(t))return zi(Fr(e),Fr(t),i);if(Rs(t))return zi(Fr(e),t.getTime(),i);if(t===null||t===Ea)return zi(Fr(e),0,i);if(ps(t))return zi(Fr(e),Fr(t),i)}return!!Ane(e,t)&&(i==="<="||i===">=")}function Ane(e,t){if(e===t||e===null&&t===Ea||t===null&&e===Ea)return!0;if(Rs(e)&&Rs(t))return e.getTime()===t.getTime();if(e instanceof AR||e instanceof Z1)return e.equalityTest(t);if(e instanceof ut&&t instanceof ut){const i=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(i!=null)return i===r}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function ef(e,t){if(ps(e))return e;if(e===null)return"";if(oo(e))return BR(e,t);if(so(e))return e.toString();if(Rs(e))return S$(e,t);if(e instanceof Qo)return JSON.stringify(e.toJSON());if(Rl(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=BS(e[r]);return"["+i.join(",")+"]"}if(e instanceof zc){const i=[];for(let r=0;r<e.length();r++)i[r]=BS(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():UR(e)?"object, Function":""}function QIe(e){const t=[];if(Rl(e)===!1)return null;if(e instanceof zc){for(let i=0;i<e.length();i++)t[i]=Fr(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=Fr(e[i]);return t}function O9(e,t){if(ps(e))return e;if(e===null)return"";if(oo(e))return BR(e,t);if(so(e))return e.toString();if(Rs(e))return S$(e,t);if(e instanceof Qo)return e instanceof yi?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+zk(e.spatialReference)+"}":zk(e.toJSON(),(i,r)=>i.key===r.key?0:i.key==="spatialReference"?1:r.key==="spatialReference"||i.key<r.key?-1:i.key>r.key?1:0);if(Rl(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=BS(e[r]);return"["+i.join(",")+"]"}if(e instanceof zc){const i=[];for(let r=0;r<e.length();r++)i[r]=BS(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():UR(e)?"object, Function":""}function BS(e){if(e===null)return"null";if(so(e)||oo(e)||ps(e))return JSON.stringify(e);if(e instanceof Qo||e instanceof zc||e instanceof Array)return O9(e);if(e instanceof Date)return JSON.stringify(S$(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===Ea)return"null";return"null"}function Fr(e,t){return oo(e)?e:e===null||e===""?0:Rs(e)?NaN:so(e)?e?1:0:Rl(e)||e===""||e===void 0?NaN:t!==void 0&&ps(e)?(t=f3(t,"\u2030",""),t=f3(t,"\xA4",""),PIe(e,{pattern:t})):e===Ea?0:Number(e)}function eCe(e){if(Rs(e))return e;if(ps(e)){const t=One(e);if(t)return t.toJSDate()}return null}function tCe(e){return Rs(e)?Gt.fromJSDate(e):ps(e)?One(e):null}function One(e){const t=/ (\d\d)/;let i=Gt.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=Gt.fromISO(e),i.isValid)?i:null}function iCe(e){return so(e)?e:ps(e)?(e=e.toLowerCase())==="true":!!oo(e)&&e!==0&&!isNaN(e)}function rCe(e,t){return ce(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function nCe(e){if(e===null)return null;if(e instanceof ut)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof go){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof zr){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof B1?e.points.length===0?null:e:e instanceof yi?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function Lne(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=ef(t);else{if(t==null)return null;if(t==="")return t;t=Fr(t)}for(let r=0;r<e.domain.codedValues.length;r++){const s=e.domain.codedValues[r];s.code===t&&(i=s)}return i===null?t:i.name}function Pne(e,t){if(!e||!e.domain)return t;let i=null;t=ef(t);for(let r=0;r<e.domain.codedValues.length;r++){const s=e.domain.codedValues[r];s.name===t&&(i=s)}return i===null?t:i.code}function $$(e,t,i=null,r=null){if(!t||!t.fields)return null;let s,l,d=null;for(let y=0;y<t.fields.length;y++){const v=t.fields[y];v.name.toLowerCase()===e.toString().toLowerCase()&&(d=v)}if(d===null)throw new Error("Field not found");return r===null&&i&&t.typeIdField&&(r=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),r!=null&&t.types.some(function(y){return y.id===r&&(s=y.domains&&y.domains[d.name],s&&s.type==="inherited"&&(s=yG(d.name,t),l=!0),!0)}),l||s||(s=yG(e,t)),{field:d,domain:s}}function yG(e,t){let i;return t.fields.some(function(r){return r.name.toLowerCase()===e.toLowerCase()&&(i=r.domain),!!i}),i}function zk(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(s=t.cmp,function(d){return function(y,v){const _={key:y,value:d[y]},M={key:v,value:d[v]};return s(_,M)}});var s;const l=[];return function d(y){if(y&&y.toJSON&&typeof y.toJSON=="function"&&(y=y.toJSON()),y===void 0)return;if(typeof y=="number")return isFinite(y)?""+y:"null";if(typeof y!="object")return JSON.stringify(y);let v,_;if(Array.isArray(y)){for(_="[",v=0;v<y.length;v++)v&&(_+=","),_+=d(y[v])||"null";return _+"]"}if(y===null)return"null";if(l.includes(y)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const M=l.push(y)-1,k=Object.keys(y).sort(r&&r(y));for(_="",v=0;v<k.length;v++){const O=k[v],R=d(y[O]);R&&(_&&(_+=","),_+=JSON.stringify(O)+":"+R)}return l.splice(M,1),"{"+_+"}"}(e)}function sCe(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function Jg(e,t){if(!(t instanceof ut))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function oCe(e,t){if(Rl(e)||D1(e)){let i=!1,r=!1,s=[],l=t;if(Rl(e)){for(const d of e)Jg(s,d);s.length>0&&(l=e[0].spatialReference,i=e[0].hasZ,r=e[0].hasM)}else if(e instanceof Z1)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,l=e.get(0).spatialReference);else{if(!D1(e))throw new Error("Invalid Argument");for(const d of e.toArray())Jg(s,d);s.length>0&&(l=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:(mP(s,r,i)===!1&&(s=s.slice(0).reverse()),new go({rings:[s],spatialReference:l,hasZ:i,hasM:r}))}return e}function aCe(e,t){if(Rl(e)||D1(e)){let i=!1,r=!1,s=[],l=t;if(Rl(e)){for(const d of e)Jg(s,d);s.length>0&&(l=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Z1)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,l=e.get(0).spatialReference);else if(D1(e)){for(const d of e.toArray())Jg(s,d);s.length>0&&(l=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:new zr({paths:[s],spatialReference:l,hasZ:i,hasM:r})}return e}function lCe(e,t){if(Rl(e)||D1(e)){let i=!1,r=!1,s=[],l=t;if(Rl(e)){for(const d of e)Jg(s,d);s.length>0&&(l=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Z1)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,l=e.get(0).spatialReference);else if(D1(e)){for(const d of e.toArray())Jg(s,d);s.length>0&&(l=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:new B1({points:s,spatialReference:l,hasZ:i,hasM:r})}return e}function uCe(e,t=!1){const i=[];if(e===null)return i;if(Rl(e)===!0){for(let r=0;r<e.length;r++){const s=ef(e[r]);s===""&&t!==!0||i.push(s)}return i}if(e instanceof zc){for(let r=0;r<e.length();r++){const s=ef(e.get(r));s===""&&t!==!0||i.push(s)}return i}if(US(e)){const r=ef(e);return r===""&&t!==!0||i.push(r),i}return[]}let DE=0;function cCe(e){return DE++,DE%100==0?(DE=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function hCe(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function y3(e,t=null){return e==null?null:so(e)||oo(e)||ps(e)?e:e instanceof Qo?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof zc?e.toArray().map(i=>y3(i,t)):e instanceof Array?e.map(i=>y3(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function pCe(e,t,i,r,s){const l=await GR(e,t,i);s[r]=l}async function GR(e,t=null,i=null){if(e instanceof zc&&(e=e.toArray()),e==null)return null;if(US(e)||e instanceof Qo||e instanceof Date)return y3(e,i);if(e instanceof Array){const r=[],s=[];for(const l of e)l===null||US(l)||l instanceof Qo||l instanceof Date?s.push(y3(l,i)):(s.push(null),r.push(pCe(l,t,i,s.length-1,s)));return r.length>0&&await Promise.all(r),s}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):null}function dCe(e,t,i){const r=e.fullSchema();return r===null||!r.fields?null:$$(t,r,e,i)}function fCe(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function yCe(e,t,i,r){const s=e.fullSchema();if(s===null||!s.fields)return null;const l=$$(t,s,e,r);if(i===void 0)try{i=e.field(t)}catch{return null}return Lne(l,i)}function mCe(e,t,i,r){const s=e.fullSchema();if(s===null||!s.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return Pne($$(t,s,e,r),i)}function gCe(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const r of t.fields)i.push(FIe(r));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:fG[t.geometryType]===void 0?"":fG[t.geometryType],fields:i}}const hKe=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Ine,ImplicitResultE:Cne,NativeFunctionE:zR,SizzleFunctionE:VR,NativeFunction:DIe,ImplicitResult:jIe,ReturnResult:zIe,SizzleFunction:VIe,voidOperation:Ea,breakResult:UIe,continueResult:BIe,multiReplace:f3,isFunctionParameter:UR,isSimpleType:US,defaultUndefined:GIe,isString:ps,isBoolean:so,isNumber:oo,isInteger:qIe,isArray:Rl,isFeature:HIe,isFeatureSet:WIe,isFeatureSetCollection:JIe,isImmutableArray:D1,isDate:Rs,pcCheck:KIe,absRound:ZIe,generateUUID:YIe,formatNumber:BR,formatDate:S$,standardiseDateFormat:kne,greaterThanLessThan:XIe,equalityTest:Ane,toString:ef,toNumberArray:QIe,toStringExplicit:O9,toNumber:Fr,toDate:eCe,toDateTime:tCe,toBoolean:iCe,fixSpatialReference:rCe,fixNullGeometry:nCe,getDomainValue:Lne,getDomainCode:Pne,getDomain:$$,stableStringify:zk,autoCastFeatureToGeometry:sCe,autoCastArrayOfPointsToPolygon:oCe,autoCastArrayOfPointsToPolyline:aCe,autoCastArrayOfPointsToMultiPoint:lCe,toStringArray:uCe,tick:cCe,binaryOperator:hCe,castAsJson:y3,castAsJsonAsync:GR,featureFullDomain:dCe,featureSubtypes:fCe,featureDomainValueLookup:yCe,featureDomainCodeLookup:mCe,featureSchema:gCe},Symbol.toStringTag,{value:"Module"}));var Vk;let g2=Vk=class extends Ve{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new Vk({minValue:this.minValue,maxValue:this.maxValue})}};g([S({type:Number,json:{write:!0}})],g2.prototype,"minValue",void 0),g([S({type:Number,json:{write:!0}})],g2.prototype,"maxValue",void 0),g2=Vk=g([Q("esri.renderer.support.AuthoringInfoClassBreakInfo")],g2);var Uk;let Cd=Uk=class extends Ve{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new Uk({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Me(this.classBreakInfos)})}};g([S({type:String,json:{write:!0}})],Cd.prototype,"field",void 0),g([S({type:String,json:{write:!0}})],Cd.prototype,"normalizationField",void 0),g([S({type:String,json:{write:!0}})],Cd.prototype,"label",void 0),g([S({type:[g2],json:{write:!0}})],Cd.prototype,"classBreakInfos",void 0),Cd=Uk=g([Q("esri.renderers.support.AuthoringInfoFieldInfo")],Cd);var Bk;const Hx=new Dt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Wx=new Dt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),mG={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},gG=["high-to-low","above-and-below","centered-on","extremes"],vG=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],wG=["seconds","minutes","hours","days","months","years"];let Ro=Bk=class extends Ve{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new Bk({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};g([S({types:mG,json:{write:!0}})],Ro.prototype,"endTime",void 0),g([oi("endTime")],Ro.prototype,"castEndTime",null),g([S({type:String,json:{write:!0}})],Ro.prototype,"field",void 0),g([S({type:Number,json:{write:!0}})],Ro.prototype,"maxSliderValue",void 0),g([S({type:Number,json:{write:!0}})],Ro.prototype,"minSliderValue",void 0),g([S({types:mG,json:{write:!0}})],Ro.prototype,"startTime",void 0),g([oi("startTime")],Ro.prototype,"castStartTime",null),g([S({type:Hx.apiValues,value:null,json:{type:Hx.jsonValues,read:Hx.read,write:Hx.write}})],Ro.prototype,"style",null),g([S({type:vG,value:null,json:{type:vG,origins:{"web-scene":{type:gG,write:{writer:(e,t)=>{gG.includes(e)&&(t.theme=e)}}}},write:!0}})],Ro.prototype,"theme",null),g([S({type:Wx.apiValues,json:{type:Wx.jsonValues,read:Wx.read,write:Wx.write}})],Ro.prototype,"type",void 0),g([S({type:wG,json:{type:wG,write:!0}})],Ro.prototype,"units",void 0),Ro=Bk=g([Q("esri.renderers.support.AuthoringInfoVisualVariable")],Ro);const vCe=Ro;let L9=class extends Ve{constructor(e){super(e),this.type=null}};g([S({readOnly:!0,json:{read:!1,write:!0}})],L9.prototype,"type",void 0),L9=g([Q("esri.rest.support.ColorRamp")],L9);const qR=L9;var Gk;let c0=Gk=class extends qR{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new Gk({fromColor:Me(this.fromColor),toColor:Me(this.toColor),algorithm:this.algorithm})}};g([Mt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],c0.prototype,"algorithm",void 0),g([S({type:ot,json:{type:[Yi],write:!0}})],c0.prototype,"fromColor",void 0),g([S({type:ot,json:{type:[Yi],write:!0}})],c0.prototype,"toColor",void 0),g([S({type:["algorithmic"]})],c0.prototype,"type",void 0),c0=Gk=g([Q("esri.rest.support.AlgorithmicColorRamp")],c0);const HR=c0;var qk;let v2=qk=class extends qR{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new qk({colorRamps:Me(this.colorRamps)})}};g([S({type:[HR],json:{write:!0}})],v2.prototype,"colorRamps",void 0),g([S({type:["multipart"]})],v2.prototype,"type",void 0),v2=qk=g([Q("esri.rest.support.MultipartColorRamp")],v2);const Rne=v2,wCe={key:"type",base:qR,typeMap:{algorithmic:HR,multipart:Rne}};function bCe(e){return e&&e.type?e.type==="algorithmic"?HR.fromJSON(e):e.type==="multipart"?Rne.fromJSON(e):null:null}var Hk;const Pf=new Dt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Jx=new Dt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),bG=new Dt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),_G=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],_Ce=["high-to-low","above-and-below","above","below","90-10"],xCe=["flow-line","wave-front"],SCe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let an=Hk=class extends Ve{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return bCe(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new Hk({classificationMethod:this.classificationMethod,colorRamp:Me(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:Me(this.field1),field2:Me(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};g([S({type:Pf.apiValues,value:null,json:{type:Pf.jsonValues,read:Pf.read,write:Pf.write,origins:{"web-document":{default:"manual",type:Pf.jsonValues,read:Pf.read,write:Pf.write}}}})],an.prototype,"classificationMethod",null),g([S({types:wCe,json:{write:!0}})],an.prototype,"colorRamp",void 0),g([nt("colorRamp")],an.prototype,"readColorRamp",null),g([S({type:[String],value:null,json:{write:!0}})],an.prototype,"fields",null),g([S({type:Cd,value:null,json:{write:!0}})],an.prototype,"field1",null),g([S({type:Cd,value:null,json:{write:!0}})],an.prototype,"field2",null),g([S({type:xCe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],an.prototype,"flowTheme",null),g([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],an.prototype,"focus",null),g([S({type:Number,value:null,json:{type:Yi,write:!0}})],an.prototype,"numClasses",null),g([S({type:_G,json:{type:_G,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],an.prototype,"lengthUnit",void 0),g([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],an.prototype,"maxSliderValue",void 0),g([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],an.prototype,"minSliderValue",void 0),g([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],an.prototype,"statistics",null),g([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],an.prototype,"standardDeviationInterval",null),g([S({type:Jx.apiValues,value:null,json:{type:Jx.jsonValues,read:Jx.read,write:Jx.write,origins:{"web-scene":{type:bG.jsonValues,write:{writer:bG.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],an.prototype,"type",null),g([S({type:[vCe],json:{write:!0}})],an.prototype,"visualVariables",void 0),g([S({type:SCe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],an.prototype,"univariateSymbolStyle",null),g([S({type:_Ce,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],an.prototype,"univariateTheme",null),an=Hk=g([Q("esri.renderers.support.AuthoringInfo")],an);const Nne=an,jE=new Dt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let w2=class extends Ve{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};g([S({type:Nne,json:{write:!0}})],w2.prototype,"authoringInfo",void 0),g([S({type:jE.apiValues,readOnly:!0,json:{type:jE.jsonValues,read:!1,write:{writer:jE.write,ignoreOrigin:!0}}})],w2.prototype,"type",void 0),w2=g([Q("esri.renderers.Renderer")],w2);const mp=w2;var Wk;let wg=Wk=class extends Ve{constructor(){super(...arguments),this.title=null}clone(){return new Wk({title:this.title})}};g([S({type:String,json:{write:!0}})],wg.prototype,"title",void 0),wg=Wk=g([Q("esri.renderers.support.LegendOptions")],wg);var Jk;let P9=Jk=class extends wg{constructor(){super(...arguments),this.showLegend=null}clone(){return new Jk({title:this.title,showLegend:this.showLegend})}};g([S({type:Boolean,json:{write:!0}})],P9.prototype,"showLegend",void 0),P9=Jk=g([Q("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],P9);const Fne=P9,$Ce=Ke.getLogger("esri.renderers.visualVariables.VisualVariable"),zE=new Dt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ou=class extends Ve{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?($Ce.error(".field: field must be a string value"),null):L3(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};g([S()],ou.prototype,"index",void 0),g([S({type:zE.apiValues,readOnly:!0,json:{read:zE.read,write:zE.write}})],ou.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],ou.prototype,"field",void 0),g([oi("field")],ou.prototype,"castField",null),g([S({type:String,json:{write:!0}})],ou.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],ou.prototype,"valueExpressionTitle",void 0),g([S({readOnly:!0})],ou.prototype,"arcadeRequired",null),g([S({type:Fne,json:{write:!0}})],ou.prototype,"legendOptions",void 0),ou=g([Q("esri.renderers.visualVariables.VisualVariable")],ou);const e_=ou;var Kk;let h0=Kk=class extends e_{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new Kk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};g([S({readOnly:!0})],h0.prototype,"cache",null),g([S({type:["color"],json:{type:["colorInfo"]}})],h0.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],h0.prototype,"normalizationField",void 0),g([S({type:[NMe],json:{write:!0}})],h0.prototype,"stops",null),h0=Kk=g([Q("esri.renderers.visualVariables.ColorVariable")],h0);const Dne=h0;var Zk;let ad=Zk=class extends Ve{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Jb(t.transparency)}writeOpacity(e,t,i){t[i]=W6(e)}clone(){return new Zk({label:this.label,opacity:this.opacity,value:this.value})}};g([S({type:String,json:{write:!0}})],ad.prototype,"label",void 0),g([S({type:Number,json:{type:Yi,write:{target:"transparency"}}})],ad.prototype,"opacity",void 0),g([nt("opacity",["transparency"])],ad.prototype,"readOpacity",null),g([pt("opacity")],ad.prototype,"writeOpacity",null),g([S({type:Number,json:{write:!0}})],ad.prototype,"value",void 0),ad=Zk=g([Q("esri.renderers.visualVariables.support.OpacityStop")],ad);const MCe=ad;var Yk;let p0=Yk=class extends e_{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new Yk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};g([S({readOnly:!0})],p0.prototype,"cache",null),g([S({type:["opacity"],json:{type:["transparencyInfo"]}})],p0.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],p0.prototype,"normalizationField",void 0),g([S({type:[MCe],json:{write:!0}})],p0.prototype,"stops",null),p0=Yk=g([Q("esri.renderers.visualVariables.OpacityVariable")],p0);const jne=p0;var Xk;let gh=Xk=class extends e_{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new ge("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new Xk({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};g([S({readOnly:!0})],gh.prototype,"cache",null),g([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],gh.prototype,"axis",void 0),g([S({type:["rotation"],json:{type:["rotationInfo"]}})],gh.prototype,"type",void 0),g([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],gh.prototype,"rotationType",void 0),g([S({type:String,json:{write:!0}})],gh.prototype,"valueExpressionTitle",void 0),g([pt("web-scene","valueExpressionTitle")],gh.prototype,"writeValueExpressionTitleWebScene",null),gh=Xk=g([Q("esri.renderers.visualVariables.RotationVariable")],gh);const zne=gh;var Qk;let Qy=Qk=class extends Ve{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new Qk({label:this.label,size:this.size,value:this.value})}};g([S({type:String,json:{write:!0}})],Qy.prototype,"label",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],Qy.prototype,"size",void 0),g([S({type:Number,json:{write:!0}})],Qy.prototype,"value",void 0),Qy=Qk=g([Q("esri.renderers.visualVariables.support.SizeStop")],Qy);const ECe=Qy;var eA;let R9=eA=class extends Fne{constructor(){super(...arguments),this.customValues=null}clone(){return new eA({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};g([S({type:[Number],json:{write:!0}})],R9.prototype,"customValues",void 0),R9=eA=g([Q("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],R9);const Vne=R9;var Kh,jn;function Hm(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function m3(e){return e!=null&&!isNaN(e)&&isFinite(e)}function Une(e){return e.valueExpression?Kh.Expression:e.field&&typeof e.field=="string"?Kh.Field:Kh.Unknown}function TCe(e,t){const i=t||Une(e),r=e.valueUnit||"unknown";return i===Kh.Unknown?jn.Constant:e.stops?jn.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?jn.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?jn.Proportional:jn.Additive:jn.Identity:jn.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Kh||(Kh={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(jn||(jn={}));const Bne={inches:xi(1,"meters","inches"),feet:xi(1,"meters","feet"),"us-feet":xi(1,"meters","us-feet"),yards:xi(1,"meters","yards"),miles:xi(1,"meters","miles"),"nautical-miles":xi(1,"meters","nautical-miles"),millimeters:xi(1,"meters","millimeters"),centimeters:xi(1,"meters","centimeters"),decimeters:xi(1,"meters","decimeters"),meters:xi(1,"meters","meters"),kilometers:xi(1,"meters","kilometers"),"decimal-degrees":1/o9e(1,"meters",tr.radius)},df=Ke.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),xG=new pn,N9=Math.PI,Gne=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function qne(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(D=>D.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void df.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof t=="number",l=s?null:t,d=l&&l.attributes;let y=s?t:null;const v=r.field,{ipData:_,hasExpression:M}=r.cache;let k=r.cache.compiledFunc;if(!v&&!M){const D=r.stops;return D&&D[0]&&D[0].color}if(typeof y!="number")if(M){if(ce(i)||ce(i.arcade))return void df.error("Use of arcade expressions requires an arcade context");const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,B=z.getViewInfo(D),V=z.createExecContext(l,B);if(!k){const q=z.createSyntaxTree(r.valueExpression);k=z.createFunction(q),r.cache.compiledFunc=k}y=z.executeFunction(k,V)}else d&&(y=d[v]);const O=r.normalizationField,R=d?parseFloat(d[O]):void 0;if(y!=null&&(!O||s||!isNaN(R)&&R!==0)){isNaN(R)||s||(y/=R);const D=WR(y,_);if(D){const z=D[0],B=D[1],V=z===B?r.stops[z].color:ot.blendColors(r.stops[z].color,r.stops[B].color,D[2],K(i)?i.color:void 0);return new ot(V)}}}function Hne(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(D=>D.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void df.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof t=="number",l=s?null:t,d=l&&l.attributes;let y=s?t:null;const v=r.field,{ipData:_,hasExpression:M}=r.cache;let k=r.cache.compiledFunc;if(!v&&!M){const D=r.stops;return D&&D[0]&&D[0].opacity}if(typeof y!="number")if(M){if(ce(i)||ce(i.arcade))return void df.error("Use of arcade expressions requires an arcade context");const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,B=z.getViewInfo(D),V=z.createExecContext(l,B);if(!k){const q=z.createSyntaxTree(r.valueExpression);k=z.createFunction(q),r.cache.compiledFunc=k}y=z.executeFunction(k,V)}else d&&(y=d[v]);const O=r.normalizationField,R=d?parseFloat(d[O]):void 0;if(y!=null&&(!O||s||!isNaN(R)&&R!==0)){isNaN(R)||s||(y/=R);const D=WR(y,_);if(D){const z=D[0],B=D[1];if(z===B)return r.stops[z].opacity;{const V=r.stops[z].opacity;return V+(r.stops[B].opacity-V)*D[2]}}}}function Wne(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void df.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",l=s==="heading"&&r.rotationType==="arithmetic"?90:0,d=s==="heading"&&r.rotationType==="arithmetic"?-1:1,y=typeof t=="number"?null:t,v=y&&y.attributes,_=r.field,{hasExpression:M}=r.cache;let k=r.cache.compiledFunc,O=0;if(!_&&!M)return O;if(M){if(ce(i)||ce(i.arcade))return void df.error("Use of arcade expressions requires an arcade context");const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,z=D.getViewInfo(R),B=D.createExecContext(y,z);if(!k){const V=D.createSyntaxTree(r.valueExpression);k=D.createFunction(V),r.cache.compiledFunc=k}O=D.executeFunction(k,B)}else v&&(O=v[_]||0);return O=typeof O!="number"||isNaN(O)?null:l+d*O,O}function ICe(e,t,i){const r=typeof t=="number",s=r?null:t,l=s&&s.attributes;let d=r?t:null;const{isScaleDriven:y}=e.cache;let v=e.cache.compiledFunc;if(y){const M=K(i)?i.scale:void 0,k=K(i)?i.view:void 0;d=M==null||k==="3d"?CCe(e):M}else if(!r)switch(e.inputValueType){case Kh.Expression:{if(ce(i)||ce(i.arcade))return void df.error("Use of arcade expressions requires an arcade context");const M={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},k=i.arcade.arcadeUtils,O=k.getViewInfo(M),R=k.createExecContext(s,O);if(!v){const D=k.createSyntaxTree(e.valueExpression);v=k.createFunction(D),e.cache.compiledFunc=v}d=k.executeFunction(v,R);break}case Kh.Field:l&&(d=l[e.field]);break;case Kh.Unknown:d=null}if(!m3(d))return null;if(r||!e.normalizationField)return d;const _=l?parseFloat(l[e.normalizationField]):null;return m3(_)&&_!==0?d/_:null}function CCe(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function M$(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(l=>l.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void df.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=Kne(ICe(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function Zo(e,t,i){return e==null?null:Hm(e)?M$(e,t,i):m3(e)?e:null}function Jne(e,t,i){return m3(i)&&e>i?i:m3(t)&&e<t?t:e}function kCe(e,t,i,r){return e+(Zo(t.minSize,i,r)||t.minDataValue)}function ACe(e,t,i){const r=e.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=e.minSize),Zo(s,t,i)}function OCe(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),l=Zo(t.minSize,i,r),d=Zo(t.maxSize,i,r),y=K(r)?r.shape:void 0;if(e<=t.minDataValue)return l;if(e>=t.maxDataValue)return d;if(t.scaleBy==="area"&&y){const v=y==="circle",_=v?N9*(l/2)**2:l*l,M=_+s*((v?N9*(d/2)**2:d*d)-_);return v?2*Math.sqrt(M/N9):Math.sqrt(M)}return l+s*(d-l)}function LCe(e,t,i,r){const s=K(r)?r.shape:void 0,l=e/t.minDataValue,d=Zo(t.minSize,i,r),y=Zo(t.maxSize,i,r);let v=null;return v=s==="circle"?2*Math.sqrt(l*(d/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(l*d**2):l*d,Jne(v,d,y)}function PCe(e,t,i,r,s){const[l,d,y]=WR(e,s);if(l===d)return Zo(t.stops[l].size,i,r);{const v=Zo(t.stops[l].size,i,r);return v+(Zo(t.stops[d].size,i,r)-v)*y}}function RCe(e,t,i,r){const s=(K(r)&&r.resolution?r.resolution:1)*Bne[t.valueUnit],l=Zo(t.minSize,i,r),d=Zo(t.maxSize,i,r),{valueRepresentation:y}=t;let v=null;return v=y==="area"?2*Math.sqrt(e/N9)/s:y==="radius"||y==="distance"?2*e/s:e/s,Jne(v,l,d)}function Kne(e,t,i,r,s){switch(t.transformationType){case jn.Additive:return kCe(e,t,i,r);case jn.Constant:return ACe(t,i,r);case jn.ClampedLinear:return OCe(e,t,i,r);case jn.Proportional:return LCe(e,t,i,r);case jn.Stops:return PCe(e,t,i,r,s);case jn.RealWorldSize:return RCe(e,t,i,r);case jn.Identity:return e;case jn.Unknown:return null}}function NCe(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let l=Zo(e.minSize,xG,s),d=Zo(e.maxSize,xG,s);if(l!=null||d!=null){if(l>d){const y=d;d=l,l=y}return{minSize:l,maxSize:d}}}function FCe(e,t,i){if(!e.visualVariables)return;const r=[],s=[],l=[],d=[],y=[];for(const v of e.visualVariables)switch(v.type){case"color":s.push(v);break;case"opacity":l.push(v);break;case"rotation":y.push(v);break;case"size":d.push(v)}return s.forEach(v=>{const _=qne(v,t,i);r.push({variable:v,value:_})}),l.forEach(v=>{const _=Hne(v,t,i);r.push({variable:v,value:_})}),y.forEach(v=>{const _=Wne(v,t,i);r.push({variable:v,value:_})}),d.forEach(v=>{const _=M$(v,t,i);r.push({variable:v,value:_})}),r.filter(v=>v.value!=null)}function WR(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,l)=>e<s?(r=l,!0):(i=l,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function DCe(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const l=s.useSymbolValue?"symbol-value":M$(s,t,i);switch(s.axis){case"width":r[0]=l;break;case"depth":r[1]=l;break;case"height":r[2]=l;break;case"width-and-depth":r[0]=l,r[1]=l;break;case"all":case void 0:case null:r[0]=l,r[1]=l,r[2]=l;break;default:s.axis}}return r}const X1=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:DCe,getColor:qne,getOpacity:Hne,getRotationAngle:Wne,getSize:M$,getSizeForValue:Kne,getSizeFromNumberOrVariable:Zo,getSizeRangeAtScale:NCe,getVisualVariableValues:FCe,viewScaleRE:Gne},Symbol.toStringTag,{value:"Module"}));var tA;const _y=Ke.getLogger("esri.renderers.visualVariables.SizeVariable"),Kx=new Dt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),iA=new Dt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function SG(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Si(e):e.type==="size"?Hm(e)?e:(delete(e={...e}).type,new $i(e)):void 0}function $G(e,t,i){if(typeof e!="object")return e;const r=new $i;return r.read(e,i),r}let $i=tA=class extends e_{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:Gne.test(this.valueExpression)}}set expression(e){_y.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){Hm(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Hm(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return Une(this)}set maxDataValue(e){e&&this.stops&&(_y.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(_y.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return SG(e)}readMaxSize(e,t,i){return $G(e,t,i)}set minDataValue(e){e&&this.stops&&(_y.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(_y.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return SG(e)}readMinSize(e,t,i){return $G(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(_y.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return TCe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const s=this.index,l=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new ge("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:l+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?iA.read(e):null}clone(){return new tA({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Hm(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Hm(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===jn.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===jn.Stops){const e=this.stops,t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};g([S({readOnly:!0})],$i.prototype,"cache",null),g([S({type:Kx.apiValues,json:{type:Kx.jsonValues,origins:{"web-map":{read:!1}},read:Kx.read,write:Kx.write}})],$i.prototype,"axis",void 0),g([S({type:String,value:null,json:{read:!1}})],$i.prototype,"expression",null),g([S()],$i.prototype,"index",null),g([S({type:String,readOnly:!0})],$i.prototype,"inputValueType",null),g([S({type:Vne,json:{write:!0}})],$i.prototype,"legendOptions",void 0),g([S({type:Number,value:null,json:{write:!0}})],$i.prototype,"maxDataValue",null),g([S({type:Number,value:null,json:{write:!0}})],$i.prototype,"maxSize",null),g([oi("maxSize")],$i.prototype,"castMaxSize",null),g([nt("maxSize")],$i.prototype,"readMaxSize",null),g([S({type:Number,value:null,json:{write:!0}})],$i.prototype,"minDataValue",null),g([S({type:Number,value:null,json:{write:!0}})],$i.prototype,"minSize",null),g([oi("minSize")],$i.prototype,"castMinSize",null),g([nt("minSize")],$i.prototype,"readMinSize",null),g([S({type:String,json:{write:!0}})],$i.prototype,"normalizationField",void 0),g([S({readOnly:!0})],$i.prototype,"arcadeRequired",null),g([S({type:String})],$i.prototype,"scaleBy",void 0),g([S({type:[ECe],value:null,json:{write:!0}})],$i.prototype,"stops",null),g([S({type:["outline"],json:{write:!0}})],$i.prototype,"target",void 0),g([S({type:String,readOnly:!0})],$i.prototype,"transformationType",null),g([S({type:["size"],json:{type:["sizeInfo"]}})],$i.prototype,"type",void 0),g([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],$i.prototype,"useSymbolValue",void 0),g([S({type:String,json:{write:!0}})],$i.prototype,"valueExpression",void 0),g([nt("valueExpression",["valueExpression","expression"])],$i.prototype,"readValueExpression",null),g([pt("web-scene","valueExpression")],$i.prototype,"writeValueExpressionWebScene",null),g([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],$i.prototype,"valueRepresentation",void 0),g([S({type:iA.apiValues,json:{write:iA.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],$i.prototype,"valueUnit",void 0),g([nt("valueUnit")],$i.prototype,"readValueUnit",null),$i=tA=g([Q("esri.renderers.visualVariables.SizeVariable")],$i);const JR=$i,jCe=Ke.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),zCe={color:Dne,size:JR,opacity:jne,rotation:zne},VCe=new Dt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),UCe=/^\[([^\]]+)\]$/i;let F9=class extends st{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:s}=t,l=r&&r.match(UCe),d=l&&l[1];if(d&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:d})),e)return e.map(y=>{const v=VCe.read(y.type),_=zCe[v];_||(jCe.warn(`Unknown variable type: ${v}`),i&&i.messages&&i.messages.push(new mo("visual-variable:unsupported",`visualVariable of type '${v}' is not supported`,{definition:y,context:i})));const M=new _;return M.read(y,i),M})}writeVariables(e,t){const i=[];for(const r of e){const s=r.toJSON(t);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};g([S()],F9.prototype,"visualVariables",null),F9=g([Q("esri.renderers.visualVariables.VisualVariableFactory")],F9);const BCe=F9,GCe={base:e_,key:"type",typeMap:{opacity:jne,color:Dne,rotation:zne,size:JR}},Av=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new BCe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,l){r[s]=this._vvFactory.writeVariables(i,l)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(l=>l.type===i&&(typeof r=="string"?l.target===r:r!==!1||!l.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const l of s)l&&(l.field&&Cl(i,r,l.field),l.normalizationField&&Cl(i,r,l.normalizationField),l.valueExpression&&await wo(i,r,l.valueExpression))}};return g([S({types:[GCe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),g([nt("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),g([pt("visualVariables")],t.prototype,"writeVisualVariables",null),t=g([Q("esri.renderers.mixins.VisualVariablesMixin")],t),t},Mw={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function qCe(e,t=Mw){var y,v;if(!e)return{symbol:null};const{retainId:i=Mw.retainId,ignoreDrivers:r=Mw.ignoreDrivers,hasLabelingContext:s=Mw.hasLabelingContext,retainCIM:l=Mw.retainCIM}=t;let d;if(Rc(e)||e instanceof J1)d=e.clone();else if(e.type==="cim"){const _=(v=(y=e.data)==null?void 0:y.symbol)==null?void 0:v.type;if(_!=="CIMPointSymbol")return{error:new ge("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${_||"unknown"}' is unsupported in 3D`,{symbol:e})};d=l?e.clone():W0.fromCIMSymbol(e)}else if(e instanceof $o)d=e$.fromSimpleLineSymbol(e);else if(e instanceof is)d=W0.fromSimpleMarkerSymbol(e);else if(e instanceof V3)d=W0.fromPictureMarkerSymbol(e);else if(e instanceof Dc)d=U3.fromSimpleFillSymbol(e);else{if(!(e instanceof W1))return{error:new ge("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};d=s?Q6.fromTextSymbol(e):W0.fromTextSymbol(e)}if(i&&d.type!=="cim"&&(d.id=e.id),r&&Rc(d))for(let _=0;_<d.symbolLayers.length;++_)d.symbolLayers.getItemAt(_)._ignoreDrivers=!0;return{symbol:d}}const HCe=["building-scene","integrated-mesh","point-cloud","scene"];function GS(e,t,i,r){const s=Zne(e,{},{context:r,isLabelSymbol:!1});K(s)&&(t[i]=s)}function MG(e,t,i,r){const s=Zne(e,{},{context:r,isLabelSymbol:!0});K(s)&&(t[i]=s)}function EG(e){return e instanceof bv||e instanceof J1}function Zne(e,t,i){var y;if(ce(e))return null;const{context:r,isLabelSymbol:s}=i,l=r==null?void 0:r.origin,d=r==null?void 0:r.messages;if(l==="web-scene"&&!EG(e)){const v=qCe(e,{retainCIM:!0,hasLabelingContext:s});return K(v.symbol)?v.symbol.write(t,r):(d==null||d.push(new ge("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:v.error})),null)}return(l==="web-map"||l==="portal-item"&&!HCe.includes((y=r==null?void 0:r.layer)==null?void 0:y.type))&&EG(e)?(d==null||d.push(new ge("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function Yne(e,t){return f5e(e,null,t)}const t_={types:kee,json:{write:{writer:GS},origins:{"web-scene":{types:tU,write:{writer:GS},read:{reader:pv({types:tU})}}}}},Xne={types:{base:ta,key:"type",typeMap:{"simple-fill":h1.typeMap["simple-fill"],"picture-fill":h1.typeMap["picture-fill"],"polygon-3d":h1.typeMap["polygon-3d"]}},json:{write:{writer:GS},origins:{"web-scene":{type:U3,write:{writer:GS}}}}};var rA;let ld=rA=class extends Ve{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new rA({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};g([S({type:String,json:{write:!0}})],ld.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],ld.prototype,"label",void 0),g([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],ld.prototype,"minValue",void 0),g([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],ld.prototype,"maxValue",void 0),g([S(t_)],ld.prototype,"symbol",void 0),ld=rA=g([Q("esri.renderers.support.ClassBreakInfo")],ld);const qS=ld;var nA;const Zx=Ke.getLogger("esri.renderers.ClassBreaksRenderer"),Qne="log",D9="percent-of-total",j9="field",Yx=new Dt({esriNormalizeByLog:Qne,esriNormalizeByPercentOfTotal:D9,esriNormalizeByField:j9}),WCe=er(qS);let vn=nA=class extends Av(mp){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const l=new qS;return l.read(s,i),l.minValue==null&&(l.minValue=r),l.maxValue==null&&(l.maxValue=l.minValue),r=l.maxValue,l})}writeClassBreakInfos(e,t,i,r){const s=e.map(l=>l.write({},r));this._areClassBreaksConsecutive()&&s.forEach(l=>delete l.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(Zx.error(".field: field must be a string value"),null):L3(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&j9||i&&D9||null,t&&i&&Zx.warn("warning: both normalizationField and normalizationTotal are set!")):e!==j9&&e!==D9||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new qS({minValue:e,maxValue:t,symbol:Aee(i)}):WCe(Me(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(ce(t)||ce(t.arcade))&&Zx.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(ce(t)||ce(t.arcade))&&(i={...i,arcade:await op()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(ce(t)||ce(t.arcade)))return void Zx.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ce(t)||ce(t.arcade))){const s=await op(),{arcadeUtils:l}=s;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new nA({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Me(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Me(this.visualVariables),legendOptions:Me(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),wo(e,t,this.valueExpression)];Cl(e,t,this.field),Cl(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=hn(t,{});let d=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const y=l.arcadeUtils;if(!d){const _=y.createSyntaxTree(this.valueExpression);d=y.createFunction(_),this._compiledValueExpression.compiledFunction=d}this._compiledValueExpression.valueExpression=this.valueExpression;const v=y.executeFunction(d,y.createExecContext(e,y.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(v)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const l=this.normalizationTotal,d=parseFloat(i[this.normalizationField]);if(r===Qne)s=Math.log(s)*Math.LOG10E;else if(r!==D9||isNaN(l)){if(r===j9&&!isNaN(d)){if(isNaN(s)||isNaN(d))return-1;s/=d}}else s=s/l*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};g([S(Xne)],vn.prototype,"backgroundFillSymbol",void 0),g([S({type:[qS]})],vn.prototype,"classBreakInfos",void 0),g([nt("classBreakInfos")],vn.prototype,"readClassBreakInfos",null),g([pt("classBreakInfos")],vn.prototype,"writeClassBreakInfos",null),g([S({type:String,json:{write:!0}})],vn.prototype,"defaultLabel",void 0),g([S(t_)],vn.prototype,"defaultSymbol",void 0),g([S({type:String,json:{write:!0}})],vn.prototype,"field",void 0),g([oi("field")],vn.prototype,"castField",null),g([S({type:Boolean})],vn.prototype,"isMaxInclusive",void 0),g([S({type:wg,json:{write:!0}})],vn.prototype,"legendOptions",void 0),g([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],vn.prototype,"minValue",null),g([S({type:String,json:{write:!0}})],vn.prototype,"normalizationField",void 0),g([S({type:Number,cast:e=>gl(e),json:{write:!0}})],vn.prototype,"normalizationTotal",void 0),g([S({type:Yx.apiValues,value:null,json:{type:Yx.jsonValues,read:Yx.read,write:Yx.write}})],vn.prototype,"normalizationType",null),g([Mt({classBreaks:"class-breaks"})],vn.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],vn.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],vn.prototype,"valueExpressionTitle",void 0),vn=nA=g([Q("esri.renderers.ClassBreaksRenderer")],vn);const ese=vn;class JCe{constructor(t,i){this._storage=new Lie,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const TG=Ke.getLogger("esri.renderers.support.DictionaryLoader"),KCe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class KR{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new JCe(100),this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(R){if(Vs(R))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const R of this._symbolFields){const D=this.fieldMap[R];if(D&&t.attributes[D]!=null){const z=""+t.attributes[D];s[R]=z}else s[R]=""}const l=r(s,i);if(!l||typeof l!="string")return null;const d=NL(l).toString(),y=this._symbolCache.get(d);if(y)return y.catch(()=>{this._symbolCache.pop(d)}),y;const v=l.split(";"),_=[],M=[];for(const R of v)if(R)if(R.includes("po:")){const D=R.substr(3).split("|");if(D.length===3){const z=D[0],B=D[1];let V=D[2];if(B==="DashTemplate")V=V.split(" ").map(q=>Number(q));else if(B==="Color"){const q=new ot(V).toRgba();V=[q[0],q[1],q[2],255*q[3]]}else V=Number(V);M.push({primitiveName:z,propertyName:B,value:V})}}else if(R.includes("|")){for(const D of R.split("|"))if(this._itemNames.has(D)){_.push(D);break}}else this._itemNames.has(R)&&_.push(R);const k=!K(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",O=this._cimPartsToCIMSymbol(_,M,k,i);return this._symbolCache.put(d,O,1),O}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void TG.error("no valid URL!");const i=Bi(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:K(t)?t.signal:null}),[{data:r}]=await Promise.all([i,op()]);if(!r)throw this._dictionaryPromise=null,new ge("esri.renderers.DictionaryRenderer","Bad dictionary data!");const s=r.expression,l=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=l.symbol;const d={};if(this.config){const v=this.config;for(const _ in v)d[_]=v[_]}if(l.configuration)for(const v of l.configuration)d.hasOwnProperty(v.name)||(d[v.name]=v.value);const y=[];if(K(t)&&t.fields&&this.fieldMap)for(const v of this._symbolFields){const _=this.fieldMap[v],M=t.fields.filter(k=>k.name===_);M.length>0&&y.push({...M[0],name:v})}return this._dictionaryPromise=$_e(s,K(t)?t.spatialReference:null,y,d).then(v=>{const _={scale:0};return(M,k)=>{const O=v.repurposeFeature({geometry:null,attributes:M});return _.scale=K(k)?k.scale:void 0,v.evaluate({$feature:O,$view:_})}}).catch(v=>(TG.error("Creating dictinoary expression failed:",v),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,r,s){const l=new Array(t.length);for(let v=0;v<t.length;v++)l[v]=this._getSymbolPart(t[v],s);const d=await Promise.all(l),y=this.fieldMap;for(const v of d)tse(v,y);return new fp({data:this._combineSymbolParts(d,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(l=>l.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),s=Bi(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,s);try{return(await s).data}catch(l){throw this._ongoingRequests.delete(t),l}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const s={...t[0]};if(t.length>1){s.symbolLayers=[];for(const l of t){const d=l;s.symbolLayers.unshift(...d.symbolLayers)}}return r&&(s.callout=KCe),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}}function tse(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&ZCe(s,t)}}function ZCe(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":tse(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}const pKe=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:KR},Symbol.toStringTag,{value:"Module"}));var sA;let au=sA=class extends Av(mp){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new KR(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new sA({config:Me(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Me(this.fieldMap),url:Me(this.url),visualVariables:Me(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await wo(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};g([S({type:KR})],au.prototype,"_loader",null),g([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],au.prototype,"config",void 0),g([S({type:Object,json:{write:!0}})],au.prototype,"fieldMap",void 0),g([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],au.prototype,"scaleExpression",void 0),g([pt("scaleExpression")],au.prototype,"writeData",null),g([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],au.prototype,"scaleExpressionTitle",void 0),g([S({type:String,json:{write:!0}})],au.prototype,"url",void 0),g([pt("visualVariables")],au.prototype,"writeVisualVariables",null),au=sA=g([Q("esri.renderers.DictionaryRenderer")],au);const YCe=au;var oA;const XCe=Ke.getLogger("esri.renderers.support.AttributeColorInfo");let vh=oA=class extends Ve{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(XCe.error(".field: field must be a string value"),null):L3(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new oA({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([S({type:ot,json:{type:[Number],write:!0}})],vh.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],vh.prototype,"field",void 0),g([oi("field")],vh.prototype,"castField",null),g([S({type:String,json:{write:!0}})],vh.prototype,"label",void 0),g([S({type:String,json:{write:!0}})],vh.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],vh.prototype,"valueExpressionTitle",void 0),vh=oA=g([Q("esri.renderers.support.AttributeColorInfo")],vh);const ise=vh;var aA;let z9=aA=class extends Ve{constructor(){super(...arguments),this.unit=null}clone(){return new aA({unit:this.unit})}};g([S({type:String,json:{write:!0}})],z9.prototype,"unit",void 0),z9=aA=g([Q("esri.renderers.support.DotDensityLegendOptions")],z9);const QCe=z9;var lA;let ks=lA=class extends Av(mp){constructor(e){super(e),this.attributes=null,this.backgroundColor=new ot([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new $o,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Dc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new lA({attributes:Me(this.attributes),backgroundColor:Me(this.backgroundColor),dotBlendingEnabled:Me(this.dotBlendingEnabled),dotShape:Me(this.dotShape),dotSize:Me(this.dotSize),dotValue:Me(this.dotValue),legendOptions:Me(this.legendOptions),outline:Me(this.outline),referenceScale:Me(this.referenceScale),visualVariables:Me(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await wo(e,t,i.valueExpression),i.field&&e.add(i.field)}};g([S({type:[ise],json:{write:!0}})],ks.prototype,"attributes",void 0),g([S({type:ot,json:{write:!0}})],ks.prototype,"backgroundColor",void 0),g([S({type:Boolean}),tt("dotBlendingEnabled")],ks.prototype,"blendDots",void 0),g([S({type:Boolean,json:{write:!0}})],ks.prototype,"dotBlendingEnabled",void 0),g([S({type:String,json:{write:!1}})],ks.prototype,"dotShape",void 0),g([S({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],ks.prototype,"dotSize",void 0),g([S({type:QCe,json:{write:!0}})],ks.prototype,"legendOptions",void 0),g([S({type:$o,json:{default:null,write:!0}})],ks.prototype,"outline",void 0),g([S({type:Number,json:{write:!0}})],ks.prototype,"dotValue",void 0),g([S({type:Number}),tt("dotValue")],ks.prototype,"referenceDotValue",void 0),g([S({type:Number,json:{write:!0}})],ks.prototype,"referenceScale",void 0),g([S({type:Number,json:{write:!0}})],ks.prototype,"seed",void 0),g([Mt({dotDensity:"dot-density"})],ks.prototype,"type",void 0),ks=lA=g([Q("esri.renderers.DotDensityRenderer")],ks);const eke=ks;let em=class extends ia(Ve){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};g([S({type:String,json:{write:!0}})],em.prototype,"minLabel",void 0),g([S({type:String,json:{write:!0}})],em.prototype,"maxLabel",void 0),g([S({type:String,json:{write:!0}})],em.prototype,"title",void 0),em=g([Q("esri.renderers.support.HeatmapLegendOptions")],em);function Ov(){return[0,0,0,0]}function tke(e){return[e[0],e[1],e[2],e[3]]}function Ru(e,t,i,r){return[e,t,i,r]}function rse(e){const t=Ov(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function nse(e,t){return new Float64Array(e,t,4)}function sse(){return Ov()}function ose(){return Ru(1,1,1,1)}function ase(){return Ru(1,0,0,0)}function lse(){return Ru(0,1,0,0)}function use(){return Ru(0,0,1,0)}function cse(){return Ru(0,0,0,1)}const ike=sse(),rke=ose(),nke=ase(),ske=lse(),oke=use(),ake=cse();Object.freeze(Object.defineProperty({__proto__:null,create:Ov,clone:tke,fromValues:Ru,fromArray:rse,createView:nse,zeros:sse,ones:ose,unitX:ase,unitY:lse,unitZ:use,unitW:cse,ZEROS:ike,ONES:rke,UNIT_X:nke,UNIT_Y:ske,UNIT_Z:oke,UNIT_W:ake},Symbol.toStringTag,{value:"Module"}));const ZR=2.4;function lke(e){return bo(e*ZR)}function uke(e){return Xi(e)/ZR}function cke(e,t,i,r){let{color:s,ratio:l}=t,{color:d,ratio:y}=i;y===l&&(y===1?l-=1e-6:y+=1e-6);const v=Bs((r-l)/(y-l),0,1);H6(e,s.toArray(),d.toArray(),v)}function dKe(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:y})=>y>=0&&y<=1).sort((y,v)=>y.ratio-v.ratio).map(({color:y,ratio:v})=>({color:y,ratio:Math.max(v,.001)})),e.length<1)return i;let r=e[0],s=e[0],l=1;const d=Ov();for(let y=0;y<512;y++){const v=(y+.5)/512;for(;v>s.ratio&&l<e.length;)r=s,s=e[l++];cke(d,r,s,v),i.set(d,4*y)}return i}function fKe(e,t,i,r){const{radius:s,fieldOffset:l,field:d}=t,y=Math.round(Xi(s)),v=new Float64Array(i*r);let _,M=Number.NEGATIVE_INFINITY;const k=dke(d,l),O=new Set;for(const R of e){const D=R.getCursor();for(;D.next();){const z=D.getObjectId();if(O.has(z))continue;O.add(z);const B=D.readLegacyPointGeometry(),V=128;if(B.x<-V||B.x>=i+V||B.y<-V||B.y>r+V)continue;const q=+k(D),J=Math.max(0,Math.round(B.x)-y),ne=Math.max(0,Math.round(B.y)-y),re=Math.min(r,Math.round(B.y)+y),ue=Math.min(i,Math.round(B.x)+y);for(let _e=ne;_e<re;_e++)for(let xe=J;xe<ue;xe++){const Ne=_e*i+xe,Ce=pke(B.x-xe,B.y-_e,y);_=v[Ne]+=Ce*q,_>M&&(M=_)}}}return{matrix:v.buffer,max:M}}function yKe(e,t,i,r,s,l){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const d=e.getImageData(0,0,t,t);i&&r&&d.data.set(new Uint8ClampedArray(hke(t,i,r,s,l))),e.putImageData(d,0,0)}function hke(e,t,i,r,s){const l=new Uint32Array(e*e),d="buffer"in t?t:new Float64Array(t),y="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),v=y.length/(s-r);for(let _=0;_<d.length;_++){const M=d[_],k=Math.floor((M-r)*v);l[_]=y[Bs(k,0,y.length-1)]}return l.buffer}function pke(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function mKe(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function dke(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var uA;const fke=Ke.getLogger("esri.renderers.HeatmapRenderer");function IG(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:l,minPixelIntensity:d,...y}=e;return y}}return e}let Ln=uA=class extends mp{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new nb({ratio:0,color:new ot("rgba(255, 140, 0, 0)")}),new nb({ratio:.75,color:new ot("rgba(255, 140, 0, 1)")}),new nb({ratio:.9,color:new ot("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return IG(e)}get blurRadius(){return uke(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",lke(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(ZR**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||zs(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,hv(()=>{yve(fke,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=IG(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,bo(256));return new is({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Cl(e,t,i),r&&typeof r=="string"&&await wo(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new uA({colorStops:Me(this.colorStops),field:this.field,legendOptions:Me(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([S({type:Nne,json:{write:!1}})],Ln.prototype,"authoringInfo",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ln.prototype,"blurRadius",null),g([S({type:[nb],json:{write:!0}})],Ln.prototype,"colorStops",void 0),g([S({type:String,json:{write:!0}})],Ln.prototype,"field",void 0),g([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Ln.prototype,"fieldOffset",void 0),g([S({type:em,json:{write:!0}})],Ln.prototype,"legendOptions",void 0),g([S({type:Number,json:{write:!0}})],Ln.prototype,"maxDensity",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ln.prototype,"maxPixelIntensity",null),g([S({type:Number,json:{write:!0}})],Ln.prototype,"minDensity",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ln.prototype,"minPixelIntensity",null),g([S({type:Number,cast:Si,json:{write:!0}})],Ln.prototype,"radius",void 0),g([S({type:Number,range:{min:0},json:{default:0,write:!0}})],Ln.prototype,"referenceScale",void 0),g([Mt({heatmap:"heatmap"})],Ln.prototype,"type",void 0),g([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Ln.prototype,"valueExpression",void 0),g([S({type:String})],Ln.prototype,"valueExpressionTitle",void 0),g([S({readOnly:!0})],Ln.prototype,"_pixelIntensityToDensity",null),Ln=uA=g([Q("esri.renderers.HeatmapRenderer")],Ln);const hse=Ln;let R0=class extends ia(Ve){constructor(){super(...arguments),this.color=new ot([0,0,0,0]),this.label=null,this.threshold=0}};g([S({type:ot,json:{write:!0}})],R0.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],R0.prototype,"label",void 0),g([S({type:Number,range:{min:0,max:1},json:{write:!0}})],R0.prototype,"threshold",void 0),R0=g([Q("esri.renderers.support.OthersCategory")],R0);let V9=class extends ia(Ve){constructor(){super(...arguments),this.title=null}};g([S({type:String,json:{write:!0}})],V9.prototype,"title",void 0),V9=g([Q("esri.renderers.support.PieChartLegendOptions")],V9);let ya=class extends Av(ia(mp)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ot([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new R0,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new is({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await wo(e,t,i.valueExpression),i.field&&e.add(i.field)}};g([S({type:[ise],json:{write:!0}})],ya.prototype,"attributes",void 0),g([S({type:Dc,json:{default:null,write:!0}})],ya.prototype,"backgroundFillSymbol",void 0),g([S({type:ot,json:{write:!0}})],ya.prototype,"defaultColor",void 0),g([S({type:String,json:{write:!0}})],ya.prototype,"defaultLabel",void 0),g([S({type:Number,range:{min:0,max:1},json:{write:!0}})],ya.prototype,"holePercentage",void 0),g([S({type:R0,json:{write:!0}})],ya.prototype,"othersCategory",void 0),g([S({type:V9,json:{write:!0}})],ya.prototype,"legendOptions",void 0),g([S({type:$o,json:{default:null,write:!0}})],ya.prototype,"outline",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],ya.prototype,"size",void 0),g([Mt({pieChart:"pie-chart"})],ya.prototype,"type",void 0),ya=g([Q("esri.renderers.PieChartRenderer")],ya);const yke=ya;var cA;let d0=cA=class extends Av(mp){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new cA({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Me(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};g([S({type:String,json:{write:!0}})],d0.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],d0.prototype,"label",void 0),g([S(t_)],d0.prototype,"symbol",void 0),g([Mt({simple:"simple"})],d0.prototype,"type",void 0),d0=cA=g([Q("esri.renderers.SimpleRenderer")],d0);const YR=d0,mke=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function hA(e){return e instanceof st}function CG(e){return e instanceof vt?Object.keys(e.items):hA(e)?zs(e).keys():e?Object.keys(e):[]}function Xx(e,t){return e instanceof vt?e.items[t]:e[t]}function gke(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function ub(e){return e?e.declaredClass:null}function pse(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=CG(e),s=CG(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||gke(e,t))return{type:"complete",oldValue:e,newValue:t};const l=s.filter(k=>!r.includes(k)),d=r.filter(k=>!s.includes(k)),y=r.filter(k=>s.includes(k)&&Xx(e,k)!==Xx(t,k)).concat(l,d).sort(),v=ub(e);if(v&&mke.includes(v)&&y.length)return{type:"complete",oldValue:e,newValue:t};let _;const M=hA(e)&&hA(t);for(const k of y){const O=Xx(e,k),R=Xx(t,k);let D;if((M||typeof O!="function"&&typeof R!="function")&&O!==R&&(O!=null||R!=null)){if(i&&i[k]&&typeof i[k]=="function")D=i[k](O,R);else if(O instanceof Date&&R instanceof Date){if(O.getTime()===R.getTime())continue;D={type:"complete",oldValue:O,newValue:R}}else D=typeof O=="object"&&typeof R=="object"&&ub(O)===ub(R)?pse(O,R):{type:"complete",oldValue:O,newValue:R};K(D)&&(K(_)?_.diff[k]=D:_={type:"partial",diff:{[k]:D}})}}return _}function vke(e,t){if(ce(e))return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const l=r.diff[s];if(!l)return!1;r=l}}return!0}function gKe(e,t){for(const i of t)if(vke(e,i))return!0;return!1}function wke(e,t){if(!(typeof e=="function"||typeof t=="function"||ce(e)&&ce(t)))return ce(e)||ce(t)||typeof e=="object"&&typeof t=="object"&&ub(e)!==ub(t)?{type:"complete",oldValue:e,newValue:t}:pse(e,t)}var pA;let ud=pA=class extends Ve{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new pA({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};g([S({type:String,json:{write:!0}})],ud.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],ud.prototype,"label",void 0),g([S(t_)],ud.prototype,"symbol",void 0),g([S({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],ud.prototype,"value",void 0),g([oi("value")],ud.prototype,"castValue",null),ud=pA=g([Q("esri.renderers.support.UniqueValueInfo")],ud);const HS=ud,bke=()=>!!ke("enable-feature:force-wosr"),VE={};async function _ke(e,t){try{return{data:(await XR(e,t)).data,baseUrl:iP(e),styleUrl:e}}catch(i){return O3(i),null}}function xke(e,t,i){const r=K(t.portal)?t.portal:Bn.getDefault();let s;const l=`${r.url} - ${r.user&&r.user.username} - ${e}`;return VE[l]||(VE[l]=Ske(e,r,i).then(d=>(s=d,d.fetchData())).then(d=>({data:d,baseUrl:s.itemUrl,styleName:e}))),VE[l]}function Ske(e,t,i){return t.load(i).then(()=>{const r=new Dh({disableExtraQuery:!0,query:`owner:${kG} AND type:${AG} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let s=null;const l=e.toLowerCase();if(r&&Array.isArray(r)){for(const d of r)if(d.typeKeywords.some(y=>y.toLowerCase()===l)&&d.type===AG&&d.owner===kG){s=d;break}}if(!s)throw new ge("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function dse(e,t,i){return e.styleUrl?_ke(e.styleUrl,i):e.styleName?xke(e.styleName,t,i):Promise.reject(new ge("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function fse(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function $ke(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!bke()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function XR(e,t){const i={responseType:"json",query:{f:"json"},...t};return Bi(Il(e),i)}const kG="esri_en",AG="Style",Mke="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var b2;const Rf=Ke.getLogger("esri.renderers.UniqueValueRenderer"),Eke=er(HS);let Rr=b2=class extends Av(mp){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let l=0;l<i.length;l++){const d=t.find(y=>y.value===i[l].value);d?wke(d,i[l])?(s.changed.push({type:"complete",oldValue:d,newValue:i[l]}),r=!0):s.unchanged.push({oldValue:d,newValue:i[l]}):(s.added.push(i[l]),r=!0)}for(let l=0;l<t.length;l++)i.find(d=>d.value===t[l].value)||(s.removed.push(t[l]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:L3(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new ge("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Rf.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||Bn.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=uf(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=j3(e.styleUrl,r))}set uniqueValueInfos(e){this.styleOrigin?Rf.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Rf.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?Eke(e):new HS({value:e,symbol:Aee(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)Rf.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(ce(t)||ce(t.arcade))&&(i={...i,arcade:await op()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(ce(t)||ce(t.arcade)))return void Rf.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ce(i)||ce(i.arcade))){const s=await op(),{arcadeUtils:l}=s;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new b2({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Me(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Me(this.visualVariables),legendOptions:Me(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:Me(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=Me(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(Me(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),wo(e,t,this.valueExpression)];Cl(e,t,this.field),Cl(e,t,this.field2),Cl(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return dse(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new J1({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new HS({value:i.name,symbol:r});t.push(s),this._valueInfoMap[i.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=hn(t,{});let d=this._cache.compiledFunc;const y=l.arcadeUtils;if(!d){const _=y.createSyntaxTree(this.valueExpression);d=y.createFunction(_),this._cache.compiledFunc=d}const v=y.executeFunction(d,y.createExecContext(e,y.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[v+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const s=this.field2,l=this.field3,d=[];t&&d.push(i[t]),s&&d.push(i[s]),l&&d.push(i[l]),r=d.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new b2(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Bn.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Rf.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new b2(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{Rf.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};g([S({readOnly:!0})],Rr.prototype,"_cache",null),g([Mt({uniqueValue:"unique-value"})],Rr.prototype,"type",void 0),g([S(Xne)],Rr.prototype,"backgroundFillSymbol",void 0),g([S({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Rr.prototype,"field",void 0),g([oi("field")],Rr.prototype,"castField",null),g([pt("field")],Rr.prototype,"writeField",null),g([S({type:String,json:{write:!0}})],Rr.prototype,"field2",void 0),g([S({type:String,json:{write:!0}})],Rr.prototype,"field3",void 0),g([S({type:String,json:{write:!0}})],Rr.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],Rr.prototype,"valueExpressionTitle",void 0),g([S({type:wg,json:{write:!0}})],Rr.prototype,"legendOptions",void 0),g([S({type:String,json:{write:!0}})],Rr.prototype,"defaultLabel",void 0),g([S(gY({...t_},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Rr.prototype,"defaultSymbol",null),g([S({type:String,json:{write:!0}})],Rr.prototype,"fieldDelimiter",void 0),g([S({type:Bn,readOnly:!0})],Rr.prototype,"portal",void 0),g([nt("portal",["styleName"])],Rr.prototype,"readPortal",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Rr.prototype,"styleOrigin",void 0),g([nt("styleOrigin",["styleName","styleUrl"])],Rr.prototype,"readStyleOrigin",null),g([pt("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Rr.prototype,"writeStyleOrigin",null),g([S({type:[HS],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Rr.prototype,"uniqueValueInfos",null),Rr=b2=g([Q("esri.renderers.UniqueValueRenderer")],Rr);const QR=Rr,i_={key:"type",base:mp,typeMap:{heatmap:hse,simple:YR,"unique-value":QR,"class-breaks":ese,"dot-density":eke,dictionary:YCe,"pie-chart":yke},errorContext:"renderer"},yse={key:"type",base:mp,typeMap:{simple:YR,"unique-value":QR,"class-breaks":ese,heatmap:hse},errorContext:"renderer"};function Tke(e,t){return mse(e,null,t)}const Ike=pv({types:i_});function mse(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new mo("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):Ike(e,t,i):null}class eN{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(qT),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new eN,r=this._originStores[Ft.DEFAULTS];r&&r.forEach((s,l)=>{i.set(l,Me(s),Ft.DEFAULTS)});for(let s=Ft.SERVICE;s<qT;s++){const l=this._originStores[s];l&&l.forEach((d,y)=>{t&&t.has(y)||i.set(y,Me(d),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=Ft.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const l=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),l!==i}return!1}delete(t,i=Ft.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let l=i-1;l>=0;l--){const d=this._originStores[l];if(d&&d.has(t)){this._values.set(t,d.get(t)),this._propertyOriginMap.set(t,l);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r&&r.get(t),l=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),l!==s}originOf(t){return this._propertyOriginMap.get(t)||Ft.DEFAULTS}forEach(t){this._values.forEach(t)}}const gse=e=>{let t=class extends e{constructor(...i){super(...i);const r=zs(this),s=r.store,l=new eN;r.store=l,rX(r,s,l)}read(i,r){sX(this,i,r)}getAtOrigin(i,r){const s=UE(this),l=jd(r);if(typeof i=="string")return s.get(i,l);const d={};return i.forEach(y=>{d[y]=s.get(y,l)}),d}originOf(i){return U4(this.originIdOf(i))}originIdOf(i){return UE(this).originOf(i)}revert(i,r){const s=UE(this),l=jd(r),d=zs(this);let y;y=typeof i=="string"?i==="*"?s.keys(l):[i]:i,y.forEach(v=>{d.invalidate(v),s.revert(v,l),d.commit(v)})}};return t=g([Q("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function UE(e){return zs(e).store}let OG=class extends gse(st){};OG=g([Q("esri.core.ReadOnlyMultiOriginJSONSupport")],OG);const Cke=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return BE(this).delete(i,jd(r))}write(i={},r){return aX(this,i=i||{},r),i}setAtOrigin(i,r,s){zs(this).setAtOrigin(i,r,jd(s))}removeOrigin(i){const r=BE(this),s=jd(i),l=r.keys(s);for(const d of l)r.originOf(d)===s&&r.set(d,r.get(d,s),Ft.USER)}updateOrigin(i,r){const s=BE(this),l=jd(r),d=this.get(i);for(let y=l+1;y<qT;++y)s.delete(i,y);s.set(i,d,l)}toJSON(i){return this.write({},i)}};return t=g([Q("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function BE(e){return zs(e).store}const tN=e=>{let t=class extends Cke(gse(e)){constructor(...i){super(...i)}};return t=g([Q("esri.core.MultiOriginJSONSupport")],t),t};let LG=class extends tN(st){};LG=g([Q("esri.core.MultiOriginJSONSupport")],LG);async function kke(e,t){const{WhereClause:i}=await Le(()=>import("./WhereClause.bf01d283.js"),[],import.meta.url);return i.create(e,t)}function vse(e,t){return K(e)?K(t)?`(${e}) AND (${t})`:e:t}var dA;let f0=dA=class extends Ve{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new dA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([S({type:String,json:{write:!0}})],f0.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],f0.prototype,"name",void 0),g([S({type:["boolean","date","number","string"],json:{write:!0}})],f0.prototype,"returnType",void 0),g([S({type:String,json:{write:!0}})],f0.prototype,"title",void 0),f0=dA=g([Q("esri.form.ExpressionInfo")],f0);const Ake=f0;let y0=class extends Ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};g([S({type:String,json:{write:!0}})],y0.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],y0.prototype,"label",void 0),g([S()],y0.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],y0.prototype,"visibilityExpression",void 0),y0=g([Q("esri.form.elements.Element")],y0);const Kg=y0;var fA;let U9=fA=class extends Ve{constructor(e){super(e),this.type=null}clone(){return new fA({type:this.type})}};g([S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],U9.prototype,"type",void 0),U9=fA=g([Q("esri.form.elements.inputs.AttachmentInput")],U9);const Oke=U9;var yA;let m0=yA=class extends Kg{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new yA({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};g([S({type:String,json:{write:!0}})],m0.prototype,"attachmentKeyword",void 0),g([S({type:Boolean,json:{write:!0}})],m0.prototype,"editable",void 0),g([S({type:Oke,json:{read:{source:"inputType"},write:{target:"inputType"}}})],m0.prototype,"input",void 0),g([S({type:["attachment"],json:{read:!1,write:!0}})],m0.prototype,"type",void 0),m0=yA=g([Q("esri.form.elements.AttachmentElement")],m0);const PG=m0;let B9=class extends Ve{constructor(e){super(e),this.type=null}};g([S()],B9.prototype,"type",void 0),B9=g([Q("esri.form.elements.inputs.Input")],B9);const Lv=B9;let _2=class extends Lv{constructor(e){super(e),this.maxLength=null,this.minLength=0}};g([S({type:Number,json:{write:!0}})],_2.prototype,"maxLength",void 0),g([S({type:Number,json:{write:!0}})],_2.prototype,"minLength",void 0),_2=g([Q("esri.form.elements.inputs.TextInput")],_2);const iN=_2;var mA;let G9=mA=class extends iN{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new mA({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],G9.prototype,"type",void 0),G9=mA=g([Q("esri.form.elements.inputs.BarcodeScannerInput")],G9);const Lke=G9;var gA;let tm=gA=class extends Lv{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new gA({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};g([S({type:String,json:{write:!0}})],tm.prototype,"noValueOptionLabel",void 0),g([S({type:Boolean,json:{write:!0}})],tm.prototype,"showNoValueOption",void 0),g([S({type:["combo-box"],json:{read:!1,write:!0}})],tm.prototype,"type",void 0),tm=gA=g([Q("esri.form.elements.inputs.ComboBoxInput")],tm);const Pke=tm;var vA;function RG(e){return e!=null?new Date(e):null}function NG(e){return e?e.getTime():null}let lu=vA=class extends Lv{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return RG(t.max)}writeMax(e,t){t.max=NG(e)}readMin(e,t){return RG(t.min)}writeMin(e,t){t.min=NG(e)}clone(){return new vA({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};g([S({type:Boolean,json:{write:!0}})],lu.prototype,"includeTime",void 0),g([S({type:Date,json:{type:Number,write:!0}})],lu.prototype,"max",void 0),g([nt("max")],lu.prototype,"readMax",null),g([pt("max")],lu.prototype,"writeMax",null),g([S({type:Date,json:{type:Number,write:!0}})],lu.prototype,"min",void 0),g([nt("min")],lu.prototype,"readMin",null),g([pt("min")],lu.prototype,"writeMin",null),g([S({type:["datetime-picker"],json:{read:!1,write:!0}})],lu.prototype,"type",void 0),lu=vA=g([Q("esri.form.elements.inputs.DateTimePickerInput")],lu);const Rke=lu;var wA;let im=wA=class extends Lv{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new wA({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};g([S({type:String,json:{write:!0}})],im.prototype,"noValueOptionLabel",void 0),g([S({type:Boolean,json:{write:!0}})],im.prototype,"showNoValueOption",void 0),g([S({type:["radio-buttons"],json:{read:!1,write:!0}})],im.prototype,"type",void 0),im=wA=g([Q("esri.form.elements.inputs.RadioButtonsInput")],im);const Nke=im;var bA;let rm=bA=class extends Lv{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new bA({offValue:this.offValue,onValue:this.onValue})}};g([S({type:[String,Number],json:{write:!0}})],rm.prototype,"offValue",void 0),g([S({type:[String,Number],json:{write:!0}})],rm.prototype,"onValue",void 0),g([S({type:["switch"],json:{read:!1,write:!0}})],rm.prototype,"type",void 0),rm=bA=g([Q("esri.form.elements.inputs.SwitchInput")],rm);const Fke=rm;var _A;let q9=_A=class extends iN{constructor(e){super(e),this.type="text-area"}clone(){return new _A({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["text-area"],json:{read:!1,write:!0}})],q9.prototype,"type",void 0),q9=_A=g([Q("esri.form.elements.inputs.TextAreaInput")],q9);const Dke=q9;var xA;let H9=xA=class extends iN{constructor(e){super(e),this.type="text-box"}clone(){return new xA({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["text-box"],json:{read:!1,write:!0}})],H9.prototype,"type",void 0),H9=xA=g([Q("esri.form.elements.inputs.TextBoxInput")],H9);const jke=H9,zke={base:Lv,key:"type",typeMap:{"barcode-scanner":Lke,"combo-box":Pke,"datetime-picker":Rke,"radio-buttons":Nke,switch:Fke,"text-area":Dke,"text-box":jke}};var SA;let al=SA=class extends Kg{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new SA({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};g([S({types:Yie,json:{read:{reader:MR},write:!0}})],al.prototype,"domain",void 0),g([S({type:Boolean,json:{write:!0}})],al.prototype,"editable",void 0),g([S({type:String,json:{write:!0}})],al.prototype,"editableExpression",void 0),g([S({type:String,json:{write:!0}})],al.prototype,"fieldName",void 0),g([S({type:String,json:{write:!0}})],al.prototype,"hint",void 0),g([S({types:zke,json:{read:{source:"inputType"},write:{target:"inputType"}}})],al.prototype,"input",void 0),g([S({type:String,json:{write:!0}})],al.prototype,"requiredExpression",void 0),g([S({type:String,json:{read:!1,write:!0}})],al.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],al.prototype,"valueExpression",void 0),al=SA=g([Q("esri.form.elements.FieldElement")],al);const FG=al;var $A;let wh=$A=class extends Kg{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new $A({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Me(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};g([S({type:Number,json:{write:!0}})],wh.prototype,"displayCount",void 0),g([S({type:["list"],json:{write:!0}})],wh.prototype,"displayType",void 0),g([S({type:Boolean,json:{write:!0}})],wh.prototype,"editable",void 0),g([S({type:[YQ],json:{write:!0}})],wh.prototype,"orderByFields",void 0),g([S({type:Number,json:{write:!0}})],wh.prototype,"relationshipId",void 0),g([S({type:["relationship"],json:{read:!1,write:!0}})],wh.prototype,"type",void 0),wh=$A=g([Q("esri.form.elements.RelationshipElement")],wh);const DG=wh;function wse(e){return{typesWithGroup:{base:Kg,key:"type",typeMap:{attachment:PG,field:FG,group:e,relationship:DG}},typesWithoutGroup:{base:Kg,key:"type",typeMap:{attachment:PG,field:FG,relationship:DG}}}}function bse(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function _se(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function xse(e,t,i=!0){return e?e.map(r=>Oc(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var MA;let vc=MA=class extends Kg{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return xse(e,GE,!1)}readElements(e,t){return bse(t.formElements,GE,!1)}writeElements(e,t){t.formElements=_se(e,GE,!1)}clone(){return new MA({description:this.description,elements:Me(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};g([S({json:{write:!0}})],vc.prototype,"elements",void 0),g([oi("elements")],vc.prototype,"castElements",null),g([nt("elements",["formElements"])],vc.prototype,"readElements",null),g([pt("elements")],vc.prototype,"writeElements",null),g([S({type:["collapsed","expanded"],json:{write:!0}})],vc.prototype,"initialState",void 0),g([S({type:String,json:{read:!1,write:!0}})],vc.prototype,"type",void 0),vc=MA=g([Q("esri.form.elements.GroupElement")],vc);const GE=wse(vc),Vke=vc;var EA;const qE=wse(Vke);let cc=EA=class extends Ve{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return xse(e,qE)}readElements(e,t){return bse(t.formElements,qE)}writeElements(e,t){t.formElements=_se(e,qE)}clone(){return new EA({description:this.description,expressionInfos:Me(this.expressionInfos),elements:Me(this.elements),title:this.title})}};g([S({type:String,json:{write:!0}})],cc.prototype,"description",void 0),g([S({json:{write:!0}})],cc.prototype,"elements",void 0),g([oi("elements")],cc.prototype,"castElements",null),g([nt("elements",["formElements"])],cc.prototype,"readElements",null),g([pt("elements")],cc.prototype,"writeElements",null),g([S({type:[Ake],json:{write:!0}})],cc.prototype,"expressionInfos",void 0),g([S({type:String,json:{write:!0}})],cc.prototype,"title",void 0),cc=EA=g([Q("esri.form.FormTemplate")],cc);const Uke=cc;var x2;const WS=_s()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Sse=WS.jsonValues.slice();PL(Sse,"orthometric");const cb=_s()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let uu=x2=class extends Ve{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return WS.write(e,t,i)}readHeightModel(e,t,i){return WS.read(e)||(i&&i.messages&&i.messages.push(Bke(e,{context:i})),null)}readHeightUnit(e,t,i){return cb.read(e)||(i&&i.messages&&i.messages.push(jG(e,{context:i})),null)}readHeightUnitService(e,t,i){return qee(e)||cb.read(e)||(i&&i.messages&&i.messages.push(jG(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new x2({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=a9e(t);return new x2({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new x2;return t.read(e,{origin:"web-scene"}),t}};function jG(e,t){return new mo("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Bke(e,t){return new mo("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}g([S({type:WS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Sse,default:"ellipsoidal"}}}})],uu.prototype,"heightModel",void 0),g([pt("web-scene","heightModel")],uu.prototype,"writeHeightModel",null),g([nt(["web-scene","service"],"heightModel")],uu.prototype,"readHeightModel",null),g([S({type:cb.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:cb.jsonValues,write:cb.write}}}})],uu.prototype,"heightUnit",void 0),g([nt("web-scene","heightUnit")],uu.prototype,"readHeightUnit",null),g([nt("service","heightUnit")],uu.prototype,"readHeightUnitService",null),g([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],uu.prototype,"vertCRS",void 0),g([nt("service","vertCRS",["vertCRS","ellipsoid","geoid"])],uu.prototype,"readVertCRS",null),uu=x2=g([Q("esri.geometry.HeightModelInfo")],uu);const E$=uu;function zG(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function Gke(e,t,i){if(!e&&!t||!i)return;const r=R1(i);VG(e,i,r),VG(t,i,r)}function VG(e,t,i){if(e)for(const r of e)qke(r.geometry,t,i)}function qke(e,t,i){if(ce(e)||!e.spatialReference||ms(e.spatialReference,t))return;const r=R1(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)zG(e,e.rings,r);else if("paths"in e)zG(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}let Hke=0;const HE=Ke.getLogger("esri.layers.graphics.sources.MemorySource");let Oh=class extends za.LoadableMixin(R3(Uu(vt))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=K(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);xk(e,this.layer.spatialReference,i);const r=K3.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const s=this.layer.objectIdField;for(const l of r.features){const d=l.attributes[s],y=this._idToClientGraphic.get(d);y&&(l.geometry=y.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new ge("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return xk(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:yi.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new ge("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const l=_=>"objectId"in _&&_.objectId!=null?_.objectId:"attributes"in _&&_.attributes[t]!=null?_.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const _ of e.deleteFeatures){const M=l(_);M!=null&&r.push(M)}const d=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const _ of e.updateFeatures)if(s.push(this._serializeFeature(_)),d){const M=l(_);M!=null&&d.set(M,_)}}Gke(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:y,featureEditResults:v}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:r});return this.fullExtent=y,i&&i.finish(v.uidToObjectId),this._updateClientGraphicIds(d,v),this._createEditsResult(v)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||ce(e))return;const i=[];for(const{geometry:r}of e)!K(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new ge("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let l=0;l<e.length;l++){const d=e[l],y=this._serializeFeature(d);!r&&K(d.geometry)&&(r=d.geometry.type),i[l]=y,t.set(`${y.uid}`,d)}const s=this;return{features:i,inferredGeometryType:r,finish(l){const d=s.sourceJSON.objectIdField;for(const y in l){const v=l[y],_=t.get(y);_&&(_.attributes||(_.attributes={}),v===-1?delete _.attributes[d]:_.attributes[d]=v,s._addIdToClientGraphic(_))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(Hke++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ce(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?go.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await Nee("MemorySourceWorker",{strategy:ke("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:s,hasZ:l,timeInfo:d}=this.layer,y=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const v=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",O=>{HE.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),O.preventDefault()}));const _={features:v.features,fields:t&&t.map(O=>O.toJSON()),geometryType:GV.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&s,hasZ:this.layerOrSourceGeometryType==="mesh"||l,objectIdField:r,spatialReference:y?null:i&&i.toJSON(),timeInfo:d?d.toJSON():null},M=await this._connection.invoke("load",_,{signal:e});for(const O of M.warnings)HE.warn(O.message,{layer:this.layer,warning:O});M.featureErrors.length&&HE.warn(`Encountered ${M.featureErrors.length} validation errors while loading features`,M.featureErrors);const k=M.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(v.inferredGeometryType)&&(k.geometryType=GV.toJSON(v.inferredGeometryType)),this.sourceJSON=k,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),v.finish(M.assignedObjectIds)}};g([WL({Type:pn,ensureType:er(pn)})],Oh.prototype,"itemType",void 0),g([S()],Oh.prototype,"type",void 0),g([S({constructOnly:!0})],Oh.prototype,"layer",void 0),g([S({readOnly:!0})],Oh.prototype,"workerGeometryType",null),g([S()],Oh.prototype,"sourceJSON",void 0),Oh=g([Q("esri.layers.graphics.sources.MemorySource")],Oh);function Wke(e){return"portalItem"in e}const Jke=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Wke(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return g([S({type:String})],t.prototype,"apiKey",null),t=g([Q("esri.layers.mixins.APIKeyMixin")],t),t},$se={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},Mse=Object.values($se),Ese=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Mse.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Kke=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${Mse.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Zke=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function vKe(e){return!!Ese.test(e)}function Zg(e){if(ce(e))return null;const t=en(e),i=t.path.match(Ese)||t.path.match(Kke);if(!i)return null;const[,r,s,l,d]=i,y=s.indexOf("/");return{title:rN(y!==-1?s.slice(y+1):s),serverType:$se[l.toLowerCase()],sublayer:d!=null&&d!==""?parseInt(d,10):null,url:{path:r}}}function Yke(e){const t=en(e).path.match(Zke);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function rN(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Xke(e,t){const i=[];if(e){const r=Zg(e);K(r)&&r.title&&i.push(r.title)}if(t){const r=rN(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function Tse(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",s="//features",l=(e=e.toLowerCase()).includes(t),d=e.includes(i)||e.includes(r)||e.includes(s);return l&&d}function Qke(e,t){return e&&vX(wX(e,t))}function eAe(e){let{url:t}=e;if(!t)return{url:t};t=wX(t,e.logger);const i=en(t),r=Zg(i.path);let s;if(K(r))r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const l=Yke(i.path);K(l)&&(t=l.serviceUrl,s=l.sublayerId)}return{url:vX(t),layerId:s}}function tAe(e,t,i,r,s){P1(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=I1(r.url,i,e.layerId.toString()))}function wKe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),l=t.includes("/wmsserver");return i&&(r||s||l)}const iAe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Zg(this.url);if(K(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Qke(i,Ke.getLogger(this.declaredClass)))}};return g([S()],t.prototype,"title",null),g([S({type:String})],t.prototype,"url",null),t=g([Q("esri.layers.mixins.ArcGISService")],t),t},UG={read:{reader:_R},write:{allowNull:!0,writer:xR}},nN=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return g([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),g([S({json:{read:!1,write:!1,origins:{"web-map":UG,"portal-item":UG}}})],t.prototype,"effect",void 0),t=g([Q("esri.layers.mixins.BlendLayer")],t),t},Ise=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return g([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=g([Q("esri.layers.mixins.CustomParametersMixin")],t),t};var TA;const WE=new Dt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),JE=new Dt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let hc=TA=class extends Ve{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:l,units:d,distance:y}=this;return new lo({geometry:Me(i),objectIds:Me(l),spatialRelationship:r,timeExtent:Me(s),where:t,units:d,distance:y,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:l,distance:d}=this;return new TA({geometry:Me(t),objectIds:Me(s),spatialRelationship:i,timeExtent:Me(r),where:e,units:l,distance:d})}};g([S({type:String,json:{write:!0}})],hc.prototype,"where",void 0),g([S({types:G1,json:{write:!0}})],hc.prototype,"geometry",void 0),g([S({type:WE.apiValues,json:{name:"spatialRel",read:{reader:WE.read},write:{allowNull:!1,writer:WE.write,overridePolicy(){return{enabled:K(this.geometry)}}}}})],hc.prototype,"spatialRelationship",void 0),g([S({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],hc.prototype,"distance",void 0),g([S({type:[Number],json:{write:!0}})],hc.prototype,"objectIds",void 0),g([S({type:JE.apiValues,json:{read:JE.read,write:{writer:JE.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],hc.prototype,"units",void 0),g([S({type:jc,json:{write:!0}})],hc.prototype,"timeExtent",void 0),hc=TA=g([Q("esri.layers.support.FeatureFilter")],hc);const rAe=hc;var IA;const BG={read:{reader:_R},write:{writer:xR,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},GG={read:{reader:_R},write:{writer:xR,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},qG={name:"showExcludedLabels",default:!0};let g0=IA=class extends Ve{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,s;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const l=Object.keys(i.filter);if(l.length>1||l[0]!=="where")return(r=t.messages)==null||r.push(new ge("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new ge("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new IA({filter:K(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};g([S({type:rAe,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?Xo(i,s,t):Xo(i,null,t)}}}})],g0.prototype,"filter",void 0),g([S({json:{write:!0,origins:{"web-map":BG,"portal-item":BG}}})],g0.prototype,"includedEffect",void 0),g([S({json:{write:!0,origins:{"web-map":GG,"portal-item":GG}}})],g0.prototype,"excludedEffect",void 0),g([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":qG,"portal-item":qG}}})],g0.prototype,"excludedLabelsVisible",void 0),g0=IA=g([Q("esri.layers.support.FeatureEffect")],g0);const nAe=g0,HG={write:{allowNull:!0}},Cse=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return g([S({type:nAe,json:{origins:{"web-map":HG,"portal-item":HG}}})],t.prototype,"featureEffect",void 0),t=g([Q("esri.layers.mixins.FeatureEffectLayer")],t),t},sAe={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function oAe(e){if(!e)return e;const{start:t,end:i}=e;return new jc({start:K(t)?f1(t,-t.getTimezoneOffset(),"minutes"):t,end:K(i)?f1(i,-i.getTimezoneOffset(),"minutes"):i})}function aAe(e){if(!e)return e;const{start:t,end:i}=e;return new jc({start:K(t)?f1(t,t.getTimezoneOffset(),"minutes"):t,end:K(i)?f1(i,i.getTimezoneOffset(),"minutes"):i})}var CA;let S2=CA=class extends Ve{async collectRequiredFields(e,t){return wo(e,t,this.expression)}clone(){return new CA({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};g([S({type:String,json:{write:!0}})],S2.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],S2.prototype,"title",void 0),S2=CA=g([Q("esri.layers.support.FeatureExpressionInfo")],S2);const WG=S2;function lAe(){const e=Object.keys(Bne);return e.sort(),e}const uAe=lAe();var kA;const Qx=_s()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),JG=new Dt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let bh=kA=class extends Ve{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):K(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new kA({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&iY(this.featureExpressionInfo,e.featureExpressionInfo)}};g([S({type:WG,json:{write:!0}})],bh.prototype,"featureExpressionInfo",void 0),g([nt("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],bh.prototype,"readFeatureExpressionInfo",null),g([pt("featureExpressionInfo",{featureExpressionInfo:{type:WG},"featureExpression.value":{type:[0]}})],bh.prototype,"writeFeatureExpressionInfo",null),g([S({type:Qx.apiValues,nonNullable:!0,json:{type:Qx.jsonValues,read:Qx.read,write:{writer:Qx.write,isRequired:!0}}})],bh.prototype,"mode",null),g([S({type:Number,json:{write:!0}})],bh.prototype,"offset",void 0),g([S({type:uAe,json:{type:String,read:JG.read,write:JG.write}})],bh.prototype,"unit",null),bh=kA=g([Q("esri.layers.support.ElevationInfo")],bh);const sN=bh,kse={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},T$={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},I$={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},Ase={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:P1}}},Ose={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},Lse={value:null,type:sN,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function bKe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const hb={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},cAe={...hb,json:{...hb.json,origins:{"web-document":{...hb.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Jb(t.layerDefinition.drawingInfo.transparency):void 0:Jb(t.drawingInfo.transparency)}}},hAe={type:jc,readOnly:!0,get(){var y,v;if(!((y=this.layer)!=null&&y.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(v=this.view)==null?void 0:v.timeExtent;let s=this.layer.timeExtent;e&&(s=aAe(s));let l=i?r&&s?r.intersection(s):r||s:s;if(!l||l.isEmpty||l.isAllTime)return l;t&&(l=l.offset(-t.value,t.unit)),e&&(l=oAe(l));const d=this._get("timeExtent");return l.equals(d)?d:l}},_Ke={type:yi,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=yi.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=Ct.fromJSON(t.spatialReference)),i}}}},read:!1}},Pse={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},pAe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},dAe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},Rse={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},Nse=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,l){(l&&l.layerContainerType==="ground"||i&&Cwe(this,s,{},l))&&(r[s]=i)}writeOperationalLayerType(i,r,s,l){!i||l&&l.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i||"Layer"}read(i,r){r&&(r.layer=this),Mwe(this,i,s=>super.read(i,s),r)}write(i,r){var d,y;if(r!=null&&r.origin){const v=`${r.origin}/${r.layerContainerType||"operational-layers"}`,_=sAe[v];let M=_&&_[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&v==="web-scene/operational-layers"&&(M=!1),!M)return(d=r.messages)==null||d.push(new ge("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${v}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),l=!!r&&!!r.messages&&!!r.messages.filter(v=>v instanceof ge&&v.name==="web-document-write:property-required").length;return j6(s==null?void 0:s.url)?((y=r==null?void 0:r.messages)==null||y.push(new ge("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:s}beforeSave(){}};return g([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),g([S(Rse)],t.prototype,"listMode",void 0),g([pt("listMode")],t.prototype,"writeListMode",null),g([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),g([pt("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),g([S(hb)],t.prototype,"opacity",void 0),g([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),g([pt([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),g([S({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=g([Q("esri.layers.mixins.OperationalLayer")],t),t};var AA;const KE=new Dt({asc:"ascending",desc:"descending"});let nm=AA=class extends Ve{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new AA({field:this.field,valueExpression:this.valueExpression,order:this.order})}};g([S({type:String,json:{write:!0}})],nm.prototype,"field",void 0),g([S({type:String,json:{write:!0}})],nm.prototype,"valueExpression",void 0),g([S({type:KE.apiValues,json:{read:KE.read,write:KE.write}})],nm.prototype,"order",void 0),nm=AA=g([Q("esri.layers.support.OrderByInfo")],nm);const Fse=nm;function fAe(e,t,i){if(!e)return null;const r=e.find(l=>!!l.field);if(!r)return null;const s=new Fse;return s.read(r,i),[s]}function yAe(e,t,i,r){const s=e.find(l=>!!l.field);s&&Xo(i,[s.toJSON()],t)}const Dse=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return g([S({type:[Fse],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:fAe},write:{target:"layerDefinition.orderBy",writer:yAe}}})],t.prototype,"orderBy",void 0),t=g([Q("esri.layers.mixins.OrderedLayer")],t),t},mAe=Ke.getLogger("esri.layers.mixins.PortalLayer"),gAe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new nS({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await Le(()=>import("./layersLoader.1a12577c.js").then(l=>l.l),["layersLoader.1a12577c.js","lazyLayerLoader.e3c4b311.js","jsonContext.42efcaec.js"],import.meta.url);return ur(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},r)}catch(s){throw Vs(s)||mAe.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(O3(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?vr==null?void 0:vr.findCredential(this.url):null;if(!r)return!0;const s=e5.credential===r?e5.user:await this._fetchEditingUser(i);return e5.credential=r,e5.user=s,ce(s)||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var M,k;const r=(k=(M=this.portalItem)==null?void 0:M.portal)==null?void 0:k.user;if(r)return r;const s=vr.findServerInfo(this.url);if(!(s!=null&&s.owningSystemUrl))return null;const l=`${s.owningSystemUrl}/sharing/rest`,d=Bn.getDefault();if(d&&d.loaded&&Il(d.restUrl)===Il(l))return d.user;const y=`${l}/community/self`,v=K(i)?i.signal:null,_=await F6(Bi(y,{authMode:"no-prompt",query:{f:"json"},signal:v}));return _.ok?lP.fromJSON(_.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,l=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Bn.getDefault());return s&&l&&!fX(l.restUrl,s.restUrl)?(r.messages&&r.messages.push(new ge("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return g([S({type:nS})],t.prototype,"portalItem",null),g([nt("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),g([pt("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),g([S({clonable:!1})],t.prototype,"resourceReferences",void 0),g([S({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=g([Q("esri.layers.mixins.PortalLayer")],t),t},e5={credential:null,user:null},g3=new vt,pb=new WeakMap;function vAe(e){jse(e)&&g3.push(e)}function wAe(e){jse(e)&&g3.includes(e)&&g3.remove(e)}function jse(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function zse(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:zse(t,e%t):0}let ZE=0,t5=0;function bAe(){var t;const e=Date.now();for(const i of g3)i.refreshInterval&&e-((t=pb.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(pb.set(i,e),i.refresh(e))}RY(()=>{const e=Date.now();let t=0;for(const i of g3)t=zse(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?pb.get(i)||pb.set(i,e):pb.delete(i);if(t!==t5){if(t5=t,clearInterval(ZE),t5===0)return void(ZE=0);ZE=setInterval(bAe,t5)}});const Vse=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=cv(()=>this.hasDataChanged()),this.when().then(()=>{vAe(this)},()=>{})}destroy(){wAe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){M1(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{Ke.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return g([S({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),g([S({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),g([S()],t.prototype,"refreshParameters",null),t=g([Q("esri.layers.mixins.RefreshableLayer")],t),t},oN=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&_Ae(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return g([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),g([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),g([S({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=g([Q("esri.layers.mixins.ScaleRangeLayer")],t),t};function _Ae(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const n1=_s()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var OA;let $2=OA=class extends Ve{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return qEe(this.value,this.unit,"milliseconds")}clone(){return new OA({value:this.value,unit:this.unit})}};g([S({type:Number,json:{write:!0},nonNullable:!0})],$2.prototype,"value",void 0),g([S({type:n1.apiValues,json:{type:n1.jsonValues,read:n1.read,write:n1.write},nonNullable:!0})],$2.prototype,"unit",void 0),$2=OA=g([Q("esri.TimeInterval")],$2);const v3=$2;var LA;let sm=LA=class extends Ve{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new LA({respectsDaylightSaving:e,timezone:t})}};g([S({type:Boolean,json:{write:!0}})],sm.prototype,"respectsDaylightSaving",void 0),g([nt("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],sm.prototype,"readRespectsDaylightSaving",null),g([S({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],sm.prototype,"timezone",void 0),sm=LA=g([Q("esri.layers.support.TimeReference")],sm);const xAe=sm;var PA;let As=PA=class extends Ve{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new jc({start:i,end:r})}writeFullTimeExtent(e,t){e&&K(e.start)&&K(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new v3({value:t.timeInterval,unit:n1.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new v3({value:t.defaultTimeInterval,unit:n1.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:l,fullTimeExtent:d,trackIdField:y,useTime:v}=this;return new PA({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:Me(l),fullTimeExtent:Me(d),trackIdField:y,useTime:v})}};g([S({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],As.prototype,"cumulative",void 0),g([S({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],As.prototype,"endField",void 0),g([S({type:jc,json:{write:{enabled:!0,allowNull:!0}}})],As.prototype,"fullTimeExtent",void 0),g([nt("fullTimeExtent",["timeExtent"])],As.prototype,"readFullTimeExtent",null),g([pt("fullTimeExtent")],As.prototype,"writeFullTimeExtent",null),g([S({type:Boolean,json:{write:!0}})],As.prototype,"hasLiveData",void 0),g([S({type:v3,json:{write:{enabled:!0,allowNull:!0}}})],As.prototype,"interval",void 0),g([nt("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],As.prototype,"readInterval",null),g([pt("interval")],As.prototype,"writeInterval",null),g([S({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],As.prototype,"startField",void 0),g([S({type:xAe,json:{write:{enabled:!0,allowNull:!0}}})],As.prototype,"timeReference",void 0),g([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],As.prototype,"trackIdField",void 0),g([S({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],As.prototype,"useTime",void 0),As=PA=g([Q("esri.layers.support.TimeInfo")],As);const Use=As,Bse=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const l=s.timeOffset,d=n1.fromJSON(s.timeOffsetUnits);return l&&d?new v3({value:l,unit:d}):null}set timeInfo(i){MP(i,this.fieldsIndex),this._set("timeInfo",i)}};return g([S({type:jc,json:{write:!1}})],t.prototype,"timeExtent",void 0),g([S({type:v3})],t.prototype,"timeOffset",void 0),g([nt("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),g([S({value:null,type:Use,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),g([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=g([Q("esri.layers.mixins.TemporalLayer")],t),t};var RA;let Lh=RA=class extends Ve{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:r,description:s}=this;return new RA({name:e,fields:t,isAscending:i,isUnique:r,description:s})}};g([S({constructOnly:!0})],Lh.prototype,"name",void 0),g([S({constructOnly:!0})],Lh.prototype,"fields",void 0),g([S({constructOnly:!0})],Lh.prototype,"isAscending",void 0),g([S({constructOnly:!0})],Lh.prototype,"isUnique",void 0),g([S({constructOnly:!0})],Lh.prototype,"description",void 0),Lh=RA=g([Q("esri.layers.support.FeatureIndex")],Lh);let tf=class extends Ve{constructor(){super(...arguments),this.type=null}};g([S({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],tf.prototype,"type",void 0),tf=g([Q("esri.layers.support.FeatureReduction")],tf);var NA;let om=NA=class extends Ve{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new NA({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};g([S({type:String,json:{write:!0}})],om.prototype,"statisticType",void 0),g([S({type:String,json:{write:!0}})],om.prototype,"onStatisticField",void 0),g([S({type:String,json:{write:!0}})],om.prototype,"onStatisticValueExpression",void 0),om=NA=g([Q("esri.layers.support.OutStatistic")],om);const SAe=om;var FA;let M2=FA=class extends Ve{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new FA({name:this.name,outStatistic:this.outStatistic.clone()})}};g([S({type:String,json:{write:!0}})],M2.prototype,"name",void 0),g([S({type:SAe,json:{write:!0}})],M2.prototype,"outStatistic",void 0),M2=FA=g([Q("esri.layers.support.AggregateField")],M2);const Gse=M2,aN="__begin__",lN="__end__",$Ae=new RegExp(aN,"ig"),MAe=new RegExp(lN,"ig"),KG=new RegExp("^"+aN,"i"),ZG=new RegExp(lN+"$","i"),JS='"',EAe=JS+" + ",TAe=" + "+JS;function IAe(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function CAe(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function uN(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=IAe(e.labelExpression),t.type="conventional"),t}function kAe(e){const t=uN(e);if(!t)return null;switch(t.type){case"conventional":return DA(t.expression);case"arcade":return t.expression}return null}function AAe(e){const t=uN(e);if(!t)return null;switch(t.type){case"conventional":return LAe(t.expression);case"arcade":return qse(t.expression)}return null}function DA(e){let t;return e?(t=Ac(e,i=>aN+'$feature["'+i+'"]'+lN),t=KG.test(t)?t.replace(KG,""):JS+t,t=ZG.test(t)?t.replace(ZG,""):t+JS,t=t.replace($Ae,EAe).replace(MAe,TAe)):t='""',t}const OAe=/^\s*\{([^}]+)\}\s*$/i;function LAe(e){const t=e.match(OAe);return t&&t[1].trim()||null}const PAe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,RAe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,NAe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function qse(e){if(!e)return null;let t=PAe.exec(e)||RAe.exec(e);return t?t[1]||t[3]:(t=NAe.exec(e),t?t[2]:null)}var jA;let cd=jA=class extends Ve{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?DA(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=DA(this.value)),e!=null&&(t[i]=e)}clone(){return new jA({expression:this.expression,title:this.title,value:this.value})}};g([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],cd.prototype,"expression",void 0),g([nt("expression",["expression","value"])],cd.prototype,"readExpression",null),g([pt("expression")],cd.prototype,"writeExpression",null),g([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],cd.prototype,"title",void 0),g([S({json:{read:!1,write:!1}})],cd.prototype,"value",void 0),cd=jA=g([Q("esri.layers.support.LabelExpressionInfo")],cd);const Hse=cd,Wse=[252,146,31,255],Jse={type:"esriSMS",style:"esriSMSCircle",size:6,color:Wse,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Kse={type:"esriSLS",style:"esriSLSSolid",width:.75,color:Wse},Zse={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},FAe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},DAe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},jAe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},zAe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},VAe=is.fromJSON(Jse),UAe=$o.fromJSON(Kse),BAe=Dc.fromJSON(Zse),GAe=W1.fromJSON(FAe);function qAe(e){if(ce(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return VAe;case"polyline":return UAe;case"polygon":case"extent":return BAe}return null}const xKe=is.fromJSON(DAe),SKe=$o.fromJSON(jAe),$Ke=Dc.fromJSON(zAe);var zA;const i5=new Dt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Yse(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function HAe(e){return(e==null?void 0:e.type)==="map-image"}function Xse(e){var t,i;return!!HAe(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function WAe(e){return Yse(e)||Xse(e.layer)}let Wr=zA=class extends Ve{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=GAe,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(r,s,l)=>{switch(s){case"=":return r==l;case"<>":return r!=l;case">":return r>l;case">=":return r>=l;case"<":return r<l;case"<=":return r<=l}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),l=r[3],d=i(t[r[4]],r[5],r[6]);switch(l){case"AND":return s&&d;case"OR":return s||d}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=CAe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=qse(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&Yse(r))e=new Hse({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return uN(this)}getLabelExpressionArcade(){return kAe(this)}getLabelExpressionSingleField(){return AAe(this)}hash(){return JSON.stringify(this)}clone(){return new zA({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Me(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Me(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};g([S({type:String,json:{write:!0}})],Wr.prototype,"name",void 0),g([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Wr.prototype,"allowOverrun",void 0),g([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Wr.prototype,"deconflictionStrategy",void 0),g([S({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&Xse(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Wr.prototype,"labelExpression",void 0),g([nt("labelExpression")],Wr.prototype,"readLabelExpression",null),g([pt("labelExpression")],Wr.prototype,"writeLabelExpression",null),g([S({type:Hse,json:{write:{overridePolicy:(e,t,i)=>WAe(i)?{allowNull:!0}:{enabled:!1}}}})],Wr.prototype,"labelExpressionInfo",void 0),g([pt("labelExpressionInfo")],Wr.prototype,"writeLabelExpressionInfo",null),g([S({type:i5.apiValues,json:{type:i5.jsonValues,read:i5.read,write:i5.write}})],Wr.prototype,"labelPlacement",void 0),g([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Wr.prototype,"labelPosition",void 0),g([S({type:Number})],Wr.prototype,"maxScale",void 0),g([pt("maxScale")],Wr.prototype,"writeMaxScale",null),g([S({type:Number})],Wr.prototype,"minScale",void 0),g([pt("minScale")],Wr.prototype,"writeMinScale",null),g([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Wr.prototype,"repeatLabel",void 0),g([S({type:Number,cast:Si,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wr.prototype,"repeatLabelDistance",void 0),g([S({types:y5e,json:{origins:{"web-scene":{types:m5e,write:MG,default:null}},write:MG,default:null}})],Wr.prototype,"symbol",void 0),g([S({type:Boolean,json:{write:!0}})],Wr.prototype,"useCodedValues",void 0),g([S({type:String,json:{write:!0}})],Wr.prototype,"where",void 0),Wr=zA=g([Q("esri.layers.support.LabelClass")],Wr);const r_=Wr;var VA;let cu=VA=class extends tf{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new VA({fields:Me(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Me(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:Me(this.popupTemplate),renderer:Me(this.renderer)})}};g([Mt({binning:"binning"})],cu.prototype,"type",void 0),g([S({type:Number,json:{write:!0}})],cu.prototype,"fixedBinLevel",void 0),g([S({type:[r_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],cu.prototype,"labelingInfo",void 0),g([S(I$)],cu.prototype,"labelsVisible",void 0),g([S(T$)],cu.prototype,"popupEnabled",void 0),g([S({type:H1,json:{name:"popupInfo",write:!0}})],cu.prototype,"popupTemplate",void 0),g([S({type:[Gse],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],cu.prototype,"fields",void 0),g([S({types:i_,json:{write:!0}})],cu.prototype,"renderer",void 0),cu=VA=g([Q("esri.layers.support.FeatureReductionBinning")],cu);const JAe=cu;var UA;let No=UA=class extends Ve{constructor(e){super(e),this.type="cluster",this.clusterRadius=Si("80px"),this.clusterMinSize=Si("12px"),this.clusterMaxSize=Si("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new UA({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Me(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Me(this.fields),renderer:Me(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:Me(this.popupTemplate)})}};g([S({type:["cluster"],readOnly:!0,json:{write:!0}})],No.prototype,"type",void 0),g([S({type:Number,cast:e=>e==="auto"?e:Si(e),json:{write:!0}})],No.prototype,"clusterRadius",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],No.prototype,"clusterMinSize",void 0),g([S({type:Number,cast:Si,json:{write:!0}})],No.prototype,"clusterMaxSize",void 0),g([S(T$)],No.prototype,"popupEnabled",void 0),g([S({type:H1,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],No.prototype,"popupTemplate",void 0),g([S({types:i_,json:{write:!0}})],No.prototype,"renderer",void 0),g([S({types:d5e})],No.prototype,"symbol",void 0),g([S({type:[r_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],No.prototype,"labelingInfo",void 0),g([S(I$)],No.prototype,"labelsVisible",void 0),g([S({type:[Gse],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],No.prototype,"fields",void 0),No=UA=g([Q("esri.layers.support.FeatureReductionCluster")],No);const Qse=No;var BA;let W9=BA=class extends tf{constructor(e){super(e),this.type="selection"}clone(){return new BA}};g([S({type:["selection"]})],W9.prototype,"type",void 0),W9=BA=g([Q("esri.layers.support.FeatureReductionSelection")],W9);const YG=W9,XG={key:"type",base:tf,typeMap:{selection:Qse}},eoe={types:{key:"type",base:tf,typeMap:{selection:YG,cluster:Qse,binning:JAe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:XG},"portal-item":{types:XG},"web-scene":{types:{key:"type",base:tf,typeMap:{selection:YG}}}}}},QG=new Dt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let hd=class extends ia(Ve){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};g([S({json:{write:!0}})],hd.prototype,"name",void 0),g([S({json:{write:!0}})],hd.prototype,"description",void 0),g([S({json:{read:QG.read,write:QG.write}})],hd.prototype,"drawingTool",void 0),g([S({json:{write:!0}})],hd.prototype,"prototype",void 0),g([S({json:{write:!0}})],hd.prototype,"thumbnail",void 0),hd=g([Q("esri.layers.support.FeatureTemplate")],hd);const C$=hd;let _h=class extends ia(Ve){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=MR(e[i]);return t}writeDomains(e,t){var r;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=(r=e[s])==null?void 0:r.toJSON());t.domains=i}};g([S({json:{write:!0}})],_h.prototype,"id",void 0),g([S({json:{write:!0}})],_h.prototype,"name",void 0),g([S({json:{write:!0}})],_h.prototype,"domains",void 0),g([nt("domains")],_h.prototype,"readDomains",null),g([pt("domains")],_h.prototype,"writeDomains",null),g([S({type:[C$],json:{write:!0}})],_h.prototype,"templates",void 0),_h=g([Q("esri.layers.support.FeatureType")],_h);const cN=_h;function KAe(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function eq(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function tq(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class ZAe{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const r of t){const s=r&&r.name;if(s){const l=iq(s);this._fieldsMap.set(s,r),this._fieldsMap.set(l,r),i.push(l),KAe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):TP(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),eq(r)||tq(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)eq(t)||tq(t)||t.nullable||O_e(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(iq(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function iq(e){return e.toLowerCase().trim()}const YAe=Ke.getLogger("esri.layers.support.fieldProperties");function toe(){return{fields:{type:[J3],value:null},fieldsIndex:{readOnly:!0,get(){return new ZAe(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||YAe.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return OQ(this.fieldsIndex,e)}}}}let am=class extends ia(Ve){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};g([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],am.prototype,"shapeAreaField",void 0),g([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],am.prototype,"shapeLengthField",void 0),g([S({type:String,json:{read:e=>d9e.read(e)||f9e.read(e)}})],am.prototype,"units",void 0),am=g([Q("esri.layers.support.GeometryFieldsInfo")],am);const XAe=am,QAe=/\[([^\[\]]+)\]/gi;function GA(e,t,i){return e?e.map(r=>{const s=new r_;if(s.read(r,i),s.labelExpression){const l=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(QAe,(d,y)=>`[${eOe(y,l)}]`)}return s}):null}function eOe(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}var qA;let lm=qA=class extends Ve{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new vt}clone(){return new qA({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};g([S({type:String,json:{write:!0}})],lm.prototype,"floorField",void 0),g([S({json:{read:!1,write:!1}})],lm.prototype,"viewAllMode",void 0),g([S({json:{read:!1,write:!1}})],lm.prototype,"viewAllLevelIds",void 0),lm=qA=g([Q("esri.layers.support.LayerFloorInfo")],lm);const tOe=lm,rq=new Dt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),nq=new Dt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ll=class extends ia(Ve){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};g([S({json:{read:rq.read,write:rq.write}})],ll.prototype,"cardinality",void 0),g([S({json:{read:!0,write:!0}})],ll.prototype,"composite",void 0),g([S({json:{read:!0,write:!0}})],ll.prototype,"id",void 0),g([S({json:{read:!0,write:!0}})],ll.prototype,"keyField",void 0),g([S({json:{read:!0,write:!0}})],ll.prototype,"keyFieldInRelationshipTable",void 0),g([S({json:{read:!0,write:!0}})],ll.prototype,"name",void 0),g([S({json:{read:!0,write:!0}})],ll.prototype,"relatedTableId",void 0),g([S({json:{read:!0,write:!0}})],ll.prototype,"relationshipTableId",void 0),g([S({json:{read:nq.read,write:nq.write}})],ll.prototype,"role",void 0),ll=g([Q("esri.layers.support.Relationship")],ll);const iOe=ll,hu=[];function rOe(e,t){if(Tse(e.url))return!0;const{wkid:i}=t;for(const r of hu){if(e.version>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}hu.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),hu.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),hu.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),hu.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),hu.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),hu.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),hu.push([10.61,()=>new Set([102497])]),hu.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),hu.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),hu.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function nOe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await F6(r.populateFromStyle());if(ur(i),s.ok===!1){const l=s.error;t&&t.messages&&t.messages.push(new mo("renderer:style-reference",`Failed to create unique value renderer from style reference: ${l.message}`,{error:l,context:t})),e.clear("renderer",t.origin)}}}const sOe=["oid","global-id"],oOe=["oid","global-id","guid"];function ioe({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},l){if(!i)return null;const d=pOe({editFieldsInfo:t,fields:i,objectIdField:r},l);if(!d.length)return null;const y=yOe({titleBase:s,fields:i,displayField:e}),v=fOe();return new H1({title:y,content:v,fieldInfos:d})}const aOe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],lOe=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!roe(e.name,t)&&(!i||e.name!==i)&&!sOe.includes(e.type)&&!aOe.some(s=>s.test(e.name));function uOe(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(cOe),e}function cOe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:sq(e)?-1:sq(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function roe(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:l}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),l&&l.toLowerCase()].includes(e.toLowerCase())}function hOe(e,t){return e.editable&&!oOe.includes(e.type)&&!roe(e.name,t)}function pOe({editFieldsInfo:e,fields:t,objectIdField:i},r){return uOe(t,(r==null?void 0:r.ignoreFieldTypes)||mOe).map(s=>new F3({fieldName:s.name,isEditable:hOe(s,e),label:s.alias,format:dOe(s),visible:lOe(s,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function dOe(e){switch(e.type){case"small-integer":case"integer":case"single":return new Vm({digitSeparator:!0,places:0});case"double":return new Vm({digitSeparator:!0,places:2});case"date":return new Vm({dateFormat:"long-month-day-year"});default:return e.type==="string"&&DQ(e.name)?new Vm({digitSeparator:!0,places:0}):null}}function fOe(){return[new Ug,new Zb]}function yOe(e){const t=T_e(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function sq(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const mOe=["geometry","blob","raster","guid","xml"],YE=new Dt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),gOe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Hr="FeatureLayer",oq=Ke.getLogger("esri.layers.FeatureLayer");function r5(e,t){return new ge("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function aq(e){return e&&e instanceof vt}function Rt(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function n5(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function vOe(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Ew(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}const XE=toe();function QE(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Qe=class extends Cse(nN(Dse(Bse(oN(Vse(iAe(Nse(gAe(tN(Ise(Jke(ia(zg))))))))))))){constructor(...e){super(...e),this._handles=new ir,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Ct.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(vt.ofType(Lh)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Oi(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=K(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this._initLayerProperties(r)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(O3).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new ge("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&Xo(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?en(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=I1(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=I1(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){aS(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){const s=mse(r,t,i)||void 0;return s||oq.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),s}if(t.defaultSymbol)return t.types&&t.types.length?new QR({defaultSymbol:e8(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(s=>({id:s.id,symbol:e8(s.symbol,s,i)}))}):new YR({symbol:e8(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(aq(t)&&this._resetMemorySource(t),aq(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof vt?new Oh({layer:this,items:e}):e:null}readSource(e,t){const i=K3.fromJSON(t.featureSet);return new Oh({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e=e&&e.map(l=>C$.fromJSON(l)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const s=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Xke(this.url,i):i;let l=i;if(!l&&this.url){const d=Zg(this.url);K(d)&&(l=d.title)}return l?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==l&&(l=s+" - "+l),rN(l)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e&&e.map(l=>(l=cN.fromJSON(l),this._fixTemplates(l.templates,r),this._fixTemplates(l.templates,s),l))}set url(e){const t=eAe({layer:this,url:e,nonStandardUrlAllowed:!0,logger:oq});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){tAe(this,e,null,t,r)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new ge(Hr,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new ge(Hr,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await Le(()=>import("./editingSupport.f709eb0e.js"),[],import.meta.url);return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return ioe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await gve(Le(()=>import("./FeatureLayerSource.cd9cc100.js"),["FeatureLayerSource.cd9cc100.js","executeForIds.ffb3ce11.js"],import.meta.url),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new lo,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const r=K(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,s=vse(this.definitionExpression,r);e.where=s||"1=1";const{timeOffset:l,timeExtent:d}=this;return e.timeExtent=l!=null&&d!=null?d.offset(-l.value,l.unit):d||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new ge(Hr,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new ge(Hr,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i.some(l=>{const{id:d}=l;return d!=null&&(d.toString()===r.toString()&&(s=l),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=ek.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new ge(Hr,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:r,globalIds:s,num:l,size:d,start:y,where:v}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const _=r&&r.length>1,M=i&&i.length,k=s&&s.length,O=d&&d.length;if(_||M||k||O||l||y||v)throw new ge(Hr,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||v))throw new ge(Hr,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new ge(Hr,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(lo.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(lo.from(e)||this.createQuery(),t);throw new ge(Hr,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(lo.from(e)||this.createQuery(),t);throw new ge(Hr,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(lo.from(e)||this.createQuery(),t);throw new ge(Hr,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(Ck.from(e),t);throw new ge(Hr,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(Ck.from(e),t);throw new ge(Hr,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(zx.from(e),t).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i});throw new ge(Hr,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(zx.from(e),t);throw new ge(Hr,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(zx.from(e),t);throw new ge(Hr,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(zx.from(e),t);throw new ge(Hr,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var l;t={...t,writeLayerSchema:(l=t==null?void 0:t.writeLayerSchema)!=null?l:this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(r5(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return s==null||s.push(r5(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s==null||s.push(r5(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return s==null||s.push(r5(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new ge(Hr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||rOe(this,e))}async save(e){return(await Le(()=>import("./featureLayerUtils.ef7dc2d5.js"),["featureLayerUtils.ef7dc2d5.js","originUtils.10ab3775.js","multiOriginJSONSupportUtils.2c03086c.js","arcgisLayers.c1c128e0.js","lazyLayerLoader.e3c4b311.js","jsonContext.42efcaec.js","portalItemUtils.6aff0acf.js"],import.meta.url)).save(this,e)}async saveAs(e,t){return(await Le(()=>import("./featureLayerUtils.ef7dc2d5.js"),["featureLayerUtils.ef7dc2d5.js","originUtils.10ab3775.js","multiOriginJSONSupportUtils.2c03086c.js","arcgisLayers.c1c128e0.js","lazyLayerLoader.e3c4b311.js","jsonContext.42efcaec.js","portalItemUtils.6aff0acf.js"],import.meta.url)).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var s;let r=(s=e.layerDefinition)==null?void 0:s.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var s,l;if(!e){const d=(l=(s=this.capabilities)==null?void 0:s.operations)!=null&&l.supportsSync?"Query,Sync":"Query";Xo("layerDefinition.capabilities",d,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=d)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new ge(Hr,`feature is missing the identifying attribute ${i}`)):Promise.reject(new ge(Hr,"'attributes' are required on a feature to query attachments")):Promise.reject(new ge(Hr,"A feature is required to add/delete/update attachments")):Promise.reject(new ge(Hr,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Bi(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),aS(this.renderer,this.fieldsIndex),MP(this.timeInfo,this.fieldsIndex),nOe(this,{origin:"service"})}async hasDataChanged(){var e,t;if((e=this.source)!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await((t=this.source)==null?void 0:t.refresh());if(K(r)&&(this.sourceJSON={...this.sourceJSON,...r},this.read(r,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await kke(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var t;const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((t=this.fields)==null?void 0:t.some(i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ge("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ge("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:Ew(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Ew(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Rt(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=gOe[r.name];s&&(i[s]=!!r.isEnabled)}),i}_readDataCapabilities(e){return{isVersioned:Rt(e,"isDataVersioned",!1),supportsAttachment:Rt(e,"hasAttachments",!1),supportsM:Rt(e,"hasM",!1),supportsZ:Rt(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:Rt(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(k=>k.trim()):[],r=this.url?Zg(this.url):null,s=i.includes(K(r)&&r.serverType==="MapServer"?"data":"query"),l=i.includes("editing")&&!t.datesInUnknownTimezone;let d=l&&i.includes("create"),y=l&&i.includes("delete"),v=l&&i.includes("update");const _=i.includes("changetracking"),M=t.advancedQueryCapabilities;return l&&!(d||y||v)&&(d=y=v=!0),{supportsCalculate:Rt(t,"supportsCalculate",!1),supportsTruncate:Rt(t,"supportsTruncate",!1),supportsValidateSql:Rt(t,"supportsValidateSql",!1),supportsAdd:d,supportsDelete:y,supportsEditing:l,supportsChangeTracking:_,supportsQuery:s,supportsQueryAnalytics:Rt(M,"supportsQueryAnalytic",!1),supportsQueryAttachments:Rt(M,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Rt(M,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Rt(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:v,supportsExceedsLimitStatistics:Rt(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var v;const t=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,r=e.archivingInfo,s=(v=this.url)==null?void 0:v.includes("MapServer"),l=!ke("mapserver-pbf-enabled")&&s&&this.version<10.81,d=Tse(this.url),y=(e.supportedQueryFormats||"").split(",").reduce((_,M)=>{const k=M.toLowerCase().trim();return k&&_.add(k),_},new Set);return{supportsStatistics:Rt(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Rt(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Rt(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:vOe(t),supportsCentroid:Rt(t,"supportsReturningGeometryCentroid",!1),supportsDistance:Rt(t,"supportsQueryWithDistance",!1),supportsDistinct:Rt(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Rt(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Rt(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:Rt(t,"supportsHavingClause",!1),supportsOrderBy:Rt(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Rt(t,"supportsPagination",!1),supportsQuantization:Rt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Rt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Rt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Rt(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Rt(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Rt(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Rt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Rt(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Rt(i,"allowOthersToQuery",!0),supportsHistoricMoment:Rt(r,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!l&&y.has("pbf"),supportsDisjointSpatialRelationship:Rt(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:Rt(t,"supportsQueryWithCacheHint",!1)||Ew(t,"query"),supportsDefaultSpatialReference:Rt(t,"supportsDefaultSR",!1),supportsCompactGeometry:d,maxRecordCountFactor:n5(e,"maxRecordCountFactor",void 0),maxRecordCount:n5(e,"maxRecordCount",void 0),standardMaxRecordCount:n5(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:n5(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=Rt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Rt(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Ew(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:Ew(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Rt(e,"allowGeometryUpdates",!0),supportsGlobalId:Rt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Rt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Rt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Rt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Rt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Rt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Rt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Rt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Rt(t,"allowOthersToUpdate",!0)}}};g([S({readOnly:!0,json:{read:!1}})],Qe.prototype,"capabilities",void 0),g([nt("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Qe.prototype,"readCapabilities",null),g([S({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Qe.prototype,"charts",void 0),g([S({readOnly:!0})],Qe.prototype,"createQueryVersion",null),g([S({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Qe.prototype,"copyright",void 0),g([S({type:Boolean})],Qe.prototype,"datesInUnknownTimezone",void 0),g([S({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Qe.prototype,"displayField",void 0),g([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Qe.prototype,"definitionExpression",void 0),g([S({types:h1,readOnly:!0})],Qe.prototype,"defaultSymbol",void 0),g([S({type:_u})],Qe.prototype,"dynamicDataSource",void 0),g([S({readOnly:!0})],Qe.prototype,"editFieldsInfo",void 0),g([S({type:Boolean})],Qe.prototype,"editingEnabled",null),g([nt(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Qe.prototype,"readEditingEnabled",null),g([nt("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Qe.prototype,"readEditingEnabledFromWebMap",null),g([pt(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Qe.prototype,"writeEditingEnabled",null),g([pt("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Qe.prototype,"writeEditingEnabledToWebMap",null),g([S({readOnly:!0})],Qe.prototype,"editingInfo",void 0),g([nt("editingInfo")],Qe.prototype,"readEditingInfo",null),g([S((()=>{const e=Me(Lse),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],Qe.prototype,"elevationInfo",void 0),g([S(eoe)],Qe.prototype,"featureReduction",void 0),g([S({...XE.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:QE}}}}})],Qe.prototype,"fields",void 0),g([S(XE.fieldsIndex)],Qe.prototype,"fieldsIndex",void 0),g([S({type:tOe,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Qe.prototype,"floorInfo",void 0),g([S({type:Uke,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Qe.prototype,"formTemplate",void 0),g([S({type:yi,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Qe.prototype,"fullExtent",void 0),g([S()],Qe.prototype,"gdbVersion",void 0),g([S({readOnly:!0,type:XAe,json:{read:{source:"geometryProperties"}}})],Qe.prototype,"geometryFieldsInfo",void 0),g([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:YE.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:QE,writer(e,t,i){const r=e?YE.toJSON(e):null;r&&Xo(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:YE.read}}})],Qe.prototype,"geometryType",void 0),g([S({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Qe.prototype,"hasM",void 0),g([S({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Qe.prototype,"hasZ",void 0),g([S({readOnly:!0,type:E$})],Qe.prototype,"heightModelInfo",void 0),g([S({type:Date})],Qe.prototype,"historicMoment",void 0),g([S(Pse)],Qe.prototype,"id",void 0),g([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Qe.prototype,"infoFor3D",void 0),g([S({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Qe.prototype,"isTable",void 0),g([nt("service","isTable",["type","geometryType"]),nt("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Qe.prototype,"readIsTable",null),g([pt("web-map","isTable")],Qe.prototype,"writeIsTable",null),g([S(I$)],Qe.prototype,"labelsVisible",void 0),g([S({type:[r_],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:GA},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:GA},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Qe.prototype,"labelingInfo",void 0),g([S((()=>{const e=Me(cAe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Xo(r,W6(t),i)}}},e})())],Qe.prototype,"opacity",void 0),g([S({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],Qe.prototype,"layerId",void 0),g([S(Ose)],Qe.prototype,"legendEnabled",void 0),g([S({type:["show","hide"],json:(()=>{const e=Me(Rse.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Qe.prototype,"listMode",void 0),g([S(pAe)],Qe.prototype,"minScale",void 0),g([nt("service","minScale",["minScale","effectiveMinScale"])],Qe.prototype,"readMinScale",null),g([S(dAe)],Qe.prototype,"maxScale",void 0),g([nt("service","maxScale",["maxScale","effectiveMaxScale"])],Qe.prototype,"readMaxScale",null),g([S({type:String})],Qe.prototype,"globalIdField",void 0),g([nt("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),nt("service","globalIdField",["globalIdField","fields"])],Qe.prototype,"readGlobalIdFieldFromService",null),g([S({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:QE}}}}})],Qe.prototype,"objectIdField",void 0),g([nt("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),nt("service","objectIdField",["objectIdField","fields"])],Qe.prototype,"readObjectIdFieldFromService",null),g([S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Qe.prototype,"operationalLayerType",void 0),g([S(XE.outFields)],Qe.prototype,"outFields",void 0),g([S({readOnly:!0})],Qe.prototype,"parsedUrl",null),g([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Qe.prototype,"path",void 0),g([S(T$)],Qe.prototype,"popupEnabled",void 0),g([S({type:H1,json:{name:"popupInfo",write:!0}})],Qe.prototype,"popupTemplate",void 0),g([S({readOnly:!0})],Qe.prototype,"defaultPopupTemplate",null),g([S({type:[iOe],readOnly:!0})],Qe.prototype,"relationships",void 0),g([S({types:i_,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:yse,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Qe.prototype,"renderer",null),g([nt("service","renderer",["drawingInfo.renderer","defaultSymbol"]),nt("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Qe.prototype,"readRenderer",null),g([S()],Qe.prototype,"sourceJSON",void 0),g([S({type:Boolean})],Qe.prototype,"returnM",void 0),g([S({type:Boolean})],Qe.prototype,"returnZ",void 0),g([S((()=>{const e=Me(kse);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Qe.prototype,"screenSizePerspectiveEnabled",void 0),g([S({clonable:!1})],Qe.prototype,"source",null),g([oi("source")],Qe.prototype,"castSource",null),g([nt("portal-item","source",["featureSet"]),nt("web-map","source",["featureSet"])],Qe.prototype,"readSource",null),g([S({readOnly:!0})],Qe.prototype,"serviceDefinitionExpression",void 0),g([nt("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Qe.prototype,"readServiceDefinitionExpression",null),g([S({type:Ct,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Qe.prototype,"spatialReference",void 0),g([S({type:Number})],Qe.prototype,"subtypeCode",void 0),g([S({type:String,json:{origins:{service:{read:!0}}}})],Qe.prototype,"subtypeField",void 0),g([S({type:[C$]})],Qe.prototype,"templates",void 0),g([nt("templates",["editFieldsInfo","creatorField","editorField","templates"])],Qe.prototype,"readTemplates",null),g([S({type:Use})],Qe.prototype,"timeInfo",void 0),g([S()],Qe.prototype,"title",void 0),g([nt("service","title",["name"]),nt("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Qe.prototype,"readTitle",null),g([nt("web-map","title",["layerDefinition.name","title"])],Qe.prototype,"readTitleFromWebMap",null),g([S({type:String})],Qe.prototype,"sublayerTitleMode",void 0),g([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Qe.prototype,"trackIdField",void 0),g([S({json:{read:!1}})],Qe.prototype,"type",void 0),g([S({type:String})],Qe.prototype,"typeIdField",void 0),g([nt("service","typeIdField"),nt("typeIdField",["layerDefinition.typeIdField"])],Qe.prototype,"readTypeIdField",null),g([S({type:[cN]})],Qe.prototype,"types",void 0),g([nt("service","types",["types"]),nt("types",["layerDefinition.types"])],Qe.prototype,"readTypes",null),g([S({readOnly:!0,json:{write:!1}})],Qe.prototype,"serverGens",void 0),g([S({type:vt.ofType(Lh),readOnly:!0})],Qe.prototype,"indexes",void 0),g([S(Ase)],Qe.prototype,"url",null),g([pt("url")],Qe.prototype,"writeUrl",null),g([S({readOnly:!0})],Qe.prototype,"userIsAdmin",void 0),g([S({json:{origins:{service:{read:!0}},read:!1}})],Qe.prototype,"version",void 0),g([nt("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Qe.prototype,"readVersion",null),g([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Qe.prototype,"visible",void 0),g([nt("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Qe.prototype,"readVisible",null),Qe=g([Q("esri.layers.FeatureLayer")],Qe);const e8=pv({types:kee}),noe=Qe,MKe=Object.freeze(Object.defineProperty({__proto__:null,default:noe},Symbol.toStringTag,{value:"Module"})),wOe=["$datastore","$map","$layer","$aggregatedfeatures"],bOe="esri.widgets.Feature.support.arcadeFeatureUtils",_Oe=Ke.getLogger(bOe);function xOe(e){return typeof e=="string"?H3(hR(e)):Array.isArray(e)?SOe(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?$Oe(e):e}function SOe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?H3(hR(t)):t}</li>`).join("")}</ul>`}function $Oe(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?H3(hR(i)):i}</td></tr>`}).join("")}</table>`}function MOe({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:s,map:l,graphic:d,interceptor:y}){i.forEach(v=>{const _=v.toLowerCase(),M={map:l,spatialReference:s.sr,interceptor:y};if(_==="$map"&&(r.vars[_]=t.convertMapToFeatureSetCollection(M)),_==="$layer"&&(r.vars[_]=t.convertFeatureLayerToFeatureSet({layer:d.sourceLayer,spatialReference:s.sr,interceptor:y})),_==="$datastore"&&(r.vars[_]=t.convertServiceUrlToWorkspace({url:d.sourceLayer.url,spatialReference:s.sr,interceptor:y})),_==="$aggregatedfeatures"){const k=d.layer,{fields:O,objectIdField:R,geometryType:D,spatialReference:z,displayField:B}=k,V=new noe({fields:O,objectIdField:R,geometryType:D,spatialReference:z,displayField:B,...k.type==="feature"?{templates:k.templates,typeIdField:k.typeIdField,types:k.types}:null,source:e});r.vars[_]=t.convertFeatureLayerToFeatureSet({layer:V,spatialReference:s.sr,interceptor:y})}})}function soe(){return Le(()=>import("./arcadeUtils.66d2e6b2.js").then(e=>e.t),[],import.meta.url)}async function EOe({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const s=await t.whenLayerView(r);if(!s.createQuery||!s.queryFeatures)return[];const l=s.createQuery();l.aggregateIds=[e.getObjectId()];const{features:d}=await s.queryFeatures(l);return d}async function ooe({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:s,graphic:l,view:d}){if(!e||!e.expression)return null;const y=t.createSyntaxTree(e.expression),v=wOe.filter(R=>t.hasVariable(y,R)),[_]=await Promise.all([EOe({graphic:l,view:d}),t.loadScriptDependencies(y,!0,v)]),M=t.getViewInfo({spatialReference:r}),k=t.createExecContext(l,M);k.interceptor=i,k.useAsync=!0,MOe({aggregatedFeatures:_,arcadeUtils:t,featureSetVars:v,context:k,viewInfo:M,map:s,graphic:l,interceptor:i});const O=t.createFunction(y,k);return t.executeAsyncFunction(O,k).catch(R=>_Oe.error("arcade-execution-error",{error:R,graphic:l,expressionInfo:e}))}async function TOe({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:s,view:l}){if(!e||!e.length)return{};const d=await soe(),y={};for(const M of e)y[`expression/${M.name}`]=ooe({expressionInfo:M,arcadeUtils:d,interceptor:r,spatialReference:t,map:s,graphic:i,view:l});const v=await Qr(y),_={};for(const M in v)_[M]=xOe(v[M].value);return _}const IOe=1;let ma=class extends Uu(st){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,s;const t=(r=this.contentElement)==null?void 0:r.type;(s=this.contentElementViewModel)==null||s.destroy();const i=t==="fields"?new a$:t==="media"?new r1:t==="text"?new kS:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=nR(this._compile,IOe,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:s,map:l,view:d,_abortController:y}=this;if(!(t&&i&&s&&l))return void this._set("contentElement",null);const v=await soe();if(y!==this._abortController)return;const _=await ooe({arcadeUtils:v,expressionInfo:t,graphic:i,interceptor:r,map:l,spatialReference:s,view:d});if(!_||_.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const M=await GR(_,y.signal),k=M==null?void 0:M.type,O=k==="media"?Qb.fromJSON(M):k==="text"?Bg.fromJSON(M):k==="fields"?Ug.fromJSON(M):null;this._set("contentElement",O)},this.handles.add([Pe(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Jt),Pe(()=>[this.contentElement],()=>this._createVM(),Jt)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};g([S()],ma.prototype,"_abortController",void 0),g([S({type:jQ})],ma.prototype,"expressionInfo",void 0),g([S({type:pn})],ma.prototype,"graphic",void 0),g([S({readOnly:!0})],ma.prototype,"contentElement",void 0),g([S({readOnly:!0})],ma.prototype,"contentElementViewModel",void 0),g([S()],ma.prototype,"interceptor",void 0),g([S()],ma.prototype,"spatialReference",null),g([S({readOnly:!0})],ma.prototype,"state",null),g([S()],ma.prototype,"map",null),g([S()],ma.prototype,"view",void 0),ma=g([Q("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],ma);const hN=ma,s5={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let J9=class extends rr{constructor(e,t){super(e,t),this.viewModel=new hN}initialize(){this.own(Pe(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),Jt))}destroy(){this._destroyContentWidget()}renderLoading(){return Z("div",{key:"loading-container",class:s5.loadingSpinnerContainer},Z("span",{class:this.classes(s5.iconLoading,s5.spinner)}))}render(){var t;const{state:e}=this.viewModel;return Z("div",{class:s5.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new Iie({viewModel:e}):i==="media"?new Ire({viewModel:e}):i==="text"?new T9({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};g([S({type:hN})],J9.prototype,"viewModel",void 0),J9=g([Q("esri.widgets.Feature.FeatureExpression")],J9);const COe=J9;class kOe{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var K9;const AOe=1,lq="content-view-models",aoe="esri.widgets.FeatureViewModel",OOe=Ke.getLogger(aoe),uq={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let Sr=K9=class extends st{constructor(e){super(e),this._handles=new ir,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=nR(this._graphicChanged,AOe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...uq},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add(Pe(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),Jt))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return K(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return iMe(iB(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return yie(this.graphic)}castAbilities(e){return{...uq,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof r1&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof r1&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof r1&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){Vs(i)||(this._error=i,OOe.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new Bg({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(lq),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:s}=e,l=r==null?void 0:r.type;s&&l&&(l==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,t))),l==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createMediaVMParams(r,t))),l==="text"&&s.set(this._createTextVMParams(r)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:s,spatialReference:l,view:d}=this,y=new hN({expressionInfo:i,graphic:r,interceptor:K9.interceptor,map:s,spatialReference:l,view:d});return this.contentViewModels[t]=y,this._handles.add(Pe(()=>y.contentElementViewModel,()=>this._setExpressionContentVM(y,t),Jt),lq),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:s}=e;return this.contentViewModels[t]=new dR({graphic:i,...this._compileTitleAndDesc({title:s,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:s}=e;return this.contentViewModels[t]=new kS({graphic:i,creator:r,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:l,_expressionAttributes:d}=this,{attributes:y}=s,v=l.global;return{title:t1({attributes:y,fieldInfoMap:i,globalAttributes:v,expressionAttributes:d,layer:r,text:e}),description:t1({attributes:y,fieldInfoMap:i,globalAttributes:v,expressionAttributes:d,layer:r,text:t})}}_createFieldsVMParams(e,t){var _;const{_effectivePopupTemplate:i,formattedAttributes:r}=this,s={...r.global,...r.content[t]},l=(_=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:_.filter(({fieldName:M})=>gie(M)||Uh(M)||s.hasOwnProperty(M)),d=i==null?void 0:i.expressionInfos,{description:y,title:v}=e;return{attributes:s,expressionInfos:d,fieldInfos:l,...this._compileTitleAndDesc({title:v,description:y})}}_compileFields(e,t){const i=e.clone(),r=new a$(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:s,formattedAttributes:l,_effectivePopupTemplate:d,relatedInfos:y,_sourceLayer:v,_expressionAttributes:_}=this,{attributes:M}=r,{description:k,mediaInfos:O,title:R}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:M,layer:v,fieldInfoMap:s,formattedAttributes:{...l.global,...l.content[t]},expressionAttributes:_,mediaInfos:O,popupTemplate:d,relatedInfos:y,...this._compileTitleAndDesc({title:R,description:k})}}_compileMedia(e,t){const i=e.clone(),r=new r1(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(e&&e.text){const{attributes:l}=t,d=this.formattedAttributes.global;e.text=t1({attributes:l,fieldInfoMap:i,globalAttributes:d,expressionAttributes:s,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new kS(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,s=t==null?void 0:t.editFieldsInfo;return r&&s?tMe(s,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,{attributes:l}=r,d=this.formattedAttributes.global;return t1({attributes:l,fieldInfoMap:t,globalAttributes:d,expressionAttributes:s,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return IS(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return IS(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s,spatialReference:l,map:d,view:y}=this,{content:{value:v},title:{value:_}}=await Qr({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!r)return;await sMe({graphic:r,popupTemplate:s,layer:i,spatialReference:l},e);const{expressionAttributes:{value:M}}=await Qr({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:TOe({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:l,graphic:r,map:d,interceptor:K9.interceptor,view:y})});t===this._featureAbortController&&r&&(this._expressionAttributes=M,this._graphicExpressionAttributes={...r.attributes,...M},this._set("formattedAttributes",this._createFormattedAttributes(v)),this._set("title",this._compileTitle(_)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(v)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:l,_sourceLayer:d,_fieldInfoMap:y,_graphicExpressionAttributes:v}=this;i.content[t]=fE({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:{...v,...e.attributes},layer:d,fieldInfoMap:y,relatedInfos:l})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:l,_fieldInfoMap:d,_graphicExpressionAttributes:y}=this;i.content[t]=fE({fieldInfos:e.fieldInfos,graphic:r,attributes:{...y,...e.attributes},layer:l,fieldInfoMap:d,relatedInfos:s})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:l,_graphicExpressionAttributes:d}=this,y=t==null?void 0:t.fieldInfos,v={global:fE({fieldInfos:y,graphic:i,attributes:d,layer:s,fieldInfoMap:l,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((_,M)=>{_.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:_,contentElementIndex:M,formattedAttributes:v}),_.type==="media"&&this._createMediaFormattedAttributes({contentElement:_,contentElementIndex:M,formattedAttributes:v})}),v}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,iB(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const l=K(s.associatedLayer)?await s.associatedLayer.load(i):s;if(!l)return;const d=t.filter(_=>_&&Uh(_.fieldName));if(!d||!d.length)return;t.forEach(_=>this._configureRelatedInfo(_,l));const y=await b8e({relatedInfos:r,layer:l},i);Object.keys(y).forEach(_=>{var O;const M=r.get(_.toString()),k=(O=y[_])==null?void 0:O.value;M&&k&&(M.layerInfo=k.data)});const v=await _8e({graphic:e,relatedInfos:r,layer:l},i);Object.keys(v).forEach(_=>{var M;y8e((M=v[_])==null?void 0:M.value,r.get(_.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=Ok(e.fieldName);if(!r)return;const{layerId:s,fieldName:l}=r;if(!s)return;const d=i.get(s.toString())||f8e(s,t);d&&(x8e({relatedInfo:d,fieldName:l,fieldInfo:e}),this.relatedInfos.set(s,d))}};Sr.interceptor=new kOe(lMe,uMe),g([S()],Sr.prototype,"_error",void 0),g([S()],Sr.prototype,"_featureAbortController",void 0),g([S({readOnly:!0})],Sr.prototype,"_effectivePopupTemplate",null),g([S({readOnly:!0})],Sr.prototype,"_fieldInfoMap",null),g([S({readOnly:!0})],Sr.prototype,"_sourceLayer",null),g([S()],Sr.prototype,"abilities",void 0),g([oi("abilities")],Sr.prototype,"castAbilities",null),g([S({readOnly:!0})],Sr.prototype,"content",void 0),g([S({readOnly:!0})],Sr.prototype,"contentViewModels",void 0),g([S({type:Boolean})],Sr.prototype,"defaultPopupTemplateEnabled",void 0),g([S({readOnly:!0})],Sr.prototype,"state",null),g([S({readOnly:!0})],Sr.prototype,"formattedAttributes",void 0),g([S({type:pn,value:null})],Sr.prototype,"graphic",null),g([S({readOnly:!0})],Sr.prototype,"lastEditInfo",void 0),g([S({readOnly:!0})],Sr.prototype,"relatedInfos",void 0),g([S()],Sr.prototype,"spatialReference",null),g([S({readOnly:!0})],Sr.prototype,"title",void 0),g([S()],Sr.prototype,"map",null),g([S({readOnly:!0})],Sr.prototype,"waitingForContent",null),g([S()],Sr.prototype,"view",void 0),Sr=K9=g([Q(aoe)],Sr);const pN=Sr,loe=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>AS(i)&&!i.destroyed?Z("div",{key:i},i.render()):i instanceof HTMLElement?Z("div",{key:i,bind:i,afterCreate:this._attachToNode}):Tie(i)?Z("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=g([Q("esri.widgets.Feature.ContentMixin")],t),t},as={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},cq={title:!0,content:!0,lastEditedInfo:!0};let us=class extends loe(rr){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...cq},this.map=null,this.view=null,this.viewModel=new pN}initialize(){this.own(Pe(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),Jt))}loadDependencies(){return Le(()=>import("./calcite-notice.73488bd3.js"),[],import.meta.url)}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...cq,...e}}render(){const{state:e}=this.viewModel,t=Z("div",{class:as.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return Z("div",{class:this.classes(as.base,as.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return Z("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?Z("div",{key:"error-title",slot:"title"},e.errorMessage):null,Z("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return Z("div",{key:"loading-container",class:as.loadingSpinnerContainer},Z("span",{class:this.classes(as.iconLoading,as.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?Z("div",{class:as.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?Z(Qd,{level:this.headingLevel,class:as.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?Z("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:Z("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?Z("div",{key:this._buildKey("attachments-element",e),class:this.classes(as.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:Z("div",{key:this._buildKey("expression-element",e),class:as.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?Z("div",{key:this._buildKey("custom-element",t),class:as.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:Z("div",{key:this._buildKey("fields-element",e),class:as.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:Z("div",{key:this._buildKey("media-element",e),class:as.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:s}=i,l=i.type==="edit"?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,d=pl(l,{date:r,user:s});return Z("div",{key:"edit-info-element",class:this.classes(as.lastEditedInfo,as.contentElement)},d)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?Z("div",{key:this._buildKey("text-element",t),class:this.classes(as.contentElement,as.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,l)=>{s.type==="attachments"&&(this._contentWidgets[l]=new wMe({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:r[l]})),s.type==="fields"&&(this._contentWidgets[l]=new Iie({viewModel:r[l]})),s.type==="media"&&(this._contentWidgets[l]=new Ire({viewModel:r[l]})),s.type==="text"&&(this._contentWidgets[l]=new T9({viewModel:r[l]})),s.type==="custom"&&(this._contentWidgets[l]=new T9({viewModel:r[l]})),s.type==="expression"&&(this._contentWidgets[l]=new COe({viewModel:r[l]}))},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new T9({viewModel:s}))}this.scheduleRender()}};g([tt("viewModel.graphic")],us.prototype,"graphic",void 0),g([tt("viewModel.defaultPopupTemplateEnabled")],us.prototype,"defaultPopupTemplateEnabled",void 0),g([S()],us.prototype,"headingLevel",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],us.prototype,"label",void 0),g([S(),Gi("esri/widgets/Feature/t9n/Feature")],us.prototype,"messages",void 0),g([S(),Gi("esri/t9n/common")],us.prototype,"messagesCommon",void 0),g([S(),Gi("esri/widgets/support/t9n/uriUtils")],us.prototype,"messagesURIUtils",void 0),g([tt("viewModel.spatialReference")],us.prototype,"spatialReference",void 0),g([tt("viewModel.title")],us.prototype,"title",void 0),g([S()],us.prototype,"visibleElements",void 0),g([oi("visibleElements")],us.prototype,"castVisibleElements",null),g([tt("viewModel.map")],us.prototype,"map",void 0),g([tt("viewModel.view")],us.prototype,"view",void 0),g([S({type:pN})],us.prototype,"viewModel",void 0),us=g([Q("esri.widgets.Feature")],us);const LOe=us;var uoe;const Z9=Symbol("anchorHandles");let v0=class extends bs.EventedAccessor{constructor(e){super(e),this[uoe]=new ir,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Z9].add([gs(()=>Uo(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),Pe(()=>this.screenLocation,(t,i)=>{K(t)&&K(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[Z9]=Oi(this[Z9])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&K(e)&&K(t)&&t.ready?t.toScreen(e):null}};uoe=Z9,g([S()],v0.prototype,"location",void 0),g([S()],v0.prototype,"screenLocation",null),g([S()],v0.prototype,"screenLocationEnabled",void 0),g([S()],v0.prototype,"view",void 0),v0=g([Q("esri.widgets.support.AnchorElementViewModel")],v0);const coe=v0,POe="esri.widgets.CompassViewModel";let Y9=class extends coe{constructor(e){super(e),this.visible=!1}};g([S()],Y9.prototype,"visible",void 0),Y9=g([Q(POe)],Y9);const hoe=Y9,t8={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let w0=class extends rr{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new hoe,this.visible=!1}initialize(){this.own([Pe(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,s=!e&&i,l={[t8.spinnerStart]:r,[t8.spinnerFinish]:s},d=this._getPositionStyles();return Z("div",{class:this.classes(t8.base,l),styles:d})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=zL(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(ce(t)||ce(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};g([tt("viewModel.location")],w0.prototype,"location",void 0),g([tt("viewModel.view")],w0.prototype,"view",void 0),g([S({type:hoe})],w0.prototype,"viewModel",void 0),g([tt("viewModel.visible")],w0.prototype,"visible",void 0),w0=g([Q("esri.widgets.Spinner")],w0);const ROe=w0;var Mn;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(Mn||(Mn={}));const HA={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function NOe(e,t,i){const r=Mn.size;let s=r,l=r;e<1?s*=.75:e>1&&(l*=1.25);const d=0,y=0;let v=r,_=r;return t&&i&&(s=l=v=_=0),[{type:"path",path:[{command:"M",values:[v,d]},{command:"L",values:[i?v:.875*v,d]},{command:"L",values:[i?s-.5*v:y,l-.5*_]},{command:"L",values:[s-.5*v,l-.5*_]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[v,d]},{command:"L",values:[v,t?d:.125*_]},{command:"L",values:[s-.5*v,t?l-.5*_:_]},{command:"L",values:[s-.5*v,l-.5*_]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*v,l-.5*_]},{command:"L",values:[i?s-.5*v:y,l-.5*_]},{command:"L",values:[i?s-.5*v:y,t?l-.5*_:_]},{command:"L",values:[s-.5*v,t?l-.5*_:_]},{command:"Z",values:[]}]}]}function FOe(e){const t=Mn.size,i=.5*e,r=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[s,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,r]},{command:"L",values:[t,r]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[s,.7*t*.5]},{command:"Z",values:[]}]}]}function DOe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function jOe(e,t){let i=t?Mn.tallSymbolWidth:e;const r=e,s=t?4:6;i<=Mn.size?i-=.5*s:i-=s;const l=0,d=0,y=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,l]},{command:"L",values:[i,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[d,.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[d,r-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*y]},{command:"L",values:[i,.5*y]},{command:"Z",values:[]}]}]}function zOe(e,t){let i=t?Mn.tallSymbolWidth:e;const r=e,s=t?4:6;i<=Mn.size?i-=.5*s:i-=s;const l=.5*i,d=.15*i,y=0,v=r-d;return[{type:"ellipse",cx:.5*i,cy:v,rx:l,ry:d},{type:"path",path:[{command:"M",values:[y,d]},{command:"L",values:[y,v]},{command:"L",values:[i,v]},{command:"L",values:[i,d]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:d,rx:l,ry:d}]}function VOe(e,t){let i=t?Mn.tallSymbolWidth:e;const r=e,s=t?4:6;i<=Mn.size?i-=.5*s:i-=s;const l=.15*i,d=r-l;return[{type:"ellipse",cx:.5*i,cy:d,rx:.5*i,ry:l},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,d]},{command:"L",values:[0,d]},{command:"Z",values:[]}]}]}function UOe(e){let t=e;const i=e,r=6;t<Mn.size?t-=.5*r:t-=r;const s=.15*t,l=0;return[{type:"path",path:[{command:"M",values:[0,l]},{command:"L",values:[t,l]},{command:"L",values:[.5*t,i-s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:l,rx:.5*t,ry:s}]}function BOe(e){let t=e;const i=e,r=4;t<Mn.size?t-=.5*r:t-=r;const s=0,l=0,d=t,y=i,v=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*d,s]},{command:"L",values:[d,.5*y-v]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*d,s]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"L",values:[l,.5*y-v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,.5*y-v]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"L",values:[.45*d,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*d,i]},{command:"L",values:[d,.5*y-v]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"Z",values:[]}]}]}function GOe(e){const t=e,i=2;let r=e;r<Mn.size?r-=.5*i:r-=i;const s=0,l=0;return[{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[t,r]},{command:"L",values:[.45*t,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[l,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,r]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[t,r]},{command:"Z",values:[]}]}]}function rf(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function EKe(e,t){if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const i=new ot(e);return new ot([rf(i.r,t),rf(i.g,t),rf(i.b,t),i.a])}function qOe(e){return"r"in e&&"g"in e&&"b"in e}function poe(e){return"h"in e&&"s"in e&&"v"in e}function doe(e){return"l"in e&&"a"in e&&"b"in e}function foe(e){return"l"in e&&"c"in e&&"h"in e}function HOe(e){return"x"in e&&"y"in e&&"z"in e}const WOe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],JOe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function yoe(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw"dimensions do not match";const l=e.length,d=e[0].length;let y=0;for(r=0;r<l;r++){for(y=0,s=0;s<d;s++)y+=e[r][s]*t[s];i.push(y)}return i}function moe(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=yoe(WOe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function dN(e){const t=yoe(JOe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function goe(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function voe(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function KOe(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let l=Math.atan2(r,i);return l=l>0?l:l+2*Math.PI,{l:t,c:s,h:l}}function ZOe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function YOe(e){return goe(moe(e))}function XOe(e){return dN(voe(e))}function QOe(e){return KOe(goe(moe(e)))}function eLe(e){return dN(voe(ZOe(e)))}function tLe(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),l=s-Math.min(t,i,r);let d=s,y=l===0?0:s===t?(i-r)/l%6:s===i?(r-t)/l+2:(t-i)/l+4,v=l===0?0:l/d;return y<0&&(y+=6),y*=60,v*=100,d*=100/255,{h:y,s:v,v:d}}function iLe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,l=s*(1-Math.abs(t%2-1));let d;switch(Math.floor(t)){case 0:d={r:s,g:l,b:0};break;case 1:d={r:l,g:s,b:0};break;case 2:d={r:0,g:s,b:l};break;case 3:d={r:0,g:l,b:s};break;case 4:d={r:l,g:0,b:s};break;case 5:case 6:d={r:s,g:0,b:l};break;default:d={r:0,g:0,b:0}}return d.r=Math.round(d.r+r-s),d.g=Math.round(d.g+r-s),d.b=Math.round(d.b+r-s),d}function n_(e){return qOe(e)?e:foe(e)?eLe(e):doe(e)?XOe(e):HOe(e)?dN(e):poe(e)?iLe(e):e}function fN(e){return poe(e)?e:tLe(n_(e))}function TKe(e){return doe(e)?e:YOe(n_(e))}function IKe(e){return foe(e)?e:QOe(n_(e))}function KS(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function rLe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function nLe(e,t,i,r,s,l){const d=new Float32Array(6);return d[0]=e,d[1]=t,d[2]=i,d[3]=r,d[4]=s,d[5]=l,d}function sLe(e,t){return new Float32Array(e,t,6)}function woe(e,t,i,r){const s=t[r],l=t[r+1];e[r]=i[0]*s+i[2]*l+i[4],e[r+1]=i[1]*s+i[3]*l+i[5]}function oLe(e,t,i,r=0,s=0,l=2){const d=s||t.length/l;for(let y=r;y<d;y++)woe(e,t,i,y*l)}Object.freeze(Object.defineProperty({__proto__:null,create:KS,clone:rLe,fromValues:nLe,createView:sLe,transform:woe,transformMany:oLe},Symbol.toStringTag,{value:"Module"}));function aLe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function k$(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function lLe(e,t,i,r,s,l,d){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=d,e}function A$(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],y=t[5];let v=i*l-r*s;return v?(v=1/v,e[0]=l*v,e[1]=-r*v,e[2]=-s*v,e[3]=i*v,e[4]=(s*y-l*d)*v,e[5]=(r*d-i*y)*v,e):null}function uLe(e){return e[0]*e[3]-e[1]*e[2]}function N0(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=i[0],M=i[1],k=i[2],O=i[3],R=i[4],D=i[5];return e[0]=r*_+l*M,e[1]=s*_+d*M,e[2]=r*k+l*O,e[3]=s*k+d*O,e[4]=r*R+l*D+y,e[5]=s*R+d*D+v,e}function s_(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=Math.sin(i),M=Math.cos(i);return e[0]=r*M+l*_,e[1]=s*M+d*_,e[2]=r*-_+l*M,e[3]=s*-_+d*M,e[4]=y,e[5]=v,e}function O$(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=i[0],M=i[1];return e[0]=r*_,e[1]=s*_,e[2]=l*M,e[3]=d*M,e[4]=y,e[5]=v,e}function Yg(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=i[0],M=i[1];return e[0]=r,e[1]=s,e[2]=l,e[3]=d,e[4]=r*_+l*M+y,e[5]=s*_+d*M+v,e}function boe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function _oe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function yN(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function cLe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function hLe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function pLe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function xoe(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function dLe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function fLe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function yLe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function mLe(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],d=e[4],y=e[5],v=t[0],_=t[1],M=t[2],k=t[3],O=t[4],R=t[5];return Math.abs(i-v)<=Ot*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-_)<=Ot*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(s-M)<=Ot*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-k)<=Ot*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(d-O)<=Ot*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(y-R)<=Ot*Math.max(1,Math.abs(y),Math.abs(R))}const gLe=N0,vLe=xoe;Object.freeze(Object.defineProperty({__proto__:null,copy:aLe,identity:k$,set:lLe,invert:A$,determinant:uLe,multiply:N0,rotate:s_,scale:O$,translate:Yg,fromRotation:boe,fromScaling:_oe,fromTranslation:yN,str:cLe,frob:hLe,add:pLe,subtract:xoe,multiplyScalar:dLe,multiplyScalarAndAdd:fLe,exactEquals:yLe,equals:mLe,mul:gLe,sub:vLe},Symbol.toStringTag,{value:"Module"}));const wLe="http://www.w3.org/2000/svg";let bLe=0,_Le=0;const hq=ke("android"),xLe=ke("chrome")||hq&&hq>=4?"auto":"optimizeLegibility",SLe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},$Le=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let xn={},ki={};const pq={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},MLe=Math.PI;let ELe=1;function Wm(e,t){const i=e*(MLe/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function Soe(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function mN(e,t,i,r){if(e){if(e.type==="circle")return Z("circle",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if(e.type==="ellipse")return Z("ellipse",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if(e.type==="rect")return Z("rect",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if(e.type==="image")return Z("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if(e.type==="path"){const s=typeof e.path!="string"?Soe(e.path):e.path;return Z("path",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:s})}if(e.type==="text")return Z("text",{"alignment-baseline":r.alignBaseline,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":xLe,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:e.x,y:e.y},e.text)}return null}function gN(e){const t={fill:"none",pattern:null,linearGradient:null};if(e){if("type"in e&&e.type==="pattern"){const i="patternId-"+ ++bLe;t.fill=`url(#${i})`,t.pattern={id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&e.type==="linear"){const i="linearGradientId-"+ ++_Le;t.fill=`url(#${i})`,t.linearGradient={id:i,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(r=>({offset:r.offset,color:r.color&&new ot(r.color).toString()}))}}else if(e){const i=new ot(e);t.fill=i.toString()}}return t}function vN(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new ot(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashArray&&(t.dashOffset=e.dashoffset),e.style)){let i=null;if(e.style in pq&&(i=pq[e.style]),Array.isArray(i)){i=i.slice(0);for(let r=0;r<i.length;++r)i[r]*=e.width;if(e.cap!=="butt"){for(let r=0;r<i.length;r+=2)i[r]-=e.width,i[r]<1&&(i[r]=1);for(let r=1;r<i.length;r+=2)i[r]+=e.width}i=i.join(",")}t.dashArray=i}return t}function $oe(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(i.align=e.align,i.alignBaseline=e.alignBaseline,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"),i}function Moe(e){const{pattern:t,linearGradient:i}=e;if(t)return Z("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},Z("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(i){const r=i.stops.map((s,l)=>Z("stop",{key:`${l}-stop`,offset:s.offset,"stop-color":s.color}));return Z("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},r)}return null}function TLe(e,t){if(!e)return null;const i=[];for(const r of e){const{shape:s,fill:l,stroke:d,font:y}=r,v=gN(l),_=vN(d),M=s.type==="text"?$oe(s,y):null;i.push(mN(s,v.fill,_,M))}return Z("mask",{id:t,maskUnits:"userSpaceOnUse"},Z("g",null,i))}function dq(e,t,i){return Yg(e,k$(e),[t,i])}function fq(e,t,i,r,s){return O$(e,k$(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-s*i+s,e}function ILe(e,t,i,r){const s=t%360*Math.PI/180;s_(e,k$(e),s);const l=Math.cos(s),d=Math.sin(s),y=e[4],v=e[5];return e[4]=y*l-v*d+r*d-i*l+i,e[5]=v*l+y*d-i*d-r*l+r,e}function Ks(e,t){xn&&"left"in xn?(xn.left>e&&(xn.left=e),xn.right<e&&(xn.right=e),xn.top>t&&(xn.top=t),xn.bottom<t&&(xn.bottom=t)):xn={left:e,bottom:t,right:e,top:t}}function yq(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Ks(t[r],t[r+1]);ki.x=t[i-2],ki.y=t[i-1];break;case"H":for(r=0;r<i;++r)Ks(t[r],ki.y);ki.x=t[i-1];break;case"V":for(r=0;r<i;++r)Ks(ki.x,t[r]);ki.y=t[i-1];break;case"m":{let s=0;for(("x"in ki)||(Ks(ki.x=t[0],ki.y=t[1]),s=2),r=s;r<i;r+=2)Ks(ki.x+=t[r],ki.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Ks(ki.x+=t[r],ki.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)Ks(ki.x+=t[r],ki.y);break;case"v":for(r=0;r<i;++r)Ks(ki.x,ki.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)Ks(ki.x+t[r],ki.y+t[r+1]),Ks(ki.x+t[r+2],ki.y+t[r+3]),Ks(ki.x+=t[r+4],ki.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Ks(ki.x+t[r],ki.y+t[r+1]),Ks(ki.x+=t[r+2],ki.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)Ks(t[r+5],t[r+6]);ki.x=t[i-2],ki.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)Ks(ki.x+=t[r+5],ki.y+=t[r+6])}}function mq(e,t,i){const r=SLe[e.toLowerCase()];let s;typeof r=="number"&&(r?t.length>=r&&(s={action:e,args:t.slice(0,t.length-t.length%r)},i.push(s),yq(s)):(s={action:e,args:[]},i.push(s),yq(s)))}function CLe(e){const t=(typeof e.path!="string"?Soe(e.path):e.path).match($Le),i=[];if(xn={},ki={},!t)return null;let r="",s=[];const l=t.length;for(let y=0;y<l;++y){const v=t[y],_=parseFloat(v);isNaN(_)?(r&&mq(r,s,i),s=[],r=v):s.push(_)}mq(r,s,i);const d={x:0,y:0,width:0,height:0};return xn&&"left"in xn&&(d.x=xn.left,d.y=xn.top,d.width=xn.right-xn.left,d.height=xn.bottom-xn.top),d}function Eoe(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const i=CLe(e);t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function Toe(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const l of e)i?(i.x=Math.min(i.x,l.x),i.y=Math.min(i.y,l.y),r=Math.max(r,l.x+l.width),s=Math.max(s,l.y+l.height)):(i=t,i.x=l.x,i.y=l.y,r=l.x+l.width,s=l.y+l.height);return i&&(i.width=r-i.x,i.height=s-i.y),i}function WA(e,t,i,r,s,l,d,y,v){let _=(d&&l?Wm(l,t):t)/2,M=(d&&l?Wm(l,i):i)/2;if(v){const q=v[0],J=v[1];_=(d&&l?Wm(l,q):q)/2,M=(d&&l?Wm(l,J):J)/2}const k=e.width+r,O=e.height+r,R=KS(),D=KS();let z=!1;if(s&&k!==0&&O!==0){const q=t!==i?t/i:k/O,J=t>i?t:i;let ne=1,re=1;isNaN(J)||(q>1?(ne=J/k,re=J/q/O):(re=J/O,ne=J*q/k)),N0(D,D,fq(R,ne,re,_,M)),z=!0}const B=e.x+(k-r)/2,V=e.y+(O-r)/2;if(N0(D,D,dq(R,_-B,M-V)),!z&&(k>t||O>i)){const q=k/t>O/i,J=(q?t:i)/(q?k:O);N0(D,D,fq(R,J,J,B,V))}return l&&N0(D,D,ILe(R,l,B,V)),y&&N0(D,D,dq(R,y[0],y[1])),`matrix(${D[0]},${D[1]},${D[2]},${D[3]},${D[4]},${D[5]})`}function kLe(e,t,i){const r=e==null?void 0:e.effects.find(_=>_.type==="bloom");if(!r)return null;const{strength:s,radius:l}=r,d=s>0?l:0,y=(s+d)*t,v=4*s+1;return Z("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},Z("feMorphology",{operator:"dilate",radius:(s+.5*d)*(5**(t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),Z("feGaussianBlur",{in:"dilate",stdDeviation:y/25,result:"blur"}),Z("feGaussianBlur",{in:"blur",stdDeviation:y/50,result:"intensityBlur"}),Z("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},Z("feFuncR",{type:"linear",slope:v}),Z("feFuncG",{type:"linear",slope:v}),Z("feFuncB",{type:"linear",slope:v})),Z("feMerge",null,Z("feMergeNode",{in:"intensityBlur"}),Z("feMergeNode",{in:"intensityBrightness"}),Z("feGaussianBlur",{stdDeviation:s/10})))}function Ioe(e,t,i,r={}){var _;const s=[],l=[],d=++ELe,y=kLe(r.effectView,t,d);let v=null;if(y){const M=(_=r.effectView)==null?void 0:_.effects.find(D=>D.type==="bloom"),k=(M.strength?M.strength+M.radius/2:0)/3,O=t+t*k,R=i+i*k;v=[Math.max(O,10),Math.max(R,10)]}for(let M=0;M<e.length;M++){const k=e[M],O=[],R=[];let D=0,z=0,B=0;for(const J of k){const{shape:ne,fill:re,stroke:ue,font:_e,offset:xe}=J;r.ignoreStrokeWidth||(D+=ue&&ue.width||0);const Ne=gN(re),Ce=vN(ue),Ge=ne.type==="text"?$oe(ne,_e):null;s.push(Moe(Ne)),O.push(mN(ne,Ne.fill,Ce,Ge)),R.push(Eoe(ne)),xe&&(z+=xe[0],B+=xe[1])}const V=WA(Toe(R),t,i,D,r.scale,r.rotation,r.useRotationSize,[z,B],v);let q=null;if(r.masking){const J=`mask-${M}`,ne=r.masking[M];s.push(TLe(ne,J)),q=`url(#${J})`}l.push(q?Z("g",{mask:q},Z("g",{transform:V},O)):Z("g",{transform:V},O))}return r.useRotationSize&&r.rotation&&(t=Wm(r.rotation,t),i=Wm(r.rotation,i)),y&&(t=v[0],i=v[1]),Z("svg",{xmlns:wLe,width:t,height:i,style:"display: block;"},y,Z("defs",null,s),y?Z("g",{filter:`url(#bloom${d})`},l):l)}const ALe=_S();function o_(e,t,i){const r=Math.ceil(t[0]),s=Math.ceil(t[1]);if(!e.some(d=>!!d.length))return null;const l=i&&i.node||document.createElement("div");return i.opacity!=null&&(l.style.opacity=i.opacity.toString()),i.effectView!=null&&(l.style.filter=p3(i.effectView)),ALe.append(l,Ioe.bind(null,e,r,s,i)),l}function OLe(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}function LLe(e,t,i){return e?Bi(e,{responseType:"image"}).then(r=>{const s=r.data,l=s.width,d=s.height,y=l/d;let v=t;if(i){const _=Math.max(l,d);v=Math.min(v,_)}return{image:s,width:y<=1?Math.ceil(v*y):v,height:y<=1?v:Math.ceil(v/y)}}):Promise.reject(new ge("renderUtils: imageDataSize","href not provided."))}function PLe(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function RLe(e,t,i,r,s){switch(s){case"multiply":e[t+0]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const l=fN({r:e[t+0],g:e[t+1],b:e[t+2]});l.h=r.h,l.s=r.s,l.v=l.v/100*r.v;const d=n_(l);e[t+0]=d.r,e[t+1]=d.g,e[t+2]=d.b,e[t+3]*=i[3];break}}}function NLe(e,t,i,r,s){return LLe(e,t,s).then(l=>{const d=l.width?l.width:t,y=l.height?l.height:t;if(l.image&&PLe(i,r)){let v=l.image.width,_=l.image.height;ke("edge")&&/\.svg$/i.test(e)&&(v-=1,_-=1);const M=OLe(d,y);M.drawImage(l.image,0,0,v,_,0,0,d,y);const k=M.getImageData(0,0,d,y),O=[i.r/255,i.g/255,i.b/255,i.a],R=fN(i);for(let D=0;D<k.data.length;D+=4)RLe(k.data,D,O,R,r);M.putImageData(k,0,0),e=M.canvas.toDataURL("image/png")}else{const v=vr&&vr.findCredential(e);if(v&&v.token){const _=e.includes("?")?"&":"?";e=`${e}${_}token=${v.token}`}}return{url:e,width:d,height:y}}).catch(()=>({url:e,width:t,height:t}))}let xy=null;const gq=[255,255,255];function vq(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function FLe(e,t,i){const{backgroundColor:r,outline:s,dotSize:l}=e,d=i&&i.swatchSize||Mn.size,y=.8,v=Math.round(d*d/l**2*y),_=window.devicePixelRatio,M=document.createElement("canvas"),k=d*_;M.width=k,M.height=k,M.style.width=M.width/_+"px",M.style.height=M.height/_+"px";const O=M.getContext("2d");if(r&&(O.fillStyle=r.toCss(!0),O.fillRect(0,0,k,k),O.fill()),O.fillStyle=t.toCss(!0),xy&&xy.length/2===v)for(let D=0;D<2*v;D+=2){const z=xy[D],B=xy[D+1];O.fillRect(z,B,l*_,l*_),O.fill()}else{xy=[];for(let D=0;D<2*v;D+=2){const z=vq(0,k),B=vq(0,k);xy.push(z,B),O.fillRect(z,B,l*_,l*_),O.fill()}}s&&(s.color&&(O.strokeStyle=s.color.toCss(!0)),O.lineWidth=s.width,O.strokeRect(0,0,k,k));const R=new Image(d,d);return R.src=M.toDataURL(),R}function DLe(e,t={}){const i=t.radius||40,r=2*Math.PI*i,s=e.length,l=r/s,d=[],y=c3(t.outline);y&&(y.width*=2),(y||t.backgroundColor)&&d.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:t.backgroundColor,stroke:y,offset:[0,0]});const v=t.values,_=v&&v.length===s&&v.reduce((D,z)=>D+z,0)===100,M=[0];for(let D=0;D<s;D++){const z=_?v[D]*r/100:null;_&&M.push(z+M[D]),d.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${z||l} ${r}`,dashoffset:"-"+(_?M[D]/2:D*(l/2)),color:e[D]},offset:[0,0]})}let k=null;const O=2*i+((y==null?void 0:y.width)||0),R=t.holePercentage;if(R){y&&d.push({shape:{type:"circle",cx:i,cy:i,r:i*R},fill:null,stroke:y,offset:[0,0]});const D=O/2;k=[[{shape:{type:"circle",cx:D,cy:D,r:D},fill:gq,stroke:y?{...y,color:gq}:null,offset:[0,0]},{shape:{type:"circle",cx:D,cy:D,r:i*R},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return o_([d],[O,O],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:k,rotation:-90})}function b0(e,t={}){const s=t.align==="horizontal",l=s?75:24,d=s?24:75,{width:y=l,height:v=d,gradient:_=!0}=t,M=window.devicePixelRatio,k=y*M,O=v*M,R=document.createElement("canvas");R.width=k,R.height=O,R.style.width=`${y}px`,R.style.height=`${v}px`;const D=R.getContext("2d"),z=s?k:0,B=s?0:O;if(_){const q=D.createLinearGradient(0,0,z,B),J=e.length,ne=J===1?0:1/(J-1);e.forEach((re,ue)=>q.addColorStop(ue*ne,re.toString())),D.fillStyle=q,D.fillRect(0,0,k,O)}else{const q=s?k/e.length:k,J=s?O:O/e.length;let ne=0,re=0;for(const ue of e)D.fillStyle=ue.toString(),D.fillRect(ne,re,q,J),ne=s?ne+q:0,re=s?0:re+J}const V=document.createElement("div");return V.style.width=`${y}px`,V.style.height=`${v}px`,jLe(V,t==null?void 0:t.effectList),V.appendChild(R),V}function jLe(e,t){if(!t)return;e.style.filter=p3(t);const i=t.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?e.style.marginLeft=`${Math.abs(r.offsetX)}px`:e.style.marginRight=`${r.offsetX}px`;break}}}async function Coe(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:i}=await Le(()=>import("./previewWebStyleSymbol.9c87786d.js"),[],import.meta.url);return i(e,Coe,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await Le(()=>Promise.resolve().then(()=>ODe),void 0,import.meta.url);return i(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await Le(()=>import("./previewSymbol2D.ce186592.js"),[],import.meta.url);return i(e,t)}case"cim":{const{previewCIMSymbol:i}=await Le(()=>import("./previewCIMSymbol.979cc8f2.js"),["previewCIMSymbol.979cc8f2.js","cimAnalyzer.52b380bb.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","quantizationUtils.d707a317.js","Rasterizer.19c8f18d.js"],import.meta.url);return i(e,t)}default:return}}function koe(e){return e&&"opacity"in e?e.opacity*koe(e.parent):1}async function zLe(e,t){var B;if(!e)return;const i=e.sourceLayer,r=(B=K(t)&&t.useSourceLayer?i:e.layer)!=null?B:i,s=koe(r);if(K(e.symbol)&&(!K(t)||t.ignoreGraphicSymbol!==!0)){const V=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:K(t)?t.webStyleCache:null}):e.symbol.clone();return bE(V,null,s),V}const l=K(t)&&t.renderer||r&&"renderer"in r&&r.renderer;let d=l&&"getSymbolAsync"in l?await l.getSymbolAsync(e,t):null;if(!d)return;if(d=d.type==="web-style"?await d.fetchSymbol({...t,cache:K(t)?t.webStyleCache:null}):d.clone(),!("visualVariables"in l)||!l.visualVariables||!l.visualVariables.length)return bE(d,null,s),d;if("arcadeRequiredForVisualVariables"in l&&l.arcadeRequiredForVisualVariables&&(ce(t)||ce(t.arcade))){const V={...t};V.arcade=await op(),t=V}const y=await Le(()=>Promise.resolve().then(()=>X1),void 0,import.meta.url),v=[],_=[],M=[],k=[];for(const V of l.visualVariables)switch(V.type){case"color":v.push(V);break;case"opacity":_.push(V);break;case"rotation":k.push(V);break;case"size":V.target||M.push(V)}const O=!!v.length&&v[v.length-1],R=O?y.getColor(O,e,t):null,D=!!_.length&&_[_.length-1];let z=D?y.getOpacity(D,e,t):null;if(s!=null&&(z=z!=null?z*s:s),bE(d,R,z),M.length){const V=y.getAllSizes(M,e,t);await J7e(d,V)}for(const V of k)K7e(d,y.getRotationAngle(V,e,t),V.axis);return d}class VLe{constructor(t,i){this.owner=i,this.properties={},this.afterDispatchHandle=null;for(const r in t){const s=t[r],l=new EY(s,null,null,2,2);this.properties[r]={pool:l,acquired:[]}}this.afterDispatchHandle=Ove(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const i=this.properties[t];for(const r of i.acquired)iV(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this.properties=null,this.owner=null}get(t){const i=this.owner._get(t),r=this.properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this.properties){const i=this.properties[t];let r=0;for(const s of i.acquired)iV(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}}const ULe=ke("mac")?"Meta":"Ctrl",L$={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)L$[e]=String.fromCharCode(e);for(let e=1;e<25;e++)L$[111+e]=`F${e}`;for(let e=65;e<91;e++)L$[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function BLe(e){if(e.key!==void 0)return C0(e);const t=L$[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function GLe(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class qLe{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const wq=Ke.getLogger("esri.views.input.InputHandler");class rs{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?wq.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const l=typeof t=="string"?new qLe(t,s):t,d=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},y=M=>{const k=this._incoming[M.match.eventType];if(k){const O=k.indexOf(M);k.splice(O,1),d(),this._manager&&this._manager.updateDependencies()}},v=new HLe(l,r,{onPause:y,onRemove:y,onResume:M=>{const k=this._incoming[M.match.eventType];k&&!k.includes(M)&&(k.push(M),d(),this._manager&&this._manager.updateDependencies())}});let _=this._incoming[l.eventType];return _||(_=[],this._incoming[l.eventType]=_),_.push(v),d(),this._manager&&this._manager.updateDependencies(),v}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new WLe(t,{onEmit:(r,s,l,d)=>{this._manager.emit(r.eventType,s,l,d)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):wq.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback(t),t.shouldStopPropagation()))break}}}class HLe{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class WLe{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class JLe extends rs{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{const r=i.data.native.pointerType==="touch";this._setValue(r?"touch":"mouse",i.data.x,i.data.y)})}_setValue(t,i,r){t===this._value&&this._x===i&&this._y===r||(this._value=t,this._x=i,this._y=r,this._onChange(t,i,r))}}const i8=Ke.getLogger("esri.views.input.InputManager");let pd=class extends st{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=ULe,this.latestPointerType="mouse",this._propertiesPool=new VLe({latestPointerLocation:ZLe},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=St.INTERNAL){if(this._nameToGroup[e])return void i8.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void i8.error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const l=r.handlers[s];this._handlers.push(l),l.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(d,y,v,_,M)=>{this._emitInputEvent(l.priorityIndex+1,d,y,v,M,_)},setPointerCapture:(d,y)=>{this._setPointerCapture(r,l,d,y)},setEventCallback:d=>{l.eventCallback=d},setUninstallCallback:d=>{l.uninstallCallback=d},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):i8.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let s=r.handler.hasSideEffects;if(!s){for(const l of r.handler.outgoingEventTypes)if(e.has(l)){s=!0;break}}if(s)for(const l of r.handler.incomingEventMatches){e.add(l.eventType);for(const d of l.keyModifiers)GLe(d)||t.add(d)}r.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const r=this._get("latestPointerLocation");if(ce(r)||r.x!==t||r.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=t,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const s=t;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const d=new Set;this._activeKeyModifiers.forEach(y=>{d.add(y)}),this._activeKeyModifiers=d,i=!0}},s=(d,y)=>{y&&!this._activeKeyModifiers.has(d)?(r(),this._activeKeyModifiers.add(d)):!y&&this._activeKeyModifiers.has(d)&&(r(),this._activeKeyModifiers.delete(d))};if(e==="key-down"||e==="key-up"){const d=t.key;this._keyModifiers.has(d)&&s(d,e==="key-down")}const l=t.native;s("Alt",!(!l||!l.altKey)),s("Ctrl",!(!l||!l.ctrlKey)),s("Shift",!(!l||!l.shiftKey)),s("Meta",!(!l||!l.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new JLe((e,t,i)=>this._setLatestPointer(e,t,i)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],St.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,St.INTERNAL)}_setPointerCapture(e,t,i,r){const s=e.name+"-"+t.priorityIndex,l=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,l),r?(l.add(s),l.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):l.has(s)&&(l.delete(s),l.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,s,l){const d=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),y=s!==void 0&&s,v={event:new KLe(t,i,d,l||this._activeKeyModifiers,y),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(v):this._doNewPropagation(v)}_doNewPropagation(e){this._currentPropagation={events:new cS,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),r=t.data&&t.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new cS;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const s=i.keyModifiers.filter(l=>r.keyModifiers.includes(l));if(s.length===i.keyModifiers.length!=(s.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};g([S({readOnly:!0})],pd.prototype,"hasPendingInputs",null),g([S()],pd.prototype,"eventSource",void 0),g([S()],pd.prototype,"recognizers",void 0),g([S({readOnly:!0})],pd.prototype,"latestPointerType",void 0),g([S({readOnly:!0})],pd.prototype,"latestPointerLocation",void 0),pd=g([Q("esri.views.input.InputManager")],pd);class KLe{constructor(t,i,r,s,l){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=l,this._propagationState=kd.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=kd.STOPPED}shouldStopPropagation(){return(this._propagationState&kd.STOPPED)!=0}async(t){this._propagationState|=kd.PAUSED;const i=(r,s)=>{this._propagationState&=~kd.PAUSED;const l=this._resumeCallback;if(this._resumeCallback=null,l&&l(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&kd.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var kd;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(kd||(kd={}));const St={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class ZLe{}function bq(e){return e&&typeof e.highlight=="function"}const P$={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},s1=new vv({id:"zoom-to-feature",title:"{messages.zoom}",className:P$.iconZoom}),JA=new vv({id:"remove-selected-feature",title:"{messages.remove}",className:P$.iconTrash}),Jm=new vv({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:P$.iconZoom}),Km=new vv({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:P$.iconBrowseClusteredFeatures}),YLe="esri.widgets.Popup.PopupViewModel",ZS=Ke.getLogger(YLe),XLe=e=>{const{event:t,view:i}=e,{action:r}=t,s=i&&i.popup;if(!r)return Promise.reject(new ge("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new ge("trigger-action:missing-arguments","view.popup is missing"));const{disabled:l,id:d}=r;if(!d)return Promise.reject(new ge("trigger-action:invalid-action","action.id is missing"));if(l)return Promise.reject(new ge("trigger-action:invalid-action","Action is disabled"));if(d===s1.id)return ePe(s.viewModel).catch(WT);if(d===Jm.id)return tPe(s.viewModel);if(d===Km.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,d===JA.id){s.close();const{selectedFeature:y}=s;if(!y)return Promise.reject(new ge(`trigger-action:${JA.id}`,"selectedFeature is required",{selectedFeature:y}));const{sourceLayer:v}=y;return v?v.remove(y):i.graphics.remove(y),Promise.resolve()}return Promise.resolve()};function Aoe(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function F0(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}function QLe(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(s=>{r=!s||!s.boundingBox||s.boundingBox[0]===s.boundingBox[3]&&s.boundingBox[1]===s.boundingBox[4]&&s.boundingBox[2]===s.boundingBox[5]}).catch(()=>{const s=new ge("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});ZS.error(s)}),r}return!0}async function ePe(e){const{location:t,selectedFeature:i,view:r,zoomFactor:s}=e,l=Aoe(e);if(!l){const _=new ge("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:r});throw ZS.error(_),_}const d=r.scale/s,y=e.get("selectedFeature.geometry")||t,v=y&&y.type==="point"&&QLe(i,r);s1.active=!0,s1.disabled=!0;try{await e.view.goTo({target:l,scale:v?d:void 0})}finally{s1.active=!1,s1.disabled=!1,e.zoomToLocation=null,v&&(e.location=y)}}async function tPe(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const y=new ge("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw ZS.error(y),y}if(!F0(t)){const y=new ge("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw ZS.error(y),y}const r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()],Jm.active=!0,Jm.disabled=!0;const{extent:d}=await s.queryExtent(l);await i.goTo({target:d}),Jm.active=!1,Jm.disabled=!1}async function iPe(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()];const{extent:d}=await s.queryExtent(l);e.selectedClusterBoundaryFeature.geometry=d,i.graphics.add(e.selectedClusterBoundaryFeature)}async function rPe(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()],Km.active=!0,Km.disabled=!0;const{features:d}=await s.queryFeatures(l);Km.active=!1,Km.disabled=!1,i.popup.open({features:[t].concat(d),featureMenuOpen:!0})}function nPe(e){const t=e.features.filter(i=>F0(i));t.length&&(e.features=t)}const R$=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return g([S()],t.prototype,"goToOverride",void 0),g([S()],t.prototype,"view",void 0),t=g([Q("esri.widgets.support.GoTo")],t),t},db=vt.ofType({key:"type",defaultKeyValue:"button",base:Z6,typeMap:{button:vv,toggle:XQ}}),sPe=()=>[s1.clone()],oPe=()=>[Jm.clone(),Km.clone()],Ooe="esri.widgets.Popup.PopupViewModel",o5=Ke.getLogger(Ooe);let ri=class extends R$(coe){constructor(e){super(e),this._handles=new ir,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new db,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new pn({symbol:new Dc({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([Pe(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),Pe(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),Pe(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),Pe(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),Pe(()=>this.location,e=>this._locationChange(e)),Pe(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),Pe(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),Pe(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),Pe(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>XLe({event:e,view:this.view})),gs(()=>!this.waitingForResult,()=>this._waitingForResultChange(),L1),Pe(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),Pe(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),gs(()=>!this.visible,()=>this.browseClusterEnabled=!1),Pe(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new db;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:s,selectedFeature:l}=this,d=s?i.concat(t):t,y=l&&(typeof l.getEffectivePopupTemplate=="function"&&l.getEffectivePopupTemplate(r)||l.popupTemplate),v=y&&y.actions,_=y&&y.overwriteActions?v:v?v.concat(d):d;return _&&_.filter(Boolean).forEach(M=>e.add(M)),e}get defaultActions(){const e=this._get("defaultActions")||new db;return e.removeAll(),e.addMany(F0(this.selectedFeature)?oPe():sPe()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:s}=this,l=r&&t.length;l&&i&&s===-1?this.selectedFeatureIndex=0:l&&s!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Wh(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=s=>{this._pendingPromises.has(t)&&this._updateFeatures(s),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=Aoe(this);if(!t){const i=new ge("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return o5.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const r=new ge("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return o5.error(r),Promise.reject(r)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of r)delete t[s];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){nPe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?F0(t)?(await iPe(this),await rPe(this)):o5.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):o5.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(s1.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(F0(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:s}=this;if(i===null)return;const l=((i-1)*r+t)%t,d=l+r;s.slice(l,d).forEach((y,v)=>{y&&!y.graphic&&(y.graphic=e[l+v])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),F0(e)?void 0:(e.symbol=await zLe(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,s=Promise.resolve(i),l=r.map(d=>d.promise);this.promises=[s,...l]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(F0(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),s=[];t.forEach((l,d)=>{var v,_;if(!l)return;let y=null;if(r.some((M,k)=>(M&&M.graphic===l&&(y=M,r.splice(k,1)),!!y)),y)s[d]=y;else{const M=new pN({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(v=this.view)==null?void 0:v.spatialReference,graphic:l===e?l:null,map:(_=this.view)==null?void 0:_.map,view:this.view});s[d]=M}}),r.forEach(l=>l&&!l.destroyed&&l.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},St.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:r,event:t});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(s=>{const{clientOnlyGraphics:l,promisesPerLayerView:d,location:y}=s,v=[Promise.resolve(l),...d.map(_=>_.promise)];return r.popup.open({location:y||i,promises:v}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return ce(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:s}=this;if(!(r&&i&&t&&s))return;const l=this._getHighlightLayer(r);if(!(l&&l instanceof zg))return;const d=this._getLayerView(i,l);this._highlightActiveFeaturePromise=d;const y=await d;if(!(y&&bq(y)&&this._highlightActiveFeaturePromise===d&&this.activeFeature&&this.highlightEnabled))return;const v=y.highlight(this._getHighlightTarget(r,l));this._handles.add(v,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:s}=this;if(!(t&&r&&i&&s))return;const l=this._getHighlightLayer(t);if(!(l&&l instanceof zg))return;const d=this._getLayerView(r,l);this._highlightSelectedFeaturePromise=d;const y=await d;if(!(y&&bq(y)&&this._highlightSelectedFeaturePromise===d&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const v=y.highlight(this._getHighlightTarget(t,l));this._handles.add(v,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};g([S()],ri.prototype,"featurePage",void 0),g([S()],ri.prototype,"isLoadingFeature",null),g([S({type:db})],ri.prototype,"actions",void 0),g([S({readOnly:!0})],ri.prototype,"active",null),g([S()],ri.prototype,"activeFeature",void 0),g([S({readOnly:!0})],ri.prototype,"allActions",null),g([S({type:Boolean})],ri.prototype,"defaultPopupTemplateEnabled",void 0),g([S()],ri.prototype,"autoCloseEnabled",void 0),g([S()],ri.prototype,"autoOpenEnabled",void 0),g([S()],ri.prototype,"browseClusterEnabled",void 0),g([S()],ri.prototype,"content",void 0),g([S({type:db,readOnly:!0})],ri.prototype,"defaultActions",null),g([S({readOnly:!0})],ri.prototype,"featureCount",null),g([S()],ri.prototype,"features",null),g([S()],ri.prototype,"featuresPerPage",void 0),g([S()],ri.prototype,"featureViewModelAbilities",void 0),g([S({readOnly:!0})],ri.prototype,"featureViewModels",void 0),g([S()],ri.prototype,"highlightEnabled",void 0),g([S()],ri.prototype,"includeDefaultActions",void 0),g([S({type:ut})],ri.prototype,"location",null),g([S({readOnly:!0})],ri.prototype,"pendingPromisesCount",null),g([S({readOnly:!0})],ri.prototype,"selectedClusterBoundaryFeature",void 0),g([S({readOnly:!0})],ri.prototype,"waitingForResult",null),g([S({readOnly:!0})],ri.prototype,"promiseCount",null),g([S()],ri.prototype,"promises",null),g([S({value:null,readOnly:!0})],ri.prototype,"selectedFeature",null),g([S({value:-1})],ri.prototype,"selectedFeatureIndex",null),g([S({readOnly:!0})],ri.prototype,"selectedFeatureViewModel",null),g([S({readOnly:!0})],ri.prototype,"state",null),g([S()],ri.prototype,"title",void 0),g([S()],ri.prototype,"updateLocationEnabled",void 0),g([S()],ri.prototype,"view",void 0),g([S()],ri.prototype,"visible",void 0),g([S()],ri.prototype,"zoomFactor",void 0),g([S()],ri.prototype,"zoomToLocation",void 0),g([S()],ri.prototype,"centerAtLocation",null),ri=g([Q(Ooe)],ri);const Loe=ri,_q="selected-index",aPe=0,xq="popup-spinner",Xe={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},Sq={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},$q="esri-popup";function th(e,t){return t===void 0?`${$q}__${e}`:`${$q}__${e}-${t}`}const Poe="esri.widgets.Popup",Mq=Ke.getLogger(Poe),Eq={closeButton:!0,featureNavigation:!0};let $t=class extends loe(rr){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new ir,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=nR(()=>this._displaySpinner(),aPe),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new Loe,this.visible=null,this.visibleElements={...Eq},this._addSelectedFeatureIndexHandle(),this.own([Pe(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),Pe(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),Pe(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),Pe(()=>{var i,r,s,l,d,y;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.size,(d=this.viewModel)==null?void 0:d.active,(y=this.viewModel)==null?void 0:y.location,this.alignment]},()=>this.reposition()),Pe(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),Pe(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),Pe(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),Pe(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i,r)),Pe(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),Pe(()=>{var i,r,s,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(l=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:l.state]},()=>this._setTitleFromFeatureWidget()),Pe(()=>{var i,r,s,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(l=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:l.state]},()=>this._setContentFromFeatureWidget()),gs(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Ko(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),Pe(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),Jt),Pe(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,r,s,l,d;return!!(this.selectedFeatureWidget?((t=(e=this.selectedFeatureWidget)==null?void 0:e.viewModel)==null?void 0:t.waitingForContent)||((r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.state)==="error"||((l=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:l.content):(d=this.viewModel)==null?void 0:d.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Sq}set dockOptions(e){const t={...Sq},i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const s={...t,...e},l={...t.breakpoint,...r},{breakpoint:d}=s;d===!0?s.breakpoint=l:typeof d=="object"&&(s.breakpoint={...l,...d}),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:r}=this.viewModel,s={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=s):this._feature=new LOe({headingLevel:i+1,viewModel:r,visibleElements:s}),this._feature):null}castVisibleElements(e){return{...Eq,...e}}blur(){const{active:e}=this.viewModel;e||Mq.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||Mq.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var s,l;this._handles.remove(_q);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var D,z,B,V;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:s,currentDockPosition:l}=this,{active:d}=this.viewModel,{menuActions:y}=r,v=d&&y.length>1&&e,_=d&&t,M=d&&!t,k=(z=(D=this.selectedFeature)==null?void 0:D.layer)==null?void 0:z.title,O=(V=(B=this.selectedFeature)==null?void 0:B.layer)==null?void 0:V.id,R={[Xe.alignTopCenter]:s==="top-center",[Xe.alignBottomCenter]:s==="bottom-center",[Xe.alignTopLeft]:s==="top-left",[Xe.alignBottomLeft]:s==="bottom-left",[Xe.alignTopRight]:s==="top-right",[Xe.alignBottomRight]:s==="bottom-right",[Xe.isDocked]:_,[Xe.shadow]:M,[Xe.isDockedTopLeft]:l==="top-left",[Xe.isDockedTopCenter]:l==="top-center",[Xe.isDockedTopRight]:l==="top-right",[Xe.isDockedBottomLeft]:l==="bottom-left",[Xe.isDockedBottomCenter]:l==="bottom-center",[Xe.isDockedBottomRight]:l==="bottom-right",[Xe.isFeatureMenuOpen]:i,[Xe.isActionsMenuOpen]:v};return Z("div",{class:this.classes(Xe.base,R),role:"presentation","data-layer-title":k,"data-layer-id":O,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},d?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return Z("span",{"aria-hidden":"true",class:this.classes(Xe.icon,Xe.iconLoading,Xe.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?Z("div",{key:th("loading-container"),role:"presentation",class:Xe.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=$l(this.container),t={[Xe.iconRightTriangleArrow]:e,[Xe.paginationPreviousIconRTL]:e,[Xe.iconLeftTriangleArrow]:!e,[Xe.paginationPreviousIconLTR]:!e};return Z("span",{"aria-hidden":"true",class:this.classes(Xe.icon,t)})}renderPreviousButton(){const{messages:e}=this;return Z("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(Xe.button,Xe.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=$l(this.container),t={[Xe.iconLeftTriangleArrow]:e,[Xe.paginationNextIconRTL]:e,[Xe.iconRightTriangleArrow]:!e,[Xe.paginationNextIconLTR]:!e};return Z("span",{"aria-hidden":"true",class:this.classes(Xe.icon,t)})}renderNextButton(){const{messages:e}=this;return Z("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(Xe.button,Xe.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:s}=this.viewModel;return Z("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(Xe.button,Xe.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[Xe.iconUndock]:e,[Xe.iconDock]:!e,[Xe.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[Xe.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[Xe.iconDockToTop]:!e&&t==="top-center",[Xe.iconDockToBottom]:!e&&t==="bottom-center"};return Z("span",{"aria-hidden":"true",class:this.classes(i,Xe.icon)})}renderDockButton(){var s,l,d;const{dockEnabled:e,messages:t}=this,i=(l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((d=this.dockOptions)==null?void 0:d.buttonEnabled)?Z("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(Xe.button,Xe.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:s}=this,l={[Xe.headerContainerButton]:i},d=Z(Qd,{level:this.headingLevel,class:Xe.headerTitle,innerHTML:e}),y=i?Z("button",{key:`${e}--collapsible`,id:t,title:r?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(Xe.headerContainer,l),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},d):Z("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(Xe.headerContainer,l)},d);return e?y:null}renderCloseIcon(){return Z("span",{"aria-hidden":"true",class:this.classes(Xe.icon,Xe.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?Z("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:Xe.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return Z("header",{class:Xe.header},this.renderTitle(),Z("div",{class:Xe.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:r}=this.viewModel;return t&&!i?Z("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:Xe.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:s}=this,l=i?s.close:s.open,{menuActions:d}=r;return d.length?Z("div",{key:th("actions-menu-button"),class:this.classes(Xe.button,Xe.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":l,title:l},Z("span",{"aria-hidden":"true",class:Xe.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:s}=r;return s.length&&i?Z("ul",{id:e,role:"menu","aria-labelledby":t,key:th("actions"),class:Xe.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(l=>this.renderAction({action:l,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?Z("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:Xe.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?Z("section",{key:th("navigation"),class:this.classes(Xe.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,s=!!i.length,l=!!r.length,d={[Xe.footerHasPagination]:e,[Xe.footerHasActions]:s,[Xe.footerHasActionsMenu]:l};return e||s?Z("div",{key:th("feature-buttons"),class:this.classes(Xe.footer,d)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=pl(e.selectedFeatures,{total:t.length});return Z("section",{key:th("menu"),class:Xe.featureMenu},Z("strong",{class:Xe.featureMenuHeader},r),Z("nav",{bind:this,class:Xe.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:HC},this.renderFeatureMenu(),Z("div",{class:Xe.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?Z("div",{class:Xe.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:Z("div",{key:th("pointer"),class:Xe.pointer,role:"presentation"},Z("div",{class:this.classes(Xe.pointerDirection,Xe.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:s,collapsible:l,hasContent:d,contentCollapsed:y,visibleElements:v}=this,{title:_}=this.viewModel,M=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",k=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",O={[Xe.shadow]:e,[Xe.isCollapsible]:l,[Xe.isCollapsed]:y};return Z("div",{class:this.classes(Xe.main,Xe.widget,O),tabIndex:v.closeButton?null:-1,role:"dialog","aria-labelledby":_?r:"","aria-describedby":d&&!y?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},M?this.renderFooter():null,M?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),k?this.renderFooter():null,k?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?Z("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return Z("span",{key:"text",class:Xe.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[Xe.iconLoading]:e.active,[Xe.rotating]:e.active,[Xe.icon]:!!t,[Xe.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),Z("span",{key:"icon","aria-hidden":"true",class:this.classes(Xe.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),s={[Xe.action]:t.type!=="toggle",[Xe.actionToggle]:t.type==="toggle",[Xe.actionToggleOn]:t.type==="toggle"&&t.value,[Xe.buttonDisabled]:t.disabled},l=[this.renderActionIcon(t),this.renderActionText(r)],d=i==="menu-item"?Z("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(Xe.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l):Z("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(Xe.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l);return t.visible?d:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:l}=this.viewModel,d=e===l,y={[Xe.featureMenuSelected]:d},v=d?Z("span",{key:th(`feature-menu-selected-feature-${s}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:Xe.iconCheckMark}):null,_=Z("span",{innerHTML:e.title||r.untitled});return Z("li",{role:"menuitem",tabIndex:-1,key:th(`feature-menu-feature-${s}`),class:this.classes(y,Xe.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},Z("span",{class:Xe.featureMenuTitle},_,v))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?Z("ol",{class:Xe.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:s}=e,l=i==null?void 0:i.attributes,d=s==="zoom-to-feature"?pl(e.title,{messages:t}):s==="remove-selected-feature"?pl(e.title,{messages:r}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?pl(e.title,{messages:t}):e.title;return d&&l?pl(d,l):d}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:s}=e,l=s||r?r:Xe.iconDefaultAction;return l&&i?pl(l,i):l}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?pl(r,i):r}_createFeatureUpdatedAnimation(){return qSe("enter",Xe.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(Pe(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(l=>l.visible),i=this._getInlineActionCount(),r=i===null,s=i===0;return{inlineActions:r?t.slice(0):s?new vt:t.slice(0,i),menuActions:r?new vt:s?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){C0(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){C0(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=C0(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const s=i.querySelectorAll("li"),l=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(r+1+l)%l].focus()):(e.stopPropagation(),s[(r-1+l)%l].focus())}_handleActionMenuItemKeyup(e){const t=C0(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,l=s.findIndex(v=>v.uid===r);if(!i)return;const d=i.querySelectorAll("li"),y=d.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),d[d.length-1].focus()):(e.stopPropagation(),d[0].focus()):(e.stopPropagation(),d[(l+1+y)%y].focus()):(e.stopPropagation(),d[(l-1+y)%y].focus())}_handleMainKeyup(e){const t=C0(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await mv(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=Pe(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,_q)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:s,view:l}=e;if(isNaN(i)||isNaN(t)||!l||!r)return!1;const d=l.padding;return s==="right"&&r.x+i/2>l.width-d.right||s==="left"&&r.x-i/2<d.left||s==="top"&&r.y-t<d.top||s==="bottom"&&r.y+t>l.height-d.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:s}=this,{screenLocation:l,view:d}=s;if(ce(l)||!d||!i)return"top-center";if(!this._isScreenLocationWithinView(l,d))return this._get("currentAlignment")||"top-center";function y(J){return parseInt(J.replace(/[^-\d\.]/g,""),10)}const v=r?window.getComputedStyle(r,null):null,_=v?y(v.getPropertyValue("max-height")):0,M=v?y(v.getPropertyValue("height")):0,{height:k,width:O}=i.getBoundingClientRect(),R=O+t,D=Math.max(k,_,M)+t,z=this._isOutsideView({popupHeight:D,popupWidth:R,screenLocation:l,side:"right",view:d}),B=this._isOutsideView({popupHeight:D,popupWidth:R,screenLocation:l,side:"left",view:d}),V=this._isOutsideView({popupHeight:D,popupWidth:R,screenLocation:l,side:"top",view:d}),q=this._isOutsideView({popupHeight:D,popupWidth:R,screenLocation:l,side:"bottom",view:d});return B?V?"bottom-right":"top-right":z?V?"bottom-left":"top-left":V?q?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return $l(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var d;if(e!=="auto")return e;const t=(d=this.viewModel)==null?void 0:d.view,i=$l(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},s=t.width-r.left-r.right,{breakpoints:l}=t;return l&&s<=l.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:s,_pointerOffsetInPx:l}=this,d=r/2,y=i.height-t,v=i.width-e,{padding:_}=this.view;return s==="bottom-center"?{top:t+l-_.top,left:e-d-_.left}:s==="top-left"?{bottom:y+l-_.bottom,right:v+l-_.right}:s==="bottom-left"?{top:t+l-_.top,right:v+l-_.right}:s==="top-right"?{bottom:y+l-_.bottom,left:e+l-_.left}:s==="bottom-right"?{top:t+l-_.top,left:e+l-_.left}:s==="top-center"?{bottom:y+l-_.bottom,left:e-d-_.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(ce(e)||!t)return;const s=this._calculateFullWidth(t),l=this._calculateAlignmentPosition(e.x,e.y,r,s);return l?{top:l.top!==void 0?`${l.top}px`:"auto",left:l.left!==void 0?`${l.left}px`:"auto",bottom:l.bottom!==void 0?`${l.bottom}px`:"auto",right:l.right!==void 0?`${l.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,s]=e,[l,d]=t,{width:y,height:v}=i;return r<=y&&l>y||r>y&&l<=y||s<=v&&d>v||s>v&&d<=v}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,s=i.top+i.bottom,l=[],d=[];l[0]=e[0]-r,l[1]=e[1]-s,d[0]=t[0]-r,d[1]=t[1]-s;const{dockOptions:y}=this,v=y.breakpoint;this._dockingThresholdCrossed(l,d,v)&&this._setDockEnabledForViewSize(y),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var y,v;const t=e.breakpoint,i=(v=(y=this.viewModel)==null?void 0:y.view)==null?void 0:v.ui;if(!i)return!1;const{width:r,height:s}=i;if(isNaN(r)||isNaN(s))return!1;const l=t.hasOwnProperty("width")&&r<=t.width,d=t.hasOwnProperty("height")&&s<=t.height;return l||d}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?pl(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,xq),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new ROe({view:e}),e.ui.add(this._spinner,{key:xq,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(l=>l.uid===t),s=i.getItemAt(r);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};g([S({readOnly:!0})],$t.prototype,"actionsMenuId",null),g([S({readOnly:!0})],$t.prototype,"actionsMenuButtonId",null),g([S({readOnly:!0})],$t.prototype,"featureMenuId",null),g([S({readOnly:!0})],$t.prototype,"titleId",null),g([S({readOnly:!0})],$t.prototype,"contentId",null),g([S({readOnly:!0})],$t.prototype,"hasContent",null),g([S({readOnly:!0})],$t.prototype,"featureNavigationVisible",null),g([S({readOnly:!0})],$t.prototype,"collapsible",null),g([S({readOnly:!0})],$t.prototype,"featureMenuVisible",null),g([S({readOnly:!0})],$t.prototype,"contentCollapsed",null),g([S({readOnly:!0})],$t.prototype,"dividedActions",null),g([tt("viewModel.actions")],$t.prototype,"actions",void 0),g([S()],$t.prototype,"actionsMenuOpen",null),g([S()],$t.prototype,"alignment",void 0),g([tt("viewModel.autoCloseEnabled")],$t.prototype,"autoCloseEnabled",void 0),g([tt("viewModel.autoOpenEnabled")],$t.prototype,"autoOpenEnabled",void 0),g([tt("viewModel.defaultPopupTemplateEnabled")],$t.prototype,"defaultPopupTemplateEnabled",void 0),g([tt("viewModel.content")],$t.prototype,"content",void 0),g([S()],$t.prototype,"collapsed",void 0),g([S()],$t.prototype,"collapseEnabled",void 0),g([S({readOnly:!0})],$t.prototype,"currentAlignment",null),g([S({readOnly:!0})],$t.prototype,"currentDockPosition",null),g([S()],$t.prototype,"dockOptions",null),g([S()],$t.prototype,"dockEnabled",void 0),g([tt("viewModel.featureCount")],$t.prototype,"featureCount",void 0),g([S()],$t.prototype,"featureMenuOpen",void 0),g([tt("viewModel.features")],$t.prototype,"features",void 0),g([tt("viewModel.goToOverride")],$t.prototype,"goToOverride",void 0),g([S()],$t.prototype,"headingLevel",void 0),g([tt("viewModel.highlightEnabled")],$t.prototype,"highlightEnabled",void 0),g([tt("viewModel.location")],$t.prototype,"location",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],$t.prototype,"label",void 0),g([S()],$t.prototype,"maxInlineActions",void 0),g([S(),Gi("esri/widgets/Popup/t9n/Popup")],$t.prototype,"messages",void 0),g([S(),Gi("esri/t9n/common")],$t.prototype,"messagesCommon",void 0),g([tt("viewModel.promises")],$t.prototype,"promises",void 0),g([tt("viewModel.selectedFeature")],$t.prototype,"selectedFeature",void 0),g([tt("viewModel.selectedFeatureIndex")],$t.prototype,"selectedFeatureIndex",void 0),g([S({readOnly:!0})],$t.prototype,"selectedFeatureWidget",null),g([S()],$t.prototype,"spinnerEnabled",void 0),g([tt("viewModel.title")],$t.prototype,"title",void 0),g([tt("viewModel.updateLocationEnabled")],$t.prototype,"updateLocationEnabled",void 0),g([tt("viewModel.view")],$t.prototype,"view",void 0),g([S({type:Loe}),yR(["triggerAction","trigger-action"])],$t.prototype,"viewModel",void 0),g([tt("viewModel.visible")],$t.prototype,"visible",void 0),g([S()],$t.prototype,"visibleElements",void 0),g([oi("visibleElements")],$t.prototype,"castVisibleElements",null),g([Dn()],$t.prototype,"_close",null),g([Dn()],$t.prototype,"_toggleDockEnabled",null),g([Dn()],$t.prototype,"_toggleFeatureMenu",null),g([Dn()],$t.prototype,"_toggleActionsMenu",null),g([Dn()],$t.prototype,"_triggerAction",null),g([Dn()],$t.prototype,"_selectFeature",null),g([Dn()],$t.prototype,"_next",null),g([Dn()],$t.prototype,"_previous",null),$t=g([Q(Poe)],$t);const Tq=$t,r8=[0,0];function lPe(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return r8[0]=i.left+t.pageXOffset,r8[1]=i.top+t.pageYOffset,r8}function Iq(e){e&&(yte(e),e.parentNode&&e.parentNode.removeChild(e))}function uPe(e){const t=document.createElement("div");return e.appendChild(t),t}const Tw=16,a5=750,cPe=512,hPe=2,pPe=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Tw,time:a5},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([Pe(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),Pe(()=>this.interacting,r=>{const{surface:s}=this;s&&s.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(Pe(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const r=this._get("container");if(r===i)return;const s="dom-size";if(this.handles.remove(s),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),Iq(this.root),this._set("root",null),IU(this.userContent,r),Iq(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const l=document.createElement("div");l.className="esri-view-user-storage",IU(i,l),i.appendChild(l),this._set("userContent",l);const d=document.createElement("div");d.className="esri-view-root",i.insertBefore(d,i.firstChild),this._set("root",d);const y=document.createElement("div");y.className="esri-view-surface",y.setAttribute("role","application"),y.tabIndex=0,d.appendChild(y),this._set("surface",y);const v=new DU;d.appendChild(v.surface),this._set("overlay",v),Pe(()=>v.needsRender,_=>{_&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Pg({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(Pe(()=>this.size,_=>{const[M,k]=_,O="esri-view-surface--inset-outline";M>=document.body.clientWidth||k>=document.body.clientHeight?y.classList.add(O):y.classList.remove(O)},Jt),s),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new Tq({view:this})}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const l=this.position;return i-=l[0],r-=l[1],s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const l=this.position;return i+=l[0],r+=l[1],s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([Pe(()=>this.root,r=>{i.container=r?uPe(r):null},Jt),Pe(()=>this.popup,(r,s)=>{const l="popup",d="manual";s&&i.remove(s,l),r&&(r.view=i.view,i.add(r,{key:l,position:d}))},Jt)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Tw,i.time=a5,this.handles.add([(()=>{const r=()=>{i.freq=Tw,i.time=a5};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),Pg({prepare:r=>{const s=this._measure(),l=this._freqInfo;if(l.time+=r.deltaTime,s&&(l.freq=Tw,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const d=this._position();l.freq=d||s?Tw:Math.min(a5,l.freq*hPe),!s&&l.freq>=cPe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const l=this.width,d=this.height;return r===l&&s===d?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:l,oldHeight:d,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=lPe(i);return(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return g([S({value:null,cast:i=>eR(i)})],t.prototype,"container",null),g([S({readOnly:!0})],t.prototype,"focused",null),g([S({readOnly:!0})],t.prototype,"height",void 0),g([S({type:Tq})],t.prototype,"popup",null),g([S({type:DU})],t.prototype,"overlay",void 0),g([S({readOnly:!0})],t.prototype,"position",void 0),g([S({readOnly:!0})],t.prototype,"resizing",void 0),g([S({readOnly:!0})],t.prototype,"root",void 0),g([S({value:null,readOnly:!0})],t.prototype,"size",null),g([S({readOnly:!0})],t.prototype,"surface",void 0),g([S({readOnly:!0})],t.prototype,"suspended",void 0),g([S()],t.prototype,"ui",void 0),g([S({readOnly:!0})],t.prototype,"userContent",void 0),g([S({readOnly:!0})],t.prototype,"width",void 0),g([S()],t.prototype,"widthBreakpoint",void 0),t=g([Q("esri.views.DOMContainer")],t),t};function dPe(e){return e&&"focus"in e}const fPe=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:l,layerViewsAndGraphics:d,clientOnlyGraphics:y}=await this._prepareFetchPopupFeatures(i,r),v=Promise.resolve(y),_=this._queryLayerPopupFeatures(l,d,r),M=_.map(k=>k.promise);return{location:s,clientOnlyGraphics:y,allGraphicsPromise:vve([v,...M]).then(k=>Array.from(new Set(k.flat()))),promisesPerLayerView:_}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:l,graphics:d})=>{const y={clientGraphics:d,event:K(s)?s.event:null,signal:K(s)?s.signal:null,defaultPopupTemplateEnabled:!!K(s)&&!!s.defaultPopupTemplateEnabled},v=l.fetchPopupFeatures(i,y);return{layerView:l,promise:v}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(K(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:l,location:d}=await this._popupHitTestGraphics(i,r),y=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:v,clientOnlyGraphics:_}=this._graphicsPerFetchPopupLayerView(s,y);return{clientOnlyGraphics:_,layerViewsAndGraphics:v,queryArea:l,location:d}}async _popupHitTestGraphics(i,r){const{results:s,mapPoint:l}=await this.popupHitTest(i),d=s.filter(v=>v.type==="graphic"&&this._isValidPopupGraphic(v.graphic,r)),y=d.length?d[0].mapPoint:null;return{clientGraphics:d.map(v=>v.graphic),queryArea:l,location:l||y}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),K(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return K(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],l=new Map,d=r.map(y=>{const v=[];return"layer"in y?l.set(y.layer,v):l.set(y.graphics,v),{layerView:y,graphics:v}});for(const y of i){const v=l.get(y.layer)||l.get(y.sourceLayer)||null;v?v.push(y):s.push(y)}return{layerViewsAndGraphics:d,clientOnlyGraphics:s}}};return t=g([Q("esri.views.PopupView")],t),t};Ke.getLogger("esri.core.support.OwningCollection");let fb=class extends Uu(vt){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{ce(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(vt.ofType(this.itemType.Type))(e):new vt(e)}};function KA(e,t){return{type:e,cast:iX,set(i){const r=T1(i,this._get(t),e);r.owner=this,this._set(t,r)}}}g([S()],fb.prototype,"owner",null),fb=g([Q("esri.core.support.OwningCollection")],fb);const yPe=Ke.getLogger("esri.support.AnalysesCollection");let YS=class extends fb{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{ce(t.item)||t.item.parent===this.owner&&(yPe.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};YS=g([Q("esri.support.AnalysesCollection")],YS);let m1=class extends fb{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};g([WL({Type:pn,ensureType:er(pn)})],m1.prototype,"itemType",void 0),m1=g([Q("esri.support.GraphicsCollection")],m1);let dd=class extends st{constructor(e){super(e),this.view=null,this.baseLayerViews=new vt,this.referenceLayerViews=new vt,this._loadingHandle=Pe(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},Jt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};g([S({constructOnly:!0})],dd.prototype,"view",void 0),g([S({readOnly:!0})],dd.prototype,"baseLayerViews",void 0),g([S({readOnly:!0})],dd.prototype,"referenceLayerViews",void 0),g([S({readOnly:!0})],dd.prototype,"suspended",null),g([S({type:Boolean,readOnly:!0})],dd.prototype,"updating",null),dd=g([Q("esri.views.BasemapView")],dd);const mPe=Ke.getLogger("esri.views.LayerViewManager");class gPe{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=sp(),this._started=!1,this.done=!1,Ll(this._controller.signal,()=>{const s=new ge("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var s,l;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let d,y;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)d=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ge("layer:view-not-supported","No layerview implementation was found");const M=await this.layerViewImporter.importLayerView(i);ur(t),d="default"in M?new M.default({layer:i,view:r}):new M({layer:i,view:r})}const v=()=>{y=po(y),d.destroyed||d.destroy(),d.layer=null,d.parent=null,d.view=null,this.done=!0};y=Ll(t,v),ur(t);try{await d.when()}catch(M){throw v(),M}if(!((l=(s=this._map)==null?void 0:s.allLayers)==null?void 0:l.includes(i)))return v(),void this._deferred.reject(new ge("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=d,i.emit("layerview-create",{view:r,layerView:d}),r.emit("layerview-create",{layer:i,layerView:d}),this.done=!0,this._deferred.resolve(d)}catch(d){i.emit("layerview-create-error",{view:r,error:d}),r.emit("layerview-create-error",{layer:i,error:d}),this.done=!0,this._deferred.reject(new ge("layerview:create-error","layerview creation failed",{layer:i,error:d}))}}}let ul=class extends Ng{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new pg,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(ce(this._workPromise)&&(this._workPromise=sp()),this.handles.remove("reschedule"),this.handles.add(hv(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,d,y;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),ce(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const i=new Fg({getCollections:()=>this._rootCollectionNames.map(v=>this.get(v)),getChildrenFunction:v=>v&&"layers"in v?v.layers:null});if(!i)return this._workPromise.resolve(),void(this._workPromise=null);for(const v of i)this._createLayerView(v);this._refreshCollections();for(const[v,_]of this._layerLayerViewInfoMap)i.includes(v)||(this._layerLayerViewInfoMap.delete(_.layer),_.destroy());const r=i.filter(v=>v.type==="group").map(v=>v.layers),s=[(l=t==null?void 0:t.ground)==null?void 0:l.layers,(d=t==null?void 0:t.basemap)==null?void 0:d.baseLayers,(y=t==null?void 0:t.basemap)==null?void 0:y.referenceLayers,t==null?void 0:t.layers,...r].filter(v=>!!v);this.handles.add(s.map(v=>this._watchUpdatingTracking.addOnCollectionChange(()=>v,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([Ko(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Pe(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),vl)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return K(this._workPromise)||this._watchUpdatingTracking.updating||R6(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new ge("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const s of e){const l=this._layerLayerViewInfoMap.get(s);if(!l||!l.layerView)continue;const d=l.layerView;d.layer=s,d.parent=i,t.getItemAt(r)!==d&&t.splice(r,0,d),s.layers&&this._populateLayerViewsOwners(s.layers,d.layerViews,d),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new gPe(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,s;i&&(Vs(i)||i.name==="cancelled:layerview-create")||mPe.error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(s=e.id)!=null?s:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};g([S()],ul.prototype,"_workPromise",void 0),g([S({readOnly:!0})],ul.prototype,"_watchUpdatingTracking",void 0),g([S({readOnly:!0})],ul.prototype,"_layersToLayerViews",null),g([S({readOnly:!0})],ul.prototype,"_rootCollectionNames",null),g([S()],ul.prototype,"layerViewImporter",void 0),g([S()],ul.prototype,"supportsGround",void 0),g([S({readOnly:!0})],ul.prototype,"updating",null),g([S({readOnly:!0})],ul.prototype,"updatingRemaining",null),g([S({constructOnly:!0})],ul.prototype,"view",void 0),ul=g([Q("esri.views.LayerViewManager")],ul);const vPe=ul;let ga=class extends st{constructor(e){super(e),this.factor=1.5,this.offset=Un(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};g([S({type:Number})],ga.prototype,"factor",void 0),g([S({nonNullable:!0})],ga.prototype,"offset",void 0),g([S()],ga.prototype,"position",void 0),g([S({type:Number,range:{min:0}})],ga.prototype,"size",void 0),g([S()],ga.prototype,"maskUrl",void 0),g([S()],ga.prototype,"maskEnabled",void 0),g([S()],ga.prototype,"overlayUrl",void 0),g([S()],ga.prototype,"overlayEnabled",void 0),g([S({readOnly:!0})],ga.prototype,"version",null),g([S({type:Boolean})],ga.prototype,"visible",void 0),ga=g([Q("esri.views.Magnifier")],ga);const Roe=ga;let X9=class extends st{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((r,s)=>this._tasks.push(new Cq(r,s,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((r,s)=>this._tasks.unshift(new Cq(r,s,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=Du(t.signal);if(i&&!t.abortCallback)t.reject(Cr());else{const r=i?t.abortCallback(Cr()):t.callback(e);dp(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=Cr();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};g([S()],X9.prototype,"running",void 0),X9=g([Q("esri.layers.support.PromiseQueue")],X9);class Cq{constructor(t,i,r,s,l){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=l}}let E2=class extends st{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};g([S()],E2.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),g([S()],E2.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),E2=g([Q("esri.views.support.DebugFlags")],E2);const wPe=new E2,bPe=Ke.getLogger("esri.views.support.Scheduler");var Xt;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Xt||(Xt={}));const wc=0,kq=new Map([[Xt.RESOURCE_CONTROLLER,wc],[Xt.SLIDE,wc],[Xt.STREAM_DATA_LOADER,wc],[Xt.ELEVATION_QUERY,wc],[Xt.TERRAIN_SURFACE,1],[Xt.SURFACE_GEOMETRY_UPDATES,1],[Xt.GRAPHICS_CORE,2],[Xt.I3S_CONTROLLER,2],[Xt.POINT_CLOUD_LAYER,2],[Xt.FEATURE_TILE_FETCHER,2],[Xt.OVERLAY,4],[Xt.STAGE,4],[Xt.GRAPHICS_DECONFLICTOR,4],[Xt.FILTER_VISIBILITY,4],[Xt.SCALE_VISIBILITY,4],[Xt.FRUSTUM_VISIBILITY,4],[Xt.POINT_OF_INTEREST_FREQUENT,6],[Xt.POINT_OF_INTEREST_INFREQUENT,30],[Xt.LABELER,8],[Xt.FEATURE_QUERY_ENGINE,8],[Xt.FEATURE_TILE_TREE,16],[Xt.FEATURE_TILE_TREE_ACTIVE,wc],[Xt.ELEVATION_ALIGNMENT,12],[Xt.TEXT_TEXTURE_ATLAS,12],[Xt.CLOUDS_GENERATOR,12],[Xt.TEXTURE_UNLOAD,12],[Xt.LINE_OF_SIGHT_TOOL,16],[Xt.LINE_OF_SIGHT_TOOL_INTERACTIVE,wc],[Xt.SNAPPING,wc],[Xt.SHADOW_ACCUMULATOR,30]]);function Aq(e){return kq.has(e)?kq.get(e):typeof e=="number"?e:1}var _a;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(_a||(_a={}));const Oq=6.5,Lq=1,_Pe=30,Pq=1e3/30,Rq=100,Nq=.9;var ZA,Nf;(function(e){let t=class extends st{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new q2("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=_a.INTERACTING,this._tasks=new l1,this._runQueue=new l1,this._load=0,this._idleStateCallbacks=new l1,this._idleUpdatesStartFired=!1,this._maxReschedule=l5,this._forceTask=!1,this._debug=!1,this._debugHandle=Pe(()=>wPe.SCHEDULER_LOG_SLOW_TASKS,d=>this._debug=d,Jt);for(const d of Object.keys(Xt))this.performanceInfo.tasks.set(Xt[d],new q2(Xt[d]));let s;const l=this;this._test={get state(){return hn(s,l._state)},set state(d){s=d},FRAME_SAFETY_BUDGET:Oq,INTERACTING_BUDGET:Pq,IDLE_BUDGET:Rq,get availableBudget(){return l._budget.budget},usedBudget:0,getBudget:()=>l._budget,setBudget:d=>l._budget=d,updateTask:d=>this._updateTask(d),getState:d=>this._getState(d),getRuntime:d=>this._getRuntime(d),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),po(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=l5,this._schedule(),this.frame()))}))}registerTask(s,l){const d=Aq(s),y=new i(this,s,l,d);return this._tasks.push(y),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new q2(s)),y}registerIdleStateCallbacks(s,l){const d={idleBegin:s,idleEnd:l};this._idleStateCallbacks.push(d),this.state===_a.IDLE&&this._idleUpdatesStartFired&&d.idleBegin();const y=this;return{remove:()=>this._removeIdleStateCallbacks(d),set idleBegin(v){y._idleUpdatesStartFired&&(d.idleEnd(),y._state===_a.IDLE&&v()),d.idleBegin=v},set idleEnd(v){d.idleEnd=v}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==_a.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(l=>l.idleEnd())))}get state(){return ce(this._test.state)?this._state:this._test.state}updateBudget(s){this._test.usedBudget=0;let l=Oq,d=s.frameDuration,y=Lq;switch(this.state){case _a.IDLE:l=0,d=Math.max(Rq,s.frameDuration),y=_Pe;break;case _a.INTERACTING:d=Math.max(Pq,s.frameDuration);case _a.ANIMATING:}return d=d-s.elapsedFrameTime-l,this.state!==_a.IDLE&&d<Lq&&!this._forceTask?(this._forceTask=!0,!1):(d=Math.max(d,y),this._budget.reset(d,this.state),this._maxReschedule=l5,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case _a.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case _a.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s)}_updateTask(s){this._tasks.forAll(l=>{l.name===s&&l.setPriority(s)})}_getState(s){if(this._runQueue.some(d=>d.name===s))return Nf.SCHEDULED;let l=Nf.IDLE;return this._tasks.forAll(d=>{d.name===s&&d.needsUpdate&&(d.schedulePriority<=1?l=Nf.READY:l!==Nf.READY&&(l=Nf.WAITING))}),l}_getRuntime(s){let l=0;return this._tasks.forAll(d=>{d.name===s&&(l+=d.runtime)}),l}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(d=>{d.needsUpdate&&s.set(d.name,(s.get(d.name)||0)+1)}),s.size===0)return null;let l="";return s.forEach((d,y)=>{l+=d>1?` ${d}x ${y}`:` ${y}`}),l}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((l,d)=>d.needsUpdate?++l:l,0);this._load=this._load*Nq+s*(1-Nq)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===wc&&s.needsUpdate&&!this._runQueue.includes(s)&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,l=0;if(this._tasks.forAll(d=>{d.needsUpdate&&d.schedulePriority!==0&&d.basePriority!==wc&&(s=!0,l=Math.max(l,d.basePriority),d.schedulePriority===1?(d.schedulePriority=0,this._runQueue.push(d)):--d.schedulePriority)}),!s)return this.updating=!1,!1;this._maxReschedule===l5&&(this._maxReschedule=l),--this._maxReschedule}return this.updating=!0,!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const l=this._budget.now(),d=this._runQueue.pop();this._budget.resetProgress();try{d.task.runTask(this._budget)}catch(v){bPe.error(`Exception in task "${d.name}"`,v)}d.schedulePriority=d.basePriority;const y=this._budget.now()-l;if(d.runtime+=y,this._frameTaskTimes.set(d.priority,this._frameTaskTimes.get(d.priority)+y),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",d.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(v=>v.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this.updating=this._tasks.some(l=>l.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(Xt))this._frameTaskTimes.set(Xt[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((l,d)=>this.performanceInfo.tasks.get(d).record(l)),this.performanceInfo.total.record(s)}get test(){return this._test}};g([S()],t.prototype,"updating",void 0),t=g([Q("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends st{constructor(s,l,d,y){super({}),this._scheduler=s,this.name=l,this._basePriority=y,this.runtime=0,this._queue=new X9,this._handles=new ir,this.schedulePriority=this._basePriority,this.task=K(d)?d:this._queue,this._handles.add(gs(()=>this.task.running,()=>s.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(Noe),this._scheduler.removeTask(this),this.schedule=w3.schedule,this.reschedule=w3.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const l=Aq(s);this._basePriority!==wc&&this.schedulePriority===0||(this.schedulePriority=l),this._basePriority=l}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,l,d){return this._queue.push(s,l,d)}reschedule(s,l,d){return this._queue.unshift(s,l,d)}processQueue(s){this._queue.runTask(s)}};g([S({constructOnly:!0})],i.prototype,"task",void 0),g([S({readOnly:!0})],i.prototype,"updating",null),i=g([Q("esri.views.support.SchedulerTask")],i);class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=_a.IDLE,this._didWork=!1,this._enabled=!0}run(l){return!this.done&&(l()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(l){this._enabled=l}reset(l,d){this._begin=this.now(),this._budget=l,this._state=d,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r})(ZA||(ZA={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Nf||(Nf={}));const Noe=(()=>{const e=new ZA.Budget;return e.enabled=!1,e})();class xPe{remove(){}processQueue(){}schedule(t,i,r){try{if(Du(i)){const s=Cr();return r?Promise.resolve(r(s)):Promise.reject(s)}return JT(t(Noe))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const w3=new xPe,l5=Number.MAX_SAFE_INTEGER;let T2=class extends st{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Xt.TEXTURE_UNLOAD))!=null?i:w3}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let s=this._textureRequests.get(r);return s||(s={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(s.texture),this._stage.loadImmediate(s.texture)),this._textureRequests.set(r,s)),s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return K(t)?`${e}.${t}px`:e}};g([S()],T2.prototype,"_frameTask",void 0),g([S()],T2.prototype,"updating",null),T2=g([Q("esri.views.3d.support.TextureCollection")],T2);var Fq;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(Fq||(Fq={}));const Foe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Doe={};function joe(e){return!!Doe[e]}function SPe(e){for(const t of e)if(!joe(t))return!1;return!0}Foe.forEach(e=>{Doe[e]=!0});class $Pe{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:r},s)=>this.inputManager.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,r,s){const l=Array.isArray(t)?t:t.split(",");if(!SPe(l))return l.some(joe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let d,y;Array.isArray(i)?y=i:(d=i,y=[]),typeof r=="function"?d=r:s=r,s=s!=null?s:St.DEFAULT;const v=this._createUniqueGroupName(),_=new MPe(this.view,l,y,d);this.handlers.set(v,{handler:_,priority:s});for(const M of l){const k=this.handlerCounts.get(M)||0;this.handlerCounts.set(M,k+1)}return this.inputManager&&this.inputManager.installHandlers(v,[_],s),{remove:()=>this._removeHandler(v,l)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const r of i){const s=this.handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this.handlerCounts.delete(r):this.handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class MPe extends rs{constructor(t,i,r,s){super(!0),this.view=t;for(const l of i)switch(l){case"click":this.registerIncoming("click",r,d=>s(this._wrapClick(d)));break;case"double-click":this.registerIncoming("double-click",r,d=>s(this._wrapDoubleClick(d)));break;case"immediate-click":this.registerIncoming("immediate-click",r,d=>s(this._wrapImmediateClick(d)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,d=>s(this._wrapImmediateDoubleClick(d)));break;case"hold":this.registerIncoming("hold",r,d=>s(this._wrapHold(d)));break;case"drag":this.registerIncoming("drag",r,d=>{const y=this._wrapDrag(d);y&&s(y)});break;case"key-down":this.registerIncoming("key-down",r,d=>s(this._wrapKeyDown(d)));break;case"key-up":this.registerIncoming("key-up",r,d=>s(this._wrapKeyUp(d)));break;case"pointer-down":this.registerIncoming("pointer-down",r,d=>s(this._wrapPointer(d,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,d=>s(this._wrapPointer(d,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,d=>s(this._wrapPointer(d,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,d=>s(this._wrapPointerDrag(d)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,d=>s(this._wrapMouseWheel(d)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,d=>s(this._wrapPointer(d,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,d=>s(this._wrapPointer(d,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,d=>{s(this._wrapGamepad(d))});break;case"focus":this.registerIncoming("focus",r,d=>{s(this._wrapFocus(d))});break;case"blur":this.registerIncoming("blur",r,d=>{s(this._wrapBlur(d))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:d,native:y,eventId:v}=t.data,{cancelable:_,timestamp:M}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:l,y:d,native:y,timestamp:M,screenPoint:Un(l,d),mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:k=>t.async(k),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:d,native:y,eventId:v}=t.data,{cancelable:_,timestamp:M}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:l,y:d,native:y,timestamp:M,mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:k=>t.async(k),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:d,native:y,eventId:v}=t.data,_=y.pointerId,{cancelable:M,timestamp:k}=t;return{type:"immediate-click",pointerId:_,pointerType:i,button:r,buttons:s,x:l,y:d,native:y,timestamp:k,mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:d,native:y,eventId:v}=t.data,_=y.pointerId,{cancelable:M,timestamp:k}=t;return{type:"immediate-double-click",pointerId:_,pointerType:i,button:r,buttons:s,x:l,y:d,native:y,timestamp:k,mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:s,x:l,y:d,native:y}=t.data,{cancelable:v,timestamp:_}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:l,y:d,native:y,timestamp:_,mapPoint:this._getMapPoint(l,d),cancelable:v,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(Un(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:l,pointerType:d,button:y}=i;if(l==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const v=i.pointer.native,_=i.buttons,{cancelable:M,timestamp:k}=t,O={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return l==="end"&&(this.latestDragStart=void 0),{type:"drag",action:l,x:r,y:s,origin:O,pointerType:d,button:y,buttons:_,radius:i.radius,angle:lQ(i.angle),native:v,timestamp:k,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:s}=t.data,{cancelable:l,timestamp:d}=t;return{type:"key-down",key:i,repeat:r,native:s,timestamp:d,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:s,timestamp:l}=t;return{type:"key-up",key:i,native:r,timestamp:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:s,button:l,buttons:d,native:y,eventId:v}=t.data,_=y.pointerId,M=y.pointerType,{cancelable:k,timestamp:O}=t;return{type:i,x:r,y:s,pointerId:_,pointerType:M,button:l,buttons:d,native:y,timestamp:O,eventId:v,cancelable:k,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:s,native:l,eventId:d}=t.data.currentEvent,{button:y}=t.data.startEvent,v=t.data.startEvent.native.pointerId,_=t.data.startEvent.native.pointerType,M=t.data.action,k={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:O,timestamp:R}=t;return{type:"pointer-drag",x:i,y:r,pointerId:v,pointerType:_,button:y,buttons:s,action:M,origin:k,native:l,timestamp:R,eventId:d,cancelable:O,stopPropagation:()=>t.stopPropagation(),async:D=>t.async(D),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:s}=t,{x:l,y:d,deltaY:y,native:v}=r;return{type:"mouse-wheel",x:l,y:d,deltaY:y,native:v,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:_=>t.async(_),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:s}=t.data,{cancelable:l,timestamp:d}=t,{buttons:y,axes:v}=r;return{type:"gamepad",device:s,timestamp:d,action:i,buttons:y,axes:v,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:_=>t.async(_),preventDefault:()=>t.preventDefault()}}}var fl,Dq,jq;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(fl||(fl={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(Dq||(Dq={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(jq||(jq={}));const EPe=Ke.getLogger("esri.views.interactive.interactiveToolUtils");function TPe(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return EPe.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function XS(e){return e.visible&&e.getEditableFlag(fl.USER)&&e.getEditableFlag(fl.MANAGER)}function ar(e){return Un(e.x,e.y)}function zoe(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Un(t.clientX-i.left,t.clientY-i.top)}function zq(e,t){return t instanceof Event?zoe(e,t):ar(t)}function Vq(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class IPe{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":Uq(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Bq(t))break;const s=ar(t),l=this._intersect(s,t.pointerType,i.forEachTool);if(ce(l))break;const d=this._findToolAndManipulatorByKey(l,i.forEachTool,u5),y=Uo(d,_=>_.manipulator),v=Uo(d,_=>_.tool);!(K(y)&&K(v)&&y.interactive)||y.grabbable&&y.grabbableForEvent(t)||!y.grabbing||y.dragging||this._ungrabManipulatorBeforeDragging(y,v,t),K(y)&&y.interactive&&y.grabbable&&y.grabbableForEvent(t)&&!y.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:l,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==l.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(l.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!Bq(t))break;const s=this._grabbedManipulators.get(t.pointerId),l=this._draggedManipulators.get(t.pointerId),d=Uo(s||l,({key:M})=>M),y=this._findManipulatorByKey(d,i.forEachTool);if(ce(y))break;const v=ar(t);v.x=Bs(v.x,0,i.view.width),v.y=Bs(v.y,0,i.view.height);const _=(s||l).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(y.dragging=!0,l?y.events.emit("drag",{action:"update",start:_,screenPoint:v}):y.events.emit("drag",{action:"start",start:_,screenPoint:v,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:d,start:_}));break;case"end":y.dragging=!1,l&&y.events.emit("drag",{action:"end",start:_,screenPoint:v}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=ar(t),l=this._intersect(s,t.pointerType,i.forEachTool),d=this._findToolAndManipulatorByKey(l,i.forEachTool,u5);if(CPe(t)||i.forEachTool(M=>{if((!K(d)||d.tool!==M||M.automaticManipulatorSelection)&&M.manipulators){let k=!1;M.manipulators.forEach(({manipulator:O})=>{O.selected&&(O.selected=!1,k=!0)}),k&&M.manipulatorSelectionChanged&&M.manipulatorSelectionChanged()}}),ce(d))break;const{manipulator:y,tool:v}=d;if(!y.interactive)break;y.selectable&&v.automaticManipulatorSelection&&(y.selected=!y.selected,v.manipulatorSelectionChanged&&v.manipulatorSelectionChanged());const _=t.native.shiftKey;y.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:_,stopPropagation:r});break}case"click":{const s=ar(t),l=this._intersect(s,t.pointerType,i.forEachTool),d=this._findManipulatorByKey(l,i.forEachTool);if(ce(d)||!d.interactive)break;const y=t.native.shiftKey;d.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:y}),r();break}case"double-click":{const s=ar(t),l=this._intersect(s,t.pointerType,i.forEachTool),d=this._findManipulatorByKey(l,i.forEachTool);if(ce(d)||!d.interactive)break;const y=t.native.shiftKey;d.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:y,stopPropagation:r});break}case"immediate-double-click":{const s=ar(t),l=this._intersect(s,t.pointerType,i.forEachTool),d=this._findManipulatorByKey(l,i.forEachTool);if(ce(d)||!d.interactive)break;const y=t.native.shiftKey;d.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:y,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:ar(r)}),this._grabbedManipulators.forEach(({key:s},l)=>{s.tool===i&&i.manipulators.findById(s.manipulatorId)===t&&this._grabbedManipulators.delete(l)})}_handlePointerEnd(t,i){const r=Uo(this._grabbedManipulators.get(t.pointerId),({key:l})=>l),s=this._findManipulatorByKey(r,i.forEachTool);K(s)&&!s.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:ar(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let r=null;return R6(t,({key:s})=>{const l=this._findManipulatorByKey(s,i);return!!(K(l)&&l.interactive&&"cursor"in l&&l.cursor)&&(r=l.cursor,!0)}),r}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set;this._grabbedManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),this._hoveredManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),t(r=>{r.hasFocusedManipulators=i.has(r)})}clearPointers(t,i,r=!0,s){const l=d=>d.tool===t&&(ce(s)||d.manipulatorId===s);this._grabbedManipulators.forEach(({key:d,pointerType:y},v)=>{if(l(d)){this._grabbedManipulators.delete(v);const _=this._findManipulatorByKey(d,i);K(_)&&(_.grabbing=!1,_.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:y}))}}),this._draggedManipulators.forEach(({key:d},y)=>{if(l(d)){this._draggedManipulators.delete(y);const v=this._findManipulatorByKey(d,i);K(v)&&(v.dragging=!1,v.events.emit("drag",{action:"cancel"}))}}),r&&this._hoveredManipulators.forEach(({key:d},y)=>{if(l(d)){this._hoveredManipulators.delete(y);const v=this._findManipulatorByKey(d,i);K(v)&&(v.hovering=!1)}}),this._onFocusChange(i)}_intersect(t,i,r){let s=null;return r(l=>{if(l.manipulators==null||!XS(l))return!1;const d=l.manipulators.intersect(t,i);return!ce(d)&&(s={manipulatorId:d.id,tool:l},!0)}),s}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Un(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!Uq(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(ar(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){const l=this._intersect(t,r,s);let d=this._findManipulatorByKey(l,s);const y=Uo(this._hoveredManipulators.get(i),({key:_})=>_),v=this._findManipulatorByKey(y,s);K(d)&&!d.interactive&&(d=null),v!==d&&(K(v)&&(v.hovering=!1),K(d)?(d.hovering=!0,this._hoveredManipulators.set(i,{key:l})):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,u5)?u5.manipulator:null}_findToolAndManipulatorByKey(t,i,r){return ce(t)?null:(r.tool=null,r.manipulator=null,i(s=>{if(s!==t.tool||s.manipulators==null||!XS(s))return!1;const l=s.manipulators.findById(t.manipulatorId);return!!K(l)&&(r.manipulator=l,r.tool=s,!0)}),r.manipulator?r:null)}}function Uq(e){return e==="mouse"}function Bq(e){return e.pointerType!=="mouse"||e.button===0}function CPe(e){return!!e.native.shiftKey}const u5={manipulator:null,tool:null},kPe=Ke.getLogger("esri.views.ToolViewManager"),Gq="attached",n8="tools";let xh=class extends Ng{constructor(e){super(e),this._manipulatorState=new IPe,this.tools=new vt,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(Foe,e=>{this._handleInputEvent(e)},St.TOOL),...TPe(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(K(e)&&!this.view.ready)return void kPe.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),K(t)&&t.deactivate(),K(e)&&e.activate(),this._removeIncompleteTools(e);const i=ce(this.activeTool);for(const r of this.tools){r.setEditableFlag(fl.MANAGER,i||r===this.activeTool);const s=XS(r);!i&&s||this._manipulatorState.clearPointers(r,this._forEachTool,!s)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new T2(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Pe(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),V1(()=>this._set("textures",Oi(this.textures)))],Gq)):this.handles.add(Pe(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){K(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(Gq)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};K(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:r=>{this.activeTool=r},view:this.view}),!t&&K(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(n8),this._forEachTool(e=>{if(e instanceof st){const t=Pe(()=>[e.cursor,e.visible,e.editable],()=>{XS(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,n8)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),n8)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(i=>!(!K(i.cursor)||!i.visible||!ce(e)&&i.preferManipulatorCursor)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(ce(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};g([S({constructOnly:!0,nonNullable:!0})],xh.prototype,"view",void 0),g([S({readOnly:!0,nonNullable:!0})],xh.prototype,"textures",void 0),g([S({value:null})],xh.prototype,"activeTool",null),g([S({readOnly:!0,type:vt})],xh.prototype,"tools",void 0),g([S({readOnly:!0})],xh.prototype,"cursor",void 0),g([S({readOnly:!0})],xh.prototype,"updating",null),xh=g([Q("esri.views.ToolViewManager")],xh);const APe=xh;let um=class extends st{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":OPe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return LPe[this.deviceType]}};g([S({nonNullable:!0,readOnly:!0})],um.prototype,"nativeIndex",void 0),g([S({type:String,readOnly:!0})],um.prototype,"deviceType",null),g([S({type:Number,readOnly:!0})],um.prototype,"axisThreshold",null),um=g([Q("esri.views.input.gamepad.GamepadInputDevice")],um);const OPe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),LPe={standard:.15,spacemouse:.025,unknown:0},wN=um;let I2=class extends st{constructor(...e){super(...e),this.devices=new vt,this.enabledFocusMode="document"}};g([S({type:vt.ofType(wN),readOnly:!0})],I2.prototype,"devices",void 0),g([S({type:["document","view","none"]})],I2.prototype,"enabledFocusMode",void 0),I2=g([Q("esri.views.input.gamepad.GamepadSettings")],I2);const PPe=I2;let Q9=class extends st{constructor(){super(...arguments),this.gamepad=new PPe}};g([S({readOnly:!0})],Q9.prototype,"gamepad",void 0),Q9=g([Q("esri.views.input.Input")],Q9);const RPe=Q9;let fd=class extends st{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};g([S({type:Boolean,nonNullable:!0})],fd.prototype,"enabled",void 0),g([S({type:wN})],fd.prototype,"device",void 0),g([S({type:["pan","zoom"],nonNullable:!0})],fd.prototype,"mode",void 0),g([S({type:["forward-down","forward-up"],nonNullable:!0})],fd.prototype,"tiltDirection",void 0),g([S({type:Number,nonNullable:!0})],fd.prototype,"velocityFactor",void 0),fd=g([Q("esri.views.navigation.gamepad.GamepadSettings")],fd);const Voe=fd;let _0=class extends st{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Voe,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};g([S({type:Boolean})],_0.prototype,"browserTouchPanEnabled",void 0),g([S({type:Voe,nonNullable:!0})],_0.prototype,"gamepad",void 0),g([S({type:Boolean})],_0.prototype,"momentumEnabled",void 0),g([S({type:Boolean})],_0.prototype,"mouseWheelZoomEnabled",void 0),_0=g([Q("esri.views.navigation.Navigation")],_0);const Uoe=_0;var qq;function NPe(e){const t=e.url&&Zg(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&K(t)&&t.serverType==="ImageServer")&&Boe(e)&&e.heightModelInfo?e.heightModelInfo:FPe(e)?E$.deriveUnitFromSR(jPe,e.spatialReference):null}function Boe(e){return"heightModelInfo"in e}function Goe(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function FPe(e){return Goe(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):qoe(e)}function DPe(e){return e.layers!=null||qoe(e)||Goe(e)||Boe(e)}function qoe(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(qq||(qq={}));const jPe=new E$({heightModel:"gravity-related-height"});var _o;function Hq(e){return e===_o.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(_o||(_o={}));let YA,s8=null;async function zPe(e){s8||(s8=Le(()=>import("./geometryServiceUtils.8ba958df.js"),[],import.meta.url).then(t=>YA=t)),await s8,ur(e)}async function Hoe(e,t,i,r){if(!e)return null;const s=e.spatialReference;return hf()||zu(s,t)?uo(e,t):YA?YA.projectGeometry(e,t,i,r):(await Promise.race([zPe(r),lp(r)]),Hoe(e,t,i,r))}let Hi=class extends st{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=S1(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return K(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return ce(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,r,s,l;const e=(i=this.map)==null?void 0:i.call(this),t=[];return K(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(l=e==null?void 0:e.basemap)==null?void 0:l.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var s;if(this.suspended)return(s=this._get("_spatialReferenceTask"))!=null?s:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const l of e){const d=this._getSupportedSpatialReferences(l);if(d.length>0){const y=this._narrowDownSpatialReferenceCandidates(i,d);K(y)&&(i=y)}if(K(i)&&i.length===1)break}if(t&&(ce(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:K(r)?r.spatialReference:null,viewingMode:K(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,s,l,d,y,v,_;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(s=(r=this.map)==null?void 0:r.call(this))==null?void 0:s.basemap,layers:(y=(d=(l=this.map)==null?void 0:l.call(this))==null?void 0:d.basemap)==null?void 0:y.baseLayers},{layers:(_=(v=this.map)==null?void 0:v.call(this))==null?void 0:_.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const M=e[0].tileInfo;return{tileInfo:M&&M.spatialReference.equals(this.spatialReference)?M:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,s,l;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const d of e)if(DPe(d)){const y=NPe(d);if(y)return{heightModelInfo:y,vcsWkid:(s=d.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(l=d.spatialReference)==null?void 0:l.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,s;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const l of e.layers){const d="fullExtents"in l&&l.fullExtents||(K(l.fullExtent)?[l.fullExtent]:[]),y=this.requiresExtentInSpatialReference?null:d[0],v=(s=d.find(_=>_.spatialReference.equals(this.spatialReference)))!=null?s:y;if(v)return{candidates:[{extent:v,layer:l}],updating:!1};if(this._getSupportedSpatialReferences(l).length>0)for(const _ of d)i.push({extent:_,layer:l})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(ce(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:K(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(K(this._projectExtentTask.task)&&(this._projectExtentTask.task=S1(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:CY(async s=>{try{const l=await Hoe(i.extent,r,i.layer.portalItem,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:l}}catch{if(Du(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(ce(e))return t;const i=[],r=(s,l)=>K(s)?K(l)?s===l&&s:s:l;for(const s of e)for(const l of t){if(!s.spatialReference.equals(l.spatialReference))continue;const d=r(s.viewingMode,l.viewingMode);if(d!==!1){i.push({spatialReference:s.spatialReference,viewingMode:d});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return ce(e)||e.length<1?K(t)?{spatialReference:t,viewingMode:null}:null:(K(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==_o.Local)&&(e=e.filter(({viewingMode:i})=>i!==_o.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(K(s)){const l=K(s.constraints)?s.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:d,viewingMode:y}of l)(!this.requiresExtentInSpatialReference||ce(this.userSpatialReference)||d.equals(this.userSpatialReference))&&i.push({spatialReference:d,viewingMode:y})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};g([S()],Hi.prototype,"required",void 0),g([S({constructOnly:!0})],Hi.prototype,"map",void 0),g([S({constructOnly:!0})],Hi.prototype,"getSpatialReferenceSupport",void 0),g([S()],Hi.prototype,"defaultSpatialReference",void 0),g([S()],Hi.prototype,"userSpatialReference",void 0),g([S()],Hi.prototype,"sourcePreloadCount",void 0),g([S()],Hi.prototype,"priorityCollection",void 0),g([S()],Hi.prototype,"requiresExtentInSpatialReference",void 0),g([S()],Hi.prototype,"suspended",void 0),g([S({readOnly:!0})],Hi.prototype,"ready",null),g([S({readOnly:!0})],Hi.prototype,"heightModelInfoReady",null),g([S({readOnly:!0})],Hi.prototype,"spatialReference",null),g([S({readOnly:!0})],Hi.prototype,"extent",null),g([S({readOnly:!0})],Hi.prototype,"heightModelInfo",null),g([S({readOnly:!0})],Hi.prototype,"vcsWkid",null),g([S({readOnly:!0})],Hi.prototype,"latestVcsWkid",null),g([S({readOnly:!0})],Hi.prototype,"viewingMode",null),g([S({readOnly:!0})],Hi.prototype,"tileInfo",null),g([S({readOnly:!0})],Hi.prototype,"mapCollections",null),g([S({readOnly:!0})],Hi.prototype,"_allLayers",null),g([S({readOnly:!0})],Hi.prototype,"_spatialReferenceTask",null),g([S({readOnly:!0})],Hi.prototype,"_tileInfoTask",null),g([S({readOnly:!0})],Hi.prototype,"_heightModelInfoTask",null),g([S({readOnly:!0})],Hi.prototype,"_extentCandidatesTask",null),g([S()],Hi.prototype,"_extentTask",null),g([S()],Hi.prototype,"_projectExtentTask",void 0),Hi=g([Q("esri.views.support.DefaultsFromMap")],Hi);var e4;const c5=Ke.getLogger("esri.views.View");let Tt=e4=class extends Uu(bs.EventedMixin(R3(st))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Fg({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new m1,this.analyses=new YS,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new vt,this.magnifier=new Roe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new RPe,this.navigation=new Uoe,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new $Pe(this),this.persistableViewModels=new vt,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(Pe(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,e4.views.add(this)):(this._currentSpatialReference=null,e4.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(r=this.toolViewManager)==null||r.detach(),K(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),K(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},L1))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,mv(()=>this.ready)))),this.basemapView=new dd({view:this}),this.layerViewManager=new vPe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new APe({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Pe(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),Pe(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Pe(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Pe(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(K(e))return;const s=V1(()=>e=S1(e));e=CY(async l=>{try{await zL(this.spatialReferenceWarningDelay,null,l)}catch{return}finally{e=null}c5.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Oi(this.graphics),this.analyses=Oi(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Oi(this.analysisViewManager),this.toolViewManager=Oi(this.toolViewManager),this.layerViewManager=Oi(this.layerViewManager),this.basemapView=Oi(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return c5.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Hi({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||za.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(c5.warn("#map","The provided map is already destroyed",{map:e}),e=null),za.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!ms(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return K(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new ge("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return K(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&c5.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(gs(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Tt.views=new vt,g([S()],Tt.prototype,"_userSpatialReference",void 0),g([tt("toolViewManager.activeTool")],Tt.prototype,"activeTool",void 0),g([S({readOnly:!0})],Tt.prototype,"allLayerViews",void 0),g([S()],Tt.prototype,"groundView",void 0),g([S()],Tt.prototype,"animation",void 0),g([S()],Tt.prototype,"basemapView",void 0),g([S({readOnly:!0})],Tt.prototype,"_defaultsFromMapSettings",null),g([S()],Tt.prototype,"defaultsFromMap",null),g([S()],Tt.prototype,"fatalError",void 0),g([S({type:yi})],Tt.prototype,"extent",void 0),g([S(KA(m1,"graphics"))],Tt.prototype,"graphics",void 0),g([S(KA(YS,"analyses"))],Tt.prototype,"analyses",void 0),g([S({readOnly:!0,type:E$})],Tt.prototype,"heightModelInfo",null),g([S({readOnly:!0})],Tt.prototype,"interacting",null),g([S({readOnly:!0})],Tt.prototype,"navigating",void 0),g([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Tt.prototype,"preconditionsReady",null),g([S({readOnly:!0})],Tt.prototype,"typeSpecificPreconditionsReady",void 0),g([S({type:vt,readOnly:!0})],Tt.prototype,"layerViews",void 0),g([S({type:Roe})],Tt.prototype,"magnifier",void 0),g([S({value:null,type:AQ})],Tt.prototype,"map",null),g([S()],Tt.prototype,"padding",void 0),g([S({readOnly:!0})],Tt.prototype,"ready",void 0),g([S({type:Ct})],Tt.prototype,"spatialReference",null),g([S()],Tt.prototype,"spatialReferenceWarningDelay",void 0),g([S()],Tt.prototype,"stationary",null),g([S({readOnly:!0})],Tt.prototype,"supportsGround",void 0),g([S({type:jc})],Tt.prototype,"timeExtent",void 0),g([tt("toolViewManager.tools")],Tt.prototype,"tools",void 0),g([S()],Tt.prototype,"toolViewManager",void 0),g([S({readOnly:!0})],Tt.prototype,"type",void 0),g([S({type:Number})],Tt.prototype,"scale",void 0),g([S({readOnly:!0})],Tt.prototype,"updating",void 0),g([S({readOnly:!0})],Tt.prototype,"initialExtentRequired",void 0),g([S({readOnly:!0})],Tt.prototype,"initialExtent",null),g([S()],Tt.prototype,"cursor",null),g([S({readOnly:!0})],Tt.prototype,"input",void 0),g([S({type:Uoe,nonNullable:!0})],Tt.prototype,"navigation",void 0),g([S()],Tt.prototype,"layerViewManager",void 0),g([S()],Tt.prototype,"analysisViewManager",void 0),g([S()],Tt.prototype,"width",void 0),g([S()],Tt.prototype,"height",void 0),g([S({readOnly:!0})],Tt.prototype,"resizing",void 0),g([S({value:null,readOnly:!0})],Tt.prototype,"size",null),g([S({readOnly:!0})],Tt.prototype,"suspended",void 0),g([S({readOnly:!0})],Tt.prototype,"viewEvents",void 0),g([S({readOnly:!0})],Tt.prototype,"persistableViewModels",void 0),g([S()],Tt.prototype,"_isValid",void 0),g([S()],Tt.prototype,"_readyCycleForced",void 0),g([S()],Tt.prototype,"_currentSpatialReference",void 0),Tt=e4=g([Q("esri.views.View")],Tt);const VPe=Tt;let yd=class extends eS{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new ge("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=dp(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};g([S({readOnly:!0})],yd.prototype,"done",null),g([S({readOnly:!0,type:String})],yd.prototype,"state",void 0),g([S()],yd.prototype,"target",void 0),yd=g([Q("esri.views.ViewAnimation")],yd),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(yd||(yd={}));const XA=yd;function D0(e,t,i,r){const s=3*e,l=3*(i-e)-s,d=1-s-l,y=3*t,v=3*(r-t)-y,_=1-y-v;function M(D){return((d*D+l)*D+s)*D}function k(D){return((_*D+v)*D+y)*D}function O(D){return(3*d*D+2*l)*D+s}function R(D,z){let B,V,q,J,ne,re;for(q=D,re=0;re<8;re++){if(J=M(q)-D,Math.abs(J)<z)return q;if(ne=O(q),Math.abs(ne)<1e-6)break;q-=J/ne}if(B=0,V=1,q=D,q<B)return B;if(q>V)return V;for(;B<V;){if(J=M(q),Math.abs(J-D)<z)return q;D>J?B=q:V=q,q=.5*(V-B)+B}return q}return function(D,z=1e-6){return k(R(D,z))}}const UPe=/^cubic-bezier\((.*)\)/,dl={};function BPe(e){let t=dl[e]||null;if(!t){const i=UPe.exec(e);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(t=D0.apply(D0,r))}}return t}dl.ease=D0(.25,.1,.25,1),dl.linear=D0(0,0,1,1),dl.easeIn=dl["ease-in"]=D0(.42,0,1,1),dl.easeOut=dl["ease-out"]=D0(0,0,.58,1),dl.easeInOut=dl["ease-in-out"]=D0(.42,0,.58,1);function Ic(){return[1,0,0,1,0,0]}function Woe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function GPe(e,t,i,r,s,l){return[e,t,i,r,s,l]}function qPe(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:Ic,clone:Woe,fromValues:GPe,createView:qPe},Symbol.toStringTag,{value:"Module"}));function Xg(e,t){return e[0]=t[0],e[1]=t[1],e}function Yn(e,t,i){return e[0]=t,e[1]=i,e}function Joe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function kl(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function Koe(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Zoe(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function HPe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function WPe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function JPe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function KPe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function ZPe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function a_(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function QA(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function Q1(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function b3(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function QS(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Yoe(e){const t=e[0],i=e[1];return t*t+i*i}function Xoe(e,t){return e[0]=-t[0],e[1]=-t[1],e}function YPe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function e6(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function bN(e,t){return e[0]*t[0]+e[1]*t[1]}function _N(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function Qoe(e,t,i,r){const s=t[0],l=t[1];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e}function XPe(e,t){t=t||1;const i=2*Tu()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function QPe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function bc(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function eRe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function tRe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function eae(e,t,i,r){const s=t[0]-i[0],l=t[1]-i[1],d=Math.sin(r),y=Math.cos(r);return e[0]=s*y-l*d+i[0],e[1]=s*d+l*y+i[1],e}function iRe(e,t){const i=e[0],r=e[1],s=t[0],l=t[1];let d=i*i+r*r;d>0&&(d=1/Math.sqrt(d));let y=s*s+l*l;y>0&&(y=1/Math.sqrt(y));const v=(i*s+r*l)*d*y;return v>1?0:v<-1?Math.PI:Math.acos(v)}function rRe(e){return"vec2("+e[0]+", "+e[1]+")"}function nRe(e,t){return e[0]===t[0]&&e[1]===t[1]}function sRe(e,t){const i=e[0],r=e[1],s=t[0],l=t[1];return Math.abs(i-s)<=Ot*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-l)<=Ot*Math.max(1,Math.abs(r),Math.abs(l))}function eO(e,t,i,r,s){let l=t[0]-i[0],d=t[1]-i[1];const y=(r[0]*l+r[1]*d)*(s-1);return l=r[0]*y,d=r[1]*y,e[0]=t[0]+l,e[1]=t[1]+d,e}const oRe=QS,xN=kl,aRe=Koe,lRe=Zoe,uRe=Q1,cRe=b3,hRe=Yoe;Object.freeze(Object.defineProperty({__proto__:null,copy:Xg,set:Yn,add:Joe,subtract:kl,multiply:Koe,divide:Zoe,ceil:HPe,floor:WPe,min:JPe,max:KPe,round:ZPe,scale:a_,scaleAndAdd:QA,distance:Q1,squaredDistance:b3,length:QS,squaredLength:Yoe,negate:Xoe,inverse:YPe,normalize:e6,dot:bN,cross:_N,lerp:Qoe,random:XPe,transformMat2:QPe,transformMat2d:bc,transformMat3:eRe,transformMat4:tRe,rotate:eae,angle:iRe,str:rRe,exactEquals:nRe,equals:sRe,projectAndScale:eO,len:oRe,sub:xN,mul:aRe,div:lRe,dist:uRe,sqrDist:cRe,sqrLen:hRe},Symbol.toStringTag,{value:"Module"}));function wi(){return[0,0]}function pRe(e){return[e[0],e[1]]}function Zh(e,t){return[e,t]}function tae(e){const t=wi(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function iae(e,t){return new Float64Array(e,t,2)}function rae(){return wi()}function nae(){return Zh(1,1)}function sae(){return Zh(1,0)}function oae(){return Zh(0,1)}const dRe=rae(),fRe=nae(),yRe=sae(),mRe=oae();Object.freeze(Object.defineProperty({__proto__:null,create:wi,clone:pRe,fromValues:Zh,fromArray:tae,createView:iae,zeros:rae,ones:nae,unitX:sae,unitY:oae,ZEROS:dRe,ONES:fRe,UNIT_X:yRe,UNIT_Y:mRe},Symbol.toStringTag,{value:"Module"}));const aae=96,lae=39.37,gRe=180/Math.PI;function uae(e){return e.wkid?e:e.spatialReference||Ct.WGS84}function SN(e,t){return t.type?Yn(e,t.x,t.y):Xg(e,t)}function cae(e){return cf(e)}function yb(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*ERe(e.spatialReference)}async function C2(e,t,i,r){let s,l;if(!e||Array.isArray(e)&&!e.length)return null;if(vt.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const y=e.every(M=>"attributes"in M),v=e.some(M=>!M.geometry);let _=e;if(y&&v&&t&&t.allLayerViews){const M=new Map;for(const D of e){const z=D.layer,B=M.get(z)||[],V=D.attributes[z.objectIdField];V!=null&&B.push(V),M.set(z,B)}const k=[];M.forEach((D,z)=>{const B=t.allLayerViews.find(V=>V.layer.id===z.id);if("queryFeatures"in B){const V=z.createQuery();V.objectIds=D,V.returnGeometry=!0,k.push(B.queryFeatures(V))}});const O=await Promise.all(k),R=[];for(const D of O)if(D&&D.features&&D.features.length)for(const z of D.features)K(z.geometry)&&R.push(z.geometry);_=R}for(const M of _)r=await C2(M,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new ut(e);else if(e instanceof Qo)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const y=e.layer,v=t.allLayerViews.find(_=>_.layer.id===y.id);if("queryFeatures"in v){const _=y.createQuery();_.objectIds=[e.attributes[y.objectIdField]],_.returnGeometry=!0;const M=await v.queryFeatures(_);s=LL(M,"features",0,"geometry")}}}if(ce(s)||(l=s.type==="point"?new yi({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!l))return null;hf()||zu(l.spatialReference,i)||await lp();const d=uo(l,i);return d?r=r?r.union(d):d:null}function vRe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const s=r.layer;s&&s.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,i=s.maxScale>i?s.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function o8(e,t){return ms(uae(e),t)?e:uo(e,t)}async function wRe(e,t){if(!e||!t)return new Lu({targetGeometry:new ut,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:l,size:d}=t,y=[s?d[0]-s.left-s.right:d[0],s?d[1]-s.top-s.bottom:d[1]];let v=null;e instanceof Lu?v=e:e.viewpoint?v=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(v=e.target);let _=null;v&&v.targetGeometry?_=v.targetGeometry:e instanceof yi?_=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(_=await C2(e.center,t,i)||await C2(e.extent,t,i)||await C2(e.target,t,i)||await C2(e,t,i)),!_&&l&&l.targetGeometry?_=l.targetGeometry:!_&&t.extent&&(_=t.extent),i||(i=uae(t.spatialReference||t.extent||_)),hf()||ms(_.spatialReference,i)||zu(_,i)||await lp();const M=o8(_.center?_.center:_,i);let k=null;if(v&&K(v.targetGeometry)&&v.targetGeometry.type==="point")k=v.scale;else if("scale"in e&&e.scale)k=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)k=r.zoomToScale(e.zoom);else if(Array.isArray(_)||_.type==="point"||_.type==="extent"&&_.width===0&&_.height===0){const z=o8(t.extent,i);k=K(z)?yb(z,y):t.extent?yb(t.extent,y):l.scale}else k=yb(o8(_.extent,i),y);const O=vRe(e);O&&(O.min&&O.min>k?k=O.min:O.max&&O.max<k&&(k=O.max));let R=0;v?R=v.rotation:e.hasOwnProperty("rotation")?R=e.rotation:l&&(R=l.rotation);let D=new Lu({targetGeometry:M,scale:k,rotation:R});return r&&(D=r.fit(D),r.constrainByGeometry(D),r.rotationEnabled||(D.rotation=R)),D}function Bu(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function bRe(e,t,i){return i?Yn(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):a_(e,t,.5)}const _Re=function(){const e=wi();return function(t,i,r){const s=i.targetGeometry;SN(e,s);const l=.5*Pv(i);return t.xmin=e[0]-l*r[0],t.ymin=e[1]-l*r[1],t.xmax=e[0]+l*r[0],t.ymax=e[1]+l*r[1],t.spatialReference=s.spatialReference,t}}();function xRe(e,t,i,r,s){return tO(e,t,i.center),e.scale=yb(i,r),s&&s.constraints&&s.constraints.constrain(e),e}function SRe(e,t,i,r){return EN(e,t,i,r),A$(e,e)}const hae=function(){const e=wi();return function(t,i,r){return xN(t,TRe(t,i),bRe(e,i,r))}}(),$Re=function(){const e=Ic(),t=wi();return function(i,r,s,l){const d=Pv(r),y=$N(r);return Yn(t,d,d),_oe(e,t),s_(e,e,y),Yg(e,e,hae(t,s,l)),Yg(e,e,[0,l.top-l.bottom]),Yn(i,e[4],e[5])}}();function Pv(e){return e.scale*MRe(e.targetGeometry)}function MRe(e){return K(e)&&Us(e.spatialReference)?1/(cae(e.spatialReference)*lae*aae):1}function $N(e){return hP(e.rotation)||0}function ERe(e){return Us(e)?cae(e)*lae*aae:1}function TRe(e,t){return a_(e,t,.5)}const MN=function(){const e=wi(),t=wi(),i=wi();return function(r,s,l,d,y,v){return Xoe(e,s),a_(t,l,.5*v),Yn(i,1/d*v,-1/d*v),yN(r,t),y&&s_(r,r,y),O$(r,r,i),Yg(r,r,e),r}}(),EN=function(){const e=wi();return function(t,i,r,s){const l=Pv(i),d=$N(i);return SN(e,i.targetGeometry),MN(t,e,r,l,d,s)}}(),IRe=function(){const e=wi();return function(t,i,r,s){const l=Pv(i);return SN(e,i.targetGeometry),MN(t,e,r,l,0,s)}}();function CRe(e){const t=La(e);return t?t.valid[1]-t.valid[0]:0}function kRe(e,t){return Math.round(CRe(e)/t)}const ARe=function(){const e=wi(),t=wi(),i=[0,0,0];return function(r,s,l){kl(e,r,s),e6(e,e),kl(t,r,l),e6(t,t),_N(i,e,t);let d=Math.acos(bN(e,t)/(QS(e)*QS(t)))*gRe;return i[2]<0&&(d=-d),isNaN(d)&&(d=0),d}}(),ORe=function(){const e=wi();return function(t,i,r,s){const l=t.targetGeometry;return Bu(t,i),$Re(e,i,r,s),l.x+=e[0],l.y+=e[1],t}}(),tO=function(e,t,i){Bu(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},LRe=function(){const e=wi();return function(t,i,r,s,l){l||(l="center"),xN(e,r,s),a_(e,e,.5);const d=e[0],y=e[1];switch(l){case"center":Yn(e,0,0);break;case"left":Yn(e,-d,0);break;case"top":Yn(e,0,y);break;case"right":Yn(e,d,0);break;case"bottom":Yn(e,0,-y);break;case"top-left":Yn(e,-d,y);break;case"bottom-left":Yn(e,-d,-y);break;case"top-right":Yn(e,d,y);break;case"bottom-right":Yn(e,d,-y)}return N$(t,i,e),t}}();function CKe(e,t,i){return Bu(e,t),e.rotation+=i,e}function PRe(e,t,i){return Bu(e,t),e.rotation=i,e}const RRe=function(){const e=wi();return function(t,i,r,s,l){return Bu(t,i),isNaN(r)||r===0||(dae(e,s,i,l),t.scale=i.scale*r,fae(e,e,t,l),N$(t,t,Yn(e,e[0]-s[0],s[1]-e[1]))),t}}();function Wq(e,t,i){return Bu(e,t),e.scale=i,e}const pae=function(){const e=wi();return function(t,i,r,s,l,d){return Bu(t,i),isNaN(r)||r===0||(dae(e,l,i,d),t.scale=i.scale*r,t.rotation+=s,fae(e,e,t,d),N$(t,t,Yn(e,e[0]-l[0],l[1]-e[1]))),t}}(),kKe=function(){const e=wi(),t=wi();return function(i,r,s,l,d,y,v){return hae(t,y,v),Joe(e,d,t),l?pae(i,r,s,l,e,y):RRe(i,r,s,e,y)}}(),dae=function(){const e=Ic();return function(t,i,r,s){return bc(t,i,SRe(e,r,s,1))}}(),fae=function(){const e=Ic();return function(t,i,r,s){return bc(t,i,EN(e,r,s,1))}}(),N$=function(){const e=wi(),t=Ic();return function(i,r,s){Bu(i,r);const l=Pv(r),d=i.targetGeometry;return boe(t,$N(r)),O$(t,t,Zh(l,l)),bc(e,s,t),d.x+=e[0],d.y+=e[1],i}}();class NRe{constructor(t,i,r,s){const l=t.targetGeometry,d=i.targetGeometry;s?typeof s=="string"&&(s=BPe(s)||dl.ease):s=dl.ease,this.easing=s,this.duration=r,this.sCenterX=l.x,this.sCenterY=l.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=d.x,this.tCenterY=d.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let s,l,d,y;i>=1?(s=this.tCenterX,l=this.tCenterY,d=this.tRotation,y=this.tScale):(s=this.sCenterX+r*this.dCenterX,l=this.sCenterY+r*this.dCenterY,d=this.sRotation+r*this.dRotation,y=this.sScale+r*this.dScale),t.targetGeometry.x=s,t.targetGeometry.y=l,t.scale=y,t.rotation=d}}let Sh=class extends st{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=dl.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Lu({targetGeometry:new ut,scale:0,rotation:0}),this._updateTask=Pg({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;Bu(r,t),this.transition=new NRe(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const s=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new XA({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==XA.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};g([S()],Sh.prototype,"animation",void 0),g([S()],Sh.prototype,"duration",void 0),g([S()],Sh.prototype,"transition",void 0),g([S()],Sh.prototype,"easing",void 0),g([S()],Sh.prototype,"view",void 0),g([S()],Sh.prototype,"viewpoint",void 0),Sh=g([Q("esri.views.2d.AnimationManager")],Sh);const FRe=Sh;class DRe{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:l,state:{id:d}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),l.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),K(s)&&(s.lastUpdateId!==d&&(s.viewChange(),s.lastUpdateId=d),s.updateRequested&&s.processUpdate(this._updateParameters)),K(r)&&(r.lastUpdateId!==d&&(r.viewChange(),r.lastUpdateId=d),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Pe(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Pg(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function bn(){return Promise.all([Le(()=>import("./webglDeps.980bca37.js"),["webglDeps.980bca37.js","VertexArrayObject.47b5a963.js","Texture.799a4527.js","enums.c60b1dad.js","ProgramTemplate.30511351.js","programUtils.be599db1.js"],import.meta.url),Le(()=>import("./mapViewDeps.15ce71e4.js"),["mapViewDeps.15ce71e4.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","utils.c5d68ceb.js","Utils.52ce5732.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","enums.58eeda20.js","programUtils.be599db1.js","Rasterizer.19c8f18d.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","commonjsHelpers.ce2b5698.js","imageutils.c1bdb130.js","Matcher.7b29957c.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","ExpandedCIM.cd816331.js","CircularArray.0ec22ba2.js","requestImageUtils.e398c4e6.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","BaseGraphicContainer.48b0a311.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","vec3f32.ca7a14c1.js","GraphicContainer.b957e03e.js"],import.meta.url)])}const Iw=()=>bn().then(()=>Le(()=>import("./TileLayerView2D.df9dfee0.js"),["TileLayerView2D.df9dfee0.js","imageUtils.23d3568d.js","BitmapTileContainer.4aff8eeb.js","Bitmap.f35df500.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","TileContainer.8cab8d8b.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),h5=()=>bn().then(()=>Le(()=>import("./FeatureLayerView2D.eae6792f.js"),["FeatureLayerView2D.eae6792f.js","definitions.a48e52ac.js","LayerView.dc56aed3.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","schemaUtils.5a296482.js","visualVariablesUtils.4ccb186b.js","createSymbolSchema.f93af27b.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","MD5.7323a015.js","util.c286b664.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),Jq={"base-dynamic":()=>bn().then(()=>Le(()=>import("./BaseDynamicLayerView2D.c77400b0.js"),["BaseDynamicLayerView2D.c77400b0.js","BitmapContainer.1eaf3c42.js","WGLContainer.6c26f111.js","enums.c60b1dad.js","pixelUtils.0c287117.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","ExportStrategy.7937baf8.js","Bitmap.f35df500.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),"base-tile":Iw,"bing-maps":Iw,csv:h5,"geo-rss":()=>bn().then(()=>Le(()=>import("./GeoRSSLayerView2D.459e1ca2.js"),["GeoRSSLayerView2D.459e1ca2.js","LayerView.dc56aed3.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","GraphicContainer.b957e03e.js","BaseGraphicContainer.48b0a311.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","VertexArrayObject.47b5a963.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","Matcher.7b29957c.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","vec3f32.ca7a14c1.js"],import.meta.url)),feature:h5,geojson:h5,graphics:()=>bn().then(()=>Le(()=>import("./GraphicsLayerView2D.c2bfefb3.js"),["GraphicsLayerView2D.c2bfefb3.js","LayerView.dc56aed3.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","GraphicContainer.b957e03e.js","BaseGraphicContainer.48b0a311.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","VertexArrayObject.47b5a963.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","Matcher.7b29957c.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","vec3f32.ca7a14c1.js"],import.meta.url)),group:()=>bn().then(()=>Le(()=>import("./GroupLayerView2D.ce136129.js"),["GroupLayerView2D.ce136129.js","GroupContainer.e27b7c2f.js","WGLContainer.6c26f111.js","enums.c60b1dad.js","pixelUtils.0c287117.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js"],import.meta.url)),imagery:()=>bn().then(()=>Le(()=>import("./ImageryLayerView2D.abb28d85.js"),["ImageryLayerView2D.abb28d85.js","RasterVFDisplayObject.7c79b097.js","VertexArrayObject.47b5a963.js","Texture.799a4527.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js","dataUtils.e27a69a1.js","pixelUtils.0c287117.js","WGLContainer.6c26f111.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","BaseGraphicContainer.48b0a311.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","Matcher.7b29957c.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","vec3f32.ca7a14c1.js","HighlightGraphicContainer.7072b767.js","BitmapContainer.1eaf3c42.js","Bitmap.f35df500.js","ExportStrategy.7937baf8.js","rasterProjectionHelper.a859f5db.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),"imagery-tile":()=>bn().then(()=>Le(()=>import("./ImageryTileLayerView2D.0143ac29.js"),["ImageryTileLayerView2D.0143ac29.js","RasterVFDisplayObject.7c79b097.js","VertexArrayObject.47b5a963.js","Texture.799a4527.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js","dataUtils.e27a69a1.js","pixelUtils.0c287117.js","WGLContainer.6c26f111.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","TileContainer.8cab8d8b.js","RawBlockCache.51352bf1.js","rasterProjectionHelper.a859f5db.js","util.c286b664.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),kml:()=>bn().then(()=>Le(()=>import("./KMLLayerView2D.ed5b6370.js"),["KMLLayerView2D.ed5b6370.js","kmlUtils.1d0dea64.js","Bitmap.f35df500.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","BitmapContainer.1eaf3c42.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","GraphicContainer.b957e03e.js","BaseGraphicContainer.48b0a311.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","Matcher.7b29957c.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","vec3f32.ca7a14c1.js"],import.meta.url)),"map-image":()=>bn().then(()=>Le(()=>import("./MapImageLayerView2D.150bc48f.js"),["MapImageLayerView2D.150bc48f.js","BitmapContainer.1eaf3c42.js","WGLContainer.6c26f111.js","enums.c60b1dad.js","pixelUtils.0c287117.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","BaseGraphicContainer.48b0a311.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","Matcher.7b29957c.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","vec3f32.ca7a14c1.js","HighlightGraphicContainer.7072b767.js","ExportStrategy.7937baf8.js","Bitmap.f35df500.js","scaleUtils.a76d44bd.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),"map-notes":()=>bn().then(()=>Le(()=>import("./MapNotesLayerView2D.52e59d42.js"),["MapNotesLayerView2D.52e59d42.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","GroupContainer.e27b7c2f.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","GraphicContainer.b957e03e.js","BaseGraphicContainer.48b0a311.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","Matcher.7b29957c.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","vec3f32.ca7a14c1.js"],import.meta.url)),media:()=>bn().then(()=>Le(()=>import("./MediaLayerView2D.2845422f.js"),["MediaLayerView2D.2845422f.js","normalizeUtilsSync.f68c7e05.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","VertexArrayObject.47b5a963.js","vec3f32.ca7a14c1.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js"],import.meta.url)),"ogc-feature":()=>bn().then(()=>Le(()=>import("./OGCFeatureLayerView2D.ac7a0daf.js"),["OGCFeatureLayerView2D.ac7a0daf.js","FeatureLayerView2D.eae6792f.js","definitions.a48e52ac.js","LayerView.dc56aed3.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","schemaUtils.5a296482.js","visualVariablesUtils.4ccb186b.js","createSymbolSchema.f93af27b.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","MD5.7323a015.js","util.c286b664.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),"open-street-map":Iw,route:()=>bn().then(()=>Le(()=>import("./RouteLayerView2D.aeaf99b0.js"),["RouteLayerView2D.aeaf99b0.js","Stop.d2b6ae32.js","LayerView.dc56aed3.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","GraphicContainer.b957e03e.js","BaseGraphicContainer.48b0a311.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","VertexArrayObject.47b5a963.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","Matcher.7b29957c.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","vec3f32.ca7a14c1.js"],import.meta.url)),stream:()=>bn().then(()=>Le(()=>import("./StreamLayerView2D.f1d71689.js"),["StreamLayerView2D.f1d71689.js","FeatureLayerView2D.eae6792f.js","definitions.a48e52ac.js","LayerView.dc56aed3.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","schemaUtils.5a296482.js","visualVariablesUtils.4ccb186b.js","createSymbolSchema.f93af27b.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","MD5.7323a015.js","util.c286b664.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),"subtype-group":()=>bn().then(()=>Le(()=>import("./SubtypeGroupLayerView2D.6b80a6d0.js"),["SubtypeGroupLayerView2D.6b80a6d0.js","FeatureLayerView2D.eae6792f.js","definitions.a48e52ac.js","LayerView.dc56aed3.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","schemaUtils.5a296482.js","visualVariablesUtils.4ccb186b.js","createSymbolSchema.f93af27b.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","ExpandedCIM.cd816331.js","MD5.7323a015.js","util.c286b664.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),tile:Iw,"vector-tile":()=>bn().then(()=>Le(()=>import("./VectorTileLayerView2D.73f0c305.js"),["VectorTileLayerView2D.73f0c305.js","enums.58eeda20.js","BidiEngine.95523203.js","enums.c60b1dad.js","Texture.799a4527.js","CIMSymbolHelper.49a4dde1.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","VertexArrayObject.47b5a963.js","config.ded6d251.js","TileContainer.8cab8d8b.js","utils.c5d68ceb.js","Utils.52ce5732.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","GeometryUtils.b4d0dc88.js","StyleRepository.bc0efb0e.js","Geometry.f2d62961.js","LayerView.dc56aed3.js","Bitmap.f35df500.js","BitmapContainer.1eaf3c42.js"],import.meta.url)),wcs:()=>bn().then(()=>Le(()=>import("./ImageryTileLayerView2D.0143ac29.js"),["ImageryTileLayerView2D.0143ac29.js","RasterVFDisplayObject.7c79b097.js","VertexArrayObject.47b5a963.js","Texture.799a4527.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js","dataUtils.e27a69a1.js","pixelUtils.0c287117.js","WGLContainer.6c26f111.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","TileContainer.8cab8d8b.js","RawBlockCache.51352bf1.js","rasterProjectionHelper.a859f5db.js","util.c286b664.js","popupUtils.0095f02e.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),"web-tile":Iw,wfs:h5,wms:()=>bn().then(()=>Le(()=>import("./WMSLayerView2D.3b767960.js"),["WMSLayerView2D.3b767960.js","BitmapContainer.1eaf3c42.js","WGLContainer.6c26f111.js","enums.c60b1dad.js","pixelUtils.0c287117.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","ExportStrategy.7937baf8.js","Bitmap.f35df500.js","RefreshableLayerView.9508bda5.js","ExportWMSImageParameters.7e716791.js"],import.meta.url)),wmts:()=>bn().then(()=>Le(()=>import("./WMTSLayerView2D.5ff8eae9.js"),["WMTSLayerView2D.5ff8eae9.js","imageUtils.23d3568d.js","BitmapTileContainer.4aff8eeb.js","Bitmap.f35df500.js","utils.c5d68ceb.js","Utils.52ce5732.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","TileContainer.8cab8d8b.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","LayerView.dc56aed3.js","RefreshableLayerView.9508bda5.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function jRe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ge(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const Kq={hasLayerViewModule:e=>K(Jq[e.type]),importLayerView:e=>{const t=Jq[e.type];if(ce(t))throw jRe(e);return t(e)}};function zRe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s=Number.POSITIVE_INFINITY,l=0,d=0;const y=[0,0],v=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const _ of v)for(let M=0;M<_.length-1;M++){t_e(y,r,_,M);const k=Q1(r,y);k<s&&(s=k,l=y[0],d=y[1])}return{coordinate:new ut({x:l,y:d,spatialReference:i}),distance:s}}var iO;const VRe=Ke.getLogger("esri.views.MapView");let j0=iO=class extends st{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(ce(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return uo(this.geometry,this.spatialReference)}catch(e){return VRe.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(ce(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?U6(this.normalizedGeometry,i):IX(this.normalizedGeometry,i))return e;const{coordinate:r}=zRe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new iO({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};g([S({constructOnly:!0})],j0.prototype,"geometry",void 0),g([S({readOnly:!0})],j0.prototype,"normalizedGeometry",null),g([S({constructOnly:!0})],j0.prototype,"spatialReference",void 0),j0=iO=g([Q("esri.views.2d.constraints.GeometryConstraint")],j0);var rO;let k2=rO=class extends st{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new rO({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};g([S()],k2.prototype,"enabled",void 0),g([S()],k2.prototype,"rotationEnabled",void 0),k2=rO=g([Q("esri.views.2d.constraints.RotationConstraint")],k2);const yae=k2;var nO;let Fo=nO=class extends st{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:l}=this,d=-1,y=-1,v=!1,_=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(M=>M.clone()),t.sort((M,k)=>k.scale-M.scale),t.forEach((M,k)=>M.level=k);for(const M of t)!v&&i>0&&i>=M.scale&&(d=M.level,v=!0),!_&&r>0&&r>=M.scale&&(y=e?e.level:-1,_=!0),e=M;s===-1&&(s=i===0?0:d),l===-1&&(l=r===0?t.length-1:y),s=Math.max(s,0),s=Math.min(s,t.length-1),l=Math.max(l,0),l=Math.min(l,t.length-1),s>l&&([s,l]=[l,s]),i=t[s].scale,r=t[l].scale,t.splice(0,s),t.splice(l-s+1,t.length),t.forEach((M,k)=>{this._lodByScale[M.scale]=M,this._scales[k]=M.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",l),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,l=t&&t.targetGeometry,d=r!==0&&e.scale<r,y=i!==0&&e.scale>i;if(d||y){const v=y?i:r;if(l){const _=(v-t.scale)/(e.scale-t.scale);s.x=l.x+(s.x-l.x)*_,s.y=l.y+(s.y-l.y)*_}e.scale=v}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new nO({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};g([S({readOnly:!0})],Fo.prototype,"effectiveLODs",void 0),g([S({readOnly:!0})],Fo.prototype,"effectiveMinZoom",void 0),g([S({readOnly:!0})],Fo.prototype,"effectiveMaxZoom",void 0),g([S({readOnly:!0})],Fo.prototype,"effectiveMinScale",void 0),g([S({readOnly:!0})],Fo.prototype,"effectiveMaxScale",void 0),g([S()],Fo.prototype,"lods",void 0),g([S()],Fo.prototype,"minZoom",void 0),g([S()],Fo.prototype,"maxZoom",void 0),g([S()],Fo.prototype,"minScale",void 0),g([S()],Fo.prototype,"maxScale",void 0),g([S()],Fo.prototype,"snapToZoom",void 0),Fo=nO=g([Q("esri.views.2d.constraints.ZoomConstraint")],Fo);const mae=Fo,URe={base:null,key:"type",typeMap:{extent:yi,polygon:go}};let Jr=class extends st{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var i,r,s;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(s=this.view)==null?void 0:s.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new j0({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new yae({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,s=this.minScale,l=this.maxScale,d=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===s&&e.maxScale===l&&e.snapToZoom===d?e:new mae({lods:t,minZoom:i,maxZoom:r,minScale:s,maxScale:l,snapToZoom:d})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};g([S({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],Jr.prototype,"effectiveLODs",void 0),g([S({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],Jr.prototype,"effectiveMinScale",void 0),g([S({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],Jr.prototype,"effectiveMaxScale",void 0),g([S({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],Jr.prototype,"effectiveMinZoom",void 0),g([S({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],Jr.prototype,"effectiveMaxZoom",void 0),g([S({types:URe,value:null})],Jr.prototype,"geometry",null),g([S({type:[QP]})],Jr.prototype,"lods",void 0),g([S()],Jr.prototype,"minScale",void 0),g([S()],Jr.prototype,"maxScale",void 0),g([S()],Jr.prototype,"minZoom",void 0),g([S()],Jr.prototype,"maxZoom",void 0),g([S()],Jr.prototype,"rotationEnabled",void 0),g([S()],Jr.prototype,"snapToZoom",void 0),g([S()],Jr.prototype,"view",void 0),g([S({readOnly:!0})],Jr.prototype,"version",null),g([S()],Jr.prototype,"_defaultLODs",null),g([S({type:j0})],Jr.prototype,"_geometry",null),g([S({type:yae})],Jr.prototype,"_rotation",null),g([S({readOnly:!0,type:mae})],Jr.prototype,"_zoom",null),Jr=g([Q("esri.views.2d.MapViewConstraints")],Jr);const gae=Jr;function BRe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function GRe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function vae(e,t,i,r,s,l,d,y,v,_){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=d,e[6]=y,e[7]=v,e[8]=_,e}function wae(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function qRe(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function HRe(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],y=t[5],v=t[6],_=t[7],M=t[8],k=M*d-y*_,O=-M*l+y*v,R=_*l-d*v;let D=i*k+r*O+s*R;return D?(D=1/D,e[0]=k*D,e[1]=(-M*r+s*_)*D,e[2]=(y*r-s*d)*D,e[3]=O*D,e[4]=(M*i-s*v)*D,e[5]=(-y*i+s*l)*D,e[6]=R*D,e[7]=(-_*i+r*v)*D,e[8]=(d*i-r*l)*D,e):null}function WRe(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],y=t[5],v=t[6],_=t[7],M=t[8];return e[0]=d*M-y*_,e[1]=s*_-r*M,e[2]=r*y-s*d,e[3]=y*v-l*M,e[4]=i*M-s*v,e[5]=s*l-i*y,e[6]=l*_-d*v,e[7]=r*v-i*_,e[8]=i*d-r*l,e}function JRe(e){const t=e[0],i=e[1],r=e[2],s=e[3],l=e[4],d=e[5],y=e[6],v=e[7],_=e[8];return t*(_*l-d*v)+i*(-_*s+d*y)+r*(v*s-l*y)}function TN(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],k=t[8],O=i[0],R=i[1],D=i[2],z=i[3],B=i[4],V=i[5],q=i[6],J=i[7],ne=i[8];return e[0]=O*r+R*d+D*_,e[1]=O*s+R*y+D*M,e[2]=O*l+R*v+D*k,e[3]=z*r+B*d+V*_,e[4]=z*s+B*y+V*M,e[5]=z*l+B*v+V*k,e[6]=q*r+J*d+ne*_,e[7]=q*s+J*y+ne*M,e[8]=q*l+J*v+ne*k,e}function sO(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],k=t[8],O=i[0],R=i[1];return e[0]=r,e[1]=s,e[2]=l,e[3]=d,e[4]=y,e[5]=v,e[6]=O*r+R*d+_,e[7]=O*s+R*y+M,e[8]=O*l+R*v+k,e}function bae(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=t[4],v=t[5],_=t[6],M=t[7],k=t[8],O=Math.sin(i),R=Math.cos(i);return e[0]=R*r+O*d,e[1]=R*s+O*y,e[2]=R*l+O*v,e[3]=R*d-O*r,e[4]=R*y-O*s,e[5]=R*v-O*l,e[6]=_,e[7]=M,e[8]=k,e}function KRe(e,t,i){const r=i[0],s=i[1],l=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=l*t[6],e[7]=l*t[7],e[8]=l*t[8],e}function ZRe(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function YRe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function XRe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function QRe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function eNe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function tNe(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=i+i,y=r+r,v=s+s,_=i*d,M=r*d,k=r*y,O=s*d,R=s*y,D=s*v,z=l*d,B=l*y,V=l*v;return e[0]=1-k-D,e[3]=M-V,e[6]=O+B,e[1]=M+V,e[4]=1-_-D,e[7]=R-z,e[2]=O-B,e[5]=R+z,e[8]=1-_-k,e}function iNe(e,t){const i=t[0],r=t[1],s=t[2],l=t[4],d=t[5],y=t[6],v=t[8],_=t[9],M=t[10],k=M*d-y*_,O=-M*l+y*v,R=_*l-d*v,D=i*k+r*O+s*R;if(!D)return null;const z=1/D;return e[0]=k*z,e[1]=(-M*r+s*_)*z,e[2]=(y*r-s*d)*z,e[3]=O*z,e[4]=(M*i-s*v)*z,e[5]=(-y*i+s*l)*z,e[6]=R*z,e[7]=(-_*i+r*v)*z,e[8]=(d*i-r*l)*z,e}function rNe(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],y=t[5],v=t[6],_=t[7],M=t[8],k=t[9],O=t[10],R=t[11],D=t[12],z=t[13],B=t[14],V=t[15],q=i*y-r*d,J=i*v-s*d,ne=i*_-l*d,re=r*v-s*y,ue=r*_-l*y,_e=s*_-l*v,xe=M*z-k*D,Ne=M*B-O*D,Ce=M*V-R*D,Ge=k*B-O*z,Ze=k*V-R*z,lt=O*V-R*B;let et=q*lt-J*Ze+ne*Ge+re*Ce-ue*Ne+_e*xe;return et?(et=1/et,e[0]=(y*lt-v*Ze+_*Ge)*et,e[1]=(v*Ce-d*lt-_*Ne)*et,e[2]=(d*Ze-y*Ce+_*xe)*et,e[3]=(s*Ze-r*lt-l*Ge)*et,e[4]=(i*lt-s*Ce+l*Ne)*et,e[5]=(r*Ce-i*Ze-l*xe)*et,e[6]=(z*_e-B*ue+V*re)*et,e[7]=(B*ne-D*_e-V*J)*et,e[8]=(D*ue-z*ne+V*q)*et,e):null}function nNe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function sNe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function oNe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function aNe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function _ae(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function lNe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function uNe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function cNe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function hNe(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],d=e[4],y=e[5],v=e[6],_=e[7],M=e[8],k=t[0],O=t[1],R=t[2],D=t[3],z=t[4],B=t[5],V=t[6],q=t[7],J=t[8];return Math.abs(i-k)<=Ot*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(r-O)<=Ot*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(s-R)<=Ot*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-D)<=Ot*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(d-z)<=Ot*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(y-B)<=Ot*Math.max(1,Math.abs(y),Math.abs(B))&&Math.abs(v-V)<=Ot*Math.max(1,Math.abs(v),Math.abs(V))&&Math.abs(_-q)<=Ot*Math.max(1,Math.abs(_),Math.abs(q))&&Math.abs(M-J)<=Ot*Math.max(1,Math.abs(M),Math.abs(J))}function pNe(e){const t=Ot,i=e[0],r=e[1],s=e[2],l=e[3],d=e[4],y=e[5],v=e[6],_=e[7],M=e[8];return Math.abs(1-(i*i+l*l+v*v))<=t&&Math.abs(1-(r*r+d*d+_*_))<=t&&Math.abs(1-(s*s+y*y+M*M))<=t}const dNe=TN,fNe=_ae;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:BRe,copy:GRe,set:vae,identity:wae,transpose:qRe,invert:HRe,adjoint:WRe,determinant:JRe,multiply:TN,translate:sO,rotate:bae,scale:KRe,scaleByVec2:ZRe,fromTranslation:YRe,fromRotation:XRe,fromScaling:QRe,fromMat2d:eNe,fromQuat:tNe,normalFromMat4Legacy:iNe,normalFromMat4:rNe,projection:nNe,str:sNe,frob:oNe,add:aNe,subtract:_ae,multiplyScalar:lNe,multiplyScalarAndAdd:uNe,exactEquals:cNe,equals:hNe,isOrthoNormal:pNe,mul:dNe,sub:fNe},Symbol.toStringTag,{value:"Module"}));function t4(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function yNe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function mNe(e,t,i,r,s,l,d,y,v){const _=new Float32Array(9);return _[0]=e,_[1]=t,_[2]=i,_[3]=r,_[4]=s,_[5]=l,_[6]=d,_[7]=y,_[8]=v,_}function gNe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:t4,clone:yNe,fromValues:mNe,createView:gNe},Symbol.toStringTag,{value:"Module"}));function xae(){return new Float32Array(2)}function vNe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Qg(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function wNe(e,t){return new Float32Array(e,t,2)}function Sae(){return xae()}function $ae(){return Qg(1,1)}function Mae(){return Qg(1,0)}function Eae(){return Qg(0,1)}const bNe=Sae(),_Ne=$ae(),xNe=Mae(),SNe=Eae();Object.freeze(Object.defineProperty({__proto__:null,create:xae,clone:vNe,fromValues:Qg,createView:wNe,zeros:Sae,ones:$ae,unitX:Mae,unitY:Eae,ZEROS:bNe,ONES:_Ne,UNIT_X:xNe,UNIT_Y:SNe},Symbol.toStringTag,{value:"Module"}));function $Ne(e){return e instanceof Float32Array&&e.length>=2}function MNe(e){return Array.isArray(e)&&e.length>=2}function a8(e){return $Ne(e)||MNe(e)}var oO;const ih=[0,0];let md=oO=class extends Ve{constructor(e){super(e),this._viewpoint2D={center:wi(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new yi,this.id=0,this.inverseTransform=Ic(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ic(),this.transformNoRotation=Ic(),this.displayMat3=t4(),this.displayViewMat3=t4(),this.viewMat3=t4(),this.viewMat2d=KS(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Bu(i,e.viewpoint),this._set("size",Xg(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new oO({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return a8(t)?bc(e,t,this.inverseTransform):(ih[0]=t,ih[1]=i,bc(e,ih,this.inverseTransform))}toScreen(e,t,i){return a8(t)?bc(e,t,this.transform):(ih[0]=t,ih[1]=i,bc(e,ih,this.transform))}toScreenNoRotation(e,t,i){return a8(t)?bc(e,t,this.transformNoRotation):(ih[0]=t,ih[1]=i,bc(e,ih,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return MN(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,l=this._get("size"),d=new Lu({targetGeometry:new ut(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",d),!l||!t||!i)return;this.resolution=Pv(d),this.rotation=r,this.scale=i,this.spatialReference=t,Xg(this.center,e);const y=l[0]!==0?2/l[0]:0,v=l[1]!==0?-2/l[1]:0;vae(this.displayMat3,y,0,0,0,v,0,-1,1,1);const _=wae(this.viewMat3),M=Qg(l[0]/2,l[1]/2),k=Qg(-l[0]/2,-l[1]/2),O=hP(r);sO(_,_,M),bae(_,_,O),sO(_,_,k),TN(this.displayViewMat3,this.displayMat3,_);const R=yN(this.viewMat2d,M);return s_(R,R,O),Yg(R,R,k),_Re(this.extent,d,l),EN(this.transform,d,l,s),A$(this.inverseTransform,this.transform),IRe(this.transformNoRotation,d,l,s),this.worldScreenWidth=kRe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};g([S({readOnly:!0})],md.prototype,"id",void 0),g([S({value:1,json:{write:!0}})],md.prototype,"pixelRatio",null),g([S({json:{write:!0}})],md.prototype,"size",null),g([S()],md.prototype,"spatialReference",void 0),g([S({type:Lu,json:{write:!0}})],md.prototype,"viewpoint",null),md=oO=g([Q("esri.views.2d.ViewState")],md);const Zq=md;var aO,lO;let Fh=aO=class extends st{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new aO({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};g([S()],Fh.prototype,"left",void 0),g([S()],Fh.prototype,"top",void 0),g([S()],Fh.prototype,"right",void 0),g([S()],Fh.prototype,"bottom",void 0),Fh=aO=g([Q("esri.views.2d.PaddedViewState.Padding")],Fh);let cm=lO=class extends Zq{constructor(...e){super(...e),this.paddedViewState=new Zq,this._updateContent=(()=>{const t=wi();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;Yn(t,r.left+r.right,r.top+r.bottom),kl(t,i,t),Xg(s.size,t);const l=s.viewpoint;l&&(this.viewpoint=l)}})(),this.own(Pe(()=>[this.size,this.padding],()=>this._updateContent(),L1)),this.padding=new Fh,this.size=[0,0]}set padding(e){this._set("padding",e||new Fh)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,ORe(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new lO({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};g([S()],cm.prototype,"paddedViewState",void 0),g([S({type:Fh})],cm.prototype,"padding",null),g([S()],cm.prototype,"viewpoint",null),cm=lO=g([Q("esri.views.2d.PaddedViewState")],cm);const ENe=cm;class TNe{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class Tae{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new cS(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&K(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let l=null;i&&(l=Ll(i,()=>s.abort()));const d=()=>{const M=this._processingItems.get(t);M&&M.controller.abort(),y(),_.reject(Cr())},y=()=>{v.remove(),K(l)&&l.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},v=jL(s.signal,d),_=sp();return this._deferreds.set(t,_),this._controllers.set(t,s),_.promise.then(y,y),this._queue.push(t),this._scheduleNext(),_.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=hv(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(ce(t))return;let i;const r=new AbortController,s=new TNe(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(l){this._processError(s,l)}dp(i)?(s.promise=i,i.then(l=>this._processResult(s,l),l=>this._processError(s,l))):this._processResult(s,i)}get test(){return{update:t=>this.runTask(t)}}}function INe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const l8=new Set,p5=[],Sy=new Map,Yq=[0,0];let jp=class extends st{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new Tae({concurrency:e,process:(i,r)=>{const s=this._keyToItem.get(i);return t(s,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(_=>{const M=this._keyToItem.get(_),k=this.tileInfoView.getTileScale(M.key);Sy.has(k)||(Sy.set(k,[]),i=Math.max(k,i),r=Math.min(k,r)),Sy.get(k).push(M.key),l8.add(k)});let s=this.state.scale;Sy.has(s)||(INe(p5,l8),p5.sort((_,M)=>_-M),s=p5.reduce((_,M)=>Math.abs(M-s)<Math.abs(_-s)?M:_,p5[0])),s=Math.min(s,i),s=Math.max(s,r);const l=Sy.get(s),d=t.getClosestInfoForScale(s),y=d.getColumnForX(this.state.center[0]),v=d.getRowForY(this.state.center[1]);return l.sort((_,M)=>{const k=d.denormalizeCol(_.col,_.world),O=d.denormalizeCol(M.col,M.world);return Math.sqrt((y-k)*(y-k)+(v-_.row)*(v-_.row))-Math.sqrt((y-O)*(y-O)+(v-M.row)*(v-M.row))}),l8.clear(),Sy.clear(),l[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,s=null;return e.forEach(l=>{const d=this._keyToItem.get(l);t.getTileCoords(Yq,d.key);const y=Q1(Yq,i);y<r&&(r=y,s=d.key)}),s.id}};g([S({constructOnly:!0})],jp.prototype,"concurrency",void 0),g([S({constructOnly:!0})],jp.prototype,"process",void 0),g([S()],jp.prototype,"state",void 0),g([S({constructOnly:!0})],jp.prototype,"strategy",void 0),g([S({constructOnly:!0})],jp.prototype,"tileInfoView",void 0),g([S({readOnly:!0})],jp.prototype,"updating",null),jp=g([Q("esri.views.2d.tiling.PagedTileQueue")],jp);class Vo{constructor(t,i,r,s){this.set(t,i,r,s)}static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Vo(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[l,d,y,v]=t.split("/");this.level=parseFloat(l),this.row=parseFloat(d),this.col=parseFloat(y),this.world=parseFloat(v)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Vo(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new Vo(t,i,r,s),new Vo(t,i,r+1,s),new Vo(t,i+1,r,s),new Vo(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Vo.pool=new Fu(Vo,null,null,25,50);function zp(e,t){return[e,t]}function Ff(e,t,i){return e[0]=t,e[1]=i,e}function CNe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const Jl=new Vo("0/0/0/0");class IN{constructor(t,i,r,s,l,d,y,v,_,M,k,O){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=l,this.last=d,this.size=y,this.norm=v,this.worldStart=_,this.worldEnd=M,this.worldSize=k,this.wrap=O}static create(t,i,r=null){const s=La(t.spatialReference),l=i.origin||zp(t.origin.x,t.origin.y),d=zp(t.size[0]*i.resolution,t.size[1]*i.resolution),y=zp(-1/0,-1/0),v=zp(1/0,1/0),_=zp(1/0,1/0);K(r)&&(Ff(y,Math.max(0,Math.floor((r.xmin-l[0])/d[0])),Math.max(0,Math.floor((l[1]-r.ymax)/d[1]))),Ff(v,Math.max(0,Math.floor((r.xmax-l[0])/d[0])),Math.max(0,Math.floor((l[1]-r.ymin)/d[1]))),Ff(_,v[0]-y[0]+1,v[1]-y[1]+1));const{cols:M,rows:k}=i;let O,R,D,z;return!r&&M&&k&&(Ff(y,M[0],k[0]),Ff(v,M[1],k[1]),Ff(_,M[1]-M[0]+1,k[1]-k[0]+1)),t.isWrappable?(O=zp(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),_[1]),R=zp(Math.floor((s.origin[0]-l[0])/d[0]),y[1]),D=zp(O[0]+R[0]-1,v[1]),z=!0):(R=y,D=v,O=_,z=!1),new IN(i.level,i.resolution,i.scale,l,y,v,_,d,R,D,O,z)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){Jl.set(i);const s=r?Jl.col:this.denormalizeCol(Jl.col,Jl.world),l=Jl.row;return CNe(t,this.getXForColumn(s),this.getYForRow(l+1),this.getXForColumn(s+1),this.getYForRow(l)),t}getTileCoords(t,i,r=!1){Jl.set(i);const s=r?Jl.col:this.denormalizeCol(Jl.col,Jl.world);return Array.isArray(t)?Ff(t,this.getXForColumn(s),this.getYForRow(Jl.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(Jl.row)),t}}class ev{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:l}=s;if(r.length!==0)for(const{row:d,colFrom:y,colTo:v}of r)for(let _=y;_<=v;_++)t.call(i,l,d,s.normalizeCol(_),s.getWorldForColumn(_))}}ev.pool=new Fu(ev);class u8{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const dr=new Vo("0/0/0/0");class CN{constructor(t,i,r,s,l,d,y,v){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=l,this.rightAdjust=d,this.leftBound=y,this.rightBound=v}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[l,d]=i,y=l-r,v=d-s,_=v!==0?y/v:0,M=(Math.ceil(s)-s)*_,k=(Math.floor(s)-s)*_;return new CN(r,Math.floor(s),Math.ceil(d),_,y<0?M:k,y<0?k:M,y<0?l:r,y<0?r:l)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const ca=[[0,0],[0,0],[0,0],[0,0]],kNe=1e-6;class ANe{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((l,d)=>d.scale-l.scale);const s=this._lodInfos=r.map(l=>IN.create(t,l,i));r.forEach((l,d)=>{this._infoByLevel[l.level]=s[d],this._infoByScale[l.scale]=s[d],this.scales[d]=l.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){dr.set(i);const s=this._infoByLevel[dr.level];return s?s.getTileBounds(t,dr,r):t}getTileCoords(t,i,r=!1){dr.set(i);const s=this._infoByLevel[dr.level];return s?s.getTileCoords(t,dr,r):t}getTileCoverage(t,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),l=ev.pool.acquire(s),d=this._wrap;let y,v,_,M=1/0,k=-1/0;const O=l.spans;ca[0][0]=ca[0][1]=ca[1][1]=ca[3][0]=-i,ca[1][0]=ca[2][0]=t.size[0]+i,ca[2][1]=ca[3][1]=t.size[1]+i;for(const B of ca)t.toMap(B,B),B[0]=s.getColumnForX(B[0]),B[1]=s.getRowForY(B[1]);const R=[];let D=3;for(let B=0;B<4;B++){if(ca[B][1]===ca[D][1]){D=B;continue}const V=CN.create(ca[B],ca[D]);M=Math.min(V.ymin,M),k=Math.max(V.ymax,k),R[V.ymin]===void 0&&(R[V.ymin]=[]),R[V.ymin].push(V),D=B}if(M==null||k==null||k-M>100)return null;let z=[];for(y=M;y<k;){R[y]!=null&&(z=z.concat(R[y])),v=1/0,_=-1/0;for(let B=z.length-1;B>=0;B--){const V=z[B];v=Math.min(v,V.getLeftCol()),_=Math.max(_,V.getRightCol())}if(v=Math.floor(v),_=Math.floor(_),y>=s.first[1]&&y<=s.last[1])if(d)if(s.size[0]<s.worldSize[0]){const B=Math.floor(_/s.worldSize[0]);for(let V=Math.floor(v/s.worldSize[0]);V<=B;V++)O.push(new u8(y,Math.max(s.getFirstColumnForWorld(V),v),Math.min(s.getLastColumnForWorld(V),_)))}else O.push(new u8(y,v,_));else v>s.last[0]||_<s.first[0]||(v=Math.max(v,s.first[0]),_=Math.min(_,s.last[0]),O.push(new u8(y,v,_)));y+=1;for(let B=z.length-1;B>=0;B--){const V=z[B];V.ymax>=y?V.incrRow():z.splice(B,1)}}return l}getTileParentId(t){dr.set(t);const i=this._infoByLevel[dr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(dr,this._lodInfos[r],dr),dr.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){dr.set(i);const r=this._infoByLevel[dr.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(dr,s,dr);const d=s.denormalizeCol(dr.col,dr.world);for(const y of t.spans)if(y.row===dr.row&&y.colFrom<=d&&y.colTo>=d)return!0}if(s.resolution<r.resolution){const[d,y,v,_]=t.spans.reduce((z,B)=>(z[0]=Math.min(z[0],B.row),z[1]=Math.max(z[1],B.row),z[2]=Math.min(z[2],B.colFrom),z[3]=Math.max(z[3],B.colTo),z),[1/0,-1/0,1/0,-1/0]),M=r.denormalizeCol(dr.col,dr.world),k=s.getColumnForX(r.getXForColumn(M)),O=s.getRowForY(r.getYForRow(dr.row)),R=s.getColumnForX(r.getXForColumn(M+1))-1,D=s.getRowForY(r.getYForRow(dr.row+1))-1;return!(k>_||R<v||O>y||D<d)}const l=s.denormalizeCol(dr.col,dr.world);return t.spans.some(d=>d.row===dr.row&&d.colFrom<=l&&d.colTo>=l)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=La(this.tileInfo.spatialReference),l=-r*(s.valid[1]-s.valid[0]);t[0]+=l,t[2]+=l}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+kNe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}}function ONe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const c8=new Set,d5=[],$y=new Map,Xq=[0,0];let $h=class extends st{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new Tae({concurrency:e,process:(r,s)=>{const l=this._keyToItem.get(r);return t(l,{signal:s})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(_=>{const M=this._keyToItem.get(_),k=this.tileInfoView.getTileScale(M.key);$y.has(k)||($y.set(k,[]),i=Math.max(k,i),r=Math.min(k,r)),$y.get(k).push(M.key),c8.add(k)});let s=this.state.scale;$y.has(s)||(ONe(d5,c8),d5.sort((_,M)=>_-M),s=d5.reduce((_,M)=>Math.abs(M-s)<Math.abs(_-s)?M:_,d5[0])),s=Math.min(s,i),s=Math.max(s,r);const l=$y.get(s),d=t.getClosestInfoForScale(s),y=d.getColumnForX(this.state.center[0]),v=d.getRowForY(this.state.center[1]);return l.sort((_,M)=>{const k=d.denormalizeCol(_.col,_.world),O=d.denormalizeCol(M.col,M.world);return Math.sqrt((y-k)*(y-k)+(v-_.row)*(v-_.row))-Math.sqrt((y-O)*(y-O)+(v-M.row)*(v-M.row))}),c8.clear(),$y.clear(),l[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,s=null;return e.forEach(l=>{const d=this._keyToItem.get(l);t.getTileCoords(Xq,d.key);const y=Q1(Xq,i);y<r&&(r=y,s=d.key)}),s.id}};g([S({constructOnly:!0})],$h.prototype,"concurrency",void 0),g([S({constructOnly:!0})],$h.prototype,"process",void 0),g([S()],$h.prototype,"state",void 0),g([S({constructOnly:!0})],$h.prototype,"strategy",void 0),g([S({constructOnly:!0})],$h.prototype,"tileInfoView",void 0),g([S({readOnly:!0})],$h.prototype,"updating",null),$h=g([Q("esri.views.2d.tiling.TileQueue")],$h);const AKe=$h;class LNe{constructor(t,i,r){this.maxSize=t,this.tileInfoView=i,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const r=i.key.level,s=this._tileKeysPerLevel[r];Qq(this._tilePerId,t);for(let l=0;l<s.length;l++)if(s[l].id===t){s.splice(l,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let l=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&l>=0;)l!==t&&(s=this._pruneAroundCenterTile(s,i,r,l)),l--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const l=this._tileKeysPerLevel[s];if(!l||l.length===0)return t;const{size:d,origin:y}=this.tileInfoView.tileInfo,v=r*d[0],_=r*d[1],M=[0,0],k=[0,0];for(l.sort((O,R)=>(M[0]=y.x+v*(O.col+.5),M[1]=y.y-_*(O.row+.5),k[0]=y.x+v*(R.col+.5),k[1]=y.y-_*(R.row+.5),b3(M,i)-b3(k,i)));l.length>0;){const O=l.pop();if(this._removeTile(O.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),Qq(this._tilePerId,t)}}function Qq(e,t){e.delete(t)}const Df=new Vo(0,0,0,0),el=new Map,My=[],f5=[];class OKe{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new LNe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(f5.length=0,My.length=0,el.clear(),!s)return;const{minScale:l,maxScale:d}=this.tileInfoView.tileInfo,{spans:y,lodInfo:v}=s,{level:_}=v,{scale:M,center:k,resolution:O}=t.state,R=!t.stationary&&M>this._previousScale;if(this._previousScale=M,this.tiles.length=0,!i&&(M>l||M<d))return this.tiles.length=0,el.clear(),r.forEach(V=>{this.releaseTile(V)}),r.clear(),f5.length=0,My.length=0,el.clear(),ev.pool.release(s),!0;r.forEach(V=>V.visible=!0);let D=0,z=0;if(y.length>0)for(const{row:V,colFrom:q,colTo:J}of y)for(let ne=q;ne<=J;ne++){D++;const re=Df.set(_,V,v.normalizeCol(ne),v.getWorldForColumn(ne)).id;if(r.has(re)){const ue=r.get(re);ue.isReady?(el.set(re,ue),z++):R||this._addParentTile(re,el)}else{let ue;if(this._tileCache&&this._tileCache.has(re)){if(ue=this._tileCache.pop(re),this.tileIndex.set(re,ue),ue.isReady){el.set(re,ue),z++;continue}}else ue=this.acquireTile(Df),this.tileIndex.set(re,ue);R||this._addParentTile(re,el)}}const B=z===D;r.forEach((V,q)=>{if(Df.set(q),el.has(q))return;const J=this.tileInfoView.intersects(s,Df),ne=this.cachePolicy==="purge"?Df.level!==_:Df.level>_;!J||!R&&B?!ne&&J||My.push(q):V.isReady?ne&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Df,_)?My.push(q):f5.push(q):ne&&My.push(q)});for(const V of f5){const q=r.get(V);q&&q.isReady&&el.set(V,q)}for(const V of My){const q=r.get(V);this._tileCache?this._tileCache.add(q):this.releaseTile(q),r.delete(V)}return el.forEach(V=>this.tiles.push(V)),r.forEach(V=>{el.has(V.key.id)||(V.visible=!1)}),this._tileCache&&this._tileCache.prune(_,k,O),ev.pool.release(s),el.clear(),B}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=Va();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const l=Va();if(this.tileInfoView.getTileBounds(l,s.key,!0),Axe(l,r))return!0}return!1}}function kN(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class eH extends rs{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){kN(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class PNe extends rs{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:l}=i,{view:d}=this,{mapViewNavigation:y}=d;switch(s){case"begin":{const{scale:v}=d;this._startScale=v,this._currentScale=v,this._previousDelta=l,y.begin();break}case"update":{if(this._previousDelta.y===l.y)return;this._previousDelta=l;const v=1.015**l.y,_=this._startScale*v,M=_/this._currentScale;y.setViewpointImmediate(M),this._currentScale=_;break}case"end":{const{constraints:v}=d,{effectiveLODs:_,snapToZoom:M}=v;if(!M||!_)return void y.end();const k=v.snapScale(this._currentScale),O=(l.y>0?Math.max(k,v.snapToPreviousScale(this._startScale)):Math.min(k,v.snapToNextScale(this._startScale)))/this._currentScale;y.zoom(O);break}}}}class F${constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this.currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class RNe extends rs{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new F$({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&kN(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class NNe extends rs{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i;const s=this.view.mapViewNavigation;this.dragEventSeparator=new F$({start:(l,d)=>{s.rotate.begin(this.view,d.data),d.stopPropagation()},update:(l,d)=>{s.rotate.update(this.view,d.data),d.stopPropagation()},end:(l,d)=>{s.rotate.end(),d.stopPropagation()},condition:(l,d)=>l===1&&kN(d.data,this.pointerAction)}),this.registerIncoming("drag",r,l=>this.dragEventSeparator.handle(l))}}function Kl(e){let t=e*e;return e<0&&(t*=-1),t}function FNe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function DNe(e,t,i){const r=i,s=e.state,l=e.device,d=t.tiltDirection==="forward-down"?1:-1,y=1;return l.deviceType==="standard"?(r.translation[0]=Kl(s.axes[0]),r.translation[1]=Kl(s.axes[1]),r.translation[2]=Kl(s.buttons[7])-Kl(s.buttons[6]),r.heading=Kl(s.axes[2]),r.tilt=Kl(s.axes[3])):l.deviceType==="spacemouse"&&(r.translation[0]=1.2*Kl(s.axes[0]),r.translation[1]=1.2*Kl(s.axes[1]),r.translation[2]=2*-Kl(s.axes[2]),r.heading=1.2*Kl(s.axes[5]),r.tilt=1.2*Kl(s.axes[3])),r.tilt*=d,Nl(r.translation,r.translation,y),r}function jNe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class zNe extends rs{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new ir,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([Pe(()=>{var i;return(i=this.view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=Pg({update:r=>this._frameUpdate(r.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},Jt)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,FNe(this.transformation)):(this.currentDevice=t.data.device,DNe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(jNe(i))return;const r=this.view.viewpoint.clone(),s=this.view.navigation.gamepad.velocityFactor,l=UNe*s*t;N$(r,r,[i.translation[0]*l,-i.translation[1]*l]);const d=1+i.translation[2]*BNe*t,y=this.view.constraints.rotationEnabled?-i.heading*VNe*t:0,v=this.view.size,_=[v[0]/2,v[1]];pae(r,r,d,y,_,v);const M=this.view.constraints.constrain(r,this.view.viewpoint);this.view.viewpoint=M}}const VNe=.06,UNe=.7,BNe=6e-4;class GNe extends rs{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class qNe extends rs{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var Zm;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Zm||(Zm={}));class HNe extends rs{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=Zm.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=Zm.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:l}=this.view;let d=null;switch(s){case Zm.IN:d=l.zoomIn();break;case Zm.OUT:d=l.zoomOut();break;default:return}l.begin(),d.then(()=>l.end()),t.stopPropagation()}}const WNe=.6;class JNe extends rs{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:r,y:s,deltaY:l}=t.data,d=1/WNe**(1/60*l),y=i.zoom(d,[r,s]);y&&(this._canZoom=!1,y.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class KNe extends rs{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new F$({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function tH(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>XNe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function ZNe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function YNe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function XNe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class QNe{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=l=>{this._connectGamepad(l.gamepad)},this._onDisconnectGamepad=l=>{const d=l.gamepad,y=d.index,v=this.inputDevices[y];v&&(this._emitGamepadEvent(d,tH(v),!1),this.inputDevices.splice(y,1),this.latestUpdate.splice(y,1),this.input.gamepad.devices.remove(v),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(l=>this._connectGamepad(l)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new wN(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=Pg({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),r=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const l=this.inputDevices[s.index];if(!l)return;const d=this.latestUpdate[s.index],y=tH(l),v=r||YNe(y);d&&(d.timestamp===s.timestamp||!d.active&&v||ZNe(d.state,y))||this._emitGamepadEvent(s,y,!v)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&t(s)}}_emitGamepadEvent(t,i,r){const s=this.latestUpdate[t.index],l=s&&s.active;if(!l&&!r)return;const d=!l&&r?"start":l&&r?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:d})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const iH=ke("trident"),rH=ke("edge"),eFe=ke("chrome"),tFe=ke("ff"),iFe=ke("safari"),Ey={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class D${constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new QNe(t,this.input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(h8[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&h8[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(h8[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ey.touchNone:Ey.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ey.touchPan:Ey.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ey.touchNone),this._element.classList.remove(Ey.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=zoe(this._element,t);return D$.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=BLe(i);r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(iH||rH)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}iH||rH?r*=.7:eFe||iFe?r*=.6:tFe&&(r*=1.375);const s=100,l=Math.abs(r);l>s&&(r=r/l*200/(1+Math.exp(-.02*(l-s))));const d=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,d)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}D$.test={disableSubpixelCoordinates:!1};const h8={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class rFe extends rs{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function AN(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function nFe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function sFe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Un()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[J,ne]=e,[re,ue]=[ne.x-J.x,ne.y-J.y];return t.radius=Math.sqrt(re*re+ue*ue)/2,t.center.x=(J.x+ne.x)/2,t.center.y=(J.y+ne.y)/2,t}let i=0,r=0;for(let J=0;J<e.length;J++)i+=e[J].x,r+=e[J].y;i/=e.length,r/=e.length;const s=e.map(J=>J.x-i),l=e.map(J=>J.y-r);let d=0,y=0,v=0,_=0,M=0,k=0,O=0;for(let J=0;J<s.length;J++){const ne=s[J],re=l[J],ue=ne*ne,_e=re*re;d+=ue,y+=_e,v+=ne*re,_+=ue*ne,M+=_e*re,k+=ne*_e,O+=re*ue}const R=.5*(_+k),D=.5*(M+O),z=d*y-v*v,B=(R*y-D*v)/z,V=(d*D-v*R)/z,q=Un(B+i,V+r);return{radius:Math.sqrt(B*B+V*V+(d+y)/e.length),center:q}}const El={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class oFe extends rs{constructor(t=El.maximumDoubleClickDelay,i=El.maximumDoubleClickDistance,r=El.maximumDoubleTouchDelay,s=El.maximumDoubleTouchDistance,l=A3){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=l,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=po(t.doubleClickTimeout))}get hasPendingInputs(){return R6(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,r=this._pointerId(i),s=this._pointerState.get(r);if(s){const l=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;AN(s.event.data,i)>l?(this._clearDoubleClickTimeout(r,!0),this._startClick(t)):(this._clearDoubleClickTimeout(r,!1),this._doubleClick.emit(s.event.data,void 0,s.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),r)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimeout.remove(),r.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class aFe extends rs{constructor(t=El.maximumDoubleClickDelay,i=El.maximumDoubleClickDistance,r=El.maximumDoubleTouchDelay,s=El.maximumDoubleTouchDistance,l=A3){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=l,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Un(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new F$({start:(d,y)=>this._dragStart(d,y),update:(d,y)=>this._dragUpdate(y),end:(d,y)=>this._dragEnd(y)}),this.registerIncoming("drag",d=>this._dragEventSeparator.handle(d)),this.registerIncoming("pointer-down",d=>this._handlePointerDown(d)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return R6(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:s,buttons:l,pointer:d,pointers:y,pointerType:v,timestamp:_}=r;return{action:t,delta:i,button:s,buttons:l,pointer:d,pointers:y,pointerType:v,timestamp:_}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:l}=r;this._dragStartCenter=l;const d=this._createDoubleTapDragData("begin",Un(0,0),r);this._doubleTapDrag.emit(d,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,l=Un(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),d=this._createDoubleTapDragData("update",l,i);this._doubleTapDrag.emit(d,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,l=Un(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),d=this._createDoubleTapDragData("end",l,i);this._doubleTapDrag.emit(d,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=this._pointerId(i),s=this._pointerState.get(r),{pointerType:l}=i.native;if(s){const d=l==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(r),AN(s.event.data,i)>d?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:r,button:s,pointerType:l}=i;return l==="mouse"?`${r}:${s}`:`${l}`}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=this._pointerId(i),l=r==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,d=this._clock.setTimeout(()=>this._clearPointerDown(s),l);this._pointerState.set(s,{event:t,doubleTapTimeout:d}),this.refreshHasPendingInputs()}}class lFe extends rs{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:s,pointers:uFe(this.activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=y5(this.activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,s);const l=i4(s,Iae(this.activePointerMap));s.initialAngle=l,s.lastAngle=l,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this.activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=y5(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=y5(this.activePointerMap);this.activePointerMap.forEach(r=>{r.initialAngle=i4(r,i)-t,r.lastAngle=i4(r,i)-t})}_emitEvent(t,i,r){const s=y5(this.activePointerMap);this.drag.emit(this._createPayload(t,i,s,r),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this.isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(r),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function Iae(e){const t=[];return e.forEach(i=>{t.push(Un(i.event.x,i.event.y))}),sFe(t)}function y5(e){const t=Iae(e);let i=0;return e.forEach(r=>{let s=i4(r,t),l=s-r.lastAngle;for(;l>Math.PI;)l-=2*Math.PI;for(;l<-Math.PI;)l+=2*Math.PI;s=r.lastAngle+l,r.lastAngle=s,i+=s-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function uFe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function i4(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var nH;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(nH||(nH={}));class cFe extends rs{constructor(t=El.maximumDoubleClickDelay,i=El.maximumDoubleClickDistance,r=El.maximumDoubleTouchDelay,s=El.maximumDoubleTouchDistance,l=A3){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=l,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",d=>{this._handlePointerLoss(d,"pointer-up")}),this.registerIncoming("pointer-capture-lost",d=>{this._handlePointerLoss(d,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",d=>{this._handlePointerLoss(d,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=this._pointerId(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const r=t.data,s=this._pointerId(r),l=this._pointerState.get(s);if(l&&i==="pointer-up"&&l.downButton===r.native.button){const d=l.immediateDoubleClick;if(d){d.timeoutHandle.remove();const y=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;AN(d,t.data)>y?this._startImmediateDoubleClick(t,l):(this._immediateDoubleClick.emit(t.data,void 0,d.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,l)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const Cw={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class hFe extends rs{constructor(t=Cw.maximumClickDelay,i=Cw.movementUntilMouseDrag,r=Cw.movementUntilPenDrag,s=Cw.movementUntilTouchDrag,l=Cw.holdDelay,d=A3){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=r,this.movementUntilTouchDrag=s,this.holdDelay=l,this._clock=d,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",y=>{this._handlePointerLoss(y,"pointer-up")}),this.registerIncoming("pointer-capture-lost",y=>{this._handlePointerLoss(y,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",y=>{this._handlePointerLoss(y,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const d=this._pointerState.get(r);if(d){if(!d.isDragging){const y=d.previousEvent;this._pointerHold.emit(y,void 0,t.modifiers),d.holdEmitted=!0}d.holdTimeout=null}},this.holdDelay));const l={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,l),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):nFe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,l=this._pointerState.get(s);l&&(l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",l,i==="pointer-up"?r:l.previousEvent),void 0,l.modifiers):i==="pointer-up"&&l.downButton===r.native.button&&t.timestamp-l.startTimestamp<=this.maximumClickDelay&&!l.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const m5={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let hm=class extends st{constructor(){super(...arguments),this._handles=new ir}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([gs(()=>!e(),()=>this._disconnect()),gs(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new D$(e,this.view.input),i=[new cFe,new hFe,new oFe,new lFe(this.view.navigation),new aFe],r=new pd({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new rFe],St.INTERNAL),r.installHandlers("navigation",[new KNe(this.view),new zNe(this.view),new JNe(this.view),new eH(this.view),new eH(this.view,[m5.counter]),new RNe(this.view,"primary"),new GNe(this.view,m5.pan),new HNe(this.view,m5.zoom),new qNe(this.view,m5.rotate),new NNe(this.view,"secondary"),new PNe(this.view,"touch")],St.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,Pe(()=>{var s,l;return(l=(s=this.view)==null?void 0:s.navigation)==null?void 0:l.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},Jt)}get test(){return{inputManager:this._inputManager}}};g([S()],hm.prototype,"view",void 0),g([S()],hm.prototype,"latestPointerType",null),g([S()],hm.prototype,"latestPointerLocation",null),hm=g([Q("esri.views.2d.input.MapViewInputManager")],hm);const pFe=hm;var sH,oH,aH,Cae={exports:{}};sH=Cae,oH=function(){function e(s,l,d,y,v){t(s,l,d||0,y||s.length-1,v||r)}function t(s,l,d,y,v){for(;y>d;){if(y-d>600){var _=y-d+1,M=l-d+1,k=Math.log(_),O=.5*Math.exp(2*k/3),R=.5*Math.sqrt(k*O*(_-O)/_)*(M-_/2<0?-1:1);t(s,l,Math.max(d,Math.floor(l-M*O/_+R)),Math.min(y,Math.floor(l+(_-M)*O/_+R)),v)}var D=s[l],z=d,B=y;for(i(s,d,l),v(s[y],D)>0&&i(s,d,y);z<B;){for(i(s,z,B),z++,B--;v(s[z],D)<0;)z++;for(;v(s[B],D)>0;)B--}v(s[d],D)===0?i(s,d,B):i(s,++B,y),B<=l&&(d=B+1),l<=B&&(y=B-1)}}function i(s,l,d){var y=s[l];s[l]=s[d],s[d]=y}function r(s,l){return s<l?-1:s>l?1:0}return e},(aH=oH())!==void 0&&(sH.exports=aH);const dFe=Cae.exports;function t6(e,t){if(!(this instanceof t6))return new t6(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function fFe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Ty(e,t){A2(e,0,e.children.length,t,e)}function A2(e,t,i,r,s){s||(s=pm(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var l,d=t;d<i;d++)l=e.children[d],O2(s,e.leaf?r(l):l);return s}function O2(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function lH(e,t){return e.minX-t.minX}function uH(e,t){return e.minY-t.minY}function p8(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function g5(e){return e.maxX-e.minX+(e.maxY-e.minY)}function yFe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function mFe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),l=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,l-r)}function d8(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function v5(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function pm(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cH(e,t,i,r,s){for(var l,d=[t,i];d.length;)(i=d.pop())-(t=d.pop())<=r||(l=t+Math.ceil((i-t)/r/2)*r,dFe(e,l,t,i,s),d.push(t,l,l,i))}t6.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!v5(e,t))return i;for(var s,l,d,y,v=[];t;){for(s=0,l=t.children.length;s<l;s++)d=t.children[s],v5(e,y=t.leaf?r(d):d)&&(t.leaf?i.push(d):d8(e,y)?this._all(d,i):v.push(d));t=v.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!v5(e,t))return!1;for(var r,s,l,d,y=[];t;){for(r=0,s=t.children.length;r<s;r++)if(l=t.children[r],v5(e,d=t.leaf?i(l):l)){if(t.leaf||d8(e,d))return!0;y.push(l)}t=y.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=pm([]),this},remove:function(e,t){if(!e)return this;for(var i,r,s,l,d=this.data,y=this.toBBox(e),v=[],_=[];d||v.length;){if(d||(d=v.pop(),r=v[v.length-1],i=_.pop(),l=!0),d.leaf&&(s=fFe(e,d.children,t))!==-1)return d.children.splice(s,1),v.push(d),this._condense(v),this;l||d.leaf||!d8(d,y)?r?(i++,d=r.children[i],l=!1):d=null:(v.push(d),_.push(i),i=0,r=d,d=d.children[0])}return this},toBBox:function(e){return e},compareMinX:lH,compareMinY:uH,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,l=i-t+1,d=this._maxEntries;if(l<=d)return Ty(s=pm(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(l)/Math.log(d)),d=Math.ceil(l/Math.pow(d,r-1))),(s=pm([])).leaf=!1,s.height=r;var y,v,_,M,k=Math.ceil(l/d),O=k*Math.ceil(Math.sqrt(d));for(cH(e,t,i,O,this.compareMinX),y=t;y<=i;y+=O)for(cH(e,y,_=Math.min(y+O-1,i),k,this.compareMinY),v=y;v<=_;v+=k)M=Math.min(v+k-1,_),s.children.push(this._build(e,v,M,r-1));return Ty(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,l,d,y,v,_,M,k;r.push(t),!t.leaf&&r.length-1!==i;){for(M=k=1/0,s=0,l=t.children.length;s<l;s++)v=p8(d=t.children[s]),(_=yFe(e,d)-v)<k?(k=_,M=v<M?v:M,y=d):_===k&&v<M&&(M=v,y=d);t=y||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),l=[],d=this._chooseSubtree(s,this.data,t,l);for(d.children.push(e),O2(d,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var l=this._chooseSplitIndex(i,s,r),d=pm(i.children.splice(l,i.children.length-l));d.height=i.height,d.leaf=i.leaf,Ty(i,this.toBBox),Ty(d,this.toBBox),t?e[t-1].children.push(d):this._splitRoot(i,d)},_splitRoot:function(e,t){this.data=pm([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ty(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,l,d,y,v,_,M;for(v=_=1/0,r=t;r<=i-t;r++)d=mFe(s=A2(e,0,r,this.toBBox),l=A2(e,r,i,this.toBBox)),y=p8(s)+p8(l),d<v?(v=d,M=r,_=y<_?y:_):d===v&&y<_&&(_=y,M=r);return M},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:lH,s=e.leaf?this.compareMinY:uH;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,l,d=this.toBBox,y=A2(e,0,t,d),v=A2(e,i-t,i,d),_=g5(y)+g5(v);for(s=t;s<i-t;s++)l=e.children[s],O2(y,e.leaf?d(l):l),_+=g5(y);for(s=i-t-1;s>=t;s--)l=e.children[s],O2(v,e.leaf?d(l):l),_+=g5(v);return _},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)O2(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Ty(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class i6{constructor(t,i){this.key=new Vo(0,0,0,0),this.bounds=Va(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return yi.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=ao.acquire();for(let r=0;r<t.length;r++)i[r]=new i6(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return ure.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const jf={added:[],removed:[]},f8=new Set,gFe=new Vo(0,0,0,0);class vFe extends bs{constructor(t){super(),this._tiles=new Map,this._index=t6(9,ke("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new i6(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:l}=s;if(r.length>0)for(const{row:d,colFrom:y,colTo:v}of r)for(let _=y;_<=v;_++){const M=gFe.set(l,d,s.normalizeCol(_),s.getWorldForColumn(_)).id;if(f8.add(M),!this.has(M)){const k=new i6(this.tileScheme,M);this._tiles.set(M,k),this._index.insert(k),this.tiles.push(k),jf.added.push(k)}}for(let d=this.tiles.length-1;d>=0;d--){const y=this.tiles[d];f8.has(y.id)||(this._tiles.delete(y.id),this.tiles.splice(d,1),this._index.remove(y),jf.removed.push(y))}(jf.added.length||jf.removed.length)&&this.emit("update",jf),ev.pool.release(i),f8.clear(),jf.added.length=0,jf.removed.length=0}}let wFe=0,gd=class extends st{constructor(){super(...arguments),this.color=new ot([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return wFe++}};g([S({readOnly:!0})],gd.prototype,"version",null),g([S({type:ot})],gd.prototype,"color",void 0),g([S({type:ot})],gd.prototype,"haloColor",void 0),g([S()],gd.prototype,"haloOpacity",void 0),g([S()],gd.prototype,"fillOpacity",void 0),gd=g([Q("esri.views.2d.support.HighlightOptions")],gd);const kae=gd,bFe=e=>e.includes("Brush");class Aae{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),bFe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function _Fe(e,t,i,r,s,l,d,y){let v;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?v=[e.width,e.height]:e.width==null&&e.height!=null?v=[e.height,e.height]:e.width!=null&&e.height==null?v=[e.width,e.width]:e.width==null&&e.height==null&&(v=null);const _=i[0]-(r.left+r.right),M=i[1]-(r.top+r.bottom);let k,O,R=e.area||{x:0,y:0,width:_,height:M};if(v){const D=_/M,z=v[0]/v[1];if(z>D){const B=R.width/z;R={x:R.x,y:Math.round(R.y+(R.height-B)/2),width:R.width,height:Math.round(B)}}else{const B=R.height*z;R={x:Math.round(R.x+(R.width-B)/2),y:R.y,width:Math.round(B),height:R.height}}}else v=[R.width,R.height];return v[0]>R.width?(k=Math.min(v[0]/R.width,t),O=v[0]/R.width/k):(k=1,O=v[0]/R.width),{resolutionScale:k,cropArea:{x:Math.round((R.x+r.left)*k),y:Math.round((R.y+r.top)*k),width:Math.round(R.width*k),height:Math.round(R.height*k)},outputScale:O,format:s,quality:l,children:d,rotation:y}}function xFe(e,t,i){const{ctx:r,canvas:s}=Oae(e,i),l=r.getImageData(0,0,e.width,e.height),d=MFe(s,t);return Lae(s),{dataUrl:d,data:l}}function SFe(e,t){const{ctx:i,canvas:r}=Oae(e,t),s=i.getImageData(0,0,e.width,e.height);return Lae(r),s}function Oae(e,t){const i=$Fe();t.premultipliedAlpha&&AFe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r.putImageData(e,0,0),t.flipY&&kFe(r),{ctx:r,canvas:i}}function Lae(e){e.width=0,e.height=0}function $Fe(){return ce(y8)&&(y8=document.createElement("canvas")),y8}let y8=null;function MFe(e,t){const i=OFe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function EFe(e,t){const i=CFe(e),r=PFe[i];return{format:i,quality:Bs(t!=null?t:r,0,100)}}function TFe(e,t){return t/Math.max(e[0],e[1])}function LKe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(r6)try{return new ImageData(e,t)}catch{r6=!1}return Pae(e,t,i)}function PKe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(r6)try{return new ImageData(e,t,i)}catch{r6=!1}const s=Pae(t,i,r);return s.data.set(e,0),s}function RKe(e,t,i,r=0,s=0,l=e.width-r,d=e.height-s,y=!1){const{data:v}=e,{width:_,height:M,data:k}=t,O=l/_,R=d/M,D=Math.ceil(O/2),z=Math.ceil(R/2),B=e.width;for(let V=0;V<M;V++)for(let q=0;q<_;q++){const J=4*(q+(y?M-V-1:V)*_);let ne=0,re=0,ue=0,_e=0,xe=0,Ne=0;const Ce=(V+.5)*R;for(let Ge=Math.floor(V*R);Ge<(V+1)*R;Ge++){const Ze=Math.abs(Ce-(Ge+.5))/z,lt=(q+.5)*O,et=Ze*Ze;for(let zt=Math.floor(q*O);zt<(q+1)*O;zt++){const pi=Math.abs(lt-(zt+.5))/D,he=Math.sqrt(et+pi*pi);if(he>=1)continue;let pe=2*he*he*he-3*he*he+1;const me=4*(r+zt+(s+Ge)*B);Ne+=pe*v[me+3],re+=pe,!i&&v[me+3]<255&&(pe=pe*v[me+3]/255),ue+=pe*v[me],_e+=pe*v[me+1],xe+=pe*v[me+2],ne+=pe}}k[J]=ue/ne,k[J+1]=_e/ne,k[J+2]=xe/ne,k[J+3]=Ne/re}return t}function Pae(e,t,i){return i||(i=IFe()),i.getContext("2d").createImageData(e,t)}let kw=null,r6=!0;function IFe(){return kw||(kw=document.createElement("canvas"),kw.width=1,kw.height=1),kw}function CFe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return LFe}}function kFe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function AFe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const l=255/s;t[r+0]=t[r+0]*l,t[r+1]=t[r+1]*l,t[r+2]=t[r+2]*l}}}const OFe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},hH=98,LFe="png",PFe={png:100,jpg:hH,jpeg:hH};var un;function NKe(e,t,i={}){const r=Rae(e);for(;r.length>1;){const s=n6(t,r.shift(),i);if(K(s))return s}return RFe(t,r.shift(),i)}function Rae(e){const t=ke("esri-force-webgl");if(t===un.WEBGL1||t===un.WEBGL2)return[t];switch(e){case"2d":return ke("mac")&&ke("chrome")?[un.WEBGL1,un.WEBGL2]:[un.WEBGL2,un.WEBGL1];case"3d":return[un.WEBGL2,un.WEBGL1]}}function RFe(e,t,i={}){if(!window.WebGLRenderingContext)return pH(e,NFe),null;const r=n6(e,t,i);return ce(r)&&pH(e,FFe),r}function n6(e,t,i={}){const r=t===un.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const l of r){try{s=e.getContext(l,i)}catch{}if(s)break}return s}function pH(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(un||(un={}));const NFe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',FFe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let m8,g8;function DFe(e){const t=Rae(e);for(;t.length>1;){const i=dH(t.shift());if(i.available)return i}return dH(t.shift())}function dH(e){switch(e){case un.WEBGL1:return jFe();case un.WEBGL2:return zFe()}}function jFe(){return m8||(m8=BFe()),m8}function zFe(){return g8||(g8=GFe()),g8}class Nae{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class VFe extends Nae{constructor(){super(...arguments),this.type=un.WEBGL1}}class UFe extends Nae{constructor(){super(...arguments),this.type=un.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function Fae(e,t){var l;if(e===un.WEBGL1&&typeof WebGLRenderingContext===void 0||e===un.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let r=n6(i,e,{failIfMajorPerformanceCaveat:!0});if(ce(r)&&(r=n6(i,e),K(r)&&(t.majorPerformanceCaveat=!0)),ce(r))return r;if(e===un.WEBGL1){const d=(l=r.getParameter(r.VERSION))==null?void 0:l.match(/^WebGL\s+([\d.]*)/);if(d){const y=parseFloat(d[1]);t.available=y>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(t.supportsHighPrecisionFragment=s.precision>0),r}function BFe(){const e=new VFe,t=Fae(un.WEBGL1,e);return ce(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function GFe(){const e=new UFe,t=Fae(un.WEBGL2,e);return ce(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function qFe(e){const t=DFe(e);if(!t.available)return new ge("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new ge("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new ge("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new ge("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===un.WEBGL1){if(!t.supportsElementIndexUint)return new ge("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new ge("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new ge("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function HFe(e){return e&&"nodeType"in e}function WFe(e){return e&&typeof e.render=="function"}const fH={component:"esri-component"};let x0=class extends st{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(fH.component),t&&t.classList.remove(fH.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||HFe(e)?(this._set("widget",null),eR(e)):(WFe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};g([S({dependsOn:[]})],x0.prototype,"id",null),g([S()],x0.prototype,"node",null),g([oi("node")],x0.prototype,"castNode",null),g([S({readOnly:!0})],x0.prototype,"widget",void 0),x0=g([Q("esri.views.ui.Component")],x0);const r4=x0,JFe={left:0,top:0,bottom:0,right:0},Dae={bottom:30,top:15,right:15,left:15},v8="manual",Zs={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function KFe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function w8(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function b8(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let Mh=class extends bs.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new ir,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&b8(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&b8(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([Pe(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Jt),Pe(()=>this.padding,this._applyUIPadding,Jt)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Zs.ui),MMe(e),this._attachContainers(e)),t&&(t.classList.remove(Zs.ui),b8(t,{top:"",bottom:"",left:"",right:""}),yte(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Dae,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(l=>this.add(l,t));const s=w8(e);s&&({index:i,position:t,component:e,key:r}=s),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const s=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||v8)===v8?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(Zs.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(l=>this.move(l,t)),!e)return;let i;const r=w8(e)||w8(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof r4||(e=new r4({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof r4?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||JFe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Zs.innerContainer),e.classList.add(Zs.cornerContainer);const t=document.createElement("div");t.classList.add(Zs.innerContainer),t.classList.add(Zs.manualContainer);const i=document.createElement("div");i.classList.add(Zs.topLeft),i.classList.add(Zs.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(Zs.topRight),r.classList.add(Zs.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(Zs.bottomLeft),s.classList.add(Zs.corner),e.appendChild(s);const l=document.createElement("div");l.classList.add(Zs.bottomRight),l.classList.add(Zs.corner),e.appendChild(l),this._innerContainer=e,this._manualContainer=t;const d=$l();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":s,"bottom-right":l,"top-leading":d?r:i,"top-trailing":d?i:r,"bottom-leading":d?l:s,"bottom-trailing":d?s:l},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||v8,r=e.index,s=this._positionNameToContainerLookup[i],l=r>-1;if(KFe(t.widget)&&t.widget.startup(),!l)return void s.appendChild(t.node);const d=Array.prototype.slice.call(s.children);if(r===0)return void(s.firstChild?TU(t.node,s.firstChild):s.appendChild(t.node));r>=d.length?s.appendChild(t.node):TU(t.node,d[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};g([S()],Mh.prototype,"container",null),g([S()],Mh.prototype,"height",null),g([S({value:Dae})],Mh.prototype,"padding",null),g([oi("padding")],Mh.prototype,"castPadding",null),g([S()],Mh.prototype,"view",void 0),g([S()],Mh.prototype,"width",null),Mh=g([Q("esri.views.ui.UI")],Mh);const ZFe=Mh;function yH(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function YFe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function w5(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function XFe(e){return e.type==="bing-maps"}const Vp=[];let dm=class extends Ng{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new vt,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>Pe(()=>{var s;return[r.suspended,(s=r.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([Ko(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),gs(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");Vp.length=0,e?(e.forEach(t=>{var s;if(t.suspended||!((s=t.layer)!=null&&s.attributionVisible))return;const i=t.layer;if(yH(i,"user"))return void w5(Vp,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const l=this._fetchedAttributionData.get(t);return void(l?w5(Vp,t,this._getDynamicAttribution(l,this.view,i)):yH(i)&&w5(Vp,t,i.copyright))}return void this._fetchAttributionData(t)}const r=i.get("portalItem.accessInformation");w5(Vp,t,r||i.copyright)}),YFe(this.items,Vp)&&(this.items.removeAll(),this.items.addMany(Vp)),Vp.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await F6(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,XFe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const l=i[s],d=l.coverageAreas;if(!d)return;for(const y of d){const v=y.bbox,_=y.zoomMin-(t&&y.zoomMin?1:0),M=y.zoomMax-(t&&y.zoomMax?1:0),k={xmin:v[1],ymin:v[0],xmax:v[3],ymax:v[2],spatialReference:Ct.WGS84},O={extent:Wh(k),attribution:l.attribution||"",score:y.score!=null?y.score:100,id:s};for(let R=_;R<=M;R++)r[R]=r[R]||[],r[R].push(O)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:s}=t;let l=i.tileInfo.scaleToZoom(s);if(l=Math.min(e.maxKey,Math.round(l)),!r||l==null||l<=-1)return"";const d=e[l],y=V6(r.center.clone().normalize(),t.spatialReference),v={};return d?d.filter(_=>{const M=!v[_.id]&&y&&U6(_.extent,y);return M&&(v[_.id]=!0),M}).sort((_,M)=>M.score-_.score||_.objectId-M.objectId).map(_=>_.attribution).join(", "):""}};g([S({readOnly:!0,type:vt})],dm.prototype,"items",void 0),g([S({readOnly:!0})],dm.prototype,"state",null),g([S()],dm.prototype,"view",void 0),dm=g([Q("esri.widgets.Attribution.AttributionViewModel")],dm);const jae=dm,Up={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let eo=class extends rr{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=Up.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new jae}initialize(){this.own(Ko(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[Up.open]:this._isOpen};return Z("div",{bind:this,class:this.classes(Up.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return Z("div",{class:Up.poweredBy},"Powered by"," ",Z("a",{class:Up.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,s={[Up.sourcesOpen]:e,[Up.interactive]:t};return Z("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Up.sources,s),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,l=s>r,d=this._attributionTextOverflowed!==l;if(this._attributionTextOverflowed=l,d&&(t=!0),this._isOpen){const y=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,y&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};g([S()],eo.prototype,"_isOpen",void 0),g([S()],eo.prototype,"_isInteractive",null),g([S()],eo.prototype,"_attributionTextOverflowed",void 0),g([S()],eo.prototype,"_prevSourceNodeHeight",void 0),g([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],eo.prototype,"attributionText",null),g([S()],eo.prototype,"iconClass",void 0),g([S()],eo.prototype,"itemDelimiter",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],eo.prototype,"label",void 0),g([S(),Gi("esri/widgets/Attribution/t9n/Attribution")],eo.prototype,"messages",void 0),g([tt("viewModel.view")],eo.prototype,"view",void 0),g([S({type:jae})],eo.prototype,"viewModel",void 0),g([Dn()],eo.prototype,"_toggleState",null),eo=g([Q("esri.widgets.Attribution")],eo);const QFe=eo,eDe="esri.widgets.CompassViewModel";let S0=class extends R$(st){constructor(e){super(e),this._handles=new ir,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Pe(()=>this.view,this._updateRotationWatcher,Jt))}destroy(){this._handles=po(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Pe(()=>e==null?void 0:e.rotation,this._updateForRotation,Jt):Pe(()=>e==null?void 0:e.camera,this._updateForCamera,Jt))}};g([S({readOnly:!0})],S0.prototype,"canShowNorth",null),g([S()],S0.prototype,"orientation",void 0),g([S({readOnly:!0})],S0.prototype,"state",null),g([S()],S0.prototype,"view",void 0),S0=g([Q(eDe)],S0);const zae=S0,Bp={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let pc=class extends rr{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Bp.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new zae}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",s=i?-1:0,l={[Bp.disabled]:i,[Bp.interactive]:!i},d={[Bp.northIcon]:r,[Bp.rotationIcon]:!r},{messages:y}=this;return Z("div",{bind:this,class:this.classes(Bp.base,l),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":y.reset,title:y.reset},Z("span",{"aria-hidden":"true",class:this.classes(Bp.icon,d),styles:this._toRotationTransform(e)}),Z("span",{class:Bp.text},y.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};g([tt("viewModel.goToOverride")],pc.prototype,"goToOverride",void 0),g([S()],pc.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],pc.prototype,"label",void 0),g([S(),Gi("esri/widgets/Compass/t9n/Compass")],pc.prototype,"messages",void 0),g([tt("viewModel.view")],pc.prototype,"view",void 0),g([S({type:zae})],pc.prototype,"viewModel",void 0),g([Dn()],pc.prototype,"_reset",null),pc=g([Q("esri.widgets.Compass")],pc);const tDe=pc;let fm=class extends st{constructor(e){super(e),this._handles=new ir,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(gs(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};g([S({readOnly:!0})],fm.prototype,"state",null),g([S()],fm.prototype,"navigationMode",void 0),g([S()],fm.prototype,"view",void 0),fm=g([Q("esri.widgets.NavigationToggleViewModel")],fm);const Vae=fm,tl={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let dc=class extends rr{constructor(e,t){super(e,t),this.iconClass=tl.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Vae}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[tl.disabled]:e,[tl.isLayoutHorizontal]:this.layout==="horizontal"},r={[tl.activeButton]:t},s={[tl.activeButton]:!t},l=e?-1:0,d=this.messages.toggle;return Z("div",{bind:this,class:this.classes(tl.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:l,"aria-label":d,title:d},Z("div",{class:this.classes(tl.button,tl.panButton,r)},Z("span",{class:tl.panIcon})),Z("div",{class:this.classes(tl.button,tl.rotateButton,s)},Z("span",{class:tl.rotationIcon})))}_toggle(){this.toggle()}};g([S()],dc.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],dc.prototype,"label",void 0),g([S({value:"vertical"})],dc.prototype,"layout",null),g([S(),Gi("esri/widgets/NavigationToggle/t9n/NavigationToggle")],dc.prototype,"messages",void 0),g([tt("viewModel.view")],dc.prototype,"view",void 0),g([S({type:Vae})],dc.prototype,"viewModel",void 0),g([Dn()],dc.prototype,"_toggle",null),dc=g([Q("esri.widgets.NavigationToggle")],dc);const iDe=dc,Aw={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let vd=class extends rr{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[Aw.disabled]:!this.enabled,[Aw.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return Z("div",{bind:this,class:this.classes(Aw.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},Z("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Aw.icon,i)}),Z("span",{class:Aw.iconText},this.title))}_triggerAction(){this.action.call(this)}};g([S()],vd.prototype,"action",void 0),g([S()],vd.prototype,"enabled",void 0),g([S()],vd.prototype,"iconClass",void 0),g([S()],vd.prototype,"title",void 0),g([Dn()],vd.prototype,"_triggerAction",null),vd=g([Q("esri.widgets.IconButton")],vd);const mH=vd;let ym=class extends st{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};g([S({readOnly:!0})],ym.prototype,"canZoomIn",null),g([S({readOnly:!0})],ym.prototype,"canZoomOut",null),g([S()],ym.prototype,"view",void 0),ym=g([Q("esri.widgets.Zoom.ZoomConditions2D")],ym);const rDe=ym;let mm=class extends st{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};g([S({readOnly:!0})],mm.prototype,"canZoomIn",null),g([S({readOnly:!0})],mm.prototype,"canZoomOut",null),g([S()],mm.prototype,"view",void 0),mm=g([Q("esri.widgets.Zoom.ZoomConditions3D")],mm);const nDe=mm;let wd=class extends st{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new rDe({view:e}):e.type==="3d"&&(this._zoomConditions=new nDe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():M1(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():M1(e.goTo({zoomFactor:.5}))}};g([S()],wd.prototype,"_zoomConditions",void 0),g([S({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],wd.prototype,"canZoomIn",void 0),g([S({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],wd.prototype,"canZoomOut",void 0),g([S({readOnly:!0})],wd.prototype,"state",null),g([S()],wd.prototype,"view",null),wd=g([Q("esri.widgets.Zoom.ZoomViewModel")],wd);const Uae=wd,Ow={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Eh=class extends rr{constructor(e,t){super(e,t),this.iconClass=Ow.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Uae}initialize(){this._zoomInButton=new mH({action:this.zoomIn.bind(this),iconClass:Ow.zoomInIcon}),this._zoomOutButton=new mH({action:this.zoomOut.bind(this),iconClass:Ow.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Ow.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,Z("div",{class:this.classes(Ow.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};g([S()],Eh.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Eh.prototype,"label",void 0),g([S({value:"vertical"})],Eh.prototype,"layout",null),g([S(),Gi("esri/widgets/Zoom/t9n/Zoom")],Eh.prototype,"messages",void 0),g([tt("viewModel.view")],Eh.prototype,"view",void 0),g([S({type:Uae})],Eh.prototype,"viewModel",void 0),Eh=g([Q("esri.widgets.Zoom")],Eh);const Bae=Eh,Gae="esri.views.ui.DefaultUI";function sDe(e){return e&&e.view!==void 0}Ke.getLogger(Gae);let n4=class extends ZFe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([Pe(()=>this.components,this._componentsWatcher.bind(this),Jt),Pe(()=>this.view,this._updateViewAwareWidgets.bind(this),Jt)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;sDe(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new r4({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new QFe({view:this.view})}_createCompass(){return new tDe({view:this.view})}_createNavigationToggle(){return new iDe({view:this.view})}_createZoom(){return new Bae({view:this.view})}};g([S()],n4.prototype,"components",void 0),n4=g([Q(Gae)],n4);const oDe=n4;let s4=class extends oDe{constructor(e){super(e),this.components=["attribution","zoom"]}};g([S()],s4.prototype,"components",void 0),s4=g([Q("esri.views.ui.2d.DefaultUI2D")],s4);const qae=s4;var uO;let o4=uO=class extends Ve{constructor(e){super(e),this.color=new ot([0,0,0,1])}clone(){return new uO(Me({color:this.color}))}};g([S({type:ot,json:{write:!0}})],o4.prototype,"color",void 0),o4=uO=g([Q("esri.webmap.background.ColorBackground")],o4);const aDe=o4,rh=Ke.getLogger("esri.views.MapView");let Hae,Wae,Jae,Kae,Zae,Yae;async function lDe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:l}]=await Promise.all([Le(()=>import("./webglDeps.980bca37.js"),["webglDeps.980bca37.js","VertexArrayObject.47b5a963.js","Texture.799a4527.js","enums.c60b1dad.js","ProgramTemplate.30511351.js","programUtils.be599db1.js"],import.meta.url),Le(()=>import("./mapViewDeps.15ce71e4.js"),["mapViewDeps.15ce71e4.js","CIMSymbolHelper.49a4dde1.js","BidiEngine.95523203.js","alignmentUtils.84250e5d.js","definitions.a48e52ac.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","utils.c5d68ceb.js","Utils.52ce5732.js","enums.c60b1dad.js","Texture.799a4527.js","VertexElementDescriptor.2400a91d.js","MaterialKey.9bf60063.js","WGLContainer.6c26f111.js","pixelUtils.0c287117.js","VertexArrayObject.47b5a963.js","ProgramTemplate.30511351.js","StyleDefinition.f1dd8ba9.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","enums.58eeda20.js","programUtils.be599db1.js","Rasterizer.19c8f18d.js","cimAnalyzer.52b380bb.js","quantizationUtils.d707a317.js","commonjsHelpers.ce2b5698.js","imageutils.c1bdb130.js","Matcher.7b29957c.js","visualVariablesUtils.eb44e100.js","visualVariablesUtils.4ccb186b.js","tileUtils.0d12ad86.js","TileClipper.46fbd347.js","Geometry.f2d62961.js","ExpandedCIM.cd816331.js","CircularArray.0ec22ba2.js","requestImageUtils.e398c4e6.js","ComputedAttributeStorage.a96b0cc6.js","centroid.d71a978e.js","BaseGraphicContainer.48b0a311.js","normalizeUtilsSync.f68c7e05.js","projectionSupport.5ef1eff5.js","json.8bd707cf.js","FeatureContainer.f0757bf1.js","TileContainer.8cab8d8b.js","schemaUtils.5a296482.js","createSymbolSchema.f93af27b.js","MD5.7323a015.js","util.c286b664.js","vec3f32.ca7a14c1.js","GraphicContainer.b957e03e.js"],import.meta.url)]);Wae=e,Jae=t,Kae=i,Zae=r,Yae=s,Hae=l}const gH=160;function uDe(e){return e&&e.declaredClass==="esri.Viewpoint"}let Nt=class extends D4e(pPe(fPe(VPe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Fg({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new DRe(this),this._pePromise=null,this.floors=new vt,this.highlightOptions=new kae,this.inputManager=new pFe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Aae,this.type="2d",this.ui=new qae,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new gae,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([Pe(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(gH)},L1),this.on("resize",t=>this._resizeHandler(t)),Pe(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),W5e()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new vFe(this.featuresTilingScheme)}get initialExtentRequired(){var d;const{scale:e,constraints:t,center:i,viewpoint:r,extent:s}=this;let l=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((d=this.map.initialViewProperties)==null?void 0:d.viewpoint))&&!s&&(t!=null&&t.effectiveLODs||(l=-1),(!i||e===0&&l===-1)&&(!r||!K(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!hf()||(this._pePromise||(this._pePromise=lp().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!zu(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new ut({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void rh.error(new ge("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;tO(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Pe(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},L1),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void rh.error(new ge("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void rh.error(new ge("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;xRe(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;PRe(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;Wq(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new ge("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):ce(e.targetGeometry)&&(i=new ge("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new ge("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void rh.error(i);this._scaleBeforeChangingSpatialReference=null;const r=new Lu({targetGeometry:new ut,scale:0,rotation:0});Bu(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;Wq(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),mv(()=>this.ready,t).then(()=>{const i={animate:!0,...t},r=wRe(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});rh.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=Vq(e)?zq(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,l=null,d=null;t!=null&&t.include?wH(t.include,vH(this,M=>r.add(M),M=>{l||(l=new Set),l.add(M)},M=>r.add(M),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&wH(t.exclude,vH(this,M=>r.delete(M),M=>{d||(d=new Set),d.add(M)}));const y=this.allLayerViews.filter(M=>!M.suspended&&r.has(M)).reverse(),v=this.toMap(i);let _=[...s?this.graphicsView.hitTest(v).map(M=>({type:"graphic",graphic:M,layer:null,mapPoint:v})):[],...await Promise.all(y.map(M=>M.hitTest(v,i)).toArray())].filter(K).flat().filter(K);return l&&(_=_.filter(M=>!("graphic"in M)||!M.graphic||l.has(cO(M.graphic)))),d&&(_=_.filter(M=>!("graphic"in M)||!M.graphic||d.has(cO(M.graphic)))),{screenPoint:i,results:_}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return xFe(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return SFe(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,TFe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(l=>{const d=this.allLayerViews.find(y=>y.layer.id===l.id);d&&"container"in d&&d.container&&i.push(d.container)})):i=this._stage.children;const{format:r,quality:s}=EFe(e.format,e.quality);return _Fe(e,t,this.size,this.padding,r,s,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=Vq(e)?zq(this,e):e,i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),l=this.spatialReference;return new ut({x:r,y:s,spatialReference:l})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),Un(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return Kq.hasLayerViewModule(e)}importLayerView(e){return Kq.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(rh.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=qFe(this.type);return ke("safari")&&ke("safari")<9&&(e=new ge("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ke("safari")})),K(e)?(rh.warn("#validate()",e.message),Promise.reject(e)):lDe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new XA),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(d=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),d}),l=new Promise(d=>d(s));return t.when().catch(()=>{r()&&l.cancel&&l.cancel()}),l}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,s=e.then(l=>{if(ur(t),i!==this._gotoTask)throw new ge("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=l,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<gH&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var B,V,q,J;const{constraints:e,initialExtent:t,map:i,padding:r,size:s}=this;if(!e)return null;const l=i&&"initialViewProperties"in i&&i.initialViewProperties,d={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?d.zoom!==-1&&(d.scale=e.zoomToScale(d.zoom)):d.zoom=-1;let y=null,v=null,_=0;const M=d.viewpoint&&d.viewpoint.rotation,k=d.viewpoint&&d.viewpoint.targetGeometry;K(k)&&(k.type==="extent"?y=k:k.type==="point"&&(v=k,_=d.viewpoint.scale));const O=d.extent||y||((V=(B=l==null?void 0:l.viewpoint)==null?void 0:B.targetGeometry)==null?void 0:V.extent)||t,R=d.center||v||(O==null?void 0:O.center),D=d.scale||_||((q=l==null?void 0:l.viewpoint)==null?void 0:q.scale)||O&&yb(O,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),z=d.rotation||M||((J=l==null?void 0:l.viewpoint)==null?void 0:J.rotation)||0;return R&&D?new Lu({targetGeometry:R,scale:D,rotation:z}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,s=e.then(l=>{if(ur(t),i!==this._gotoTask)throw new ge("view:goto-interrupted","Goto was interrupted");return r.update(l),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(e,t){var s;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((s=i.spatialReference)==null?void 0:s.imageCoordinateSystem)||ms(t,i.spatialReference))return e;const r=uo(i,t);if(!r)throw new ge("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return uDe(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],LRe(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var y,v;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(_){rh.warn(new mo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:_})),e.targetGeometry=((y=this.defaultsFromMap.extent)==null?void 0:y.center)||new ut({x:0,y:0,spatialReference:this.spatialReference})}(v=this.constraints)==null||v.fit(e),this._set("state",new ENe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new Hae(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new Yae,this._magnifierView.magnifier=this.magnifier;const r=new Kae({view:this});this._set("labelManager",r);const s=new FRe({view:this});this._set("animationManager",s);const l=new Zae({view:this,animationManager:s});this._set("mapViewNavigation",l),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",_=>this.fatalError=_.error),Pe(()=>this.stationary,_=>i.stationary=_,vl),Pe(()=>this.background,_=>{i.background=_,this._magnifierView.background=_},vl),Pe(()=>this.magnifier,_=>this._magnifierView.magnifier=_,vl),Pe(()=>this.renderingOptions,_=>i.renderingOptions=_,vl),Pe(()=>this.highlightOptions,_=>i.highlightOptions=_,vl),Pe(()=>this.state.id,()=>i.state=this.state,vl)],"map-view"),this._updateStageChildren();const d=this._resolveWhenReady;this._resolveWhenReady=[],d.forEach(_=>_(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,l=new ut({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",l),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new ANe(tb.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new Wae({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Jae(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const y of this.allLayerViews)y.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(ce(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const y=t.viewpoint.clone();y.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=y}const i=t.clone(),[r,s]=t.center;let l=null;try{l=this._project(new ut({x:r,y:s,spatialReference:t.spatialReference}),e)}catch(y){hf()||rh.warn(new mo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:l.toJSON(),spatialReference:e,error:y}))}l||(l=new ut({x:0,y:0,spatialReference:e}));const d=tO(new Lu({targetGeometry:new ut,scale:0,rotation:0}),t.viewpoint,l);i.viewpoint=d;try{const v=[t.size[0]/2,t.size[1]/2],_=[v[0]+20,v[1]],M=t.toMap([0,0],_),{x:k,y:O}=this._project(new ut({x:M[0],y:M[1],spatialReference:t.spatialReference}),e);M[0]=k,M[1]=O,i.toScreen(M,M);const R=ARe(v,M,_),D=Math.hypot(M[0]-v[0],M[1]-v[1])/20;!Number.isFinite(D)||Math.abs(D)>4?(d.rotation=0,d.targetGeometry=new ut({x:0,y:0,spatialReference:e})):(d.scale*=D,d.scale>ke("mapview-srswitch-adjust-rotation-scale-threshold")?d.rotation=0:d.rotation+=Number.isFinite(R)?R:0)}catch{}this._get("constraints").constrain(d,null),this._get("state").viewpoint=d,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const y of this.allLayerViews)y.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Nt.type="2d",g([S({readOnly:!0})],Nt.prototype,"animationManager",void 0),g([S({constructOnly:!0})],Nt.prototype,"deactivatedWebGLExtensions",void 0),g([S({constructOnly:!0})],Nt.prototype,"debugWebGLExtensions",void 0),g([S({readOnly:!0})],Nt.prototype,"featuresTilingScheme",void 0),g([S({readOnly:!0})],Nt.prototype,"fullOpacity",void 0),g([S({readOnly:!0})],Nt.prototype,"graphicsTileStore",null),g([S()],Nt.prototype,"graphicsView",void 0),g([S({readOnly:!0})],Nt.prototype,"state",void 0),g([S()],Nt.prototype,"initialExtentRequired",null),g([S()],Nt.prototype,"labelManager",void 0),g([S({readOnly:!0})],Nt.prototype,"resourceManager",null),g([S({readOnly:!0})],Nt.prototype,"textureManager",null),g([S({readOnly:!0})],Nt.prototype,"mapViewNavigation",void 0),g([S({constructOnly:!0})],Nt.prototype,"renderCanvas",void 0),g([S()],Nt.prototype,"renderingOptions",void 0),g([S({readOnly:!0})],Nt.prototype,"rendering",void 0),g([S({constructOnly:!0})],Nt.prototype,"supersampleScreenshotsEnabled",void 0),g([S({readOnly:!0})],Nt.prototype,"supportsGround",void 0),g([S()],Nt.prototype,"_stationaryTimer",void 0),g([S()],Nt.prototype,"_defaultsFromMapSettings",null),g([S()],Nt.prototype,"_pePromise",void 0),g([S({readOnly:!0})],Nt.prototype,"typeSpecificPreconditionsReady",null),g([S()],Nt.prototype,"animation",null),g([S({type:aDe})],Nt.prototype,"background",null),g([S({value:null,type:ut,dependsOn:["state.id","ready"]})],Nt.prototype,"center",null),g([S({type:gae})],Nt.prototype,"constraints",null),g([S({value:null,type:yi,dependsOn:["state.id","ready"]})],Nt.prototype,"extent",null),g([S()],Nt.prototype,"floors",void 0),g([S({type:kae})],Nt.prototype,"highlightOptions",void 0),g([S({readOnly:!0})],Nt.prototype,"inputManager",void 0),g([S()],Nt.prototype,"map",void 0),g([S({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Nt.prototype,"padding",null),g([S()],Nt.prototype,"resizeAlign",void 0),g([S({readOnly:!0,dependsOn:["state.id"]})],Nt.prototype,"resolution",null),g([S({value:0,type:Number,dependsOn:["state.id","ready"]})],Nt.prototype,"rotation",null),g([S({value:0,type:Number,dependsOn:["state.id","ready"]})],Nt.prototype,"scale",null),g([S({constructOnly:!0})],Nt.prototype,"spatialReferenceLocked",void 0),g([S()],Nt.prototype,"stationary",null),g([S({type:Aae,readOnly:!0})],Nt.prototype,"timeline",void 0),g([S({readOnly:!0})],Nt.prototype,"type",void 0),g([S({readOnly:!0})],Nt.prototype,"updating",null),g([S({value:null,type:Lu,dependsOn:["state.id","ready"]})],Nt.prototype,"viewpoint",null),g([S({value:-1,dependsOn:["state.id","ready"]})],Nt.prototype,"zoom",null),g([S({type:Boolean})],Nt.prototype,"navigating",null),g([S({type:qae})],Nt.prototype,"ui",void 0),Nt=g([Q("esri.views.MapView")],Nt);const cDe=Nt;function cO(e){var i,r,s,l;const t=e.getObjectId();return t?`${(l=(s=(i=e.layer)==null?void 0:i.uid)!=null?s:(r=e.sourceLayer)==null?void 0:r.uid)!=null?l:"MapView"}/${t}`:`"MapView/${e.uid}`}function vH(e,t,i,r,s){return l=>{if(l instanceof pn){if(l.layer===e)s==null||s();else{const d=e.allLayerViews.find(y=>y.layer===l.layer);d&&(r==null||r(d))}i(cO(l))}else{const d=e.allLayerViews.find(y=>y.layer===l);d&&t(d)}}}function wH(e,t){if(e)if(BT(e))for(const i of e)if(BT(i))for(const r of i)t(r);else t(i);else t(e)}const _3=-1;let fc=class extends st{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=ke("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(bH(e))}catch(t){this._transitionTo([]),Ke.getLogger(this.declaredClass).warn("Invalid Effect",{effect:e,error:t})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&_H(this._current,bH(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}end(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&_H(this._current,e,this.scale)?(this._final=e,this._to=Me(e),hDe(this._current,this._to,this.scale),this._from=Me(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?Me(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let i=0;i<this._current.length;i++){const r=this._current[i],s=this._from[i],l=this._to[i];r.scale=pDe(s.scale,l.scale,t);for(let d=0;d<r.effects.length;d++){const y=r.effects[d],v=s.effects[d],_=l.effects[d];y.interpolate(v,_,t)}}t===1&&(this._current=this._final,this._set("effects",this._current[0]?Me(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const t=this._current,i=this._current.length-1;let r,s,l=1;if(t.length===1||e>=t[0].scale)s=r=t[0].effects;else if(e<=t[i].scale)s=r=t[i].effects;else for(let d=0;d<i;d++){const y=t[d],v=t[d+1];if(y.scale>=e&&v.scale<=e){l=(e-y.scale)/(v.scale-y.scale),r=y.effects,s=v.effects;break}}for(let d=0;d<this.effects.length;d++)this.effects[d].interpolate(r[d],s[d],l)}};function bH(e){const t=gR(e)||[];return dDe(t)?[{scale:_3,effects:t}]:t}function _H(e,t,i){var r,s,l,d;return!((r=e[0])!=null&&r.effects)||!((s=t[0])!=null&&s.effects)?!0:!((((l=e[0])==null?void 0:l.scale)===_3||((d=t[0])==null?void 0:d.scale)===_3)&&(e.length>1||t.length>1)&&i<=0)&&Cie(e[0].effects,t[0].effects)}function hDe(e,t,i){var v,_;const r=e.length>t.length?e:t,s=e.length>t.length?t:e,l=s[s.length-1],d=(v=l==null?void 0:l.scale)!=null?v:i,y=(_=l==null?void 0:l.effects)!=null?_:[];for(let M=s.length;M<r.length;M++)s.push({scale:d,effects:[...y]});for(let M=0;M<r.length;M++)s[M].scale=s[M].scale===_3?i:s[M].scale,r[M].scale=r[M].scale===_3?i:r[M].scale,kie(s[M].effects,r[M].effects)}function pDe(e,t,i){return e+(t-e)*i}function dDe(e){const t=e[0];return!!t&&"type"in t}g([S()],fc.prototype,"_to",void 0),g([S()],fc.prototype,"duration",void 0),g([S({value:""})],fc.prototype,"effect",null),g([S({readOnly:!0})],fc.prototype,"effects",void 0),g([S({readOnly:!0})],fc.prototype,"hasEffects",null),g([S({value:0})],fc.prototype,"scale",null),g([S({readOnly:!0})],fc.prototype,"transitioning",null),fc=g([Q("esri.layers.effects.EffectView")],fc);function FKe(e){var i;const t=e.layer;return"floorInfo"in t&&((i=t.floorInfo)==null?void 0:i.floorField)&&"floors"in e.view?Xae(e.view.floors,t.floorInfo.floorField):null}function xH(e,t){var i;return"floorInfo"in t&&((i=t.floorInfo)==null?void 0:i.floorField)?Xae(e,t.floorInfo.floorField):null}function Xae(e,t){if(!(e!=null&&e.length))return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function DKe(e,t,i){return t.flatten(({sublayers:s})=>s).length!==e.length?!0:!!e.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!Qae(e,t)}function fDe(e,t,i){return!!e.some(r=>{const s=r.source;return!(!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(ce(s.gdbVersion)||s.gdbVersion===i))||r.originIdOf("renderer")>Ft.SERVICE||r.originIdOf("labelingInfo")>Ft.SERVICE||r.originIdOf("opacity")>Ft.SERVICE||r.originIdOf("labelsVisible")>Ft.SERVICE})||!Qae(e,t)}function Qae(e,t){if(!e||!e.length||ce(t))return!0;const i=t.slice().reverse().flatten(({sublayers:l})=>l&&l.toArray().reverse()).map(l=>l.id).toArray();if(e.length>i.length)return!1;let r=0;const s=i.length;for(const{id:l}of e){for(;r<s&&i[r]!==l;)r++;if(r>=s)return!1}return!0}function jKe(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const yDe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let va=class extends Uu(st){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const i=xH(this.floors,t);return t.toExportImageJSON(i)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&fDe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(yDe[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){var i;const e=!!((i=this.floors)!=null&&i.length),t=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return t.length?JSON.stringify(t.reduce((r,s)=>{const l=xH(this.floors,s),d=vse(l,s.definitionExpression);return K(d)&&(r[s.id]=d),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,i=s=>{const l=this.scale,d=l===0,y=s.minScale===0||l<=s.minScale,v=s.maxScale===0||l>=s.maxScale;s.visible&&(d||y&&v)&&(s.sublayers?s.sublayers.forEach(i):e.unshift(s))};t&&t.forEach(i);const r=this._get("visibleSublayers");return!r||r.length!==e.length||r.some((s,l)=>e[l]!==s)?e:r}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};g([S({readOnly:!0})],va.prototype,"dynamicLayers",null),g([S()],va.prototype,"floors",void 0),g([S({readOnly:!0})],va.prototype,"hasDynamicLayers",null),g([S()],va.prototype,"layer",null),g([S({readOnly:!0})],va.prototype,"layers",null),g([S({readOnly:!0})],va.prototype,"layerDefs",null),g([S({type:Number})],va.prototype,"scale",void 0),g([S(hAe)],va.prototype,"timeExtent",void 0),g([S({readOnly:!0})],va.prototype,"version",null),g([S({readOnly:!0})],va.prototype,"visibleSublayers",null),va=g([Q("esri.layers.mixins.ExportImageParameters")],va);function mDe(e){return ce(e)||e.type==="simple"||e.type==="unique-value"||e.type==="class-breaks"||e.type==="dictionary"||e.type==="heatmap"}const gDe=(e,t)=>{const i=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return t!=null&&t.levels?t.levels[i]:null};function vDe(e,t){if(!e||!("visualVariables"in e)||!e.visualVariables)return null;const i=e.visualVariables.find(s=>s.type==="size"),r=gDe(t,i);return r?new JR({field:i.field,minSize:r[2].size,minDataValue:r[2].value,maxSize:r[3].size,maxDataValue:r[3].value}):null}function wDe(e){return e=e||globalThis.location.hostname,bDe.some(t=>(e==null?void 0:e.match(t))!=null)}function SH(e,t){return e&&(t=t||globalThis.location.hostname)?t.match(ele)!=null||t.match(ile)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match(tle)!=null||t.match(rle)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const ele=/^devext.arcgis.com$/,tle=/^qaext.arcgis.com$/,ile=/^[\w-]*\.mapsdevext.arcgis.com$/,rle=/^[\w-]*\.mapsqa.arcgis.com$/,bDe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,ele,tle,/^jsapps.esri.com$/,ile,rle];function nle(e,t,i,r){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?_De(e,t,r):dse(e,t,r).then(s=>sle(s,e.name,t,i,r)):Promise.reject(new ge("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function sle(e,t,i,r,s){const l=e.data,d=i&&K(i.portal)?i.portal:Bn.getDefault(),y={portal:d,url:en(e.baseUrl),origin:"portal-item"},v=l.items.find(R=>R.name===t);if(!v){const R=`The symbol name '${t}' could not be found`;return Promise.reject(new ge("symbolstyleutils:symbol-name-not-found",R,{symbolName:t}))}let _=uf($ke(v,r),y),M=v.thumbnail&&v.thumbnail.href;const k=v.thumbnail&&v.thumbnail.imageData;wDe()&&(_=SH(_),M=SH(M));const O={portal:d,url:en(iP(_)),origin:"portal-item"};return XR(_,s).then(R=>{const D=r==="cimRef"?fse(R.data):R.data,z=Yne(D,O);if(z&&Rc(z)){if(M){const B=uf(M,y);z.thumbnail=new c1({url:B})}else k&&(z.thumbnail=new c1({url:`data:image/png;base64,${k}`}));e.styleUrl?z.styleOrigin=new i3({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(z.styleOrigin=new i3({portal:i.portal,styleName:e.styleName,name:t}))}return z})}function _De(e,t,i){const r=Mke.replace(/\{SymbolName\}/gi,e.name),s=K(t.portal)?t.portal:Bn.getDefault();return XR(r,i).then(l=>{const d=fse(l.data);return Yne(d,{portal:s,url:en(iP(r)),origin:"portal-item"})})}const xDe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:sle,resolveWebStyleSymbol:nle},Symbol.toStringTag,{value:"Module"})),z0=Mn.size,a4=Mn.maxSize,ON=Mn.maxOutlineSize,$H=Mn.lineWidth,hO=Mn.tallSymbolWidth,SDe=Ke.getLogger("esri.symbols.support.previewSymbol3D");function Ym(e){const t=e.outline,i=K(e.material)?e.material.color:null,r=K(i)?i.toHex():null;if(ce(t)||"pattern"in t&&K(t.pattern)&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=Xi(t.size)||0;return{color:"rgba("+(K(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(s,ON),style:"pattern"in t&&K(t.pattern)&&t.pattern.type==="style"?$R(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function $De(e,t){const i=t&&t.resource,r=i&&i.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(r&&t.type!=="object")return Promise.resolve(N7e(e,t));const s=li("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?nle(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(l=>l).then(l=>{var d;return((d=l==null?void 0:l.thumbnail)==null?void 0:d.url)||s}):Promise.resolve(s)}function _8(e,t=1){const i=e.a,r=fN(e),s=r.h,l=r.s/t,d=100-(100-r.v)/t,{r:y,g:v,b:_}=n_({h:s,s:l,v:d});return[y,v,_,i]}function s6(e){return e.type==="water"?ce(e.color)?null:e.color:ce(e.material)||ce(e.material.color)?null:e.material.color}function Ui(e,t=0){const i=s6(e);if(!i){if(e.type==="fill")return null;const s=O7e.r,l=rf(s,t);return[l,l,l,100]}const r=i.toRgba();for(let s=0;s<3;s++)r[s]=rf(r[s],t);return r}async function ole(e,t){const i=e.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await A7e(li(`esri/symbols/patterns/${i}.png`),t.toCss(!0)),width:5,height:5}}function MH(e){return e.outline?Ym(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function ale(e,t){const i=s6(e);if(!i)return null;let r="rgba(";return r+=rf(i.r,t)+",",r+=rf(i.g,t)+",",r+=rf(i.b,t)+",",r+i.a+");"}function pO(e,t){const i=ale(e,t);return i?"pattern"in e&&K(e.pattern)&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:i,width:Math.min(e.size?Xi(e.size):.75,ON),style:"pattern"in e&&K(e.pattern)&&e.pattern.type==="style"?$R(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?Xi(2):e.join:null}:{}}function b5(e,t,i){const r=.75*i;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function MDe(e){const t=e.depth,i=e.height,r=e.width;return r&&t&&i&&r===t&&r<i}function EDe(e,t,i){const r=[];if(!e)return r;switch(e.type){case"icon":{const d=t,y=t;switch(e.resource&&e.resource.primitive||Yxe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:Ui(e,0),stroke:Ym(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[0,0]},{command:"L",values:[d,0]},{command:"L",values:[d,y]},{command:"Z",values:[]}]},fill:Ui(e,0),stroke:Ym(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,y]},{command:"Z",values:[]}]},fill:Ui(e,0),stroke:Ym(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*d,0]},{command:"L",values:[.5*d,y]},{command:"M",values:[0,.5*y]},{command:"L",values:[d,.5*y]}]},stroke:MH(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[d,y]},{command:"M",values:[d,0]},{command:"L",values:[0,y]}]},stroke:MH(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*y]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,.5*y]},{command:"L",values:[.5*d,y]},{command:"Z",values:[]}]},fill:Ui(e,0),stroke:Ym(e)})}break}case"object":switch(e.resource&&e.resource.primitive||i5e){case"cone":{const s=b5(Ui(e,0),Ui(e,-.6),i?hO:t),l=VOe(t,i);r.push({shape:l[0],fill:s}),r.push({shape:l[1],fill:s});break}case"inverted-cone":{const s=Ui(e,0),l=b5(s,Ui(e,-.6),t),d=UOe(t);r.push({shape:d[0],fill:l}),r.push({shape:d[1],fill:s});break}case"cube":{const s=jOe(t,i);r.push({shape:s[0],fill:Ui(e,0)}),r.push({shape:s[1],fill:Ui(e,-.3)}),r.push({shape:s[2],fill:Ui(e,-.5)});break}case"cylinder":{const s=b5(Ui(e,0),Ui(e,-.6),i?hO:t),l=zOe(t,i);r.push({shape:l[0],fill:s}),r.push({shape:l[1],fill:s}),r.push({shape:l[2],fill:Ui(e,0)});break}case"diamond":{const s=BOe(t);r.push({shape:s[0],fill:Ui(e,-.3)}),r.push({shape:s[1],fill:Ui(e,0)}),r.push({shape:s[2],fill:Ui(e,-.3)}),r.push({shape:s[3],fill:Ui(e,-.7)});break}case"sphere":{const s=b5(Ui(e,0),Ui(e,-.6));s.x1=0,s.y1=0,s.x2=.25*t,s.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:s});break}case"tetrahedron":{const s=GOe(t);r.push({shape:s[0],fill:Ui(e,-.3)}),r.push({shape:s[1],fill:Ui(e,0)}),r.push({shape:s[2],fill:Ui(e,-.6)});break}}break}return r}function j$(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?Xi(t):null}function TDe(e){return e.type==="icon"?"multiply":"tint"}function IDe(e,t){const i=j$(t),r=t&&t.maxSize?Xi(t.maxSize):null,s=t&&t.disableUpsampling,l=e.symbolLayers,d=[];let y=0,v=0;const _=l.getItemAt(l.length-1);let M;return _&&_.type==="icon"&&(M=_.size&&Xi(_.size)),l.forEach(k=>{var D;if(k.type!=="icon"&&k.type!=="object")return;const O=k.type==="icon"?k.size&&Xi(k.size):0,R=i||O?Math.ceil(Math.min(i||O,r||a4)):z0;if(k&&k.resource&&k.resource.href){const z=$De(e,k).then(B=>{const V=k.get("material.color"),q=TDe(k);return NLe(B,R,V,q,s)}).then(B=>{const V=B.width,q=B.height;return y=Math.max(y,V),v=Math.max(v,q),[{shape:{type:"image",x:0,y:0,width:V,height:q,src:B.url},fill:null,stroke:null}]});d.push(z)}else{let z=R;k.type==="icon"&&M&&i&&(z=R*(O/M));const B=(t==null?void 0:t.symbolConfig)==="tall"||((D=t==null?void 0:t.symbolConfig)==null?void 0:D.isTall)||k.type==="object"&&MDe(k);y=Math.max(y,B?hO:z),v=Math.max(v,z),d.push(Promise.resolve(EDe(k,z,B)))}}),Qr(d).then(k=>{const O=[];return k.forEach(R=>{R.value?O.push(R.value):R.error&&SDe.warn("error while building swatchInfo!",R.error)}),o_(O,[y,v],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})})}function CDe(e,t){const i=e.symbolLayers,r=[],s=m$(e),l=j$(t),d=(t&&t.maxSize?Xi(t.maxSize):null)||ON;let y,v=0,_=0;return i.forEach((M,k)=>{if(!M||M.type!=="line"&&M.type!=="path")return;const O=[];switch(M.type){case"line":{const R=pO(M,0);if(ce(R))break;const D=R&&R.width||0;k===0&&(y=D);const z=Math.min(l||D,d),B=k===0?z:l?z*(D/y):z,V=B>$H/2?2*B:$H;_=Math.max(_,B),v=Math.max(v,V),R.width=B,O.push({shape:{type:"path",path:[{command:"M",values:[0,.5*_]},{command:"L",values:[v,.5*_]}]},stroke:R});break}case"path":{const R=Math.min(l||z0,d),D=Ui(M,0),z=Ui(M,-.2),B=ale(M,-.4),V=B?{color:B,width:1}:{};if(M.profile==="quad"){const q=M.width,J=M.height,ne=NOe(q&&J?q/J:1,J===0,q===0),re={...V,join:"bevel"};O.push({shape:ne[0],fill:z,stroke:re}),O.push({shape:ne[1],fill:z,stroke:re}),O.push({shape:ne[2],fill:D,stroke:re})}else O.push({shape:HA.pathSymbol3DLayer[0],fill:z,stroke:V}),O.push({shape:HA.pathSymbol3DLayer[1],fill:D,stroke:V});_=Math.max(_,R),v=_}}r.push(O)}),Promise.resolve(o_(r,[v,_],{node:t&&t.node,scale:s,opacity:t&&t.opacity}))}async function kDe(e,t){const i=e.type==="mesh-3d",r=e.symbolLayers,s=j$(t),l=t&&t.maxSize?Xi(t.maxSize):null,d=s||z0,y=[];let v=0,_=0,M=!1;for(let k=0;k<r.length;k++){const O=r.getItemAt(k),R=[];if(i&&O.type!=="fill")continue;const D=HA.fill[0];switch(O.type){case"fill":{const z=Ym(O),B=Math.min(d,l||a4);v=Math.max(v,B),_=Math.max(_,B),M=!0;let V=Ui(O,0);const q="pattern"in O&&O.pattern,J=s6(O);!i&&K(q)&&q.type==="style"&&q.style!=="solid"&&J&&(V=await ole(q,J)),R.push({shape:D,fill:V,stroke:z});break}case"line":{const z=pO(O,0);if(ce(z))break;const B={stroke:z,shape:D};v=Math.max(v,z0),_=Math.max(_,z0),R.push(B);break}case"extrude":{const z={join:"round",width:1,...pO(O,-.4)},B=Ui(O,0),V=Ui(O,-.2),q=Math.min(d,l||a4),J=FOe(q);z.width=1,R.push({shape:J[0],fill:V,stroke:z}),R.push({shape:J[1],fill:V,stroke:z}),R.push({shape:J[2],fill:B,stroke:z});const ne=z0,re=.7*z0+.5*q;v=Math.max(v,ne),_=Math.max(_,re);break}case"water":{const z=s6(O),B=_8(z),V=_8(z,2),q=_8(z,3),J=DOe();M=!0,R.push({shape:J[0],fill:B}),R.push({shape:J[1],fill:V}),R.push({shape:J[2],fill:q});const ne=Math.min(d,l||a4);v=Math.max(v,ne),_=Math.max(_,ne);break}}y.push(R)}return o_(y,[v,_],{node:t&&t.node,scale:M,opacity:t&&t.opacity})}function ADe(e,t){if(e.symbolLayers.length===0)return Promise.reject(new ge("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return IDe(e,t);case"line-3d":return CDe(e,t);case"polygon-3d":case"mesh-3d":return kDe(e,t)}return Promise.reject(new ge("symbolPreview: swatchInfo3D","symbol not supported."))}const ODe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:ole,getSizeFromOptions:j$,getSymbolLayerFill:Ui,previewSymbol3D:ADe},Symbol.toStringTag,{value:"Module"})),EH={HH:315,HL:45,LL:135,LH:225},LDe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function PDe(e){if(!e)return;const{type:t}=e;if(t.includes("3d"))return Ui(e.symbolLayers.getItemAt(0));if(t==="simple-line"){const i=c3(e);return i&&i.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){const i=c3(e);return i&&i.color}return k7e(e)}function RDe(e,t){const i=t.HH.label,r=t.LL.label,s=t.HL.label,l=t.LH.label;switch(e){case"HH":default:return{top:i,bottom:r,left:s,right:l};case"HL":return{top:s,bottom:l,left:r,right:i};case"LL":return{top:r,bottom:i,left:l,right:s};case"LH":return{top:l,bottom:s,left:i,right:r}}}function NDe(e){const{focus:t,infos:i,numClasses:r}=e,s=LDe[r],l={};i.forEach(y=>{l[y.value]={label:y.label,fill:PDe(y.symbol)}});const d=[];for(let y=0;y<r;y++){const v=[];for(let _=0;_<r;_++){const M=l[s[y][_]];v.push(M.fill)}d.push(v)}return{type:"relationship-ramp",numClasses:r,focus:t,colors:d,labels:RDe(t,l),rotation:lle(t)}}function lle(e){let t=EH[e];return e&&t==null&&(t=EH.HH),t||0}const dO=30,fO=12,ule=[255,255,255],cle=[200,200,200],Xm=[128,128,128],FDe=20,DDe=5;function jDe(e){return e.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function zDe(e){return e.declaredClass==="esri.symbols.PictureMarkerSymbol"}function VDe(e){return e.declaredClass==="esri.symbols.SimpleLineSymbol"}function UDe(e){return e.declaredClass==="esri.symbols.TextSymbol"}function BDe(e,t){const i=e.length-1;return e.map((r,s)=>Bie(r,s,i,t))}async function GDe(e,t,i,r,s,l){const d=t.legendOptions,y=d&&d.customValues,v=await WDe(e,i),_=!!v,M=!!y,k=t.minSize!=null&&t.maxSize!=null,O=t.stops&&t.stops.length>1,R=!!t.target;if(!_||!M&&!(k||O&&!R))return;const D=m$(v);let z=null,B=null,V=null;B=D&&!O?LS([t.minDataValue,t.maxDataValue]):y||await KDe(t,v,r,s);const q=e==null?void 0:e.authoringInfo,J=(q==null?void 0:q.type)==="univariate-color-size",ne=J&&(q==null?void 0:q.univariateTheme)==="above-and-below";if(!B&&O&&(B=t.stops.map(xe=>xe.value),z=t.stops.some(xe=>!!xe.label),e.type==="flow"&&(B=LS(B)),z&&(V=t.stops.map(xe=>xe.label))),D&&(B==null?void 0:B.length)>2&&!ne&&(B=[B[0],B[B.length-1]]),!B)return null;J&&(B==null?void 0:B.length)!==5&&(B=dle({minSize:B[0],maxSize:B[B.length-1]}));const re=D?qDe(e,B):null,ue=R7e(v),_e=z?null:BDe(B,l);return(await Promise.all(B.map(async(xe,Ne)=>{const Ce=D?re[Ne]:await gm(t,v,xe,r,s);return{value:xe,symbol:XDe(ne&&e.type==="class-breaks"?HDe(e,Ne):v,Ce),label:z?V[Ne]:_e[Ne],size:Ce,outlineSize:ue}}))).reverse()}function qDe(e,t){const i=e==null?void 0:e.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let s=[fO,dO];if(r){const l=t[0],d=t[t.length-1],y=fO,v=dO;s=t.map(_=>y+(_-l)/(d-l)*(v-y))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&s.reverse(),s}function HDe(e,t){const i=e.classBreakInfos,r=i.length,s=r<2||!(t>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return e.visualVariables.some(l=>l.type==="color")&&(s.type.includes("3d")?hle(s):ple(s)),s}async function WDe(e,t){var s;if(e.type==="flow")return Gie(e,t);if(e.type==="pie-chart")return new is({color:null,outline:(s=e.outline)!=null&&s.width?e.outline:new $o});let i=null,r=null;if(e.type==="simple")i=e.symbol;else if(e.type==="class-breaks"){const l=e.classBreakInfos;i=l&&l[0]&&l[0].symbol,r=l.length>1}else if(e.type==="unique-value"){const l=e.uniqueValueInfos;i=l&&l[0]&&l[0].symbol,r=l.length>1}return!i||JDe(i)?null:(i=i.clone(),(t||r)&&(i.type.includes("3d")?hle(i):ple(i)),i)}function JDe(e){return e?Rc(e)?!!e.symbolLayers&&e.symbolLayers.some(t=>t&&t.type==="fill"):e.type.includes("fill"):!1}function hle(e){e.type==="line-3d"?e.symbolLayers.forEach(t=>{t.material={color:Xm}}):e.symbolLayers.forEach(t=>{t.type!=="icon"||t.resource&&t.resource.href?t.material={color:cle}:(t.material={color:ule},t.outline={color:Xm,size:1.5})})}function ple(e){var i,r;const t=mR();e.type==="cim"?Rie(e,new ot(cle)):e.type.includes("line")?e.color=Xm:(e.color=t?Xm:ule,e.type==="simple-marker"&&(e.outline?((r=(i=e.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(e.outline.color=Xm):e.outline={color:Xm,width:1.5}))}async function KDe(e,t,i,r){const s=(await Le(()=>Promise.resolve().then(()=>X1),void 0,import.meta.url)).getSizeRangeAtScale(e,i,r),l=s&&dle(s);if(!s&&!l)return;let d=l.map(y=>ZDe(y,e,s));d=LS(d);for(let y=1;y<d.length-1;y++){const v=await YDe(e,t,d[y],d[y-1],i,r);v&&(d[y]=v[0],l[y]=v[1])}return d}function dle(e){const t=e.minSize,i=e.maxSize,r=DDe,s=(i-t)/(r-1),l=[];for(let d=0;d<r;d++)l.push(t+s*d);return l}function ZDe(e,t,i){const r=i.minSize,s=i.maxSize,l=t.minDataValue,d=t.maxDataValue;let y=null;return e<=r?y=l:e>=s?y=d:y=(e-r)/(s-r)*(d-l)+l,y}async function YDe(e,t,i,r,s,l){const d=await gm(e,t,i,s,l),y=await gm(e,t,r,s,l),v=OS(i),_=v.fractional,M=FDe;let k=v.integer,O=null,R=null;i>0&&i<1&&(O=10**_,k=OS(i*=O).integer);for(let D=k-1;D>=0;D--){const z=10**D;let B=Math.floor(i/z)*z,V=Math.ceil(i/z)*z;O!=null&&(B/=O,V/=O);let q=(B+V)/2;[,q]=LS([B,q,V],{indexes:[1]});const J=await gm(e,t,B,s,l),ne=await gm(e,t,V,s,l),re=await gm(e,t,q,s,l),ue=I9(d,J,y,null),_e=I9(d,ne,y,null),xe=I9(d,re,y,null);let Ne=ue.previous<=M,Ce=_e.previous<=M;if(Ne&&Ce&&(ue.previous<=_e.previous?(Ne=!0,Ce=!1):(Ce=!0,Ne=!1)),Ne?R=[B,J]:Ce?R=[V,ne]:xe.previous<=M&&(R=[q,re]),R)break}return R}async function gm(e,t,i,r,s){const{getSize:l}=await Le(()=>Promise.resolve().then(()=>X1),void 0,import.meta.url);return l(e,i,{scale:r,view:s,shape:t.type==="simple-marker"?t.style:null})}function XDe(e,t){const i=e.clone();if(Rc(i))m$(i)||i.symbolLayers.forEach(r=>{r.type!=="fill"&&(r.size=t)});else if(jDe(i))i.size=t;else if(zDe(i)){const r=i.width,s=i.height;i.height=t,i.width=t*(r/s)}else VDe(i)?i.width=t:UDe(i)&&i.font&&(i.font.size=t);return i}function QDe(e){const i=Math.floor(Math.log10(Math.abs(e)))+1,r=i<4||i>6?4:i,s=1e6,l=Math.abs(e)>=s?"compact":"standard";return fs(e,{notation:l,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Gp=Ke.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),eje="https://utility.arcgis.com/sharing/tools/legend",tje="esri.layers.ImageryLayer",ije="esri.layers.ImageryTileLayer",rje="esri.layers.WCSLayer",_5=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,nje=new Dt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),TH={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},x5=new is({size:6,outline:{color:[128,128,128,.5],width:.5}}),sje=new Dc({style:"solid"});function yO(e){return e.type==="flow"}function fle(e){return e.type==="vector-field"}function yle(e){return e.type==="raster-colormap"}function mle(e){return e.type==="raster-stretch"}function gle(e){return e.type==="raster-shaded-relief"}function vm(e){return e.declaredClass==="esri.renderers.SimpleRenderer"}function wm(e){return e.declaredClass==="esri.renderers.ClassBreaksRenderer"}function mO(e){return e.declaredClass==="esri.renderers.UniqueValueRenderer"}function vle(e){return e.declaredClass==="esri.renderers.HeatmapRenderer"}function oje(e){return LN(e)||PN(e)||RN(e)||aje(e)}function aje(e){return e.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function LN(e){return e.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function PN(e){return e.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function RN(e){return e.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function wle(e){return e.declaredClass==="esri.renderers.DotDensityRenderer"}function ble(e){return e.declaredClass==="esri.renderers.PieChartRenderer"}function lje(e,t){return vm(e)||wm(e)||mO(e)||vle(e)||wle(e)||ble(e)?t.type==="2d"||mDe(e):mle(e)||yle(e)||gle(e)||LN(e)||PN(e)||RN(e)||fle(e)||yO(e)}function IH(e){return e.declaredClass==="esri.layers.BuildingSceneLayer"}function uje(e){return e.declaredClass==="esri.layers.VoxelLayer"}function cje(e){return e.declaredClass==="esri.layers.WMSLayer"}function hje(e){return e.declaredClass==="esri.layers.WMTSLayer"}function CH(e){return e.declaredClass==="esri.layers.MapImageLayer"}function pje(e){return e.declaredClass==="esri.layers.TileLayer"}function dje(e){return e.declaredClass==="esri.layers.FeatureLayer"}function Lw(e){return e.declaredClass===tje}function x8(e){return e.declaredClass===ije}function fje(e){return e.declaredClass===rje}function yje(e){return e.type==="stretch-ramp"}function mje(e){var t;return((t="authoringInfo"in e&&(e==null?void 0:e.authoringInfo))==null?void 0:t.type)==="univariate-color-size"}function gje(e){const t="authoringInfo"in e&&(e==null?void 0:e.authoringInfo);return(t==null?void 0:t.type)==="univariate-color-size"&&(t==null?void 0:t.univariateTheme)==="above-and-below"}const vje=new is({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Iy={},wn=class extends st{constructor(e){super(e),this._handles=new ir,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new vt,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this._handles.add([Ko(()=>this.children,"change",t=>{const{added:i,removed:r}=t,s=this._handles;i.forEach(l=>{const d=`activeLayerInfo-ready-watcher-${l.layer.uid}`;s.add(Pe(()=>l.ready,e,Jt),d)}),r.forEach(l=>s.remove(l.layer.uid)),e()})]),this.keepCacheOnDestroy||(Iy={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Iy=null)}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new fc,t.effect=e.effect,t.end(),t.scale=this.scale),t}get opacity(){var s;const e=this.layer.opacity,t=(s=this.parent)==null?void 0:s.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return t!=null?t*e:r!=null?r*e:e}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if(e.featureReduction.type==="cluster")return!0;if(e.featureReduction.type==="binning"&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,i=>{if(dje(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if(i.featureSet&&i.featureSet.features.length){const r=i.layerDefinition,s=r&&r.drawingInfo,l=s&&Tke(s.renderer),d=nje.read(r.geometryType);return l?this._getRendererLegendElements(l,{title:i.name,geometryType:d}):(Gp.warn("drawingInfo not available!"),null)}return null});try{const i=[];await Qr(t).then(r=>{r.forEach(({value:s})=>s&&i.push(...s))}),this.legendElements=i,this.notifyChange("ready")}catch(i){Gp.warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){Gp.warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){var t,i;const e=this.layer;if(uje(e))this._constructLegendElementsForVoxellayer();else if(hje(e))this._constructLegendElementsForWMTSlayer();else if(cje(e))await this._constructLegendElementsForWMSSublayers();else if(IH(e))await this._constructLegendElementsForBuildingSceneLayer();else if(CH(e)||pje(e)||IH(e))await this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");let r="default";Lw(e)&&(r=(((t=e==null?void 0:e.renderingRule)==null?void 0:t.functionName)||"default")+"_"+((i=e.bandIds)!=null&&i.length?e.bandIds.join(""):"###")),await this._getLegendLayers(`${e.uid}-${r}`).then(async s=>{this.legendElements=[],this.notifyChange("ready");const l=s.map(async d=>{if(Lw(e)||x8(e)){const v=Pe(()=>["renderingRule"in e&&e.renderingRule,e.bandIds],()=>cv(async()=>{Iy.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this._handles.add(v,"imageryLayers-watcher")}const y=this._generateSymbolTableElementForLegendLayer(d);y&&y.infos.length&&(Lw(e)&&(y.title=e.title),this.legendElements.push(y)),this.notifyChange("ready")});await Qr(l)}).catch(s=>{Gp.warn("Request to server for legend has failed!",s)})}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,i=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!i&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await mv(()=>!t.updating);const r=i?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return r.geometry=this.view.extent,(i?"queryFeatureCount"in t&&await t.queryFeatureCount(r):"queryFeatureCount"in e&&await e.queryFeatureCount(r))!==0}_getParentLayerOpacity(e){let t=1;const i=e.parent;return i&&"uid"in i&&(t=this._getParentLayerOpacity(i)),e.opacity*t}_isGroupActive(){const e=this.children;return!!e.length&&e.some(t=>t.ready)}_isRendererScaleDriven(e){if(e.type==="dot-density")return!0;const t="valueExpression"in e&&e.valueExpression;if(_5.test(t))return!0;const i="visualVariables"in e&&e.visualVariables;return!!i&&i.some(r=>this._isScaleDrivenSizeVariable(r))}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const t=e,i=t.minSize,r=t.maxSize;return typeof i=="object"&&i?this._isScaleDrivenSizeVariable(i):typeof r=="object"&&r?this._isScaleDrivenSizeVariable(r):!!t.expression||_5.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(i=>this._isLayerScaleDriven(i));const t=e.parent;if(e.loaded===!1&&t&&CH(t)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const i of t.sourceJSON.layers)if(i.id===e.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxellayer(){var l;this.legendElements=[],this._handles.remove("voxel-style-watcher");const e=this.layer;this._handles.add(Pe(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const t=e.getVariableStyle(null),i=[];if(t){if((l=t.uniqueValues)!=null&&l.length){const d=[];t.uniqueValues.forEach(y=>{y.enabled&&d.push({label:y.label||`${y.value}`,value:y.value,symbol:new Dc({color:y.color,outline:null})})}),d.length&&i.push({type:"symbol-table",title:t.label,infos:d})}else if(t.transferFunction){const{colorStops:d,stretchRange:y}=t.transferFunction,v=d.toArray().reverse(),_=y.map((k,O)=>`${O===0?Vie:Uie} ${QDe(k)}`).reverse(),M=v.map(k=>({color:k.color,value:null,label:null}));M[0].label=_[0],M[M.length-1].label=_[1],i.push({type:"color-ramp",title:t.label,infos:M,preview:b0(v.map(k=>k.color))})}}const r=e.opacity,s=i.reduce((d,y)=>d.concat(this._getAllInfos(y)),[]).filter(d=>!!(d!=null&&d.symbol)).map(d=>this._getSymbolPreview(d,r));await Qr(s),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const e=this.layer.activeLayer;if(this._handles.add(Pe(()=>{const{layer:t}=this;return t&&"activeLayer"in t&&t.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),e.styleId&&e.styles){let t=null;e.styles.some(i=>e.styleId===i.id&&(t=i.legendUrl,!0)),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this._handles.add(Pe(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){const i=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const r=e.toArray();for(const s of r){const l=Pe(()=>[s.title,s.visible,s.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this._handles.add(l,"wms-sublayers-watcher"),!this.respectLayerVisibility||s.visible&&s.legendEnabled){const d=await this._generateSymbolTableElementForWMSSublayer(s,t);d&&d.infos.length&&i.unshift(d)}}return i}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(r=>r);return{type:"symbol-table",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var d;let i=e.legendUrl;if(!i)return;const r={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};t&&(i=Z5(i,t));let s=null;const l=(d=e.layer)==null?void 0:d.opacity;try{s=(await Bi(i,{responseType:"image"})).data,s&&(s.style.opacity=l)}catch{}return r.infos.push({src:i,preview:s,opacity:l}),r}_getLegendLayers(e,t){const i=Iy&&Iy[e];return i?Promise.resolve(i):this._legendRequest(t).then(r=>{const s=r.layers;return Iy[e]=s,s})}_legendRequest(e){const t=this.layer;let i={f:"json",dynamicLayers:e};if(Lw(t)){const s=t.exportImageServiceParameters.renderingRule;if(s&&(i.renderingRule=JSON.stringify(s.rasterFunctionDefinition||s.toJSON())),t.bandIds&&(i.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:l,viewId:d,customParameters:y}=t;i={raster:l,viewId:d,...i,...y}}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){const s=r.indexOf("?");s>-1?r=r.substring(0,s)+"/legend"+r.substring(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),l=r.substring(0,s)+r.substring(s+5,r.length);r=eje+"?soapUrl="+encodeURI(l)+"&returnbytes=true"}return Bi(r,{query:i}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(Pe(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){Gp.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let i=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=e.toArray();for(const s of r){const l=Pe(()=>["renderer"in s&&s.renderer,s.opacity,s.title,s.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this._handles.add(l,"sublayers-watcher"),!this.respectLayerVisibility||s.visible){const d=s&&s.opacity!=null?s.opacity:null,y=d!=null?d*t:t;if(s.type==="building-group"){const v={type:"symbol-table",title:s.title,infos:[]},_=await this._generateLegendElementsForBuildingSublayers(s.sublayers,y);v.infos.push(..._),i=[v,...i]}else s.renderer&&(i=[...await this._getRendererLegendElements(s.renderer,{title:s.title,opacity:y,sublayer:s}),...i])}}return i.filter(s=>!!s&&(!("infos"in s)||s.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(Pe(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){Gp.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForSublayers(e,t,i){const r=this.layer;let s=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let l=e.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(l=this.sublayerIds.map(d=>r.findSublayerById(d)).filter(Boolean));for(const d of l){const y=Pe(()=>[d.renderer,d.opacity,d.title,d.visible,d.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this._handles.add(y,"sublayers-watcher"),!this.respectLayerVisibility||d.visible&&d.legendEnabled&&this._isSublayerInScale(d)){const v=d&&d.opacity!=null?d.opacity:null,_=v!=null?v*t:t;if(d.renderer&&!d.sublayers&&d.originIdOf("renderer")>Ft.SERVICE)await d.load(),s=[...await this._getRendererLegendElements(d.renderer,{title:d.title,opacity:_,sublayer:d}),...s];else{const M=await this._generateSymbolTableElementForSublayer(d,_,i);M&&s.unshift(M)}}}return s.filter(d=>!!d&&(!("infos"in d)||d.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,i){if(!i){i=new Map;const s=this.layer,l=e.source;let d=null;if(!(!l||l.type==="map-layer"&&l.mapLayerId===e.id&&(!l.gdbVersion||l.gdbVersion===("gdbVersion"in s&&s.gdbVersion)))||e.originIdOf("renderer")>Ft.SERVICE||e.originIdOf("labelingInfo")>Ft.SERVICE||e.originIdOf("labelsVisible")>Ft.SERVICE){const v=new va({layer:this.layer});d=v.hasDynamicLayers?v.dynamicLayers:null,v.destroy()}const y=d||`${s.uid}-default`;(await this._getLegendLayers(y,d)).forEach(v=>i.set(v.layerId,v))}const r=i.get(e.id);if((!r||(r==null?void 0:r.subLayerIds)&&r.defaultVisibility)&&e.sublayers){const s=await this._generateLegendElementsForSublayers(e.sublayers,t,i);return{type:"symbol-table",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(r,e,t)}_generateSymbolTableElementForLegendLayer(e,t,i){var y;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=t==null?void 0:t.renderer;let s=(t==null?void 0:t.title)||e.layerName;if(r&&(!t||(t==null?void 0:t.originIdOf("renderer"))>Ft.SERVICE)){const v=(t==null?void 0:t.title)||this._getRendererTitle(r,t);v&&(s&&typeof v!="string"&&"title"in v&&(v.title=s),s=v)}const l={type:"symbol-table",title:s,legendType:e.legendType?e.legendType:null,infos:[]},d=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return((y=e.legendGroups)==null?void 0:y.length)>0?e.legendGroups.forEach(v=>{var M;const _={type:"symbol-table",title:v.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(d.filter(k=>k.groupId===v.id),e.layerId,i)};((M=_.infos)==null?void 0:M.length)>0&&l.infos.push(_)}):l.infos=this._generateSymbolTableElementInfosForLegendLayer(d,e.layerId,i),l.infos.length>0?l:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map(r=>{let s=r.url;if(r.imageData&&r.imageData.length>0)s=`data:image/png;base64,${r.imageData}`;else{if(s.indexOf("http")===0)return null;s=_2e(`${this.layer.url}/${t}/images/${s}`)}return{label:r.label,src:s,opacity:i==null?this.opacity:i,width:r.width,height:r.height}}).filter(r=>!!r)}_isSublayerInScale(e){const t=e.minScale||0,i=e.maxScale||0;return!(t>0&&t<this.scale||i>this.scale)}_isLegendLayerInScale(e,t){const i=t||this.layer;let r=null,s=null,l=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(e.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),e.maxScale===0&&i.tileInfo&&(s=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,e.minScale)||i.minScale||e.minScale,s=Math.max(i.maxScale,e.maxScale)),(r>0&&r<this.scale||s>this.scale)&&(l=!1),l}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||e.length===0)return e;const i=t.renderer,r=e.some(d=>d.values);let s=null,l=null;return r&&e.some((d,y)=>(d.values||(s=y,l=d,l.label||(l.label="others")),l!=null)),i?i.type==="unique-value"?l&&(e.splice(s,1),e.push(l)):i.type==="class-breaks"&&(l&&e.splice(s,1),e.reverse(),l&&e.push(l)):l&&(e.splice(s,1),e.push(l)),e}async _getRendererLegendElements(e,t={}){return lje(e,this.view)?oje(e)?this._constructPointCloudRendererLegendElements(e,t):wle(e)?this._constructDotDensityRendererLegendElements(e):ble(e)?this._constructPieChartRendererLegendElements(e):this._constructRendererLegendElements(e,t):(Gp.warn(`Renderer of type '${e.type}' not supported!`),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const i=t.title,r=[];let s=null,l=null;if(LN(e))s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(y=>{s.infos.unshift({label:y.label||y.minValue+" - "+y.maxValue,value:[y.minValue,y.maxValue],symbol:this._getAppliedCloneSymbol(x5,y.color)})});else if(PN(e)){const y=e.stops;let v=null;if(y.length&&(y.length===1&&(v=y[0].color),!v)){const M=y[0].value,k=y[y.length-1].value;M!=null&&k!=null&&(v=Hie(M+(k-M)/2,y))}s={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(x5,v||x5.color)}]};const _=eEe(e.stops);l={type:"color-ramp",title:i||this._getPointCloudRendererTitle(e),infos:_,preview:b0(_.map(M=>M.color))}}else RN(e)&&(s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach(y=>{s.infos.push({label:y.label||y.values.join(", "),value:y.values.join(", "),symbol:this._getAppliedCloneSymbol(x5,y.color)})}));s&&s.infos.length&&r.push(s),l&&l.infos.length&&r.push(l);const d=r.reduce((y,v)=>y.concat(v.infos),[]).filter(y=>!!y.symbol).map(y=>this._getSymbolPreview(y,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}}));return Qr(d).then(()=>r)}_getElementInfoForDotDensity(e,t){var O;const{backgroundColor:i,outline:r,dotSize:s}=e,l=(O=this.effectList)==null?void 0:O.effects.map(R=>R.toJSON()),d=PS(l),y=s+"-"+t+"-"+i+"-"+(r&&JSON.stringify(r.toJSON()))+"-"+d,v=this._dotDensityUrlCache,_=v.has(y)?v.get(y):FLe(e,t);v.set(y,_);const M={shape:{type:"image",x:0,y:0,width:_.width,height:_.height,src:_.src},fill:null,stroke:null,offset:[0,0]},k=o_([[M]],[_.width,_.height],{effectView:this.effectList});return{opacity:1,src:_.src,preview:k,width:_.width,height:_.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),i=e.legendOptions&&e.legendOptions.unit,r={type:"symbol-table",title:{value:t&&Math.round(t),unit:i||""},infos:[]};return e.attributes.forEach(s=>{const l=this._getElementInfoForDotDensity(e,s.color);l.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(l)}),Promise.resolve([r])}async _constructPieChartRendererLegendElements(e){var v,_,M,k;const t=this.layer.opacity,i=[],r="Others",s=e.outline;e.attributes.forEach(O=>{const R=new is({color:O.color,outline:s}),D=O.label||O.valueExpressionTitle||O.field;i.push({label:D,symbol:R})});const l=i.length?[...i]:[];if(((v=e.othersCategory)==null?void 0:v.color)&&((_=e.othersCategory)==null?void 0:_.threshold)!==0){const O=new is({color:e.othersCategory.color,outline:s});i.push({label:e.othersCategory.label||r,symbol:O})}if((M=e.defaultColor)!=null&&M.a){const O=new is({color:e.defaultColor,outline:s});i.push({label:e.defaultLabel,symbol:O})}const d=await this._getVisualVariableLegendElements(e,this.layer)||[];if(i.length){d.unshift({type:"symbol-table",title:null,infos:i});const O=l.filter(D=>D.label!==r).map(D=>D.symbol.color).filter(Boolean),R=DLe(O,{holePercentage:e.holePercentage,backgroundColor:(k=e.backgroundFillSymbol)==null?void 0:k.color,effectList:this.effectList,outline:s});d.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:i,preview:R})}const y=d.reduce((O,R)=>O.concat(this._getAllInfos(R)),[]).filter(O=>!!(O!=null&&O.symbol)&&!(O!=null&&O.preview)).map(O=>this._getSymbolPreview(O,t,{effectList:this.effectList}));return await Qr(y),d}async _constructRendererLegendElements(e,t={}){var B;const{title:i,sublayer:r}=t,s=r||this.layer;let l=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const d=await this._getVisualVariableLegendElements(l,s)||[],y={type:"symbol-table",title:i||this._getRendererTitle(l,s),infos:[]};let v=null,_=!1;const M=new Set;if(yO(l)&&!this._hasSizeRamp){const V=await Gie(l);y.infos.push({label:null,symbol:V})}else if(mje(l)){let V=i;const q=gje(l)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",J=d.findIndex(xe=>xe.type==="color-ramp"),ne=J!==-1?d.splice(J,1)[0]:null,re=d.findIndex(xe=>xe.type==="size-ramp"),ue=re!==-1?d.splice(re,1)[0]:null,_e=[];ne&&(V=ne.title,_e.push(ne)),ue&&(V=ue.title,_e.push(ue)),_e.length>0&&d.push({type:q,title:V,infos:_e})}else if(vle(l)){const V=Wie(l);d.push({type:"heatmap-ramp",title:i||((B=l.legendOptions)==null?void 0:B.title),infos:V,preview:b0(V.map(q=>q.color),{effectList:this.effectList})})}else if(mO(l)){const V=l&&l.authoringInfo;if(V&&V.type==="relationship"){const{focus:q,numClasses:J,field1:ne,field2:re}=V;if(J&&ne&&re){const ue=[ne,re];let _e=lle(q)||0;for(const Ne of ue){const{field:Ce,normalizationField:Ge,label:Ze}=Ne,lt=Ze||{field:this._getFieldAlias(Ce,s),normField:Ge&&this._getFieldAlias(Ge,s)},et=vje.clone();et.angle=_e,y.infos.push({label:lt,symbol:et}),M.add(et),_e+=90}const xe=NDe({focus:q,numClasses:J,infos:l.uniqueValueInfos});d.unshift(xe)}}else{const q=l.field;l.uniqueValueInfos.forEach(J=>{J.symbol&&y.infos.push({label:J.label||this._getDomainName(q,J.value,s)||J.value,value:J.value,symbol:J.symbol})})}l.defaultSymbol&&(y.infos.push({label:l.defaultLabel||"others",symbol:l.defaultSymbol}),_=!0)}else if(wm(l))v=this._isUnclassedRenderer(l),(!v||!this._hasSizeRamp)&&(l.classBreakInfos.forEach(V=>{V.symbol&&y.infos.unshift({label:V.label||(v?null:V.minValue+" - "+V.maxValue),value:[V.minValue,V.maxValue],symbol:V.symbol})}),v&&(y.title=null),this._updateInfosforClassedSizeRenderer(l,y.infos)),l.defaultSymbol&&!v&&(y.infos.push({label:l.defaultLabel||"others",symbol:l.defaultSymbol}),_=!0);else if(mle(l))if(x8(this.layer)||fje(this.layer)){const V=this._constructTileImageryStretchRendererElements(l);yje(V)?d.push(V):y.infos=V}else{const V=this.layer;let q,J;l.statistics&&l.statistics.length&&(q=l.statistics[0].min!=null?l.statistics[0].min:l.statistics[0][0],J=l.statistics[0].max!=null?l.statistics[0].max:l.statistics[0][1]);let ne=[];const re=V.renderingRule?await V.generateRasterInfo(V.renderingRule):V.serviceRasterInfo,ue=re.keyProperties.BandProperties,_e=TH[V.rasterInfo.pixelType.toLowerCase()];re.bandCount===1||V.bandIds&&V.bandIds.length===1?(q=q!=null?q:re.statistics?re.statistics[V.bandIds[0]].min:_e[0],J=J!=null?J:re.statistics?re.statistics[V.bandIds[0]].max:_e[1],q||J?d.push(this._getStretchLegendElements(l,{min:q,max:J})):this._getServerSideLegend()):re.bandCount>=3?ue&&ue.length>=re.bandCount?V.bandIds&&V.bandIds.length===3?(ne=V.bandIds.map(xe=>ue[xe].BandName),y.infos=this._createSymbolTableElementMultiBand(ne)):V.format==="lerc"?(ne=[0,1,2].map(xe=>ue[xe].BandName),y.infos=this._createSymbolTableElementMultiBand(ne)):this._getServerSideLegend():V.format==="lerc"?(ne=["band1","band2","band3"],y.infos=this._createSymbolTableElementMultiBand(ne)):this._getServerSideLegend():this._getServerSideLegend()}else if(yle(l))l.colormapInfos.forEach(V=>{y.infos.push({label:V.label,value:V.value,symbol:this._getAppliedCloneSymbol(sje,V.color)})});else if(vm(l)){let V=l.symbol;switch(t.geometryType){case"point":V="pointSymbol"in s&&s.pointSymbol;break;case"polyline":V="lineSymbol"in s&&s.lineSymbol;break;case"polygon":V="polygonSymbol"in s&&s.polygonSymbol}l.symbol&&!this._hasSizeRamp&&y.infos.push({label:l.label,symbol:V})}else if(fle(l)){l.outputUnit&&(this.title="("+l.toJSON().outputUnit+")"),y.title=l.attributeField;const V=l.getClassBreakInfos();V!=null&&V.length?V.forEach(q=>{y.infos.push({label:q.minValue+" - "+q.maxValue,symbol:q.symbol})}):y.infos.push({label:l.attributeField,symbol:l.getDefaultSymbol()})}else gle(l)&&d.push(this._getStretchLegendElements(l,{min:0,max:255}));const k=l.defaultSymbol;!k||_||vm(l)||v&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||d.push({type:"symbol-table",infos:[{label:l.defaultLabel||"others",symbol:k}]}),y.infos.length&&d.unshift(y);const O=t.opacity==null?this.opacity:t.opacity,R=this._isTallSymbol("visualVariables"in l&&l.visualVariables),D=Lw(this.layer)||x8(this.layer),z=d.reduce((V,q)=>V.concat(this._getAllInfos(q)),[]).filter(V=>!!(V!=null&&V.symbol)).map(V=>this._getSymbolPreview(V,O,{isDefault:V.symbol===k,applyScaleDrivenSize:!M.has(V.symbol),symbolConfig:{isTall:R,isSquareFill:D},effectList:M.has(V.symbol)?null:this.effectList}));return l=null,await Qr(z),d}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e==null?void 0:e.infos;return t?t.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[e]}_constructTileImageryStretchRendererElements(e){var M,k;const t=this.layer,i=t.rasterInfo,r=i.bandCount||e.statistics.length;let s,l,d=[];const y=i.keyProperties&&i.keyProperties.BandProperties,v=(M=e==null?void 0:e.statistics)!=null&&M.length?e.statistics:i==null?void 0:i.statistics;if(v)s=v[0].min!==void 0?v[0].min:v[0][0],l=v[0].max||v[0][1];else{const O=TH[t.rasterInfo.pixelType.toLowerCase()];s=O[0],l=O[1]}if(t.hasStandardTime()&&(s=t.getStandardTimeValue(s),l=t.getStandardTimeValue(l)),i.bandCount===1||((k=t.bandIds)==null?void 0:k.length)===1)return this._getStretchLegendElements(e,{min:s,max:l});function _(O){var D;const R=((D=t==null?void 0:t.bandIds)!=null&&D.length?t.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(z=>O&&O[z]&&O[z].BandName||"band"+(z+1));return R.length<3?R.push(R[1]):R.length>3&&R.splice(3),R}return d=y&&y.length>=r?_(y):_(),this._createSymbolTableElementMultiBand(d)}_getStretchLegendElements(e,t){const i=e.colorRamp,r=iEe(i,t);return{type:"stretch-ramp",title:"",infos:r,preview:b0(r.map(s=>s.color))}}async _getSizeLegendElement(e,t,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await GDe(i,t,await ak(i),this.scale,this.view.type,r)}}_createSymbolTableElementMultiBand(e){const t=[],i=["red","green","blue"];return e.forEach((r,s)=>{var l;t.push({label:{colorName:i[s],bandName:r},src:Y7e[s],opacity:(l=this.opacity)!=null?l:1})}),t}_updateInfosforClassedSizeRenderer(e,t){const i=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",r=e.classBreakInfos.some(s=>m$(s.symbol));if(i&&r){const s=dO,l=fO,d=e.classBreakInfos.length,y=(s-l)/(d>1?d-1:d);t.forEach((v,_)=>{v.size=s-y*_})}}_isTallSymbol(e){let t=!1,i=!1;if(e)for(let r=0;r<e.length&&(!t||!i);r++){const s=e[r];s.type==="size"&&(s.axis==="height"&&(t=!0),s.axis==="width-and-depth"&&(i=!0))}return t&&i}async _getSymbolPreview(e,t,i){let r=!(i!=null&&i.isDefault)&&e.size==null&&this._hasSizeRamp?bo(Mn.size):e.size;if(this._scaleDrivenSizeVariable&&(i==null?void 0:i.applyScaleDrivenSize)){const{getSize:s}=await Le(()=>Promise.resolve().then(()=>X1),void 0,import.meta.url);r=s(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}return Coe(e.symbol,{size:r,opacity:t,scale:!1,symbolConfig:i==null?void 0:i.symbolConfig,effectView:i==null?void 0:i.effectList}).then(s=>(e.preview=s,e)).catch(()=>(e.preview=null,e))}async _loadRenderer(e){var l,d;const t=[],i=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const r="visualVariables"in e&&((l=e.visualVariables)==null?void 0:l.some(y=>y.type==="size"&&y.target!=="outline"&&!_5.test(y.valueExpression)));if(e&&"visualVariables"in e&&!r&&"featureReduction"in i&&((d=i.featureReduction)==null?void 0:d.type)==="cluster"){const y=this.layerView._effectiveRenderer,v=vDe(y,this.view);if(v){const _=i.featureReduction;if("clusterMinSize"in _&&"clusterMaxSize"in _){const{clusterMinSize:k,clusterMaxSize:O}=_;v.legendOptions=new Vne({showLegend:k!==O})}const M=e.visualVariables||[];e.visualVariables=M.concat([v]),this._hasClusterSizeVariable=!0}}const s=await ak(e);if(wm(e)||mO(e)){const y=(e.classBreakInfos||e.uniqueValueInfos).map(v=>this._fetchSymbol(v.symbol,s).then(_=>{v.symbol=_}).catch(()=>{v.symbol=null}));Array.prototype.push.apply(t,y)}return t.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:s).then(y=>{this._applySymbolToRenderer(e,y,vm(e))}).catch(()=>{this._applySymbolToRenderer(e,null,vm(e))})),Qr(t).then(()=>e)}_applySymbolToRenderer(e,t,i){i?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(e.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await(this.view.type==="2d"?e.fetchCIMSymbol({cache:i}):e.fetchSymbol({cache:i}));return this._getAppliedCloneSymbol(r,t)}catch{throw Gp.warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const i=e.clone(),r=t&&t.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?Rie(i,t):i.color&&(i.color=new ot(r||i.color)),i}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new ot(t))})}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||e.type==="vector-field")return null;const i=e.visualVariables,r=[],s=[],l=[];for(const M of i)M.type==="color"?r.push(M):M.type==="size"?s.push(M):M.type==="opacity"&&l.push(M);const d=[...r,...s,...l];let y,v;if(r.length===0&&wm(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const M=e.classBreakInfos[0];y=M&&M.symbol}if(r.length===0&&vm(e)&&(y=e.symbol),y)if(y.type.includes("3d")){const M=y.symbolLayers.getItemAt(0);M.type==="water"?K(M.color)&&(v=M.color):K(M.material)&&K(M.material.color)&&(v=M.material.color)}else y.url||(v=y.color);const _=this.effectList;return(await Promise.all(d.map(async M=>{if(!M.legendOptions||M.legendOptions.showLegend!==!1){const k=yO(e)?M.field:this._getRampTitle(M,t);let O=null;const R="getField"in t&&t.getField&&t.getField(M.field),D=R&&j_e(R);if(M.type==="color"){const z=await lk(M,null,D);O={type:"color-ramp",title:k,infos:z,preview:b0(z.map(B=>B.color),{effectList:_})},this._hasColorRamp||(this._hasColorRamp=!(O.infos==null||!O.infos.length))}else if(M.type==="size"&&M.target!=="outline")_5.test(M.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=M):(O=await this._getSizeLegendElement(k,M,e,D),this._hasSizeRamp||(this._hasSizeRamp=!(O.infos==null||!O.infos.length)));else if(M.type==="opacity"){const z=await lk(M,v,D);O={type:"opacity-ramp",title:k,infos:z,preview:b0(z.map(B=>B.color),{effectList:_})},this._hasOpacityRamp||(this._hasOpacityRamp=!(O.infos==null||!O.infos.length))}return O&&O.infos?O:null}}))).filter(M=>!!M)}_getDomainName(e,t,i){if(e&&typeof e!="function"){const r="getField"in i&&i.getField&&i.getField(e),s=r&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(r.name):null;return s&&s.type==="coded-value"?s.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,i=e.field;if("featureReduction"in t&&t.featureReduction&&t.featureReduction.type==="cluster"){const r=t.featureReduction,s="popupTemplate"in r&&r.popupTemplate,l=s&&s.fieldInfos;if(l){for(const d of l)if(d.fieldName===i)return i==="cluster_count"?d.label||{showCount:!0}:d.label}}return{showCount:!0}}_getRampTitle(e,t){let i=e.field,r=e.normalizationField,s=!1,l=!1,d=!1,y=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const v=e.legendOptions&&e.legendOptions.title;if(v!=null)y=v;else if(e.valueExpressionTitle)y=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const _=t.renderer.authoringInfo.visualVariables;for(let M=0;M<_.length;M++){const k=_[M];if(k.type==="color"){if(k.style==="ratio"){s=!0;break}if(k.style==="percent"){l=!0;break}if(k.style==="percent-of-total"){d=!0;break}}}}y={field:i&&this._getFieldAlias(i,t),normField:r&&this._getFieldAlias(r,t),ratio:s,ratioPercent:l,ratioPercentTotal:d}}return y}_getRendererTitle(e,t){const i=e;if(i.legendOptions&&i.legendOptions.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,s=null,l=null;wm(i)&&(s=i.normalizationField,l=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,s=typeof s=="function"?null:s;let d=null;return(r||s)&&(d={field:r&&this._getFieldAlias(r,t),normField:s&&this._getFieldAlias(s,t),normByPct:l}),d}_getFieldAlias(e,t){const i="popupTemplate"in t&&t.popupTemplate,r=i&&i.fieldInfos;let s=null;r&&r.some(v=>e===v.fieldName&&(s=v,!0));let l=null;"getField"in t&&t.getField?l=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(l=t.fieldsIndex.get(e));const d=s||l;let y=null;return d&&(y=s&&s.label||l&&l.alias||"name"in d&&d.name||"fieldName"in d&&d.fieldName),y}_isUnclassedRenderer(e){const t=e.visualVariables;let i=!1;return wm(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&t&&(i=e.field?t.some(r=>!(!r||e.field!==r.field||(e.normalizationField||r.normalizationField)&&e.normalizationField!==r.normalizationField)):!!t.length),i}};g([S()],wn.prototype,"children",void 0),g([S({readOnly:!0})],wn.prototype,"effectList",null),g([S()],wn.prototype,"layerView",void 0),g([S()],wn.prototype,"layer",void 0),g([S()],wn.prototype,"legendElements",void 0),g([S({readOnly:!0})],wn.prototype,"opacity",null),g([S()],wn.prototype,"parent",void 0),g([S({readOnly:!0,dependsOn:[]})],wn.prototype,"ready",null),g([S()],wn.prototype,"hideLayersNotInCurrentView",void 0),g([S()],wn.prototype,"keepCacheOnDestroy",void 0),g([S()],wn.prototype,"respectLayerVisibility",void 0),g([S({readOnly:!0})],wn.prototype,"scale",null),g([S()],wn.prototype,"sublayerIds",void 0),g([S({readOnly:!0})],wn.prototype,"isScaleDriven",null),g([S()],wn.prototype,"title",void 0),g([S({readOnly:!0,dependsOn:["ready"],value:0})],wn.prototype,"version",null),g([S()],wn.prototype,"view",void 0),wn=g([Q("esri.widgets.Legend.support.ActiveLayerInfo")],wn);const _le=wn,zf={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},xle=vt.ofType(_le),wje=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],Sle="view.basemapView.baseLayerViews",$le="view.groundView.layerViews",Mle="view.basemapView.referenceLayerViews",bje=[Sle,$le,"view.layerViews",Mle];let cl=class extends st{constructor(e){super(e),this._handles=new ir,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new vt,this.activeLayerInfos=new xle,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(Pe(()=>this.view,()=>this._viewHandles(),Jt),zf.view),this._handles.add(B6(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(zf.state),this.view&&this._handles.add(Pe(()=>this.state,()=>this._stateHandles(),Jt),zf.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([zf.allLayerViews,zf.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t&&t.parent&&t.parent.children.remove(t)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",t=>this._allLayerViewsChangeHandle(t)),zf.allLayerViews),this._handles.add(Pe(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),zf.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach(t=>this._destroyViewActiveLayerInfo(t.uid)),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(e.length<2)return;const t=[];e.forEach(r=>{if(!r.parent){const s=r.layer.parent,l=s&&"uid"in s&&this._layerViewByLayerId[s.uid],d=l&&this._activeLayerInfosByLayerViewId[l.uid];d&&e.includes(d)&&(t.push(r),r.parent=d,d.children.add(r),this._sortActiveLayerInfos(d.children))}}),e.removeMany(t);const i={};this.view.allLayerViews.forEach((r,s)=>i[r.layer.uid]=s),e.sort((r,s)=>{const l=i[r.layer.uid]||0;return(i[s.layer.uid]||0)-l})}_generateLayerViews(){const e=[];return bje.filter(this._filterLayerViews,this).map(this.get,this).filter(t=>t!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const t=!this.basemapLegendVisible&&(e===Sle||e===Mle),i=!this.groundLegendVisible&&e===$le;return!t&&!i}_collectLayerViews(e,t){const i=r=>(r&&r.forEach(s=>{t.push(s),i(s[e])}),t);return i}_filterLayerViewsByLayerInfos(e){const t=this.layerInfos;return!t||!t.length||t.some(i=>this._hasLayerInfo(i,e))}_hasLayerInfo(e,t){const i=this._isLayerUIDMatching(e.layer,t.layer.uid);return i&&(this._layerInfosByLayerViewId[t.uid]=e),i}_isLayerUIDMatching(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))}_hasLayerUID(e,t){return e&&e.some(i=>this._isLayerUIDMatching(i,t))}_isLayerViewSupported(e){return!!wje.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(Pe(()=>{var t;return[e.legendEnabled,(t=e.layer)==null?void 0:t.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var d;const t=e.layer,i=e.uid,r=this._layerInfosByLayerViewId[i];let s=this._activeLayerInfosByLayerViewId[i];if(!s){const y=r&&r.title!==void 0&&r.layer.uid===t.uid;s=new _le({layer:t,layerView:e,title:y?r.title:t.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:r&&r.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[i]=s}const l=t.parent&&"uid"in t.parent&&this._layerViewByLayerId[(d=t.parent)==null?void 0:d.uid];if(s.parent=this._activeLayerInfosByLayerViewId[l==null?void 0:l.uid],!this._handles.has(i)){const y=[Pe(()=>t.title,v=>this._titleHandle(v,s)),Pe(()=>[t.opacity,"renderer"in t&&t.renderer,"pointSymbol"in t&&t.pointSymbol,"lineSymbol"in t&&t.lineSymbol,"polygonSymbol"in t&&t.polygonSymbol],()=>this._constructLegendElements(s)),gs(()=>{var v;return((v=this.view)==null?void 0:v.stationary)===!0},()=>this._scaleHandle(s),Jt),Pe(()=>e._effectiveRenderer,()=>this._constructLegendElements(s)),Pe(()=>"effect"in t&&t.effect,()=>this._constructLegendElements(s))];if(this.respectLayerVisibility){const v=Pe(()=>e.legendEnabled,M=>this._legendEnabledHandle(M,s)),_=Pe(()=>t.legendEnabled,M=>this._legendEnabledHandle(M,s));y.push(v,_)}this._handles.add(y,i)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(e,t){t.title=e,this._constructLegendElements(t)}_legendEnabledHandle(e,t){e?this._addActiveLayerInfo(t):this._removeActiveLayerInfo(t)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var r;const{layerView:t,layer:i}=e;if(this._isLayerActive(t)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const l=(r=this.layerInfos)==null?void 0:r.some(d=>d.layer.uid===i.uid);i.parent&&"uid"in i.parent&&!l?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const l=[];this._activeLayerInfosWithNoParent.forEach(d=>{const y=d.layer.parent,v=y&&"uid"in y&&this._layerViewByLayerId[y==null?void 0:y.uid],_=this._activeLayerInfosByLayerViewId[v==null?void 0:v.uid];_&&(l.push(d),d.parent=_)}),l.length&&(this._activeLayerInfosWithNoParent.removeMany(l),l.forEach(d=>this._addActiveLayerInfo(d)))}}}_removeActiveLayerInfo(e){const t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){var i;const t=e.layer;"featureCollections"in t&&t.featureCollections?e.buildLegendElementsForFeatureCollections(t.featureCollections):"featureReduction"in t&&((i=t.featureReduction)==null?void 0:i.type)==="binning"&&"renderer"in t.featureReduction?e.buildLegendElementsForRenderer(t.featureReduction.renderer):"renderer"in t&&t.renderer?e.buildLegendElementsForRenderer(t.renderer):"url"in t&&t.url?e.buildLegendElementsForTools():e.children.forEach(r=>this._constructLegendElements(r))}};g([S({type:xle})],cl.prototype,"activeLayerInfos",void 0),g([S()],cl.prototype,"basemapLegendVisible",void 0),g([S()],cl.prototype,"groundLegendVisible",void 0),g([S()],cl.prototype,"hideLayersNotInCurrentView",void 0),g([S()],cl.prototype,"keepCacheOnDestroy",void 0),g([S()],cl.prototype,"respectLayerVisibility",void 0),g([S()],cl.prototype,"layerInfos",void 0),g([S({readOnly:!0})],cl.prototype,"state",null),g([S()],cl.prototype,"view",void 0),cl=g([Q("esri.widgets.Legend.LegendViewModel")],cl);const _je=cl,xje="http://www.w3.org/2000/svg",Zi={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function Ele(e,t,i,r){const{focus:s,labels:l}=e,d=!!s,y=Sje(e,t,i,r),v={justifyContent:"center"},_=$l();return d?Z("div",{class:Zi.diamondContainer,styles:v},Z("div",{class:Zi.diamondLeftCol},_?l.right:l.left),Z("div",{class:Zi.diamondMidCol},Z("div",{class:Zi.diamondMidColLabel},l.top),y,Z("div",{class:Zi.diamondMidColLabel},l.bottom)),Z("div",{class:Zi.diamondRightCol},_?l.left:l.right)):Z("div",{class:Zi.squareTable},Z("div",{class:Zi.squareTableRow},Z("div",{class:Gm(Zi.squareTableCell,Zi.squareTableLabel,Zi.squareTableLabelRightBottom)},_?l.top:l.left),Z("div",{class:Zi.squareTableCell}),Z("div",{class:Gm(Zi.squareTableCell,Zi.squareTableLabel,Zi.squareTableLabelLeftBottom)},_?l.left:l.top)),Z("div",{class:Zi.squareTableRow},Z("div",{class:Zi.squareTableCell}),y,Z("div",{class:Zi.squareTableCell})),Z("div",{class:Zi.squareTableRow},Z("div",{class:Gm(Zi.squareTableCell,Zi.squareTableLabel,Zi.squareTableLabelRightTop)},_?l.right:l.bottom),Z("div",{class:Zi.squareTableCell}),Z("div",{class:Gm(Zi.squareTableCell,Zi.squareTableLabel,Zi.squareTableLabelLeftTop)},_?l.bottom:l.right)))}function kH(e,t,i){const r=`${i}_arrowStart`,s=`${i}_arrowEnd`,l=e==="left",d={markerStart:null,markerEnd:null};switch(t){case"HL":l?d.markerStart=`url(#${s})`:d.markerEnd=`url(#${r})`;break;case"LL":d.markerStart=`url(#${s})`;break;case"LH":l?d.markerEnd=`url(#${r})`:d.markerStart=`url(#${s})`;break;default:d.markerEnd=`url(#${r})`}return d}function Sje(e,t,i,r,s=60){const{focus:l,numClasses:d,colors:y,rotation:v}=e,_=!!l,M=Math.sqrt(s**2+s**2)+(_?0:5),k=[],O=[],R=[],D=(s||75)/d;for(let Ce=0;Ce<d;Ce++){const Ge=Ce*D;for(let Ze=0;Ze<d;Ze++){const lt=Ze*D,et=gN(y[Ce][Ze]),zt=vN(null),pi={type:"rect",x:lt,y:Ge,width:D,height:D};k.push(Moe(et)),O.push(mN(pi,et.fill,zt,null)),R.push(Eoe(pi))}}const z=10,B=15,V=15,q=10;let J=null;_||(J="margin: -15px -15px -18px -15px");const ne=kH("left",l,t),re=kH("right",l,t),ue=Toe(R),_e=WA(ue,M,M,0,!1,v,!1),xe=WA(ue,M,M,0,!1,_?-45:null,!1),Ne={filter:p3(r),opacity:i==null?null:`${i}`};return Z("div",{styles:Ne,class:_?Zi.diamondMidColRamp:Zi.squareTableCell},Z("svg",{xmlns:xje,width:M,height:M,style:J},Z("defs",null,Z("marker",{id:`${t}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Z("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),Z("marker",{id:`${t}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Z("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),k),Z("g",{transform:_e},O),Z("g",{transform:xe},Z("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":ne.markerStart,"marker-end":ne.markerEnd,x1:-z,y1:s-B,x2:-z,y2:B}),Z("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":re.markerStart,"marker-end":re.markerEnd,x1:V,y1:s+q,x2:s-V,y2:s+q}))))}const $je=_S(),Tle=10,NN=20,z$=10,FN=20,DN={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function Mje(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?Z("svg",{height:"4",width:"10"},Z("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):Z("svg",{height:"10",width:"10"},Z("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function Eje(e,t="vertical"){const i=document.createElement("div");return i.style.height=`${NN}px`,i.className=DN.univariateAboveAndBelowSymbol,e!=null&&(i.style.opacity=e.toString()),$je.append(i,Mje.bind(null,t)),i}function Ile(e,t,i="vertical",r){e.infos.forEach((s,l)=>{if(r&&l===2)s.preview=Eje(t,i);else{const d=Xi(s.size)+(i==="horizontal"?FN:z$),y=s.preview.tagName.toLowerCase()==="div",v=y?s.preview:document.createElement("div");v.className=DN.univariateAboveAndBelowSymbol,i==="horizontal"?v.style.width=`${d}px`:v.style.height=`${d}px`,y||v.appendChild(s.preview),s.preview=v}})}function o6(e,t="classic"){const i=e.infos;return t==="classic"?(Xi(i[0].size)+z$)/2:(Xi(i[0].size)-Xi(i[i.length-1].size))/2}function bg(e,t){if(!e)return null;const i=e.infos.map(s=>s.color),r=b0(t.type==="full"?i:t.type==="above"?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList});return r.className=DN.colorRamp,t.opacity!=null&&(r.style.opacity=t.opacity.toString()),r}function gO(e,t,i,r="vertical"){let s=0;const l=e.infos,d=Math.floor(l.length/2),y=t==="full"||t==="above"?0:d,v=t==="full"||t==="below"?l.length-1:d;for(let _=y;_<=v;_++)i&&_===d?s+=r==="horizontal"?Tle:NN:s+=Xi(l[_].size)+(r==="horizontal"?FN:z$);return Math.round(s)}function _g(e,t,i,r="vertical"){const s=gO(e,t,i,r),l=e.infos,d=Math.floor(l.length/2),y=t==="full"||t==="above"?0:d,v=t==="full"||t==="below"?l.length-1:d,_=t==="full"?l[y].size+l[v].size:t==="above"?l[y].size:l[v].size,M=i?r==="vertical"?NN:Tle:0,k=r==="vertical"?z$*(t==="full"?2:1):FN*(t==="full"?2:1);return Math.round(s-(Xi(_)/2+M/2+k/2))}function Cle(e,t,i="vertical"){const r=e.infos;let s=r.find(({type:d})=>d==="size-ramp"),l=r.find(({type:d})=>d==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],Ile(s,t,i,!0)),l&&(l={...l},l.infos=[...l.infos]),i==="horizontal"&&(s==null||s.infos.reverse(),l==null||l.infos.reverse()),{sizeRampElement:s,colorRampElement:l}}function kle(e,t="vertical"){const i=e.infos;let r=i.find(({type:l})=>l==="size-ramp"),s=i.find(({type:l})=>l==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],Ile(r,null,t,!1)),s&&(s={...s},s.infos=[...s.infos]),t==="horizontal"&&(r==null||r.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:r,colorRampElement:s}}function Tje(e,t){return t}function Rn(e){const t=this;e.appendChild(t)}function xg(e,t,i){if(!t)return;if(typeof t=="string"||typeof t=="number")return t;if("value"in t||"unit"in t)return pl(e.dotValue,t);if("colorName"in t||"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:null;let r=null;return Tje(t,i)?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:Ale(t,i)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?pl(r==="showField"?"{field}":e[r],{field:t.field,normField:t.normField}):null}function Ale(e,t){return!t}function Ole(e,t){return!!(t&&t==="Stretched"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}const _t={activated:"esri-legend--card__carousel-indicator--activated",base:"esri-legend--card",stacked:"esri-legend--stacked",carouselTitle:"esri-legend--card__carousel-title",indicator:"esri-legend--card__carousel-indicator",intervalSeparator:"esri-legend--card__interval-separator",imageryLayerStretchedImage:"esri-legend--card__imagery-layer-image--stretched",imageLabel:"esri-legend--card__image-label",layerCaption:"esri-legend--card__layer-caption",labelElement:"esri-legend--card__label-element",layerRow:"esri-legend--card__layer-row",labelCell:"esri-legend--card__label-cell",message:"esri-legend--card__message",rampLabel:"esri-legend--card__ramp-label",section:"esri-legend--card__section",relationshipSection:"esri-legend--card__relationship-section",serviceCaptionText:"esri-legend--card__service-caption-text",serviceContent:"esri-legend--card__service-content",service:"esri-legend--card__service",groupLayer:"esri-legend--card__group-layer",groupLayerChild:"esri-legend--card__group-layer-child",symbol:"esri-legend--card__symbol",sizeRampRow:"esri-legend--card__size-ramp-row",symbolRow:"esri-legend--card__symbol-row",symbolCell:"esri-legend--card__symbol-cell",indicatorContainer:"esri-legend--card__carousel-indicator-container",intervalSeparatorsContainer:"esri-legend--card__interval-separators-container",relationshipLabelContainer:"esri-legend--card__relationship-label-container",labelContainer:"esri-legend--card__label-container",serviceCaptionContainer:"esri-legend--card__service-caption-container",symbolContainer:"esri-legend--card__symbol-container",sizeRampContainer:"esri-legend--card__size-ramp-container",sizeRampPreview:"esri-legend--card__size-ramp-preview",pieChartRampPreview:"esri-legend--card__pie-chart-ramp-preview",rampContainer:"esri-legend__ramps",sizeRampHorizontal:"esri-legend__size-ramp--horizontal",rampLabelsContainer:"esri-legend__ramp-labels",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},Ije=25,Cje=25,kje=768,Aje=100;var mb;(function(e){e.Auto="auto",e.Stack="stack",e.SideBySide="side-by-side"})(mb||(mb={}));const Oje="#ddd",Cy=window.devicePixelRatio;function Lje(e){if(e){if(e.type.includes("3d")){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const i=e.symbolLayers.getItemAt(t-1),r=i.resource&&i.resource.primitive;return r==="circle"||r==="cross"||r==="kite"||r==="sphere"||r==="cube"||r==="diamond"}{const t=e.style;return t==="circle"||t==="diamond"||t==="cross"}}}function Pje(e){if(e){if(e.type.includes("3d")){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const i=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return i==="triangle"||i==="cone"||i==="tetrahedron"}return e.style==="triangle"}}let pu=class extends rr{constructor(e,t){super(e,t),this._handles=new ir,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=mb.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.own(Pe(()=>this.activeLayerInfos,e=>{this._handles.removeAll(),this._watchForSectionChanges(e)}))}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators=this.layout===mb.Auto&&this.view.container.clientWidth<=kje||this.layout===mb.Stack;const e=this.activeLayerInfos,t=e&&e.toArray().map(y=>this._renderLegendForLayer(y)).filter(y=>!!y);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const i=this._sectionNames.length,r=this._sectionNames.map((y,v)=>{const _=pl(this.messagesCommon.pagination.pageText,{index:v+1,total:i});return Z("div",{key:y,role:"tab",id:y,"aria-label":_,"aria-controls":`${y}-panel`,"aria-selected":(this._selectedSectionName===y).toString(),tabIndex:this._selectedSectionName===y?0:-1,title:_,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(_t.indicator,{[_t.activated]:this._selectedSectionName===y}),"data-section-name":y})}),s=this._hasIndicators&&i>1?Z("div",{class:_t.indicatorContainer,key:"carousel-navigation",role:"tablist"},r):null,l=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,d={[_t.stacked]:this._hasIndicators};return Z("div",{class:this.classes(_t.base,d)},l||Z("div",{class:_t.message},this.messages.noLegend),s)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,i=t==="ArrowLeft"?-1:1,r=e.target.getAttribute("data-section-name"),s=this._sectionNames.indexOf(r),l=this._sectionNames;let d=null;s!==-1&&(l[s+i]?d=document.getElementById(l[s+i]):t==="ArrowLeft"?d=document.getElementById(l[l.length-1]):t==="ArrowRight"&&(d=document.getElementById(l[0])),d&&d.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach(i=>{const r=`activeLayerInfo-${i.layer.uid}-version-change`;this._handles.remove(r),this._watchForSectionChanges(i.children),this._handles.add(Pe(()=>i.version,()=>this._generateSectionNames()),r)});const t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",()=>this._watchForSectionChanges(e)),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,i){return`${this.id}${e.uid}-type-${t.type}-${i}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((t,i)=>{this._sectionNames.push(this._getSectionName(e.layer,t,i))})}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map(i=>this._renderLegendForLayer(i)).toArray();return Z("div",{key:e.layer.uid,class:this.classes(_t.service,_t.groupLayer)},Z("div",{class:_t.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const i=t.some(l=>l.type==="relationship-ramp"),r=t.map((l,d)=>this._renderLegendForElement(l,e,d,i)).filter(l=>!!l);if(!r.length)return null;const s={[_t.groupLayerChild]:!!e.parent};return Z("div",{key:e.layer.uid,class:this.classes(_t.service,s)},Z("div",{class:_t.serviceCaptionContainer},Z("div",{class:_t.serviceCaptionText},e.title)),Z("div",{class:_t.serviceContent},r))}}_renderLegendForElement(e,t,i,r=!1){const s=e.type==="color-ramp",l=e.type==="opacity-ramp",d=e.type==="size-ramp",y=t.layer;let v=null;if(typeof e.title=="string")v=e.title;else if(e.title){const D=e.title,z=xg(this.messages,D,s||l);v=D.title?`${D.title} (${z})`:z}const _=this._getSectionName(y,e,i),M=this._hasIndicators?Z("div",null,Z(Qd,{level:this.headingLevel,class:_t.carouselTitle},t.title),Z(Qd,{level:gMe(this.headingLevel),class:_t.layerCaption},v)):v?Z(Qd,{level:this.headingLevel,class:_t.layerCaption},v):null,k=t.effectList;let O=null;if(e.type==="symbol-table"){const D=e.infos.map((z,B)=>this._renderLegendForElementInfo(z,t,e.legendType,B)).filter(z=>!!z);if(D.length){const z=D[0].properties.classes&&D[0].properties.classes[_t.symbolRow],B={[_t.labelContainer]:!z&&!r,[_t.relationshipLabelContainer]:r};O=Z("div",{class:this.classes(B)},D)}}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"?O=this._renderLegendForRamp(e,y.opacity,k):d?O=this._renderSizeRamp(e,y.opacity):e.type==="pie-chart-ramp"?O=this._renderPieChartRamp(e):e.type==="relationship-ramp"?O=Ele(e,this.id,y.opacity,k):e.type==="univariate-above-and-below-ramp"?O=this._renderUnivariateAboveAndBelowRamp(e,y.opacity,k):e.type==="univariate-color-size-ramp"&&(O=this._renderUnivariateColorSizeRamp(e,y.opacity,k));if(!O)return null;const R=Z("div",{key:_,class:_t.section,id:`${_}-panel`,role:"tabpanel","aria-labelledby":_,tabIndex:0},[M,O]);return this._sectionMap.set(_,R),R}_renderPieChartRamp(e){return Z("div",{class:_t.pieChartRampPreview,bind:e.preview,afterCreate:Rn})}_renderUnivariateAboveAndBelowRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=Cle(e,t,"horizontal");if(!r)return null;const l=gO(r,"full",!0,"horizontal"),d=_g(r,"above",!0,"horizontal"),y=_g(r,"below",!0,"horizontal"),v=12,_=bg(s,{width:d,height:v,rampAlignment:"horizontal",opacity:t,type:"above",effectList:i}),M=bg(s,{width:y,height:v,rampAlignment:"horizontal",opacity:t,type:"below",effectList:i}),k=o6(r,"card"),O=r.infos.map(J=>J.label),R=O.length-1,D=O.map((J,ne)=>ne===0||ne===R?Z("div",{key:ne},J):null),z={display:"flex",flexDirection:"column"},B={display:"flex",flexDirection:"row"},V={marginTop:"3px",display:"flex"};$l(this.container)?V.marginRight=`${k}px`:V.marginLeft=`${k}px`;const q={width:`${l}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return Z("div",{class:_t.layerRow,key:"size-ramp-preview",styles:z},Z("div",{class:this.classes(_t.symbolContainer,_t.sizeRampHorizontal),styles:B},r.infos.map((J,ne)=>Z("div",{key:ne,class:_t.symbol,bind:J.preview,afterCreate:Rn}))),_?Z("div",{class:_t.univariateAboveAndBelowColorRamp,styles:V,key:"color-ramp-preview"},Z("div",{bind:_,afterCreate:Rn}),Z("div",{bind:M,afterCreate:Rn})):null,Z("div",{class:_t.layerInfo},Z("div",{class:_t.rampLabelsContainer,styles:q},D)))}_renderUnivariateColorSizeRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=kle(e,"horizontal");if(!r)return null;const l=gO(r,"full",!1,"horizontal"),d=_g(r,"full",!1,"horizontal"),y=bg(s,{width:d,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effectList:i}),v=o6(r,"card"),_=r.infos.length-1,M=r.infos.map((z,B)=>B===0||B===_?Z("div",{key:B},z.label):null),k={display:"flex",flexDirection:"column"},O={display:"flex",flexDirection:"row"},R={marginTop:"3px",display:"flex"};$l(this.container)?R.marginRight=`${v}px`:R.marginLeft=`${v}px`;const D={width:`${l}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return Z("div",{class:_t.layerRow,key:"size-ramp-preview",styles:k},Z("div",{class:this.classes(_t.symbolContainer,_t.sizeRampHorizontal),styles:O},r.infos.map((z,B)=>Z("div",{key:B,class:_t.symbol,bind:z.preview,afterCreate:Rn}))),Z("div",{class:_t.univariateAboveAndBelowColorRamp,styles:R,key:"color-ramp-preview"},Z("div",{bind:y,afterCreate:Rn})),Z("div",{class:_t.layerInfo},Z("div",{class:_t.rampLabelsContainer,styles:D},M)))}_renderLegendForElementInfo(e,t,i,r){var d,y;const s=t.layer;if(e.type)return this._renderLegendForElement(e,t,r);const l=Ole(s,i);if(e.preview){if(!e.symbol||!e.symbol.type.includes("simple-fill")){if(!e.label)return Z("div",{key:r,bind:e.preview,afterCreate:Rn});const re={[_t.symbolCell]:this._hasIndicators};return Z("div",{key:r,class:this.classes(_t.layerRow,{[_t.symbolRow]:this._hasIndicators})},Z("div",{class:this.classes(re),bind:e.preview,afterCreate:Rn}),Z("div",{class:this.classes(_t.imageLabel,{[_t.labelCell]:this._hasIndicators})},xg(this.messages,e.label,!1)||""))}let v=255,_=255,M=255,k=0,O=255,R=255,D=255,z=0;const B=e.symbol.color&&e.symbol.color.a,V=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;B&&(v=e.symbol.color.r,_=e.symbol.color.g,M=e.symbol.color.b,k=e.symbol.color.a*s.opacity),V&&(O=e.symbol.outline.color.r,R=e.symbol.outline.color.g,D=e.symbol.outline.color.b,z=e.symbol.outline.color.a*s.opacity);const q=(y=(d=e.symbol.color)==null?void 0:d.isBright)!=null?y:!0,J=q?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",ne={background:B?`rgba(${v}, ${_}, ${M}, ${k})`:"none",color:q?"black":"white",textShadow:`-1px -1px 0 ${J},
                                              1px -1px 0 ${J},
                                              -1px 1px 0 ${J},
                                              1px 1px 0 ${J}`,border:V?`1px solid rgba(${O}, ${R}, ${D}, ${z})`:"none",filter:p3(t.effectList)};return Z("div",{key:r,class:_t.layerRow},Z("div",{class:_t.labelElement,styles:ne}," ",e.label," "))}if(e.src){const v=this._renderImage(e,s,l);return Z("div",{key:r,class:_t.layerRow},v,Z("div",{class:_t.imageLabel},e.label||""))}}_renderImage(e,t,i){const{label:r,src:s,opacity:l}=e,d={[_t.imageryLayerStretchedImage]:i,[_t.symbol]:!i},y={opacity:`${l!=null?l:t.opacity}`};return Z("img",{alt:xg(this.messages,r,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(d),styles:y})}_renderSizeRampLines(e){const t=e.infos,i=t[0],r=t[t.length-1],s=i.symbol,l=this._hasIndicators,d=Xi(i.size+i.outlineSize)*Cy,y=Xi(r.size+r.outlineSize)*Cy,v=l?d:d+50*Cy,_=l?d/2+50*Cy:d,M=Pje(s),k=Lje(s),O=document.createElement("canvas");O.width=v,O.height=_,O.style.width=O.width/Cy+"px",O.style.height=O.height/Cy+"px";const R=O.getContext("2d");if(l){R.beginPath();const D=0,z=0,B=v/2-y/2,V=_;R.moveTo(D,z),R.lineTo(B,V);const q=v,J=0,ne=v/2+y/2,re=_;R.moveTo(q,J),R.lineTo(ne,re)}else{R.beginPath();const D=0,z=_/2-y/2,B=v,V=0;R.moveTo(D,z),R.lineTo(B,V);const q=0,J=_/2+y/2,ne=v,re=_;R.moveTo(q,J),R.lineTo(ne,re)}return R.strokeStyle=Oje,R.stroke(),Z("div",{bind:O,afterCreate:Rn,styles:l?{display:"flex",marginTop:`-${M?0:k?d/2:0}px`,marginBottom:`-${M?y:k?y/2:0}px`}:{display:"flex",marginRight:`-${M?0:k?d/2:0}px`,marginLeft:`-${M?0:k?y/2:0}px`}})}_renderSizeRamp(e,t){const i=e.infos,r=i[0].label,s=i[i.length-1].label;let l=i[0].preview,d=i[i.length-1].preview;const y=this._hasIndicators,v={"flex-direction":y?"column":"row-reverse"};l&&(l=l.cloneNode(!0),l.style.display="flex"),d&&(d=d.cloneNode(!0),d.style.display="flex");const _={opacity:t!=null?`${t}`:""};return Z("div",{class:this.classes(_t.layerRow,{[_t.sizeRampRow]:y})},Z("div",{class:_t.rampLabel},y?r:s),Z("div",{class:_t.sizeRampContainer,styles:v},Z("div",{bind:l,afterCreate:Rn,class:_t.sizeRampPreview,styles:_}),this._renderSizeRampLines(e),Z("div",{bind:d,afterCreate:Rn,class:_t.sizeRampContainer,styles:_})),Z("div",{class:_t.rampLabel},y?s:r))}_renderLegendForRamp(e,t,i){const r=e.infos,s=e.type==="heatmap-ramp",l=r.length-1,d=Cje,y=l>2&&!s?Ije*l:Aje,v=y+20,_=10,M=r.slice(0).reverse();M.forEach((re,ue)=>{re.offset=s?re.ratio:ue/l});const k=M.length-1,O=M.length%2!=0&&M[M.length/2|0],R=O&&Z("div",{class:_t.intervalSeparatorsContainer},Z("div",{class:_t.intervalSeparator},"|"),Z("div",{class:_t.rampLabel},O.label)),D=r[r.length-1].label,z=r[0].label,B=[[{shape:{type:"path",path:`M0 ${d/2} L${_} 0 L${_} ${d} Z`},fill:M[0].color,stroke:{width:0}},{shape:{type:"rect",x:_,y:0,width:y,height:d},fill:{type:"linear",x1:_,y1:0,x2:y+_,y2:0,colors:M},stroke:{width:0}},{shape:{type:"path",path:`M${y+_} 0 L${v} ${d/2} L${y+_} ${d} Z`},fill:M[k].color,stroke:{width:0}}]],V=Ioe(B,v,d),{messages:q}=this,J={filter:p3(i),opacity:t==null?null:`${t}`},ne={justifyContent:"center"};return Z("div",{class:_t.layerRow,styles:ne},Z("div",{class:_t.rampLabel},s?q[D]:D),Z("div",{class:_t.symbolContainer},Z("div",{styles:J},V),R),Z("div",{class:_t.rampLabel},s?q[z]:z))}};g([S()],pu.prototype,"activeLayerInfos",void 0),g([S()],pu.prototype,"headingLevel",void 0),g([S()],pu.prototype,"layout",void 0),g([S(),Gi("esri/widgets/Legend/t9n/Legend")],pu.prototype,"messages",void 0),g([S(),Gi("esri/t9n/common")],pu.prototype,"messagesCommon",void 0),g([S({readOnly:!0})],pu.prototype,"type",void 0),g([S()],pu.prototype,"view",void 0),g([Dn()],pu.prototype,"_selectSection",null),pu=g([Q("esri.widgets.Legend.styles.Card")],pu);const S8=pu,At={service:"esri-legend__service",label:"esri-legend__service-label",layer:"esri-legend__layer",groupLayer:"esri-legend__group-layer",groupLayerChild:"esri-legend__group-layer-child",layerTable:"esri-legend__layer-table",layerTableSizeRamp:"esri-legend__layer-table--size-ramp",layerChildTable:"esri-legend__layer-child-table",layerCaption:"esri-legend__layer-caption",layerBody:"esri-legend__layer-body",layerRow:"esri-legend__layer-row",layerCell:"esri-legend__layer-cell",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",imageryLayerStretchedImage:"esri-legend__imagery-layer-image--stretched",imageryLayerCellStretched:"esri-legend__imagery-layer-cell--stretched",imageryLayerInfoStretched:"esri-legend__imagery-layer-info--stretched",symbolContainer:"esri-legend__layer-cell esri-legend__layer-cell--symbols",symbol:"esri-legend__symbol",rampContainer:"esri-legend__ramps",sizeRamp:"esri-legend__size-ramp",colorRamp:"esri-legend__color-ramp",opacityRamp:"esri-legend__opacity-ramp",borderlessRamp:"esri-legend__borderless-ramp",rampTick:"esri-legend__ramp-tick",rampFirstTick:"esri-legend__ramp-tick-first",rampLastTick:"esri-legend__ramp-tick-last",rampLabelsContainer:"esri-legend__ramp-labels",rampLabel:"esri-legend__ramp-label",univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:"esri-legend__message",header:"esri-widget__heading",hidden:"esri-hidden"},Rje="esri-legend__",Nje=24,AH={display:"flex",alignItems:"flex-start"},$8={marginLeft:"3px"},ky={display:"table-cell",verticalAlign:"middle"};let $0=class extends rr{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e&&e.toArray().map(i=>this._renderLegendForLayer(i)).filter(i=>!!i);return Z("div",null,t&&t.length?t:Z("div",{class:At.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const t=!!e.children.length,i=`${Rje}${e.layer.uid}-version-${e.version}`,r=e.title?Qd({level:this.headingLevel,class:this.classes(At.header,At.label)},e.title):null;if(t){const s=e.children.map(l=>this._renderLegendForLayer(l)).toArray();return Z("div",{key:i,class:this.classes(At.service,At.groupLayer)},r,s)}{const s=e.legendElements;if(s&&!s.length)return null;const l=s.map(y=>this._renderLegendForElement(y,e.layer,e.effectList)).filter(y=>!!y);if(!l.length)return null;const d={[At.groupLayerChild]:!!e.parent};return Z("div",{key:i,class:this.classes(At.service,d),tabIndex:0},r,Z("div",{class:At.layer},l))}}_renderLegendForElement(e,t,i,r){const s=e.type==="color-ramp",l=e.type==="opacity-ramp",d=e.type==="size-ramp";let y=null;if(e.type==="symbol-table"||d){const R=e.infos.map(D=>this._renderLegendForElementInfo(D,t,i,d,e.legendType)).filter(D=>!!D);R.length&&(y=Z("div",{class:At.layerBody},R))}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"||e.type==="stretch-ramp"?y=this._renderLegendForRamp(e,t.opacity):e.type==="relationship-ramp"?y=Ele(e,this.id,t.opacity,i):e.type==="pie-chart-ramp"?y=this._renderPieChartRamp(e):e.type==="univariate-above-and-below-ramp"?y=this._renderUnivariateAboveAndBelowRamp(e,t.opacity,i):e.type==="univariate-color-size-ramp"&&(y=this._renderUnivariateColorSizeRamp(e,t.opacity,i));if(!y)return null;const v=e.title;let _=null;if(typeof v=="string")_=v;else if(v){const R=xg(this.messages,v,s||l);_=Ale(v,s||l)&&v.title?`${v.title} (${R})`:R}const M=r?At.layerChildTable:At.layerTable,k=_?Z("div",{class:At.layerCaption},_):null,O={[At.layerTableSizeRamp]:d||!r};return Z("div",{class:this.classes(M,O)},k,y)}_renderPieChartRamp(e){return Z("div",{bind:e.preview,afterCreate:Rn})}_renderUnivariateAboveAndBelowRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=Cle(e,t);if(!r)return null;const l=_g(r,"above",!0),d=_g(r,"below",!0),y=12,v=bg(s,{width:y,height:l,rampAlignment:"vertical",opacity:t,type:"above",effectList:i}),_=bg(s,{width:y,height:d,rampAlignment:"vertical",opacity:t,type:"below",effectList:i}),M=o6(r),k=r.infos.map(ne=>ne.label),O=k.map((ne,re)=>re===0?Z("div",{key:re,class:ne?v?At.univariateAboveAndBelowLabel:At.rampLabel:null},ne):re===2?Z("div",null):null),R=k.length-1,D=Math.floor(k.length/2),z=k.map((ne,re)=>re===D||re===R?Z("div",{key:re,class:ne?v?At.univariateAboveAndBelowLabel:At.rampLabel:null},ne):null),B={display:"table-cell",verticalAlign:"middle"},V={marginTop:`${M}px`},q={height:`${l}px`},J={height:`${d}px`};return Z("div",{key:"univariate-above-and-below-ramp-preview",styles:AH},Z("div",{class:At.layerBody},r.infos.map((ne,re)=>Z("div",{class:this.classes(At.layerRow,At.sizeRamp)},Z("div",{class:At.symbol,styles:B,bind:ne.preview,afterCreate:Rn}),v||re%2!=0?null:Z("div",{class:At.layerInfo},k[re])))),v?Z("div",{styles:V,key:"color-ramp-preview"},Z("div",{styles:$8},Z("div",{styles:ky},Z("div",{class:At.rampContainer,bind:v,afterCreate:Rn})),Z("div",{styles:ky},Z("div",{class:At.rampLabelsContainer,styles:q},O))),Z("div",{styles:$8},Z("div",{styles:ky},Z("div",{class:At.rampContainer,bind:_,afterCreate:Rn})),Z("div",{styles:ky},Z("div",{class:At.rampLabelsContainer,styles:J},z)))):null)}_renderUnivariateColorSizeRamp(e,t,i){const{sizeRampElement:r,colorRampElement:s}=kle(e);if(!r)return null;const l=o6(r),d=12,y=_g(r,"full",!1),v=bg(s,{width:d,height:y,rampAlignment:"vertical",opacity:t,type:"full",effectList:i}),_=r.infos.length-1,M=r.infos.map((D,z)=>z===0||z===_?Z("div",{key:z,class:D.label?s?At.univariateAboveAndBelowLabel:At.rampLabel:null},D.label):null),k={display:"table-cell",verticalAlign:"middle"},O={marginTop:`${l}px`},R={height:`${y}px`};return Z("div",{key:"univariate-above-and-below-ramp-preview",styles:AH},Z("div",{class:At.layerBody},r.infos.map(D=>Z("div",{class:this.classes(At.layerRow,At.sizeRamp)},Z("div",{class:At.symbol,styles:k,bind:D.preview,afterCreate:Rn})))),Z("div",{styles:O,key:"color-ramp-preview"},Z("div",{styles:$8},Z("div",{styles:ky},Z("div",{class:At.rampContainer,bind:v,afterCreate:Rn})),Z("div",{styles:ky},Z("div",{class:At.rampLabelsContainer,styles:R},M)))))}_renderLegendForRamp(e,t){const i=e.infos,r=e.type==="opacity-ramp",s=e.type==="heatmap-ramp",l=e.type==="stretch-ramp",d=e.preview,y=r?At.opacityRamp:"";d.className=`${At.colorRamp} ${y}`,t!=null&&(d.style.opacity=t.toString());const v=i.map(k=>Z("div",{class:k.label?At.rampLabel:null},s?this.messages[k.label]||k.label:l?this._getStretchStopLabel(k):k.label)),_={width:`${Nje}px`},M={height:d.style.height};return Z("div",{class:At.layerRow},Z("div",{class:At.symbolContainer,styles:_},Z("div",{class:At.rampContainer,bind:d,afterCreate:Rn})),Z("div",{class:At.layerInfo},Z("div",{class:At.rampLabelsContainer,styles:M},v)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+(typeof e.value=="string"?e.value:fs(e.value,{style:"decimal",notation:e.value.toString().includes("e")?"scientific":"standard"})):""}_renderLegendForElementInfo(e,t,i,r,s){if(e.type)return this._renderLegendForElement(e,t,i,!0);let l=null;const d=Ole(t,s);if(e.preview?l=Z("div",{class:At.symbol,bind:e.preview,afterCreate:Rn}):e.src&&(l=this._renderImage(e,t,d)),!l)return null;const y={[At.imageryLayerInfoStretched]:d},v={[At.imageryLayerInfoStretched]:d,[At.sizeRamp]:!d&&r};return Z("div",{class:At.layerRow},Z("div",{class:this.classes(At.symbolContainer,v)},l),Z("div",{class:this.classes(At.layerInfo,y)},xg(this.messages,e.label,!1)||""))}_renderImage(e,t,i){const{label:r,src:s,opacity:l}=e,d={[At.imageryLayerStretchedImage]:i,[At.symbol]:!i},y={opacity:`${l!=null?l:t.opacity}`};return Z("img",{alt:xg(this.messages,r,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(d),styles:y})}};g([S()],$0.prototype,"activeLayerInfos",void 0),g([S()],$0.prototype,"headingLevel",void 0),g([S(),Gi("esri/widgets/Legend/t9n/Legend")],$0.prototype,"messages",void 0),g([S({readOnly:!0})],$0.prototype,"type",void 0),$0=g([Q("esri.widgets.Legend.styles.Classic")],$0);const Ay=$0,S5={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let Kn=class extends rr{constructor(e,t){super(e,t),this._handles=new ir,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=S5.widgetIcon,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new Ay,this.view=null,this.viewModel=new _je}initialize(){this.own([Ko(()=>this.view,"resize",()=>this.scheduleRender()),Ko(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),Pe(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),Pe(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},Jt)])}destroy(){this._handles=Oi(this._handles)}castStyle(e){if(e instanceof S8||e instanceof Ay)return e;if(typeof e=="string")return e==="card"?new S8:new Ay;if(e&&typeof e.type=="string"){const t={...e};return delete t.type,new(e.type==="card"?S8:Ay)(t)}return new Ay}render(){return Z("div",{class:this.classes(S5.base,S5.widget,this.style instanceof Ay?S5.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach(t=>this._renderOnActiveLayerInfoChange(t)),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=Pe(()=>e.version,()=>this.scheduleRender());this._handles.add(t,`version_${e.layer.uid}`);const i=Ko(()=>e.children,"change",()=>e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r)),Jt);this._handles.add(i,`children_${e.layer.uid}`),e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r))}};g([tt("viewModel.activeLayerInfos")],Kn.prototype,"activeLayerInfos",void 0),g([tt("viewModel.basemapLegendVisible")],Kn.prototype,"basemapLegendVisible",void 0),g([tt("viewModel.groundLegendVisible")],Kn.prototype,"groundLegendVisible",void 0),g([S()],Kn.prototype,"headingLevel",void 0),g([tt("viewModel.hideLayersNotInCurrentView")],Kn.prototype,"hideLayersNotInCurrentView",void 0),g([tt("viewModel.keepCacheOnDestroy")],Kn.prototype,"keepCacheOnDestroy",void 0),g([tt("viewModel.respectLayerVisibility")],Kn.prototype,"respectLayerVisibility",void 0),g([S()],Kn.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Kn.prototype,"label",void 0),g([tt("viewModel.layerInfos")],Kn.prototype,"layerInfos",void 0),g([S(),Gi("esri/widgets/Legend/t9n/Legend")],Kn.prototype,"messages",void 0),g([S()],Kn.prototype,"style",void 0),g([oi("style")],Kn.prototype,"castStyle",null),g([tt("viewModel.view")],Kn.prototype,"view",void 0),g([S()],Kn.prototype,"viewModel",void 0),Kn=g([Q("esri.widgets.Legend")],Kn);const Fje=Kn;class Dje{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function Lle(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new Dje(t)}function zKe(e,t,i,r){let s,l=(i[0]-e[0])/t[0],d=(r[0]-e[0])/t[0];l>d&&(s=l,l=d,d=s);let y=(i[1]-e[1])/t[1],v=(r[1]-e[1])/t[1];if(y>v&&(s=y,y=v,v=s),l>v||y>d)return!1;y>l&&(l=y),v<d&&(d=v);let _=(i[2]-e[2])/t[2],M=(r[2]-e[2])/t[2];return _>M&&(s=_,_=M,M=s),!(l>M||_>d)&&(M<d&&(d=M),!(d<0))}class jje{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}}class zje{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new Vje}}class Vje{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class Uje{constructor(t,i,r,s){this._workerFunc=t,this._callbackFunc=i,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=s.map(l=>new zje(l))}hasQuota(t){const i=this._clients[t];return!!i&&(this._totalNumWorkers<this._maxTotalNumWorkers||i.numWorkers+i.tasks.length<i.typeWorkerQuota)}push(t){const i=this._clients[t.client];i&&(this._totalNumWorkers<this._maxTotalNumWorkers?(i.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,(r,s)=>this._taskCallback(r,s))):i.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(t){const i=this._clients[t.client];this._totalNumWorkers--,i.numWorkers--,i.statistics.requests++,i.statistics.size+=t.size||0,i.statistics.duration+=t.duration||0,i.statistics.speed=i.statistics.duration>0?i.statistics.size/i.statistics.duration:0,Lle(i.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),(i,r)=>this._taskCallback(i,r)))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,i){t._cancelled||(this._callbackFunc(t,i),this._taskFinished(t))}getStatsForType(t){const i=this._clients[t];return i?{quota:i.typeWorkerQuota,workers:i.numWorkers,queueSize:i.tasks.length,requestStats:i.statistics}:null}get test(){const t=this;return{set workerFunc(i){t._workerFunc=i}}}}let M8=class extends st{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,i){this._loadQueue=new Uje((r,s)=>this._startLoading(r,s),(r,s)=>this._doneLoadingCB(r,s),e,t),i&&(this._frameTask=i.registerTask(Xt.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=po(this._frameTask),this._tasks.forEach(e=>S1(e.abortController)),this._loadQueue=Oi(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,i,r={}){const s=VL();s.__signal=K(r)?r.signal:null;const l=this._createOrUpdateTask(e,t,i,r,s);return Ll(r,()=>this._cancelRequest(l,s)),s.promise}_createTask(e,t,i,r,s,l){const d=new Hje(e,t,i,r,s);return this._updateTask(d,l),this._tasks.set(s,d),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(d),d}_cancelRequest(e,t){PL(e.resolvers,t),t.reject(Cr()),e.resolvers.length===0&&(e.status===hl.DOWNLOADING&&(e.status=hl.CANCELLED,this._loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=hl.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,i,r,s){const l=Wje(K(r)&&r.uid||e,t,i),d=this._tasks.get(l);return d?(this._updateTask(d,s),d):this._createTask(e,r,t,i,l,s)}_doneLoadingCB(e,t){this._loadQueue&&(Lle(e.status===hl.DOWNLOADING),e.status=hl.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();ur(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==hl.DOWNLOADED&&(t.err=t.err||Cr()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!Vs(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let i=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const r of e.resolvers)if(t)Vs(t)?r.reject(t):r.reject(new ge("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--i;const s=i<=0?e.result:Me(e.result);r.resolve(s)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,t){if(e.status===hl.CANCELLED)return!1;let i,r;switch(e.startTime=performance.now(),e.status=hl.DOWNLOADING,e.docType){case"binary":r="array-buffer",i=0;break;case"image":r="image";break;case"image+type":r="array-buffer";break;default:r="json"}e.abortController=new AbortController;const s=e.abortController.signal;e.request=Bi(e.url,{...e.options,responseType:r,timeout:i,signal:s});let l=()=>{};const d=v=>{e.duration=performance.now()-e.startTime,e.size=v instanceof ArrayBuffer?v.byteLength:e.size||0,e.result=v,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},y=v=>{e.status===hl.DOWNLOADING&&t(e,v),l()};return e.docType!=="image+type"?(e.request.then(v=>d(v.data),y),!0):(e.request.then(v=>{const _=v.data,M=Gje(_);if(r="image",e.size=_.byteLength,M==="unknown")return e.request=Bi(e.url,{responseType:r,timeout:i,signal:s}),void e.request.then(R=>d(R.data),y);const k=new Blob([_],{type:M}),O=window.URL.createObjectURL(k);l=()=>window.URL.revokeObjectURL(O),e.request=Bi(O,{responseType:r,timeout:i,signal:s}),e.request.then(R=>d(new qje(R.data,M,l)),y)},y),!0)}get test(){return{loadQueue:this._loadQueue}}};g([S({readOnly:!0})],M8.prototype,"updating",void 0),M8=g([Q("esri.views.3d.support.StreamDataLoader")],M8);const Bje={numRetries:0};function Gje(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return t[0]===137&&t[1]===80?"image/png":t[0]===71&&t[1]===73?"image/gif":t[0]===66&&t[1]===77?"image/bmp":t[0]===255&&t[1]===216?"image/jpeg":"unknown"}class qje{constructor(t,i,r){this.image=t,this.type=i,this.release=r}get isOpaque(){return this.type==="image/jpeg"}}class Hje extends jje{constructor(t,i,r,s,l){super(s),this.url=t,this.options=i,this.docType=r,this.key=l,this.result=null,this.status=hl.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=Bje.numRetries}}function Wje(e,t,i){return`${e}:${t}:${i}`}var hl;(function(e){e[e.QUEUED=1]="QUEUED",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.DOWNLOADED=3]="DOWNLOADED",e[e.CANCELLED=4]="CANCELLED"})(hl||(hl={}));var OH,LH,$c,PH,RH,NH;(function(e){e[e.INNER=0]="INNER",e[e.OUTER=1]="OUTER"})(OH||(OH={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",e[e.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",e[e.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(LH||(LH={})),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}($c||($c={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(PH||(PH={})),function(e){e[e.Color=0]="Color",e[e.ColorNoRasterImage=1]="ColorNoRasterImage",e[e.Highlight=2]="Highlight",e[e.Water=3]="Water",e[e.Occluded=4]="Occluded"}(RH||(RH={})),function(e){e[e.FADING=0]="FADING",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.UNFADED=2]="UNFADED"}(NH||(NH={}));const Jje=12;class Mr{constructor(t){const i=Mr.checkUnsupported(t);if(K(i))throw i;const r=t;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=KP(this.spatialReference)||fv(this.spatialReference)||yv(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const s=r.lods.reduce((_,M,k)=>(M.level<_.min&&(_.min=M.level,_.minIndex=k),_.max=Math.max(_.max,M.level),_),{min:1/0,minIndex:0,max:-1/0}),l=r.lods[s.minIndex],d=2**l.level;let y=l.resolution*d,v=l.scale*d;this.levels=new Array(s.max+1);for(let _=0;_<this.levels.length;_++)this.levels[_]={resolution:y,scale:v,tileSize:[y*r.size[0],y*r.size[1]]},y/=2,v/=2}clone(){return new Mr(this.toTileInfo())}toTileInfo(){return new tb({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((t,i)=>({level:i,scale:t.scale,resolution:t.resolution}))})}getExtent(t,i,r,s){const l=this.levels[t],d=l.tileSize[0],y=l.tileSize[1];s[0]=this.origin[0]+r*d,s[2]=this.origin[0]+(r+1)*d,s[3]=this.origin[1]-i*y,s[1]=this.origin[1]-(i+1)*y}convertExtentToRadians(t,i){this._isWebMercator?(i[0]=_V(t[0]),i[1]=xV(t[1]),i[2]=_V(t[2]),i[3]=xV(t[3])):this._isGCS&&(i[0]=zm(t[0]),i[1]=zm(t[1]),i[2]=zm(t[2]),i[3]=zm(t[3]))}getExtentGeometry(t,i,r,s=new yi){return this.getExtent(t,i,r,Yu),s.spatialReference=this.spatialReference,s.xmin=Yu[0],s.ymin=Yu[1],s.xmax=Yu[2],s.ymax=Yu[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(t){if(t==null)return!1;let i=!1;for(;this.levels.length<=t;){const r=this.levels[this.levels.length-1],s=r.resolution/2;this.levels.push({resolution:s,scale:r.scale/2,tileSize:[s*this.pixelSize,s*this.pixelSize]}),i=!0}return i}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const i=this.levels[0].scale;return t>=i?0:Math.log(i/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t){if(!(t instanceof Mr)){if(Mr.checkUnsupported(t))return!1;t=new Mr(t)}if(!t.spatialReference.equals(this.spatialReference)||t.pixelSize!==this.pixelSize)return!1;const i=Math.min(this.levels.length,t.levels.length)-1,r=this.levels[i].resolution;let s=.5*r;return!hg(t.origin[0],this.origin[0],s)||!hg(t.origin[1],this.origin[1],s)?!1:(s=.5*r/2**i/this.pixelSize*Jje,hg(r,t.levels[i].resolution,s))}rootTilesInExtent(t,i=null,r=1/0){const s=new Array,l=this.levels[0].tileSize;if(ce(t)||l[0]===0||l[1]===0)return s;Mr.computeRowColExtent(t,l,this.origin,Yu);let d=Yu[1],y=Yu[3],v=Yu[0],_=Yu[2];const M=_-v,k=y-d;if(M*k>r){const O=Math.floor(Math.sqrt(r));k>O&&(d=d+Math.floor(.5*k)-Math.floor(.5*O),y=d+O),M>O&&(v=v+Math.floor(.5*M)-Math.floor(.5*O),_=v+O)}for(let O=d;O<y;O++)for(let R=v;R<_;R++)s.push([0,O,R]);return K(i)&&(i[0]=this.origin[0]+v*l[0],i[1]=this.origin[1]-y*l[1],i[2]=this.origin[0]+_*l[0],i[3]=this.origin[1]-d*l[1]),s}static computeRowColExtent(t,i,r,s){const l=.001*(t[2]-t[0]+(t[3]-t[1]));s[0]=Math.max(0,Math.floor((t[0]+l-r[0])/i[0])),s[2]=Math.max(0,Math.ceil((t[2]-l-r[0])/i[0])),s[1]=Math.max(0,Math.floor((r[1]-t[3]+l)/i[1])),s[3]=Math.max(0,Math.ceil((r[1]-t[1]-l)/i[1]))}static isPowerOfTwo(t){const i=t.lods,r=i[0].resolution*2**i[0].level;return!i.some(s=>!A3e(s.resolution,r/2**s.level))}static hasGapInLevels(t){const i=t.lods.map(r=>r.level);i.sort((r,s)=>r-s);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(t){const i=t.size[1];return i===t.size[0]&&(i&i-1)==0&&i>=128&&i<=512}static hasOriginPerLODs(t){const i=t.origin;return t.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new ge("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(t){return ce(t)?jN():t.lods.length<1?new ge("tilingscheme:generic","Tiling scheme must have at least one level"):Mr.isPowerOfTwo(t)?Mr.hasGapInLevels(t)?new ge("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Mr.tileSizeSupported(t)?Mr.hasOriginPerLODs(t)?new ge("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new ge("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new ge("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,i){const r=t[2]-t[0],s=t[3]-t[1],l=cf(i),d=1.2*Math.max(r,s),y=256,v=96,_=.0254,M=new Mr(new tb({size:[y,y],origin:{x:t[0]-.5*(d-r),y:t[3]+.5*(d-s)},lods:[{level:0,resolution:d/y,scale:1/(y/v*_/(d*l))}],spatialReference:i}));return M.ensureMaxLod(20),M}static makeWebMercatorAuxiliarySphere(t){const i=new Mr(Mr.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(t),i}static makeGCSWithTileSize(t,i=256,r=16){const s=256/i,l=new Mr(new tb({size:[i,i],origin:{x:-180,y:90,spatialReference:t},spatialReference:t,lods:[{level:0,resolution:.703125*s,scale:295497598570834e-6*s}]}));return l.ensureMaxLod(r),l}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function jN(){return new ge("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Mr.WebMercatorAuxiliarySphereTileInfo=new tb({size:[256,256],origin:{x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Ct.WebMercator},spatialReference:Ct.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527591555e-6}]}),Mr.WebMercatorAuxiliarySphere=Mr.makeWebMercatorAuxiliarySphere(19);const Yu=Va(),FH=64;O3e(xI/10);const Kje=Va();Mr.WebMercatorAuxiliarySphere.getExtent(0,0,0,Kje);Va([-180,-90,180,90]);const Oy=wt(),Zje=wt(),nh=wt(),sh=wt();function Yje(e,t,i=0){const r=e.extent;if(ce(r))return!1;if(i===0)return Ixe(r,t);const s=Math.min(r[2]-r[0],r[3]-r[1]);return kxe(r,t,i*s)}function $5(e,t,i,r){xl(Oy,i),Oy[r]=t[r];const s=ts(Oy,Oy,t),l=ts(Zje,e,t),d=Ds(l,s),y=Ds(s,s);let v;v=d<=0?t:y<=d?i:Ia(Oy,t,Nl(s,s,d/y));const _=ts(Oy,e,v);return Math.PI/2-Math.atan(_[2]/Math.sqrt(_[0]*_[0]+_[1]*_[1]))}function Xje(e,t,i){const r=e.extent;if(ce(r))return 0;nh[0]=r[0],nh[1]=r[1],nh[2]=i,sh[0]=r[2],sh[1]=r[3],sh[2]=i;let s=1/0,l=1/0;return t[0]<nh[0]?s=$5(t,nh,sh,0):t[0]>sh[0]&&(s=$5(t,sh,nh,0)),t[1]<nh[1]?l=$5(t,nh,sh,1):t[1]>sh[1]&&(l=$5(t,sh,nh,1)),Math.min(s,l)}function Qje(e,t,i){if(ce(e))return jN();if(e.spatialReference.isGeographic&&!KP(e.spatialReference))return new ge("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const r=Mr.checkUnsupported(e);if(K(r))return r;if(ce(i))return new ge("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const s=eze(e,i);if(s)return s;const l=e.spatialReference;return K(t)&&!(l.equals(t)||t.isWGS84&&l.isWebMercator)?new ge("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function eze(e,t){const i=e.lods,r=i[0].resolution*2**i[0].level,s=[r*e.size[0],r*e.size[1]],l=[e.origin.x,e.origin.y],d=Mxe(t),y=Va();Mr.computeRowColExtent(d,s,l,y);const v=(y[2]-y[0])*(y[3]-y[1]);if(v>FH){const _=i[0].scale*2**i[0].level;let M=Math.max((d[3]-d[1])/e.size[1],(d[2]-d[0])/e.size[0])*_/r;const k=Math.floor(Math.log(M)/Math.log(10));return M=Math.ceil(M/10**k)*10**k,new ge("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(_).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+M.toLocaleString()+".",{level0Scale:_,suggestedLevel0Scale:M,requiredNumRootTiles:v,allowedNumRootTiles:FH})}return null}const tze=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:Yje,tiltToExtentEdge:Xje,checkIfTileInfoSupportedForViewSR:Qje},Symbol.toStringTag,{value:"Module"}));function ize(){return!0}function rze(){return 0}function nze(e,t){if(ce(e))return jN();const i=e.lods.length-1,r=e.spatialReference,s=KP(r)||fv(r)||yv(r);if(r.isWebMercator){if(!Mr.makeWebMercatorAuxiliarySphere(i).compatibleWith(e))return new ge("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!s)return new ge("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Mr.makeGCSWithTileSize(e.spatialReference,e.size[0],i).compatibleWith(e))return e.spatialReference.isWGS84?new ge("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new ge("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return K(t)&&!e.spatialReference.equals(t)?new ge("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const sze=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:ize,tiltToExtentEdge:rze,checkIfTileInfoSupportedForViewSR:nze},Symbol.toStringTag,{value:"Module"})),oze={[_o.Global]:sze,[_o.Local]:tze};function vO(e,t,i,r){return oze[r].checkIfTileInfoSupportedForViewSR(e,i,t)}function aze(e,t,i){const r=Sbe(e);if(K(r)){if(!vt.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const s=r.find(l=>vO(l.tileInfo,l.fullExtent,t,i)==null);if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}return{tileInfo:null,fullExtent:null}}$c.NORTH,$c.EAST,$c.SOUTH,$c.WEST;$c.NORTH_EAST,$c.SOUTH_EAST,$c.SOUTH_WEST,$c.NORTH_WEST;function lze(e,t){return e!=null&&(t==null||(t===_o.Local?!e.isGeographic||e.isWGS84||e.wkid===bl.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===bl.CGCS2000||e.wkid===bl.GCSMARS2000||e.wkid===bl.GCSMARS2000_SPHERE||e.wkid===bl.GCSMOON2000))}async function uze(e,t={}){await hze(e,t),ur(t)}async function cze(e,t={}){const{basemap:i,view:r}=e;if(ur(t),"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(t),ur(t),i.baseLayers.length===0))return;const s=i.baseLayers.getItemAt(0);if(!xbe(s))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;DH()}await s.load(t),ur(t);const l=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo.spatialReference:null]).filter(Boolean);l.length!==0&&l.every(d=>!r.spatialReference.equals(d))&&DH()}function DH(){throw new ge("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function hze(e,t){const{basemap:i,view:r}=e;if(await i.load(t),i.baseLayers.length===0)return;const s=i.baseLayers.concat(i.referenceLayers).toArray().filter(d=>!CV(d)).map(d=>new ge("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:d,operationalLayerType:d.operationalLayerType||"unknown"}));if(s.length)throw s[0];const l=i.baseLayers.getItemAt(0);if(CV(l)){try{await l.load(t)}catch(d){const y="basemap-compatibility:unknown-error",v="Unknown basemap compatibility error",{name:_=y,message:M=v,details:k}=d;throw new ge(_,M,k)}pze(l,r)}}function pze(e,t){const i=t.state.viewingMode;if(!i)return;let r,s;if((e==null?void 0:e.type)==="wmts"){const v=aze(e,t.spatialReference,i);if(ce(v.tileInfo))throw new ge("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=v.tileInfo,s=v.fullExtent}else r=e.tileInfo,s=e.fullExtent;if(ce(r))return;if(!lze(r.spatialReference,i))throw new ge(`basemapgalleryitem:spatial-reference-unsupported-${Hq(i)}`,`Basemap spatial reference is unsupported in ${Hq(i)} mode`);const l=r.spatialReference.isGeographic,d=(e==null?void 0:e.type)==="vector-tile"?r.getOrCreateCompatible(256,l?1:2):null;if(i===_o.Global){let v=vO(r,s,null,i);if(v&&(e==null?void 0:e.type)==="vector-tile"&&K(s)&&d&&!vO(d,s,null,i)&&(v=null),v){const _=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new ge(`basemapgalleryitem:tiling-scheme-unsupported-${_}-global`,"Basemap tiling scheme is unsupported in global mode",{error:v})}}else if(Mr.checkUnsupported(r))throw new ge("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const y=t.get("basemapTerrain.tilingScheme");if(y&&!y.compatibleWith(r)&&((e==null?void 0:e.type)!=="vector-tile"||!d||!y.compatibleWith(d)))throw new ge("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let yc=class extends Uu(st){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([Pe(()=>{var t;return(t=this.basemap)==null?void 0:t.loadStatus},e),Pe(()=>this.compatibilityFunction,e),Pe(()=>{var t;return this.view&&"basemapTerrain"in this.view&&((t=this.view.basemapTerrain)==null?void 0:t.tilingScheme)},e),Pe(()=>{var t;return(t=this.view)==null?void 0:t.ready},e),Pe(()=>{var t;return(t=this.view)==null?void 0:t.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return U3e(this.view,this.basemap)}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var r;this._cancelRefresh(),this._set("state","loading");const e=(r=this.basemap)==null?void 0:r.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then(()=>mv(()=>!this._spatialReferenceTask.updating,i)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(s=>{Vs(s)||(this._set("state","error"),this._set("error",s))}),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};g([S({readOnly:!0})],yc.prototype,"_spatialReferenceTask",null),g([S()],yc.prototype,"basemap",null),g([S()],yc.prototype,"compatibilityFunction",void 0),g([S({readOnly:!0})],yc.prototype,"error",void 0),g([S({readOnly:!0})],yc.prototype,"spatialReference",null),g([S({readOnly:!0})],yc.prototype,"state",void 0),g([S()],yc.prototype,"view",void 0),yc=g([Q("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],yc);const Ple=yc,Rle=vt.ofType(Tc);let L2=class extends st{constructor(e){super(e),this.basemaps=new Rle}get state(){return"ready"}refresh(){}};g([S({type:Rle})],L2.prototype,"basemaps",void 0),g([S({readOnly:!0})],L2.prototype,"state",null),L2=g([Q("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],L2);const Nle=L2,Fle=vt.ofType(Tc),Dle="esri.widgets.BasemapGallery.support.PortalBasemapsSource",dze=Ke.getLogger(Dle);let Th=class extends za.LoadableMixin(R3(Nle)){constructor(e){super(e),this._handles=new ir,this.basemaps=new Fle,this.filterFunction=null,this.portal=Bn.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([Pe(()=>{var e,t;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(t=this.portal)==null?void 0:t.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),Jt)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(i)}catch(i){if(Vs(i))throw i;dze.warn(new ge("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}_updateBasemaps(e=[]){let t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};g([S({readOnly:!0,type:Fle})],Th.prototype,"basemaps",void 0),g([S()],Th.prototype,"filterFunction",void 0),g([S({type:Bn})],Th.prototype,"portal",void 0),g([S()],Th.prototype,"query",void 0),g([S({readOnly:!0})],Th.prototype,"state",null),g([S()],Th.prototype,"updateBasemapsCallback",void 0),Th=g([Q(Dle)],Th);const l4=Th,jle=vt.ofType(Ple);function fze(e){return e&&e.declaredClass==="esri.portal.Portal"}function yze(e){return e&&!(e instanceof l4)&&(!!e.portal||!!e.query)}function mze(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let du=class extends Uu(za){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new jle,this.source=new l4,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([Pe(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Ko(()=>{var t;return(t=this.source)==null?void 0:t.basemaps},"change",e,{onListenerAdd:e})])}get activeBasemap(){var e,t,i;return(i=(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)!=null?i:null}set activeBasemap(e){var r,s;if(!this.view.map)return;const t=typeof e=="string"?Tc.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const i=t.spatialReference||((s=(r=this.items)==null?void 0:r.find(l=>this.basemapEquals(t,l.basemap)))==null?void 0:s.spatialReference);if(i&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const l=this.view.spatialReference;if(K(i)&&!ms(l,i)&&!zu(this.view.spatialReference,i)&&!hf())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void lp().then(()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=i,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=t,this._clearOverride("activeBasemap"),K(i)&&!ms(this.view.spatialReference,i)&&(this.view.spatialReference=i)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?uze:cze}set compatibilityFunction(e){K(e)?this._override("compatibilityFunction",e):this._clearOverride("compatibilityFunction")}castSource(e){return Array.isArray(e)||vt.isCollection(e)?new Nle({basemaps:e}):fze(e)?new l4({portal:e}):yze(e)?new l4(e):mze(e)?e:null}get state(){var e;return((e=this.view)==null?void 0:e.ready)&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return V3e(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(za.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){var r;const e=(r=this.source)==null?void 0:r.basemaps,{view:t,compatibilityFunction:i}=this;this.items.removeAll().forEach(s=>s.destroy()),e&&this.items.addMany(e.map(s=>new Ple({basemap:s,compatibilityFunction:i,view:t})))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};g([S()],du.prototype,"_loadingProjectionEngine",void 0),g([S()],du.prototype,"activeBasemap",null),g([S()],du.prototype,"compatibilityFunction",null),g([S({readOnly:!0,type:jle})],du.prototype,"items",void 0),g([S()],du.prototype,"source",void 0),g([oi("source")],du.prototype,"castSource",null),g([S({readOnly:!0})],du.prototype,"state",null),g([S()],du.prototype,"view",void 0),du=g([Q("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],du);const gze=du,ha={base:"esri-basemap-gallery esri-widget esri-widget--panel-height-only",sourceLoading:"esri-basemap-gallery--source-loading",loader:"esri-basemap-gallery__loader",item:"esri-basemap-gallery__item",itemContainer:"esri-basemap-gallery__item-container",itemTitle:"esri-basemap-gallery__item-title",itemThumbnail:"esri-basemap-gallery__item-thumbnail",selectedItem:"esri-basemap-gallery__item--selected",itemError:"esri-basemap-gallery__item--error",emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let wa=class extends rr{constructor(e,t){super(e,t),this._handles=new ir,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=ha.widgetIcon,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new gze}initialize(){const e=this._handles;this.own([Ko(()=>this.viewModel.items,"change",t=>{const i="basemap-gallery-item-changes",{added:r,moved:s}=t;e.remove(i),e.add([...r,...s].map(l=>Pe(()=>l.state,()=>this.scheduleRender())),i),this.scheduleRender()}),e,gs(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return Le(()=>import("./calcite-scrim.0f2349e9.js"),[],import.meta.url)}render(){const e=this.get("source.state")==="loading",t=this.disabled||this.get("viewModel.state")==="disabled",i=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),r={[ha.sourceLoading]:e,[ha.disabled]:t},s=e?Z("div",{class:ha.loader,key:"esri-basemap-gallery__loader"}):null,l=e?null:i.length>0?Z("ul",{class:ha.itemContainer,key:"esri-basemap-gallery__item-container",role:"menu"},i):Z("div",{class:ha.emptyMessage,key:"esri-basemap-gallery__empty-message"},Z(Qd,{level:this.headingLevel},this.messages.noBasemaps));return Z("div",{class:this.classes(ha.base,r)},s,l)}_handleClick(e){const t=e.currentTarget["data-item"];t.state==="ready"&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||li("esri/themes/base/images/basemap-toggle-64.svg"),i=e.get("basemap.title"),r=e.get("basemap.portalItem.snippet"),s=e.get("error.message")||r||i,{viewModel:l}=this,d=!this.disabled&&l.state!=="disabled"&&e.state==="ready"?0:-1,y=l.basemapEquals(e.basemap,this.activeBasemap),v=l.state==="loading",_={[ha.selectedItem]:y,[ha.itemError]:e.state==="error"};return Z("li",{"aria-selected":y.toString(),bind:this,class:this.classes(ha.item,_),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:d,title:s},Z("img",{alt:"",class:ha.itemThumbnail,src:t}),Z("div",{class:ha.itemTitle},i),e.state==="loading"||y&&v?Z("calcite-scrim",null,Z("span",{"aria-hidden":"true",role:"presentation",class:ha.loaderAnimation})):null)}};g([tt("viewModel.activeBasemap")],wa.prototype,"activeBasemap",void 0),g([S()],wa.prototype,"disabled",void 0),g([S()],wa.prototype,"headingLevel",void 0),g([S()],wa.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],wa.prototype,"label",void 0),g([S(),Gi("esri/widgets/BasemapGallery/t9n/BasemapGallery")],wa.prototype,"messages",void 0),g([tt("viewModel.source")],wa.prototype,"source",void 0),g([tt("viewModel.view")],wa.prototype,"view",void 0),g([S()],wa.prototype,"viewModel",void 0),g([Dn()],wa.prototype,"_handleClick",null),wa=g([Q("esri.widgets.BasemapGallery")],wa);const vze=wa;let Ih=class extends R$(bs.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){if(!this.get("view.ready"))throw new ge("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await this.view.when(),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};g([S()],Ih.prototype,"_goingHomeController",void 0),g([S({readOnly:!0})],Ih.prototype,"state",null),g([S()],Ih.prototype,"view",null),g([S({type:Lu})],Ih.prototype,"viewpoint",null),g([S()],Ih.prototype,"go",null),g([S()],Ih.prototype,"cancelGo",null),Ih=g([Q("esri.widgets.Home.HomeViewModel")],Ih);const zle=Ih,Vf={base:"esri-home esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",homeIcon:"esri-icon esri-icon-home",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let to=class extends rr{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Vf.widgetIcon,this.label=void 0,this.messages=null,this.messagesCommon=null,this.view=null,this.viewModel=new zle,this.viewpoint=null}get homeTitle(){var r;const e=(r=this.viewModel)==null?void 0:r.state,{messagesCommon:t,messages:i}=this;return e==="going-home"?t.cancel:i.title}cancelGo(){return null}go(){return null}render(){var r;const e=(r=this.viewModel)==null?void 0:r.state,{homeTitle:t}=this,i={[Vf.disabled]:e==="disabled"};return Z("div",{bind:this,class:this.classes(Vf.base,i),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":t,title:t},this.renderIcon(),this.renderText())}renderIcon(){var i;const e=(i=this.viewModel)==null?void 0:i.state,t={[Vf.loadingIcon]:e==="going-home",[Vf.rotatingIcon]:e==="going-home"};return Z("span",{"aria-hidden":"true",class:this.classes(Vf.homeIcon,t)})}renderText(){const{messages:e}=this;return Z("span",{class:Vf.text},e.button)}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}};g([tt("viewModel.goToOverride")],to.prototype,"goToOverride",void 0),g([S({readOnly:!0})],to.prototype,"homeTitle",null),g([S()],to.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],to.prototype,"label",void 0),g([S(),Gi("esri/widgets/Home/t9n/Home")],to.prototype,"messages",void 0),g([S(),Gi("esri/t9n/common")],to.prototype,"messagesCommon",void 0),g([tt("viewModel.view")],to.prototype,"view",void 0),g([S({type:zle}),yR("go")],to.prototype,"viewModel",void 0),g([tt("viewModel.viewpoint")],to.prototype,"viewpoint",void 0),g([tt("viewModel.cancelGo")],to.prototype,"cancelGo",null),g([tt("viewModel.go")],to.prototype,"go",null),g([Dn()],to.prototype,"_go",null),to=g([Q("esri.widgets.Home")],to);const wze=to;let bd=class extends st{constructor(e){super(e),this._viewpointHandle=null,this._handles=new ir,this.group=null}initialize(){this._handles.add(Ko(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const i=this.get("view.ui");i&&i.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&gs(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?gs(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(i&&t){const r=N3e(()=>i.type==="3d"?i.camera:i.viewpoint,()=>this._collapse());this._handles.add(r,e),this._viewpointHandle=r}}_collapse(){this.expanded=!1}};g([S({value:!1})],bd.prototype,"autoCollapse",null),g([S({value:!1})],bd.prototype,"expanded",null),g([S()],bd.prototype,"group",void 0),g([S({readOnly:!0})],bd.prototype,"state",null),g([S({value:null})],bd.prototype,"view",null),bd=g([Q("esri.widgets.Expand.ExpandViewModel")],bd);const Vle=bd,yn={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let Kr=class extends rr{constructor(e,t){super(e,t),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new Vle,this._handleKeyDown=i=>{const{closeOnEsc:r,_toggleButtonEl:s,expanded:l}=this;!l||!r||i.target===s||i.key!=="Escape"||(typeof r=="function"?r(i):r)&&(this.expanded=!1,s==null||s.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:i,expandTooltip:r}=this;return e?i||t.collapse:r||t.expand}get collapseIconClass(){return yn.collapseIcon}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return AS(this.content)?this.content.iconClass:yn.expandIcon}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,t={[yn.modeAuto]:e==="auto",[yn.modeDrawer]:e==="drawer",[yn.modeFloating]:e==="floating"};return Z("div",{class:this.classes(yn.base,t),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,t={[yn.containerExpanded]:e};return Z("div",{class:this.classes(yn.container,t)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,t={[yn.expandMaskExpanded]:e};return Z("div",{bind:this,onclick:this._toggle,class:this.classes(yn.expandMask,t)})}renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?Z("span",{key:"expand__icon-number",class:yn.iconNumber},t):null}renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?Z("span",{key:"expand__expand-icon-number",class:this.classes(yn.iconNumber,yn.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:i}=this,r={[yn.iconExpanded]:i,[e]:i,[t]:!i};return e===t&&(r[e]=!0),Z("span",{"aria-hidden":"true",class:this.classes(yn.icon,r)})}renderTitle(){return Z("span",{class:yn.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:t,contentId:i}=this;return Z("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":i,"aria-expanded":e?"true":"false",bind:this,class:yn.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return Z("div",{class:yn.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:t,content:i}=this,r={[yn.contentExpanded]:e},s={id:t,role:"region",class:this.classes(yn.content,r)};return typeof i=="string"?Z("div",{key:"content__string",innerHTML:i,...s}):AS(i)?Z("div",{key:"content__widget",...s},i.render()):i instanceof HTMLElement?Z("div",{key:"content__html-element",bind:i,afterCreate:this._attachToNode,...s}):Tie(i)?Z("div",{key:"content__node",bind:i.domNode,afterCreate:this._attachToNode,...s}):null}_toggle(){this.toggle()}_attachToNode(e){const t=this;e.appendChild(t)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};g([S({readOnly:!0})],Kr.prototype,"contentId",null),g([S({readOnly:!0})],Kr.prototype,"expandTitle",null),g([tt("viewModel.autoCollapse")],Kr.prototype,"autoCollapse",void 0),g([S()],Kr.prototype,"closeOnEsc",void 0),g([S()],Kr.prototype,"collapseIconClass",null),g([S()],Kr.prototype,"collapseTooltip",void 0),g([S()],Kr.prototype,"content",void 0),g([tt("viewModel.expanded")],Kr.prototype,"expanded",void 0),g([S()],Kr.prototype,"expandIconClass",null),g([S()],Kr.prototype,"expandTooltip",void 0),g([tt("viewModel.group")],Kr.prototype,"group",void 0),g([S()],Kr.prototype,"iconNumber",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Kr.prototype,"label",void 0),g([S(),Gi("esri/widgets/Expand/t9n/Expand")],Kr.prototype,"messages",void 0),g([S(),Gi("esri/t9n/common")],Kr.prototype,"messagesCommon",void 0),g([S()],Kr.prototype,"mode",void 0),g([tt("viewModel.view")],Kr.prototype,"view",void 0),g([S({type:Vle})],Kr.prototype,"viewModel",void 0),g([Dn()],Kr.prototype,"_toggle",null),Kr=g([Q("esri.widgets.Expand")],Kr);const bze=Kr,_ze={readOnly:!0,get(){return Zee(this.view)}};function xze(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var zN={exports:{}};(function(e,t){function i(){function s(h){if(typeof h=="number")return X.Uc.ah(h);if(h==null)return null;if(iy[h]!=null)return X.Uc.ah(iy[h]);throw Error("Unrecognised Unit Type")}function l(h){if(typeof h=="number")return X.Uc.ah(h);if(h==null)return null;if(Fl[h]!=null)return X.Uc.ah(Fl[h]);throw Error("Unrecognised Unit Type")}function d(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function y(h,L,b,c){if(b==null||b.B())return null;switch(b.K()){case X.sn.Point:return h.exportPoint(L,b,c);case X.sn.Polygon:return h.exportPolygon(L,b,c);case X.sn.Polyline:return h.exportPolyline(L,b,c);case X.sn.MultiPoint:return h.exportMultipoint(L,b,c);case X.sn.Envelope:return h.exportExtent(L,b,c)}return null}function v(h,L,b,c){if(b.K()!==X.sn.Point)throw Error("Geometry not Point");return h.exportPoint(L,b,c)}function _(h,L,b){return h.convertToGEGeometry(L,b)}function M(h){var L=h.wkid;h=h.wkt;var b=vp.get(L||h);return b==null&&(L!==-1&&L!=null?(b=X.Gg.create(L),vp.set(L,b)):h&&(b=X.Gg.kP(h),vp.set(h,b))),b}function k(h){var L;if(h==null)return null;var b=M(h);return h=b.Id(),b=b.Ln(),(L={}).tolerance=b,L.unitType=h==null?-1:h.od,L.unitID=h==null?-1:h.Fc(),L.unitBaseFactor=h==null?0:h.ci,L.unitSquareDerivative=h==null?0:X.Uc.VF(h).Fc(),L}function O(h,L,b,c){return b==null?null:(b=X.bc.clip(_(h,We,b),_(h,We,c),M(L)),y(h,We,b,L))}function R(h,L,b,c){b=X.bc.fl(_(h,We,b),_(h,We,c),M(L)),c=[];for(var a=0;a<b.length;a++)c.push(y(h,We,b[a],L));return c}function D(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.contains(_(h,We,b),_(h,We,c),M(L))}function z(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.vP(_(h,We,b),_(h,We,c),M(L))}function B(h,L,b,c,a){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.ub(_(h,We,b),_(h,We,c),M(L),s(a))}function V(h,L,b,c){return!(b==null&&c!=null||c==null&&b!=null)&&X.bc.Nb(_(h,We,b),_(h,We,c),M(L))}function q(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.LS(_(h,We,b),_(h,We,c),M(L))}function J(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.touches(_(h,We,b),_(h,We,c),M(L))}function ne(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.iY(_(h,We,b),_(h,We,c),M(L))}function re(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.NP(_(h,We,b),_(h,We,c),M(L))}function ue(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.vU(_(h,We,b),_(h,We,c),M(L))}function _e(h,L,b,c,a){if(b==null||c==null)throw Error("Illegal Argument Exception");return X.bc.sB(_(h,We,b),_(h,We,c),M(L),a)}function xe(h,L,b){if(b==null)throw Error("Illegal Argument Exception");return X.bc.WS(_(h,We,b),M(L))}function Ne(h,L,b){if(b==null)throw Error("Illegal Argument Exception");return b=X.bc.ZB(_(h,We,b),M(L)),y(h,We,b,L)}function Ce(h,L,b,c){if(c===void 0&&(c=!1),b==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){var a=c,n=[];for(c=0;c<b.length;c++)n.push(_(h,We,b[c]));for(b=X.bc.dP(n,a),a=Array(b.length),c=0;c<b.length;c++)a[c]=y(h,We,b[c],L);return a}return c=X.bc.cP(_(h,We,b),M(L)),y(h,We,c,L)}function Ge(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],n=0;n<b.length;n++)a.push(_(h,We,b[n]));for(b=X.bc.KP(a,_(h,We,c),M(L)),c=Array(b.length),n=0;n<b.length;n++)c[n]=y(h,We,b[n],L);return c}return n=X.bc.km(_(h,We,b),_(h,We,c),M(L)),y(h,We,n,L)}function Ze(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],n=0;n<b.length;n++)a.push(_(h,We,b[n]));for(b=X.bc.NX(a,_(h,We,c),M(L)),c=Array(b.length),n=0;n<b.length;n++)c[n]=y(h,We,b[n],L);return c}return n=X.bc.fp(_(h,We,b),_(h,We,c),M(L)),y(h,We,n,L)}function lt(h,L,b,c){if(b==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],n=0;n<b.length;n++)a.push(_(h,We,b[n]));for(b=X.bc.JS(a,_(h,We,c),M(L)),c=Array(b.length),n=0;n<b.length;n++)c[n]=y(h,We,b[n],L);return c}return n=X.bc.Fa(_(h,We,b),_(h,We,c),M(L)),y(h,We,n,L)}function et(h,L,b,c){if(b==null)return null;var a=[];if(Array.isArray(b)){if(b.length===0)return null;for(c=0;c<b.length;c++)a.push(_(h,We,b[c]))}else a.push(_(h,We,b)),c!=null&&a.push(_(h,We,c));return y(h,We,X.bc.bY(a,M(L)),L)}function zt(h,L,b,c,a,n,o,u){var p=0;if(n!=null)switch(n){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(b)){if(b==null)h=null;else if(b.length===0)h=[];else{var f=[];for(n=0;n<b.length;n++)f.push(_(h,We,b[n]));for(b=X.bc.tU(f,M(L),c,p,o,u,s(a)),c=Array(b.length),n=0;n<b.length;n++)c[n]=y(h,We,b[n],L);h=c}return h}return b=X.bc.offset(_(h,We,b),M(L),c,p,o,u,s(a)),y(h,We,b,L)}function pi(h,L,b,c,a,n){if(n===void 0&&(n=!1),Array.isArray(b)){if(!Array.isArray(c)){for(var o=[],u=0;u<b.length;u++)o.push(c);c=o}if(c.length!=b.length){if(c.length==0)throw Error("Illegal Argument Exception");o=[];var p=0;for(u=0;u<b.length;u++)c[u]===void 0?o.push(p):(o.push(c[u]),p=c[u]);c=o}return pe(h,L,b,c,a,!1,n,"geodesic",NaN)}return b=X.bc.buffer(_(h,We,b),M(L),c,s(a),!1,0,NaN),y(h,We,b,L)}function he(h,L,b,c,a,n,o,u){if(Array.isArray(b)){if(!Array.isArray(c)){for(var p=[],f=0;f<b.length;f++)p.push(c);c=p}if(c.length!==b.length){if(c.length===0)throw Error("Illegal Argument Exception");p=[];var m=0;for(f=0;f<b.length;f++)c[f]===void 0?p.push(m):(p.push(c[f]),m=c[f]);c=p}return pe(h,L,b,c,a,!0,n,o,u)}return o===void 0&&(o=NaN),b=X.bc.buffer(_(h,We,b),M(L),c,s(a),!0,d(n),o),y(h,We,b,L)}function pe(h,L,b,c,a,n,o,u,p){if(p===void 0&&(p=NaN),b==null)return null;if(b.length===0)return[];for(var f=[],m=0;m<b.length;m++)f.push(_(h,We,b[m]));for(b=X.bc.GN(f,M(L),c,s(a),n,o,d(u),p),c=Array(b.length),m=0;m<b.length;m++)c[m]=y(h,We,b[m],L);return c}function me(h,L,b,c,a){var n;return a===void 0&&(a=!0),b=X.bc.iz(_(h,We,b),_(h,We,c),a),(n={}).coordinate=v(h,We,b.az(),L),n.distance=b.cz(),n.isRightSide=b.Nz(),n.vertexIndex=b.Va(),n.isEmpty=b.B(),n}function we(h,L,b,c){var a;return b=X.bc.jz(_(h,We,b),_(h,We,c)),(a={}).coordinate=v(h,We,b.az(),L),a.distance=b.cz(),a.isRightSide=b.Nz(),a.vertexIndex=b.Va(),a.isEmpty=b.B(),a}function Ee(h,L,b,c,a,n){var o;for(b=X.bc.kz(_(h,We,b),_(h,We,c),a,n),c=[],a=0;a<b.length;a++)b[a].B()===!1&&c.push(((o={}).coordinate=v(h,We,b[a].az(),L),o.distance=b[a].cz(),o.isRightSide=b[a].Nz(),o.vertexIndex=b[a].Va(),o.isEmpty=b[a].B(),o));return c}function Re(h,L,b,c,a,n){return b=X.bc.KQ(_(h,We,b),M(L),c,a,s(n)),y(h,We,b,L)}function qe(h,L,b,c,a){return b=X.bc.Sr(_(h,We,b),M(L),c,s(a)),y(h,We,b,L)}function ft(h,L,b,c,a,n){return n===void 0&&(n=0),b=X.bc.Ry(_(h,We,b),M(L),c,s(a),n),y(h,We,b,L)}function jt(h,L,b,c){if(b==null)throw Error("Illegal Argument Exception");return X.bc.BU(_(h,We,b),M(L),l(c))}function bi(h,L,b,c){if(b==null)throw Error("Illegal Argument Exception");return X.bc.CU(_(h,We,b),M(L),s(c))}function tn(h,L,b,c,a){if(b==null)throw Error("Illegal Argument Exception");return X.bc.QQ(_(h,We,b),M(L),l(c),d(a))}function Ar(h,L,b,c,a){if(b==null)throw Error("Illegal Argument Exception");return X.bc.TQ(_(h,We,b),M(L),s(c),d(a))}function Ki(h){X.HL.bind(h)}function gi(h,L,b,c,a){var n=null,o=null;if(c){if(!a)throw X.i.O("AOI missing Spatial Reference");n=_(h,We,c),o=M(a).hh()}return(h=X.iu.QR(M(L).hh(),M(b).hh(),n,o))!==null?h:null}function ti(h,L,b,c,a){var n=null,o=null;if(c){if(!a)throw X.i.O("AOI missing Spatial Reference");n=_(h,We,c),o=M(a).hh()}return X.iu.RR(M(L).hh(),M(b).hh(),n,o)}function gp(h,L,b,c,a,n){if(a===void 0&&(a=null),n===void 0&&(n=null),n){var o=new X.sC;o.Xu=n.densificationStep,o.Lr=n.centralMeridianOfOutputGCS,n.clipWithInputHorizon&&o.HW(n.clipWithInputHorizon),n.clipWithOutputHorizon&&o.IW(n.clipWithOutputHorizon)}if(this.CY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(L.length===0)return[];if(a){if(!(n=a.getCachedGeTransformation(b,c)))e:{if(n=a,a=null,n){var u=n.getGTListEntry();if(u!==null){a=new X.qC(null);for(var p=0,f=u.steps;p<f.length;p++){u=f[p];var m=new X.Cx(u.geogtran);u.isInverse&&m.Lz(),a.add(m)}o=X.xr.Pr(M(b).hh(),M(c).hh(),a,o),n.assignCachedGe(b,c,o),n=o;break e}}if(a===null&&n&&n.steps&&0<n.steps.length){for(a=new X.qC(null),p=0,f=n.steps;p<f.length;p++)(u=f[p]).wkid!=-1&&u.wkid!=null?a.add(X.Cx.create(u.wkid,u.isInverse)):a.add(X.Cx.oP(u.wkt,u.isInverse));o=X.xr.Pr(M(b).hh(),M(c).hh(),a,o),n.assignCachedGe(b,c,o),n=o}else n=X.xr.Pr(M(b).hh(),M(c).hh(),a,o)}for(b=[],a=0;a<L.length;a++)o=L[a],b.push(bf(h,o,c,n))}else for(n=X.xr.Pr(M(b).hh(),M(c).hh(),null),b=[],a=0;a<L.length;a++)o=L[a],b.push(bf(h,o,c,n));return b}function bf(h,L,b,c){return L=X.bc.Bh(_(h,We,L),c),y(h,We,L,b)}var Ii,X,Gn,Mo,ai=this&&this.__extends||function(){function h(L,b){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var n in a)a.hasOwnProperty(n)&&(c[n]=a[n])})(L,b)}return function(L,b){function c(){this.constructor=L}h(L,b),L.prototype=b===null?Object.create(b):(c.prototype=b.prototype,new c)}}();(function(h){var L;(L=h.sn||(h.sn={}))[L.Unknown=0]="Unknown",L[L.Point=33]="Point",L[L.Line=322]="Line",L[L.Envelope=197]="Envelope",L[L.MultiPoint=550]="MultiPoint",L[L.Polyline=1607]="Polyline",L[L.Polygon=1736]="Polygon",function(c){c[c.enumMild=0]="enumMild",c[c.enumMedium=1]="enumMedium",c[c.enumHot=2]="enumHot"}(h.SK||(h.SK={}));var b=function(){function c(){this.description=null,this.PA=0}return c.prototype.K=function(){return 0},c.prototype.Eb=function(){return-1},c.prototype.kg=function(a){this.wc(),a!=this.description&&this.un(a)},c.prototype.un=function(){},c.prototype.Ll=function(a){this.wc(),a!=this.description&&(a=h.ee.wR(this.description,a))!=this.description&&this.un(a)},c.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},c.prototype.se=function(a){this.wc(),this.description.hasAttribute(a)||(a=h.ee.vR(this.description,a),this.un(a))},c.prototype.Vg=function(){return null},c.prototype.dn=function(){},c.prototype.A=function(){},c.prototype.Ro=function(){},c.prototype.yc=function(a){this.A(a)},c.prototype.B=function(){return!0},c.prototype.Pa=function(){},c.prototype.Pc=function(){},c.prototype.Ja=function(){return null},c.prototype.copyTo=function(){},c.prototype.He=function(){return 0},c.prototype.Rb=function(){return 0},c.prototype.cG=function(){return this.hasAttribute(1)},c.uf=function(a){return 1+((192&a)>>6)>>1},c.Sn=function(a){return(32&a)!=0},c.MS=function(a){return(128&a)!=0},c.zd=function(a){return(256&a)!=0},c.zj=function(a){return(512&a)!=0},c.Ic=function(a){return(1024&a)!=0},c.prototype.Pf=function(){var a=this.Ja();return this.copyTo(a),a},c.prototype.mg=function(){return null},c.ig=function(a){var n=a.Ja();return a.copyTo(n),n},c.prototype.wc=function(){0<=this.PA&&(this.PA+=2147483649)},c.zx=function(a){var n=a.K();if(c.zj(n))return a.I();if(a.B())return 0;if(n==197)return 4;if(n==33)return 1;if(c.zd(n))return 2;throw h.i.ga("missing type")},c}();h.ba=b})(X||(X={})),Gn=X||(X={}),Mo=function(){function h(){this.y=this.x=0}return h.construct=function(L,b){var c=new h;return c.x=L,c.y=b,c},h.cl=function(L){var b=new h;return b.x=L.x,b.y=L.y,b},h.prototype.na=function(L,b){this.x=L,this.y=b},h.prototype.N=function(L){this.x=L.x,this.y=L.y},h.prototype.hq=function(L,b){return this.x===L&&this.y===b},h.prototype.Mz=function(L){return 2220446049250313e-31>=Math.abs(this.x-L.x)&&2220446049250313e-31>=Math.abs(this.y-L.y)},h.prototype.rb=function(L){return this.x===L.x&&this.y===L.y},h.prototype.Nb=function(L){return L==this||L instanceof h&&this.x==L.x&&this.y==L.y},h.prototype.sub=function(L){this.x-=L.x,this.y-=L.y},h.prototype.vc=function(L,b){this.x=L.x-b.x,this.y=L.y-b.y},h.prototype.add=function(L,b){b!==void 0?(this.x=L.x+b.x,this.y=L.y+b.y):(this.x+=L.x,this.y+=L.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.nt=function(L){this.x=-L.x,this.y=-L.y},h.prototype.GS=function(L,b,c){this.x=L.x*(1-c)+b.x*c,this.y=L.y*(1-c)+b.y*c},h.prototype.Dt=function(L,b){this.x=this.x*L+b.x,this.y=this.y*L+b.y},h.prototype.yW=function(L,b,c){this.x=b.x*L+c.x,this.y=b.y*L+c.y},h.prototype.scale=function(L){this.x*=L,this.y*=L},h.prototype.compare=function(L){return this.y<L.y?-1:this.y>L.y?1:this.x<L.x?-1:this.x>L.x?1:0},h.prototype.normalize=function(){var L=this.length();L==0&&(this.x=1,this.y=0),this.x/=L,this.y/=L},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Tk=function(){return this.x*this.x+this.y*this.y},h.ub=function(L,b){return Math.sqrt(this.zc(L,b))},h.Jy=function(L,b,c,a){return L-=c,b-=a,Math.sqrt(L*L+b*b)},h.prototype.Sh=function(L){return this.x*L.x+this.y*L.y},h.prototype.$C=function(L){return Math.abs(this.x*L.x)+Math.abs(this.y*L.y)},h.prototype.yi=function(L){return this.x*L.y-this.y*L.x},h.prototype.Ct=function(L,b){var c=-this.x*b+this.y*L;this.x=this.x*L+this.y*b,this.y=c},h.prototype.Jv=function(){var L=this.x;this.x=-this.y,this.y=L},h.prototype.GG=function(L){this.x=-L.y,this.y=L.x},h.prototype.cr=function(){var L=this.x;this.x=this.y,this.y=-L},h.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.pu=function(L,b){var c=L.su(),a=b.su();return a==c?0>(L=L.yi(b))?1:0<L?-1:0:c<a?-1:1},h.zc=function(L,b){var c=L.x-b.x;return c*c+(L=L.y-b.y)*L},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(L,b){var c=h.ub(L,b),a=h.construct(this.x,this.y);if(c==0)return h.ub(a,L);var n=new h;return n.N(b),n.sub(L),a.sub(L),a.yi(n)/c},h.Wq=function(L,b,c){var a=new Gn.Xb;a.set(b.x),a.sub(L.x);var n=new Gn.Xb;n.set(c.y),n.sub(L.y);var o=new Gn.Xb;o.set(b.y),o.sub(L.y);var u=new Gn.Xb;return u.set(c.x),u.sub(L.x),a.Ag(n),o.Ag(u),a.sub(o),a.rs()?(a=new Gn.ip(b.x),n=new Gn.ip(L.x),o=new Gn.ip(L.y),a=a.kt(n),L=(L=new Gn.ip(c.y)).kt(o),b=(b=new Gn.ip(b.y)).kt(o),c=(c=new Gn.ip(c.x)).kt(n),a=a.nr(L),b=b.nr(c),(a=a.nr(b)).fT()?-1:a.ZR()?1:0):0>(c=a.value())?-1:0<c?1:0},h.prototype.dc=function(){return Gn.P.wj(Gn.P.wj())},h}(),Gn.h=Mo,function(h){var L=function(){function b(c){this.Ay=this.Ot=0,this.GX=c}return b.prototype.reset=function(){this.Ay=this.Ot=0},b.prototype.add=function(c){c-=this.Ay;var a=this.Ot+c;this.Ay=a-this.Ot-c,this.Ot=a},b.prototype.sub=function(c){this.add(-c)},b.prototype.tm=function(){return this.GX+this.Ot},b}();h.Ex=L,h.mc=function(){function b(){}return b.Dn=function(c,a){return 0<=a?Math.abs(c):-Math.abs(c)},b.sign=function(c){return 0>c?-1:0<c?1:0},b.LK=function(c){return c-360*Math.floor(c/360)},b.round=function(c){return Math.floor(c+.5)},b.ox=function(c){return c*c},b.jq=function(c,a,n){return .5>=n?c+(a-c)*n:a-(a-c)*(1-n)},b.IG=function(c,a,n,o){.5>=n?(o.x=c.x+(a.x-c.x)*n,o.y=c.y+(a.y-c.y)*n):(o.x=a.x-(a.x-c.x)*(1-n),o.y=a.y-(a.y-c.y)*(1-n))},b.dT=function(c,a,n,o,u,p){.5>=u?(p.x=c+(n-c)*u,p.y=a+(o-a)*u):(p.x=n-(n-c)*(1-u),p.y=o-(o-a)*(1-u))},b}()}(X||(X={})),function(h){var L=function(b){function c(){var a=b.call(this)||this;return a.sa=0,a.oa=0,a.qa=0,a.ma=0,a.la=null,a}return ai(c,b),c.prototype.ac=function(){return h.h.construct(this.sa,this.oa)},c.prototype.$p=function(a){a.x=this.sa,a.y=this.oa},c.prototype.Ec=function(a){this.gm(0,a)},c.prototype.TB=function(a,n){this.gm(0,h.h.construct(a,n))},c.prototype.Uo=function(a){this.bD(0,a)},c.prototype.setStart=function(a){this.oD(0,a)},c.prototype.yv=function(a,n){return this.Pd(0,a,n)},c.prototype.SB=function(a,n,o){this.vn(0,a,n,o)},c.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},c.prototype.Vr=function(a){a.x=this.qa,a.y=this.ma},c.prototype.Rc=function(a){this.gm(1,a)},c.prototype.Sl=function(a,n){this.gm(1,h.h.construct(a,n))},c.prototype.Qo=function(a){this.bD(1,a)},c.prototype.setEnd=function(a){this.oD(1,a)},c.prototype.jv=function(a,n){return this.Pd(1,a,n)},c.prototype.IB=function(a,n,o){this.vn(1,a,n,o)},c.prototype.Eb=function(){return 1},c.prototype.B=function(){return this.Bc()},c.prototype.Pa=function(){},c.prototype.He=function(){return 0},c.prototype.Fa=function(a,n,o,u,p){return this.EM(a,n,o,u,p)},c.prototype.isIntersecting=function(a,n){return this.Br(a,n,!1)!=0},c.prototype.ss=function(a,n){return this.tu(a,n,!1)},c.prototype.tu=function(){return null},c.prototype.Bc=function(){return!1},c.prototype.$x=function(a){if(this.wc(),this.la==null&&0<a)this.la=h.P.lg(2*a);else if(this.la!=null&&this.la.length<2*a){for(var n=this.la.slice(0),o=this.la.length;o<2*a;o++)n[o]=0;this.la=n}},c.aM=function(a,n,o){if(0<o)var u=0;for(var p=0;p<o;p++)n[0+u]=a[0],u++},c.prototype.gm=function(a,n){a!=0?(this.qa=n.x,this.ma=n.y):(this.sa=n.x,this.oa=n.y)},c.prototype.un=function(a){if(this.la!=null){for(var n=h.ee.Kw(a,this.description),o=[],u=c.Ig(this.description,0),p=c.Ig(this.description,1),f=c.Ig(a,0),m=c.Ig(a,1),w=0,x=1,E=a.Ba;x<E;x++){var T=a.qd(x),A=h.ua.Wa(T);if(n[x]==-1){var P=h.ua.te(T);for(T=0;T<A;T++)o[f+w]=P,o[m+w]=P,w++}else for(P=this.description.ak(n[x])-2,T=0;T<A;T++)o[f+w]=this.la[u+P],o[m+w]=this.la[p+P],w++,P++}this.la=o}this.description=a},c.prototype.bD=function(a,n){if(this.Bc())throw h.i.ga("empty geometry");n.kg(this.description),n.Bc()&&n.up();for(var o=0;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=0,f=h.ua.Wa(u);p<f;p++){var m=this.Pd(a,u,p);n.setAttribute(u,p,m)}},c.prototype.oD=function(a,n){if(this.wc(),n.Bc())throw h.i.ga("empty geometry");for(var o=n.description,u=0,p=o.Ba;u<p;u++)for(var f=o.Fd(u),m=h.ua.Wa(f),w=0;w<m;w++){var x=n.Vc(f,w);this.vn(a,f,w,x)}},c.prototype.Pd=function(a,n,o){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.ma:this.qa:o!=0?this.oa:this.sa;if(o>=h.ua.Wa(n))throw h.i.re();var u=this.description.Qf(n);return 0<=u?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.ak(u)-2+o]):h.ua.te(n)},c.prototype.vn=function(a,n,o,u){if(this.wc(),o>=h.ua.Wa(n))throw h.i.re();var p=this.description.Qf(n);0>p&&(this.se(n),p=this.description.Qf(n)),n==0?a!=0?o!=0?this.ma=u:this.qa=u:o!=0?this.oa=u:this.sa=u:(this.la==null&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.ak(p)-2+o]=u)},c.prototype.copyTo=function(a){if(a.K()!=this.K())throw h.i.O();a.description=this.description,a.$x(this.description.Be.length-2),c.aM(this.la,a.la,2*(this.description.Be.length-2)),a.sa=this.sa,a.oa=this.oa,a.qa=this.qa,a.ma=this.ma,a.wc(),this.pp(a)},c.prototype.Vg=function(a,n){var o=new h.Oc;return this.Bc()?(o.Pa(),o):(o.pa=this.Pd(0,a,n),o.wa=o.pa,o.Mk(this.Pd(1,a,n)),o)},c.prototype.TI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Mk(this.Pd(1,0,0)))},c.prototype.Vw=function(a,n){n.kg(this.description),n.Db(this.ic(a));for(var o=1,u=this.description.Ba;o<u;o++)for(var p=this.description.Fd(o),f=h.ua.Wa(p),m=0;m<f;m++){var w=this.Vc(a,p,m);n.setAttribute(p,m,w)}},c.prototype.zM=function(a){if(this.description!=a.description||this.sa!=a.sa||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var n=0;n<2*(this.description.Be.length-2);n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.vG=function(){return this.sa==this.qa&&this.oa==this.ma},c.prototype.reverse=function(){var a=this.sa;this.sa=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=1;for(var n=this.description.Ba;a<n;a++)for(var o=this.description.qd(a),u=0,p=h.ua.Wa(o);u<p;u++){var f=this.Pd(0,o,u),m=this.Pd(1,o,u);this.vn(0,o,u,m),this.vn(1,o,u,f)}},c.prototype.Br=function(a,n,o){var u=a.K();if(this.K()===322){if(u==322)return h.zb.IM(this,a,n,o);throw h.i.Ra()}throw h.i.Ra()},c.prototype.EM=function(a,n,o,u,p){var f=a.K();if(this.K()===322){if(f==322)return h.zb.Yx(this,a,n,o,u,p);throw h.i.Ra()}throw h.i.Ra()},c.prototype.Sx=function(){return null},c.Ig=function(a,n){return n*(a.Be.length-2)},c.prototype.ic=function(a,n){if(n===void 0)return n=new h.h,this.ic(a,n),n;h.mc.dT(this.sa,this.oa,this.qa,this.ma,a,n)},c.prototype.fe=function(){return null},c.prototype.ZF=function(){return null},c.prototype.fq=function(){return null},c.prototype.Di=function(){return null},c.prototype.Qn=function(){return null},c.prototype.jg=function(){return null},c.prototype.Tx=function(a,n){return n!==void 0?this.ux(n)-this.ux(a):this.ux(a)},c.prototype.pp=function(){},c.prototype.fl=function(){return null},c.prototype.dh=function(){},c.prototype.Vc=function(){return null},c.prototype.Me=function(){return null},c.prototype.ux=function(){return null},c.prototype.HG=function(){return null},c.prototype.ub=function(a,n){if(!n&&this.Br(a,0,!1)!=0)return 0;n=17976931348623157e292;var o=this.ac(),u=a.fe(o,!1);return o.sub(a.ic(u)),(o=o.length())<n&&(n=o),o=this.xc(),u=a.fe(o,!1),o.sub(a.ic(u)),(o=o.length())<n&&(n=o),o=a.ac(),u=this.fe(o,!1),o.sub(this.ic(u)),(o=o.length())<n&&(n=o),o=a.xc(),u=this.fe(o,!1),o.sub(this.ic(u)),(o=o.length())<n&&(n=o),n},c.prototype.mg=function(){return h.si.im(this,null)},c}(h.ba);h.MC=L}(X||(X={})),new X.h,function(h){var L;(L=h.UK||(h.UK={}))[L.Unknown=-1]="Unknown",L[L.Not=0]="Not",L[L.Weak=1]="Weak",L[L.Strong=2]="Strong",function(c){c[c.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",c[c.IsWeakSimple=2]="IsWeakSimple",c[c.IsStrongSimple=4]="IsStrongSimple",c[c.DirtyOGCFlags=8]="DirtyOGCFlags",c[c.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",c[c.DirtyExactIntervals=64]="DirtyExactIntervals",c[c.DirtyLooseIntervals=128]="DirtyLooseIntervals",c[c.DirtyIntervals=192]="DirtyIntervals",c[c.DirtyIsEnvelope=256]="DirtyIsEnvelope",c[c.DirtyLength2D=512]="DirtyLength2D",c[c.DirtyRingAreas2D=1024]="DirtyRingAreas2D",c[c.DirtyCoordinates=1993]="DirtyCoordinates",c[c.DirtyAllInternal=65535]="DirtyAllInternal",c[c.DirtyAll=16777215]="DirtyAll"}(h.GK||(h.GK={}));var b=function(c){function a(){var n=c.call(this)||this;return n.Jm=65535,n.xa=0,n.Rg=-1,n.Cb=null,n}return ai(a,c),a.prototype.pp=function(){},a.prototype.Zx=function(){},a.prototype.ey=function(){},a.prototype.I=function(){return this.xa},a.prototype.B=function(){return this.Bc()},a.prototype.Bc=function(){return this.xa==0},a.prototype.bk=function(n){return(this.Jm&n)!=0},a.prototype.Nf=function(n,o){this.Jm=o?this.Jm|n:this.Jm&~n},a.prototype.rc=function(){this.bk(32)&&this.WM()},a.prototype.vx=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},a.prototype.we=function(n,o){if(0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.rc(),o.kg(this.description),o.B()&&o.up();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.Fd(u),f=0,m=h.ua.Wa(p);f<m;f++){var w=this.Aa[u].Bg(m*n+f);o.setAttribute(p,f,w)}},a.prototype.It=function(n,o){this.rc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.Fd(p),m=h.ua.Wa(f),w=0;w<m;w++){var x=o.Vc(f,w);this.setAttribute(f,n,w,x)}},a.prototype.D=function(n,o){if(0>n||n>=this.I())throw h.i.re();this.rc(),this.Aa[0].uc(2*n,o)},a.prototype.Oa=function(n){var o=new h.h;return this.D(n,o),o},a.prototype.Hc=function(n,o){this.Aa[0].uc(2*n,o)},a.prototype.Db=function(n,o,u){if(0>n||n>=this.xa)throw h.i.re();this.rc();var p=this.Aa[0];u!==void 0?(p.write(2*n,o),p.write(2*n+1,u)):p.Vt(2*n,o),this.Qc(1993)},a.prototype.xz=function(){if(void 0>=this.I())throw h.i.re();this.rc();var n=this.Aa[0],o=new h.Od;return o.x=n.read(NaN),o.y=n.read(NaN),o.z=this.hasAttribute(1)?this.Aa[1].Bg(void 0):h.ua.te(1),o},a.prototype.YB=function(n){if(0>n||n>=this.I())throw h.i.re();this.se(1),this.rc(),this.Qc(1993);var o=this.Aa[0];o.write(2*n,(void 0).x),o.write(2*n+1,(void 0).y),this.Aa[1].rr(n,(void 0).z)},a.prototype.Vc=function(n,o,u){if(0>o||o>=this.xa)throw h.i.re();var p=h.ua.Wa(n);if(u>=p)throw h.i.re();this.rc();var f=this.description.Qf(n);return 0<=f?this.Aa[f].Bg(o*p+u):h.ua.te(n)},a.prototype.sF=function(n,o){return this.Vc(n,o,void 0)},a.prototype.setAttribute=function(n,o,u,p){if(0>o||o>=this.xa)throw h.i.re();var f=h.ua.Wa(n);if(u>=f)throw h.i.re();this.se(n),this.rc(),n=this.description.Qf(n),this.Qc(1993),this.Aa[n].rr(o*f+u,p)},a.prototype.vb=function(n){return this.vx(),this.se(n),this.rc(),this.Aa[this.description.Qf(n)]},a.prototype.kn=function(n,o){if(o!=null&&h.ua.Vp(n)!=o.Vp())throw h.i.O();this.se(n),n=this.description.Qf(n),this.Aa==null&&(this.Aa=h.Zc.kI(this.description.Ba)),this.Aa[n]=o,this.Qc(16777215)},a.prototype.un=function(n){var o=null;if(this.Aa!=null){var u=h.ee.Kw(n,this.description);o=[];for(var p=0,f=n.Ba;p<f;p++)u[p]!=-1&&(o[p]=this.Aa[u[p]])}this.description=n,this.Aa=o,this.Rg=-1,this.Qc(16777215)},a.prototype.uD=function(n){this.yu(!0),n instanceof h.l?this.aa.A(n):this.aa.Ro(n)},a.prototype.VM=function(n){this.yu(!1),n instanceof h.l?this.aa.A(n):this.aa.Ro(n)},a.prototype.dn=function(n){this.yu(!0),this.aa.copyTo(n)},a.prototype.A=function(n){this.uD(n)},a.prototype.Ro=function(n){this.uD(n)},a.prototype.yc=function(n){this.VM(n)},a.prototype.Vg=function(n,o){var u=new h.Oc;return this.Bc()?(u.Pa(),u):(this.yu(!0),this.aa.Vg(n,o))},a.prototype.dc=function(){var n=this.description.dc();if(!this.Bc())for(var o=this.I(),u=0,p=this.description.Ba;u<p;u++)n=this.Aa[u].Bn(n,0,o*h.ua.Wa(this.description.Fd(u)));return n},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&this.description.Nb(n.description))||this.Bc()!=n.Bc())return!1;if(this.Bc())return!0;var o=this.I();if(o!=n.I())return!1;for(var u=0;u<this.description.Ba;u++){var p=this.description.qd(u),f=this.vb(p),m=n.vb(p);if(!f.Nb(m,0,o*h.ua.Wa(p)))return!1}return!0},a.prototype.copyTo=function(n){if(n.K()!=this.K())throw h.i.O();this.YC(n)},a.prototype.YC=function(n){this.rc(),n.description=this.description,n.Aa=null;var o=this.description.Ba,u=null;if(this.Aa!=null){u=[];for(var p=0;p<o;p++)this.Aa[p]!=null&&(u[p]=this.Aa[p].AB(this.I()*h.ua.Wa(this.description.Fd(p))))}this.aa!=null?(n.aa=this.aa.Ja(),this.aa.copyTo(n.aa)):n.aa=null,n.xa=this.xa,n.Jm=this.Jm,n.Aa=u;try{this.pp(n)}catch{throw n.Pa(),h.i.hu()}},a.prototype.qD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},a.prototype.Qc=function(n){n==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=n,this.fM(),this.wc()},a.prototype.yu=function(n){if(this.rc(),this.bk(192))if(this.aa==null?this.aa=new h.Hh(this.description):this.aa.kg(this.description),this.B())this.aa.Pa();else{this.dy(n);for(var o=1;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=h.ua.Wa(u),f=this.Aa[o],m=0;m<p;m++){var w=new h.Oc;w.Pa();for(var x=0;x<this.xa;x++){var E=f.Bg(x*p+m);w.$b(E)}this.aa.setInterval(u,m,w)}n&&this.Nf(192,!1)}},a.prototype.dy=function(){this.aa.Pa();for(var n=this.Aa[0],o=new h.h,u=0;u<this.xa;u++)n.uc(2*u,o),this.aa.$b(o)},a.prototype.Ap=function(n){n.Pa();for(var o=this.Aa[0],u=new h.h,p=0;p<this.xa;p++)o.uc(2*p,u),n.$b(u)},a.prototype.WM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=h.Zc.kI(this.description.Ba)),this.Rg=2147483647;for(var n=0;n<this.description.Ba;n++){var o=this.description.Fd(n);if(this.Aa[n]!=null){var u=h.ua.Wa(o),p=h.P.truncate(this.Aa[n].size/u);p<this.xa&&(p=h.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[n].resize(p*u,h.ua.te(o))),p<this.Rg&&(this.Rg=p)}else this.Aa[n]=h.Zc.SE(o,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},a.prototype.fm=function(n){if(0>n)throw h.i.O();n!=this.xa&&(this.xa=n,this.Qc(65535))},a.prototype.qm=function(n){if(!this.bk(1)){if(!this.bk(2))return 0;if(this.IT>=n)return this.bk(8)?1:2}return-1},a.prototype.Eh=function(n,o){if(this.IT=o,n==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),n==0)this.Nf(2,!1),this.Nf(4,!1);else if(n==1)this.Nf(2,!0),this.Nf(4,!1);else{if(n!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},a.prototype.fM=function(){this.Cb!=null&&(this.Cb=null)},a.prototype.eD=function(n,o,u,p){if(0>n||n>=this.xa||0>o||o>=this.xa)throw h.i.ga("index out of bounds");this.rc(),p.kg(this.description),p.B()&&p.up();for(var f=0;f<this.description.Ba;f++)for(var m=this.description.Fd(f),w=0,x=h.ua.Wa(m);w<x;w++){var E=this.Aa[f].Bg(x*n+w),T=this.Aa[f].Bg(x*o+w);p.setAttribute(m,w,h.mc.jq(E,T,u))}},a.prototype.Ar=function(n,o){var u=this.Aa[0].o,p=u[2*n]-u[2*o];return n=u[2*n+1]-u[2*o+1],Math.sqrt(p*p+n*n)},a.prototype.Fh=function(n,o){if(0>n||n>=this.xa)throw h.i.re();if(o.B())throw h.i.O();this.rc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.qd(p),m=h.ua.Wa(f),w=0;w<m;w++){var x=o.Vc(f,w);this.setAttribute(f,n,w,x)}},a.prototype.nu=function(){return null},a.prototype.hj=function(){return null},a}(h.ba);h.Fx=b}(X||(X={})),function(h){var L=function(){function b(){this.ob=this.$n=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new h.ad(7),this.$n=null}return b.prototype.Wo=function(c){this.$n=c},b.prototype.LP=function(){this.Tv=!1},b.prototype.Ee=function(c){this.ob.Ee(c)},b.prototype.Rr=function(c){var a=this.ob.De();return this.jX(a),this.mX(c,a),a},b.prototype.GP=function(c){this.ob.kd(c)},b.prototype.addElement=function(c,a){return a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne),this.zD(c,0,a)},b.prototype.DD=function(c){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.zD(c,1,this.Ne)},b.prototype.yn=function(c){this.Ne==-1&&(this.Ne=this.Rr(-1));var a=this.Ne,n=this.ob.o;if(a==-1||n[7*a]==-1)return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),(n=this.ob.o)[7*a]=c,this.xp(-1,c,a,n),c;var o=a==-1?-1:n[7*a+2];return c=this.ob.Nl([-1,-1,o,c,this.il(),-1,-1]),(n=this.ob.o)[7*o+1]=c,this.ky(c,n),n[7*c+2]===-1&&(n[7*a]=c),this.xp(-1,c,a,n),c},b.prototype.Bu=function(c,a,n,o){var u=-1;u==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),u=this.Ne);var p=this.ob.o;if(u==-1||p[7*u]==-1)return n=this.ob.Nl([-1,-1,-1,n,this.il(),-1,-1]),(p=this.ob.o)[7*u]=n,this.xp(-1,n,u,p),n;if(o){o=a!=-1?this.$n.compare(this,n,a):-1;var f=c!=-1?this.$n.compare(this,n,c):1}else o=-1,f=1;if(o==0||f==0)return p[7*u+3]=o==0?a:c,-1;for((a!=-1&&c!=-1?this.Vm>h.P.WA(this.Vm)>>1:a!=-1)?c=a:o=f,a=!0;;){if(0>o){if((f=p[7*c])==-1){o=c,n=this.ob.Nl([-1,-1,c,n,this.il(),-1,-1]),(p=this.ob.o)[7*c]=n;break}c=f}else{if((f=p[7*c+1])==-1){o=p[7*c+6],n=this.ob.Nl([-1,-1,c,n,this.il(),-1,-1]),(p=this.ob.o)[7*c+1]=n;break}c=f}a&&(o*=-1,a=!1)}return this.ky(n,p),p[7*n+2]===-1&&(p[7*u]=n),this.xp(o,n,u,p),n},b.prototype.zF=function(){return this.cR(this.Ne)},b.prototype.wd=function(c,a){a=a==-1?this.Ne:a,this.Tv?this.FP(c,a):this.aY(c,a)},b.prototype.search=function(c,a){for(a=this.uv(a);a!=-1;){var n=this.$n.compare(this,c,a);if(n==0)return a;a=0>n?this.nl(a):this.Zp(a)}return-1},b.prototype.zW=function(c){for(var a=this.uv(-1),n=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?a=this.nl(a):(n=a,a=this.Zp(a))}return n},b.prototype.oJ=function(c){for(var a=this.uv(-1),n=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?(n=a,a=this.nl(a)):a=this.Zp(a)}return n},b.prototype.ka=function(c){return this.ob.U(c,3)},b.prototype.nl=function(c){return this.ob.U(c,0)},b.prototype.Zp=function(c){return this.ob.U(c,1)},b.prototype.getParent=function(c){return this.ob.U(c,2)},b.prototype.lb=function(c){return this.ob.U(c,6)},b.prototype.xe=function(c){return this.ob.U(c,5)},b.prototype.sc=function(c){return c==-1?this.ml(this.Ne):this.ml(c)},b.prototype.Gc=function(c){return c==-1?this.bs(this.Ne):this.bs(c)},b.prototype.SR=function(c){return c==-1?this.WF(this.Ne):this.WF(c)},b.prototype.Uj=function(c,a){this.HB(c,a)},b.prototype.uv=function(c){return c==-1?this.SF(this.Ne):this.SF(c)},b.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},b.prototype.size=function(c){return c==-1?this.UF(this.Ne):this.UF(c)},b.prototype.EN=function(c,a){for(var n=a[7*c],o=a[7*c+1],u=a[7*c+4];n!=-1||o!=-1;){var p=n!=-1?a[7*n+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,u<=Math.min(p,o))break;p<=o?this.mJ(n,a):this.lJ(c,a),n=a[7*c],o=a[7*c+1]}},b.prototype.ky=function(c,a){if(this.Tv)for(var n=a[7*c+4],o=a[7*c+2];o!=-1&&a[7*o+4]>n;)a[7*o]==c?this.mJ(c,a):this.lJ(o,a),o=a[7*c+2]},b.prototype.lJ=function(c,a){var n=a[7*c+1];a[7*n+2]=a[7*c+2],a[7*c+2]=n;var o=a[7*n];a[7*c+1]=o,o!=-1&&(a[7*o+2]=c),a[7*n]=c,(o=a[7*n+2])!=-1&&(a[7*o]==c?a[7*o]=n:a[7*o+1]=n)},b.prototype.mJ=function(c,a){var n=a[7*c+2];a[7*c+2]=a[7*n+2],a[7*n+2]=c;var o=a[7*c+1];a[7*n]=o,o!=-1&&(a[7*o+2]=n),a[7*c+1]=n,(o=a[7*c+2])!=-1&&(a[7*o]===n?a[7*o]=c:a[7*o+1]=c)},b.prototype.Qk=function(c,a){this.ob.T(c,2,a)},b.prototype.NB=function(c,a){this.ob.T(c,0,a)},b.prototype.RB=function(c,a){this.ob.T(c,1,a)},b.prototype.QB=function(c,a){this.ob.T(c,5,a)},b.prototype.fx=function(c,a){this.ob.T(c,6,a)},b.prototype.RJ=function(c,a){this.ob.T(a,0,c)},b.prototype.jX=function(c){this.ob.T(c,4,0)},b.prototype.mX=function(c,a){this.ob.T(a,5,c)},b.prototype.SF=function(c){return c==-1?-1:this.ob.U(c,0)},b.prototype.ml=function(c){return c==-1?-1:this.ob.U(c,1)},b.prototype.bs=function(c){return c==-1?-1:this.ob.U(c,2)},b.prototype.cR=function(c){return c==-1?-1:this.ob.U(c,3)},b.prototype.UF=function(c){return c==-1?0:this.ob.U(c,4)},b.prototype.WF=function(c){return this.ob.U(c,5)},b.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},b.prototype.hl=function(c){c!=-1&&this.ob.kd(c)},b.prototype.il=function(){return this.Vm=h.P.WA(this.Vm),1073741823&this.Vm},b.prototype.zD=function(c,a,n){var o=this.ob.o;if(n==-1||o[7*n]==-1)return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),(o=this.ob.o)[7*n]=c,this.xp(-1,c,n,o),c;for(var u=n==-1?-1:o[7*n];;){var p=a==-1?1:this.$n.compare(this,c,u);if(0>p){if((p=this.nl(u))==-1){a=u,c=this.ob.Nl([-1,-1,u,c,this.il(),-1,-1]),(o=this.ob.o)[7*u]=c;break}u=p}else{if(a==1&&p==0)return o[7*n+3]=u,-1;if((p=o[7*u+1])==-1){a=o[7*u+6],c=this.ob.Nl([-1,-1,u,c,this.il(),-1,-1]),(o=this.ob.o)[7*u+1]=c;break}u=p}}return this.ky(c,o),o[7*c+2]===-1&&(o[7*n]=c),this.xp(a,c,n,o),c},b.prototype.xp=function(c,a,n,o){if(c!=-1){var u=o[7*c+5];o[7*c+5]=a}else u=n==-1?-1:o[7*n+2];o[7*a+5]=u,u!=-1&&(o[7*u+6]=a),o[7*a+6]=c,c==(n==-1?-1:o[7*n+1])&&(o[7*n+1]=a),c==-1&&(o[7*n+2]=a),o[7*n+4]=(n==-1?0:o[7*n+4])+1},b.prototype.uB=function(c,a){var n=this.ob.o,o=n[7*c+5];c=n[7*c+6],o!=-1?n[7*o+6]=c:n[7*a+1]=c,c!=-1?n[7*c+5]=o:n[7*a+2]=o,n[7*a+4]=a===-1?-1:n[7*a+4]-1},b.prototype.aY=function(c,a){this.uB(c,a);var n=this.nl(c),o=this.Zp(c),u=this.getParent(c),p=c;if(n!=-1&&o!=-1){this.Vm=h.P.WA(this.Vm);var f=1073741823<this.Vm?this.lb(c):this.xe(c),m=this.getParent(f)==c;this.ob.aC(c,f,0),this.ob.aC(c,f,1),this.ob.aC(c,f,2),u!=-1?this.nl(u)==c?this.NB(u,f):this.RB(u,f):this.RJ(f,a),m?(n==f?(this.NB(f,c),this.Qk(o,f)):o==f&&(this.RB(f,c),this.Qk(n,f)),this.Qk(c,f),u=f):(this.Qk(n,f),this.Qk(o,f),u=this.getParent(c),p=f),n=this.nl(c),o=this.Zp(c),n!=-1&&this.Qk(n,c),o!=-1&&this.Qk(o,c)}n=n!=-1?n:o,u==-1?this.RJ(n,a):this.nl(u)==p?this.NB(u,n):this.RB(u,n),n!=-1&&this.Qk(n,u),this.hl(c)},b.prototype.FP=function(c,a){var n=this.ob.o;n[7*c+4]=2147483647;var o=-1,u=-1,p=a===-1?-1:n[7*a],f=p==c;if(f&&(o=n[7*p],u=n[7*p+1],o==-1&&u==-1))return this.uB(p,a),this.hl(p),void(n[7*a]=-1);this.EN(c,n),(p=n[7*c+2])!=-1&&(n[7*p]==c?n[7*p]=-1:n[7*p+1]=-1),this.uB(c,a),this.hl(c),f&&(n[7*a]=o==-1||n[7*o+2]!=-1?u:o)},b.prototype.HB=function(c,a){this.ob.T(c,3,a)},b}();h.Zj=L}(X||(X={})),function(h){var L=function(){function b(c,a){c!==void 0&&this.L(c,a)}return b.prototype.L=function(c,a){this.pa=c,this.wa=a,this.normalize()},b.prototype.isIntersecting=function(c){return this.pa<=c.pa?this.wa>=c.pa:c.wa>=this.pa},b.prototype.move=function(c){this.B()||(this.pa+=c,this.wa+=c)},b.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var c=this.pa;this.pa=this.wa,this.wa=c}isNaN(this.wa)&&this.Pa()}},b.prototype.Pa=function(){this.wa=this.pa=NaN},b.prototype.B=function(){return isNaN(this.pa)},b.prototype.$b=function(c){typeof c=="number"?this.B()?this.wa=this.pa=c:this.Mk(c):c.B()||(this.B()?(this.pa=c.pa,this.wa=c.wa):(this.pa>c.pa&&(this.pa=c.pa),this.wa<c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa()))},b.prototype.Mk=function(c){c<this.pa?this.pa=c:c>this.wa&&(this.wa=c)},b.prototype.contains=function(c){return typeof c=="number"?c>=this.pa&&c<=this.wa:c.pa>=this.pa&&c.wa<=this.wa},b.prototype.Fa=function(c){this.B()||c.B()?this.Pa():(this.pa<c.pa&&(this.pa=c.pa),this.wa>c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa())},b.prototype.X=function(c){this.B()||(this.pa-=c,this.wa+=c,this.wa<this.pa&&this.Pa())},b.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},b.prototype.EB=function(c,a){c>a?(this.pa=a,this.wa=c):(this.pa=c,this.wa=a)},b.prototype.Kt=function(c){return h.P.Sk(c,this.pa,this.wa)},b.prototype.S=function(){return this.wa-this.pa},b.prototype.tf=function(){return .5*(this.pa+this.wa)},b.prototype.Nb=function(c){return c==this||c instanceof b&&(!(!this.B()||!c.B())||this.pa==c.pa&&this.wa==c.wa)},b.prototype.dc=function(){return h.P.wj(h.P.wj())},b}();h.Oc=L}(X||(X={})),function(h){var L=new h.Oc,b=new h.Oc,c=function(){this.ne=null,this.pb=-1,this.tb=new h.zb,this.kA=55555555,this.Vv=this.Xv=!1,this.Vf=new h.Oc,this.Vf.EB(0,0)};h.AY=c;var a=function(){function n(o,u,p){this.g=o,this.Ik=NaN,this.HH=this.Mq=0,this.IH=NaN,this.ra=u,this.Pq=10*u,this.JH=this.KH=NaN,this.rg=!1,this.Fm=this.ht=this.Mo=this.Zs=this.Ys=-1,this.bA=p,this.NA=new c,this.SH=new c,h.P.truncate(3*o.gd/2)}return n.prototype.gG=function(o,u,p,f){o.ne=f===null?null:f[p[5*u]],o.Vv=o.ne!=null,o.Vv||((f=p[5*u+2])!==-1&&this.g.eW(p[5*u],p[5*f],o.tb),o.ne=o.tb,o.Vf.EB(o.tb.sa,o.tb.qa),o.Vf.wa+=this.ra,o.tb.lI(),o.Xv=o.tb.ma==o.tb.oa,o.Xv||(o.kA=(o.tb.qa-o.tb.sa)/(o.tb.ma-o.tb.oa)))},n.prototype.IO=function(o,u){var p=o.Br(u,this.ra,!0);return p!=0?p==2?this.Ly():this.zi():(o.$p(ns),o.Vr(Gr),u.$p(Ss),u.Vr(Eo),cr.na(this.Mq,this.Ik),ns.rb(Ss)&&this.Ik==ns.y?0>Gr.compare(Eo)?cr.N(Gr):cr.N(Eo):ns.rb(Eo)&&this.Ik==ns.y?0>Gr.compare(Ss)?cr.N(Gr):cr.N(Ss):Ss.rb(Gr)&&this.Ik==Ss.y?0>ns.compare(Eo)?cr.N(ns):cr.N(Eo):Gr.rb(Eo)&&this.Ik==Gr.y&&(0>ns.compare(Ss)?cr.N(ns):cr.N(Ss)),o.Me(cr.y,cr.x)<u.Me(cr.y,cr.x)?-1:1)},n.prototype.GO=function(o,u){if(o.tb.oa==u.tb.oa&&o.tb.sa==u.tb.sa)return o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa?this.bA?this.Ly():0:this.JE(o,u);if(o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa)return this.IE(o,u);var p=this.IE(o,u);return o=this.JE(o,u),0>p&&0>o?-1:0<p&&0<o?1:this.zi()},n.prototype.CO=function(o,u){if(o.qa>u.qa){if(u.qa>u.sa&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.sa)*(o.qa-o.sa)<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 1},n.prototype.DO=function(o,u){if(o.sa<u.sa){if(u.qa>u.sa&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.sa)*(o.sa-o.qa)<this.Pq&&u.xi(o.sa,o.oa,this.ra))return this.zi();return-1},n.prototype.EO=function(o,u){var p=new h.h;p.vc(u.xc(),u.ac()),p.cr(),p.normalize();var f=new h.h;f.vc(o.ac(),u.ac());var m=new h.h;m.vc(o.xc(),u.ac()),f=f.Sh(p),p=m.Sh(p),m=Math.abs(f);var w=Math.abs(p);if(m<w){if(m<this.Pq&&u.xi(o.sa,o.oa,this.ra))return this.zi()}else if(w<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 0>f&&0>p?-1:0<f&&0<p?1:this.zi()},n.prototype.HE=function(o,u){return o.oa==u.oa&&o.sa==u.sa?this.CO(o,u):o.ma==u.ma&&o.qa==u.qa?this.DO(o,u):this.EO(o,u)},n.prototype.FO=function(o,u){return o.ma==u.ma&&o.qa==u.qa&&o.oa==u.oa&&o.sa==u.sa?this.bA?this.Ly():0:this.zi()},n.prototype.IE=function(o,u){var p=1;if(o.tb.oa<u.tb.oa){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var m=o.sa-f.sa;u=u.kA*(o.oa-f.oa);var w=this.Pq;return m<u-w?-p:m>u+w?p:f.xi(o.sa,o.oa,this.ra)?this.zi():m<u?-p:p},n.prototype.JE=function(o,u){var p=1;if(u.tb.ma<o.tb.ma){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var m=o.qa-f.sa;u=u.kA*(o.ma-f.oa);var w=this.Pq;return m<u-w?-p:m>u+w?p:f.xi(o.qa,o.ma,this.ra)?this.zi():m<u?-p:p},n.prototype.Ly=function(){return this.rg=!0,this.Pi=new h.Nd(5,this.Mo,this.ht),-1},n.prototype.zi=function(){return this.rg=!0,this.bA?this.Pi=new h.Nd(4,this.Mo,this.ht):this.ht=this.Mo=this.Zs=this.Ys=-1,-1},n.prototype.HO=function(o,u,p,f){if(this.rg)return-1;var m=this.IH==this.Ik&&this.HH==this.Mq;if(m&&o==this.Ys)var w=this.JH;else w=NaN,this.Ys=-1;return m&&u==this.Zs?m=this.KH:(m=NaN,this.Zs=-1),p.ne.TI(L),f.ne.TI(b),L.wa<b.pa?-1:b.wa<L.pa?1:(this.IH=this.Ik,this.HH=this.Mq,isNaN(w)&&(this.Ys=o,this.JH=w=o=p.ne.Me(this.Ik,this.Mq)),isNaN(m)&&(this.Zs=u,this.KH=m=o=f.ne.Me(this.Ik,this.Mq)),Math.abs(w-m)<=this.ra?this.IO(p.ne,f.ne):w<m?-1:w>m?1:0)},n.prototype.Mr=function(){this.rg=!1},n.prototype.tm=function(){return this.Pi},n.prototype.UJ=function(o,u){this.Ik=o,this.Mq=u,this.ht=this.Mo=this.Zs=this.Ys=-1},n.prototype.compare=function(o,u,p){return this.rg?-1:(o=o.ka(p),this.Fm=p,this.LE(u,u,o,o))},n.prototype.LE=function(o,u,p,f){if(this.Mo==u)var m=this.NA;else this.Mo=u,m=this.NA,this.NA.pb=o,this.gG(m,u,this.g.ud.o,this.g.Te);if(w==null){this.ht=f;var w=this.SH;this.SH.pb=p,this.gG(w,f,this.g.ud.o,this.g.Te)}return m.Vv||w.Vv?this.HO(u,f,m,w):m.Vf.wa<w.Vf.pa?-1:w.Vf.wa<m.Vf.pa?1:(o=m.Xv?1:0,(o|=w.Xv?2:0)==0?this.GO(m,w):o==1?this.HE(m.tb,w.tb):o==2?-1*this.HE(w.tb,m.tb):this.FO(m.tb,w.tb))},n}();h.OC=a}(X||(X={})),function(h){var L=function(){function b(c,a){this.g=c,this.ra=a,this.rg=!1,this.Mo=-1,this.Vf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.ie=new h.zb,this.Fm=-1,this.vA=17976931348623157e292}return b.prototype.Mr=function(){this.rg=!1,this.vA=17976931348623157e292},b.prototype.Fh=function(c){this.Iq.N(c)},b.prototype.compare=function(c,a){return this.ME(a,c.ka(a))},b.prototype.ME=function(c,a){var n=this.g.cc(a)!=null;if(n||(this.g.fd(a,this.ie),this.Vf.EB(this.ie.sa,this.ie.qa)),n)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Vf.pa)return-1;if(this.Iq.x-this.ra>this.Vf.wa)return 1;if(this.ie.oa==this.ie.ma)return this.Fm=c,this.rg=!0,0;this.ie.lI(),n=this.ie.ac(),(a=new h.h).vc(this.ie.xc(),n),a.cr();var o=new h.h;return o.vc(this.Iq,n),n=a.Sh(o),(n/=a.length())<10*-this.ra?-1:n>10*this.ra?1:this.ie.ss(this.Iq,this.ra)&&((a=Math.abs(n))<this.vA&&(this.Fm=c,this.vA=a),this.rg=!0,a<.25*this.ra)?0:0>n?-1:1},b}();h.VL=L}(X||(X={})),function(h){function L(c,a,n,o){n=new Float64Array(c.subarray(n,o)),c.set(n,a)}var b=function(){function c(a){this.Pb=this.qk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Float64Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Cn=function(a){var n=new c(0);return n.o=new Float64Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Float64Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.AB=function(a){return c.Nr(this,a)},c.prototype.Bg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Bn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.wj(this.read(n));return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(n,n+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var w=0;w<p;w++)this.o[f+m+w]=a.o[n+u+w]}}},c.prototype.Nn=function(a,n,o,u,p,f,m){if(this.Pb)throw h.i.Hb();if(!p&&(1>f||u%f!=0))throw h.i.O();var w=this.size-m;if(w<u&&this.resize(this.size+u-w),L(this.o,a+u,a,a+(m-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f)for(p-=f,w=0;w<f;w++)this.o[a+m+w]=n.o[o+p+w]},c.prototype.Dz=function(a,n,o,u,p,f){if(this.Pb)throw h.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,L(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=n[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=n[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},c.prototype.Mn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,L(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();L(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,f){if(0>a||0>n||0>u||!p&&(0>=f||n%f!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,f);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-f,f==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/f);p<n;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},c.prototype.Fn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&L(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+n+f],this.o[a+n+f]=m}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},c.prototype.pC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.oC=function(a,n,o){if(0>a||0>n)throw h.i.O();if(n!=0){this.size<(n<<1)+a&&this.resize((n<<1)+a),n+=0;for(var u=0;u<n;u++)this.o[a]=o[u][0],this.o[a+1]=o[u][1],a+=2}},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.oB=function(a,n,o){if(0>a||0>n||this.size<(n>>1)+a)throw h.i.O();if(n!=0){n=0+n;for(var u=0;u<n;u++)o[u][0]=this.o[a],o[u][1]=this.o[a+1],a+=2}},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.qk=this.Pb=!0},c.prototype.Wd=function(a,n,o){Array.prototype.sort.call(this.o.subarray(a,n),o)},c.prototype.Vp=function(){return 1},c}();h.ce=b}(X||(X={})),function(h){function L(c,a,n,o){n=new Int32Array(c.subarray(n,o)),c.set(n,a)}h.jY=function(){this.random=1973};var b=function(){function c(a){this.Pb=this.qk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Int32Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Cn=function(a){var n=new c(0);return n.o=new Int32Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int32Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.AB=function(a){return c.Nr(this,a)},c.prototype.Bg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Bn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.Vh(this.read(n),a);return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(n,n+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var w=0;w<p;w++)this.o[f+m+w]=a.o[n+u+w]}}},c.prototype.Nn=function(a,n,o,u,p,f,m){if(this.Pb)throw h.i.Hb();if(!p&&(1>f||u%f!=0))throw h.i.O();if(L(this.o,a+u,a,a+(m-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f){p-=f;for(var w=0;w<f;w++)this.o[a+m+w]=n.o[o+p+w]}},c.prototype.Dz=function(a,n,o,u,p,f){if(this.Pb)throw h.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,L(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=n[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=n[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},c.prototype.Mn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,L(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();L(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,f){if(0>a||0>n||0>u||!p&&(0>=f||n%f!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,f);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-f,f==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/f);p<n;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},c.prototype.Fn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&L(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+n+f],this.o[a+n+f]=m}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},c.prototype.pC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.qk=this.Pb=!0},c.prototype.Wd=function(a,n,o){10>n-a?c.lG(this.o,a,n,o):c.kB(this.o,a,n-1,o)},c.prototype.Vp=function(){return 2},c.prototype.Gc=function(){return this.o[this.size-1]},c.prototype.Jf=function(){this.resize(this.size-1)},c.prototype.TW=function(a){this.o[this.size-1]=a},c.prototype.KV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},c.prototype.fF=function(a){for(var n=0,o=this.size;n<o;n++)if(this.o[n]==a)return n;return-1},c.prototype.bG=function(a){return 0<=this.fF(a)},c.lG=function(a,n,o,u){for(var p=n;p<o;p++){for(var f=a[p],m=p-1;m>=n&&0<u(a[m],f);)a[m+1]=a[m],m--;a[m+1]=f}},c.sx=function(a,n,o){var u=a[o];a[o]=a[n],a[n]=u},c.kB=function(a,n,o,u){if(!(n>=o))for(;;){if(9>o-n){c.lG(a,n,o+1,u);break}var p=a[n];c.sx(a,n,o);for(var f=n,m=n;m<o;m++)0>=u(a[m],p)&&(c.sx(a,f,m),f+=1);c.sx(a,f,o),f-n<o-f?(c.kB(a,n,f-1,u),n=f+1):(c.kB(a,f+1,o,u),o=f-1)}},c}();h.ja=b}(X||(X={})),function(h){function L(c,a,n,o){n=new Int8Array(c.subarray(n,o)),c.set(n,a)}var b=function(){function c(a){this.o=null;var n=a;2>n&&(n=2),this.o=new Int8Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Cn=function(a){var n=new c(0);return n.o=new Int8Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int8Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.AB=function(a){return c.Nr(this,a)},c.prototype.Bg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Bn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.Vh(this.read(n),a);return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(n,n+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var w=0;w<p;w++)this.o[f+m+w]=a.o[n+u+w]}}},c.prototype.Nn=function(a,n,o,u,p,f,m){if(this.Pb)throw h.i.Hb();if(!p&&(1>f||u%f!=0))throw h.i.O();if(L(this.o,a+u,a,a+(m-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f){p-=f;for(var w=0;w<f;w++)this.o[a+m+w]=n.o[o+p+w]}},c.prototype.Mn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,L(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.Dz=function(a,n,o,u,p,f){if(this.Pb)throw h.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,L(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=n[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=n[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();L(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,f){if(0>a||0>n||0>u||!p&&(0>=f||n%f!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,f);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-f,f==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/f);p<n;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},c.prototype.Fn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&L(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+n+f],this.o[a+n+f]=m}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},c.prototype.pC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.qk=this.Pb=!0},c.prototype.Wd=function(a,n,o){n=this.o.subarray(a,n),Array.prototype.sort.call(n,o),this.o.set(n,a)},c.prototype.tJ=function(a,n){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=n},c.prototype.EE=function(a,n){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~n},c.prototype.Vp=function(){return 1},c}();h.rn=b}(X||(X={})),function(h){h.Zc=function(){function L(){}return L.Or=function(b,c){return h.rn.rf(b,c)},L.En=function(b,c){return h.ce.rf(b,c)},L.jP=function(b,c,a){switch(b){case 1:b=h.ce.rf(c,a);break;case 2:b=h.ja.rf(c,a);break;case 4:b=h.rn.rf(c,a);break;default:throw h.i.Ra()}return b},L.SE=function(b,c){return L.jP(h.ua.Vp(b),c*h.ua.Wa(b),h.ua.te(b))},L.Qh=function(b,c){return h.ja.rf(b,c)},L.kI=function(b){var c,a=[];for(c=0;c<b;c++)a.push(null);return a},L}()}(X||(X={})),function(h){h.ha=function(L){L===void 0&&(L=0),this.u=L}}(X||(X={})),function(h){h.HL=function(){function L(){}return L.bind=function(b){h.Tc=b.PeDefs,h.qf=b.PeFactory,h.HC=b.PeVertcs,h.gj=b.PeCSTransformations,h.GC=b.PeGTTransformations,h.FL=b.PeGeogtran,h.EL=b.PeFactoryCodechange,h.FC=b.PeGCSExtent,h.Eg=b.PePCSInfo,h.GL=b.PeHorizon,h.DL=b.PeCoordsys,h.mp=b.PeGTlistExtended,h.mp.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Lx=b.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},L}(),h.qf=null,h.HC=null,h.DL=null,h.GL=null,h.Eg=null,h.mp=null,h.Lx=null,h.FC=null,h.EL=null,h.FL=null,h.Tc=null,h.GC=null,h.gj=null}(X||(X={})),function(h){var L=function(){function b(){}return b.Mb=function(c,a){return 0<=a?b.R(c):-b.R(c)},b.R=function(c){return 0>c?-c:c},b.vi=function(c){return 3552713678800501e-30>c},b.EC=function(c,a,n){return b.R(c-a)<=n*(1+(b.R(c)+b.R(a))/2)},b.$=function(c,a){return b.EC(c,a,3552713678800501e-30)},b.zL=function(c){return 3552713678800501e-30>=b.R(c)},b.Dd=function(c){return b.zL(c)},b}();h.s=L,h.F=function(){function b(){}return b.hp=function(c,a){var n=0;return(c=L.R(c))+(a=L.R(a))!=0&&(c>a?(n=a/c,n=c*Math.sqrt(1+n*n)):(n=c/a,n=a*Math.sqrt(1+n*n))),n},b.Yq=function(c,a,n,o,u){for(var p=[0,0,0],f=[0,0,0],m=0;2>=m;m++)a[m]-=c[m],n[m]-=a[m];n=p[1]*f[2]-p[2]*f[1],a=p[2]*f[0]-p[0]*f[2],p=p[0]*f[1]-p[1]*f[0],c=-1*(n*c[0]+a*c[1]+p*c[2]),o[0]=n,o[1]=a,o[2]=p,o[3]=c,f=b.qn(o),o[0]/=f,o[1]/=f,o[2]/=f,o[3]/=f,u!=0&&(f=L.Dd(p)?L.Dd(c)?L.Mb(1,a):-L.Mb(1,c):L.Mb(1,p),f*=L.Mb(1,u),o[0]*=f,o[1]*=f,o[2]*=f,o[3]*=f)},b.yx=function(c,a,n){n[0]=c[1]*a[2]-a[1]*c[2],n[1]=c[2]*a[0]-a[2]*c[0],n[2]=c[0]*a[1]-a[0]*c[1]},b.Ut=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},b.qn=function(c){return b.hp(b.hp(c[0],c[1]),c[2])},b.el=function(c,a,n,o,u,p,f,m){c=b.n(c,a,n);var w=Math.cos(n);p.u=(c+u)*w*Math.cos(o),f.u=(c+u)*w*Math.sin(o),m.u=(c*(1-a)+u)*Math.sin(n)},b.dO=function(c,a,n,o,u,p,f){var m=b.hp(a,n),w=1*Math.sqrt(1-c),x=w/1;if(L.$(m,0))p.u=0,u.u=L.Mb(1.570796326794897,o),f.u=L.R(o)-w;else{p.u=Math.atan2(n,a),n=Math.atan2(1*o,w*m),p=Math.cos(n);var E=Math.sin(n);a=w*c/(1-c),c*=1,n=Math.atan2(o+a*E*E*E,m-c*p*p*p),3.141592653589793<L.R(n)&&(n=L.Mb(3.141592653589793,n)-n),n=Math.atan(x*Math.tan(n)),E=Math.sin(n),p=Math.cos(n),u.u=Math.atan2(o+a*E*E*E,m-c*p*p*p),1.570796326794897<L.R(u.u)&&(u.u=L.Mb(3.141592653589793,u.u)-u.u),n=Math.atan(x*Math.tan(u.u)),E=Math.sin(n),p=Math.cos(n),f.u=(o-w*E)*Math.sin(u.u)+(m-1*p)*Math.cos(u.u)}},b.n=function(c,a,n){return n=Math.sin(n),c/Math.sqrt(1-a*n*n)},b.pt=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))},b.Sj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))},b.Tq=function(c,a){if(L.vi(c)||a==0||L.$(L.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=Math.sqrt(1-c),o=(1-n)/(1+n),u=o*o,p=o*u,f=o*p,m=o*f,w=o*m,x=o*w,E=1.572916666666667*p-3.2578125*m+4.295068359375*x;c=2.142578125*f-6.071484375*w,n=3.129296875*m-11.249837239583334*x;var T=4.775276692708333*w,A=7.958636765252976*x,P=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*p+.525390625*m-.2688395182291667*x-E+n-A+P*(2*(1.3125*u-1.71875*f+1.650146484375*w)-4*c+6*T+P*(4*E-12*n+24*A+P*(8*c-32*T+P*(16*n-80*A+P*(32*T+64*P*A))))))}for(n=1-c,o=c/2,p=(u=L.R(a))*b.av(c)/(1.570796326794897*n),f=9999,w=u,u=0;1e-16<f&&50>u;u++)x=b.w(c,w),m=w-(E=(m=(b.eG(w,c)-o*Math.sin(2*w)/x)/n-p)/(x=1/(x*x*x))),f=L.R(E),w=m;return 0<=a?w:-w},b.iW=function(c,a){return L.vi(a)?c:c*b.av(a)/1.570796326794897},b.ca=function(c){return 0>(c=b.jF(c,6.283185307179586))?c+6.283185307179586:3.141592653589793>L.R(c)||L.$(L.R(c),3.141592653589793)?c:c-6.283185307179586},b.jF=function(c,a){return c-Math.floor(c/a)*a},b.Ch=function(c,a){if(.006884661117170036>a){var n=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=n*n;return c/(1+a)*(1+.25*n+.015625*o+.00390625*n*o)*1.570796326794897}return c*b.av(a)},b.Xq=function(c,a){var n=L.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=L.R(b.jF(a,3.141592653589793)))?a:3.141592653589793-a,(L.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-c)*Math.tan(a)))*n},b.q=function(c,a,n){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,u=a*o,p=a*u,f=a*p,m=a*f,w=a*m,x=-.7291666666666666*u+.2278645833333333*f+.03987630208333334*w,E=.615234375*p-.21533203125*m,T=-.54140625*f+.20302734375*w,A=.48876953125*m,P=-.4488699776785715*w,F=Math.cos(2*n);return c/(1+a)*((1+.25*o+.015625*p+.00390625*m)*n+Math.sin(2*n)*(-1.5*a+.1875*u+.0234375*f+.00732421875*w-x+T-P+F*(2*(.9375*o-.234375*p-.03662109375*m)-4*E+6*A+F*(4*x-12*T+24*P+F*(8*E-32*A+F*(16*T-80*P+F*(32*A+64*F*P)))))))}return c*(b.eG(n,a)-.5*a*Math.sin(2*n)/b.w(a,n))},b.w=function(c,a){return a=Math.sin(a),Math.sqrt(1-c*a*a)},b.av=function(c){return L.EC(c,1,2220446049250313e-31)?1:1>c?b.Zw(0,1-c)-c/3*b.Ww(0,1-c):NaN},b.eG=function(c,a){var n=L.Mb(1,c);c=L.R(c);var o=Math.floor(c/1.570796326794897);if(1<a)a=c==0?0:NaN;else if(L.Dd(o))a=(c=b.sin(c))*b.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Ww(1-c*c,1-a*c*c);else{var u=h.P.truncate(o%2),p=b.av(a);0<u?a=p*(o+1)-(a=(c=Math.sin(1.570796326794897*(o+1)-c))*b.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Ww(1-c*c,1-a*c*c)):a=p*o+(a=(c=Math.sin(c-1.570796326794897*o))*b.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*b.Ww(1-c*c,1-a*c*c))}return a*n},b.sin=function(c){c=b.ca(c);var a=L.Mb(1,c);return c=L.R(c),L.$(c,3.141592653589793)?0:L.$(c,1.570796326794897)?1*a:Math.sin(c)*a},b.Ww=function(c,a){var n,o,u,p,f=c,m=a,w=1;for(a=0,c=1;o=((n=.2*(f+m+3*w))-f)/n,u=(n-m)/n,p=(n-w)/n,!(1e-4>L.R(o)&&1e-4>L.R(u)&&1e-4>L.R(p));)p=Math.sqrt(m),a+=c/((n=Math.sqrt(w))*(w+(p=Math.sqrt(f)*(p+n)+p*n))),c*=.25,f=.25*(f+p),m=.25*(m+p),w=.25*(w+p);return m=(f=o*u)-(w=p*p),3*a+c*(1+(w=f-6*w)*(.10227272727272728*w-.2142857142857143-.1730769230769231*p*(o=w+m+m))+p*(.1666666666666667*o+p*(-.4090909090909091*m+.1153846153846154*p*f)))/(n*Math.sqrt(n))},b.Zw=function(c,a){for(var n,o,u,p,f=1;o=2-((n=(c+a+f)/3)+c)/n,u=2-(n+a)/n,p=2-(n+f)/n,!(1e-4>L.R(o)&&1e-4>L.R(u)&&1e-4>L.R(p));f=.25*(f+n))n=Math.sqrt(a),o=Math.sqrt(f),c=.25*(c+(n=Math.sqrt(c)*(n+o)+n*o)),a=.25*(a+n);return(1+(.04166666666666666*(c=o*u-p*p)-.1-.06818181818181818*(a=o*u*p))*c+.07142857142857142*a)/Math.sqrt(n)},b.Sw=function(c,a){if(L.vi(c)||a==0||L.$(L.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=c*c,o=c*n,u=c*o,p=c*u,f=c*p,m=c*f,w=-(.02708333333333333*o+.03430059523809524*u+.03149181547619048*p+.02634359154541446*f+.02156896735835538*m),x=.007669890873015873*u+.01299603174603175*p+.0148051353064374*f+.01454454953803912*m,E=-(.002275545634920635*p+.004830845032667949*f+.006558395368616723*m),T=.0006957236677288761*f+.001775193002406544*m,A=-.000217324089394402*m,P=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*n+.09375*o+.04878472222222222*u+.02916666666666667*p+.01938905423280423*f+.01388255931712963*m)-w+E-A+P*(2*(.1041666666666667*n+.0875*o+.06050347222222222*u+.04151785714285714*p+.02958958540013228*f+.02203667534722222*m)-4*x+6*T+P*(4*w-12*E+24*A+P*(8*x-32*T+P*(16*E-80*A+P*(32*T+64*P*A))))))}return a==0||L.$(L.R(a),1.570796326794897)?n=a:(u=(o=Math.sqrt(c))*Math.sin(a),n=Math.tan(.7853981633974483+a/2)*Math.pow((1-u)/(1+u),o/2),n=2*Math.atan(n)-1.570796326794897),n},b.sO=function(c,a){if(L.vi(c)||a==0||L.$(L.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=c*(T=c*(E=c*(P=c*c))),o=c*(A=c*n),u=.05833333333333333*E+.07232142857142858*T+.05634300595238095*n+.0355325796406526*A+.020235546186067*o,p=.02653149801587302*T+.04379960317460317*n+.0429211791776896*A+.03255384637546096*o,f=.01294022817460318*n+.02668104344536636*A+.03155651254609588*o,m=.00659454790965208*A+.0163075268674227*o,w=.003463473736911237*o,x=Math.cos(2*a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*P+.08333333333333333*E+.03611111111111111*T+.01875*n+.01195601851851852*A+.008863673941798942*o-u+f-w+x*(2*(.1458333333333333*P+.1208333333333333*E+.07039930555555556*T+.03616071428571429*n+.01839451058201058*A+.01017113095238095*o)-4*p+6*m+x*(4*u-12*f+24*w+x*(8*p-32*m+x*(16*f-80*w+x*(32*m+64*x*w))))))}var E=Math.sqrt(c),T=E/2,A=Math.tan(.7853981633974483+a/2);c=0,u=1;for(var P=a;u!=0;P=o)n=E*Math.sin(P),o=A*Math.pow((1+n)/(1-n),T),o=2*Math.atan(o)-1.570796326794897,c++,(L.$(o,P)||3e4<c)&&(u=0);return P},b}()}(X||(X={})),function(h){var L=function(){function b(c){this.wl=this.Ws=null,this.Kv=!1,this.AA=this.BA=0,this.BH=new h.h,this.RH=new h.h,this.EA=!1,this.xq=new h.l,this.qH=this.uw=0,this.vw=null,this.Bl=!1,this.Fo=null,this.Xz=0,this.Re=c,this.Cs=h.Ab.zv(this.Re,0,!0),this.BH.Sc(),this.RH.Sc(),this.LH=NaN;var a=c.getCode();0<a?(this.Lk=a,h.qf.getCode(c)):this.Lk=h.qf.getCode(c),0>this.Lk&&(this.Lk=0);var n=this.Re.getType();if(this.dH=n==h.Tc.PE_TYPE_PROJCS?2:1,n==h.Tc.PE_TYPE_PROJCS&&!c.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");a=n==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),n!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(a),this.Fo=c.getUnit(),this.LH=a.getPrimem().getLongitude(),this.qH=c=a.getUnit().getUnitFactor(),c=Math.PI/(180*c),1e-10>Math.abs(c-1)&&(c=1),this.AA=c,(n&h.Tc.PE_TYPE_PROJCS)!=0?(a=this.Re,this.BA=1/a.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=h.Eg.generate(a,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=h.Ab.kN(this.vw.getCentralMeridian(),this.AA)):(this.EA=this.Bl=!0,this.BA=0,n=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*n,this.Xz=0),this.Bl&&(this.wx(),this.xK(),this.fY(),this.wK(),this.dY(),this.eY())}return b.prototype.cs=function(){return this.Lk},b.prototype.lk=function(){return this.vw},b.Ky=function(c,a){return c==a||c!=null&&a!=null&&c.Lk==0&&a.Lk==0&&c.Cs===a.Cs},b.prototype.Xc=function(){return this.Bl},b.prototype.ih=function(c){c.L(this.to)},b.prototype.rv=function(){return this.to.v},b.prototype.qv=function(){return this.to.C},b.prototype.AR=function(c){c.L(this.ww)},b.prototype.dY=function(){var c=this.Re.getType();if(c==h.Tc.PE_TYPE_PROJCS){c=this.Re;var a=this.lk().getCentralMeridian(),n=c.getGeogcs();if(n==null)throw h.i.ga("internal error");a=[[a+(n=1/n.getUnit().getUnitFactor()*Math.PI),0]],h.gj.geogToProj(c,1,a),a=a[0][0],n=c.getParameters()[h.Tc.PE_PARM_X0].getValue();var o=this.ol();c=new h.l,o.A(c),a=(o=Math.abs(a-n))+n,n=-1*o+n,o=c.H,c=c.G;var u=new h.l;u.L(n,c,a,o),this.to==null&&(this.to=u)}else{if(c!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");n=1/this.Re.getUnit().getUnitFactor()*Math.PI,(c=new h.l).L(-n,-n/2,n,n/2),this.to==null&&(this.to=c)}},b.prototype.eY=function(){var c=this.Re.getType();if(c==h.Tc.PE_TYPE_PROJCS){var a=this.Re;if(c=this.lk().getCentralMeridian(),(a=a.getGeogcs())==null)throw h.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var n=this.Xr(),o=new h.l;n.A(o),(n=new h.l).L(c-a,o.G,c+a,o.H),this.ww==null&&(this.ww=n)}else{if(c!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");a=1/this.Re.getUnit().getUnitFactor()*Math.PI,(c=new h.l).L(-a,-a/2,a,a/2),this.ww==null&&(this.ww=c)}},b.prototype.bf=function(){return this.AA},b.prototype.rm=function(){return this.BA},b.prototype.Xr=function(){if(this.Bl)return this.wl;var c=this.wl;return c!=null?c:(this.wx(),this.wl)},b.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.SG)},b.prototype.wx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var c=this.Re,a=c.getGeogcs(),n=c.horizonGcsGenerate();if(n!=null){var o=n[0].getNump(),u=n[0].getKind();c=0<n[0].getInclusive();var p=this.bf(),f=90*p,m=360*p,w=370*p,x=180*p*h.Tc.PE_HORIZON_DELTA/Math.PI,E=new h.l,T=null;if(1<o){for(var A=1;A<o;A++)if(n[A].getKind()==h.Tc.PE_HORIZON_LINE){T==null&&(T=new h.Ua);var P=n[A].getCoord();T.rx(P[0][0],P[0][1]),T.Aj(P[1][0],P[1][1])}}if(u==h.Tc.PE_HORIZON_RECT)n=n[0].getCoord(),E.L(n[0][0],n[0][1]),E.$b(n[1][0],n[1][1]),Math.abs(E.H-f)<1e-7*x&&(E.H=f),Math.abs(E.G+f)<1e-7*x&&(E.G=-f),E.S()>w&&(n=-400*p,E.L(n,E.G,n+5*m,E.H)),n=new h.Hh(E),this.wl==null&&(this.wl=n,this.Kv=c);else{if(w=new h.Ea,m=this.lk().isGcsHorizonMultiOverlap(),E=h.iu.WE(a,h.ju.Integer64),m){for(w=new h.aL,x=h.Ih.local().W(w,E,null),A=0;A<o;A++)if(n[A].getKind()==h.Tc.PE_HORIZON_POLY){for(a=n[A].getSize(),p=n[A].getCoord(),u=[],f=0;f<a;f++)u[f]=h.h.construct(p[f][0],p[f][1]);n[A].getInclusive(),m&&((p=new h.Ea).$k(u,a-1),w.RX(p),x.qe())}w=x.next()}else for(A=0;A<o;A++)if(n[A].getKind()==h.Tc.PE_HORIZON_POLY){for(a=n[A].getSize(),p=n[A].getCoord(),m=[],f=0;f<a;f++)m[f]=h.h.construct(p[f][0],p[f][1]);n[A].getInclusive(),w.$k(m,a-1)}c?h.Xk.local().xn(w,E,1):h.lp.local().xn(w,E,1),h.fj.local().xn(w,E,1),this.wl==null&&(this.wl=w,this.Kv=c,this.SG=T)}}}},b.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},b.prototype.xK=function(){if(this.dH==2){var c=this.Re.horizonPcsGenerate();if(c!=null){var a=c[0].getKind();c[0].getInclusive();var n=c[0].getNump(),o=!1;if(a==h.Tc.PE_HORIZON_RECT)c=c[0].getCoord(),(n=new h.l).L(c[0][0],c[0][1]),n.$b(c[1][0],c[1][1]),c=new h.Hh(n);else{for(a=-1,o=0;o<n;o++)c[o].getKind()==h.Tc.PE_HORIZON_POLY&&(a=o);for(o=c[a].getSize()-1,c=c[a].getCoord(),n=[],a=0;a<o;a++)n[a]=h.h.construct(c[a][0],c[a][1]);c=a=new h.Ea,a.$k(n,o),o=!0}this.lk().isDensificationNeeded()&&(n=1e5*this.rm(),c=h.Zl.local().W(c,n,null)),o&&(o=new h.Hh,c.dn(o),c.He(),c.Rb(),c.jR(),h.Xk.local().xn(c,null,1)),this.Ws==null&&(this.Ws=c)}}},b.prototype.ol=function(){if(this.Bl)return this.Ws;var c=this.Ws;return c!=null?c:(this.xK(),this.Ws)},b.prototype.fY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var c=90*this.bf();c=[[0,c],[0,-c]],h.gj.geogToProj(this.Re,2,c);var a=this.lk(),n=a.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.EA||(n&&this.BH.na(c[0][0],c[0][1]),a&&this.RH.na(c[1][0],c[1][1]))}this.EA=!0},b.prototype.wK=function(){if(this.dH==1){var c=400*this.bf();this.xq.L(-c,-c,c,c)}else c=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),c=h.l.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.xq.B()&&this.xq.L(c)},b.prototype.bR=function(c){this.Bl&&c.L(this.xq),this.xq.B()&&this.wK(),c.L(this.xq)},b.prototype.Wp=function(){return this.LH},b.prototype.Bi=function(){return this.Xz},b.prototype.Id=function(){return this.Fo},b.prototype.Zr=function(){return this.qH},b}();h.IC=L}(X||(X={})),function(h){var L=function(){function b(c){this.CT=c,this.Cs=h.Ab.zv(c,0,!0);var a=c.getCode();this.us=0<a?a:h.qf.getCode(c),0>this.us&&(this.us=0),this.Fo=a=this.CT.getUnit(),this.CH=1/a.getUnitFactor(),h.qf.getCode(c)}return b.Ky=function(c,a){return c==a||c!=null&&a!=null&&c.us==0&&a.us==0&&c.Cs===a.Cs},b.prototype.cs=function(){return this.us},b}();h.JL=L}(X||(X={})),function(h){h.$g=function(){function L(){}return L.ub=function(b,c,a,n,o,u,p,f){if(u!=null||p!=null||f!=null){n=h.F.ca(n),c=h.F.ca(c),a=h.F.ca(a),o=h.F.ca(o),1.570796326794897<h.s.R(a)&&(a=h.s.Mb(3.141592653589793,a)-a,c=h.F.ca(c+3.141592653589793)),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,n=h.F.ca(n+3.141592653589793));var m=h.F.ca(n-c);if(h.s.$(a,o)&&(h.s.$(c,n)||h.s.$(h.s.R(a),1.570796326794897)))u!=null&&(u.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(a,-o)){if(h.s.$(h.s.R(a),1.570796326794897))return u!=null&&(u.u=3.141592653589793*b),p!=null&&(p.u=0<a?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<a?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));if(h.s.$(h.s.R(m),3.141592653589793))return u!=null&&(u.u=3.141592653589793*b),p!=null&&(p.u=0),void(f!=null&&(f.u=0))}var w=h.s.R(a)==1.570796326794897?0:Math.cos(a),x=Math.sin(a),E=h.s.R(o)==1.570796326794897?0:Math.cos(o),T=Math.sin(o),A=h.s.R(m)==1.570796326794897?0:Math.cos(m),P=h.s.R(m)==3.141592653589793?0:Math.sin(m);if(u!=null){var F=Math.sin((o-a)/2);m=Math.sin(m/2),u.u=2*Math.asin(Math.sqrt(F*F+w*E*m*m))*b}p!=null&&(p.u=h.s.$(h.s.R(a),1.570796326794897)?0>a?n:h.F.ca(3.141592653589793-n):Math.atan2(E*P,w*T-x*E*A)),f!=null&&(h.s.$(h.s.R(o),1.570796326794897)?f.u=0>o?c:h.F.ca(3.141592653589793-c):(f.u=Math.atan2(w*P,T*w*A-E*x),f.u=h.F.ca(f.u+3.141592653589793)))}}},L.sf=function(b,c,a,n,o,u,p){if(u!=null||p!=null){c=h.F.ca(c),a=h.F.ca(a),1.570796326794897<h.s.R(a)&&(a=h.s.Mb(3.141592653589793,a)-a,c=h.F.ca(c+3.141592653589793)),h.s.$(h.s.R(a),1.570796326794897)&&(c=0),o=h.F.ca(o);var f=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),m=h.s.$(h.s.R(o),3.141592653589793)?0:Math.sin(o),w=h.s.$(h.s.R(a),1.570796326794897)?0:Math.cos(a),x=Math.sin(a);b=n/b,n=h.s.$(h.s.R(b),1.570796326794897)?0:Math.cos(b);var E=h.s.$(h.s.R(b),3.141592653589793)?0:Math.sin(b),T=Math.asin(x*n+w*E*f);p!=null&&(p.u=T),u!=null&&(u.u=h.s.$(h.s.R(T),1.570796326794897)?h.s.$(a,-T)?0>T?o:h.F.ca(3.141592653589793-o):c:h.s.$(h.s.R(a),1.570796326794897)&&h.s.$(b,3.141592653589793)?0>a?o:h.F.ca(3.141592653589793-o):h.F.ca(c+Math.atan2(E*m,w*n-x*E*f)))}},L}()}(X||(X={})),function(h){h.Yk=function(){function L(){}return L.ub=function(b,c,a,n,o,u,p,f,m){var w=new h.ha(0),x=new h.ha(0),E=[0,0,0],T=[0,0,0],A=[0,0,0],P=new h.ha(0),F=new h.ha(0),j=new h.ha(0),H=new h.ha(0),W=new h.ha(0);if(p!=null||f!=null||m!=null)if(h.s.vi(c))h.$g.ub(b,a,n,o,u,p,f,m);else{o=h.F.ca(o),a=h.F.ca(a);var G=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.$(a,o)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(b,c)),f!=null&&(f.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(m!=null&&(m.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(G),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(b,c)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897))&&(h.s.$(h.s.R(n),1.570796326794897)?a=o:o=a);var ee=0;if(0>G){ee=1;var ae=a;a=o,o=ae,ae=n,n=u,u=ae}G=h.F.pt(c,n);var le=h.F.pt(c,u);f==null&&m==null||(h.$g.ub(b,a,G,o,le,null,w,x),w=Math.atan2(Math.sin(w.u)*Math.cos(n-G),Math.cos(w.u)),x=Math.atan2(Math.sin(x.u)*Math.cos(u-le),Math.cos(x.u)),ee!=0&&(ae=w,w=x,x=ae),f!=null&&(f.u=w),m!=null&&(m.u=x)),p!=null&&(h.F.el(1,c,n,a,0,j,H,W),E[0]=j.u,E[1]=H.u,E[2]=W.u,h.F.el(1,c,u,o,0,j,H,W),T[0]=j.u,T[1]=H.u,T[2]=W.u,A[0]=E[1]*T[2]-T[1]*E[2],A[1]=-(E[0]*T[2]-T[0]*E[2]),A[2]=E[0]*T[1]-T[0]*E[1],c=1-h.F.w(c,h.F.Xq(c,h.F.Sj(c,Math.acos(A[2]/Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]))))),c*=2-c,f=Math.atan2(-A[1],-A[0]),A=h.F.ca(f-1.570796326794897),f=h.F.ca(f+1.570796326794897),A=h.s.R(h.F.ca(a-A))<=h.s.R(h.F.ca(a-f))?A:f,h.$g.ub(1,A,0,a,G,P,null,null),h.$g.ub(1,A,0,o,le,F,null,null),3.141592653589793<P.u+F.u&&(A=h.F.ca(A+3.141592653589793),h.$g.ub(1,A,0,a,G,P,null,null),h.$g.ub(1,A,0,o,le,F,null,null)),P.u*=h.s.Mb(1,n),F.u*=h.s.Mb(1,u),P.u=h.F.Sj(c,P.u),F.u=h.F.Sj(c,F.u),a=h.F.q(b,c,P.u),b=h.F.q(b,c,F.u),p.u=h.s.R(b-a))}}},L.sf=function(b,c,a,n,o,u,p,f){var m=0,w=new h.ha(0),x=new h.ha(0),E=[0,0,0],T=[0,0,0],A=new h.ha(0),P=new h.ha(0),F=new h.ha(0);if(p!=null||f!=null)if(h.s.vi(c))h.$g.sf(b,a,n,o,u,p,f);else if(h.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=n);else if(u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),a=h.F.ca(a),n=h.F.ca(n),1.570796326794897<h.s.R(n)&&(a=h.F.ca(a+3.141592653589793),n=h.s.Mb(3.141592653589793,n)-n),h.s.$(h.s.R(n),1.570796326794897)&&(a=0),h.s.Dd(n)){var j=h.s.R(1.570796326794897-h.s.R(u));j=h.F.Sj(c,j),j=1-h.F.w(c,h.F.Xq(c,j)),j*=2-j,b=o/h.F.Ch(b,j)*1.570796326794897,b=h.F.Tq(j,b),b=h.F.pt(j,b),h.$g.sf(1,a,n,b,u,p,w),f!=null&&(m=w.u),f!=null&&(f.u=h.F.Sj(c,m))}else if(h.s.$(h.s.R(n),1.570796326794897))w=2*(m=h.F.Ch(b,c)),u=0<(b=h.s.Mb(1.570796326794897,n))?h.F.ca(3.141592653589793-u):u,n=m-o,h.s.R(n)<=m?p!=null&&(p.u=u):(n=Math.floor(o/w),h.P.truncate(n%2)==0?(p!=null&&(p.u=u),o-=n*w):(p!=null&&(p.u=h.F.ca(u+3.141592653589793)),o=(n+1)*w-o),n=m-o),f!=null&&(f.u=h.F.Tq(c,n/m*b));else{j=h.F.pt(c,n),u=Math.atan2(Math.sin(u),Math.cos(u)*Math.cos(n-j));var H=h.P.truncate(h.s.Mb(1,j))*(1.570796326794897>=h.s.R(u)?1:-1);u=h.F.ca(a+Math.atan(Math.tan(u)*-Math.sin(j))),h.$g.ub(b,u,0,a,j,null,x,null),j=h.s.R(1.570796326794897-h.s.R(x.u)),j=h.F.Sj(c,j),j=1-h.F.w(c,h.F.Xq(c,j)),j*=2-j,h.F.el(1,c,0,u,0,A,P,F),E[0]=A.u,E[1]=P.u,E[2]=F.u,h.F.el(1,c,n,a,0,A,P,F),T[0]=A.u,T[1]=P.u,T[2]=F.u,n=Math.acos((E[0]*T[0]+E[1]*T[1]+E[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),n=h.F.Sj(j,n),o=0<(n=h.F.q(b,j,n)+o*H)?x.u:h.F.ca(x.u+3.141592653589793),b=h.s.R(n)/h.F.Ch(b,j)*1.570796326794897,b=h.F.Tq(j,b),b=h.F.pt(j,b),h.$g.sf(1,u,0,b,o,p,w),f!=null&&(m=w.u),f!=null&&(f.u=h.F.Sj(c,m))}},L}()}(X||(X={})),function(h){h.eu=function(){function L(){}return L.ub=function(b,c,a,n,o,u,p,f,m){var w=0,x=0,E=0;if(p!=null||f!=null||m!=null)if(h.s.vi(c))h.$g.ub(b,a,n,o,u,p,f,m);else{var T=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.Dd(T)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(b,c)),f!=null&&(f.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(m!=null&&(m.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(T),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(b,c)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else if(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897)||h.s.Dd(T)||h.s.$(h.s.R(T),3.141592653589793))return void h.Yk.ub(b,c,a,n,o,u,p,f,m);var A=1-Math.sqrt(1-c),P=c/(1-c),F=b*(1-A);b=h.F.Xq(c,n);var j=h.F.Xq(c,u);c=h.s.R(b)==1.570796326794897?0:Math.cos(b);var H=Math.sin(b),W=h.s.R(j)==1.570796326794897?0:Math.cos(j),G=Math.sin(j),ee=T,ae=Math.cos(ee),le=Math.sin(ee),ie=1,be=0;do{var Ie=ee,ze=Math.sqrt(Math.pow(W*le,2)+Math.pow(c*G-H*W*ae,2)),Fe=H*G+c*W*ae,Oe=Math.atan2(ze,Fe);if(ze==0){ie=0;break}var Ye=c*W*le/ze;if(w=Math.cos(Math.asin(Ye)),x=Fe-2*H*G/(w*=w),1<h.s.R(x)&&(x=h.s.Mb(1,x)),ee=T+(1-(ee=A/16*w*(4+A*(4-3*w))))*A*Ye*(Oe+ee*ze*(x+ee*Fe*(2*(E=x*x)-1))),ae=Math.cos(ee),le=Math.sin(ee),be++,3.141592653589793<h.s.R(ee)&&30<be){ie=0;break}}while(5e3>=be&&!h.s.$(Ie,ee));if(ie!=0)A=(P*=w)*(256+P*(P*(74-47*P)-128))/1024,p!=null&&(p.u=F*(1+P*(4096+P*(P*(320-175*P)-768))/16384)*(Oe-A*ze*(x+A/4*(Fe*(2*E-1)-A/6*x*(4*ze*ze-3)*(4*E-3))))),f!=null&&(f.u=h.s.$(h.s.R(n),1.570796326794897)?0>n?o:h.F.ca(3.141592653589793-o):Math.atan2(W*le,c*G-H*W*ae)),m!=null&&(h.s.$(h.s.R(u),1.570796326794897)?m.u=0>u?a:h.F.ca(3.141592653589793-a):(m.u=Math.atan2(c*le,c*G*ae-H*W),m.u=h.F.ca(m.u+3.141592653589793)));else{ee=h.s.Mb(3.141592653589793,T),Fe=H*G-c*W,Oe=Math.acos(Fe),ze=Math.sin(Oe),w=1,be=Ye=0;do E=Ye,ae=1-.25*(Ye=A*(w*=w)*(1+A+A*A))+.1875*(x=A*A*(ae=w*w)*(1+2.25*A))-.1953125*(ie=A*A*A*ae*w),Ye=.25*Ye-.25*x+.29296875*ie,le=.03125*x-.05859375*ie,ie*=.00651041666666667,x=Fe-2*H*G/w,1<h.s.R(x)&&(x=h.s.Mb(1,x)),w=Math.acos(x),Fe=Math.cos(2*w),Ie=Math.cos(3*w),le=(Ye=h.s.$(n,-u)?h.F.ca(3.141592653589793-T)/(3.141592653589793*A*ae):h.F.ca(ee-T)/(A*(ae*Oe+Ye*ze*x+le*Math.sin(2*Oe)*Fe+ie*Math.sin(3*Oe)*Ie)))*ze/(c*W),ee=1.570796326794897<h.s.R(T)?h.s.Mb(3.141592653589793,le)-Math.asin(le):Math.asin(le),ae=Math.cos(ee),ze=Math.sqrt(Math.pow(W*le,2)+Math.pow(c*G-H*W*ae,2)),Oe=3.141592653589793-Math.asin(h.s.R(ze)),Fe=Math.cos(Oe),w=Math.cos(Math.asin(Ye)),be++;while(70>=be&&!h.s.$(E,Ye));p!=null&&(ae=1+(P*=w*=w)*(4096+P*(P*(320-175*P)-768))/16384,h.s.$(n,-u)?p.u=3.141592653589793*F*ae:(x=Fe-2*H*G/w,w=Math.acos(x),Fe=Math.cos(2*w),Ie=Math.cos(3*w),p.u=F*(ae*Oe+P*(P*(128+P*(35*P-60))-512)/2048*ze*x+P*(5*P-4)/6144*P*P*Math.sin(2*Oe)*Fe+ie*Math.sin(3*Oe)*Ie+-762939453125e-16*P*P*P*P*Math.sin(4*Oe)*Math.cos(4*w)))),f!=null&&(h.s.Dd(n)&&h.s.Dd(u)?(w=Math.sqrt(1-Ye*Ye),f.u=Math.acos(w),0>T&&(f.u*=-1)):h.s.$(h.s.R(n),1.570796326794897)?f.u=0>n?o:h.F.ca(3.141592653589793-o):(p=Ye/c,F=Math.sqrt(1-p*p),0>c*G-H*W*Math.cos(ee)&&(F*=-1),f.u=Math.atan2(p,F),h.s.$(n,-u)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(n))&&(0<n&&1.570796326794897>h.s.R(f.u)||0>n&&1.570796326794897<h.s.R(f.u))&&(f.u=h.s.Mb(3.141592653589793,f.u)-f.u))),m!=null&&(h.s.Dd(n)&&h.s.Dd(u)?(w=Math.sqrt(1-Ye*Ye),m.u=Math.acos(w),0<=T&&(m.u*=-1)):h.s.$(h.s.R(u),1.570796326794897)?m.u=0>u?a:h.F.ca(3.141592653589793-a):(T=Ye/W,p=Math.sqrt(1-T*T),F=Math.sin(ee/2),0>Math.sin(j-b)-2*c*G*F*F&&(p*=-1),m.u=Math.atan2(T,p),m.u=h.F.ca(m.u+3.141592653589793),h.s.$(n,-u)&&!h.s.Dd(n)&&!h.s.$(h.s.R(n),1.570796326794897)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(n))&&(f!=null?F=f.u:(p=Ye/c,F=Math.sqrt(1-p*p),0>c*G-H*W*Math.cos(ee)&&(F*=-1),F=Math.atan2(p,F),h.s.$(n,-u)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(n))&&(0<n&&1.570796326794897>h.s.R(F)||0>n&&1.570796326794897<h.s.R(F))&&(F=h.s.Mb(3.141592653589793,F)-F)),1.570796326794897>=h.s.R(F)&&1.570796326794897<h.s.R(m.u)||1.570796326794897<=h.s.R(F)&&1.570796326794897>h.s.R(m.u))&&(m.u=-1*h.F.ca(m.u+3.141592653589793))))}}}},L.sf=function(b,c,a,n,o,u,p,f){if(p!=null||f!=null)if(h.s.vi(c))h.$g.sf(b,a,n,o,u,p,f);else if(u=h.F.ca(u),h.s.$(h.s.R(n),1.570796326794897)||h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))h.Yk.sf(b,c,a,n,o,u,p,f);else{var m=h.s.R(u)==1.570796326794897?0:Math.cos(u),w=h.s.R(u)==3.141592653589793?0:Math.sin(u);h.s.$(h.s.R(n),1.570796326794897)&&(a=0),u=1-Math.sqrt(1-c);var x=h.F.Xq(c,n);n=h.s.R(x)==1.570796326794897?0:Math.cos(x);var E=Math.sin(x);x=Math.atan2(Math.tan(x),m);var T=n*w,A=T*T,P=1-A,F=c/(1-c)*P,j=(c=F*(256+F*(F*(74-47*F)-128))/1024)/4,H=c/6,W=o/(b*(1-u)*(1+F*(4096+F*(F*(320-175*F)-768))/16384)),G=W;do{var ee=G;o=h.s.R(G)==1.570796326794897?0:Math.cos(G);var ae=(F=h.s.R(G)==3.141592653589793?0:Math.sin(G))*F;G=c*F*((b=Math.cos(2*x+G))+j*(o*(2*(G=b*b)-1)-H*b*(4*ae-3)*(4*G-3)))+W}while(!h.s.$(ee,G));o=h.s.R(G)==1.570796326794897?0:Math.cos(G),F=h.s.R(G)==3.141592653589793?0:Math.sin(G),p!=null&&(w=Math.atan2(F*w,n*o-E*F*m),P=u/16*P*(4+u*(4-3*P)),b=Math.cos(2*x+G),p.u=h.F.ca(a+(w-(1-P)*u*T*(G+P*F*(b+P*o*(2*b*b-1)))))),f!=null&&(P=E*F-n*o*m,P=(1-u)*Math.sqrt(A+P*P),f.u=Math.atan2(E*o+n*F*m,P))}},L}()}(X||(X={})),function(h){h.JC=function(){function L(){}return L.ub=function(b,c,a,n,o,u,p,f,m){var w=h.F.ca(o-a),x=h.s.$(h.s.R(n),1.570796326794897),E=h.s.$(h.s.R(u),1.570796326794897);if(h.s.$(n,u)&&(h.s.Dd(w)||x))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(h.s.vi(c)){var T=Math.sin(n),A=Math.sin(u);T=Math.sqrt((1+T)/(1-T)),A=Math.sqrt((1+A)/(1-A)),T=Math.log(A)-Math.log(T),T=Math.atan2(w,T),p!=null&&(p.u=h.s.$(n,u)?h.s.R(b*Math.cos(n)*w):h.s.R((b*u-b*n)/Math.cos(T)))}else A=h.F.Sw(c,u),T=Math.sin(h.F.Sw(c,n)),A=Math.sin(A),T=Math.sqrt((1+T)/(1-T)),A=Math.sqrt((1+A)/(1-A)),T=Math.log(A)-Math.log(T),T=Math.atan2(w,T),p!=null&&(h.s.$(n,u)?p.u=h.s.R(b*w*Math.cos(n)/h.F.w(c,n)):(w=h.F.q(b,c,n),b=h.F.q(b,c,u),p.u=h.s.R((b-w)/Math.cos(T))));f==null&&m==null||(p=h.F.ca(T+3.141592653589793),x&&E||!x&&!E||(x?T=0>n?o:h.F.ca(3.141592653589793-o):E&&(p=0>u?a:h.F.ca(3.141592653589793-a))),f!=null&&(f.u=T),m!=null&&(m.u=p))}},L.sf=function(b,c,a,n,o,u,p,f){u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),h.s.vi(c)?h.s.$(h.s.R(n),1.570796326794897)?(a=0>n?u:h.F.ca(3.141592653589793-u),3.141592653589793>=(u=o/b%6.283185307179586)?b=n-h.s.Mb(u,n):(a=h.F.ca(a+3.141592653589793),b=-n+h.s.Mb(u-3.141592653589793,n))):h.s.$(h.s.R(u),1.570796326794897)?(a=h.F.ca(a+h.s.Mb(o,u)/(b*Math.cos(n))),b=n):(b=n+o*Math.cos(u)/b,1.570796326794897<h.s.R(b)&&(b=1.570796326794897),h.s.$(h.s.R(b),1.570796326794897)&&(h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))||(1.570796316258184<h.s.R(b)&&(b=h.s.Mb(1.570796316258184,b)),c=Math.sin(n),n=Math.sin(b),c=Math.sqrt((1+c)/(1-c)),n=Math.sqrt((1+n)/(1-n)),c=Math.log(n)-Math.log(c),a=h.F.ca(a+Math.tan(u)*c))):h.s.$(h.s.R(n),1.570796326794897)?(a=0>n?u:h.F.ca(3.141592653589793-u),u=o/h.F.iW(b,c),3.141592653589793>=(u%=6.283185307179586)?b=n-h.s.Mb(u,n):(a=h.F.ca(a+3.141592653589793),b=-n+h.s.Mb(u-3.141592653589793,n)),b=h.F.Tq(c,b)):h.s.$(h.s.R(u),1.570796326794897)?(a=h.F.ca(a+h.s.Mb(o,u)*h.F.w(c,n)/(b*Math.cos(n))),b=n):(b=1.570796326794897*(o*Math.cos(u)+h.F.q(b,c,n))/h.F.Ch(b,c),1.570796326794897<h.s.R(b)&&(b=h.s.Mb(1.570796326794897,b)),b=h.F.Tq(c,b),h.s.$(h.s.R(b),1.570796326794897)&&(h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))||(o=h.F.Sw(c,n),n=h.F.Sw(c,b),1.570796316258184<h.s.R(n)&&(n=h.s.Mb(1.570796316258184,b),b=h.F.sO(c,n)),c=Math.sin(o),n=Math.sin(n),c=Math.sqrt((1+c)/(1-c)),n=Math.sqrt((1+n)/(1-n)),c=Math.log(n)-Math.log(c),a=h.F.ca(a+Math.tan(u)*c))),p!=null&&(p.u=a),f!=null&&(f.u=b)},L}()}(X||(X={})),function(h){h.kb=function(){function L(){}return L.Sy=function(b,c,a,n,o,u,p){h.eu.ub(b,c,a,n,o,u,null,p,null)},L.Ai=function(b,c,a,n,o,u,p,f){h.eu.sf(b,c,a,n,o,u,p,f)},L.xd=function(b,c,a,n,o,u,p,f,m,w){switch(w){case 2:h.Yk.ub(b,c,a,n,o,u,p,f,m);break;case 3:h.KC.ub(b,c,a,n,o,u,p,f,m);break;case 1:h.JC.ub(b,c,a,n,o,u,p,f,m);break;default:h.eu.ub(b,c,a,n,o,u,p,f,m)}},L.qj=function(b,c,a,n,o,u,p,f,m){switch(m){case 2:h.Yk.sf(b,c,a,n,o,u,p,f);break;case 3:h.KC.sf(b,c,a,n,o,u,p,f);break;case 1:h.JC.sf(b,c,a,n,o,u,p,f);break;default:h.eu.sf(b,c,a,n,o,u,p,f)}},L}()}(X||(X={})),function(h){var L=function(){function c(){this.y=this.x=null}return c.construct=function(a){var n=new c;return n.x=new h.Xb,n.x.set(a.x),n.y=new h.Xb,n.y.set(a.y),n},c.PE=function(a,n){var o=new c;return o.x=new h.Xb,o.x.set(a),o.y=new h.Xb,o.y.set(n),o},c.prototype.qg=function(){return this.x.qg()&&this.y.qg()},c.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},c}();h.nY=L;var b=function(){function c(){this.z=this.y=this.x=null}return c.construct=function(a){var n=new c;return n.x=new h.Xb,n.x.set(a.x),n.y=new h.Xb,n.y.set(a.y),n.z=new h.Xb,n.z.set(a.z),n},c.PE=function(a,n,o){var u=new c;return u.x=new h.Xb,u.x.set(a),u.y=new h.Xb,u.y.set(n),u.z=new h.Xb,u.z.set(o),u},c.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},c.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},c.prototype.Sh=function(a){var n=new h.Xb,o=new h.Xb,u=new h.Xb;return n.Ml(this.x,a.x),o.Ml(this.y,a.y),u.Ml(this.z,a.z),(a=new h.Xb).YM(n,o),a.add(u),a},c.prototype.XE=function(a){var n=new c;n.x.Ml(this.y,a.z),n.y.Ml(this.z,a.x),n.z.Ml(this.x,a.y);var o=new h.Xb,u=new h.Xb,p=new h.Xb;return o.Ml(this.z,a.y),u.Ml(this.x,a.z),p.Ml(this.y,a.x),n.x.sub(o),n.y.sub(u),n.z.sub(p),n},c}();h.oY=b,h.Nx=function(){function c(){}return c.yP=function(a,n,o){var u=n.x;n=n.y,c.el(1,a,Math.cos(u),Math.sin(u),Math.cos(n),Math.sin(n),o)},c.xP=function(a,n){var o=new h.Od;return c.yP(a,n,o),o},c.el=function(a,n,o,u,p,f,m){a/=Math.sqrt(1-n*f*f),m.L(a*p*o,a*p*u,a*(1-n)*f)},c.$u=function(a,n){var o=new h.Xb,u=new h.Xb,p=new h.Xb,f=new h.Xb;o.cos(n.x),u.sin(n.x),p.cos(n.y),f.sin(n.y);var m=new h.Xb;return m.set(f),m.Ag(f),m.Oo(a),m.Oo(-1),m.eN(),m.sqrt(),(n=new h.Xb).set(1),n.lm(m),(m=new h.Xb).set(n),m.Ag(p),m.Ag(o),(o=new h.Xb).set(n),o.Ag(p),o.Ag(u),(u=new h.Xb).set(n),u.Oo(1-a),u.Ag(f),b.PE(m,o,u)},c.KS=function(a,n,o,u){if(Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x)return NaN;if(u=c.XA(u,Math.min(n.x,o.x),Math.max(n.x,o.x)),!new h.Oc(n.x,o.x).contains(u))return NaN;var p=L.construct(n);if(o=L.construct(o),p=c.$u(a,p),o=c.$u(a,o),(o=p.XE(o)).z.qg())return n.y;var f=new h.Xb;f.set(o.x),f.lm(o.z),f.Oo(-1);var m=new h.Xb;m.set(o.y),m.lm(o.z),m.Oo(-1);var w=new h.Xb;return w.set(m),w.Ag(m),(p=new h.Xb).set(f),p.Ag(f),p.add(w),p.sqrt(),p.qg()||f.qg()&&m.qg()?n.y:(n=Math.atan2(m.value(),f.value()),n=Math.atan2(p.value()*Math.cos(n-u),1-a),u=c.xP(a,h.h.construct(u,n)),a=new h.Od(u.x,u.y,-u.z),u=o.value().Sh(u),a=o.value().Sh(a),Math.abs(a)<Math.abs(u)&&(n=-n),n)},c.Jz=function(a,n,o,u,p){if(p[0]=NaN,p[1]=NaN,Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x||Math.abs(u)>=.5*Math.PI||0<n.y&&0<o.y&&n.y>u&&o.y>u||0>n.y&&0>o.y&&n.y<u&&o.y<u)return 0;var f=L.construct(n),m=L.construct(o);f=c.$u(a,f),m=c.$u(a,m);var w=f.XE(m);if(w.z.qg())return new h.Oc(n.y,o.y).contains(u)?(p[0]=n.x,1):0;(m=new h.Xb).set(w.x),m.lm(w.z),m.Oo(-1),(f=new h.Xb).set(w.y),f.lm(w.z),f.Oo(-1),(w=new h.Xb).set(f),w.Ag(f);var x=new h.Xb;return x.set(m),x.Ag(m),x.add(w),x.sqrt(),x.qg()||m.qg()&&f.qg()?u==0?(p[0]=n.x,p[1]=o.x,2):0:(a=(1-a)*Math.tan(u)/x.value(),1<Math.abs(a)?0:(a=Math.acos(a),w=Math.atan2(f.value(),m.value()),m=Math.min(n.x,o.x),f=Math.max(n.x,o.x),o=c.XA(w-a,m,f),a=u!=0?c.XA(w+a,m,f):o,u=0,m<=o&&o<=f&&(p[u]=o,u++),a!=o&&m<=a&&a<=f&&(p[u]=a,++u==2&&Math.abs(p[0]-n.x)>Math.abs(p[1]-n.x)&&(n=p[0],p[0]=p[1],p[1]=n)),u))},c.XA=function(a,n,o){return a>o?a-=2*(n=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<n&&(a+=2*(n=Math.ceil((n-a)/(2*Math.PI)))*Math.PI),a},c}()}(X||(X={})),function(h){h.RK=function(){function L(){}return L.SX=function(b,c){var a=8,n=[0,0,0,0],o=new h.h;o.N(c),o.scale(h.cb.tc(b).Id().Fc()==9102?1:h.cb.tc(b).Id().ci/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var u=-180,p=180,f=(b=5*a)-1,m=(c=(b+31)/32)-1;0<=m;m--)for(var w=f-32*m,x=Math.min(32,b-32*m),E=1;E<x;E+=2){var T=.5*(p+u);o.x>=T?(n[m]|=1<<w,u=T):p=T,w-=2,f-=2}for(u=-90,p=90,f=b-2,m=c-1;0<=m;m--)for(w=f-32*m,x=Math.min(32,b-32*m),E=0;E<x;E+=2)T=.5*(p+u),o.y>=T?(n[m]|=1<<w,u=T):p=T,w-=2,f-=2;return L.UP(n,a,a)},L.UP=function(b,c,a){for(var n=[],o=0;o<c;o++)n[o]="";for(var u=o=0,p=0;p<c;p++){var f=b[o]>>u&31;if(31<(u+=5)){var m=37-u;f&=(1<<m)-1,u-=32,f|=(b[++o]&(1<<u)-1)<<m}n[c-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[f]}if(a>c)for(p=0;p<a-c;p++)n.push("0");else a<c&&(n.length=a);return n.join("")},L}()}(X||(X={})),function(h){var L={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},b={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function c(){}return c.Ny=function(a){c.zp===!1&&c.zt();var n=c.zQ(a);if(n==-1){var o=c.Ax(a);o!=a&&(n=c.Ny(o))}return n==-1&&(o=c.zK(a))!=a&&(n=c.Ny(o)),n},c.zQ=function(a){return c.Hw[a]!==void 0?c.Hw[a]:-1},c.wQ=function(a){c.zp===!1&&c.zt();var n=c.hF(a);if(n==1e38){var o=c.Ax(a);if(o!=a&&(n=c.hF(o)),n==1e38)return 1e-10}return n},c.RS=function(a){if(c.Ks[a]!==void 0)return!0;var n=c.Ax(a);return n!=a&&c.Ks[n]!==void 0},c.TS=function(a){if(c.yo[a]!==void 0)return!0;var n=c.Ax(a);return n!=a&&c.yo[n]!==void 0},c.hF=function(a){return c.zp===!1&&c.zt(),c.Ks[a]!==void 0?c.Ks[a]:c.yo[a]!==void 0?c.yo[a]:1e38},c.zK=function(a){return c.zp===!1&&c.zt(),c.QA[a]!==void 0?c.QA[a]:a},c.Ax=function(a){return c.zp===!1&&c.zt(),c.RA[a]!==void 0?c.RA[a]:a},c.zt=function(){for(var a,n=L,o=0;o<n.pcsid.length;o+=2)c.yo[n.pcsid[o]]=n.pcstol[2*n.pcsid[o+1]+1];for(o=0;o<n.pcsidc.length;o+=1)for(var u=(a=n.pcsidc[o])[0];u<=a[1];u++)c.yo[u]=n.pcstol[2*a[2]+1];for(o=0;o<n.gcsid.length;o+=2)c.Ks[n.gcsid[o]]=n.gcstol[2*n.gcsid[o+1]+1];for(o=0;o<n.gcsidc.length;o+=1)for(u=(a=n.gcsidc[o])[0];u<=a[1];u++)c.yo[u]=n.gcstol[2*a[2]+1];for(o=0;o<b.c.length;o+=1)for(u=(a=b.c[o])[0];u<=a[1];u++)c.Hw[u]=a[2];for(o=0;o<b.nc.length;o+=2)c.Hw[b.nc[o]]=b.nc[o+1];for(b=null,o=0;o<n.newtoold.length;o+=2)c.QA[n.newtoold[o+1]]=n.newtoold[o],c.RA[n.newtoold[o]]=n.newtoold[o+1];L=null,c.zp=!0},c.zp=!1,c.Ks=[],c.yo=[],c.QA=[],c.RA=[],c.Hw=[],c}()}(X||(X={})),function(h){function L(c){return c.length===0?'""':c[0]=='"'||c[0]=="."||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var b=[];h.RC=function(){function c(){}return c.yQ=function(a){try{for(var n=0;n<b.length;n++)if(b[n].wkttext===a)return b[n].unit;for(var o,u=n="",p=!1,f=0;f<a.length;f++){var m=a[f];p===!0?m=='"'?a[f+1]=='"'?n+=m:p=p=!1:n+=m:/[\s]/.test(m)||(m==","?(u=n!==""?u+(L(n)+","):u+",",n=""):m==")"||m=="]"?(u=n!==""?u+(L(n)+"]}"):u+"]}",n=""):m=="("||m=="["?(u+='{ "entity": "'+n.toUpperCase().trim()+'", "values":[',n=""):m=='"'?(p=!0,n=""):n+=m)}o=JSON.parse(u);var w=c.gF(o);if(w===null)return null;for(o=null,m=0;m<w.values.length;m++)if(typeof w.values[m]=="object"&&w.values[m].entity==="UNIT"){o=w.values[m];break}if(o===null)return null;var x=h.Uc.TO(w.entity==="GEOGCS"?1:0,o.values[1],o.values[2]);return b.push({wkttext:a,unit:x}),10<b.length&&b.shift(),x}catch{return null}},c.gF=function(a){if(a===null)return null;if(a.entity==="GEOGCS"||a.entity==="PROJCS")return a;for(var n=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0){if(a.values[o].entity==="GEOGCS"||a.values[o].entity=="PROJCS")return a.values[o];n.push(a.values[o])}for(a=0;a<n.length;a++)if((o=c.gF(n[a]))!==null)return o;return null},c.xQ=function(a){var n=-1;if(a!=null&&0<a.length){var o=a.indexOf("PROJCS");if(0<=o){var u=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var p=a.indexOf("]",o+1);if(0<p)try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<u&&(n=.001/u)}else if(0<=(o=a.indexOf("GEOGCS"))){var f=0;if(u=0,0<(o=a.indexOf("SPHEROID",o+6))&&0<(o=a.indexOf(",",o+8))){if(o++,0<(p=a.indexOf(",",o+1)))try{f=parseFloat(a.substring(o,p))}catch{f=0}if(0<f&&0<=(o=a.indexOf("UNIT",p+1))&&0<(o=a.indexOf(",",o+4))&&(o++,0<(p=a.indexOf("]",o+1))))try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<f&&0<u&&(n=.001/(f*u))}}return n},c}()}(X||(X={})),function(h){var L;(L=h.ZK||(h.ZK={}))[L.NONE=0]="NONE",L[L.LINEAR=1]="LINEAR",L[L.ANGULAR=2]="ANGULAR",function(c){c[c.enumFloat=0]="enumFloat",c[c.enumDouble=1]="enumDouble",c[c.enumInt32=2]="enumInt32",c[c.enumInt64=3]="enumInt64",c[c.enumInt8=4]="enumInt8",c[c.enumInt16=5]="enumInt16"}(h.KL||(h.KL={})),function(c){c[c.POSITION=0]="POSITION",c[c.Z=1]="Z",c[c.M=2]="M",c[c.ID=3]="ID",c[c.NORMAL=4]="NORMAL",c[c.TEXTURE1D=5]="TEXTURE1D",c[c.TEXTURE2D=6]="TEXTURE2D",c[c.TEXTURE3D=7]="TEXTURE3D",c[c.ID2=8]="ID2",c[c.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Kh||(h.Kh={}));var b=function(){function c(a,n){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.cg=null,this.yl=0,n!==void 0){for(this.Ba=n.Ba,this.Qq=n.Qq,this.cg=n.cg.slice(0),this.wh=n.wh.slice(0),this.yl=n.yl,this.Xs=[],a=n=0;a<this.Ba;a++)this.Xs[a]=n,n+=c.Wa(this.cg[a]);for(this.Qq=n,this.Be=[],a=0;a<this.Ba;a++){n=c.Wa(this.qd(a));for(var o=c.te(this.qd(a)),u=0;u<n;u++)this.Be[this.Xs[a]+u]=o}}else this.Qq=this.Ba=0}return c.prototype.qd=function(a){if(0>a||a>this.Ba)throw h.i.O();return this.cg[a]},c.prototype.Qf=function(a){return this.wh[a]},c.gz=function(a){return c.DM[a]},c.Vp=function(a){return c.MM[a]},c.Wa=function(a){return c.lM[a]},c.prototype.hasAttribute=function(a){return 0<=this.wh[a]},c.prototype.cG=function(){return this.hasAttribute(1)},c.te=function(a){return c.ZC[a]},c.prototype.ER=function(a){return this.Xs[a]},c.xG=function(a,n){return c.ZC[a]===n},c.prototype.Nb=function(a){return this===a},c.prototype.Bn=function(){for(var a=h.P.Vh(this.cg[0]),n=1;n<this.Ba;n++)a=h.P.Vh(this.cg[n],a);return a},c.prototype.ak=function(a){return this.Xs[a]},c.prototype.dc=function(){return this.yl},c.prototype.Fd=function(a){return this.cg[a]},c.ZC=[0,0,NaN,0,0,0,0,0,0],c.DM=[1,1,1,0,2,1,1,1,0],c.MM=[1,1,1,2,0,0,0,0,2],c.lM=[2,1,1,1,3,1,2,3,2],c}();h.ua=b}(X||(X={})),function(h){function L(p,f,m){var w=f-(p=new u(p)).e,x=p.c;for(x.length>++f&&b(p,w,u.gu),x[0]?m?w=f:(x=p.c,w=p.e+w+1):++w;x.length<w;x.push(0));return w=p.e,m===1||m&&(f<=w||w<=a)?(0>p.Cd&&x[0]?"-":"")+(1<x.length?x[0]+"."+x.join("").slice(1):x[0])+(0>w?"e":"e+")+w:p.toString()}function b(p,f,m,w){var x=p.c,E=p.e+f+1;if(m===1?w=5<=x[E]:m===2?w=5<x[E]||x[E]==5&&(w||0>E||x[E+1]!==void 0||1&x[E-1]):m===3?w=w||x[E]!==void 0||0>E:(w=!1,m!==0&&c("!Big.RM!")),1>E||!x[0])w?(p.e=-f,p.c=[1]):p.c=[p.e=0];else{if(x.length=E--,w)for(;9<++x[E];)x[E]=0,E--||(++p.e,x.unshift(1));for(E=x.length;!x[--E];x.pop());}return p}function c(p){throw(p=Error(p)).name="BigError",p}var a=-7,n=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=function(){function p(f){if(f instanceof p)this.Cd=f.Cd,this.e=f.e,this.c=f.c.slice();else{var m,w,x;for(f===0&&0>1/f?f="-0":o.test(f+="")||c(NaN),this.Cd=f.charAt(0)=="-"?(f=f.slice(1),-1):1,-1<(m=f.indexOf("."))&&(f=f.replace(".","")),0<(w=f.search(/e/i))?(0>m&&(m=w),m+=+f.slice(w+1),f=f.substring(0,w)):0>m&&(m=f.length),w=0;f.charAt(w)=="0";w++);if(w==(x=f.length))this.c=[this.e=0];else{for(;f.charAt(--x)=="0";);for(this.e=m-w-1,this.c=[],m=0;w<=x;this.c[m++]=+f.charAt(w++));}}}return p.prototype.abs=function(){var f=new p(this);return f.Cd=1,f},p.prototype.cmp=function(f){var m=this.c,w=(f=new p(f)).c,x=this.Cd,E=f.Cd,T=this.e,A=f.e;if(!m[0]||!w[0])return m[0]?x:w[0]?-E:0;if(x!=E)return x;if(f=0>x,T!=A)return T>(A^f)?1:-1;for(x=-1,E=(T=m.length)<(A=w.length)?T:A;++x<E;)if(m[x]!=w[x])return m[x]>(w[x]^f)?1:-1;return T==A?0:T>(A^f)?1:-1},p.prototype.lm=function(f){var m=this.c,w=(f=new p(f)).c,x=this.Cd==f.Cd?1:-1,E=p.tr;if((E!==~~E||0>E||1e6<E)&&c("!Big.DP!"),!m[0]||!w[0])return m[0]==w[0]&&c(NaN),w[0]||c(x/0),new p(0*x);var T,A,P=w.slice(),F=T=w.length,j=m.length,H=m.slice(0,T),W=H.length,G=f,ee=G.c=[],ae=0,le=E+(G.e=this.e-f.e)+1;for(G.Cd=x,x=0>le?0:le,P.unshift(0);W++<T;H.push(0));do{for(A=0;10>A;A++){if(T!=(W=H.length))var ie=T>W?1:-1;else{var be=-1;for(ie=0;++be<T;)if(w[be]!=H[be]){ie=w[be]>H[be]?1:-1;break}}if(!(0>ie))break;for(f=W==T?w:P;W;){if(H[--W]<f[W]){for(be=W;be&&!H[--be];H[be]=9);--H[be],H[W]+=10}H[W]-=f[W]}for(;!H[0];H.shift());}ee[ae++]=ie?A:++A,H[0]&&ie?H[W]=m[F]||0:H=[m[F]]}while((F++<j||H[0]!==void 0)&&x--);return ee[0]||ae==1||(ee.shift(),G.e--),ae>le&&b(G,E,p.gu,H[0]!==void 0),G},p.prototype.ZR=function(){return 0<this.cmp(0)},p.prototype.fT=function(){return 0>this.cmp(0)},p.prototype.kt=function(f){var m,w=this.Cd,x=(f=new p(f)).Cd;if(w!=x)return f.Cd=-x,this.nI(f);var E=this.c.slice(),T=this.e,A=f.c,P=f.e;if(!E[0]||!A[0])return A[0]?(f.Cd=-x,f):new p(E[0]?this:0);if(w=T-P){for((m=0>w)?(w=-w,T=E):(P=T,T=A),T.reverse(),x=w;x--;T.push(0));T.reverse()}else for(T=((m=E.length<A.length)?E:A).length,w=x=0;x<T;x++)if(E[x]!=A[x]){m=E[x]<A[x];break}if(m&&(T=E,E=A,A=T,f.Cd=-f.Cd),0<(x=(T=A.length)-(m=E.length)))for(;x--;E[m++]=0);for(x=m;T>w;){if(E[--T]<A[T]){for(m=T;m&&!E[--m];E[m]=9);--E[m],E[T]+=10}E[T]-=A[T]}for(;E[--x]==0;E.pop());for(;E[0]==0;)E.shift(),--P;return E[0]||(f.Cd=1,E=[P=0]),f.c=E,f.e=P,f},p.prototype.nI=function(f){var m=this.Cd,w=(f=new p(f)).Cd;if(m!=w)return f.Cd=-w,this.kt(f);w=this.e;var x=this.c,E=f.e,T=f.c;if(!x[0]||!T[0])return T[0]?f:new p(x[0]?this:0*m);if(x=x.slice(),m=w-E){for(0<m?(E=w,w=T):(m=-m,w=x),w.reverse();m--;w.push(0));w.reverse()}for(0>x.length-T.length&&(w=T,T=x,x=w),m=T.length,w=0;m;)w=(x[--m]=x[m]+T[m]+w)/10|0,x[m]%=10;for(w&&(x.unshift(w),++E),m=x.length;x[--m]==0;x.pop());return f.c=x,f.e=E,f},p.prototype.pow=function(f){var m=this,w=new p(1),x=w,E=0>f;for((f!==~~f||-1e6>f||1e6<f)&&c("!pow!"),f=E?-f:f;1&f&&(x=x.nr(m)),f>>=1;)m=m.nr(m);return E?w.lm(x):x},p.prototype.round=function(f,m){var w=this;return f==null?f=0:(f!==~~f||0>f||1e6<f)&&c("!round!"),b(w=new p(w),f,m==null?p.gu:m),w},p.prototype.sqrt=function(){var f=this.c,m=this.Cd,w=this.e,x=new p("0.5");if(!f[0])return new p(this);0>m&&c(NaN),(m=Math.sqrt(this.toString()))==0||m==1/0?((m=f.join("")).length+w&1||(m+="0"),(f=new p(Math.sqrt(m).toString())).e=((w+1)/2|0)-(0>w||1&w)):f=new p(m.toString()),m=f.e+(p.tr+=4);do w=f,f=x.nr(w.nI(this.lm(w)));while(w.c.slice(0,m).join("")!==f.c.slice(0,m).join(""));return b(f,p.tr-=4,p.gu),f},p.prototype.nr=function(f){var m=this.c,w=(f=new p(f)).c,x=m.length,E=w.length,T=this.e,A=f.e;if(f.Cd=this.Cd==f.Cd?1:-1,!m[0]||!w[0])return new p(0*f.Cd);if(f.e=T+A,x<E){var P=m;m=w,w=P,A=x,x=E,E=A}for(P=Array(A=x+E);A--;P[A]=0);for(T=E;T--;){for(E=0,A=x+T;A>T;)E=P[A]+w[T]*m[A-T-1]+E,P[A--]=E%10,E=E/10|0;P[A]=(P[A]+E)%10}for(E&&++f.e,P[0]||P.shift(),T=P.length;!P[--T];P.pop());return f.c=P,f},p.prototype.toString=function(){var f=this.e,m=this.c.join(""),w=m.length;if(f<=a||f>=n)m=m.charAt(0)+(1<w?"."+m.slice(1):"")+(0>f?"e":"e+")+f;else if(0>f){for(;++f;m="0"+m);m="0."+m}else if(0<f)if(++f>w)for(f-=w;f--;m+="0");else f<w&&(m=m.slice(0,f)+"."+m.slice(f));else 1<w&&(m=m.charAt(0)+"."+m.slice(1));return 0>this.Cd&&this.c[0]?"-"+m:m},p.prototype.toExponential=function(f){return f==null?f=this.c.length-1:(f!==~~f||0>f||1e6<f)&&c("!toExp!"),L(this,f,1)},p.prototype.toFixed=function(f){var m=a,w=n;if(a=-(n=1/0),f==null)var x=this.toString();else f===~~f&&0<=f&&1e6>=f&&(x=L(this,this.e+f),0>this.Cd&&this.c[0]&&0>x.indexOf("-")&&(x="-"+x));return a=m,n=w,x||c("!toFix!"),x},p.prototype.toPrecision=function(f){return f==null?this.toString():((f!==~~f||1>f||1e6<f)&&c("!toPre!"),L(this,f-1,2))},p.tr=20,p.gu=1,p}();h.ip=u}(X||(X={})),function(h){var L=function(){function b(c){this.lf=c}return b.prototype.qr=function(c,a,n){var o=new h.h,u=new h.h,p=this.lf;n.Wd(c,a,function(f,m){return p.uc(2*f,o),p.uc(2*m,u),o.compare(u)})},b.prototype.bq=function(c){return this.lf.read(2*c+1)},b}();h.si=function(){function b(){}return b.cq=function(c){if(c.B())return!1;var a=c.K();return a==1736?c.He()!=0:a==1607?(a=[!1],b.mE(c,!0,a),a[0]):!(a!=197&&(!h.ba.zd(a)||c.vG()))},b.im=function(c){var a=c.K();if(a==1736)return a=new h.Ua(c.description),c.B()||c.YC(a),a;if(a==1607)return b.mE(c,!1,null);if(a==197)return a=new h.Ua(c.description),c.B()||a.bd(c,!1),a;if(h.ba.zd(a)){if(a=new h.de(c.description),!c.B()&&!c.vG()){var n=new h.Ta;c.Uo(n),a.add(n),c.Qo(n),a.add(n)}return a}if(h.ba.Sn(a))return null;throw h.i.O()},b.mE=function(c,a,n){n!=null&&(n[0]=!1);var o=null;if(a||(o=new h.de(c.description)),!c.B()){var u=new h.ja(0);u.Jb(2*c.ea());for(var p=0,f=c.ea();p<f;p++)if(0<c.Ka(p)&&!c.On(p)){var m=c.Ca(p);u.add(m),m=c.Wc(p)-1,u.add(m)}if(0<u.size){f=new h.Zt,p=c.vb(0),f.sort(u,0,u.size,new L(p)),f=new h.h,p.uc(2*u.get(0),f),m=0;for(var w=1,x=new h.Ta,E=new h.h,T=1,A=u.size;T<A;T++)if(p.uc(2*u.get(T),E),E.rb(f))u.get(m)>u.get(T)?(u.set(m,2147483647),m=T):u.set(T,2147483647),w++;else{if((1&w)==0)u.set(m,2147483647);else if(a)return n!=null&&(n[0]=!0),null;f.N(E),m=T,w=1}if((1&w)==0)u.set(m,2147483647);else if(a)return n!=null&&(n[0]=!0),null;if(!a)for(u.Wd(0,u.size,function(P,F){return P-F}),T=0,A=u.size;T<A&&u.get(T)!=2147483647;T++)c.we(u.get(T),x),o.add(x)}}return a?null:o},b}()}(X||(X={})),function(h){var L=function(){function b(){this.zf=new h.ja(0),this.As=new h.ja(0),this.yH=1,this.Gs=NaN}return b.prototype.sort=function(c,a,n,o){if(32>n-a)o.qr(a,n,c);else{var u=!0;try{for(var p=1/0,f=-1/0,m=a;m<n;m++){var w=o.bq(c.get(m));w<p&&(p=w),w>f&&(f=w)}if(this.reset(n-a,p,f,n-a)){for(m=a;m<n;m++){var x=c.get(m);w=o.bq(x);var E=this.tF(w);this.zf.set(E,this.zf.get(E)+1),this.As.write(m-a,x)}var T=this.zf.get(0);this.zf.set(0,0),m=1;for(var A=this.zf.size;m<A;m++){var P=this.zf.get(m);this.zf.set(m,T),T+=P}for(m=a;m<n;m++){x=this.As.read(m-a),w=o.bq(x),E=this.tF(w);var F=this.zf.get(E);c.set(F+a,x),this.zf.set(E,F+1)}u=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(u)o.qr(a,n,c);else{for(m=n=0,A=this.zf.size;m<A;m++)u=n,(n=this.zf.get(m))>u&&o.qr(a+u,a+n,c);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},b.prototype.reset=function(c,a,n,o){return!(2>c||n==a)&&(c=Math.min(b.bL,c),this.zf.Jb(c),this.zf.resize(c),this.zf.Yj(0,0,this.zf.size),this.yH=a,this.As.resize(o),this.Gs=(n-a)/(c-1),!0)},b.prototype.tF=function(c){return h.P.truncate((c-this.yH)/this.Gs)},b.bL=65536,b}();h.Zt=L}(X||(X={})),function(h){var L,b;(b=L||(L={}))[b.enum_line=1]="enum_line",b[b.enum_arc=2]="enum_arc",b[b.enum_dummy=4]="enum_dummy",b[b.enum_concave_dip=8]="enum_concave_dip",b[b.enum_connection=3]="enum_connection";var c=function(){function p(){}return p.Su=function(f,m,w,x,E,T){var A=new p;return A.Km=new h.h,A.Xm=new h.h,A.cw=new h.h,A.Km.N(f),A.Xm.N(m),A.cw.N(w),A.Do=x,A.sh=E,A.uh=T,A},p.construct=function(f,m,w,x){var E=new p;return E.Km=new h.h,E.Xm=new h.h,E.cw=new h.h,E.Km.N(f),E.Xm.N(m),E.cw.Sc(),E.Do=4,E.sh=w,E.uh=x,E},p}(),a=function(){function p(f,m,w,x,E,T){this.$v=null,this.za=0,this.yA=f,this.WH=this.UH=0,this.La=m,this.Oj=w,this.wk=x,this.Fq=E,this.Vb=T}return p.prototype.next=function(){for(var f=new h.Ta;;){if(this.za==this.yA.I())return null;if(this.yA.we(this.za,f),this.za++,!f.B())break}var m=!1;if(this.$v==null&&(this.UH=f.Ng(),this.WH=f.kh(),this.$v=u.buffer(f,this.La,this.Oj,this.wk,this.Fq,this.Vb),m=!0),this.za<this.yA.I()){var w=new h.Ea;this.$v.copyTo(w)}else w=this.$v;if(!m){m=new h.Ed;var x=f.Ng()-this.UH;f=f.kh()-this.WH,m.gg(x,f),w.Pc(m)}return w},p.prototype.Ma=function(){return 0},p.prototype.qe=function(){},p}(),n=function(){function p(f,m){this.Xa=f,this.za=0,this.qq=m}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var m=this.za;if(this.za++,!f.On(m))for(var w=f.Oa(f.Wc(m)-1);this.za<f.ea();){var x=f.Oa(f.Ca(this.za));if(f.On(this.za)||x!=w)break;w=f.Oa(f.Wc(this.za)-1),this.za++}if(this.za-m==1)return this.Xa.eE(this.Xa.Y,m,this.qq);for((w=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,m,!0),m+=1;m<this.za;m++)w.Fr(this.Xa.Y,m,0,f.tv(m),!1);return this.Xa.eE(w,0,this.qq)}return null},p.prototype.Ma=function(){return 0},p.prototype.qe=function(){},p}(),o=function(){function p(f){this.Xa=f,this.za=0}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var m=this.za;for(f.Kr(this.za),this.za++;this.za<f.ea()&&!(0<f.Kr(this.za));)this.za++;return m==0&&this.za==f.ea()?this.Xa.ly(f,0,f.ea()):this.Xa.ly(f,m,this.za)}return null},p.prototype.Ma=function(){return 0},p.prototype.qe=function(){},p}(),u=function(){function p(f){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=f,this.sb=this.Mv=this.BT=this.La=this.nA=this.dt=this.ra=0,this.iA=this.wk=-1,this.qq=!0}return p.buffer=function(f,m,w,x,E,T){if(f==null||0>x)throw h.i.O();if(f.B())return new h.Ea(f.description);var A=new h.l;return f.yc(A),0<m&&A.X(m,m),(T=new p(T)).Oj=w,T.Y=f,T.ra=h.ta.Xd(w,A,!0),T.dt=h.ta.Xd(null,A,!0),T.La=m,T.BT=f.K(),0>=E&&(E=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(x)||x==0?x=1e-5*T.sb:x>.5*T.sb&&(x=.5*T.sb),12>E&&(E=12),(f=Math.abs(m)*(1-Math.cos(Math.PI/E)))>x?x=f:(f=Math.PI/Math.acos(1-x/Math.abs(m)))<E-1&&12>(E=h.P.truncate(f))&&(E=12,x=Math.abs(m)*(1-Math.cos(Math.PI/E))),T.wk=x,T.Fq=E,T.nA=Math.min(T.dt,.25*x),T.fE()},p.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var f=this.kE();f=h.P.truncate((f+3)/4);var m=.5*Math.PI/f;this.iA=m;for(var w=0;w<4*f;w++)this.Jd.push(null);var x=Math.cos(m);m=Math.sin(m);var E=h.h.construct(0,1);for(w=0;w<f;w++)this.Jd[w+0*f]=h.h.construct(E.y,-E.x),this.Jd[w+1*f]=h.h.construct(-E.x,-E.y),this.Jd[w+2*f]=h.h.construct(-E.y,E.x),this.Jd[w+3*f]=E,(E=h.h.construct(E.x,E.y)).Ct(x,m)},p.prototype.fE=function(){var f=this.Y.K();if(h.ba.zd(f))return(f=new h.Ua(this.Y.description)).oc(this.Y,!0),this.Y=f,this.fE();if(this.La<=this.ra){if(!h.ba.MS(f))return new h.Ea(this.Y.description);if(0>=this.La&&(f=new h.l,this.Y.A(f),f.S()<=2*-this.La||f.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.JN();case 550:return this.IN();case 1607:return this.LN();case 1736:return this.KN();case 197:return this.FN();default:throw h.i.Ra()}},p.prototype.LN=function(){if(this.yG(this.Y)){var f=new h.Ta;this.Y.we(0,f);var m=new h.l;return this.Y.A(m),f.Db(m.tf()),this.Iu(f)}return this.Y=this.OV(this.Y),f=new n(this,this.qq),h.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.KN=function(){if(this.La==0)return this.Y;var f=h.$l.local();if(this.ev(),this.Y=f.W(this.Y,null,!1,this.Vb),0>this.La){var m=this.Y;return m=this.ly(m,0,m.ea()),f.W(m,this.Oj,!1,this.Vb)}return this.yG(this.Y)?(f=new h.Ta,this.Y.we(0,f),m=new h.l,this.Y.A(m),f.Db(m.tf()),this.Iu(f)):(f=new o(this),h.Ih.local().W(f,this.Oj,this.Vb).next())},p.prototype.ly=function(f,m,w){for(var x=new h.Ea(f.description);m<w;m++)if(!(1>f.Ka(m))){var E=f.Kr(m),T=new h.l;if(f.Tj(m,T),0<this.La){if(0<E)if(this.zG(f,m))E=new h.Ta,f.we(f.Ca(m),E),E.Db(T.tf()),this.Au(x,E);else{var A=E=new h.Ua(f.description);A=h.au.DG(this.Y,m)||this.An(this.Y,m,A,!0,1)==2?this.dE(f,m):this.zn(E),x.add(A,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(A=E=new h.Ua(f.description),this.An(this.Y,m,A,!0,1),E.B()))){var P=new h.l;for(P.L(T),P.X(this.sb,this.sb),A.vp(P),T=1,E=(A=this.zn(E)).ea();T<E;T++)x.addPath(A,T,!0)}}else if(0<E){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(A=E=new h.Ua(f.description),this.An(this.Y,m,A,!0,-1),E.B())))for(P=new h.l,A.yc(P),P.X(this.sb,this.sb),A.vp(P),T=1,E=(A=this.zn(E)).ea();T<E;T++)x.addPath(A,T,!0)}else for(A=E=new h.Ua(f.description),this.An(this.Y,m,A,!0,-1),T=0,E=(A=this.zn(E)).ea();T<E;T++)x.addPath(A,T,!0)}if(0<this.La)return 1<x.ea()?x=this.zn(x):p.kx(x);if(f=new h.l,x.yc(f),x.B())return p.kx(x);for(f.X(this.sb,this.sb),x.vp(f),x=this.zn(x),f=new h.Ea(x.description),T=1,E=x.ea();T<E;T++)f.addPath(x,T,!1);return p.kx(f)},p.prototype.JN=function(){return this.Iu(this.Y)},p.prototype.Iu=function(f){var m=new h.Ea(this.Y.description);return this.Au(m,f),this.kX(m)},p.prototype.IN=function(){var f=new a(this.Y,this.La,this.Oj,this.wk,this.Fq,this.Vb);return h.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.FN=function(){var f=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)f.bd(this.Y,!1);else{var m=new h.Hh;this.Y.dn(m),m.X(this.La,this.La),f.bd(m,!1)}return f}return f.bd(this.Y,!1),this.Y=f,this.dE(f,0)},p.prototype.dE=function(f,m){this.ev();var w=new h.Ea(f.description),x=new h.h,E=new h.h,T=new h.h,A=new h.h,P=new h.h,F=new h.h,j=new h.h,H=new h.h,W=f.Ka(m),G=f.Ca(m),ee=0;for(m=f.Ka(m);ee<m;ee++){if(f.D(G+ee,E),f.D(G+(ee+1)%W,A),f.D(G+(ee+2)%W,F),j.vc(A,E),j.length()==0||(j.Jv(),j.normalize(),j.scale(this.sb),x.add(j,E),T.add(j,A),ee==0?w.Nt(x):w.Ei(x),w.Ei(T),H.vc(F,A),H.length()==0))throw h.i.Ra();H.Jv(),H.normalize(),H.scale(this.sb),P.add(H,A),this.AD(w,A,T,P,!1)}return p.kx(w)},p.prototype.eE=function(f,m,w){if(this.ev(),1>f.Ka(m))return null;if(this.zG(f,m)&&0<this.La){w=new h.Ta,f.we(f.Ca(m),w);var x=new h.l;return f.Tj(m,x),w.Db(x.tf()),this.Iu(w)}if(x=new h.Ua(f.description),f.On(m))this.An(f,m,x,w,1),this.An(f,m,x,w,-1);else{var E=new h.Ua(f.description);E.addPath(f,m,!1),E.Fr(f,m,0,f.tv(m),!1),this.An(E,0,x,w,1)}return this.zn(x)},p.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.hu("user_canceled")},p.prototype.zn=function(f){return h.Hg.Nk(f,this.dt,!0,!0,this.Vb)},p.prototype.kE=function(){if(this.wk==0)return this.Fq;var f=1-this.wk*Math.abs(this.Mv);return 4>(f=-1>f?4:2*Math.PI/Math.acos(f)+.5)?f=4:f>this.Fq&&(f=this.Fq),h.P.truncate(f)},p.prototype.AD=function(f,m,w,x,E){this.ev();var T=new h.h;T.vc(w,m),T.scale(this.Mv);var A=new h.h;A.vc(x,m),A.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.iA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>(A=Math.atan2(A.y,A.x)/this.iA)&&(A=this.Jd.length+A),(A=this.Jd.length-A)<T&&(A+=this.Jd.length);var P=h.P.truncate(A);A=h.P.truncate(Math.ceil(T)),(T=new h.h).N(this.Jd[A%this.Jd.length]),T.Dt(this.sb,m);var F=10*this.ra;for(T.sub(w),T.length()<F&&(A+=1),T.N(this.Jd[P%this.Jd.length]),T.Dt(this.sb,m),T.sub(x),T.length()<F&&--P,w=P-A,w++,P=0,A%=this.Jd.length;P<w;P++,A=(A+1)%this.Jd.length)T.N(this.Jd[A]),T.Dt(this.sb,m),f.Ei(T),this.Zq();E&&f.Ei(x)},p.prototype.An=function(f,m,w,x,E){var T=new h.hd,A=T.gN(f,m);if(T.Ip(this.nA,!1,!1),2>T.I(A))return 0>E||(E=f,T=new h.Ta,E.we(E.Ca(m),T),this.Au(w,T)),1;var P=T.Oa(T.Ya(T.Ob(A))),F=new h.Ed;if(F.gg(-P.x,-P.y),T.Pc(F),x&&(this.nQ(T,A,E),2>T.I(A)))return 0>E||(E=f,T=new h.Ta,E.we(E.Ca(m),T),this.Au(w,T)),1;this.$d.length=0;var j=T.Ob(A);m=T.Ya(j);var H=E==1?T.Na(m):T.V(m);f=E==1?T.V(m):T.Na(m);var W=!0;x=new h.h,A=new h.h;var G=new h.h,ee=new h.h,ae=new h.h,le=new h.h,ie=new h.h,be=new h.h,Ie=new h.h,ze=new h.h,Fe=this.sb;j=T.Ka(j);for(var Oe=0;Oe<j;Oe++)T.D(f,A),W&&(T.D(m,x),T.D(H,G),be.vc(x,G),be.normalize(),ze.GG(be),ze.scale(Fe),ee.add(ze,x)),ie.vc(A,x),ie.normalize(),Ie.GG(ie),Ie.scale(Fe),ae.add(x,Ie),H=be.yi(ie),W=be.Sh(ie),0>H||0>W&&H==0?this.$d.push(c.Su(ee,ae,x,2,this.$d.length+1,this.$d.length-1)):ee.rb(ae)||(this.$d.push(c.construct(ee,x,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(c.construct(x,ae,this.$d.length+1,this.$d.length-1,"dummy"))),le.add(A,Ie),this.$d.push(c.Su(ae,le,x,1,this.$d.length+1,this.$d.length-1)),ee.N(le),ze.N(Ie),G.N(x),x.N(A),be.N(ie),H=m,m=f,W=!1,f=E==1?T.V(m):T.Na(m);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.QV(w),F.gg(P.x,P.y),w.SD(F,w.ea()-1),1},p.prototype.QV=function(f){for(var m=this.tO(),w=!0,x=m+1,E=m;x!=m;E=x){var T=this.$d[E];x=T.sh!=-1?T.sh:(E+1)%this.$d.length,T.Do!=0&&(w&&f.Nt(T.Km),T.Do==2?this.AD(f,T.cw,T.Km,T.Xm,!0):f.Ei(T.Xm),w=!1)}},p.prototype.tO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var f=0,m=0,w=this.$d.length;m<w;){var x=this.$d[m];if((3&x.Do)!=0){f=m;break}m=x.sh}for(w=f+1,m=f;w!=f;m=w){w=(x=this.$d[m]).sh;for(var E=1,T=null;w!=m&&(3&(T=this.$d[w]).Do)==0;)w=T.sh,E++;E!=1&&(x.Do&T.Do)==1&&(this.Ns==null&&(this.Ns=new h.zb,this.nw=new h.zb),this.Ns.Ec(x.Km),this.Ns.Rc(x.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(x.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),x.sh=w,T.uh=m))}return f},p.prototype.Hv=function(f,m,w){var x=new h.h;if(x.vc(w,f),w=x.length(),0<(w=this.sb*this.sb-w*w*.25)){w=Math.sqrt(w),x.normalize(),x.cr();var E=new h.h;if(E.vc(m,f),E.Sh(x)+w>=this.sb)return!0}return!1},p.prototype.nQ=function(f,m,w){for(var x=0;1>x;x++){var E=!1,T=f.Ob(m),A=f.Ka(T);if(A==0)break;var P=A;if(3>A)break;!f.ec(T)&&(P=A-1),T=f.Ya(T),A=0<w?f.Na(T):f.V(T);for(var F=0<w?f.V(T):f.Na(T),j=A,H=!0,W=new h.h,G=new h.h,ee=new h.h,ae=new h.h,le=new h.h,ie=h.h.construct(0,0),be=new h.h,Ie=new h.h,ze=new h.h,Fe=new h.h,Oe=this.sb,Ye=0,yt=0;yt<P&&(f.D(F,G),H&&(f.D(T,W),f.D(A,ee),j=A),Ie.vc(W,ee),Ie.normalize(),be.vc(G,W),be.normalize(),j!=F);){var bt=Ie.yi(be),Kt=Ie.Sh(be),Qt=!0;if(0>bt||0>Kt&&bt==0||!this.Hv(ee,W,G)||(ie.N(G),Qt=!1,++Ye,E=!0),Qt){if(0<Ye)for(;(bt=0<w?f.Na(j):f.V(j))!=T;){if(f.D(bt,ae),!this.Hv(ae,ee,ie)){bt!=F&&this.Hv(ae,ee,G)&&this.Hv(ae,W,G)&&(ee.N(ae),j=bt,Qt=!1,++Ye);break}ee.N(ae),j=bt,Qt=!1,++Ye}if(!Qt)continue;if(0<Ye){for(j=0<w?f.Na(A):f.V(A),H=1;H<Ye;H++)Qt=0<w?f.Na(j):f.V(j),f.pd(j,!0),j=Qt;ze.vc(W,ee),Ye=Oe*Oe-(Ye=ze.length())*Ye*.25,Oe-(Ye=Math.sqrt(Ye))>.5*this.wk?(le.add(ee,W),le.scale(.5),ze.normalize(),ze.cr(),Fe.N(ze),Fe.scale(Oe-Ye),le.add(Fe),f.mf(A,le)):f.pd(A,!0),Ye=0}ee.N(W),j=T}W.N(G),A=T,T=F,F=0<w?f.V(T):f.Na(T),yt++,H=!1}if(0<Ye){for(j=0<w?f.Na(A):f.V(A),H=1;H<Ye;H++)Qt=0<w?f.Na(j):f.V(j),f.pd(j,!0),j=Qt;le.add(ee,W),le.scale(.5),ze.vc(W,ee),Ye=Oe*Oe-(Ye=ze.length())*Ye*.25,Ye=Math.sqrt(Ye),ze.normalize(),ze.cr(),Fe.N(ze),Fe.scale(Oe-Ye),le.add(Fe),f.mf(A,le)}if(f.Ip(this.nA,!1,!1),!E)break}},p.prototype.zG=function(f,m){if(f.Ka(m)==1)return!0;var w=new h.l;return f.Tj(m,w),Math.max(w.S(),w.da())<.5*this.wk},p.prototype.yG=function(f){var m=new h.l;return f.A(m),Math.max(m.S(),m.da())<.5*this.wk},p.prototype.OV=function(f){for(var m=0,w=0,x=(f=h.yC.local().W(f,.25*this.wk,!1,this.Vb)).ea();w<x;w++)m=Math.max(f.Ka(w),m);return 32>m?(this.qq=!1,f):(this.qq=!0,h.Hg.Nk(f,this.dt,!1,!0,this.Vb))},p.prototype.Au=function(f,m){if(m=m.D(),this.Jd!=null&&this.Jd.length!==0){var w=new h.h;w.N(this.Jd[0]),w.Dt(this.sb,m),f.Nt(w);for(var x=1,E=this.Jd.length;x<E;x++)w.N(this.Jd[x]),w.Dt(this.sb,m),f.Ei(w)}else{x=this.kE(),w=h.P.truncate((x+3)/4),x=.5*Math.PI/w,E=Math.cos(x);for(var T=Math.sin(x),A=new h.h,P=3;0<=P;P--){switch(A.na(0,this.sb),P){case 0:for(x=0;x<w;x++)f.Aj(A.x+m.x,A.y+m.y),A.Ct(E,T);break;case 1:for(x=0;x<w;x++)f.Aj(-A.y+m.x,A.x+m.y),A.Ct(E,T);break;case 2:for(x=0;x<w;x++)f.Aj(-A.x+m.x,-A.y+m.y),A.Ct(E,T);break;default:for(f.rx(A.y+m.x,-A.x+m.y),x=1;x<w;x++)A.Ct(E,T),f.Aj(A.y+m.x,-A.x+m.y)}this.Zq()}}},p.kx=function(f){return f.Eh(1,0),f},p.prototype.kX=function(f){return f.Eh(2,this.ra),f.hm(),f},p}();h.BK=u}(X||(X={})),function(h){var L=function(){function b(c){this.Da=c,this.g=new h.hd,this.ed=new h.ja(0)}return b.prototype.Nh=function(c,a,n){switch(a){case 0:if(c.v<n&&c.C<=n)break;return c.v>=n?1:-1;case 1:if(c.G<n&&c.H<=n)break;return c.G>=n?1:-1;case 2:if(c.v>=n&&c.C>n)break;return c.C<=n?1:-1;case 3:if(!(c.G>=n&&c.H>n))return c.H<=n?1:-1}return 0},b.prototype.vy=function(c,a){return c.K()==1736?this.xy(c,a):this.yy(c)},b.prototype.xy=function(c,a){if(this.Da.S()==0||this.Da.da()==0)return c.Ja();var n=new h.l;c.yc(n),this.Y=this.g.Ib(c);var o=new h.l,u=new h.l,p=new h.h,f=new h.h,m=[0,0,0,0,0,0,0,0,0],w=[0,0,0,0,0,0,0,0,0];new h.hg;var x=new h.zb,E=new h.ja(0);E.Jb(Math.min(100,c.I()));for(var T=!1,A=0;!T&&4>A;A++){var P=!1,F=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,P=n.v<=j&&n.C>=j;break;case 1:j=this.Da.G,P=n.G<=j&&n.H>=j;break;case 2:j=this.Da.C,P=n.v<=j&&n.C>=j;break;case 3:j=this.Da.H,P=n.G<=j&&n.H>=j}if(P)for(T=!0,P=this.g.Ob(this.Y);P!=-1;){var H=-1,W=-1,G=this.g.Ya(P),ee=G;do{var ae=this.g.cc(ee);ae==null&&(ae=x,this.g.D(ee,p),ae.Ec(p),this.g.D(this.g.V(ee),f),ae.Rc(f)),ae.A(o);var le=this.Nh(o,A,j),ie=0,be=-1;if(le==-1){ie=0<(ae=ae.fq(F,j,m,w))?this.g.Wl(ee,w,ae):0,ie+=1;var Ie=ee,ze=this.g.V(Ie);for(ae=0;ae<ie;ae++){if(this.g.D(Ie,p),this.g.D(ze,f),(be=this.g.cc(Ie))==null&&((be=x).Ec(p),be.Rc(f)),be.A(u),(be=this.Nh(u,A,j))==-1){if(F)(be=Math.abs(p.y-j))<(Fe=Math.abs(f.y-j))?(p.y=j,this.g.mf(Ie,p)):(f.y=j,this.g.mf(ze,f));else{be=Math.abs(p.x-j);var Fe=Math.abs(f.x-j);be<Fe?(p.x=j,this.g.mf(Ie,p)):(f.x=j,this.g.mf(ze,f))}(be=this.g.cc(Ie))==null&&((be=x).Ec(p),be.Rc(f)),be.A(u),be=this.Nh(u,A,j)}Fe=H,H=be,W==-1&&(W=H),Fe==0&&H==1||Fe==1&&H==0||Fe!=0||H!=0||E.add(Ie),H==1&&(T=!1),be=Ie=ze,ze=this.g.V(ze)}}ie==0&&(Fe=H,H=le,W==-1&&(W=H),Fe==0&&H==1||Fe==1&&H==0||Fe!=0||H!=0||E.add(ee),H==1&&(T=!1),be=this.g.V(ee)),ee=be}while(ee!=G);for(W==0&&H==0&&E.add(G),ae=0,H=E.size;ae<H;ae++)W=E.get(ae),this.g.pd(W,!1);E.clear(!1),P=3>this.g.Ka(P)?this.g.ar(P):this.g.Sb(P)}}return T?c.Ja():(this.zB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},b.prototype.yy=function(c){var a=new h.l,n=new h.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new h.hg,f=c,m=new h.l;c.yc(m);for(var w=0;4>w;w++){var x=!1,E=(1&w)!=0,T=0;switch(w){case 0:T=this.Da.v,x=m.v<=T&&m.C>=T;break;case 1:T=this.Da.G,x=m.G<=T&&m.H>=T;break;case 2:T=this.Da.C,x=m.v<=T&&m.C>=T;break;case 3:T=this.Da.H,x=m.G<=T&&m.H>=T}if(x){x=f,f=c.Ja(),(x=x.Ha()).aj();for(var A,P=new h.h;x.ab();)for(var F,j=!0;x.Ia();){var H=x.ia();H.A(a);var W=this.Nh(a,w,T);if(W==-1){if(0<(W=H.fq(E,T,o,u))){var G=0;A=H.ac();for(var ee=0;ee<=W;ee++)if(G!=(F=ee<W?u[ee]:1)){H.dh(G,F,p);var ae=p.get();ae.Ec(A),ee<W&&(E?(P.x=o[ee],P.y=T):(P.x=T,P.y=o[ee]),ae.Rc(P)),ae.A(n);var le=this.Nh(n,w,T);if(le==-1){if(A=ae.ac(),G=ae.xc(),E)(le=Math.abs(A.y-T))<(ie=Math.abs(G.y-T))?(A.y=T,ae.Ec(A)):(G.y=T,ae.Rc(G));else{le=Math.abs(A.x-T);var ie=Math.abs(G.x-T);le<ie?(A.x=T,ae.Ec(A)):(G.x=T,ae.Rc(G))}ae.A(n),le=this.Nh(n,w,T)}A=ae.xc(),G=F,(F=le)==1?(f.oc(ae,j),j=!1):j=!0}}}else(F=W)==1?(f.oc(H,j),j=!1):j=!0}}}return f},b.prototype.zB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var c=new h.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,n=this.g.V(n))this.g.D(n,c),(this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},b.prototype.Hy=function(c){for(var a=new h.h,n=new h.h,o=h.P.lg(2048,0),u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u)){var p=this.g.Ya(u),f=p;do{var m=this.g.V(f);this.g.D(f,a);var w=-1;if(a.x==this.Da.v?(this.g.D(m,n),n.x==this.Da.v&&(w=1)):a.x==this.Da.C&&(this.g.D(m,n),n.x==this.Da.C&&(w=1)),a.y==this.Da.G?(this.g.D(m,n),n.y==this.Da.G&&(w=0)):a.y==this.Da.H&&(this.g.D(m,n),n.y==this.Da.H&&(w=0)),w!=-1&&(w=h.h.ub(a,n),!(1>=(w=h.P.truncate(Math.min(Math.ceil(w/c),2048)))))){for(var x=1;x<w;x++)o[x-1]=1*x/w;this.g.Wl(f,o,w-1)}f=m}while(f!=p)}},b.prototype.Xl=function(c,a){var n=this.g.Hd(),o=new h.h,u=new h.ja(0);u.Jb(100);for(var p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),m=0,w=this.g.Ka(p);m<w;m++){var x=this.g.V(f);this.g.D(f,o),(c?o.y==a:o.x==a)&&(this.g.D(x,o),(c?o.y==a:o.x==a)&&(this.g.Qa(f,n)!=1&&(u.add(f),this.g.Sa(f,n,1)),this.g.Qa(x,n)!=1&&(u.add(x),this.g.Sa(x,n,1)))),f=x}if(this.g.Ud(n),!(3>u.size)){var E=this;u.Wd(0,u.size,function(le,ie){return E.Oh(le,ie)}),n=new h.h,p=new h.h,f=new h.h,p.Sc();var T=-1;m=new h.ja(0),w=new h.ja(0),x=this.g.Hd();for(var A=this.g.Hd(),P=0,F=u.size;P<F;P++){var j=u.get(P);if(this.g.D(j,o),!o.rb(p)){if(T!=-1){for(var H=T;H<P;H++){T=u.get(H);var W=this.g.V(T);j=this.g.Na(T);var G=!1;0>this.Oh(T,W)&&(this.g.D(W,n),c?n.y==a:n.x==a)&&(m.add(T),G=!0,this.g.Sa(T,A,1)),0>this.Oh(T,j)&&(this.g.D(j,n),c?n.y==a:n.x==a)&&(G||m.add(T),this.g.Sa(T,x,1))}for(H=0,G=m.size;H<G;H++){if(T=m.get(H),j=this.g.Qa(T,x),W=this.g.Qa(T,A),j==1){j=this.g.Na(T),this.g.D(j,f);var ee=[0];if(ee[0]=0,!f.rb(o)){var ae=h.h.ub(p,f);ee[0]=h.h.ub(f,o)/ae,ee[0]==0?ee[0]=2220446049250313e-31:ee[0]==1&&(ee[0]=.9999999999999998),this.g.Wl(j,ee,1),j=this.g.Na(T),this.g.mf(j,o),w.add(j),this.g.Sa(j,x,1),this.g.Sa(j,A,-1)}}W==1&&(W=this.g.V(T),this.g.D(W,f),(ee=[0])[0]=0,f.rb(o)||(ae=h.h.ub(p,f),ee[0]=h.h.ub(p,o)/ae,ee[0]==0?ee[0]=2220446049250313e-31:ee[0]==1&&(ee[0]=.9999999999999998),this.g.Wl(T,ee,1),j=this.g.V(T),this.g.mf(j,o),w.add(j),this.g.Sa(j,x,-1),this.g.Sa(j,A,1)))}T=m,m=w,(w=T).clear(!1)}T=P,p.N(o)}}this.g.Ud(x),this.g.Ud(A)}},b.prototype.Pl=function(c,a){var n=new h.h,o=new h.ja(0);o.Jb(100);for(var u=this.g.Hd(),p=0,f=this.ed.size;p<f;p++){var m=this.ed.get(p);if(m!=-1){var w=this.g.V(m);this.g.D(m,n),(c?n.y==a:n.x==a)&&(this.g.D(w,n),(c?n.y==a:n.x==a)&&(this.g.Qa(m,u)!=-2&&(o.add(m),this.g.Sa(m,u,-2)),this.g.Qa(w,u)!=-2&&(o.add(w),this.g.Sa(w,u,-2))))}}if(o.size!=0){var x=this;for(o.Wd(0,o.size,function(ie,be){return x.Oh(ie,be)}),p=0,f=o.size;p<f;p++){var E=o.get(p);this.g.Sa(E,u,p)}m=new h.h,(w=new h.h).Sc();var T=-1;for(p=0,f=o.size;p<f;p++)if((E=o.get(p))!=-1&&(this.g.D(E,n),!n.rb(w))){if(T!=-1)for(;;){E=!1;for(var A=1<p-T?p-1:p,P=T;P<A;P++){var F=o.get(P);if(F!=-1){var j=-1,H=this.g.V(F);0>this.Oh(F,H)&&(this.g.D(H,m),c?m.y==a:m.x==a)&&(j=H),H=-1;var W=this.g.Na(F);if(0>this.Oh(F,W)&&(this.g.D(W,m),c?m.y==a:m.x==a)&&(H=W),j!=-1&&H!=-1)this.Mh(F,o,u),this.g.pd(F,!1),this.Mh(j,o,u),this.g.pd(j,!1),E=!0;else if(j!=-1||H!=-1){for(W=P+1;W<p;W++){var G=o.get(W);if(G!=-1){var ee=this.g.V(G),ae=-1;0>this.Oh(G,ee)&&(this.g.D(ee,m),c?m.y==a:m.x==a)&&(ae=ee),ee=this.g.Na(G);var le=-1;if(0>this.Oh(G,ee)&&(this.g.D(ee,m),c?m.y==a:m.x==a)&&(le=ee),ae!=-1&&le!=-1){this.Mh(G,o,u),this.g.pd(G,!1),this.Mh(ae,o,u),this.g.pd(ae,!1),E=!0;break}if(j!=-1&&le!=-1){this.At(o,F,j,G,le,u),E=!0;break}if(H!=-1&&ae!=-1){this.At(o,G,ae,F,H,u),E=!0;break}}}if(E)break}}}if(!E)break}T=p,w.N(n)}}this.g.Ud(u)},b.prototype.Mh=function(c,a,n){n=this.g.Qa(c,n),a.set(n,-1),n=this.g.Qa(c,this.li),this.ed.set(n,-1),(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},b.prototype.At=function(c,a,n,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,u),this.g.Cc(u,n),this.Mh(o,c,p),this.g.oi(o,!1),this.Mh(u,c,p),this.g.oi(u,!0)},b.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var n=this.ed.get(c);n!=-1&&this.g.cj(n,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{n=f,m=0;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=f);2>=m?(n=this.g.Qa(f,this.li),this.ed.set(n,-1),f=this.g.pd(f,!1),m==2&&(n=this.g.Qa(f,this.li),this.ed.set(n,-1),this.g.pd(f,!1)),m=p,p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)):(this.g.ep(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,m),u+=m,o++,p=this.g.Sb(p))}}for(c=0,a=this.ed.size;c<a;c++)if((n=this.ed.get(c))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),m=0,f=n;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=f);2>=m?(n=this.g.Qa(f,this.li),this.ed.set(n,-1),f=this.g.pd(f,!1),m==2&&(0<=(n=this.g.Qa(f,this.li))&&this.ed.set(n,-1),this.g.pd(f,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.ep(p,!1),u+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),c=0,a=this.g.ld;a!=-1;a=this.g.ve(a))c+=this.g.I(a);this.g.WB(c)},b.wy=function(c,a,n){return new b(a).vy(c,n)},b.clip=function(c,a,n,o){if(c.B())return c;if(a.B())return c.Ja();if((n=c.K())==33)return o=c.D(),a.contains(o)?c:c.Ja();if(n==197)return o=new h.l,c.A(o),o.Fa(a)?(a=new h.Hh,c.copyTo(a),a.Yo(o),a):c.Ja();var u=new h.l;if(c.yc(u),a.contains(u))return c;if(!a.isIntersecting(u))return c.Ja();if((u=c.Cb)!=null&&(u=u.Gk)!=null){if((u=u.So(a))==1){if(n!=1736)throw h.i.Ra();return(c=new h.Ea(c.description)).vp(a),c}if(u==0)return c.Ja()}switch(n){case 550:n=null,u=c.I();for(var p=c.vb(0),f=0,m=0;m<u;m++)o=new h.h,p.uc(2*m,o),a.contains(o)||(f==0&&(n=c.Ja()),f<m&&n.Gd(c,f,m),f=m+1);return 0<f&&n.Gd(c,f,u),f==0?c:n;case 1736:case 1607:return b.wy(c,a,o);default:throw h.i.Ra()}},b.prototype.Oh=function(c,a){var n=new h.h;return this.g.D(c,n),c=new h.h,this.g.D(a,c),n.compare(c)},b}();h.Vd=L}(X||(X={})),function(h){var L=function(){function b(c,a){this.Da=c,this.g=new h.hd,this.ed=new h.ja(0),this.nd=a}return b.prototype.Nh=function(c,a,n){switch(a){case 0:if(c.v<n&&c.C<=n)break;return c.v>=n?1:-1;case 1:if(c.G<n&&c.H<=n)break;return c.G>=n?1:-1;case 2:if(c.v>=n&&c.C>n)break;return c.C<=n?1:-1;case 3:if(!(c.G>=n&&c.H>n))return c.H<=n?1:-1}return 0},b.prototype.vy=function(c,a){return c.K()==1736?this.xy(c,a):this.yy(c)},b.prototype.xy=function(c,a){if(this.Da.S()==0||this.Da.da()==0)return c.Ja();var n=new h.l;c.yc(n),this.Y=this.g.Ib(c);var o=new h.l,u=new h.l,p=new h.h,f=new h.h,m=[0,0,0,0,0,0,0,0,0],w=[0,0,0,0,0,0,0,0,0],x=new h.zb,E=new h.ja(0);E.Jb(256);for(var T=!1,A=0;!T&&4>A;A++){var P=!1,F=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,P=n.v<=j&&n.C>=j;break;case 1:j=this.Da.G,P=n.G<=j&&n.H>=j;break;case 2:j=this.Da.C,P=n.v<=j&&n.C>=j;break;case 3:j=this.Da.H,P=n.G<=j&&n.H>=j}if(P)for(T=!0,P=this.g.Ob(this.Y);P!=-1;){var H=!0,W=-1,G=-1,ee=this.g.Ya(P),ae=ee;do{var le=this.g.cc(ae);le==null&&(le=x,this.g.D(ae,p),le.Ec(p),this.g.D(this.g.V(ae),f),le.Rc(f)),le.A(o);var ie=this.Nh(o,A,j),be=0,Ie=-1;if(ie==-1){be=0<(le=le.fq(F,j,m,w))?this.g.DX(ae,w,le):0,be+=1;var ze=ae,Fe=this.g.V(ze);for(le=0;le<be;le++){if(this.g.D(ze,p),this.g.D(Fe,f),(Ie=this.g.cc(ze))==null&&((Ie=x).Ec(p),Ie.Rc(f)),Ie.A(u),(Ie=this.Nh(u,A,j))==-1){if(F)(Ie=Math.abs(p.y-j))<(Oe=Math.abs(f.y-j))?(p.y=j,this.g.mf(ze,p)):(f.y=j,this.g.mf(Fe,f));else{Ie=Math.abs(p.x-j);var Oe=Math.abs(f.x-j);Ie<Oe?(p.x=j,this.g.mf(ze,p)):(f.x=j,this.g.mf(Fe,f))}(Ie=this.g.cc(ze))==null&&((Ie=x).Ec(p),Ie.Rc(f)),Ie.A(u),Ie=this.Nh(u,A,j)}Oe=W,W=Ie,G==-1&&(G=W),Oe==0&&W==1||Oe==1&&W==0||Oe!=0||W!=0||E.add(ze),W==1&&(H=T=!1),Ie=ze=Fe,Fe=this.g.V(Fe)}}if(be==0&&(Oe=W,W=ie,G==-1&&(G=W),Oe==0&&W==1||Oe==1&&W==0||Oe!=0||W!=0||E.add(ae),W==1&&(H=T=!1),Ie=this.g.V(ae)),ae=Ie,256<=E.size){for(le=1,ie=E.size-1;le<ie;le++)be=E.get(le),this.g.pd(be,!1);E.set(1,E.Gc()),E.Dh(2)}}while(ae!=ee);if(!H)for(G==0&&W==0&&E.add(ee),le=0,ie=E.size;le<ie;le++)be=E.get(le),this.g.pd(be,!1);E.clear(!1),P=H||this.g.Ka(P)==0?this.g.ar(P):this.g.Sb(P)}}return T?c.Ja():(this.zB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},b.prototype.yy=function(c){var a=new h.l,n=new h.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new h.hg,f=c,m=new h.l;c.yc(m);for(var w=new h.h,x=new h.h,E=null,T=null,A=0;4>A;A++){var P=!1,F=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,P=m.v<=j&&m.C>=j;break;case 1:j=this.Da.G,P=m.G<=j&&m.H>=j;break;case 2:j=this.Da.C,P=m.v<=j&&m.C>=j;break;case 3:j=this.Da.H,P=m.G<=j&&m.H>=j}if(P)for(P=f,f=c.Ja(),(P=P.Ha()).aj();P.ab();)for(var H,W=!0;P.Ia();){var G=P.ia();G.A(a);var ee=this.Nh(a,A,j);if(ee==-1){if(0<(ee=G.fq(F,j,o,u))){var ae=0;G.$p(w);for(var le=0;le<=ee;le++)if(ae!=(H=le<ee?u[le]:1)){G.dh(ae,H,p);var ie=p.get();ie.Ec(w),le<ee&&(F?(x.x=o[le],x.y=j):(x.x=j,x.y=o[le]),ie.Rc(x)),ie.A(n);var be=this.Nh(n,A,j);be==-1&&(E==null&&(E=new h.h),T==null&&(T=new h.h),ie.$p(E),ie.Vr(T),F?(ae=Math.abs(E.y-j))<(be=Math.abs(T.y-j))?(E.y=j,ie.Ec(E)):(T.y=j,ie.Rc(T)):(ae=Math.abs(E.x-j))<(be=Math.abs(T.x-j))?(E.x=j,ie.Ec(E)):(T.x=j,ie.Rc(T)),ie.A(n),be=this.Nh(n,A,j)),ie.Vr(w),ae=H,(H=be)==1?(f.oc(ie,W),W=!1):W=!0}}}else(H=ee)==1?(f.oc(G,W),W=!1):W=!0}}return f},b.prototype.zB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var c=new h.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,n=this.g.V(n))this.g.D(n,c),(this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},b.prototype.Hy=function(c){for(var a=new h.h,n=new h.h,o=null,u=null,p=h.P.lg(2048,0),f=this.g.Ob(this.Y);f!=-1;f=this.g.Sb(f)){var m=this.g.Ya(f),w=m;do{var x=this.g.V(w);this.g.D(w,a);var E=-1;if(a.x==this.Da.v?(this.g.D(x,n),n.x==this.Da.v&&(E=1)):a.x==this.Da.C&&(this.g.D(x,n),n.x==this.Da.C&&(E=1)),a.y==this.Da.G?(this.g.D(x,n),n.y==this.Da.G&&(E=0)):a.y==this.Da.H&&(this.g.D(x,n),n.y==this.Da.H&&(E=0)),E!=-1){if(o==null&&(o=new h.h),u==null&&(u=new h.h),o.N(a),u.na(0,0),E==0){var T=a.x-this.Da.v;u.x=h.mc.sign(n.x-a.x),o.x=c*h.mc.Dn(Math.floor(Math.abs(T/c)),T)+this.Da.v,0>o.x&&(o.x+=c)}else T=a.y-this.Da.G,u.y=h.mc.sign(n.y-a.y),o.y=c*h.mc.Dn(Math.floor(Math.abs(T/c)),T)+this.Da.G,0>o.y&&(o.y+=c);T=E!=0?n.y-a.y:n.x-a.x;var A=Math.abs(T);if(65536<A/c)throw h.i.ga("internal error");if(0<A){A=h.P.truncate(A/c)+2,p.length<A&&(p=h.P.lg(A));for(var P=A=0;;P++){var F=new h.h;if(F.x=o.x+u.x*P*c,F.y=o.y+u.y*P*c,1<=(F=(E!=0?F.y-a.y:F.x-a.x)/T))break;0>=F||(p[A]=F,A++)}A!=0&&this.g.Wl(w,p,A)}}w=x}while(w!=m)}},b.prototype.Xl=function(c,a){for(var n=-1,o=new h.h,u=null,p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),m=0,w=this.g.Ka(p);m<w;m++){var x=this.g.V(f);this.g.D(f,o),(c?o.y==a:o.x==a)&&(this.g.D(x,o),(c?o.y==a:o.x==a)&&(n==-1&&(n=this.g.Hd()),u==null&&(u=new h.ja(0)).Jb(100),this.g.Qa(f,n)!=1&&(u.add(f),this.g.Sa(f,n,1)),this.g.Qa(x,n)!=1&&(u.add(x),this.g.Sa(x,n,1)))),f=x}if(n!=-1&&this.g.Ud(n),!(u==null||3>u.size)){var E=this;u.Wd(0,u.size,function(le,ie){return E.Oh(le,ie)}),n=new h.h,p=new h.h,f=new h.h,p.Sc();var T=-1;m=new h.ja(0),w=new h.ja(0),x=null;for(var A=this.g.Hd(),P=this.g.Hd(),F=0,j=u.size;F<j;F++){var H=u.get(F);if(this.g.D(H,o),!o.rb(p)){if(T!=-1){for(var W=T;W<F;W++){T=u.get(W);var G=this.g.V(T);H=this.g.Na(T);var ee=!1;this.g.D(G,n),0>p.compare(n)&&(c?n.y==a:n.x==a)&&(m.add(T),ee=!0,this.g.Sa(T,P,1)),this.g.D(H,n),0>p.compare(n)&&(c?n.y==a:n.x==a)&&(ee||m.add(T),this.g.Sa(T,A,1))}for(W=0,ee=m.size;W<ee;W++){if(T=m.get(W),H=this.g.Qa(T,A),G=this.g.Qa(T,P),H==1&&(H=this.g.Na(T),this.g.D(H,f),!f.rb(o))){x==null&&(x=[]);var ae=h.h.ub(p,f);x[0]=h.h.ub(f,o)/ae,x[0]==0?x[0]=2220446049250313e-31:x[0]==1&&(x[0]=.9999999999999998),this.g.Wl(H,x,1),H=this.g.Na(T),this.g.mf(H,o),w.add(H),this.g.Sa(H,A,1),this.g.Sa(H,P,-1)}G==1&&(G=this.g.V(T),this.g.D(G,f),f.rb(o)||(x==null&&(x=[]),ae=h.h.ub(p,f),x[0]=h.h.ub(p,o)/ae,x[0]==0?x[0]=2220446049250313e-31:x[0]==1&&(x[0]=.9999999999999998),this.g.Wl(T,x,1),H=this.g.V(T),this.g.mf(H,o),w.add(H),this.g.Sa(H,A,-1),this.g.Sa(H,P,1)))}T=m,m=w,(w=T).clear(!1)}T=F,p.N(o)}}this.g.Ud(A),this.g.Ud(P)}},b.prototype.Pl=function(c,a){for(var n=new h.h,o=null,u=-1,p=0,f=this.ed.size;p<f;p++){var m=this.ed.get(p);if(m!=-1){var w=this.g.V(m);this.g.D(m,n),(c?n.y==a:n.x==a)&&(this.g.D(w,n),(c?n.y==a:n.x==a)&&(u==-1&&(u=this.g.Hd()),o==null&&(o=new h.ja(0)).Jb(100),this.g.Qa(m,u)!=-2&&(o.add(m),this.g.Sa(m,u,-2)),this.g.Qa(w,u)!=-2&&(o.add(w),this.g.Sa(w,u,-2))))}}if(o==null)u!=-1&&this.g.Ud(u);else{var x=this;for(o.Wd(0,o.size,function(ie,be){return x.Oh(ie,be)}),p=0,f=o.size;p<f;p++){var E=o.get(p);this.g.Sa(E,u,p)}m=new h.h,(w=new h.h).Sc();var T=-1;for(p=0,f=o.size;p<f;p++)if((E=o.get(p))!=-1&&(this.g.D(E,n),!n.rb(w))){if(T!=-1)for(;;){E=!1;for(var A=1<p-T?p-1:p,P=T;P<A;P++){var F=o.get(P);if(F!=-1){var j=-1,H=this.g.V(F);this.g.D(H,m),0>w.compare(m)&&(c?m.y==a:m.x==a)&&(j=H),H=-1;var W=this.g.Na(F);if(this.g.D(W,m),0>w.compare(m)&&(c?m.y==a:m.x==a)&&(H=W),j!=-1&&H!=-1)this.Mh(F,o,u),this.g.pd(F,!1),this.Mh(j,o,u),this.g.pd(j,!1),E=!0;else if(j!=-1||H!=-1){for(W=P+1;W<p;W++){var G=o.get(W);if(G!=-1){var ee=this.g.V(G),ae=-1;this.g.D(ee,m),0>w.compare(m)&&(c?m.y==a:m.x==a)&&(ae=ee),ee=this.g.Na(G);var le=-1;if(this.g.D(ee,m),0>w.compare(m)&&(c?m.y==a:m.x==a)&&(le=ee),ae!=-1&&le!=-1){this.Mh(G,o,u),this.g.pd(G,!1),this.Mh(ae,o,u),this.g.pd(ae,!1),E=!0;break}if(j!=-1&&le!=-1){this.At(o,F,j,G,le,u),E=!0;break}if(H!=-1&&ae!=-1){this.At(o,G,ae,F,H,u),E=!0;break}}}if(E)break}}}if(!E)break}T=p,w.N(n)}this.g.Ud(u)}},b.prototype.Mh=function(c,a,n){n=this.g.Qa(c,n),a.set(n,-1),n=this.g.Qa(c,this.li),this.ed.set(n,-1),(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},b.prototype.At=function(c,a,n,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,u),this.g.Cc(u,n),this.Mh(o,c,p),this.g.oi(o,!1),this.Mh(u,c,p),this.g.oi(u,!0)},b.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var n=this.ed.get(c);n!=-1&&this.g.cj(n,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{n=f,m=0;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=f);this.g.ep(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,m),u+=m,o++,p=this.g.Sb(p)}}for(c=0,a=this.ed.size;c<a;c++)if((n=this.ed.get(c))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),m=0,f=n;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=f);2>=m?(n=this.g.Qa(f,this.li),this.ed.set(n,-1),f=this.g.pd(f,!1),m==2&&(0<=(n=this.g.Qa(f,this.li))&&this.ed.set(n,-1),this.g.pd(f,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.ep(p,!1),u+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),c=0,a=this.g.ld;a!=-1;a=this.g.ve(a))c+=this.g.I(a);this.g.WB(c)},b.wy=function(c,a,n,o){return new b(a,o).vy(c,n)},b.clip=function(c,a,n,o,u){return b.Pu(c,a,null,n,o,u)},b.Pu=function(c,a,n,o,u,p){var f=c.K();if(f==33)return u=c.D(),a.contains(u)?c:c.Ja();if(f==197)return u=new h.l,c.A(u),u.Fa(a)?(a=new h.Hh,c.copyTo(a),a.Yo(u),a):c.Ja();if(c.B())return c;if(a.B())return c.Ja();var m=new h.l;if(c.yc(m),a.contains(m))return c;if(!a.isIntersecting(m))return c.Ja();if((n!=null||isNaN(o))&&h.ta.oy(n,a,!1),!h.ba.zj(f))throw h.i.O();if((n=c.Cb)!=null&&(n=n.Gk)!=null){if((n=n.So(a))==1){if(f!=1736)throw h.i.ga("internal error");return(c=new h.Ea(c.description)).vp(a),c}if(n==0)return c.Ja()}switch(f){case 550:for(p=null,f=c.I(),n=c.vb(0),o=0,u=new h.h,m=0;m<f;m++)n.uc(2*m,u),a.contains(u)||(o==0&&(p=c.Ja()),o<m&&p.Gd(c,o,m),o=m+1);return 0<o&&p.Gd(c,o,f),o==0?c:p;case 1736:case 1607:return b.wy(c,a,u,p);default:throw h.i.ga("internal error")}},b.prototype.Oh=function(c,a){var n=new h.h;return this.g.D(c,n),c=new h.h,this.g.D(a,c),n.compare(c)},b}();h.ti=L}(X||(X={})),function(h){var L=new h.h,b=function(){function a(n,o,u,p,f){this.Rm=new h.h,this.Ek=new h.h,this.Ri=new h.h,this.g=n,this.Cw=u,this.oo=p,this.Rm=o,this.Al=f,this.Ek.Sc(),this.Ri.Sc()}return a.prototype.rE=function(n){this.g.D(n,this.Ek),n=h.P.truncate((this.Ek.x-this.Rm.x)*this.oo+.5);var o=h.P.truncate((this.Ek.y-this.Rm.y)*this.oo+.5);return c.dG(n,o)},a.prototype.ez=function(n){return this.g.Qa(n,this.Al)},a.prototype.Ky=function(n,o){return this.g.D(n,this.Ek),this.g.D(o,this.Ri),c.Ev(this.Ek.x,this.Ek.y,this.Ri.x,this.Ri.y,this.Cw)},a}();h.kY=function(){};var c=function(){function a(){this.Rm=new h.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.ro=this.Al=-1}return a.cQ=function(n,o){var u=new a;return u.g=n,u.ra=o,u.Cw=o*o,u.bw=2*o,u.oo=1/u.bw,u.vO()},a.Ev=function(n,o,u,p,f){return(n-=u)*n+(o-=p)*o<=f},a.dG=function(n,o){return h.P.Vh(o,h.P.Vh(n))},a.prototype.xO=function(n,o){this.g.Hc(n,L);for(var u=(L.y-this.Rm.y)*this.oo,p=h.P.truncate((L.x-this.Rm.x)*this.oo),f=h.P.truncate(u),m=u=0;1>=m;m+=1)for(var w=0;1>=w;w+=1){var x=a.dG(p+m,f+w),E=this.zl.kR(x);E!=-1&&(this.rq[u]=E,this.zs[u]=x,u++)}for(p=u-1;1<=p;p--)for(E=this.rq[p],f=p-1;0<=f;f--)if(E==this.rq[f]){this.zs[f]=-1,p!=--u&&(this.zs[p]=this.zs[u],this.rq[p]=this.rq[u]);break}for(f=0;f<u;f++)this.yO(n,this.zs[f],L,this.rq[f],o)},a.prototype.yO=function(n,o,u,p,f){for(var m=new h.h;p!=-1;p=this.zl.yR(p)){var w=this.zl.ka(p);n==w||o!=-1&&this.g.Qa(w,this.Al)!=o||(this.g.Hc(w,m),a.Ev(u.x,u.y,m.x,m.y,this.Cw)&&f.add(p))}},a.prototype.Zm=function(n,o,u){var p=this.g.Qa(n,this.ro),f=this.g.Qa(o,this.ro);return p==-1&&(p=this.Ad.Rh(),this.Ad.addElement(p,n),this.g.Sa(n,this.ro,p)),f==-1?this.Ad.addElement(p,o):this.Ad.Cy(p,f),this.g.Sa(o,this.ro,-2),o=this.QT(n,o),u&&(u=this.mw.rE(n),this.g.Sa(n,this.Al,u)),o},a.OT=function(n,o,u){n.Nb(o),u=n;var p=new h.h;a.PT(n.D(),o.D(),p),u.Db(p)},a.PT=function(n,o,u){var p=n.x;n.x!=o.x&&(p=(1*n.x+1*o.x)/2);var f=n.y;n.y!=o.y&&(f=(1*n.y+1*o.y)/2),u.na(p,f)},a.prototype.QT=function(n,o){var u=new h.h;this.g.D(n,u);var p=new h.h;this.g.D(o,p);var f=this.g.XF(n),m=f+(o=this.g.XF(o)),w=0,x=u.x;u.x!=p.x&&(x=(u.x*f+p.x*o)/m,w++);var E=u.y;return u.y!=p.y&&(E=(u.y*f+p.y*o)/m,w++),0<w&&this.g.Db(n,x,E),this.g.nX(n,m),w!=0},a.prototype.vO=function(){var n=this.g.gd,o=this.g.CF();for(this.Rm=o.hz(),o=Math.max(o.da(),o.S())/2147483646,this.bw<o&&(this.bw=o,this.oo=1/this.bw),this.Ad=new h.cu,this.Ad.Bt(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.ro=this.g.Hd(),this.mw=new b(this.g,this.Rm,this.Cw,this.oo,this.Al),this.zl=new h.YK(h.P.truncate(4*n/3),this.mw),this.zl.sW(this.g.gd),n=!1,o=this.g.ld;o!=-1;o=this.g.ve(o))for(var u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++){var w=this.mw.rE(p);this.g.Sa(p,this.Al,w),this.zl.addElement(p,w),p=this.g.V(p)}var x=new h.ja(0);for(x.Jb(10),o=this.g.ld;o!=-1;o=this.g.ve(o))for(u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++){if(this.g.Qa(p,this.ro)!=-2)for(w=this.g.Qa(p,this.Al),this.zl.kd(p,w);this.xO(p,x),x.size!=0;){w=!1;for(var E=0,T=x.size;E<T;E++){var A=x.get(E),P=this.zl.ka(A);this.zl.wd(A),w=this.Zm(p,P,E+1==T)||w}if(n=n||w,x.clear(!1),!w)break}p=this.g.V(p)}return n&&this.pN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.ro),n},a.prototype.pN=function(){for(var n=new h.h,o=this.Ad.je;o!=-1;o=this.Ad.lz(o)){var u=this.Ad.sc(o);for(this.g.D(this.Ad.ka(u),n),u=this.Ad.lb(u);u!=-1;u=this.Ad.lb(u))this.g.mf(this.Ad.ka(u),n)}},a}();h.$t=c}(X||(X={})),function(h){var L=function(){function b(c){c===void 0&&(c=null),this.yg=null,this.Pb=!1,this.yg=c===null?[]:c}return b.prototype.copyTo=function(c){if(c.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.yg.length;a++)c.yg.push(this.yg[a].Pf())},b.prototype.count=function(){return this.yg.length},b.prototype.add=function(c){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.push(c.Pf())},b.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.length=0},b.prototype.remove=function(c){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.splice(c,1)},b.prototype.ig=function(){var c=new b;return this.copyTo(c),c},b.prototype.Pf=function(){return this.ig()},b.prototype.transform=function(c,a,n,o){if(c.length<a)throw h.i.ga("invalid Argument");var u=n;for(n=0;n<this.yg.length;n++){var p=this.yg[n];if(p.sm()!=null){var f=p.Vn,m=f?1:0,w=f?p.sm().getGeogcs2():p.sm().getGeogcs1();if(w=u/(w=w.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(w-1))for(u=0;u<a;u++)c[u][0]*=w,c[u][1]*=w;h.GC.geogToGeog(p.sm(),a,c,null,m),u=(f?p.sm().getGeogcs1():p.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(w=u/o,3552713678800501e-30<Math.abs(w-1))for(u=0;u<a;u++)c[u][0]*=w,c[u][1]*=w;return a},b.prototype.Nb=function(c){if(c==this)return!0;if(!(c instanceof b)||this.yg.length!=c.yg.length)return!1;for(var a=0;a<this.yg.length;a++)if(!this.yg[a].Nb(c.yg[a]))return!1;return!0},b.prototype.ix=function(){this.Pb=!0},b.prototype.toString=function(){for(var c="CGT ("+this.count()+") ",a=0,n=this.count();a<n;++a)c+=this.yg[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c},b.create=function(){return new b},b}();h.qC=L}(X||(X={})),function(h){var L,b=Math.PI,c=2*Math.PI,a=Math.PI/2,n=function(){function p(){}return p.NO=function(f,m){var w=new p;return w.x=f,w.y=m,w.type=0,w.Wh=0,w},p.cl=function(f){var m=new p;return m.x=f.x,m.y=f.y,m.type=0,m.Wh=0,m},p.MO=function(f){var m=new p;return m.x=f.x,m.y=f.y,m.type=f.type,m.Wh=f.Wh,m},p.Qd=function(f,m,w){var x=new p;return x.x=f.x+m*Math.cos(w),x.y=f.y+m*Math.sin(w),x.type=f.type,x.Wh=f.Wh,x},p.Ru=function(f,m){var w=new p;return w.x=.5*(f.x+m.x),w.y=.5*(f.y+m.y),w.type=f.type,w.Wh=f.Wh,w},p.NE=function(f,m){var w=new p;return w.x=f.x+.001*(m.x-f.x),w.y=f.y+.001*(m.y-f.y),w.type=f.type,w.Wh=f.Wh,w},p}(),o=function(){};(L=h.$K||(h.$K={}))[L.Round=0]="Round",L[L.Bevel=1]="Bevel",L[L.Miter=2]="Miter",L[L.Square=3]="Square";var u=function(){function p(f){this.HA=this.Zb=this.wg=null,this.nd=f}return p.W=function(f,m,w,x,E,T){if(f==null||1>f.Eb())throw h.i.O();return m==0||f.B()?f:((T=new p(T)).lo=f,T.La=m,T.ra=E,T.Mi=w,T.wA=x,T.Qx())},p.prototype.ZL=function(){var f=this.lo,m=f.ac(),w=f.xc(),x=new h.h;return x.vc(w,m),x.normalize(),x.Jv(),x.scale(this.La),m.add(x),w.add(x),x=f.Ja(),f.Ec(m),f.Rc(w),x},p.prototype.YL=function(){var f=this.lo;if(0<this.La&&this.Mi!=2){var m=new h.Ea;return m.bd(f,!1),this.lo=m,this.Qx()}return(f=new h.Hh(f.aa)).X(this.La,this.La),f},p.prototype.nJ=function(f,m,w,x){return(m.x-f.x)*(x.x-w.x)+(m.y-f.y)*(x.y-w.y)},p.prototype.hc=function(f,m){if(m===void 0)this.Zb.push(f),this.gf++;else if(this.gf==0)this.hc(f);else{var w=this.Dw,x=this.wg[m==0?w-1:m-1],E=this.wg[m],T=this.nJ(x,E,this.Zb[this.gf-1],f);0<T?this.hc(f):0>T&&(0<this.nJ(x,E,E,this.Zb[this.gf-1])?(E=this.wg[m==0?w-2:m==1?w-1:m-2],w=n.Qd(x,this.La,Math.atan2(x.y-E.y,x.x-E.x)-a),this.Zb[this.gf-1]=w,this.Mi==1||this.Mi==2?(w=n.Ru(w,x),this.hc(w),w=n.Qd(x,this.La,this.Lv+a),(x=n.Ru(w,x)).type|=256,this.hc(x)):(w=n.Qd(x,this.La,this.Lv+a)).type|=256,this.hc(w),this.hc(f,m)):(w=n.Qd(E,this.La,this.Lv+a),this.hc(w),this.Mi==1||this.Mi==2?(w=n.Ru(w,E),this.hc(w),w=n.Qd(E,this.La,this.Wz-a),(x=n.Ru(w,E)).type|=256,this.hc(x)):(w=n.Qd(E,this.La,this.Wz-a)).type|=256,this.hc(w)))}},p.prototype.gE=function(){var f,m=this.Dw;this.gf=0;var w=.5*this.ra,x=0,E=0;for(f=0;f<m;f++){var T=this.wg[f],A=f==0?this.wg[m-1]:this.wg[f-1],P=f==m-1?this.wg[0]:this.wg[f+1],F=A.x-T.x,j=A.y-T.y,H=P.x-T.x,W=P.y-T.y,G=Math.atan2(j,F),ee=Math.atan2(W,H);if(this.Lv=G,this.Wz=ee,f==0&&(x=G,E=ee),F=F*W-H*j,j=ee,ee<G&&(ee+=c),0<F*this.La)this.Mi==1||this.Mi==2?(G=n.Qd(T,this.La,G+a),this.hc(G),G=n.NE(T,G),this.hc(G),G=n.Qd(T,this.La,ee-a),(T=n.NE(T,G)).type|=256,this.hc(T),this.hc(G)):(F=.5*(ee-G),F=this.La/Math.abs(Math.sin(F)),G=n.Qd(T,F,.5*(G+ee)),this.hc(G,f));else if((512&T.type)!=0){for(F=1-w/Math.abs(this.La),A=1,P=0>this.La?-b:b,-1<F&&1>F&&(.017453292519943295>(j=2*Math.acos(F))&&(j=.017453292519943295),1<(A=h.P.truncate(b/j+1.5))&&(P/=A)),j=G+a,G=n.Qd(T,this.La,j),f==0&&(G.type|=1024),this.hc(G,f),F=this.La/Math.cos(P/2),j+=P/2,(G=n.Qd(T,F,j)).type|=1024,this.hc(G);0<--A;)j+=P,(G=n.Qd(T,F,j)).type|=1024,this.hc(G);(G=n.Qd(T,this.La,ee-a)).type|=1024,this.hc(G)}else if(this.Mi==1)G=n.Qd(T,this.La,G+a),this.hc(G,f),G=n.Qd(T,this.La,ee-a),this.hc(G);else if(this.Mi==0)for(F=1-w/Math.abs(this.La),A=1,P=ee-a-(G+a),-1<F&&1>F&&(.017453292519943295>(j=2*Math.acos(F))&&(j=.017453292519943295),1<(A=h.P.truncate(Math.abs(P)/j+1.5))&&(P/=A)),F=this.La/Math.cos(.5*P),j=G+a+.5*P,G=n.Qd(T,F,j),this.hc(G,f);0<--A;)j+=P,G=n.Qd(T,F,j),this.hc(G);else this.Mi==2?(F=A.x-T.x,j=A.y-T.y,.99999999<(A=(F*(H=P.x-T.x)+j*(W=P.y-T.y))/Math.sqrt(F*F+j*j)/Math.sqrt(H*H+W*W))?(G=n.Qd(T,1.4142135623730951*this.La,ee-.25*b),this.hc(G,f),G=n.Qd(T,1.4142135623730951*this.La,ee+.25*b),this.hc(G)):(A=Math.abs(this.La/Math.sin(.5*Math.acos(A))))>(P=Math.abs(this.wA*this.La))?(F=.5*(ee-G),F=this.La/Math.abs(Math.sin(F)),G=n.Qd(T,F,.5*(G+ee)),ee=h.h.construct(G.x,G.y),G=h.h.construct(T.x,T.y),(T=new h.h).vc(ee,G),(ee=new h.h).yW(P/T.length(),T,G),G=(A-P)*Math.abs(this.La)/Math.sqrt(A*A-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(G/T.length()),(G=new h.h).add(ee,T),(A=new h.h).vc(ee,T),G=n.cl(G),this.hc(G,f),G=n.cl(A),this.hc(G)):(F=.5*(ee-G),F=this.La/Math.abs(Math.sin(F)),G=n.Qd(T,F,.5*(G+ee)),this.hc(G,f))):(ee=j,0<this.La?(ee>G&&(ee-=c),A=G-ee<a):(ee<G&&(ee+=c),A=ee-G<a),A?(j=0>(F=1.4142135623730951*this.La)?G+.25*b:G+.75*b,G=n.Qd(T,F,j),this.hc(G,f),j=0>F?ee-.25*b:ee-.75*b,G=n.Qd(T,F,j),this.hc(G)):(F=.5*(ee-G),F=this.La/Math.abs(Math.sin(F)),ee<G&&(ee+=c),G=n.Qd(T,F,(G+ee)/2),this.hc(G,f)))}return this.Lv=x,this.Wz=E,this.hc(this.Zb[0],0),T=n.MO(this.Zb[this.gf-1]),this.Zb[0]=T,this.oW()},p.prototype.Cu=function(f,m){if(!(2>m))for(var w=0;w<m;w++){var x=this.Zb[f+w];w!=0?this.HA.Ei(h.h.construct(x.x,x.y)):this.HA.Nt(h.h.construct(x.x,x.y))}},p.prototype.$L=function(f,m,w){var x=f.Ca(m),E=f.Wc(m);if(this.Zb=[],this.HA=w,f.ec(m)){for(m=f.Oa(x);f.Oa(E-1).rb(m);)E--;if(2<=E-x){for(this.Dw=E-x,this.wg=[],m=x;m<E;m++)this.wg.push(n.cl(f.Oa(m)));this.gE()&&this.Cu(0,this.gf-1)}}else{for(m=f.Oa(x);x<E&&f.Oa(x+1).rb(m);)x++;for(m=f.Oa(E-1);x<E&&f.Oa(E-2).rb(m);)E--;if(2<=E-x){for(this.Dw=2*(E-x)-2,this.wg=[],(w=n.cl(f.Oa(x))).type|=1536,this.wg.push(w),m=x+1;m<E-1;m++)w=n.cl(f.Oa(m)),this.wg.push(w);for((w=n.cl(f.Oa(E-1))).type|=512,this.wg.push(w),m=E-2;m>=x+1;m--)(w=n.cl(f.Oa(m))).type|=1024,this.wg.push(w);if(this.gE())if(2<=this.Zb.length){for(f=-1,(E=(1024&this.Zb[this.gf-1].type)!=0)||(f=0),m=1;m<this.gf;m++)(x=(1024&this.Zb[m].type)!=0)?E||1<(E=m-1)-f+1&&this.Cu(f,E-f+1):E&&(f=m-1),E=x;E||1<(E=this.gf-1)-f+1&&this.Cu(f,E-f+1)}else f=0,E=this.gf-1,0<=f&&1<=E-f&&this.Cu(f,E-f+1)}}this.wg=null,this.Dw=0,this.Zb=null,this.gf=0},p.prototype.oW=function(){for(var f=!1,m=0;m<this.gf;m++){var w=this.Zb[m];w.sh=m+1,w.uh=m-1,this.Zb[m]=w}for((w=this.Zb[0]).uh=this.gf-2,this.Zb[0]=w,(w=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=w,m=w=0;m<this.gf;m++)if((256&this.Zb[w].type)!=0){var x=this.AP(w);if(x==-1){f=!0;break}w=x}else w=this.Zb[w].sh;return!f&&(this.KO(w),!0)},p.prototype.AP=function(f){for(var m,w,x=this.gf-1,E=f,T=1;T<=x-2;T++){m=E=this.Zb[E].sh,w=f;for(var A=1;A<=T;A++){if(w=this.Zb[w].uh,(256&this.Zb[w].type)==0&&(256&this.Zb[m].type)==0){var P=this.$R(w,m);if(P!=-1)return P}m=this.Zb[m].uh}}return-1},p.prototype.$R=function(f,m){var w=this.Zb[this.Zb[f].uh],x=this.Zb[f],E=this.Zb[this.Zb[m].uh],T=this.Zb[m];if(!this.AW(w,x,E,T))return-1;var A=new o;return this.rQ(w,x,E,T,A)&&!A.WD&&h.P.WJ((x.x-w.x)*(T.y-E.y)-(x.y-w.y)*(T.x-E.x))!=h.P.WJ(this.La)?(w=this.Zb[f].uh,A.cn.type=x.type,A.cn.sh=m,A.cn.uh=w,this.Zb[f]=A.cn,A.cn=this.Zb[m],A.cn.uh=f,this.Zb[m]=A.cn,m):-1},p.prototype.AW=function(f,m,w,x){return Math.max(f.x,m.x)>=Math.min(w.x,x.x)&&Math.max(w.x,x.x)>=Math.min(f.x,m.x)&&Math.max(f.y,m.y)>=Math.min(w.y,x.y)&&Math.max(w.y,x.y)>=Math.min(f.y,m.y)},p.prototype.rQ=function(f,m,w,x,E){E.WD=!1;var T=(m.y-f.y)*(x.x-w.x)-(m.x-f.x)*(x.y-w.y),A=(w.y-f.y)*(m.x-f.x)-(w.x-f.x)*(m.y-f.y);if(0<=(T=T==0?2:A/T)&&1>=T){var P=T;if(T=(x.y-w.y)*(m.x-f.x)-(x.x-w.x)*(m.y-f.y),A=(f.y-w.y)*(x.x-w.x)-(f.x-w.x)*(x.y-w.y),0<=(T=T==0?2:A/T)&&1>=T)return E.cn=n.NO(f.x+T*(m.x-f.x),f.y+T*(m.y-f.y)),E.cn.Wh=w.Wh+P*(x.Wh-w.Wh),P!=0&&P!=1||T!=0&&T!=1||(E.WD=!0),E.NY=T,E.OY=P,!((P==0||P==1)&&0<T&&1>T||(T==0||T==1)&&0<P&&1>P)}return!1},p.prototype.KO=function(f){for(;this.Zb[f].uh<f;)f=this.Zb[f].uh;var m=0,w=f;do w=this.Zb[w],this.Zb[m]=w,w=w.sh,m++;while(w!=f);this.Zb[m]=this.Zb[0],this.gf=m+1},p.prototype.UC=function(f){var m=this.lo,w=m.Ha();if(w!=null){w.aj();for(var x=-1;w.ab();)x++,this.$L(m,x,f)}},p.prototype.Qx=function(){var f=this.lo.K();return f==322?this.ZL():f==197?this.YL():h.ba.zd(f)?((f=new h.Ua).oc(this.lo,!0),this.lo=f,this.Qx()):f==1607?(f=new h.Ua,this.UC(f),f):f==1736?(f=new h.Ea,this.UC(f),f):null},p}();h.CK=u}(X||(X={})),function(h){var L=function(){function n(o){this.rk=o}return n.prototype.D=function(o,u){this.rk.g.D(o,u)},n.prototype.wd=function(o){var u=this.rk.Ga.ka(o);this.rk.Ga.wd(o,-1),this.rk.g.pd(u,!1)},n}(),b=function(){function n(o){this.rk=o}return n.prototype.D=function(o,u){this.rk.AT.D(o,u)},n.prototype.wd=function(o){this.rk.Ga.wd(o,-1)},n}(),c=function(){function n(o){this.rk=o}return n.prototype.D=function(o,u){u.N(this.rk.DT[o])},n.prototype.wd=function(o){this.rk.Ga.wd(o,-1)},n}(),a=function(){function n(o){o===void 0?(this.Ga=new h.Zj,this.Ga.Ee(20),this.g=new h.hd,this.oT=this.g.Kg(550),this.Us=this.g.wf(this.oT,-1),this.Zh=new L(this)):o instanceof Array?(this.Ga=new h.Zj,this.Ga.Ee(20),this.DT=o,this.Zh=new c(this)):(this.Ga=new h.Zj,this.Ga.Ee(20),this.AT=o,this.Zh=new b(this))}return n.prototype.Ib=function(o){var u=o.K();if(h.Fx.zj(u))this.dN(o);else if(h.Wk.zd(u))this.iN(o);else if(u==197)this.aN(o);else{if(u!=33)throw h.i.O("invalid shape type");this.hN(o)}},n.prototype.XQ=function(){var o=new h.Ta,u=this.Ga.sc(-1),p=new h.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(u),o),p.nf(o),u=this.Ga.lb(u);u!=-1;u=this.Ga.lb(u))this.g.Xi(this.Ga.ka(u),o),p.lineTo(o);return p},n.LO=function(o){var u=new n(o),p=o.I(),f=1,m=new h.h,w=new h.h,x=new h.h;for(o.D(0,m);o.D(f,w),w.Mz(m)&&f<p-1;)f++;for(u.Ga.addElement(0,-1),u.Ga.yn(f),p=f+1;p<o.I();p++)o.D(p,x),(f=u.jC(x))!=-1&&u.Ga.Uj(f,p);for(x=new h.Ta,f=u.Ga.sc(-1),p=new h.Ea(o.description),o.we(u.Ga.ka(f),x),p.nf(x),f=u.Ga.lb(f);f!=-1;f=u.Ga.lb(f))o.we(u.Ga.ka(f),x),p.lineTo(x);return p},n.construct=function(o,u,p){for(var f=new n(o),m=1,w=o[0];o[m].Mz(w)&&m<u-1;)m++;for(f.Ga.addElement(0,-1),f.Ga.yn(m),m+=1;m<u;m++)(w=f.jC(o[m]))!=-1&&f.Ga.Uj(w,m);for(o=0,u=f.Ga.sc(-1);u!=-1;u=f.Ga.lb(u))p[o++]=f.Ga.ka(u);return o},n.DG=function(o,u){var p=o.Ca(u),f=o.Wc(u);if(u=!o.ec(u)&&o.On(u),o=o.vb(0),f*=2,u&&(f-=2),6>f-(p*=2))return!0;u=new h.h;var m=new h.h,w=new h.h;o.uc(p,u),o.uc(p+2,m),o.uc(p+4,w);var x=n.Yu(m,w,u);if(x.rs()||!n.wm(x.value()))return!1;var E=h.h.construct(m.x,m.y),T=new h.h;for(p+=6;p<f;p+=2)if(T.N(m),m.N(w),o.uc(p,w),(x=n.Yu(m,w,u)).rs()||!n.wm(x.value())||(x=n.Yu(E,w,u)).rs()||!n.wm(x.value())||(x=n.Yu(m,w,T)).rs()||!n.wm(x.value()))return!1;return!0},n.prototype.dN=function(o){for(var u=new h.Ta,p=new h.h,f=0;f<o.I();f++){o.D(f,p);var m=this.Er(p);if(m!=-1){o.we(f,u);var w=this.g.hc(this.Us,u);this.Ga.Uj(m,w)}}},n.prototype.aN=function(o){for(var u=new h.Ta,p=new h.h,f=0;4>f;f++){o.gB(f,p);var m=this.Er(p);if(m!=-1){o.If(f,u);var w=this.g.hc(this.Us,u);this.Ga.Uj(m,w)}}},n.prototype.iN=function(o){var u=new h.Ta,p=o.ac();if((p=this.Er(p))!=-1){o.Uo(u);var f=this.g.hc(this.Us,u);this.Ga.Uj(p,f)}p=o.xc(),(p=this.Er(p))!=-1&&(o.Qo(u),o=this.g.hc(this.Us,u),this.Ga.Uj(p,o))},n.prototype.hN=function(o){var u=o.D();(u=this.Er(u))!=-1&&(o=this.g.hc(this.Us,o),this.Ga.Uj(u,o))},n.prototype.Er=function(o){var u=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var p=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return o.Mz(p)||(u=this.Ga.yn(-5)),u}return this.jC(o)},n.prototype.jC=function(o){var u=-1;do{var p=this.Ga.sc(-1),f=this.Ga.Gc(-1),m=this.Ga.ka(p),w=this.Ga.ka(f),x=new h.h,E=new h.h;if(this.Zh.D(m,x),this.Zh.D(w,E),m=h.h.Wq(E,o,x),n.wm(m))u=this.Ga.yn(-1),(x=this.hC(o,f,p))!=p&&this.iC(o,p,this.Ga.xe(x));else if(n.wG(m)){E=this.Ga.uv(-1);var T=this.Ga.sc(-1),A=this.Ga.Gc(-1);for(m=new h.h,w=new h.h;T!=this.Ga.xe(A);){var P=this.Ga.ka(E);this.Zh.D(P,m),P=h.h.Wq(m,o,x),n.wG(P)?(A=E,E=this.Ga.nl(E)):(T=E,E=this.Ga.Zp(E))}if(E=A,x=T,P=this.Ga.ka(E),T=this.Ga.ka(x),this.Zh.D(P,m),this.Zh.D(T,w),x!=p&&(m=h.h.Wq(w,o,m),!n.wm(m)))continue;u=this.Ga.Bu(x,E,-2,!1),this.iC(o,E,f),this.hC(o,x,p)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec(E),this.tb.Rc(x),0>(x=this.tb.fe(o,!0))?(x=this.Ga.xe(f),this.Ga.wd(f,-1),u=this.Ga.yn(-3),this.hC(o,x,p)):1<x&&(x=this.Ga.lb(p),this.Ga.wd(p,-1),u=this.Ga.Bu(-1,x,-3,!1),this.iC(o,x,f))}while(0);return u},n.prototype.iC=function(o,u,p){if(u!=p){var f=this.Ga.ka(u),m=this.Ga.lb(u),w=new h.h,x=new h.h;for(this.Zh.D(f,w);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),x),f=h.h.Wq(x,o,w),!n.wm(f));)f=u,u=m,w.N(x),m=this.Ga.lb(u),this.Zh.wd(f)}},n.prototype.hC=function(o,u,p){if(u==p)return p;var f=this.Ga.ka(u),m=this.Ga.xe(u),w=new h.h,x=new h.h;for(this.Zh.D(f,w);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),x),f=h.h.Wq(w,o,x),!n.wm(f));)f=u,u=m,w.N(x),m=this.Ga.xe(u),this.Zh.wd(f);return u},n.Yu=function(o,u,p){var f=new h.Xb;f.set(u.x),f.sub(o.x);var m=new h.Xb;m.set(p.y),m.sub(o.y);var w=new h.Xb;return w.set(u.y),w.sub(o.y),(u=new h.Xb).set(p.x),u.sub(o.x),f.Ag(m),w.Ag(u),f.sub(w),f},n.wm=function(o){return 0>o},n.wG=function(o){return 0<o},n}();h.au=a}(X||(X={})),function(h){var L=function(){function b(c){this.g=null,this.nH=!0,this.nd=c}return b.rU=function(c,a,n){return c=h.ta.Gr(c),h.$t.Ev(a.Ng(),a.kh(),n.Ng(),n.kh(),h.mc.ox(c))},b.wO=function(c,a){var n=new h.Ta;return h.$t.OT(c,a,n),n},b.W=function(c,a,n,o){return(n=new b(n)).g=c,n.ra=a,n.nH=o,n.yM()},b.prototype.hM=function(c){return h.$t.cQ(this.g,c)},b.prototype.mM=function(c){return h.bu.W(this.g,c,this.nd)},b.prototype.yM=function(){var c=this.ra,a=h.ta.Gr(c),n=1.00001*(c=h.ta.lN(c));c*=1.000001;for(var o=!1,u=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),p=0,f=this.g.cS();;p++){if(p>u)throw h.i.ga("Internal Error: max number of iterations exceeded");var m=this.hM(a);if(o=o||m,this.nH&&(m=this.g.Ip(a,!0,!1)!=0,o=o||m),m=!1,(p==0||f||h.bu.eI(!0,this.g,c,null,this.nd))&&(m=this.mM(n),o=o||m),!m)break;h.np.Bp(this.nd)}return o},b}();h.Uk=L}(X||(X={})),function(h){var L=function(){function c(a){this.ae=this.Nc=null,this.$s=0,this.Vb=a,this.Yz=!0}return c.prototype.wv=function(a,n){var o=this.g.cc(a);if(o==null){if(!this.g.fd(a,n))return null;o=n}return o},c.prototype.Zq=function(){var a;a===void 0&&(a=!1),this.$s++,(a||(4095&this.$s)==0)&&(this.$s=0,h.np.Bp(this.Vb))},c.prototype.hP=function(){var a=this.g.$q(!1),n=!1,o=new h.zb,u=new h.zb,p=new h.l;p.Pa();var f=new h.l;f.Pa();for(var m=new h.Ta,w=new h.NC,x=a.next();x!=-1;x=a.next()){h.np.Bp(this.Vb);var E=null,T=!1;if(!h.ba.Sn(this.g.jc(a.dk))){if((E=this.wv(x,o))==null)continue;if(E.A(p),p.X(this.ra,this.ra),E.Di(this.ra)){if(!E.Di(0))continue;T=!0,E=null}}var A=this.g.$q(a),P=A.next();for(P!=-1&&(P=A.next());P!=-1;P=A.next()){var F=null,j=!1;if(!h.ba.Sn(this.g.jc(A.dk))){if((F=this.wv(P,u))==null)continue;if(F.A(f),F.Di(this.ra)){if(!F.Di(0))continue;j=!0,F=null}}var H=0,W=0;if(E!=null&&F!=null)p.BG(f)&&(w.Po(E),w.Po(F),w.Fa(this.ra,!1),0<(H=w.ql(0))+(W=w.ql(1))&&(this.g.lr(x,w,0,!0),this.g.lr(P,w,1,!0)),w.clear());else if(E!=null){var G=new h.h;if(this.g.D(P,G),p.contains(G)){if(w.Po(E),this.g.Xi(P,m),w.Fz(this.ra,m,!1),0<(H=w.ql(0)))if(this.g.lr(x,w,0,!0),j){for(j=-1,G=this.g.V(P);G!=-1&&G!=P&&(j=G,(F=this.wv(G,u))!=null&&F.Di(0));G=this.g.V(G));for(G=P;G!=-1&&(this.g.Fh(G,w.Cf),G!=j);G=this.g.V(G));}else this.g.Fh(P,w.Cf);w.clear()}}else{if(F==null)continue;if(G=new h.h,this.g.D(x,G),f.X(this.ra,this.ra),f.contains(G)){if(w.Po(F),this.g.Xi(x,m),w.Fz(this.ra,m,!1),0<(W=w.ql(0)))if(this.g.lr(P,w,0,!0),T){for(j=-1,G=this.g.V(x);G!=-1&&G!=x&&(j=G,(F=this.wv(G,u))!=null&&F.Di(0));G=this.g.V(G));for(G=x;G!=-1&&(this.g.Fh(G,w.Cf),G!=j);G=this.g.V(G));}else this.g.Fh(x,w.Cf);w.clear()}}if(H+W!=0){if(H!=0){if((E=this.g.cc(x))==null){if(!this.g.fd(x,o))continue;E=o,o.A(p)}else E.A(p);if(E.Di(this.ra))break}n=!0}}}return n},c.prototype.iP=function(){return this.IU()},c.prototype.IU=function(){return new h.LC().HX(this.g,this.ra)},c.prototype.fI=function(){var a=!1;this.Nc==null&&(this.Nc=new h.Zj);var n=new h.ja(0);n.Jb(this.g.gd+1);for(var o=this.g.$q(),u=o.next();u!=-1;u=o.next())n.add(u);this.g.nx(n,n.size),n.add(-1),o=this.g.Hd(),u=this.g.Hd(),this.ae=new h.OC(this.g,this.ra,!this.Yz),this.Nc.Wo(this.ae);var p=new h.ja(0),f=new h.ja(0),m=0;new h.h;var w=this.g.ud;this.g.wb.rc();for(var x,E,T=this.g.wb.Aa[0].o,A=n.get(m++);A!=-1;){var P=x=T[2*(E=w.U(A,0))],F=E=T[2*E+1];do{var j=w.U(A,2),H=w.U(A,1);if(j!=-1){var W=w.U(j,0),G=T[2*W];0>(F<(W=T[2*W+1])?-1:F>W?1:P<G?-1:P>G?1:0)&&(f.add(A),f.add(j))}H!=-1&&(G=T[2*(W=w.U(H,0))],0>(F<(W=T[2*W+1])?-1:F>W?1:P<G?-1:P>G?1:0)&&(f.add(H),f.add(H))),(G=this.g.Qa(A,o))!=-1&&(p.add(G),this.g.Sa(A,o,-1)),(G=this.g.Qa(A,u))!=-1&&(p.add(G),this.g.Sa(A,u,-1)),(A=n.get(m++))!==-1&&(P=T[2*(F=w.U(A,0))],F=T[2*F+1])}while(A!=-1&&P===x&&F===E);for(P=p.size==1&&f.size==2,G=F=-1,j=0,H=p.size;j<H;j++){W=p.get(j);var ee=this.Nc.xe(W);if(ee==-1||p.bG(ee)||(F=ee),(W=this.Nc.lb(W))==-1||p.bG(W)||(G=W),F!=-1&&G!=-1)break}for(this.ae.UJ(E,x),j=0,H=p.size;j<H;j++)W=p.get(j),this.Nc.wd(W,-1);if(p.clear(!1),!P&&F!=-1&&G!=-1&&this.kO(F,G)){a=!0,this.Pi=this.ae.tm();break}for(j=0,H=f.size;j<H;j+=2){if(E=f.get(j),x=f.get(j+1),P?(E=this.Nc.Bu(F,G,E,!0),P=!1):E=this.Nc.addElement(E,-1),this.ae.rg){this.Pi=this.ae.tm(),a=!0;break}this.g.Qa(x,o)==-1?this.g.Sa(x,o,E):this.g.Sa(x,u,E)}if(a)break;f.Dh(0)}return this.g.Ud(o),this.g.Ud(u),a},c.prototype.kO=function(a,n){return this.ae.compare(this.Nc,this.Nc.ka(a),n),a=this.ae.rg,this.ae.Mr(),a},c.sE=function(a){for(var n=a.ld;n!=-1;n=a.ve(n))if(h.ba.Ic(a.jc(n)))return!0;return!1},c.$P=function(a,n,o,u){return!!c.sE(a)&&((n=new c(u)).g=a,n.ra=o,15>a.gd?a=n.hP():n.iP())},c.W=function(a,n,o){return c.$P(a,a.CF(),n,o)},c.eI=function(a,n,o,u,p){if(!c.sE(n))return!1;var f=new c(p);if(f.g=n,f.ra=o,f.Yz=a,f.fI())return u!=null&&u.Yt(f.Pi),!0;var m=new h.Ed;return m.UB(),n.Pc(m),(f=new c(p)).g=n,f.ra=o,f.Yz=a,a=f.fI(),m.UB(),n.Pc(m),!!a&&(u!=null&&u.Yt(f.Pi),!0)},c.Ol=function(a,n){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*n<1*a*n},c.fP=function(a,n,o,u){if(h.ba.Ic(n.K()))return new c(u).gP(a,n,o);throw h.i.ga("crack_A_with_B")},c.prototype.gP=function(a,n,o){var u=new h.l;a.yc(u);var p=new h.l;if(n.yc(p),p.X(o,o),!p.isIntersecting(u))return a;var f=a.Cb,m=null;f!=null&&(m=f.Gb),c.Ol(a,a.I())&&(m=h.ta.lj(a,p));var w=m!=null?m.getIterator():null,x=n.Ha();n=a.Ha();var E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];x.ab();)for(;x.Ia();){var T=x.ia();if(m!=null){for(w.Vo(T,o),f=w.next();f!=-1;f=w.next())if(this.Zq(),n.Wb(m.ka(f),-1),n.Ia()){var A=(f=n.ia()).Fa(T,null,E,null,o);for(f=0;f<A;++f){var P=E[f];if(P!=0&&P!=1){var F=n.xb(),j=new b;j.t=P,j.index=F,p.push(j)}}}}else{var H=new h.l;if(T.yc(H),H.X(o,o),u.isIntersecting(H)){for(n.aj();n.ab();)for(;n.Ia();)if(this.Zq(),f=n.ia(),P=new h.l,f.yc(P),P.isIntersecting(H))for(A=f.Fa(T,null,E,null,o),f=0;f<A;++f)(P=E[f])!=0&&P!=1&&(F=n.xb(),(j=new b).t=P,j.index=F,p.push(j))}}}if(p.length==0)return a;for(p=p.sort(b.zy),a=a.Ja(),n.aj();n.ab()&&!n.Ia(););for(o=n.ia(),u=new h.hg,m=-1,f=0,w=p.length;f<w;){for(E=p[f].index,x=f+1;x<w&&p[x].index==E;)++x;for(;n.xb()<E;){if(this.Zq(),T=n.Ia(),P=n.gb,(H=T||!n.Pn()||n.Qn())&&a.oc(o,m!=P),m=P,!T)for(;n.ab()&&!n.Ia(););o=n.ia()}for(E=0;f<x;f++)(P=p[f].t)!=E&&(o.dh(E,P,u),E=P,P=n.gb,a.oc(u.get(),m!=P),m=P);if((H=(T=n.Ia())||!n.Pn()||n.Qn())&&(o.dh(E,1,u),a.oc(u.get(),!1)),T)o=n.ia();else{for(;n.ab()&&!n.Ia(););o=n.Ia()?n.ia():null}f=x}for(o!=null&&(P=n.gb,(H=(T=n.Ia())||!n.Pn()||n.Qn())&&a.oc(o,m!=P),m=P),T=n.Ia();;){if(!T){for(;n.ab()&&!(T=n.Ia()););if(!T)break}o=n.ia(),P=n.gb,(H=(T=n.Ia())||!n.Pn()||n.Qn())&&a.oc(o,m!=P),m=P}return a},c}();h.bu=L;var b=function(){function c(){}return c.zy=function(a,n){return a.index==n.index?a.t>n.t?1:a.t<n.t?-1:0:a.index>n.index?1:-1},c}()}(X||(X={})),function(h){var L;(L=h.EK||(h.EK={}))[L.Left=0]="Left",L[L.Right=1]="Right",L[L.Coincident=2]="Coincident",L[L.Undefined=3]="Undefined",L[L.Uncut=4]="Uncut";var b=function(n,o,u,p,f,m,w,x,E,T,A){this.Y=n,this.ct=o,this.Ps=u,this.tg=p,this.Nm=T,this.Cl=A};h.mY=b;var c=function(){function n(o,u){this.DH=o,this.Ji=u}return n.prototype.kM=function(o,u){var p=new h.h;this.Ji.D(o,p);var f=new h.h;return this.Ji.D(u,f),(p=p.compare(f))!=0?p:(o=this.Ji.Qa(o,this.DH))<(u=this.Ji.Qa(u,this.DH))?-1:o==u?0:1},n}(),a=function(n,o,u,p,f,m,w,x,E){this.tg=n,this.Ps=o,this.IA=u,this.OH=p,this.Gi=f,this.Cl=m,this.Nm=w,this.PH=x,this.GT=E};h.lY=a,h.FK=function(){function n(){}return n.DK=function(o,u,p,f,m,w){if(u.B())o=new b(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else if(p.B())o=new b(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{var x=new h.hd;if(x.Ib(u),x.Ib(p),h.Uk.W(x,f,w,!0),x.gd==0)o=new b(u.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{for(u=0,p=x.Hd(),f=x.ld;f!=-1;f=x.ve(f))for(w=x.Ob(f);w!=-1;w=x.Sb(w))for(var E=x.Ya(w),T=0,A=x.Ka(w);T<A;E=x.V(E),T++)x.Sa(E,p,u++);u=n.BM(p,x),n.XL(o,u,x,m)}}},n.BM=function(o,u){for(var p=u.gd,f=new h.ja(0),m=u.ld;m!=-1;m=u.ve(m))for(var w=u.Ob(m);w!=-1;w=u.Sb(w))for(var x=u.Ya(w),E=0,T=u.Ka(w);E<T;x=u.V(x),E++)f.add(x);var A=new c(o,u);f.Wd(0,p,function(ze,Fe){return A.kM(ze,Fe)}),o=[];var P=[],F=u.Hd(),j=u.Hd();m=u.ld,w=u.ve(m),T=new h.h;var H=new h.h,W=f.get(0),G=u.cd(W),ee=u.Rf(G);u.D(W,T);var ae=1;for(x=0;ae<p-1;){var le=!1;for(E=ae;E<p;E++)if(E!=x){var ie=f.get(E),be=u.cd(ie),Ie=u.Rf(be);if(u.D(ie,H),!T.rb(H))break;ee==m&&Ie==w&&(le=n.oM(F,j,u,o,P,G,W,be,ie))}if(le||x==ae-1){if(le&&x==ae-1&&ae--,++x==p)break;W=f.get(x),G=u.cd(W),ee=u.Rf(G),u.D(W,T)}le||(ae=x+1)}for(p=[],m=u.ld;m!=-1;m=u.ve(m))for(w=u.Ob(m);w!=-1;w=u.Sb(w))for(f=u.Ya(w),E=0,T=u.Ka(w);E<T;f=u.V(f),E++){if(0<=(x=u.Qa(f,j)))for(;x<P.length&&P[x].tg==f;)p.push(P[x++]);if(0<=(x=u.Qa(f,F)))for(;x<o.length&&o[x].tg==f;)p.push(o[x++])}return u.Ud(F),u.Ud(j),p},n.oM=function(o,u,p,f,m,w,x,E,T){var A=p.tj(w),P=p.tj(E),F=p.Ya(w),j=p.Ya(E),H=p.Na(x),W=p.Na(T),G=!1,ee=!1,ae=!1,le=!1;return x!=F&&(T!=j&&(G=n.pM(o,p,f,w,H,E,W)),T!=P&&(ee=n.qM(o,p,f,w,H,E,T))),x!=A&&(T!=j&&(ae=n.rM(u,p,m,w,x,E,W,F)),T!=P&&(le=n.sM(u,p,m,w,x,E,T,F))),G&&ee&&ae?(o=f.length-1,m[le?m.length-2:m.length-1].Gi==2&&(f[o-1]=f[o],--f.length)):G&&ee&&le&&m[m.length-1].Gi==2&&(m=f[f.length-1],--f.length,p.Qa(m.tg,o)==f.length&&p.Sa(m.tg,o,-1)),G||ee||ae||le},n.pM=function(o,u,p,f,m,w,x){var E=new h.zb,T=new h.zb,A=[0,0],P=[0,0],F=u.cc(m);return F==null&&(u.fd(m,E),F=E),(E=u.cc(x))==null&&(u.fd(x,T),E=T),2>(F=F.Fa(E,null,A,P,0))&&(f=new a(m,f,A[0],NaN,F,x,w,P[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1)),!0},n.qM=function(o,u,p,f,m,w,x){var E=new h.zb,T=new h.zb,A=[0,0],P=[0,0],F=u.cc(m);return F==null&&(u.fd(m,E),F=E),(E=u.cc(x))==null&&(u.fd(x,T),E=T),2>(F=F.Fa(E,null,A,P,0))&&(f=new a(m,f,A[0],NaN,F,x,w,P[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0)},n.rM=function(o,u,p,f,m,w,x,E){var T=new h.zb,A=new h.zb,P=[0,0],F=[0,0],j=u.cc(m);return j==null&&(u.fd(m,T),j=T),(T=u.cc(x))==null&&(u.fd(x,A),T=A),(j=j.Fa(T,null,P,F,0))==2?(f=new a(m,f,P[0],P[1],j,x,w,F[0],F[1]),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0):(A=!1,m==E&&(f=new a(m,f,P[0],NaN,j,x,w,F[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),A=!0),A)},n.sM=function(o,u,p,f,m,w,x,E){var T=new h.zb,A=new h.zb,P=[0,0],F=[0,0],j=u.cc(m);return j==null&&(u.fd(m,T),j=T),(T=u.cc(x))==null&&(u.fd(x,A),T=A),(j=j.Fa(T,null,P,F,0))==2?(f=new a(m,f,P[0],P[1],j,x,w,F[0],F[1]),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0):(A=!1,m==E&&(f=new a(m,f,P[0],NaN,j,x,w,F[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),A=!0),A)},n.XL=function(o,u,p,f){var m=[];m[0]=new h.h,m[1]=new h.h,m[2]=new h.h,m[3]=new h.h;var w=new h.h,x=new h.h,E=new h.h,T=new h.h,A=null;f!=null&&(A=new h.hg).Qr();var P=0,F=null,j=new h.zb;new h.zb;for(var H=p.Ob(p.ld);H!=-1;H=p.Sb(H)){for(var W=4,G=-1,ee=-1,ae=-1,le=-1,ie=NaN,be=!0,Ie=!1,ze=!0,Fe=!0,Oe=!0,Ye=0,yt=H,bt=0,Kt=p.Ya(H),Qt=p.Ka(H),br=0;br<Qt;Kt=p.V(Kt),br++){var Ci=p.cc(Kt);if(Ci==null){if(!p.fd(Kt,j))continue;Ci=j}ee==-1&&(ee=Kt);for(var at=0;P<u.length&&Kt==u[P].tg;){G=u[P].Ps;var di=u[P].tg,Vt=u[P].IA,Fi=u[P].Nm,Di=u[P].Cl,dn=u[P].PH;if(u[P].Gi==2){if(Ie||(yt=G,ee=di,bt=Vt,ae=Fi,le=Di,ie=dn,W=2,f!=null?F=new h.Ua:Ye=0,Oe=!1,Fe=!0),Vt=u[P].OH,dn=u[P].GT,f!=null?(Ci.dh(at,u[P].OH,A),F.oc(A.get(),Fe)):Ye++,at=Vt,Ie=!0,Fe=be=!1,P+1==u.length||u[P+1].Gi!=2||u[P+1].tg==di&&u[P+1].IA!=at){if(f!=null){var Zt=new b(F,2,G,di,Vt,W,yt,ee,bt,Fi,Di);f.push(Zt)}else null.add(Ye);yt=G,ee=di,bt=Vt,ae=Fi,le=Di,ie=dn,W=2,Ie=be=!1,Fe=Oe=!0}}else{var rn=p.V(di);if(P<u.length-1&&u[P+1].tg==rn&&u[P+1].Cl==Di&&u[P+1].Gi==2)Vt!=at&&(Oe&&(f!=null?F=new h.Ua:Ye=0),be=0<P&&u[P-1].Ps==G?W==1?0:W==0?1:3:3,f!=null?(Ci.dh(at,Vt,A),F.oc(A.get(),Fe),Zt=new b(F,be,G,di,Vt,W,yt,ee,bt,Fi,Di),f.push(Zt)):(Ye++,null.add(Ye)),at=Vt,yt=G,ee=di,bt=Vt,ae=Fi,le=Di,ie=dn,W=be,be=ze=!1,Fe=Oe=!0);else if(!n.wM(o,p,u,P,w,x)){n.tM(p,u,P,H,Kt,E,T);var It=!1;if(rn=!1,Zt=!0,!(w.rb(E)||x.rb(E)||w.rb(T)||x.rb(T))){m[0].N(w),m[1].N(x),m[2].N(E),m[3].N(T),m.sort(h.h.pu);var Vc=m[0],Gu=m[1],Uc=m[2],_f=m[3];Vc.rb(w)?Gu.rb(x)?o?(rn=It=!0,Zt=!1):It=!1:_f.rb(x)?o?Zt=rn=It=!0:It=!1:(It=!0,Zt=Gu.rb(E)):Gu.rb(w)?Uc.rb(x)?o?(rn=It=!0,Zt=!1):It=!1:Vc.rb(x)?o?Zt=rn=It=!0:It=!1:(It=!0,Zt=Uc.rb(E)):Uc.rb(w)?_f.rb(x)?o?(rn=It=!0,Zt=!1):It=!1:Gu.rb(x)?o?Zt=rn=It=!0:It=!1:(It=!0,Zt=_f.rb(E)):Vc.rb(x)?o?(rn=It=!0,Zt=!1):It=!1:Uc.rb(x)?o?Zt=rn=It=!0:It=!1:(It=!0,Zt=Vc.rb(E))}It&&(It=Kt==di,(Vt!=at||It&&at==0)&&(Oe&&(f!=null?F=new h.Ua:Ye=0),f!=null?(Ci.dh(at,Vt,A),F.oc(A.get(),Fe)):Ye++),Zt?W!=1?((Vt!=at||It&&at==0)&&(f!=null?(Zt=new b(F,1,G,di,Vt,W,yt,ee,bt,Fi,Di),f.push(Zt)):null.add(Ye)),rn?(P>=u.length-2||u[P+2].Ps!=G)&&(W=0):W=1):((Vt!=at||It&&at==0)&&(f!=null?(Zt=new b(F,3,G,di,Vt,W,yt,ee,bt,Fi,Di),f.push(Zt)):null.add(Ye)),W=1):W!=0?((Vt!=at||It&&at==0)&&(f!=null?(Zt=new b(F,0,G,di,Vt,W,yt,ee,bt,Fi,Di),f.push(Zt)):null.add(Ye)),rn?(P>=u.length-2||u[P+2].Ps!=G)&&(W=1):W=0):((Vt!=at||It&&at==0)&&(f!=null?(Zt=new b(F,3,G,di,Vt,W,yt,ee,bt,Fi,Di),f.push(Zt)):null.add(Ye)),W=0),(Vt!=at||It&&at==0)&&(at=Vt,yt=G,ee=di,bt=Vt,ae=Fi,le=Di,ie=dn,be=ze=!1,Fe=Oe=!0))}}P++}at!=1&&(Oe&&(f!=null?F=new h.Ua:Ye=0),f!=null?(Ci.dh(at,1,A),F.oc(A.get(),Fe)):Ye++,Fe=Oe=!1,ze=!0)}ze&&(Vt=1,di=p.tj(H),di=p.Na(di),Di=Fi=-1,dn=NaN,be?f!=null?(Zt=new b(F,4,G,di,Vt,W,yt,ee,bt,Fi,Di),f.push(Zt)):null.add(Ye):(be=W==1?0:W==0?1:3,f!=null?(Zt=new b(F,be,G,di,Vt,W,yt,ee,bt,Fi,Di),f.push(Zt)):null.add(Ye)))}},n.wM=function(o,u,p,f,m,w){var x=p[f].PH;if(x==1)return n.uM(o,u,p,f,m,w);if(x==0)return n.vM(o,u,p,f,m,w);throw h.i.Ra()},n.uM=function(o,u,p,f,m,w){var x=new h.zb,E=p[f].tg,T=p[f].Nm,A=p[f].Cl,P=-1,F=-1,j=-1,H=-1;if(!o&&0<f){var W=p[f-1];P=W.tg,F=W.Nm,j=W.Cl,H=W.Gi}var G=-1,ee=-1,ae=-1,le=-1;f<p.length-1&&(G=(W=p[f+1]).tg,ee=W.Nm,ae=W.Cl,le=W.Gi);var ie=u.V(E);return W=u.V(A),o?f==p.length-1||G!=E||ee!=T||ae!=W||le==2?((o=u.cc(A))==null&&(u.fd(A,x),o=x),w.N(o.jg()),m.nt(w),w.normalize(),m.normalize(),!1):((o=u.cc(A))==null&&(u.fd(A,x),o=x),m.N(o.jg()),(o=u.cc(W))==null&&(u.fd(W,x),o=x),w.N(o.jg()),m.Uq(),w.normalize(),m.normalize(),!1):0<f&&P==E&&F==T&&j==W&&H==2||f<p.length-1&&G==ie&&ee==T&&ae==W&&le==2?((o=u.cc(A))==null&&(u.fd(A,x),o=x),w.N(o.jg()),m.nt(w),w.normalize(),m.normalize(),!1):!(f<p.length-1&&G==E&&ee==T&&ae==W)||((o=u.cc(A))==null&&(u.fd(A,x),o=x),m.N(o.jg()),(o=u.cc(W))==null&&(u.fd(W,x),o=x),w.N(o.jg()),m.Uq(),w.normalize(),m.normalize(),!1)},n.vM=function(o,u,p,f,m,w){var x=new h.zb,E=p[f].tg,T=p[f].Nm,A=p[f].Cl,P=-1,F=-1,j=-1,H=-1;if(!o&&f<p.length-1){var W=p[f+1];P=W.tg,F=W.Nm,j=W.Cl,H=W.Gi}var G=-1,ee=-1,ae=-1;W=-1,0<f&&(G=(W=p[f-1]).tg,ee=W.Nm,ae=W.Cl,W=W.Gi);var le=u.V(E),ie=u.Na(A);return o?f!=0&&G==E&&ee==T&&ae==ie&&W!=2||((o=u.cc(A))==null&&(u.fd(A,x),o=x),w.N(o.jg()),m.nt(w),w.normalize(),m.normalize(),!1):!(0<f&&G==E&&ee==T&&ae==ie&&W==2||f<p.length-1&&P==le&&F==T&&j==ie&&H==2)||((o=u.cc(A))==null&&(u.fd(A,x),o=x),w.N(o.jg()),m.nt(w),w.normalize(),m.normalize(),!1)},n.tM=function(o,u,p,f,m,w,x){var E=new h.zb,T=o.cc(m);if(T==null&&(o.fd(m,E),T=E),u=(p=u[p]).tg,p=p.IA,m=o.V(u),p==1)w.N(T.jg()),m!=-1&&m!=o.tj(f)?((T=o.cc(m))==null&&(o.fd(m,E),T=E),x.N(T.jg()),(T=o.cc(u))==null&&o.fd(u,E)):x.N(w),w.Uq(),x.normalize(),w.normalize();else{if(p!=0)throw h.i.Ra();x.N(T.jg()),w.nt(x),x.normalize(),w.normalize()}},n}()}(X||(X={})),function(h){var L;(L=h.WL||(h.WL={}))[L.Linear=0]="Linear",L[L.Angular=1]="Angular",L[L.Area=2]="Area";var b=function(){function f(m,w,x){this.od=w,this.ci=x,this.pA=m}return f.prototype.Nb=function(m){return m instanceof f&&this.ci===m.ci},f.VF=function(m){return m.od!==0?null:m.pA===-1?new f(-1,2,m.ci*m.ci):f.ah(u[m.pA])},f.ah=function(m){return(m=o[m])===void 0?null:m},f.TO=function(m,w,x){var E=null;if(x!=null)try{x.values[0]==="EPSG"&&(E=f.ah(parseInt(x.values[1])))}catch{}return E===null&&(E=new f(-1,m,w)),E},f.prototype.Fc=function(){return this.pA},f.prototype.wF=function(m){if(m.od!=this.od)throw h.i.Hb();return this.ci/m.ci},f.Ph=function(m,w,x){return w.wF(x)*m},f.RE=function(m,w,x,E,T){for(x=x.wF(E),E=0;E<w;E++)T[E]=m[E]*x},f}();h.Uc=b;for(var c=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],n=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],u=[],p=0;p<c.length;p+=2)o[c[p]]=new b(c[p],2,c[p+1]);for(c=null,p=0;p<a.length;p+=2)o[a[p]]=new b(a[p],1,a[p+1]);for(a=null,p=0;p<n.length;p+=3)o[n[p]]=new b(n[p],0,n[p+1]),u[n[p]]=n[p+2];n=null}(X||(X={})),function(h){var L=function(){function b(){this.yb=this.pb=0}return b.prototype.set=function(c,a){a!==void 0?(this.pb=c,this.yb=a):typeof c=="number"?(this.pb=c,this.yb=0):(this.pb=c.pb,this.yb=c.yb)},b.prototype.value=function(){return this.pb},b.prototype.add=function(c){var a=this.pb+c.pb;c=this.yb+c.yb+2220446049250313e-31*Math.abs(a),this.pb=a,this.yb=c},b.prototype.eN=function(){var c=this.pb+1,a=this.yb+2220446049250313e-31*Math.abs(c);this.pb=c,this.yb=a},b.prototype.YM=function(c,a){this.pb=c.pb+a.pb,this.yb=c.yb+a.yb+2220446049250313e-31*Math.abs(this.pb)},b.prototype.sub=function(c){if(typeof c=="number"){var a=this.pb-c;c=this.yb+2220446049250313e-31*Math.abs(a)}else a=this.pb-c.pb,c=this.yb+c.yb+2220446049250313e-31*Math.abs(a);this.pb=a,this.yb=c},b.prototype.Ag=function(c){var a=this.pb*c.pb;this.yb=this.yb*Math.abs(c.pb)+c.yb*Math.abs(this.pb)+this.yb*c.yb+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.Oo=function(c){var a=this.pb*c;this.yb=this.yb*Math.abs(c)+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.Ml=function(c,a){var n=Math.abs(c.pb)*Math.abs(a.pb);this.yb=c.yb*Math.abs(a.pb)+a.yb*Math.abs(c.pb)+c.yb*a.yb+2220446049250313e-31*Math.abs(n),this.pb=n},b.prototype.lm=function(c){var a=Math.abs(c.pb),n=this.pb/c.pb,o=(this.yb+Math.abs(n)*c.yb)/a;c.yb>.01*a&&(o*=1+(1+(c=c.yb/a))*c),this.pb=n,this.yb=o+2220446049250313e-31*Math.abs(n)},b.prototype.sqrt=function(){if(0<=this.pb){var c=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/c:this.pb>this.yb?c-Math.sqrt(this.pb-this.yb):Math.max(c,Math.sqrt(this.pb+this.yb)-c);a+=2220446049250313e-31*Math.abs(c)}else this.pb<-1*this.yb?a=c=NaN:(c=0,a=Math.sqrt(this.yb));this.pb=c,this.yb=a},b.prototype.sin=function(c){var a=Math.sin(c.pb),n=Math.cos(c.pb);this.pb=a,a=Math.abs(a),this.yb=(Math.abs(n)+.5*a*c.yb)*c.yb+2220446049250313e-31*a},b.prototype.cos=function(c){var a=Math.sin(c.pb),n=Math.cos(c.pb);this.pb=n,n=Math.abs(n),this.yb=(Math.abs(a)+.5*n*c.yb)*c.yb+2220446049250313e-31*n},b.prototype.qg=function(){return Math.abs(this.pb)<=this.yb},b.prototype.rs=function(){return this.qg()&&this.yb!=0},b}();h.Xb=L}(X||(X={}));var cr=new X.h,ns=new X.h,Gr=new X.h,Ss=new X.h,Eo=new X.h;(function(h){var L,b;(b=L||(L={}))[b.closedPath=1]="closedPath",b[b.exteriorPath=2]="exteriorPath",b[b.ringAreaValid=4]="ringAreaValid";var c=function(){function a(n,o,u,p,f,m,w){o!==void 0?(this.ib=n,this.dk=o,this.dl=u,this.ki=p,this.za=m,this.cA=w,this.gw=f):(this.ib=n.ib,this.dk=n.dk,this.dl=n.dl,this.ki=n.ki,this.za=n.za,this.cA=n.cA,this.gw=n.gw),this.WG=!0}return a.prototype.next=function(){return this.WG?(this.WG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.ST()):-1},a.prototype.ST=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.dk!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.dk=this.ib.ve(this.dk),this.dk==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.dk))||(this.dl=this.ib.Ob(this.dk))}return-1},a.uP=function(n,o,u,p,f,m,w){return new a(n,o,u,p,f,m,w)},a}();h.rY=c,L=function(){function a(){this.ko=this.Cm=this.xk=this.dd=this.Dk=this.wo=this.Qi=this.md=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.ld=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return a.prototype.Uh=function(n){return this.Te!=null?this.Te[n]:null},a.prototype.Zg=function(n,o){if(this.Te==null){if(o==null)return;this.Te=[];for(var u=0,p=this.wb.I();u<p;u++)this.Te.push(null)}this.Te[n]=o},a.prototype.cp=function(n,o){this.md.T(n,1,o)},a.prototype.bp=function(n,o){this.md.T(n,2,o)},a.prototype.PB=function(n,o){this.md.T(n,6,o)},a.prototype.Up=function(n){return this.md.U(n,6)},a.prototype.gx=function(n,o){this.md.T(n,7,o)},a.prototype.sv=function(n){return this.md.U(n,0)},a.prototype.IJ=function(n,o){this.dd.T(n,1,o)},a.prototype.MJ=function(n,o){this.dd.T(n,0,o)},a.prototype.DF=function(n){return this.dd.U(n,7)},a.prototype.$o=function(n,o){this.dd.T(n,3,o)},a.prototype.ap=function(n,o){this.dd.T(n,4,o)},a.prototype.mU=function(n){this.dd==null&&(this.dd=new h.ad(8));var o=this.dd.De();return this.dd.T(o,2,n),this.dd.T(o,5,0),this.dd.T(o,6,0),this.dd.T(o,7,o),o},a.prototype.IQ=function(n){this.dd.kd(n)},a.prototype.oU=function(n){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.wo=new h.ce(0));var o=this.md.De();return this.md.T(o,0,o),this.md.T(o,3,0),this.md.T(o,6,0),this.gx(o,n),o>=this.Qi.size&&(n=16>o?16:h.P.truncate(3*o/2),this.Qi.resize(n),this.wo.resize(n)),this.Qi.set(o,0),this.wo.set(o,0),o},a.prototype.mF=function(n){this.md.kd(n)},a.prototype.Qy=function(n){this.ud.kd(n),this.gd--},a.prototype.iI=function(n){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.wo=new h.ce(0));var o=this.ud.De(),u=0<=n?n:o;if(this.ud.T(o,0,u),0>n){if(u>=this.wb.I()){if(n=16>u?16:h.P.truncate(3*u/2),this.wb.resize(n),this.Te!=null)for(var p=0;p<n;p++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(n),this.jt=this.wb.vb(0)}this.wb.Db(u,-1e38,-1e38),this.Te!=null&&(this.Te[u]=null),this.Ug!=null&&this.Ug.write(u,1)}return this.ud.T(o,4,2*u),this.gd++,o},a.prototype.yj=function(n,o,u){var p=o!=-1?this.Na(o):this.tj(n),f=p!=-1?this.V(p):-1,m=this.iI(u==null?this.gd:-1),w=this.Va(m);return u!=null&&this.wb.It(w,u),this.cj(m,n),this.Cc(m,f),this.Dc(m,p),f!=-1&&this.Dc(f,m),p!=-1&&this.Cc(p,m),u=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,m),o==p&&this.Kf(n,m),u&&f==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(n,this.Ka(n)+1),n=this.Rf(n),this.Vj(n,this.I(n)+1),m},a.prototype.pm=function(){return this.ko==null&&(this.ko=new h.Ta(this.wb.description)),this.ko},a.prototype.Zo=function(n,o){this.dd.T(n,2,-134217729&this.dd.U(n,2)||(o==1?134217728:0))},a.prototype.Jn=function(n){return(134217728&this.dd.U(n,2))!=0?1:0},a.prototype.bN=function(n){var o=this.Kg(n.K(),n.description);return n.K()==1736&&this.Zo(o,n.Jn()),this.OD(o,n),o},a.prototype.cN=function(n){var o=this.Kg(n.K(),n.description);return this.PD(o,n),o},a.prototype.PV=function(n,o){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.wo=new h.ce(0)),this.md.Ee(this.md.Jg+n),this.ud.Ee(this.ud.Jg+o),this.Qi.Jb(this.Qi.size+n),this.wo.Jb(this.wo.size+n)},a.prototype.OD=function(n,o){this.PV(o.ea(),o.I()),this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0);for(var u=this.Te!=null&&o.Se!=null,p=0,f=o.ea();p<f;p++)if(!(2>o.Ka(p))){var m=this.wf(n,-1);this.mn(m,o.ec(p));for(var w=o.Ca(p),x=o.Wc(p);w<x;w++){var E=this.yj(m,-1,null);if(u)if(E=this.Va(E),(1&o.TF(w))!=0)this.Zg(E,null);else{var T=new h.hg;o.cc(w,T,!0),this.Zg(E,T.get())}}}},a.prototype.PD=function(n,o){this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0),n=this.wf(n,-1);var u=0;for(o=o.I();u<o;u++)this.yj(n,-1,null)},a.prototype.FX=function(n,o,u){var p=this.V(n);if(p==-1)throw h.i.Ra();for(var f=this.pm(),m=this.cd(n),w=0,x=o.ql(u);w<x;w++){var E=this.Va(n),T=this.V(n),A=o.Xp(u,w);w==0&&(A.Uo(f),this.Fh(n,f)),A.K()==322?this.Zg(E,null):this.Zg(E,h.ba.ig(A)),A.Qo(f),w<x-1?n=this.yj(m,T,f):this.Fh(p,f)}},a.prototype.EX=function(n,o,u){var p=this.V(n);if(p==-1)throw h.i.Ra();for(var f=this.pm(),m=this.cd(n),w=0,x=o.ql(u);w<x;w++){var E=this.Va(n),T=this.V(n),A=o.Xp(u,x-w-1);w==0&&(A.Qo(f),this.Fh(n,f)),A.K()==322?this.Zg(E,null):this.Zg(E,h.ba.ig(A)),A.Uo(f),w<x-1?n=this.yj(m,T,f):this.Fh(p,f)}},a.prototype.CF=function(){var n=new h.l;n.Pa();for(var o=this.$q(),u=new h.h,p=!0,f=o.next();f!=-1;f=o.next())this.D(f,u),p?n.$b(u.x,u.y):n.Mk(u.x,u.y),p=!1;return n},a.prototype.Ib=function(n){var o=n.K();if(h.ba.Ic(o))return this.bN(n);if(o==550)return this.cN(n);throw h.i.Ra()},a.prototype.oN=function(n,o){var u=o.K();if(h.ba.Ic(u))this.OD(n,o);else{if(u!=550)throw h.i.Ra();this.PD(n,o)}},a.prototype.gN=function(n,o){var u=this.Kg(1736,n.description);if(2>n.Ka(o))return u;this.Kl.Gd(n,n.Ca(o),n.Wc(o)),this.jt=this.wb.vb(0);var p=this.wf(u,-1);this.mn(p,n.ec(o)||!0);var f=this.Te!=null&&n.Se!=null,m=n.Ca(o);for(o=n.Wc(o);m<o;m++){var w=this.yj(p,-1,null);if(f)if(w=this.Va(w),(1&n.TF(m))!=0)this.Zg(w,null);else{var x=new h.hg;n.cc(m,x,!0),this.Zg(w,x.get())}}return u},a.prototype.Ke=function(n){var o=this.jc(n),u=h.TK.Kg(o,this.Kl.description),p=this.I(n);if(p==0)return u;if(h.ba.Ic(o)){o=this.ea(n);for(var f=h.Zc.Qh(o+1),m=h.Zc.Or(o+1,0),w=u.description,x=0,E=w.Ba;x<E;x++){for(var T=w.qd(x),A=h.ua.Wa(T),P=h.Zc.SE(T,p),F=this.wb.vb(T),j=0,H=0,W=0,G=this.Ob(n);G!=-1;G=this.Sb(G)){var ee=0;this.ec(G)&&(ee|=1),this.QS(G)&&(ee|=4),ee!=0&&m.tJ(H,ee);var ae=this.Ka(G);if(f.write(H++,W),W+=ae,T==0){ae=F;var le=P,ie=new h.h;for(ee=this.Ya(G);j<W;ee=this.V(ee),j++){var be=this.Va(ee);ae.uc(2*be,ie),le.Vt(2*j,ie)}}else for(ee=this.Ya(G);j<W;ee=this.V(ee),j++)for(be=this.Va(ee),le=0;le<A;le++)ie=F.Bg(be*A+le),P.rr(j*A+le,ie)}u.kn(T,P),f.write(o,p)}u.JJ(m),u.KJ(f),u.Qc(16777215)}else if(o==550){for(w=u.description,u.resize(p),x=0,E=w.Ba;x<E;x++){for(T=w.qd(x),A=h.ua.Wa(T),P=u.vb(T),F=this.wb.vb(T),j=0,G=this.Ob(n),ae=this.Ka(G),ee=this.Ya(G);j<ae;ee=this.V(ee),j++)for(be=this.Va(ee),le=0;le<A;le++)ie=F.Bg(be*A+le),P.rr(j*A+le,ie);u.kn(T,P)}u.Qc(16777215)}return u},a.prototype.vB=function(n){for(var o=this.Ob(n);o!=-1;o=this.ar(o));o=this.IR(n);var u=this.ve(n);o!=-1?this.IJ(o,u):this.ld=u,u!=-1?this.MJ(u,o):this.sw=o,this.IQ(n)},a.prototype.Kg=function(n,o){return o===void 0?this.UE(n,h.ee.og()):this.UE(n,o)},a.prototype.UE=function(n,o){return n=this.mU(n),this.wb==null?this.wb=this.Kl=new h.de(o):this.Kl.Ll(o),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.ld==-1?this.ld=n:(this.MJ(n,this.sw),this.IJ(this.sw,n)),this.sw=n},a.prototype.ve=function(n){return this.dd.U(n,1)},a.prototype.IR=function(n){return this.dd.U(n,0)},a.prototype.jc=function(n){return 2147483647&this.dd.U(n,2)},a.prototype.BJ=function(n,o,u){o=this.xk[o],(n=this.DF(n))>=o.size&&o.resize(Math.max(h.P.truncate(1.25*n),16),-1),o.write(n,u)},a.prototype.EF=function(n,o){return(n=this.DF(n))<(o=this.xk[o]).size?o.read(n):-1},a.prototype.VE=function(){this.xk==null&&(this.xk=[]);for(var n=0;n<this.xk.length;n++)if(this.xk[n]==null)return this.xk[n]=h.Zc.Qh(0),n;return this.xk.push(h.Zc.Qh(0)),this.xk.length-1},a.prototype.pW=function(n){this.xk[n]=null},a.prototype.Ob=function(n){return this.dd.U(n,3)},a.prototype.mv=function(n){return this.dd.U(n,4)},a.prototype.I=function(n){return this.dd.U(n,5)},a.prototype.ea=function(n){return this.dd.U(n,6)},a.prototype.Ip=function(n,o,u){for(var p=0,f=this.ld;f!=-1;f=this.ve(f)){var m=this.jc(f);if(h.ba.Ic(m)&&(!u||m==1736)){m=this.jc(f)==1736;for(var w=this.Ob(f);w!=-1;){for(var x=0,E=this.Ya(w);x<h.P.truncate(this.Ka(w)/2);){var T=this.V(E);if(T==-1)break;var A=this.Va(E),P=this.Uh(A);P!=null?A=P.Rb():(P=this.Va(T),A=this.wb.Ar(A,P)),A<=n?(A==0?p==0&&(p=-1):p=1,T!=this.tj(w)&&(this.fC(T,E),this.pd(T,!0))):E=this.V(E),x++}for(x=this.Ya(w),E=this.ec(w)?x:this.tj(w);0<this.Ka(w);){if((T=this.Na(E))==-1){this.pd(E,!0),p==0&&(p=-1);break}var F=this.Va(T);if((P=this.Uh(F))!=null?A=P.Rb():(A=this.Va(E),A=this.wb.Ar(A,F)),A<=n)A==0?p==0&&(p=-1):p=1,this.fC(T,E),this.pd(T,!1),x==T&&(x=this.Ya(w));else if((E=this.Na(E))==x)break}E=this.Ka(w),o&&(m?3>E:2>E)?(w=this.ar(w),p=0<E?1:p==0?-1:p):w=this.Sb(w)}}}return p},a.prototype.fC=function(n,o){var u=this.Va(n),p=this.Va(o);if(this.Ug!=null&&(u=this.Ug.read(u),this.Ug.write(p,u)),this.di!=null){for(p=0,u=this.di.length;p<u;p++)if(this.di[p]!=null){var f=this.Qa(n,p);f!=-1&&this.Sa(o,p,f)}}},a.prototype.Wl=function(n,o,u){var p=0,f=this.V(n);if(f==-1)throw h.i.Ra();for(var m=this.Va(n),w=this.Va(f),x=this.Uh(m),E=x==null?this.wb.Ar(m,w):x.Rb(),T=0;T<u;T++){var A=o[T];if(0<A&&1>A){var P=A;x!=null&&(P=0<E?x.Tx(A)/E:0),this.wb.eD(m,w,P,this.pm());var F=this.yj(this.cd(n),f,this.pm());if(p++,x!=null){var j=x.fl(0,A);P=this.Va(this.Na(F)),this.Zg(P,j),this.mf(F,j.xc()),T!=u-1&&o[T+1]!=1||(A=x.fl(A,1),this.Zg(P,A))}}}return p},a.prototype.DX=function(n,o,u){var p=0,f=this.V(n);if(f==-1)throw h.i.ga("internal error");var m=this.Va(n),w=this.Va(f),x=this.Uh(m),E=x==null?this.wb.Ar(m,w):x.Rb(),T=0;n=this.cd(n);for(var A=0;A<u;A++){var P=o[A];if(T<P&&1>P){var F=P;if(x!=null&&(F=0<E?x.Tx(P)/E:0),this.wb.eD(m,w,F,this.pm()),F=this.rS(n,f,this.pm()),p++,x!=null){T=x.fl(T,P);var j=this.Va(this.Na(F));this.Zg(j,T),this.Db(F,T.qa,T.ma),A!=u-1&&o[A+1]!=1||(T=x.fl(P,1),F=this.Va(F),this.Zg(F,T))}}T=P}return p},a.prototype.rS=function(n,o,u){var p=o!=-1?this.Na(o):this.tj(n),f=p!=-1?this.V(p):-1,m=this.iI(u==null?this.gd:-1),w=this.Va(m);return u!=null&&this.wb.It(w,u),this.cj(m,n),this.Cc(m,f),this.Dc(m,p),f!=-1&&this.Dc(f,m),p!=-1&&this.Cc(p,m),u=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,m),o==p&&(u&&p!=-1||this.Kf(n,m)),u&&f==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(n,this.Ka(n)+1),n=this.Rf(n),this.Vj(n,this.I(n)+1),m},a.prototype.oE=function(n,o,u){var p=this.Va(o),f=this.Va(u);if(0>p||f>this.gd-1)throw h.i.O("invalid call");if(p>f&&!this.ec(n))throw h.i.O("cannot iterate across an open path");for(n=0;o!=u;o=this.V(o))p=this.Va(o),(f=this.Uh(p))!=null?n+=f.Rb():(f=this.Va(this.V(o)),n+=this.wb.Ar(p,f));return n},a.prototype.Fh=function(n,o){var u=this.Va(n);this.wb.It(u,o),(u=this.Uh(u))!=null&&u.setStart(o),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&u.setEnd(o))},a.prototype.Xi=function(n,o){n=this.Va(n),this.wb.we(n,o)},a.prototype.mf=function(n,o){this.Db(n,o.x,o.y)},a.prototype.Db=function(n,o,u){var p=this.Va(n);this.wb.Db(p,o,u),(p=this.Uh(p))!=null&&p.TB(o,u),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&p.Sl(o,u))},a.prototype.D=function(n,o){this.wb.D(this.ud.U(n,0),o)},a.prototype.Hc=function(n,o){this.wb.Aa[0].uc(2*this.ud.U(n,0),o)},a.prototype.Oa=function(n){var o=new h.h;return this.wb.D(this.ud.U(n,0),o),o},a.prototype.YF=function(n,o){this.jt.uc(2*n,o)},a.prototype.Vc=function(n,o,u){return this.wb.Vc(n,this.Va(o),u)},a.prototype.setAttribute=function(n,o,u,p){this.wb.setAttribute(n,this.Va(o),u,p)},a.prototype.Va=function(n){return this.ud.U(n,0)},a.prototype.kh=function(){var n=new h.h;return this.D(void 0,n),n.y},a.prototype.hq=function(n,o){n=this.Va(n),o=this.Va(o);var u=this.wb.Aa[0].o;return u[2*n]===u[2*o]&&u[2*n+1]===u[2*o+1]},a.prototype.Fv=function(n,o){n=this.Va(n);var u=this.wb.Aa[0].o;return u[2*n]===o.x&&u[2*n+1]===o.y},a.prototype.nX=function(n,o){if(1>o&&(o=1),this.Ug==null){if(o==1)return;this.Ug=h.Zc.En(this.wb.I(),1)}(n=this.Va(n))>=this.Ug.size&&this.Ug.resize(n+1,1),this.Ug.write(n,o)},a.prototype.XF=function(n){return n=this.Va(n),this.Ug==null||n>=this.Ug.size?1:this.Ug.read(n)},a.prototype.Sa=function(n,o,u){o=this.di[o],n=this.Va(n),o.size<this.wb.I()&&o.resize(this.wb.I(),-1),o.write(n,u)},a.prototype.Qa=function(n,o){return(n=this.Va(n))<(o=this.di[o]).size?o.read(n):-1},a.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var n=0;n<this.di.length;n++)if(this.di[n]==null)return this.di[n]=h.Zc.Qh(0,-1),n;return this.di.push(h.Zc.Qh(0,-1)),this.di.length-1},a.prototype.Ud=function(n){this.di[n]=null},a.prototype.cc=function(n){return this.Te!=null?(n=this.Va(n),this.Te[n]):null},a.prototype.fd=function(n,o){var u=this.ud.U(n,2);if(u==-1)return!1;if(this.aA){var p=new h.Ta;this.Xi(n,p),o.setStart(p),this.Xi(u,p),o.setEnd(p)}else this.wb.Hc(this.ud.U(n,0),cr),o.gm(0,cr),this.wb.Hc(this.ud.U(u,0),cr),o.gm(1,cr);return!0},a.prototype.eW=function(n,o,u){if(this.aA){var p=new h.Ta;this.Xi(n,p),u.setStart(p),this.Xi(o,p),u.setEnd(p)}else this.wb.Hc(n,cr),u.gm(0,cr),this.wb.Hc(o,cr),u.gm(1,cr)},a.prototype.wf=function(n,o){if(o!=-1){if(n!=this.Rf(o))throw h.i.Ra();var u=this.es(o)}else u=this.mv(n);var p=this.oU(n);return o!=-1&&this.cp(o,p),this.bp(p,o),this.cp(p,u),u!=-1?this.bp(u,p):this.$o(n,p),o==-1&&this.ap(n,p),this.Tl(n,this.ea(n)+1),p},a.prototype.hG=function(n,o,u,p){n=this.wf(n,-1);for(var f=0,m=o,w=!1;m==u&&(w=!0),this.cj(m,n),f++,(m=this.V(m))!=o;);return this.mn(n,!0),this.Xj(n,f),w&&(o=u),this.Kf(n,o),this.Yg(n,this.Na(o)),this.ep(n,!1),p!=null&&(p[0]=w),n},a.prototype.ar=function(n){var o=this.es(n),u=this.Sb(n),p=this.Rf(n);return o!=-1?this.bp(o,u):this.$o(p,u),u!=-1?this.cp(u,o):this.ap(p,o),this.uO(n),this.Tl(p,this.ea(p)-1),this.mF(n),u},a.prototype.uO=function(n){var o=this.Ya(n);if(o!=-1){for(var u=0,p=this.Ka(n);u<p;u++){var f=o;o=this.V(o),this.Qy(f)}o=this.Rf(n),this.Vj(o,this.I(o)-this.Ka(n))}this.Xj(n,0)},a.prototype.Sb=function(n){return this.md.U(n,2)},a.prototype.es=function(n){return this.md.U(n,1)},a.prototype.Ka=function(n){return this.md.U(n,3)},a.prototype.ec=function(n){return(1&this.Up(n))!=0},a.prototype.mn=function(n,o){if(this.ec(n)!=o){if(0<this.Ka(n)){var u=this.Ya(n),p=this.tj(n);o?(this.Cc(p,u),this.Dc(u,p),u=this.Va(p)):(this.Cc(p,-1),this.Dc(u,-1),u=this.Va(p)),this.Zg(u,null)}this.PB(n,(1|this.Up(n))-1|(o?1:0))}},a.prototype.Rf=function(n){return this.md.U(n,7)},a.prototype.QS=function(n){return(2&this.Up(n))!=0},a.prototype.JB=function(n,o){this.PB(n,(2|this.Up(n))-2|(o?2:0))},a.prototype.qz=function(n){if(this.VS(n))return this.Qi.get(this.sv(n));var o=new h.zb,u=this.Ya(n);if(u==-1)return 0;var p=new h.h;this.D(u,p);for(var f=0,m=0,w=this.Ka(n);m<w;m++,u=this.V(u)){var x=this.cc(u);if(x==null){if(!this.fd(u,o))continue;x=o}f+=x.Sx(p.x,p.y)}return this.ep(n,!0),this.Qi.set(this.sv(n),f),f},a.prototype.ir=function(n,o,u){o=this.Dk[o],n=this.sv(n),o.size<this.Qi.size&&o.resize(this.Qi.size,-1),o.write(n,u)},a.prototype.uj=function(n,o){return(n=this.sv(n))<(o=this.Dk[o]).size?o.read(n):-1},a.prototype.Fy=function(){this.Dk==null&&(this.Dk=[]);for(var n=0;n<this.Dk.length;n++)if(this.Dk[n]==null)return this.Dk[n]=h.Zc.Qh(0),n;return this.Dk.push(h.Zc.Qh(0)),this.Dk.length-1},a.prototype.wB=function(n){this.Dk[n]=null},a.prototype.RT=function(n,o,u){if(u==-1)throw h.i.O();if(o!=u){var p=this.Sb(u),f=this.es(u),m=this.Rf(u);f==-1?this.$o(m,p):this.bp(f,p),p==-1?this.ap(m,f):this.cp(p,f),this.Vj(m,this.I(m)-this.Ka(u)),this.Tl(m,this.ea(m)-1),f=o==-1?this.mv(n):this.es(o),this.cp(u,f),this.bp(u,o),o==-1?this.ap(n,u):this.cp(o,u),f==-1?this.$o(n,u):this.bp(f,u),this.Vj(n,this.I(n)+this.Ka(u)),this.Tl(n,this.ea(n)+1),this.gx(u,n)}},a.prototype.kj=function(n,o){this.wb.we(this.Va(o),this.pm()),this.yj(n,-1,this.pm())},a.prototype.pd=function(n,o){var u=this.cd(n),p=this.Na(n),f=this.V(n);p!=-1&&this.Cc(p,f);var m=this.Ka(u);if(n==this.Ya(u)&&this.Kf(u,1<m?f:-1),f!=-1&&this.Dc(f,p),n==this.tj(u)&&this.Yg(u,1<m?p:-1),p!=-1&&f!=-1){p=this.Va(p);var w=this.Va(f);o?(o=this.Uh(p))!=null&&(p=new h.h,this.wb.D(w,p),o.Rc(p)):(w=this.Va(n),o=this.Uh(w),this.Zg(p,o),o!=null&&(p=this.wb.Oa(p),o.Ec(p)))}return this.Xj(u,m-1),u=this.Rf(u),this.Vj(u,this.I(u)-1),this.Qy(n),f},a.prototype.Ya=function(n){return this.md.U(n,4)},a.prototype.tj=function(n){return this.md.U(n,5)},a.prototype.V=function(n){return this.ud.U(n,2)},a.prototype.Na=function(n){return this.ud.U(n,1)},a.prototype.cd=function(n){return this.ud.U(n,3)},a.prototype.hc=function(n,o){return this.yj(n,-1,o)},a.prototype.$q=function(n){if(n===void 0)return this.$q(!1);if(n instanceof c)return new c(n);var o,u=-1,p=-1,f=-1,m=0,w=!1;for(o=this.ld;o!=-1;o=this.ve(o))if(!n||h.ba.Ic(this.jc(o))){for(u=this.Ob(o);u!=-1;u=this.Sb(u))if(f=p=this.Ya(u),m=0,p!=-1){w=!0;break}if(w)break}return c.uP(this,o,u,p,f,m,n)},a.prototype.Pc=function(n){if(this.Kl.Pc(n),this.Te!=null)for(var o=0,u=this.Te.length;o<u;o++)this.Te[o]!=null&&this.Te[o].Pc(n)},a.prototype.lr=function(n,o,u,p){p?this.FX(n,o,u):this.EX(n,o,u)},a.prototype.Dc=function(n,o){this.ud.T(n,1,o)},a.prototype.Cc=function(n,o){this.ud.T(n,2,o)},a.prototype.cj=function(n,o){this.ud.T(n,3,o)},a.prototype.Xj=function(n,o){this.md.T(n,3,o)},a.prototype.Kf=function(n,o){this.md.T(n,4,o)},a.prototype.Yg=function(n,o){this.md.T(n,5,o)},a.prototype.Tl=function(n,o){this.dd.T(n,6,o)},a.prototype.Vj=function(n,o){this.dd.T(n,5,o)},a.prototype.jJ=function(n){var o=n;do{var u=this.V(o);this.Cc(o,this.Na(o)),this.Dc(o,u),o=u}while(o!=n)},a.prototype.WB=function(n){this.gd=n},a.prototype.br=function(n){var o=this.es(n),u=this.Sb(n),p=this.Rf(n);o!=-1?this.bp(o,u):this.$o(p,u),u!=-1?this.cp(u,o):this.ap(p,o),this.Kf(n,-1),this.Yg(n,-1),this.mF(n)},a.prototype.oi=function(n,o){var u=this.Na(n),p=this.V(n);if(u!=-1&&this.Cc(u,p),p!=-1&&this.Dc(p,u),u!=-1&&p!=-1)if(u=this.Va(u),p=this.Va(p),o){if((o=this.Uh(u))!=null){var f=new h.h;this.wb.D(p,f),o.Rc(f)}}else o=this.Va(n),o=this.Uh(o),this.Zg(u,o),o!=null&&(f=new h.h,this.wb.D(u,f),o.Ec(f));this.Qy(n)},a.prototype.VS=function(n){return(4&this.Up(n))!=0},a.prototype.ep=function(n,o){this.PB(n,(4|this.Up(n))-4|(o?4:0))},a.prototype.nx=function(n,o){var u=this.ud.o;this.wb.rc();var p=this.wb.Aa[0].o;n.Wd(0,o,function(f,m){var w=u[5*f];f=u[5*m],m=p[2*w],w=p[2*w+1];var x=p[2*f];return w<(f=p[2*f+1])?-1:w>f?1:m<x?-1:m>x?1:0})},a.prototype.cS=function(){for(var n=this.ld;n!=-1;n=this.ve(n))if(!h.ba.Ic(this.jc(n)))return!0;return!1},a.prototype.bC=function(n,o){for(var u=this.Ob(n),p=this.Ob(o),f=this.mv(n),m=this.mv(o),w=this.Ob(n);w!=-1;w=this.Sb(w))this.gx(w,o);for(w=this.Ob(o);w!=-1;w=this.Sb(w))this.gx(w,n);this.$o(n,p),this.$o(o,u),this.ap(n,m),this.ap(o,f),u=this.I(n),p=this.ea(n),f=this.ea(o),this.Vj(n,this.I(o)),this.Vj(o,u),this.Tl(n,f),this.Tl(o,p),u=this.dd.U(n,2),this.dd.T(n,2,this.dd.U(o,2)),this.dd.T(o,2,u)},a}(),h.hd=L})(X||(X={})),function(h){var L=function(b){function c(a,n,o,u){var p=b.call(this)||this;return p.aa=new h.l,a===void 0?p.OE():typeof a=="number"?p.PO(a,n,o,u):a instanceof h.Ta?n!==void 0?p.Su(a,n,o):p.QO(a):a instanceof h.ua?n!==void 0?p.SO(a,n):p.RO(a):a instanceof h.l?p.OO(a):p.OE(),p}return ai(c,b),c.prototype.Su=function(a,n,o){this.description=h.ee.og(),this.aa.Pa(),a.B()||this.vu(a,n,o)},c.prototype.OO=function(a){this.description=h.ee.og(),this.aa.L(a),this.aa.normalize()},c.prototype.RO=function(a){if(a==null)throw h.i.O();this.description=a,this.aa.Pa()},c.prototype.SO=function(a,n){if(a==null)throw h.i.O();this.description=a,this.aa.L(n),this.aa.normalize()},c.prototype.OE=function(){this.description=h.ee.og(),this.aa.Pa()},c.prototype.QO=function(a){this.description=h.ee.og(),this.aa.Pa(),a.B()||this.vu(a)},c.prototype.PO=function(a,n,o,u){this.description=h.ee.og(),this.L(a,n,o,u)},c.prototype.L=function(a,n,o,u){if(this.wc(),typeof a=="number")this.aa.L(a,n,o,u);else for(this.Pa(),n=0,o=a.length;n<o;n++)this.$b(a[n])},c.prototype.Yo=function(a){if(this.wc(),!a.YS())throw h.i.O();this.aa.L(a)},c.prototype.Pa=function(){this.wc(),this.aa.Pa()},c.prototype.B=function(){return this.aa.B()},c.prototype.S=function(){return this.aa.S()},c.prototype.da=function(){return this.aa.da()},c.prototype.hk=function(){return this.aa.hk()},c.prototype.Lp=function(){return this.aa.Lp()},c.prototype.Kp=function(){return this.aa.tf()},c.prototype.$b=function(a){if(a instanceof h.h)this.wc(),this.aa.$b(a);else if(a instanceof h.l)this.wc(),this.aa.$b(a);else if(a instanceof h.Ta){if(this.wc(),!a.Bc()){var n=a.description;if(this.description!=n&&this.Ll(n),this.B())this.vu(a);else{this.aa.$b(a.D());for(var o=1,u=n.Ba;o<u;o++)for(var p=n.Fd(o),f=h.ua.Wa(p),m=0;m<f;m++){var w=a.Vc(p,m),x=this.Vg(p,m);x.$b(w),this.setInterval(p,m,x)}}}}else if(a instanceof c&&!a.B())for((n=a.description)!=this.description&&this.Ll(n),this.aa.$b(a.aa),o=1,u=n.Ba;o<u;o++)for(p=n.qd(o),f=h.ua.Wa(p),m=0;m<f;m++)w=a.Vg(p,m),(x=this.Vg(p,m)).$b(w),this.setInterval(p,m,x)},c.prototype.vu=function(a,n,o){if(n!==void 0){this.aa.L(a.D(),n,o),o=1;for(var u=(n=a.description).Ba;o<u;o++)for(var p=n.Fd(o),f=h.ua.Wa(p),m=0;m<f;m++){var w=a.Vc(p,m);this.setInterval(p,m,w,w)}}else for(this.aa.L(a.la[0],a.la[1]),o=1,u=(n=a.description).Ba;o<u;o++)for(p=n.Fd(o),f=h.ua.Wa(p),m=0;m<f;m++)w=a.Vc(p,m),this.setInterval(p,m,w,w)},c.prototype.setInterval=function(a,n,o,u){if(o=typeof o=="number"?new h.Oc(o,u):o,this.wc(),a==0)if(n==0)this.aa.v=o.pa,this.aa.C=o.wa;else{if(n!=1)throw h.i.re();this.aa.G=o.pa,this.aa.H=o.wa}else this.pD(0,a,n,o.pa),this.pD(1,a,n,o.wa)},c.prototype.X=function(a,n){this.wc(),this.aa.X(a,n)},c.prototype.Pc=function(a){if(a instanceof h.Ed)this.wc(),a.gC(this.aa);else if(this.wc(),!this.aa.B()){var n=new h.IK;this.Ro(n),n.PS()?n.Pa():a.gC(n)}},c.prototype.copyTo=function(a){if(a.K()!=this.K())throw h.i.O();if(a.wc(),a.description=this.description,a.aa.L(this.aa),a.la=null,this.la!=null){a.qu();for(var n=0;n<2*(this.description.Be.length-2);n++)a.la[n]=this.la[n]}},c.prototype.Ja=function(){return new c(this.description)},c.prototype.He=function(){return this.aa.qF()},c.prototype.Rb=function(){return this.aa.sR()},c.prototype.K=function(){return 197},c.prototype.Eb=function(){return 2},c.prototype.dn=function(a){this.copyTo(a)},c.prototype.A=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H},c.prototype.Ro=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H,a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},c.prototype.Vg=function(a,n){var o=new h.Oc;return o.L(this.Pd(0,a,n),this.Pd(1,a,n)),o},c.prototype.If=function(a,n){n.kg(this.description);var o=this.description.Ba-1;switch(a){case 0:for(a=0;a<o;a++)for(var u=this.description.qd(a),p=h.ua.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(0,u,f));n.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<o;a++)for(u=this.description.qd(a),p=h.ua.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(1,u,f));n.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<o;a++)for(u=this.description.qd(a),p=h.ua.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(0,u,f));n.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<o;a++)for(u=this.description.qd(a),p=h.ua.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(1,u,f));n.Db(this.aa.C,this.aa.G);break;default:throw h.i.re()}},c.prototype.gB=function(a,n){a=this.aa.gB(a),n.na(a.x,a.y)},c.prototype.eR=function(a,n){return n*(a.Qq-2)},c.prototype.rF=function(a,n,o){if(this.aa.B())throw h.i.ga("empty geometry");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=h.ua.Wa(n))throw h.i.O();var u=this.description.Qf(n);return this.qu(),0<=u?this.la[this.eR(this.description,a)+this.description.ER(u)-2+o]:h.ua.te(n)},c.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var a=c.Ig(this.description,0),n=c.Ig(this.description,1),o=0,u=1,p=this.description.Ba;u<p;u++){var f=this.description.qd(u),m=h.ua.Wa(f);f=h.ua.te(f);for(var w=0;w<m;w++)this.la[a+o]=f,this.la[n+o]=f,o++}}},c.prototype.un=function(a){if(this.la!=null)if(2<a.Be.length){for(var n=h.ee.Kw(a,this.description),o=[],u=c.Ig(this.description,0),p=c.Ig(this.description,1),f=c.Ig(a,0),m=c.Ig(a,1),w=0,x=1,E=a.Ba;x<E;x++){var T=a.qd(x),A=h.ua.Wa(T);if(n[x]==-1){var P=h.ua.te(T);for(T=0;T<A;T++)o[f+w]=P,o[m+w]=P,w++}else for(P=this.description.ak(n[x])-2,T=0;T<A;T++)o[f+w]=this.la[u+P],o[m+w]=this.la[p+P],w++,P++}this.la=o}else this.la=null;this.description=a},c.prototype.Pd=function(a,n,o){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=h.ua.Wa(n))throw h.i.re();var u=this.description.Qf(n);return 0<=u?(this.qu(),this.la[c.Ig(this.description,a)+this.description.ak(u)-2+o]):h.ua.te(n)},c.prototype.pD=function(a,n,o,u){if(this.wc(),n==0)a!=0?o!=0?this.aa.H=u:this.aa.C=u:o!=0?this.aa.G=u:this.aa.v=u;else{if(o>=h.ua.Wa(n))throw h.i.re();if(!this.hasAttribute(n)){if(h.ua.xG(n,u))return;this.se(n)}n=this.description.Qf(n),this.qu(),this.la[c.Ig(this.description,a)+this.description.ak(n)-2+o]=u}},c.Ig=function(a,n){return n*(a.Be.length-2)},c.prototype.Fa=function(a){this.wc();var n=new h.l;return a.A(n),this.aa.Fa(n)},c.prototype.isIntersecting=function(a){return a instanceof h.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)},c.prototype.Lu=function(a,n){this.wc(),a.B()?this.Pa():n!==void 0?this.vu(a,n,void 0):this.aa.Lu(a.Ng(),a.kh())},c.prototype.offset=function(a,n){this.wc(),this.aa.offset(a,n)},c.prototype.normalize=function(){this.wc(),this.aa.normalize()},c.prototype.tf=function(a){if(a===void 0){if(a=new h.Ta(this.description),this.B())return a;for(n=this.description.Ba,o=1;o<n;o++)for(u=this.description.Fd(o),p=h.ua.Wa(u),f=0;f<p;f++)m=.5*(this.Pd(0,u,f)+this.Pd(1,u,f)),a.setAttribute(u,f,m);return a.Db(this.aa.hk(),this.aa.Lp()),a}if(a.kg(this.description),this.B())a.Pa();else{for(var n=this.description.Ba,o=1;o<n;o++)for(var u=this.description.qd(o),p=h.ua.Wa(u),f=0;f<p;f++){var m=.5*(this.rF(0,u,f)+this.rF(1,u,f));a.setAttribute(u,f,m)}a.Db(this.aa.tf())}},c.prototype.hz=function(){return new h.Ta(this.aa.hz())},c.prototype.contains=function(a){return a instanceof h.Ta?!a.B()&&this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)},c.prototype.YO=function(a){return this.aa.contains(a)},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.aa.Nb(a.aa))return!1;for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.dc=function(){var a=this.description.dc();if(a=h.P.Vh(a,this.aa.dc()),!this.B()&&this.la!=null)for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)a=h.P.Vh(a,this.la[n]);return a},c.prototype.gs=function(){return this.aa.v},c.prototype.js=function(){return this.aa.G},c.prototype.fs=function(){return this.aa.C},c.prototype.hs=function(){return this.aa.H},c.prototype.mg=function(){return h.si.im(this,null)},c.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},c}(h.ba);h.Hh=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o){c===void 0?this.Pa():(this.v=c,this.G=a,this.C=n,this.H=o)}return b.construct=function(c,a,n,o){var u=new b;return u.v=c,u.G=a,u.C=n,u.H=o,u},b.prototype.L=function(c,a,n,o){typeof c=="number"?n!==void 0?(this.v=c,this.G=a,this.C=n,this.H=o,this.normalize()):(this.v=c,this.G=a,this.C=c,this.H=a):c instanceof h.h?a!==void 0?(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*n,this.H=this.G+n,this.normalize()):(this.v=c.x,this.G=c.y,this.C=c.x,this.H=c.y):c instanceof b?this.L(c.v,c.G,c.C,c.H):c instanceof h.Oc&&(c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa))},b.prototype.bx=function(c,a){if(a!==void 0)if(a==0)this.Pa();else{this.v=c[0].x,this.G=c[0].y,this.C=this.v,this.H=this.G;for(var n=1;n<a;n++){var o=c[n];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(c==null||c.length==0)this.Pa();else for(o=c[0],this.L(o.x,o.y),n=1;n<c.length;n++)a=c[n],this.Mk(a.x,a.y)},b.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.$b=function(c,a){typeof c=="number"?this.B()?(this.v=c,this.G=a,this.C=c,this.H=a):(this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)):c instanceof h.h||c instanceof h.Od?this.$b(c.x,c.y):c instanceof b&&!c.B()&&(this.$b(c.v,c.G),this.$b(c.C,c.H))},b.prototype.Mk=function(c,a){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)},b.prototype.X=function(c,a){this.B()||(this.v-=c,this.C+=c,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())},b.prototype.scale=function(c){0>c&&this.Pa(),this.B()||(this.v*=c,this.C*=c,this.G*=c,this.H*=c)},b.prototype.zoom=function(c,a){this.B()||this.L(this.tf(),c*this.S(),a*this.da())},b.prototype.isIntersecting=function(c){return!this.B()&&!c.B()&&(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},b.prototype.BG=function(c){return(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},b.prototype.Fa=function(c){return!this.B()&&!c.B()&&(c.v>this.v&&(this.v=c.v),c.C<this.C&&(this.C=c.C),c.G>this.G&&(this.G=c.G),c.H<this.H&&(this.H=c.H),(c=this.v<=this.C&&this.G<=this.H)||this.Pa(),c)},b.prototype.gB=function(c){switch(c){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.re()}},b.prototype.hB=function(c){if(c==null||4>c.length)throw h.i.O();c[0]!=null?c[0].na(this.v,this.G):c[0]=h.h.construct(this.v,this.G),c[1]!=null?c[1].na(this.v,this.H):c[1]=h.h.construct(this.v,this.H),c[2]!=null?c[2].na(this.C,this.H):c[2]=h.h.construct(this.C,this.H),c[3]!=null?c[3].na(this.C,this.G):c[3]=h.h.construct(this.C,this.G)},b.prototype.qF=function(){return this.B()?0:this.S()*this.da()},b.prototype.sR=function(){return this.B()?0:2*(this.S()+this.da())},b.prototype.hk=function(){return(this.C+this.v)/2},b.prototype.Lp=function(){return(this.H+this.G)/2},b.prototype.S=function(){return this.C-this.v},b.prototype.da=function(){return this.H-this.G},b.prototype.move=function(c,a){this.B()||(this.v+=c,this.G+=a,this.C+=c,this.H+=a)},b.prototype.Lu=function(c,a){if(a!==void 0)this.move(c-this.hk(),a-this.Lp());else if(c instanceof h.h)this.Lu(c.x,c.y);else{if(!(c instanceof h.Ta))throw h.i.O();a=(this.C-this.v)/2;var n=(this.H-this.G)/2;this.v=c.Ng()-a,this.C=c.Ng()+a,this.G=c.kh()-n,this.H=c.kh()+n}},b.prototype.offset=function(c,a){this.v+=c,this.C+=c,this.G+=a,this.H+=a},b.prototype.normalize=function(){if(!this.B()){var c=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=c,this.C=a,c=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=c,this.H=a}},b.prototype.fn=function(c){c.na(this.v,this.G)},b.prototype.UI=function(c){c.na(this.C,this.G)},b.prototype.XI=function(c){c.na(this.v,this.H)},b.prototype.gn=function(c){c.na(this.C,this.H)},b.prototype.YS=function(){return this.B()||this.v<=this.C&&this.G<=this.H},b.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},b.prototype.hz=function(){return h.h.construct(this.v,this.G)},b.prototype.contains=function(c,a){if(a!==void 0)return c>=this.v&&c<=this.C&&a>=this.G&&a<=this.H;if(c instanceof h.Ta)return this.contains(c.Ng(),c.kh());if(c instanceof h.h)return this.contains(c.x,c.y);if(c instanceof b)return c.v>=this.v&&c.C<=this.C&&c.G>=this.G&&c.H<=this.H;throw h.i.O()},b.prototype.jm=function(c,a){if(a!==void 0)return c>this.v&&c<this.C&&a>this.G&&a<this.H;if(c instanceof h.h)return this.jm(c.x,c.y);if(c instanceof b)return c.v>this.v&&c.C<this.C&&c.G>this.G&&c.H<this.H;throw h.i.O()},b.prototype.Nb=function(c){return c==this||c instanceof b&&(!(!this.B()||!c.B())||this.v==c.v&&this.G==c.G&&this.C==c.C&&this.H==c.H)},b.prototype.dc=function(){var c=this.v;c=h.P.truncate(c^c>>>32);var a=h.P.Vh(c);return c=this.C,c=h.P.truncate(c^c>>>32),a=h.P.Vh(c,a),c=this.G,c=h.P.truncate(c^c>>>32),a=h.P.Vh(c,a),c=this.H,c=h.P.truncate(c^c>>>32),h.P.Vh(c,a)},b.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},b.prototype.uy=function(c,a){var n=this.$j(c),o=this.$j(a);if((n&o)!=0)return 0;if((n|o)==0)return 4;var u=(n!=0?1:0)|(o!=0?2:0);do{var p=a.x-c.x,f=a.y-c.y;if(p>f?(n&b.SC)!=0?((n&b.lu)!=0?(c.y+=f*(this.v-c.x)/p,c.x=this.v):(c.y+=f*(this.C-c.x)/p,c.x=this.C),n=this.$j(c)):(o&b.SC)!=0?((o&b.lu)!=0?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.$j(a)):n!=0?((n&b.mu)!=0?(c.x+=p*(this.G-c.y)/f,c.y=this.G):(c.x+=p*(this.H-c.y)/f,c.y=this.H),n=this.$j(c)):((o&b.mu)!=0?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.$j(a)):(n&b.TC)!=0?((n&b.mu)!=0?(c.x+=p*(this.G-c.y)/f,c.y=this.G):(c.x+=p*(this.H-c.y)/f,c.y=this.H),n=this.$j(c)):(o&b.TC)!=0?((o&b.mu)!=0?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.$j(a)):n!=0?((n&b.lu)!=0?(c.y+=f*(this.v-c.x)/p,c.x=this.v):(c.y+=f*(this.C-c.x)/p,c.x=this.C),n=this.$j(c)):((o&b.lu)!=0?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.$j(a)),(n&o)!=0)return 0}while((n|o)!=0);return u},b.prototype.$j=function(c){return(c.x<this.v?1:0)|(c.x>this.C?1:0)<<1|(c.y<this.G?1:0)<<2|(c.y>this.H?1:0)<<3},b.prototype.Di=function(c){return!this.B()&&(this.S()<=c||this.da()<=c)},b.prototype.ub=function(c){return c instanceof h.h?Math.sqrt(this.cK(c)):Math.sqrt(this.px(c))},b.prototype.px=function(c){var a=0,n=0,o=this.v-c.C;return o>a&&(a=o),(o=this.G-c.H)>n&&(n=o),(o=c.v-this.C)>a&&(a=o),(o=c.G-this.H)>n&&(n=o),a*a+n*n},b.prototype.cK=function(c){var a=0,n=0,o=this.v-c.x;return o>a&&(a=o),(o=this.G-c.y)>n&&(n=o),(o=c.x-this.C)>a&&(a=o),(o=c.y-this.H)>n&&(n=o),a*a+n*n},b.prototype.en=function(c){this.B()?c.Pa():c.L(this.v,this.C)},b.lu=1,b.mu=4,b.SC=3,b.TC=12,b}();h.l=L}(X||(X={})),function(h){var L,b;(b=L||(L={}))[b.initialize=0]="initialize",b[b.initializeRed=1]="initializeRed",b[b.initializeBlue=2]="initializeBlue",b[b.initializeRedBlue=3]="initializeRedBlue",b[b.sweep=4]="sweep",b[b.sweepBruteForce=5]="sweepBruteForce",b[b.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",b[b.sweepRedBlue=7]="sweepRedBlue",b[b.sweepRed=8]="sweepRed",b[b.sweepBlue=9]="sweepBlue",b[b.iterate=10]="iterate",b[b.iterateRed=11]="iterateRed",b[b.iterateBlue=12]="iterateBlue",b[b.iterateBruteForce=13]="iterateBruteForce",b[b.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",b[b.resetRed=15]="resetRed",b[b.resetBlue=16]="resetBlue";var c=function(){function a(n,o){this.ei=n,this.YG=o}return a.prototype.qr=function(n,o,u){this.ei.BX(u,n,o,this.YG)},a.prototype.bq=function(n){return this.ei.Tr(n,this.YG)},a}();L=function(){function a(){this.qw=this.po=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.ho=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Ok()}return a.prototype.mr=function(){this.Ok(),this.Rv=!0,this.Fb==null?(this.ho=new h.ja(0),this.Fb=[]):(this.ho.Dh(0),this.Fb.length=0)},a.prototype.bd=function(n,o){if(!this.Rv)throw h.i.Hb();var u=new h.l;u.L(o),this.ho.add(n),this.Fb.push(u)},a.prototype.Hp=function(){if(!this.Rv)throw h.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},a.prototype.jK=function(){this.Ok(),this.Qv=!0,this.Fb==null?(this.ho=new h.ja(0),this.Fb=[]):(this.ho.Dh(0),this.Fb.length=0)},a.prototype.CD=function(n,o){if(!this.Qv)throw h.i.Hb();var u=new h.l;u.L(o),this.ho.add(n),this.Fb.push(u)},a.prototype.cF=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},a.prototype.iK=function(){this.Ok(),this.Pv=!0,this.rd==null?(this.ew=new h.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},a.prototype.yD=function(n,o){if(!this.Pv)throw h.i.Hb();var u=new h.l;u.L(o),this.ew.add(n),this.rd.push(u)},a.prototype.bF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},a.prototype.next=function(){if(this.Jc)return!1;for(var n=!0;n;)switch(this.Yb){case 0:n=this.Bz();break;case 1:n=this.kS();break;case 2:n=this.hS();break;case 3:n=this.jS();break;case 4:n=this.MX();break;case 5:n=this.IX();break;case 6:n=this.JX();break;case 7:n=this.KX();break;case 8:n=this.tx();break;case 9:n=this.cC();break;case 10:n=this.Pz();break;case 11:n=this.bT();break;case 12:n=this.ZS();break;case 13:n=this.$S();break;case 14:n=this.aT();break;case 15:n=this.eJ();break;case 16:n=this.dJ();break;default:throw h.i.Ra()}return!this.Jc},a.prototype.VB=function(n){this.ra=n},a.prototype.oz=function(n){return this.Fb[n]},a.prototype.Wy=function(n){return this.rd[n]},a.prototype.pl=function(n){return this.ho.read(n)},a.prototype.jl=function(n){return this.ew.read(n)},a.Oz=function(n){return(1&n)==1},a.gq=function(n){return(1&n)==0},a.prototype.Ok=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.pe=-1,this.Jc=!0},a.prototype.Bz=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length)return this.pe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,2*this.Fb.length,!0),this.pe=2*this.Fb.length,this.Yb=4,!0},a.prototype.kS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,this.Md.size,!0),this.pe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.dJ()},a.prototype.hS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var n=0;n<this.rd.length;n++){var o=this.rd[n];this.ff.Dr(o.v,o.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.eJ()},a.prototype.jS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.ff.mr(),n=0;n<this.rd.length;n++)o=this.rd[n],this.ff.Dr(o.v,o.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);for(n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.pe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},a.prototype.MX=function(){var n=this.Md.get(--this.pe),o=n>>1;return a.gq(n)?(this.sd.remove(o),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1)):(this.po.yB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Wf=o,this.Yb=10,!0)},a.prototype.IX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Tg=this.Wf=this.pe,this.Yb=13,!0)},a.prototype.JX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Wf=this.pe,this.Tg=this.rd.length,this.Yb=14,!0)},a.prototype.KX=function(){var n=this.Md.get(this.pe-1),o=this.Ff.get(this.Tg-1),u=this.Tr(n,!0),p=this.Tr(o,!1);return u>p?this.tx():u<p?this.cC():a.Oz(n)?this.tx():a.Oz(o)?this.cC():this.tx()},a.prototype.tx=function(){var n=this.Md.get(--this.pe),o=n>>1;if(a.gq(n))return this.Ef!=-1&&this.Kj.get(o)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(o)),this.Kj.set(o,-1)):this.sd.remove(o),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(n=this.Bd.sc(this.Df);n!=-1;){var u=this.Bd.getData(n);this.ff.xj(u),this.Jj.set(u,-1),u=this.Bd.lb(n),this.Bd.kd(this.Df,n),n=u}return 0<this.ff.size()?(this.qw.yB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Wf=o,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.kp),this.Kj=new h.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(o,this.Bd.addElement(this.Ef,o)),this.Yb=7),!0},a.prototype.cC=function(){var n=this.Ff.get(--this.Tg),o=n>>1;if(a.gq(n))return this.Df!=-1&&this.Jj.get(o)!=-1?(this.Bd.kd(this.Df,this.Jj.get(o)),this.Jj.set(o,-1)):this.ff.remove(o),this.Tg!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(n=this.Bd.sc(this.Ef);n!=-1;){var u=this.Bd.getData(n);this.sd.xj(u),this.Kj.set(u,-1),u=this.Bd.lb(n),this.Bd.kd(this.Ef,n),n=u}return 0<this.sd.size()?(this.po.yB(this.rd[o].v,this.rd[o].C,this.ra),this.Bf=o,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.kp),this.Jj=new h.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(o,this.Bd.addElement(this.Df,o)),this.Yb=7),!0},a.prototype.Pz=function(){if(this.Bf=this.po.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.pe)>>1;return this.sd.xj(n),this.Yb=4,!0},a.prototype.bT=function(){if(this.Wf=this.po.next(),this.Wf!=-1)return!1;this.Bf=this.Wf=-1;var n=this.Ff.get(this.Tg)>>1;return this.ff.xj(n),this.Yb=7,!0},a.prototype.ZS=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.pe)>>1;return this.sd.xj(n),this.Yb=7,!0},a.prototype.$S=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.pe]);var n=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.aT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.pe]);var n=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.eJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.pe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},a.prototype.dJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},a.prototype.Mt=function(n,o,u){this.Cm==null&&(this.Cm=new h.Zt),u=new c(this,u),this.Cm.sort(n,0,o,u)},a.prototype.BX=function(n,o,u,p){var f=this;n.Wd(o,u,function(m,w){var x=f.Tr(m,p),E=f.Tr(w,p);return x<E||x==E&&a.gq(m)&&a.Oz(w)?-1:1})},a.prototype.Tr=function(n,o){var u=.5*this.ra;return o?(o=this.Fb[n>>1],a.gq(n)?o.G-u:o.H+u):(o=this.rd[n>>1],a.gq(n)?o.G-u:o.H+u)},a}(),h.rC=L}(X||(X={})),function(h){var L=function(){function b(){}return b.construct=function(c,a,n,o,u,p){var f=new b;return f.v=c,f.G=a,f.Xe=n,f.C=o,f.H=u,f.Dg=p,f},b.prototype.Pa=function(){this.Xe=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.PS=function(){return isNaN(this.Xe)},b.prototype.L=function(c,a,n,o,u,p){o!==void 0?typeof c=="number"?(this.v=c,this.G=a,this.Xe=n,this.C=o,this.H=u,this.Dg=p):(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*n,this.H=this.G+n,this.Xe=c.z-.5*o,this.Dg=this.Xe+o):(this.v=c,this.G=a,this.Xe=n,this.C=c,this.H=a,this.Dg=n)},b.prototype.move=function(c){this.v+=c.x,this.G+=c.y,this.Xe+=c.z,this.C+=c.x,this.H+=c.y,this.Dg+=c.z},b.prototype.copyTo=function(c){c.v=this.v,c.G=this.G,c.C=this.C,c.H=this.H},b.prototype.Mk=function(c,a,n){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Xe)==0?this.Xe>n?this.Xe=n:this.Dg<n&&(this.Dg=n):this.Dg=this.Xe=n},b.prototype.$b=function(c,a,n){if(typeof c=="number")this.B()?(this.v=c,this.G=a,this.Xe=n,this.C=c,this.H=a,this.Dg=n):this.Mk(c,a,n);else if(c instanceof h.Od)this.$b(c.x,c.y,c.z);else{if(!(c instanceof b))throw h.i.O();c.B()||(this.$b(c.v,c.G,c.Xe),this.$b(c.C,c.H,c.Dg))}},b.prototype.construct=function(c,a,n){c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa,this.Xe=n.pa,this.Dg=n.wa)},b.prototype.hB=function(c){if(c==null||8>c.length)throw h.i.O();c[0]=new h.Od(this.v,this.G,this.Xe),c[1]=new h.Od(this.v,this.H,this.Xe),c[2]=new h.Od(this.C,this.H,this.Xe),c[3]=new h.Od(this.C,this.G,this.Xe),c[4]=new h.Od(this.v,this.G,this.Dg),c[5]=new h.Od(this.v,this.H,this.Dg),c[6]=new h.Od(this.C,this.H,this.Dg),c[7]=new h.Od(this.C,this.G,this.Dg)},b.prototype.bx=function(c){if(c==null||c.length==0)this.Pa();else{var a=c[0];for(this.L(a.x,a.y,a.z),a=1;a<c.length;a++){var n=c[a];this.Mk(n.x,n.y,n.z)}}},b}();h.IK=L}(X||(X={})),function(h){(function(L){L.Ra=function(){var b=Error();return b.message="Internal Error",b},L.Fe=function(){var b=Error();return b.message="Not Implemented",b},L.Zk=function(){var b=Error();return b.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",b},L.Hb=function(){var b=Error();return b.message="Invalid Call",b},L.O=function(b){var c=Error();return c.message="Illegal Argument Exception",b!==void 0&&(c.message+=": "+b),c},L.hu=function(b){var c=Error();return c.message=b!==void 0?"Runtime Exception: "+b:"Runtime Exception.",c},L.ga=function(b){var c=Error();return c.message="Geometry Exception: "+b,c},L.AK=function(){var b=Error();return b.message="Assert Failed Exception",b},L.re=function(){var b=Error();return b.message="IndexOutOfBoundsException",b},L.QC=function(){var b=Error();return b.message="UserCancelException",b}})(h.i||(h.i={}))}(X||(X={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(X||(X={})),function(h){var L=function(){function a(n,o){this.Xa=n,this.zH=o,this.FH=-1,this.ul=!1}return a.prototype.qe=function(){},a.prototype.next=function(){if(++this.FH==this.zH.I())return null;var n=this.zH.Oa(this.FH);n.scale(this.Xa.fc);var o=new h.Ea;return this.Xa.ny(n,this.ul,o),o},a.prototype.Ma=function(){return 0},a}(),b=function(){function a(n,o,u){this.Xa=n,this.tw=o,this.Yn=!1,this.eo=u,this.dw=[0],this.tk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new h.Ea,this.vk=[]}return a.prototype.qe=function(){},a.prototype.next=function(){if(this.Yn){this.Yn=!1,this.td.ia();var n=h.ba.ig(this.sq);return h.Hg.Nk(n,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.eo!=null&&this.eo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.eo!=null&&this.eo.$k(null,0)}n=null,this.tk[0]=0,this.zA=this.dw[0]=0,this.fi=NaN,this.Yn=!1;for(var o=this.vk.length=0,u=new h.h,p=new h.h,f=[0];this.td.Ia()&&8>this.zA;){var m=this.td.ia();if(u.N(m.ac()),p.N(m.xc()),u.scale(this.Xa.fc),p.scale(this.Xa.fc),h.ej.Ou(u,p)?u.x=p.x:h.ej.Mu(u,p)&&(p.x=u.x),this.vk.length=0,h.ej.nF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,u,p,this.Xa.KA,this.Xa.at,f,this.Pj,this.Is,this.vk,this.dw),this.eo!=null&&(m=this.vk.slice(0),this.eo.kG(this.eo.ea()-1,m,m.length-1)),h.ej.Nu(u,p)?(this.sq.Pa(),this.Xa.ny(u,this.ul,this.sq),this.Yn=!0):(this.sq.Pa(),this.Yn=this.sy(f[0],this.sq)),this.Yn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.uW();break}n==null&&(n=new h.Ea).$k(null,0),this.HD(n),o++}if(this.dw[0]=0,0<o){for(f=this.td.xb();0<o;)this.td.ni(),u.N(this.tw.Oa(this.td.xb())),p.N(this.tw.Oa(this.td.jk())),u.scale(this.Xa.fc),p.scale(this.Xa.fc),this.ul&&(h.ej.Ou(u,p)?u.x=p.x:h.ej.Mu(u,p)&&(p.x=u.x)),this.vk.length=0,h.ej.nF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,p,u,this.Xa.KA,this.Xa.at,null,this.Pj,this.Is,this.vk,this.dw),this.HD(n),o--;return u.N(this.tw.Oa(this.td.xb())),u.scale(this.Xa.fc),c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,u,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.bo,this.ul,this.tk,n,NaN,NaN),this.td.Wb(f),this.td.ia(),o=h.ta.mj(null,n,!0),h.Hg.Nk(n,o,!0,!0,this.Xa.Vb)}return this.Yn=!1,this.td.ia(),n=h.ba.ig(this.sq),h.Hg.Nk(n,this.Xa.Cq,!0,!0,this.Xa.Vb)},a.prototype.HD=function(n){var o=this.vk[0],u=this.Pj[0]-1.570796326794897,p=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var f=this.fi+1.570796326794897;u=f+3.141592653589793-(this.fi-this.Pj[0])}else u=(f=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var m=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),w=!1;if(Math.abs(u-f)<=.5*this.Xa.bo)if(m){var x=n.Oa(n.I()-2);x.scale(this.Xa.fc);var E=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,o.x,o.y,x.x,x.y,E),x=E.u;x<=f;)x+=6.283185307179586;for(;x>f;)x-=6.283185307179586;x<u&&(w=!0)}else w=!0;w?(n.xB(0,n.I()-1),this.ul||((o=new h.h).N(n.Oa(n.I()-1)),o.scale(this.Xa.fc),-3.141592653589793>o.x-this.tk[0]?this.tk[0]-=6.283185307179586:3.141592653589793<o.x-this.tk[0]&&(this.tk[0]+=6.283185307179586)),m||(u=.5*(u+f))):(m?((f=new h.h).N(o),f.scale(1/this.Xa.fc),n.xf(0,-1,f)):c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.vk[0],f,u,this.Xa.bo,this.ul,this.tk,n,NaN,NaN),this.zA+=1)}c.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.vk,u,p,this.ul,this.tk,n),this.fi=this.Is[0]},a.prototype.sy=function(n,o){return this.Xa.sy(this.vk,n,this.Pj[0],this.Is[0],this.ul,o)},a.prototype.Ma=function(){return 0},a}(),c=function(){function a(){}return a.buffer=function(n,o,u,p,f,m){if(n==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(n.B())return new h.Ea(n.description);var w=new a;w.Sg=o,w.Kc=h.cb.tc(o);var x=h.cb.xv(w.Kc);if(w.Vb=m,w.Ub=h.cb.gv(w.Kc),w.lc=x*(2-x),w.fc=w.Kc.Id().ci,w.ra=w.Sg.Ln(),w.Cq=w.Kc.Ln(),w.at=w.Cq*w.fc,w.Bq=1.570796326794897/w.fc,w.GY=3.141592653589793/w.fc,w.Ls=6.283185307179586/w.fc,w.HY=w.Ls/6,w.FA=0,w.FY=1.5707963267948966*w.Ub/w.FA,u==4?(w.Ae=2,w.Yv=!0):(w.Ae=u,w.Yv=!1),w.La=p,w.sb=Math.abs(p),isNaN(f)||.001>f?w.pX():w.ao=f,u=n.K(),h.ba.zd(u)?((u=new h.Ua(n.description)).oc(n,!0),n=u,u=1607):u==197&&(u=new h.l,n.A(u),u.S()<=w.ra||u.da()<=w.ra?((u=new h.Ua(n.description)).bd(n,!1),n=u,u=1607):((u=new h.Ea(n.description)).bd(n,!1),n=u,u=1736)),w.qX(),h.ba.Sn(u)||w.rX(),w.sb<=.5*w.ao)return u!=1736?new h.Ea(n.description):w.Yv?n:h.ej.Sr(n,w.Sg,w.Ae,w.KA,-1,m);if(0>w.La&&u!=1736)return new h.Ea(n.description);if(w.Yv&&h.ba.Ic(u)?(o=h.ej.Sr(n,o,4,NaN,w.ao,m),n=h.cb.Bh(o,w.Sg,w.Kc)):n=h.cb.Bh(n,w.Sg,w.Kc),(n=h.Jh.nj(n,w.Kc)).B())return new h.Ea(n.description);switch(!w.Yv&&h.ba.Ic(u)&&(n=h.ej.jI(w.fc,n)),n=a.CX(n,w.Kc),u){case 1736:o=w.ON(n);break;case 1607:o=w.PN(n);break;case 550:o=w.MN(n);break;case 33:o=w.NN(n);break;default:throw h.i.ga("corrupted_geometry")}return(w=h.cb.Bh(o,w.Kc,w.Sg)).Ll(n.description),w},a.prototype.ON=function(n){var o=new h.Ea;n=new b(this,n,o),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),n=h.jp.pj(n,this.Kc,2);var u=new h.Ed;return u.scale(1/this.fc,1/this.fc),o.Pc(u),o=h.jp.pj(o,this.Kc,2),0<=this.La?h.Ih.local().W(o,n,this.Kc,this.Vb):h.lp.local().W(o,n,this.Kc,this.Vb)},a.prototype.PN=function(n){return n=new b(this,n,null),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),h.jp.pj(n,this.Kc,2)},a.prototype.MN=function(n){return n=new L(this,n),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),h.jp.pj(n,this.Kc,2)},a.prototype.NN=function(n){(n=n.D()).scale(this.fc);var o=new h.Ea;return this.ny(n,!1,o),h.jp.pj(o,this.Kc,2)},a.prototype.sy=function(n,o,u,p,f,m){var w=n[0],x=n[n.length-1],E=w.y>x.y?w.y:x.y,T=h.F.q(this.Ub,this.lc,w.y<x.y?w.y:x.y);if(E=h.F.q(this.Ub,this.lc,E),.001<this.FA-(T+o+this.sb)&&.001<this.FA+(E-o-this.sb))return!1;T=(o=u-1.570796326794897)-3.141592653589793,E=o+3.141592653589793;var A=(u=p+1.570796326794897)+3.141592653589793,P=[NaN],F=[NaN],j=[NaN],H=[NaN];if(p=!1,a.YI(this.Ub,this.lc,this.sb,w,o,T,x,u,P,F),a.YI(this.Ub,this.lc,this.sb,x,A,u,w,T,j,H),(u<P[0]&&P[0]<A||u<F[0]&&F[0]<A)&&(p=!0),p||(T<j[0]&&j[0]<o||T<H[0]&&H[0]<o)&&(p=!0),!p&&f)return!1;for(var W=[],G=n.length-1;0<=G;G--)W.push(n[G]);return m.Pa(),m.$k(null,0),G=[0],a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,n,o,u,f,G,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,x,u,A,this.bo,f,G,m,P[0],F[0]),a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,W,A,E,f,G,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,w,T,o,this.bo,f,G,m,j[0],H[0]),n=!1,f||(n=this.CE(this.fc,m)),p||n},a.prototype.ny=function(n,o,u){u.Pa(),u.$k(null,0),a.Jr(this.Ub,this.lc,this.fc,this.sb,n,-this.bo,6.283185307179586,this.bo,o,[0],u,NaN,NaN),o||this.CE(this.fc,u)},a.prototype.CE=function(n,o){var u=this.pO(n,o);return n=this.qO(n,o),u||n},a.prototype.pO=function(n,o){var u=o.I(),p=!1,f=new h.l;if(o.A(f),!h.s.$(f.H*n,1.570796326794897)&&!h.s.$(f.G*n,-1.570796326794897))return!1;var m=new h.h;for(--u;0<=u;u--)o.D(u,m),(m.y==f.H&&h.s.$(m.y*n,1.570796326794897)||m.y==f.G&&h.s.$(m.y*n,-1.570796326794897))&&(p=!0,this.II(m,u,o));return p},a.prototype.qO=function(n,o){var u=o.Oa(0),p=o.Oa(o.I()-1);return 3.141592653589793<Math.abs(u.x-p.x)*n?(this.NV(o),!0):this.oO(o)},a.prototype.oO=function(n){return 0>n.He()&&(this.MV(n),!0)},a.prototype.II=function(n,o,u){var p=u.I(),f=0<o?o-1:p-1;if(p=u.Oa(o<p-1?o+1:0),f=u.Oa(f),!h.s.$(p.y,n.y)&&!h.s.$(p.x,n.x)){var m=new h.h;m.na(p.x,n.y),u.Db(o,m)}h.s.$(f.y,n.y)||h.s.$(f.x,n.x)||((p=new h.h).na(f.x,n.y),u.xf(0,o,p))},a.prototype.NV=function(n){var o=new h.Ea,u=new h.Ea,p=new h.Ed,f=n.Oa(0),m=n.Oa(n.I()-1),w=new h.h;f.x>m.x?(m=this.Bq,p.gg(-this.Ls,0)):(m=-this.Bq,p.gg(this.Ls,0)),o.add(n,!1),n.Pa(),u.add(o,!1),u.Pc(p),f=new h.l,u.A(f),f.X((this.Ls-f.S())/2,0),f.G=-this.Bq,f.H=this.Bq;for(var x=0;x<u.I();x++)u.D(x,w),o.xf(0,-1,w);for(u.Pc(p),x=0;x<u.I();x++)u.D(x,w),o.xf(0,-1,w);u=o.Oa(0),p=o.Oa(o.I()-1),w.na(p.x,m),o.xf(0,-1,w),w.na(.5*(p.x+u.x),m),o.xf(0,-1,w),w.na(u.x,m),o.xf(0,-1,w),o=h.Jh.ms(o,this.Kc,2,!0,f.v),o=h.Jh.ms(o,this.Kc,2,!0,f.C),o=h.Vd.clip(o,f,this.Cq,NaN),n.add(o,!1)},a.prototype.MV=function(n){var o=new h.l;n.A(o),o.X((this.Ls-o.S())/2,0),o.G=-this.Bq,o.H=this.Bq,n.$k(null,0);var u=new h.h;u.na(o.v,o.G),n.xf(1,-1,u),u.na(o.v,o.H),n.xf(1,-1,u),u.na(.5*(o.v+o.C),o.H),n.xf(1,-1,u),u.na(o.C,o.H),n.xf(1,-1,u),u.na(o.C,o.G),n.xf(1,-1,u),u.na(.5*(o.v+o.C),o.G),n.xf(1,-1,u)},a.my=function(n,o,u,p,f,m,w,x,E,T,A){var P=null;E||((P=new h.h).Sc(),0<A.I()&&(P.N(A.Oa(A.I()-1)),P.scale(u)));var F=new h.ha(0),j=new h.ha(0),H=new h.ha(0),W=new h.h,G=new h.h,ee=m[m.length-1];u=1/u;for(var ae=0;ae<m.length;ae++){var le=m[ae];if(ae==0)var ie=w;else ae==m.length-1?ie=x:(h.kb.xd(n,o,ee.x,ee.y,le.x,le.y,null,null,F,f),ie=F.u-1.570796326794897);h.kb.Ai(n,o,le.x,le.y,p,ie,j,H),E?G.na(j.u,H.u):(W.na(j.u,H.u),a.aJ(le.x,W.x,P.x,T),G.na(T[0]+W.x,W.y),P.N(G)),G.scale(u),A.xf(0,-1,G)}},a.Jr=function(n,o,u,p,f,m,w,x,E,T,A,P,F){if(!(w-m<x)){var j=new h.ha(0),H=new h.ha(0),W=new h.h,G=new h.h,ee=null;E||((ee=new h.h).Sc(),0<A.I()&&(ee.N(A.Oa(A.I()-1)),ee.scale(u)));var ae=h.P.truncate(Math.ceil(m/x)),le=ae++*x;for(le==m&&(le=ae++*x),u=1/u;le<w+x&&(m<P&&P<le?(le=P,ae--):m<F&&F<le&&(le=F,ae--),!(le>=w));)h.kb.Ai(n,o,f.x,f.y,p,le,j,H),E?G.na(j.u,H.u):(W.na(j.u,H.u),a.aJ(f.x,W.x,ee.x,T),G.na(T[0]+W.x,W.y),ee.N(G)),G.scale(u),A.xf(0,-1,G),m=le,le=ae++*x}},a.YI=function(n,o,u,p,f,m,w,x,E,T){var A=new h.h,P=new h.h,F=new h.ha(0),j=new h.ha(0);for(h.kb.Ai(n,o,p.x,p.y,u,f,F,j),A.na(F.u,j.u),h.kb.Ai(n,o,p.x,p.y,u,m,F,j),P.na(F.u,j.u),u=new h.ha(0),h.kb.Sy(n,o,w.x,w.y,A.x,A.y,u),E[0]=u.u,h.kb.Sy(n,o,w.x,w.y,P.x,P.y,u),T[0]=u.u;E[0]<=T[0];)E[0]+=6.283185307179586;for(;E[0]>T[0];)E[0]-=6.283185307179586;for(;E[0]>=x;)E[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;E[0]<x;)E[0]+=6.283185307179586,T[0]+=6.283185307179586},a.aJ=function(n,o,u,p){if(isNaN(u)){for(;3.141592653589793<p[0]+o-n;)p[0]-=6.283185307179586;for(;3.141592653589793<n-(p[0]+o);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+o-u?p[0]-=6.283185307179586:3.141592653589793<u-(p[0]+o)&&(p[0]+=6.283185307179586)},a.CX=function(n,o){var u=n.K(),p=h.ba.Ic(u)?n.ea():u==550?n.I():1;if(p==1)return n;var f=new h.ja(0);f.resize(p);for(var m=[],w=new h.l,x=0;x<p;x++){if(f.write(x,x),h.ba.Ic(u)){n.Tj(x,w);var E=w.tf()}else E=n.Oa(x);E=h.RK.SX(o,E),m[x]=E}for(f.Wd(0,f.size,function(T,A){return m[T]<m[A]?-1:m[T]>m[A]?1:0}),o=n.Ja(),x=0;x<p;x++)w=f.read(x),h.ba.Ic(u)?o.addPath(n,w,!0):o.Gd(n,w,w+1);return o},a.prototype.qX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new h.h;o.na(0,10*this.fc);var u=45*this.fc,p=new h.ha(0),f=new h.ha(0),m=new h.ha(0),w=new h.ha(0),x=new h.ha(0),E=new h.ha(0),T=new h.ha(0),A=new h.ha(0),P=new h.h,F=new h.h,j=new h.h,H=new h.h;h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,0,p,f),P.na(p.u,f.u),h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,u,m,w),F.na(m.u,w.u),p=new h.ha(0),f=new h.ha(0);for(var W=new h.ha(0);h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,.5*(0+u),x,E),j.na(x.u,E.u),h.kb.xd(this.Ub,this.lc,P.x,P.y,F.x,F.y,p,f,null,2),h.kb.qj(this.Ub,this.lc,P.x,P.y,.5*p.u,f.u,T,A,2),H.na(T.u,A.u),h.kb.xd(this.Ub,this.lc,j.x,j.y,H.x,H.y,W,null,null,2),!(W.u<=this.ao);)u*=.9,h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,u,m,w),F.na(m.u,w.u);this.bo=6.283185307179586/Math.ceil(6.283185307179586/(u-0))},a.prototype.rX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new h.h,u=new h.h;o.na(0,10*this.fc),u.na(10*this.fc,10*this.fc);var p=new h.ha(0),f=new h.ha(0),m=new h.ha(0);h.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,m,p,f,this.Ae);var w=new h.ha(0),x=new h.ha(0),E=new h.ha(0),T=new h.ha(0),A=new h.h,P=new h.ha(0),F=new h.ha(0),j=new h.ha(0),H=new h.ha(0),W=new h.ha(0),G=new h.ha(0),ee=new h.ha(0),ae=new h.ha(0),le=new h.ha(0),ie=new h.h,be=new h.h,Ie=new h.h,ze=new h.h,Fe=1;p=p.u,f=f.u+1.570796326794897,m=m.u,h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,p-1.570796326794897,F,j),ie.na(F.u,j.u),h.kb.Ai(this.Ub,this.lc,u.x,u.y,n,f,H,W),be.na(H.u,W.u),F=new h.ha(0),j=new h.ha(0),f=new h.ha(0);for(var Oe=new h.ha(0);h.kb.qj(this.Ub,this.lc,o.x,o.y,.5*(0+Fe)*m,p,w,x,this.Ae),A.na(w.u,x.u),h.kb.xd(this.Ub,this.lc,o.x,o.y,A.x,A.y,null,null,P,this.Ae),h.kb.Ai(this.Ub,this.lc,A.x,A.y,n,P.u+1.570796326794897,G,ee),Ie.na(G.u,ee.u),h.kb.xd(this.Ub,this.lc,ie.x,ie.y,be.x,be.y,F,j,null,2),h.kb.qj(this.Ub,this.lc,ie.x,ie.y,.5*F.u,j.u,ae,le,2),ze.na(ae.u,le.u),h.kb.xd(this.Ub,this.lc,Ie.x,Ie.y,ze.x,ze.y,f,null,null,2),!(f.u<=this.ao);)Fe*=.9,h.kb.qj(this.Ub,this.lc,o.x,o.y,Fe*m,p,E,T,this.Ae),u.na(E.u,T.u),h.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,null,null,Oe,this.Ae),h.kb.Ai(this.Ub,this.lc,u.x,u.y,n,Oe.u+1.570796326794897,H,W),be.na(H.u,W.u);1e5<(n=Fe*m)&&(n=1e5),this.KA=n},a.prototype.pX=function(){var n=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/n&&(n=this.sb/500),.01>n&&(n=.01),this.ao=n},a}();h.PK=c}(X||(X={})),function(h){var L=function(){function b(){}return b.Of=function(c,a){var n=new h.h;n.N(a),c.push(n)},b.wp=function(c,a){c.add(a.x),c.add(a.y)},b.bB=function(c){c.Dh(c.size-2)},b.iB=function(c,a){a.na(c.get(c.size-2),c.get(c.size-1))},b.Sr=function(c,a,n,o,u,p){if(c==null)throw h.i.O();var f=c.K();if(c.B()||h.ba.Sn(f))return c;var m=new b;m.Sg=a,m.Kc=h.cb.tc(a);var w=h.cb.xv(m.Kc);if(m.Vb=p,m.Ub=h.cb.gv(m.Kc),m.lc=w*(2-w),m.fc=m.Kc.Id().ci,m.Cq=m.Kc.Ln(),m.at=m.Cq*m.fc,m.uA=o,m.tA=u,m.Ae=n,f==197?(n=new h.Ea(c.description)).bd(c,!1):h.ba.zd(f)?(n=new h.Ua(c.description)).oc(c,!0):n=c,m.Ae!=4){if((a=m.Sg.Nb(m.Kc)==0?h.cb.Bh(n,m.Sg,m.Kc):h.Jh.nj(n,m.Kc)).B())return a;a=b.jI(m.fc,a),a=m.Uy(a),a=h.jp.pj(a,m.Kc,m.Ae),m=h.cb.Bh(a,m.Kc,m.Sg)}else{if(h.Gg.Tb(a)==2?(c=h.cb.ol(),(a=h.Xk.local().W(n,c,a,p))==c&&(a=new h.Ea,c.copyTo(a))):a=h.Jh.nj(n,m.Kc),a.B())return a;m=m.uX(a)}return m},b.jI=function(c,a){var n=new h.l;if(a.yc(n),3.141592653589793>n.S()*c)return a;var o=!1;n=a.Ha();for(var u=new h.h,p=new h.h;n.ab();)for(;n.Ia();){var f=n.ia();if(u.N(f.ac()),p.N(f.xc()),u.scale(c),p.scale(c),3.141592653589793<Math.abs(u.x-p.x)){var m=b.Nu(u,p);if(!m){o=!0;break}if(6.283185307179586<Math.abs(u.x-p.x)){o=!0;break}}}if(!o)return a;o=a.Ja();var w=1<a.description.Ba,x=new h.h,E=new h.h,T=new h.h,A=new h.h,P=new h.Ta;for(n.aj();n.ab();)for(var F=NaN,j=[0];n.Ia();){if(f=n.ia(),u.N(f.ac()),p.N(f.xc()),u.scale(c),p.scale(c),isNaN(F)?(b.Yi(u.x,NaN,j),E.N(u)):E.N(T),F=E.x,m=b.Nu(u,p)){if(6.283185307179586<p.x-u.x)for(;6.283185307179586<p.x-u.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-u.x)for(;-6.283185307179586>p.x-u.x;)p.x+=6.283185307179586;b.Yi(p.x,NaN,j),T.N(p)}else x.N(p),b.sU(x),b.Yi(x.x,F,j),T.na(j[0]+x.x,x.y);.5>Math.abs(T.x-p.x)&&T.N(p),w?(f.Vw(0,P),A.N(E),A.scale(1/c),P.Db(A),(m=n.xm())?o.nf(P):o.lineTo(P),n.Rn()&&!a.ec(n.gb)&&(f.Vw(1,P),A.N(T),A.scale(1/c),P.Db(A),o.lineTo(P))):((m=n.xm())&&o.Cz(null,0),f=o.ea()-1,A.N(E),A.scale(1/c),o.xf(f,-1,A),n.Rn()&&!a.ec(n.gb)&&(A.N(T),A.scale(1/c),o.xf(f,-1,A)))}return o},b.nF=function(c,a,n,o,u,p,f,m,w,x,E,T){var A=new h.h,P=new h.h,F=0<o.compare(u);b.$I(F,o,u,A,P),b.oF(c,a,n,A,P,p,NaN,f,m,w,x,null,E,T),F&&b.$B(w,x,null,E)},b.prototype.Uy=function(c){var a=c.Ja(),n=c.Ha(),o=[],u=null,p=null,f=1<c.description.Ba;f&&(u=new h.ce(0),p=new h.hg);for(var m=[0],w=new h.h,x=new h.h,E=new h.h,T=new h.h;n.ab();)for(m[0]=0;n.Ia();){var A=n.ia();w.N(A.ac()),x.N(A.xc()),w.scale(this.fc),x.scale(this.fc);var P=0<w.compare(x);b.$I(P,w,x,E,T),o.length=0,u!=null&&u.Dh(0),0<this.uA?b.oF(this.Ub,this.lc,this.Ae,E,T,this.uA,this.tA,this.at,null,null,null,f?u:null,o,m):b.VQ(this.Ub,this.lc,this.Ae,E,T,this.tA,this.at,f?u:null,o,m),P&&b.$B(null,null,f?u:null,o),o[0].N(A.ac()),o[o.length-1].N(A.xc());for(var F=1;F<o.length-1;F++)o[F].scale(1/this.fc);f?(P=b.ZI(P,A,p),b.ND(n.xm(),n.Rn()&&!c.ec(n.gb),A,P,u,o,a)):b.MD(n.xm(),n.Rn()&&!c.ec(n.gb),o,a)}return a},b.prototype.uX=function(c){var a=c.Ja(),n=c.Ha(),o=[],u=null,p=new h.hg,f=1<c.description.Ba;for(f&&(u=new h.ce(0));n.ab();)for(;n.Ia();){var m=n.ia(),w=m.ac(),x=m.xc();w=0<w.compare(x),x=b.ZI(w,m,p),o.length=0,u!=null&&u.Dh(0),b.tX(this.Ub,this.lc,this.fc,x,this.Sg,this.uA,this.tA,f?u:null,o),w&&b.$B(null,null,f?u:null,o),f?b.ND(n.xm(),n.Rn()&&!c.ec(n.gb),m,x,u,o,a):b.MD(n.xm(),n.Rn()&&!c.ec(n.gb),o,a)}return a},b.MD=function(c,a,n,o){c&&o.Cz(null,0),c=o.ea()-1;var u=n.slice(0);o.kG(c,u,u.length-1),a&&o.xf(c,-1,n[n.length-1])},b.ND=function(c,a,n,o,u,p,f){var m=new h.Ta;if(n.Uo(m),c?f.nf(m):f.lineTo(m),2<p.length){c=o.Rb();for(var w=1;w<p.length-1;w++){var x=o.HG(u.get(w)*c);o.Vw(x,m),m.Db(p[w]),f.lineTo(m)}}a&&(n.Qo(m),f.lineTo(m))},b.oF=function(c,a,n,o,u,p,f,m,w,x,E,T,A,P){var F=new h.ha(0),j=new h.ha(0),H=new h.ha(0);h.kb.xd(c,a,o.x,o.y,u.x,u.y,H,F,j,n),H=H.u;var W=F=F.u;0>W&&(W+=6.283185307179586),0>(j=j.u)&&(j+=6.283185307179586),w!=null&&(w[0]=H),x!=null&&(x[0]=W),E!=null&&(E[0]=j),x=w=NaN,T!=null&&(w=((x=h.F.Ch(c,a))-(E=h.F.q(c,a,o.y)))/H,x=(x+E)/H),E=b.Ou(o,u),j=b.Mu(o,u),W=E||j;var G=b.zE(o,u,m),ee=new h.ha(0),ae=new h.ha(0),le=new h.h,ie=new h.h,be=new h.h;b.Yi(o.x,NaN,P);var Ie=[P[0]];if(H<=p)b.Of(A,o),b.Yi(u.x,NaN,P),T!=null&&T.add(0),W?(E&&b.eB(o,u,T,A),j&&b.cB(o,u,T,A)):G?b.dB(o,u,F,w,x,T,A):0<f&&(ie.na(o.x-Ie[0],o.y),le.na(u.x-P[0],u.y),b.Ty(c,a,n,o,H,F,ie,le,0,1,f,T,A,Ie)),b.Of(A,u);else{var ze=H/((p=1+h.P.truncate(Math.ceil(H/p)))-1),Fe=new h.h,Oe=0;b.Of(A,o),Fe.N(o),ie.na(o.x-P[0],o.y),T!=null&&T.add(0);for(var Ye=1;Ye<p;Ye++){if(Ye<p-1){h.kb.qj(c,a,o.x,o.y,Ye*ze,F,ee,ae,n),le.na(ee.u,ae.u),b.Yi(le.x,Fe.x,P),be.na(P[0]+le.x,le.y);var yt=Ye/(p-1)}else b.Yi(u.x,NaN,P),le.na(u.x-P[0],u.y),be.N(u),yt=1;W?(Ye==1&&E&&b.eB(o,be,T,A),Ye==p-1&&j&&b.cB(Fe,u,T,A)):G?b.yE(Fe,be,m)&&(o.x<u.x?Fe.x>be.x&&(P[0]+=6.283185307179586,be.na(P[0]+le.x,le.y)):Fe.x<be.x&&(P[0]-=6.283185307179586,be.na(P[0]+le.x,le.y)),b.dB(Fe,be,F,w,x,T,A)):0<f&&b.Ty(c,a,n,o,H,F,ie,le,Oe,yt,f,T,A,Ie),b.Of(A,be),T!=null&&T.add(yt),Fe.N(be),ie.N(le),Ie[0]=P[0],Oe=yt}}},b.VQ=function(c,a,n,o,u,p,f,m,w,x){var E=new h.ha(0),T=new h.ha(0),A=new h.ha(0);h.kb.xd(c,a,o.x,o.y,u.x,u.y,A,E,T,n),T=A.u,E=E.u;var P=A=NaN;if(m!=null){P=h.F.Ch(c,a);var F=h.F.q(c,a,o.y);A=(P-F)/T,P=(P+F)/T}F=b.Ou(o,u);var j=b.Mu(o,u),H=F||j;f=b.zE(o,u,f);var W=b.Nu(o,u);W=H||f||W,b.Yi(o.x,NaN,x);var G=new h.h;b.Of(w,o),G.N(o),m!=null&&m.add(0),W?(H?(F&&b.eB(o,u,m,w),j&&b.cB(o,u,m,w)):f&&b.dB(o,u,E,A,P,m,w),b.Yi(u.x,NaN,x),b.Of(w,u)):T<=p?(b.Yi(u.x,NaN,x),b.Of(w,u)):(A=new h.h,f=new h.h,A.N(o),f.N(u),A.x-=x[0],f.x-=x[0],-3.141592653589793>f.x?f.x+=6.283185307179586:3.141592653589793<f.x&&(f.x-=6.283185307179586),b.Ty(c,a,n,o,T,E,A,f,0,1,p,m,w,x),b.Of(w,u),b.Yi(u.x,NaN,x)),m!=null&&m.add(1)},b.Ty=function(c,a,n,o,u,p,f,m,w,x,E,T,A,P){var F=new h.h,j=new h.h;F.na(f.x+P[0],f.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var H=new h.ha(0),W=new h.ha(0),G=new h.ha(0),ee=new h.h,ae=new h.h,le=new h.h,ie=new h.h;ee.N(f),ae.N(m),f=new h.ce(0),m=new h.ce(0),b.wp(f,ae),m.add(x);var be=new h.h,Ie=new h.zb,ze=[];for(b.SJ(4,ze);0<f.size;){for(var Fe,Oe=!1,Ye=NaN,yt=0;3>yt;yt++)if(Fe=ze[yt]*x+(1-ze[yt])*w,h.kb.qj(c,a,o.x,o.y,Fe*u,p,H,W,n),le.na(H.u,W.u),yt==0&&(Ye=Fe,ie.N(le)),b.NW(ee,le,ae,Ie),Ie.ic(Ie.fe(le,!0),be),h.kb.xd(c,a,le.x,le.y,be.x,be.y,G,null,null,2),G.u>E){Oe=!0;break}Oe?(ae.N(ie),x=Ye,b.wp(f,ae),m.add(x)):(b.bB(f),m.Fn(m.size-1,1,m.size-1),0<f.size&&(b.Yi(ae.x,F.x,P),j.na(P[0]+ae.x,ae.y),b.Of(A,j),F.N(j),T!=null&&T.add(x),ee.N(ae),w=x,b.iB(f,ae),x=m.get(m.size-1)))}},b.tX=function(c,a,n,o,u,p,f,m,w){var x=new h.h,E=new h.h,T=new h.h,A=new h.h,P=new h.h,F=new h.h,j=new h.h,H=new h.h,W=new h.h,G=new h.h,ee=new h.ha(0),ae=new h.ha(0),le=new h.h,ie=[[],[]],be=h.Gg.Tb(u)==1;u=u.Yd(0);var Ie=o.ac(),ze=o.xc();be?(F.na(Ie.x*n,Ie.y*n),j.na(ze.x*n,ze.y*n)):(ie[0][0]=Ie.x,ie[0][1]=Ie.y,ie[1][0]=ze.x,ie[1][1]=ze.y,h.cb.wt(),F.x=ie[0][0]*n,F.y=ie[0][1]*n,j.x=ie[1][0]*n,j.y=ie[1][1]*n);var Fe=0,Oe=0,Ye=1,yt=o.Qn();x.N(Ie),E.N(ze),ze=new h.ce(0);var bt=new h.ce(0),Kt=new h.ce(0);b.wp(ze,E),b.wp(bt,j),Kt.add(Ye),b.Of(w,x),m!=null&&m.add(Oe);var Qt=[],br=0<f?yt?5:3:yt?5:1;b.SJ(br,Qt);for(var Ci=new h.ha(0),at=new h.ha(0),di=new h.ha(0),Vt=new h.ha(0),Fi=new h.ha(0),Di=new h.ha(0),dn=new h.ha(0);0<bt.size;){var Zt=!1,rn=NaN;for(h.kb.xd(c,a,F.x,F.y,j.x,j.y,Ci,at,null,2),Ie=0;Ie<br&&!(Ie==0&&(!yt&&0>=f&&Ci.u<=p&&3.141592653589793>Math.abs(F.x-j.x)||o.Tx(Oe,Ye)<=u));Ie++){var It=Qt[Ie]*Ye+(1-Qt[Ie])*Oe;if(o.ic(It,T),be?H.na(T.x*n,T.y*n):(ie[0][0]=T.x,ie[0][1]=T.y,h.cb.wt(),H.x=ie[0][0]*n,H.y=ie[0][1]*n),Ie==0&&(rn=It,P.N(T),G.N(H),0<p&&(Ci.u>p||3.141592653589793<=Math.abs(F.x-j.x)))){Zt=!0;break}if(yt&&0<p){if(h.kb.xd(c,a,F.x,F.y,H.x,H.y,di,null,null,2),di.u>p||3.141592653589793<=Math.abs(F.x-H.x)){Zt=!0;break}}else if(0<f){if(yt?(A.GS(x,E,Qt[Ie]),be?W.na(A.x*n,A.y*n):(ie[0][0]=A.x,ie[0][1]=A.y,h.cb.wt(),W.x=ie[0][0]*n,W.y=ie[0][1]*n)):(A.N(T),W.N(H)),h.kb.xd(c,a,F.x,F.y,W.x,W.y,Vt,null,null,2),!(Vt.u<=Ci.u)){Zt=!0;break}if(h.kb.qj(c,a,F.x,F.y,Vt.u,at.u,ee,ae,2),le.na(ee.u,ae.u),h.kb.xd(c,a,le.x,le.y,H.x,H.y,Fi,null,null,2),Fi.u>f){Zt=!0;break}if(yt){if(h.kb.xd(c,a,le.x,le.y,W.x,W.y,Di,null,null,2),Di.u>f){Zt=!0;break}if(h.kb.xd(c,a,W.x,W.y,H.x,H.y,dn,null,null,2),dn.u>f){Zt=!0;break}}}}Zt?(E.N(P),j.N(G),Ye=rn,b.wp(ze,E),b.wp(bt,j),Kt.add(Ye)):(b.bB(ze),b.bB(bt),Kt.Fn(Kt.size-1,1,Kt.size-1),b.Of(w,E),Fe+=Ci.u,m!=null&&m.add(Fe),0<bt.size&&(x.N(E),F.N(j),Oe=Ye,b.iB(ze,E),b.iB(bt,j),Ye=Kt.get(Kt.size-1)))}if(m!=null)for(c=1/Fe,Ie=0;Ie<m.size;Ie++)m.write(Ie,m.read(Ie)*c)},b.$B=function(c,a,n,o){o.reverse(),n!=null&&n.pi(0,n.size,1),n=c!=null?c[0]:NaN,o=a!=null?a[0]:NaN,c!=null&&(c[0]=o),a!=null&&(a[0]=n)},b.$I=function(c,a,n,o,u){c?(o.N(n),u.N(a)):(o.N(a),u.N(n))},b.ZI=function(c,a,n){return c?(n.create(a.K()),a.copyTo(n.get()),n.get().reverse(),n.get()):a},b.Yi=function(c,a,n){if(isNaN(a)){for(;3.141592653589793<n[0]-c;)n[0]-=6.283185307179586;for(;3.141592653589793<c-n[0];)n[0]+=6.283185307179586}else 3.141592653589793<n[0]+c-a?n[0]-=6.283185307179586:3.141592653589793<a-(n[0]+c)&&(n[0]+=6.283185307179586)},b.NW=function(c,a,n,o){3.141592653589793>Math.abs(a.x-c.x)?(o.Ec(c),3.141592653589793<=n.x-c.x?o.Sl(n.x-6.283185307179586,n.y):3.141592653589793<=c.x-n.x?o.Sl(n.x+6.283185307179586,n.y):o.Sl(n.x,n.y)):(o.Ec(n),3.141592653589793<=c.x-n.x?o.Sl(c.x-6.283185307179586,c.y):3.141592653589793<=n.x-c.x?o.Sl(c.x+6.283185307179586,c.y):o.Sl(c.x,c.y))},b.SJ=function(c,a){for(var n=0;n<c;n++){var o=Math.ceil(n/2)/(c+1);n%2!=0&&(o=-o),a[n]=.5+o}},b.Ou=function(c,a){return!!(h.s.$(c.y,1.570796326794897)&&!h.s.$(a.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)&&!h.s.$(a.y,-1.570796326794897))},b.Mu=function(c,a){return!!(h.s.$(a.y,1.570796326794897)&&!h.s.$(c.y,1.570796326794897)||h.s.$(a.y,-1.570796326794897)&&!h.s.$(c.y,-1.570796326794897))},b.zE=function(c,a,n){return!(!b.yE(c,a,n)||h.s.$(c.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)||h.s.$(a.y,1.570796326794897)||h.s.$(a.y,-1.570796326794897))},b.yE=function(c,a,n){return Math.abs(Math.abs(c.x-a.x)-3.141592653589793)<=n},b.Nu=function(c,a){return!!(h.s.$(c.y,1.570796326794897)&&h.s.$(a.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)&&h.s.$(a.y,-1.570796326794897))},b.eB=function(c,a,n,o){if(0<c.y){var u=new h.h;u.na(a.x,1.570796326794897)}else(u=new h.h).na(a.x,-1.570796326794897);h.s.$(c.x,u.x)||h.s.$(a.y,u.y)||(b.Of(o,u),n!=null&&n.add(0))},b.cB=function(c,a,n,o){if(0<a.y){var u=new h.h;u.na(c.x,1.570796326794897)}else(u=new h.h).na(c.x,-1.570796326794897);h.s.$(a.x,u.x)||h.s.$(c.y,u.y)||(b.Of(o,u),n!=null&&n.add(1))},b.dB=function(c,a,n,o,u,p,f){h.s.Dd(n)?(0<1.570796326794897-c.y&&((n=new h.h).na(c.x,1.570796326794897),b.Of(f,n),p!=null&&p.add(o)),0<1.570796326794897-a.y&&((n=new h.h).na(a.x,1.570796326794897),b.Of(f,n),p!=null&&p.add(o))):(0<1.570796326794897+c.y&&((n=new h.h).na(c.x,-1.570796326794897),b.Of(f,n),p!=null&&p.add(u)),0<1.570796326794897+a.y&&((n=new h.h).na(a.x,-1.570796326794897),b.Of(f,n),p!=null&&p.add(u)))},b.sU=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586},b}();h.ej=L}(X||(X={})),function(h){h.jp=function(){function L(){}return L.pj=function(b,c,a){if(b==null||c==null||!h.cb.Xc(c))throw h.i.O();if(b.B())return b;var n=b,o=n.K();if(h.ba.Ic(o)){n=h.Jh.nj(b,c),b=new h.l,n.A(b),o=h.ta.Xd(c,b,!1);for(var u=h.cb.ih(c),p=Math.floor((b.v-u.v)/u.S())*u.S()+u.v;p<b.C;)p>b.v+o&&p<b.C-o&&(n=h.Jh.ms(n,c,a,!0,p)),p+=u.S()}else{if(o==197)return(b=new h.Ea(n.description)).bd(n,!1),L.pj(b,c,a);if(h.ba.zd(o))return(b=new h.Ua(n.description)).oc(n,!0),L.pj(b,c,a)}return L.Py(n,c)},L.Py=function(b,c){if(b==null||c==null||!h.cb.Xc(c))throw h.i.O();if(b.B())return b;var a=b.K();return a==197?(a=new h.Ea(b.description)).bd(b,!1):h.ba.zd(a)?(a=new h.Ua(b.description)).oc(b,!0):a=b,(a=h.Jh.nj(a,c)).B()?a:h.Gg.Tb(c)==1?h.Jh.Gn(a,c,0,a!=b,0):L.HQ(a,c,a!=b)},L.HQ=function(b,c,a){if(!h.cb.Xc(c))throw h.i.O();if(b.B())return b;var n=h.cb.bf(c),o=-180*n;return n*=360,h.Gg.Tb(c)==2&&(n=(o=h.cb.ih(c)).C,n-=o=o.v),h.Jh.Jp(b,o,n,c,a,0,!0)},L}()}(X||(X={})),function(h){h.tY=function(){function L(){}return L.R=function(b){return 0>b?-b:b},L.Mb=function(b,c){return 0<=c?L.R(b):-L.R(b)},L.$=function(b,c){return b==c||L.R(b-c)<=L.DC*(1+(L.R(b)+L.R(c))/2)},L.Dd=function(b){return b==0||L.R(b)<=L.DC},L.Ch=function(b,c){var a=(c=(1-(c=Math.sqrt(1-c)))/(1+c))*c;return b/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*L.yL},L.yL=1.5707963267948966,L.DC=3552713678800501e-30,L}()}(X||(X={})),function(h){var L=function(c){this.Xf=c,this.Lk=this.Xf.getCode(),0>this.Lk&&(this.Lk=0)};h.vY=L;var b=function(){function c(a){a===void 0&&(a=null),this.Ej=null,this.Vn=!1,a!==null&&(this.Ej=new L(a))}return c.prototype.Fc=function(){return this.Ej!=null?this.Ej.Lk:0},c.prototype.Pf=function(){var a=new c;return this.copyTo(a),a},c.prototype.copyTo=function(a){a.Ej=this.Ej,a.Vn=this.Vn},c.prototype.Lz=function(){this.Vn=!this.Vn},c.prototype.sm=function(){return this.Ej!=null?this.Ej.Xf:null},c.prototype.FJ=function(a){if(0>=a)throw h.i.O();if(a!=this.Fc()){if((a=h.qf.geogtran(a))==null)throw h.i.O("Geogtran not found.");this.Ej=new L(a)}},c.prototype.wz=function(){return this.Ej==null?null:this.Ej.Xf.toString()},c.prototype.lX=function(a){if(a==null)throw h.i.O();var n=null;try{n=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,a)}catch{throw h.i.O()}this.Ej=new L(n)},c.prototype.Nb=function(a){return a==this||!(!(a instanceof c)||(0>=this.Fc()||this.Fc()!=a.Fc())&&!this.sm().isEqual(a.sm()))&&this.Vn==a.Vn},c.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},c.create=function(a,n){var o=new c;return o.FJ(a),n&&o.Lz(),o},c.oP=function(a,n){var o=new c;return o.lX(a),n&&o.Lz(),o},c}();h.Cx=b}(X||(X={})),function(h){var L=function(){function c(){}return c.construct=function(a,n,o,u){var p=new c;return p.jw=a,p.kw=n,p.IY=o,p.JY=u,p},c.zy=function(a,n){return a.jw==n.jw?a.kw==n.kw?0:a.kw<n.kw?-1:1:a.jw<n.jw?-1:1},c}(),b=function(){function c(){this.qT=[],this.rT=[],this.rp()}return c.fz=function(){return c.dK==null&&(c.dK=new c),c.dK},c.prototype.rp=function(){this.cD(this.qT),this.cD(this.rT)},c.prototype.cD=function(a){try{var n=[];n=n.sort(L.zy);for(var o=0;o<n.length;o++)a.push(n[o])}catch{}},c}();h.uY=b}(X||(X={})),function(h){var L=function(){function b(){}return b.prototype.sD=function(c){this.Gk=c},b.prototype.QM=function(c){this.Gb=c},b.prototype.rD=function(c){this.Ao=c},b.wE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736)},b.uE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736||20>c.I())},b.vE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736||20>c.I())},b}();h.Vk=L}(X||(X={})),function(h){h.bc=function(){function L(){}return L.LT=function(b){var c=new h.Ea;return c.rx(b.gs(),b.js()),c.Aj(b.gs(),b.hs()),c.Aj(b.fs(),b.hs()),c.Aj(b.fs(),b.js()),c},L.Bh=function(b,c){return b===null?null:h.Gx.local().W(b,c,null)},L.bY=function(b,c){var a=h.Ih.local();return b=new h.$c(b),a.W(b,c,null).next()},L.km=function(b,c,a){return h.lp.local().W(b,c,a,null)},L.fp=function(b,c,a){return h.Jx.local().W(b,c,a,null)},L.NX=function(b,c,a){var n=h.Jx.local();for(b=new h.$c(b),c=new h.$c(c),a=n.W(b,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},L.Nb=function(b,c,a){return h.fj.local().W(3,b,c,a,null)},L.NP=function(b,c,a){return h.fj.local().W(4,b,c,a,null)},L.JS=function(b,c,a){var n=h.Xk.local();for(b=new h.$c(b),c=new h.$c(c),a=n.W(b,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},L.KP=function(b,c,a){var n=h.lp.local();for(b=new h.$c(b),c=new h.$c(c),a=n.W(b,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},L.Fa=function(b,c,a){return h.Xk.local().W(b,c,a,null)},L.iY=function(b,c,a){return h.fj.local().W(2,b,c,a,null)},L.contains=function(b,c,a){return h.fj.local().W(1,b,c,a,null)},L.vP=function(b,c,a){return h.fj.local().W(16,b,c,a,null)},L.touches=function(b,c,a){return h.fj.local().W(8,b,c,a,null)},L.vU=function(b,c,a){return h.fj.local().W(32,b,c,a,null)},L.LS=function(b,c,a){return h.fj.local().W(1073741824,b,c,a,null)},L.sB=function(b,c,a,n){return h.tL.local().W(b,c,a,n,null)},L.ub=function(b,c,a,n){var o=null;if(a!=null){if(o=a.Id(),n!=null&&o.Fc()!=n.Fc()&&o.od!=n.od)throw h.i.Zk()}else if(n!=null)throw h.i.O();return b=h.kL.local().W(b,c,null),o!==null&&n!==null&&(b=h.Uc.Ph(b,o,n)),b},L.clip=function(b,c,a){return h.eL.local().W(b,h.l.construct(c.gs(),c.js(),c.fs(),c.hs()),a,null)},L.fl=function(b,c,a){if(b==null||c==null)return null;for(b=h.gL.local().W(!0,b,c,a,null),c=[];(a=b.next())!=null;)a.B()||c.push(a);return c.slice(0)},L.GN=function(b,c,a,n,o,u,p,f){if(o===!0)return L.HN(b,c,a,n,u,p,f);if(o=a,c!=null){if(p=c.Id(),n!=null&&p.Fc()!=n.Fc()){if(p.od!=n.od)throw h.i.Zk();o=[],h.Uc.RE(a,a.length,n,p,o)}}else if(n!=null)throw h.i.O();if(a=h.uC.local(),u){for(b=new h.$c(b),c=a.W(b,c,o,u,null),b=[];(u=c.next())!=null;)b.push(u);u=b.slice(0)}else for(u=[],n=0;n<b.length;n++)u[n]=a.W(b[n],c,o[n],null);return u},L.HN=function(b,c,a,n,o,u,p){if(c===null||(n==null&&(n=c.Fc()!==4326?c.Id():h.Uc.ah(9001)),n.od!==0))throw h.i.O();if(h.Uc.RE(a,a.length,n,h.Uc.ah(9001),a),n=h.zC.local(),o){for(b=new h.$c(b),c=n.W(b,c,u,a,p,!1,o,null),a=[];(u=c.next())!=null;)a.push(u);o=a.slice(0)}else{o=[];for(var f=0;f<b.length;f++)o[f]=n.W(b[f],c,u,a[f],p,!1,null)}return o},L.buffer=function(b,c,a,n,o,u,p){var f=a;if(o===!1){if(c!=null){if(o=c.Id(),n!=null&&o.Fc()!=n.Fc()){if(o.od!=n.od)throw h.i.Zk();f=h.Uc.Ph(a,n,o)}}else if(n!=null)throw h.i.O();b=h.uC.local().W(b,c,f,null)}else{if(c===null||(n==null&&(n=c.Fc()!==4326?c.Id():h.Uc.ah(9001)),n.od!==0))throw h.i.O();f=h.Uc.Ph(a,n,h.Uc.ah(9001)),b=h.zC.local().W(b,c,u,f,p,!1,null)}return b},L.tU=function(b,c,a,n,o,u,p){if(c!=null){var f=c.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.od!=p.od)throw h.i.Zk();a=h.Uc.Ph(a,p,f)}}else if(p!=null)throw h.i.O();for(b=new h.$c(b),c=h.CC.local().W(b,c,a,n,o,u,null),a=[];(n=c.next())!=null;)a.push(n);return a.slice(0)},L.offset=function(b,c,a,n,o,u,p){if(c!=null){var f=c.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.od!=p.od)throw h.i.Zk();a=h.Uc.Ph(a,p,f)}}else if(p!=null)throw h.i.O();return h.CC.local().W(b,c,a,n,o,u,null)},L.cP=function(b){return h.wC.local().W(b,null)},L.dP=function(b,c){var a=h.wC.local();for(b=new h.$c(b),c=a.W(b,c,null),a=[];(b=c.next())!=null;)a.push(b);return a},L.iz=function(b,c,a){return h.Hx.local().iz(b,c,a)},L.jz=function(b,c){return h.Hx.local().jz(b,c)},L.kz=function(b,c,a,n){return h.Hx.local().kz(b,c,a,n)},L.ZB=function(b,c){return h.$l.local().W(b,c,!1,null)},L.WS=function(b,c){return h.$l.local().ts(b,c,null)},L.KQ=function(b,c,a,n,o){var u=h.yC.local();if(c!=null){if(c=c.Id(),o!=null&&c.Fc()!=o.Fc()){if(c.od!=o.od)throw h.i.Zk();a=h.Uc.Ph(a,o,c)}}else if(o!=null)throw h.i.O();return u.W(b,a,n,null)},L.Sr=function(b,c,a,n){var o=h.Zl.local();if(c!=null){if(c=c.Id(),n!=null&&c.Fc()!=n.Fc()){if(c.od!=n.od)throw h.i.Zk();a=h.Uc.Ph(a,n,c)}}else if(n!=null)throw h.i.O();return o.W(b,a,null)},L.Ry=function(b,c,a,n,o){o===void 0&&(o=0);var u=h.mL.local();if(o==4||o!==0)throw h.i.Fe();if(n!==null){if(n.od!==0)throw h.i.O("Unit must be a linear unit type");a=h.Uc.Ph(a,n,h.Uc.ah(9001))}return u.W(b,a,c,o,null)},L.QQ=function(b,c,a,n){if(b===null)return 0;if(n==4||n!==0)throw h.i.Fe();if(b.K()==197)b=L.LT(b);else if(b.K()!=1736)return 0;if(n=h.cb.tc(c),b=h.cb.Bh(b,c,n),b=h.OK.RQ([b])[0],a!==null){if(a.od!==2)throw h.i.O("Unit must be a area unit type");b=h.Uc.Ph(b,h.Uc.ah(109404),a)}return b},L.TQ=function(b,c,a,n){if(b=h.oL.local().W(b,c,n,null),a!==null){if(a.od!==0)throw h.i.O("Unit must be a linear unit type");b=h.Uc.Ph(b,h.Uc.ah(9001),a)}return b},L.BU=function(b,c,a){if(b===null)return 0;var n=null;if(c!=null){if((n=c.Id()).od==0&&(n=h.Uc.VF(n))==null&&a!==null)throw h.i.O();if(a!=null&&n.Fc()!=a.Fc()&&n.od!=a.od)throw h.i.Zk()}else if(a!=null)throw h.i.O();return b.K()==1736||b.K()==197?(b=b.He(),a!==null?h.Uc.Ph(b,n,a):b):0},L.CU=function(b,c,a){if(b===null||b.B()||1>b.Eb())return 0;var n=null;if(c!=null){if(n=c.Id(),a!=null&&n.Fc()!=a.Fc()&&n.od!=a.od)throw h.i.Zk()}else if(a!=null)throw h.i.O();b.K()==1736||b.K()==197?c=b.mg():h.ba.zd(b.K())?(c=new h.Ua(b.description)).oc(b,!0):c=b,b=0,c=c.Ha();for(var o=new h.h,u=new h.h;c.ab();)for(;c.Ia();){var p=c.ia();p.$p(o),p.Vr(u),b+=h.h.ub(o,u)}return n!==null&&a!==null&&(b=h.Uc.Ph(b,n,a)),b},L.$O=function(b){return b.points!==void 0?L.fS(b,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM):b.rings!==void 0?L.fG(b.rings,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"P"):b.paths!==void 0?L.fG(b.paths,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"L"):b.x!==void 0?L.gS(b):b.xmin!==void 0?L.eS(b):null},L.gS=function(b){if(b.x==null||b.x=="NaN")return new h.Ta;var c=new h.Ta(b.x,b.y);return b.z!==void 0&&b.z!==null&&c.oX(b.z),b.m!==void 0&&b.m!==null&&c.ZW(b.m),c},L.eS=function(b){if(b.xmin==null||b.xmin=="NaN")return new h.Hh;var c=new h.Hh(b.xmin,b.ymin,b.xmax,b.ymax);return b.zmin!==void 0&&b.zmin!==null&&c.setInterval(1,0,b.zmin,b.zmax),b.mmin!==void 0&&b.mmin!==null&&c.setInterval(2,0,b.mmin,b.mmax),c},L.fS=function(b,c,a){var n=0,o=new h.de,u=3*b.points.length;u%2!=0&&u++,2>u&&(u=2);var p=h.P.truncate(3*b.points.length/2);4>p?p=4:16>p&&(p=16),u=h.Zc.En(u,0);var f=h.Zc.En(p);p=h.Zc.En(p);for(var m=0;m<b.points.length;m++)u.write(2*m,b.points[m][0]),u.write(2*m+1,b.points[m][1]),f.write(m,c||a?b.points[m][2]:NaN),p.write(m,a&&c?b.points[m][3]:NaN),n++;return n!=0&&(o.resize(n),o.kn(0,u)),c&&(o.se(1),o.kn(1,f)),a&&(o.se(2),o.kn(2,c==0?f:p)),o.Qc(16777215),o},L.fG=function(b,c,a,n){var o=0,u=2;if(n=="P"){var p=new h.Ea;o=1,u=3}else p=new h.Ua;for(var f=h.Zc.Qh(0),m=h.Zc.Or(0),w=0,x=0,E=[],T=[],A=0;A<b.length;A++){var P=b[A].length;if(E[A]=!1,n==="P"&&b[A][0][0]===b[A][b[A].length-1][0]&&b[A][0][1]===b[A][b[A].length-1][1]){var F=a==0||b[A][0][3]===b[A][b[A].length-1][3]||b[A][0][3]===void 0&&b[A][b[A].length-1][3]===void 0;(c==0||b[A][0][2]===b[A][b[A].length-1][2]||b[A][0][2]===void 0&&b[A][b[A].length-1][2]===void 0)&&F&&(E[A]=!0,--P)}P>=u?(T[A]=!1,x+=1,f.add(w),m.add(o),w+=P):T[A]=!0}for((n=3*w)%2!=0&&n++,2>n&&(n=2),4>(A=h.P.truncate(3*w/2))?A=4:16>A&&(A=16),n=h.Zc.En(n,0),o=h.Zc.En(A),u=h.Zc.En(A),A=P=0;A<b.length;A++)if(T[A]===!1)for(F=0;F<b[A].length;F++){var j=!1;F===b[A].length-1&&E[A]===!0&&(j=!0),j||(n.write(2*P,b[A][F][0]),n.write(2*P+1,b[A][F][1]),o.write(P,c||a?b[A][F][2]:NaN),u.write(P,a&&c?b[A][F][3]:NaN),P++)}return w!=0&&(b=p,f.resize(x),m.resize(x),0<w&&(f.add(w),m.add(0)),b.kn(0,n),b.JJ(m),b.KJ(f)),c&&(p.se(1),p.kn(1,o)),a&&(p.se(2),p.kn(2,c==0?o:u)),p.Qc(16777215),p},L}()}(X||(X={})),function(h){h.Dx=function(){function L(){}return L.dr=function(b){var c,a=0,n=b.length,o=b[0];for(c=0;c<n-1;c++){var u=b[c+1];a+=(u[0]-o[0])*(u[1]+o[1]),o=u}return 0<=a},L.rotate=function(b,c,a){c=c*Math.PI/180;var n=Math.cos(c),o=Math.sin(c);if(b.paths!==void 0){c={paths:[]};for(var u=0;u<b.paths.length;u++){for(var p=b.paths[u],f=[],m=0;m<p.length;m++){var w=p[m].slice(0);f.push(w);var x=n*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,E=o*(p[m][0]-a.x)+n*(p[m][1]-a.y)+a.y;w[0]=x,w[1]=E}c.paths.push(f)}return c}if(b.rings!==void 0){for(c={rings:[]},u=0;u<b.rings.length;u++){p=b.rings[u],f=[];var T=L.dr(p);for(m=0;m<p.length;m++)w=p[m].slice(0),f.push(w),x=n*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,E=o*(p[m][0]-a.x)+n*(p[m][1]-a.y)+a.y,w[0]=x,w[1]=E;L.dr(f)!==T&&f.reverse(),c.rings.push(f)}return c}if(b.x!==void 0)return c={x:n*(b.x-a.x)-o*(b.y-a.y)+a.x,y:o*(b.x-a.x)+n*(b.y-a.y)+a.y},b.z!==void 0&&(c.z=b.z),b.m!==void 0&&(c.m=b.m),c;if(b.points!==void 0){for(c={points:[]},b=b.points,m=0;m<b.length;m++)(u=b[m].slice(0))[0]=n*(b[m][0]-a.x)-o*(b[m][1]-a.y)+a.x,u[1]=o*(b[m][0]-a.x)+n*(b[m][1]-a.y)+a.y,c.points.push(u);return c}return null},L.DQ=function(b,c){if(b.paths!==void 0){for(var a={paths:[]},n=0;n<b.paths.length;n++){for(var o=b.paths[n],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var m=c.x-o[p][0];f[0]=o[p][0]+2*m}a.paths.push(u)}return a}if(b.rings!==void 0){for(a={rings:[]},n=0;n<b.rings.length;n++){o=b.rings[n];var w=L.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),m=c.x-o[p][0],f[0]=o[p][0]+2*m;L.dr(u)!==w&&u.reverse(),a.rings.push(u)}return a}if(b.x!==void 0)return m=c.x-b.x,a={x:b.x+2*m,y:b.y},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),a;if(b.points!==void 0){for(a={points:[]},b=b.points,p=0;p<b.length;p++)n=b[p].slice(0),m=c.x-n[0],n[0]+=2*m,a.points.push(n);return a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),m=c.x-b.xmin,a.xmax=b.xmin+2*m,m=c.x-b.xmax,a.xmin=b.xmax+2*m,a):null},L.EQ=function(b,c){if(b.paths!==void 0){for(var a={paths:[]},n=0;n<b.paths.length;n++){for(var o=b.paths[n],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var m=c.y-o[p][1];f[1]=o[p][1]+2*m}a.paths.push(u)}return a}if(b.rings!==void 0){for(a={rings:[]},n=0;n<b.rings.length;n++){o=b.rings[n];var w=L.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),m=c.y-o[p][1],f[1]=o[p][1]+2*m;L.dr(u)!==w&&u.reverse(),a.rings.push(u)}return a}if(b.x!==void 0)return m=c.y-b.y,a={y:b.y+2*m,x:b.x},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),a;if(b.points!==void 0){for(a={points:[]},b=b.points,p=0;p<b.length;p++)n=b[p].slice(0),m=c.y-n[1],n[1]+=2*m,a.points.push(n);return a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),m=c.y-b.ymin,a.ymax=b.ymin+2*m,m=c.y-b.ymax,a.ymin=b.ymax+2*m,a):null},L}()}(X||(X={})),function(h){h.TK=function(){function L(){}return L.Kg=function(b,c){switch(c==null&&(c=h.ee.og()),b){case 33:return new h.Ta(c);case 322:return new h.zb(c);case 197:return new h.Hh(c);case 550:return new h.de(c);case 1607:return new h.Ua(c);case 1736:return new h.Ea(c);default:throw h.i.ga("invalid argument.")}},L}()}(X||(X={})),function(h){var L=function(){function b(c,a){this.Qe=h.ja.rf(c,-1),this.va=new h.cu,this.yl=a}return b.prototype.sW=function(c){this.va.Bt(Math.min(this.Qe.size,c)),this.va.hn(c)},b.prototype.addElement=function(c,a){if(a===void 0)return this.ZM(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,c)},b.prototype.ZM=function(c){var a=this.yl.ez(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,c)},b.prototype.kd=function(c,a){if(a===void 0)this.EP(c);else{a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==c?(this.va.kd(n,u,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):u=o,o=p}}},b.prototype.EP=function(c){var a=this.yl.ez(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==c?(this.va.kd(n,u,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):u=o,o=p}},b.prototype.kR=function(c){return c=h.P.truncate(c%this.Qe.size),(c=this.Qe.get(c))==-1?-1:this.va.sc(c)},b.prototype.yR=function(c){return this.va.lb(c)},b.prototype.wd=function(c){var a=this.yl.ez(this.ka(c));a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){if(o==c)return this.va.kd(n,u,o),void(this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1)));u=o,o=this.va.lb(o)}throw h.i.O()},b.prototype.ka=function(c){return this.va.ka(c)},b.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},b.prototype.size=function(){return this.va.NF()},b}();h.YK=L}(X||(X={})),function(h){var L=function(){function b(){this.Ni=new h.ad(3),this.va=new h.ad(6),this.jT=!1,this.je=-1}return b.prototype.hl=function(c){this.Ni.kd(c)},b.prototype.Rw=function(){return this.Ni.De()},b.prototype.dv=function(c){this.va.kd(c)},b.prototype.UA=function(){return this.va.De()},b.prototype.QB=function(c,a){this.Ni.T(c,1,a)},b.prototype.fx=function(c,a){this.Ni.T(c,2,a)},b.prototype.YW=function(c,a){this.Ni.T(c,3,a)},b.prototype.OB=function(c,a){this.va.T(c,4,a)},b.prototype.aX=function(c,a){this.va.T(c,3,a)},b.prototype.NJ=function(c,a){this.va.T(c,2,a)},b.prototype.Rh=function(c){var a=this.UA();return this.va.T(a,3,this.je),this.va.T(a,4,0),this.va.T(a,5,c),this.je!=-1&&this.NJ(this.je,a),this.je=a},b.prototype.eh=function(c){this.FE(c);var a=this.va.U(c,2),n=this.va.U(c,3);return a!=-1?this.aX(a,n):this.je=n,n!=-1&&this.NJ(n,a),this.dv(c),n},b.prototype.Bt=function(c){this.va.Ee(c)},b.prototype.JF=function(c){return this.va.U(c,5)},b.prototype.XW=function(c,a){this.va.T(c,5,a)},b.prototype.addElement=function(c,a){return this.mS(c,a)},b.prototype.mS=function(c,a){var n=this.Rw();this.fx(n,-1),this.va.U(c,0)==-1&&this.va.T(c,0,n);var o=this.va.U(c,1);return this.QB(n,o),o!=-1&&this.fx(o,n),this.va.T(c,1,n),this.setData(n,a),this.OB(c,this.ds(c)+1),this.jT&&this.YW(n,c),n},b.prototype.kd=function(c,a){var n=this.xe(a),o=this.lb(a);return n!=-1?this.fx(n,o):this.va.T(c,0,o),o!=-1?this.QB(o,n):this.va.T(c,1,n),this.hl(a),this.OB(c,this.ds(c)-1),o},b.prototype.hn=function(c){this.Ni.Ee(c)},b.prototype.getData=function(c){return this.Ni.U(c,0)},b.prototype.setData=function(c,a){this.Ni.T(c,0,a)},b.prototype.lb=function(c){return this.Ni.U(c,2)},b.prototype.xe=function(c){return this.Ni.U(c,1)},b.prototype.sc=function(c){return this.va.U(c,0)},b.prototype.Gc=function(c){return this.va.U(c,1)},b.prototype.clear=function(){for(var c=this.je;c!=-1;)c=this.eh(c)},b.prototype.FE=function(c){for(var a=this.Gc(c);a!=-1;){var n=a;a=this.xe(n),this.hl(n)}this.va.T(c,0,-1),this.va.T(c,1,-1),this.OB(c,0)},b.prototype.B=function(){return this.Ni.size==0},b.prototype.NF=function(){return this.Ni.size},b.prototype.ds=function(c){return this.va.U(c,4)},b.prototype.lz=function(c){return this.va.U(c,3)},b}();h.kp=L}(X||(X={})),function(h){var L=function(){function b(c){c===void 0?(this.ug=new h.ad(2),this.va=new h.ad(4),this.je=-1,this.Sv=!0):(this.ug=new h.ad(2),this.va=new h.ad(c?4:2),this.je=-1,this.Sv=c)}return b.prototype.hl=function(c){this.ug.kd(c)},b.prototype.Rw=function(){return this.ug.De()},b.prototype.dv=function(c){this.va.kd(c)},b.prototype.UA=function(){return this.va.De()},b.prototype.Rh=function(){var c=this.UA();return this.Sv&&(this.va.T(c,3,this.je),this.je!=-1&&this.va.T(this.je,2,c),this.je=c),c},b.prototype.eh=function(c){for(var a=this.sc(c);a!=-1;){var n=a;a=this.lb(a),this.hl(n)}this.Sv&&(a=this.va.U(c,2),n=this.va.U(c,3),a!=-1?this.va.T(a,3,n):this.je=n,n!=-1&&this.va.T(n,2,a)),this.dv(c)},b.prototype.Bt=function(c){this.va.Ee(c)},b.prototype.addElement=function(c,a){var n=this.va.U(c,1),o=this.Rw();return n!=-1?this.ug.T(n,1,o):this.va.T(c,0,o),this.va.T(c,1,o),this.ug.T(o,0,a),o},b.prototype.hn=function(c){this.ug.Ee(c)},b.prototype.kd=function(c,a,n){a!=-1?(this.ug.T(a,1,this.ug.U(n,1)),this.va.U(c,1)==n&&this.va.T(c,1,a)):(this.va.T(c,0,this.ug.U(n,1)),this.va.U(c,1)==n&&this.va.T(c,1,-1)),this.hl(n)},b.prototype.Cy=function(c,a){var n=this.va.U(c,1),o=this.va.U(a,0);o!=-1&&(n!=-1?this.ug.T(n,1,o):this.va.T(c,0,o),this.va.T(c,1,this.va.U(a,1))),this.Sv&&(c=this.va.U(a,2),n=this.va.U(a,3),c!=-1?this.va.T(c,3,n):this.je=n,n!=-1&&this.va.T(n,2,c)),this.dv(a)},b.prototype.ka=function(c){return this.ug.U(c,0)},b.prototype.Uj=function(c,a){this.ug.T(c,0,a)},b.prototype.lb=function(c){return this.ug.U(c,1)},b.prototype.sc=function(c){return this.va.U(c,0)},b.prototype.Kn=function(c){return this.ka(this.sc(c))},b.prototype.clear=function(){this.ug.oj(!0),this.va.oj(!0),this.je=-1},b.prototype.B=function(){return this.ug.size==0},b.prototype.NF=function(){return this.ug.size},b.prototype.lz=function(c){return this.va.U(c,3)},b}();h.cu=L}(X||(X={})),function(h){h.ta=function(){function L(){}return L.Xd=function(b,c,a){return c=c.zr(),b=b!=null&&b.Yd!==void 0?b.Yd(0):0,a&&(c*=4,b*=1.1),Math.max(b,c)},L.Gr=function(b){return 2*Math.sqrt(2)*b},L.lN=function(b){return Math.sqrt(2)*b},L.mj=function(b,c,a){var n=new h.l;return c.A(n),L.Xd(b,n,a)},L.qE=function(b,c,a){return c=c.Vg(1,0).zr(),b=b!=null?b.Yd(1):0,a&&(c*=4,b*=1.1),Math.max(b,c)},L.ov=function(b,c){var a=new h.l;return b.yc(a),b=new h.l,c.yc(b),a.$b(b),a},L.SN=function(b){var c=new h.l;if(b.yc(c),c.B())return null;var a=new h.fu(c,8),n=-1,o=new h.l,u=!1;do for(var p=0,f=b.ea();p<f;p++){if(b.Tj(p,o),(n=a.Ez(p,o,n))==-1){if(u)throw h.i.ga("internal error");b.Ap(c,!1),u=!0,a.reset(c,8);break}u=!1}while(u);return a},L.hE=function(b){var c=new h.l;b.yc(c);for(var a=new h.fu(c,8),n=-1,o=b.Ha(),u=new h.l,p=!1;o.ab();)for(;o.Ia();){var f=o.ia(),m=o.xb();if(f.A(u),(n=a.Ez(m,u,n))==-1){if(p)throw h.i.Ra();b.Ap(c,!1),p=!0,a.reset(c,8),o.aj();break}}return a},L.lj=function(b,c){var a=new h.l;b.yc(a);for(var n=new h.fu(a,8),o=-1,u=new h.l,p=b.Ha(),f=!1;p.ab();)for(;p.Ia();){var m=p.ia(),w=p.xb();if(m.A(u),u.isIntersecting(c)&&(o=n.Ez(w,u,o))==-1){if(f)throw h.i.ga("internal error.");b.Ap(a,!1),f=!0,n.reset(a,8),p.aj();break}}return n},L.iE=function(b,c){for(var a=new h.fu(c,8),n=new h.h,o=!1,u=new h.l,p=0;p<b.I();p++)if(b.D(p,n),c.contains(n)&&(u.L(n),a.xj(p,u)==-1)){if(o)throw h.i.Ra();o=!0,p=new h.l,b.Ap(p,!1),a.reset(p,8),p=-1}return a},L.fR=function(b,c,a){var n=new h.l,o=new h.l;b.yc(n),c.yc(o),n.X(a,a),o.X(a,a);var u=new h.l;u.L(n),u.Fa(o),b=b.Ha(),c=c.Ha();var p=new h.rC;p.VB(a);var f=!1;for(p.jK();b.ab();)for(;b.Ia();)b.ia().A(n),n.isIntersecting(u)&&(f=!0,(a=new h.l).L(n),p.CD(b.xb(),a));if(p.cF(),!f)return null;for(n=!1,p.iK();c.ab();)for(;c.Ia();)c.ia().A(o),o.isIntersecting(u)&&(n=!0,(a=new h.l).L(o),p.yD(c.xb(),a));return p.bF(),n?p:null},L.gR=function(b,c,a,n,o){var u=b.K(),p=c.K(),f=new h.l,m=new h.l;b.yc(f),c.yc(m),f.X(a,a),m.X(a,a);var w=new h.l;w.L(f),w.Fa(m);var x=new h.rC;x.VB(a);var E=!1;x.jK();var T=0;for(a=b.ea();T<a;T++)n&&u==1736&&!b.Gv(T)||(b.Tj(T,f),f.isIntersecting(w)&&(E=!0,x.CD(T,f)));if(x.cF(),!E)return null;for(b=!1,x.iK(),n=0,a=c.ea();n<a;n++)o&&p==1736&&!c.Gv(n)||(c.Tj(n,m),m.isIntersecting(w)&&(b=!0,x.yD(n,m)));return x.bF(),b?x:null},L.Tu=function(b,c,a){if(b!=c)for(var n=0;n<a;n++)b[n]==null?b[n]=h.h.cl(c[n]):b[n].N(c[n])},L.Ey=function(b,c,a,n){var o=0;for(n+=0;o<n;a++,o++)b[o]==null&&(b[o]=[0,0]),b[o][0]=c[a].x,b[o][1]=c[a].y},L.Dy=function(b,c,a,n){var o=c,u=0;for(c=n+c;o<c;u++,o++)b[o]==null?b[o]=h.h.construct(a[u][0],a[u][1]):b[o].na(a[u][0],a[u][1])},L.eP=function(b,c,a){if(b!=c)for(var n=0;n<a;n++)b[n]==null?b[n]=new h.Ta(c[n]):c[n].copyTo(b[n])},L.pE=function(b,c,a,n){var o=0;return b!=null&&(o=b.Yd(0),n&&!a||b==null||(o+=1.01*b.pz(0))),a&&(c*=4,o*=1.01),Math.max(o,c)},L.oy=function(b,c,a){return L.pE(b,c.zr(),a,!1)},L.aO=function(b,c){var a=new h.l;return c.A(a),L.oy(b,a,!0)},L.py=function(b,c){return L.pE(b,c.zr(),!1,!0)},L.Ju=function(b,c){var a=new h.l;return c.A(a),L.py(b,a)},L.uG=function(b,c,a,n){n*=n;var o=new h.h;if(o.vc(b,c),(b=new h.h).vc(a,c),c=o.Tk(),a=b.Tk(),c<=n&&a<=n)return!0;var u=h.mc.ox(o.yi(b));return(u<=n*c||u<=n*a)&&0<=o.Sh(b)},L.YJ=function(b,c,a,n){for(var o=0;o<c;o++){var u=b[o].y,p=h.P.Sk(u,a,n);p!=u&&(b[o].y=p)}},L}()}(X||(X={})),function(h){var L,b,c=function(){function u(p){this.Za=p}return u.prototype.compare=function(p,f,m){p=p.ka(m),m=this.Za.pk(f);var w=this.Za.pk(p);return m<w?-1:m==w?o.iq(f)&&o.Iv(p)?-1:o.iq(p)&&o.Iv(f)?1:0:1},u}(),a=function(){function u(p){this.Za=p}return u.prototype.qr=function(p,f,m){this.Za.yX(m,p,f)},u.prototype.bq=function(p){return this.Za.pk(p)},u}();(b=L||(L={}))[b.initialize=0]="initialize",b[b.pIn=1]="pIn",b[b.pL=2]="pL",b[b.pR=3]="pR",b[b.pT=4]="pT",b[b.right=5]="right",b[b.left=6]="left",b[b.all=7]="all";var n=function(){function u(){this.Za=null,this.Si=new h.Oc,this.ji=new h.ja(0),this.sg=[0,0]}return u.prototype.Zi=function(p,f){this.Si.pa=p.pa-f,this.Si.wa=p.wa+f,this.ji.resize(0),this.he=0,this.sg[0]=0},u.prototype.yB=function(p,f,m){if(p>f)throw h.i.O();this.Si.pa=p-m,this.Si.wa=f+m,this.ji.resize(0),this.he=0,this.sg[0]=0},u.prototype.Vo=function(p,f){this.Si.pa=p-f,this.Si.wa=p+f,this.ji.resize(0),this.he=0,this.sg[0]=0},u.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.he)return-1;for(var p=!0;p;)switch(this.sg[this.he]){case 1:p=this.xU();break;case 2:p=this.yU();break;case 3:p=this.zU();break;case 4:p=this.AU();break;case 5:p=this.xW();break;case 6:p=this.cT();break;case 7:p=this.nN();break;case 0:p=this.Bz();break;default:throw h.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},u.construct=function(p){var f=new u;return f.Za=p,f.ji.Jb(20),f.he=-1,f},u.prototype.Bz=function(){return this.Qg=this.pH=this.Oi=this.Mc=-1,this.Za.me!=null&&0<this.Za.me.size?(this.sg[0]=1,this.Oi=this.Za.kf,!0):(this.he=-1,!1)},u.prototype.xU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.he=-1,!1;var p=this.Za.Pp(this.Mc);return this.Si.wa<p?(p=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=6),!0):p<this.Si.pa?(p=this.Za.nk(this.Mc),this.Oi=this.Za.mk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.pH=this.Mc,p=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),!0)},u.prototype.yU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.sg[this.he]=3,this.Oi=this.Za.mk(this.pH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var p=this.Za.nk(this.Mc);return this.Oi=this.Za.mk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.sg[++this.he]=5),!0}return p=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),(p=this.Za.mk(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.zU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.sg[this.he]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var p=this.Za.nk(this.Mc);return this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=6),!0}return p=this.Za.nk(this.Mc),this.Oi=this.Za.mk(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),(p=this.Za.sj(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.AU=function(){if(this.ji.size==0)return this.Qg=this.he=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var p=this.Za.nk(this.Mc);return p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.mk(this.Mc)!=-1&&this.ji.add(this.Za.mk(this.Mc)),!0},u.prototype.cT=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())&&this.Za.pk(this.Op())<=this.Si.wa?(this.gi=this.MF(),!1):(this.he--,!0)},u.prototype.xW=function(){return this.Qg=this.gi,this.Qg!=-1&&o.Iv(this.Op())&&this.Za.pk(this.Op())>=this.Si.pa?(this.gi=this.JR(),!1):(this.he--,!0)},u.prototype.nN=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())?(this.gi=this.MF(),!1):(this.he--,!0)},u.prototype.MF=function(){return this.Za.Tf?this.Za.ag.lb(this.Qg):this.Za.Vi.lb(this.Qg)},u.prototype.JR=function(){return this.Za.Tf?this.Za.ag.xe(this.Qg):this.Za.Vi.xe(this.Qg)},u.prototype.Op=function(){return this.Za.Tf?this.Za.ag.ka(this.Qg):this.Za.Vi.getData(this.Qg)},u}();h.wY=n;var o=function(){function u(p){this.Cm=this.bi=this.ag=this.Vi=this.Mm=this.Gj=this.me=this.Hj=null,this.Tf=p,this.nq=this.Uv=!1}return u.prototype.mr=function(){this.Ok(!0)},u.prototype.Dr=function(p,f){if(!this.Uv)throw h.i.Hb();this.Hj.push(new h.Oc(p,f))},u.prototype.Hp=function(){if(!this.Uv)throw h.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Tf||(this.oS(),this.aw=this.Hj.length)},u.prototype.xj=function(p){if(!this.Tf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var f=this.Hj.length;if(this.dA){var m=new h.ja(0);m.Jb(2*f),this.WI(m),this.bi.Jb(2*f),this.bi.resize(0),this.VI(m),this.Mm.resize(f,-1),this.Mm.Yj(-1,0,f),this.dA=!1}else this.Mm.Yj(-1,0,f);this.kf=this.Vu()}f=this.jG(p<<1,this.kf),m=this.ag.addElement(1+(p<<1),this.rz(f)),this.PJ(f,m),this.Mm.set(p,f),this.aw++},u.prototype.remove=function(p){if(!this.Tf||!this.nq)throw h.i.ga("invalid call");var f=this.Mm.get(p);if(f==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(p,-1),this.aw--;var m=this.rz(f),w=this.ag.SR(m);this.ag.wd(this.qR(f),m),this.ag.wd(this.MR(f),m),(p=this.ag.size(m))==0&&(this.ag.GP(m),this.TJ(w,-1)),this.Gj.kd(f),m=this.OF(w);var x=this.sj(w),E=this.mk(w);for(f=0;!(0<p||w==this.kf||x!=-1&&E!=-1);)w==this.sj(m)?x!=-1?(this.Pk(m,x),this.Wj(x,m),this.Pk(w,-1)):E!=-1?(this.Pk(m,E),this.Wj(E,m),this.Rk(w,-1)):this.Pk(m,-1):x!=-1?(this.Rk(m,x),this.Wj(x,m),this.Pk(w,-1)):E!=-1?(this.Rk(m,E),this.Wj(E,m),this.Rk(w,-1)):this.Rk(m,-1),this.Wj(w,-1),f++,w=m,p=(m=this.nk(w))!=-1?this.ag.size(m):0,x=this.sj(w),E=this.mk(w),m=this.OF(w)},u.prototype.reset=function(){if(!this.Tf||!this.nq)throw h.i.O("invalid call");this.Ok(!1)},u.prototype.size=function(){return this.aw},u.prototype.getIterator=function(){return n.construct(this)},u.prototype.WI=function(p){for(var f=this.Hj.length,m=0;m<2*f;m++)p.add(m);this.zX(p,2*f)},u.prototype.VI=function(p){for(var f=NaN,m=0;m<p.size;m++){var w=p.get(m),x=this.pk(w);x!=f&&(this.bi.add(w),f=x)}},u.prototype.oS=function(){var p=this.Hj.length,f=new h.ja(0);f.Jb(2*p),this.WI(f),this.bi.Jb(2*p),this.bi.resize(0),this.VI(f),this.Gj.Ee(p),this.Vi.hn(2*p);var m=h.Zc.Qh(p);for(m.Yj(-1,0,p),this.kf=this.Vu(),p=0;p<f.size;p++){var w=f.get(p),x=m.get(w>>1);x!=-1?this.PJ(x,this.Vi.addElement(this.rz(x),w)):(x=this.jG(w,this.kf),m.set(w>>1,x))}},u.prototype.jG=function(p,f){var m=f,w=f,x=-1,E=0,T=this.bi.size-1,A=0,P=p>>1,F=NaN,j=NaN,H=!0,W=this.xR(P);for(P=this.uR(P);H;){E<T?(A=E+h.P.truncate((T-E)/2),this.bz(m)==-1&&this.zJ(m,this.bi.get(A),this.bi.get(A+1))):this.bz(m)==-1&&this.zJ(m,this.bi.get(E),this.bi.get(E));var G=this.Pp(m);if(P<G)f!=-1&&(f==m?(w=m,F=G,j=(f=this.sj(m))!=-1?this.Pp(f):NaN):j>G&&(G<F?this.Pk(w,m):this.Rk(w,m),this.Rk(m,f),this.Tf&&(this.Wj(m,w),this.Wj(f,m)),w=m,F=G,f=-1,j=NaN)),(T=this.rR(m))==-1&&(T=this.Vu(),this.VW(m,T)),m=T,T=A;else if(W>G)f!=-1&&(f==m?(w=m,F=G,j=(f=this.mk(m))!=-1?this.Pp(f):NaN):j<G&&(G<F?this.Pk(w,m):this.Rk(w,m),this.Pk(m,f),this.Tf&&(this.Wj(m,w),this.Wj(f,m)),w=m,F=G,f=-1,j=NaN)),(E=this.NR(m))==-1&&(E=this.Vu(),this.fX(m,E)),m=E,E=A+1;else{(H=this.nk(m))==-1&&(H=this.tP(m),this.TJ(m,H));var ee=this.$M(H,p);x=this.rP(),this.iX(x,H),this.UW(x,ee),m!=f&&(G<F?this.Pk(w,m):this.Rk(w,m),this.Tf&&this.Wj(m,w),f!=-1&&(j<G?this.Pk(m,f):this.Rk(m,f),this.Tf&&this.Wj(f,m))),H=!1}}return x},u.prototype.Vu=function(){return this.me.De()},u.prototype.tP=function(p){return this.Tf?this.ag.Rr(p):this.Vi.Rh(p)},u.prototype.rP=function(){return this.Gj.De()},u.prototype.Ok=function(p){p?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=h.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Tf?this.Mm==null?(this.Mm=h.Zc.Qh(0),this.ag=new h.Zj,this.ag.Wo(new c(this))):this.ag.clear():this.Vi==null?this.Vi=new h.kp:this.Vi.clear(),this.me==null?(this.Gj=new h.ad(3),this.me=new h.ad(this.Tf?8:7)):(this.Gj.oj(!1),this.me.oj(!1)),this.kf=-1,this.aw=0},u.prototype.zJ=function(p,f,m){this.OW(p,f),this.PW(p,m)},u.prototype.Pp=function(p){var f=this.bz(p);return f==-1?NaN:(f=this.pk(f))==(p=this.pk(this.aR(p)))?f:.5*(f+p)},u.prototype.OW=function(p,f){this.me.T(p,0,f)},u.prototype.PW=function(p,f){this.me.T(p,1,f)},u.prototype.VW=function(p,f){this.me.T(p,3,f)},u.prototype.fX=function(p,f){this.me.T(p,4,f)},u.prototype.TJ=function(p,f){this.me.T(p,2,f)},u.prototype.Pk=function(p,f){this.me.T(p,5,f)},u.prototype.Rk=function(p,f){this.me.T(p,6,f)},u.prototype.Wj=function(p,f){this.me.T(p,7,f)},u.prototype.iX=function(p,f){this.Gj.T(p,0,f)},u.prototype.$M=function(p,f){return this.Tf?this.ag.addElement(f,p):this.Vi.addElement(p,f)},u.prototype.UW=function(p,f){this.Gj.T(p,1,f)},u.prototype.PJ=function(p,f){this.Gj.T(p,2,f)},u.prototype.ml=function(p){return this.Tf?this.ag.sc(p):this.Vi.sc(p)},u.prototype.bs=function(p){return this.Tf?this.ag.Gc(p):this.Vi.Gc(p)},u.iq=function(p){return(1&p)==0},u.Iv=function(p){return(1&p)==1},u.prototype.bz=function(p){return this.me.U(p,0)},u.prototype.aR=function(p){return this.me.U(p,1)},u.prototype.nk=function(p){return this.me.U(p,2)},u.prototype.rR=function(p){return this.me.U(p,3)},u.prototype.NR=function(p){return this.me.U(p,4)},u.prototype.sj=function(p){return this.me.U(p,5)},u.prototype.mk=function(p){return this.me.U(p,6)},u.prototype.OF=function(p){return this.me.U(p,7)},u.prototype.rz=function(p){return this.Gj.U(p,0)},u.prototype.qR=function(p){return this.Gj.U(p,1)},u.prototype.MR=function(p){return this.Gj.U(p,2)},u.prototype.xR=function(p){return this.Hj[p].pa},u.prototype.uR=function(p){return this.Hj[p].wa},u.prototype.zX=function(p,f){this.Cm==null&&(this.Cm=new h.Zt);var m=new a(this);this.Cm.sort(p,0,f,m)},u.prototype.yX=function(p,f,m){var w=this;p.Wd(f,m,function(x,E){var T=w.pk(x),A=w.pk(E);return T<A||T==A&&u.iq(x)&&u.Iv(E)?-1:1})},u.prototype.pk=function(p){var f=this.Hj[p>>1];return u.iq(p)?f.pa:f.wa},u}();h.ur=o}(X||(X={})),function(h){var L=function(){function b(c){if(c==null)throw h.i.ga("Invalid arguement");this.hf=c;var a=c.hR();a.aS()?c.ef.CG()?this.mo=h.ui.PannableFold:this.mo=h.ui.Clip:this.mo=h.ui.DontClip,a.bS()?c.Zf.CG()?this.Sm=h.ui.PannableFold:this.Sm=h.ui.Clip:this.Sm=h.ui.DontClip,this.Dm=a.Lr,this.gH=a.Xu,c=this.hf.mH,this.VG=c.ks(2147483648),this.Wv=c.ks(1073741824)}return b.Bh=function(c,a,n){return a.yw.Bh(c,n)},b.Tt=function(c,a,n,o){return c.yw.Tt(a,n,o)},b.St=function(c,a,n,o){if(n=0>n?a.length:n,(c=c.yw.Tt(a,n,o))==n)return c;for(var u=a=0;u<n;u++){var p=o[u];p.isNaN()||(a<u&&o[a].N(p),a++)}for(;a<n;a++)o[a].Sc();return c},b.transform=function(c,a,n,o,u){if(c.isIdentity())return h.ta.eP(o,a,n),n;for(var p=[],f=0,m=0;m<n;){for(var w=Math.min(p.length,n-m),x=m,E=0;x<w;x++,E++)p[E]==null?p[E]=a[x].D():a[x].D(p[E]);var T=u?b.St(c,p,w,p):b.Tt(c,p,w,p);for(E=x=0;x<T;x++,E++)o[m]==null&&(o[m]=new h.Ta(a[m])),o[m].Db(p[E]);m+=w,f+=T}return f},b.prototype.Tt=function(c,a,n){if(this.hf.isIdentity())return c!=n&&h.ta.Tu(n,c,a),a;var o=this.hf.ef,u=this.hf.Zf,p=o.Tb(),f=u.Tb();if(p==0&&p===f){var m=o.Sp();return u=m/(u=u.Sp()),(m=new h.Ed).Jt(u,u),m.XX(c,a,n),a}if(m=h.P.Hu(Math.min(a,64)),p==3){var w=o.Li;p=(o=w.gk()).Tb(),n!=c&&h.ta.Tu(n,c,a),h.Ab.bl(w,n,a,!0),w.St(h.dm.forward,n,a),h.Ab.al(w,n,a,!0)}if(p==3||f===3)throw h.i.ga("image: transform_in_place_");if(p==2)this.mo==h.ui.Clip?(n!=c&&h.ta.Tu(n,c,a),c=o.ol(),h.Ab.HS(c,o,n,a)):(n!=c&&h.ta.Tu(n,c,a),o.Xc()&&(p=o.Yd(0),w=o.Le(),h.Ab.wX(n,a,w,p),h.Ab.kF(n,a,o,0))),h.Ab.CL(o,n,a,m);else for(p=o.Yd(0),w=o.Le(),o=0;o<a;o++)h.Ab.xX(c[o],w,p,n[o]);for(h.Ab.AL(this.hf,n,a,m),c=0,(f=f==2)?c=u.Bi():isNaN(this.Dm)||(c=this.Dm),f&&this.Sm!=h.ui.Clip||h.Ab.kF(n,a,u.tc(),c),f&&(h.Ab.sG(n,a,u,this.Sm),h.Ab.BL(u,n,a,m)),c=a,o=0;o<a;++o)n[o].isNaN()&&c--;return c},b.prototype.Bh=function(c,a){if(this.hf.isIdentity()||c.B())return c;if(c.K()==33)return this.RI(c);var n=this.hf.ef,o=this.hf.Zf,u=n.Tb(),p=o.Tb();if(u==0&&u==p)return a=n.Sp(),a/=o=o.Sp(),(o=new h.Ed).Jt(a,a),(c=h.ba.ig(c)).Pc(o),c;switch(c.K()){case 1607:case 1736:c=this.OI(c,a);break;case 550:c=this.YV(c,a);break;case 197:c=this.XV(c,a);break;default:throw h.i.ga("")}return c},b.prototype.RI=function(c){var a=c.D(),n=[];return n[0]=a,this.Tt(n,1,n),(c=new h.Ta(c)).Db(n[0]),c},b.prototype.OI=function(c,a){if(c.vm())throw h.i.ga("curves not supported");var n=c.K();if(n==1736)return this.ZV(c,a);if(n==1607)return this.$V(c,a);throw h.i.ga("projectMultiPath")},b.prototype.ZV=function(c,a){var n=this.hf.ef,o=this.hf.Zf,u=n.Tb(),p=o.Tb(),f=h.P.Hu(Math.min(c.I(),64)),m=h.Ea.ig(c);u==3&&(u=(n=(c=n.Li).gk()).Tb(),m=c.bl(m,!0),this.yp(c,h.dm.forward,m),m=c.al(m,!0)),c=null,p==3&&(p=(o=(c=o.Li).gk()).Tb());var w=u==2,x=p==2,E=x?o.tc():o,T=!x&&!this.Wv;p=!1;var A=m;if(w){if((A=h.Ab.NI(A,n,this.mo,a)).B())return A}else{if(m=new h.l,A.yc(m),u=n.Le(),m.G<u.G||m.H>u.H){var P=h.l.construct(m.v-1,u.G,m.C+1,u.H);if((A=h.ti.Pu(A,P,n,NaN,0,a)).B())return A}m.S()>2*u.S()&&(A=h.Ab.Jp(A,-2*u.S(),2*u.S(),n,!0,0,!0,a))}m=this.gH,(u=!isNaN(m))&&(A=h.Zl.local().W(A,m,a)),P=x?o.lk():null;var F=NaN;w&&(F=n.Bi());var j=o.Yr()!=null;if(this.VG)w&&(h.Ab.wr(n,F,A,f),u&&(w=n.jh(),m*=(F=n.tc().jh())/w)),h.Ab.vr(this.hf,A,T,f),u&&(w=n.tc().jh(),m*=(F=o.tc().jh())/w),n=A;else{var H=new h.Ua(A.description);H.xD(A),w&&(h.Ab.wr(n,F,H,f),u&&(w=n.jh(),m*=(F=n.tc().jh())/w)),h.Ab.vr(this.hf,H,T,f),u&&(w=n.tc().rm(),m*=(F=o.tc().rm())/w),T=NaN,x?(P=o.lk(),T=o.Bi()):isNaN(this.Dm)||(T=this.Dm),w=b.vv(n)|b.vv(o),F=10*E.Yd(0),this.Wv&&(w=3,F=0),n=h.Ab.OQ(A,n,H,E,T,a,w,F)}return j&&(n=h.Ab.RD(n,o,a)),x&&(p||(x=E.Le().S(),n.Vg(0,0).S()>=x-E.Yd(0)&&(E=P.getNorthPoleLocation(),x=P.getSouthPoleLocation(),A=P.getNorthPoleGeometry(),P=P.getSouthPoleGeometry(),T=0,A==h.Eg.PE_POLE_POINT&&E!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),P==h.Eg.PE_POLE_POINT&&x!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(p=!0))),n=h.Ab.Hz(n,o,this.Sm,a),u&&(n=h.Zl.local().W(n,m,a)),h.Ab.Kx(o,n,f)),n.B()||(p&&(n=h.$l.local().W(n,o,!1,a)),c!=null&&(n=c.al(n,!1),this.yp(c,h.dm.reverse,n),n=c.bl(n,!1))),n},b.vv=function(c){if(c.Tb()!=2)return 0;var a=0,n=c.lk();c=n.getNorthPoleLocation();var o=n.getSouthPoleLocation(),u=n.getNorthPoleGeometry();return n=n.getSouthPoleGeometry(),u==h.Eg.PE_POLE_POINT&&c!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),n==h.Eg.PE_POLE_POINT&&o!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},b.prototype.$V=function(c,a){var n=this.hf.ef,o=this.hf.Zf,u=n.Tb(),p=o.Tb(),f=h.P.Hu(Math.min(c.I(),64)),m=h.Ua.ig(c);u==3&&(u=(n=(c=n.Li).gk()).Tb(),m=c.bl(m,!0),this.yp(c,h.dm.forward,m),m=c.al(m,!0)),c=null,p==3&&(p=(o=(c=o.Li).gk()).Tb());var w=u==2;u=(p=p==2)?o.tc():o;var x=!p&&!this.Wv;if(w){if((m=h.Ab.NI(m,n,this.mo,a)).B())return m}else{var E=new h.l;m.yc(E);var T=n.Le();if((E.G<T.G||E.H>T.H)&&(E=h.l.construct(E.v-1,T.G,E.C+1,T.H),(m=h.ti.Pu(m,E,n,NaN,0,a)).B()))return m}var A=NaN;w&&(A=n.Bi()),E=o.Yr()!=null,T=this.gH;var P=!isNaN(T);if(P&&(m=h.Zl.local().W(m,T,a)),this.VG)w&&h.Ab.wr(n,A,m,f),P&&(w=n.jh(),T*=(A=n.tc().jh())/w),h.Ab.vr(this.hf,m,x,f),P&&(w=n.tc().jh(),T*=(A=o.tc().jh())/w),n=m;else{var F=new h.Ua(m.description);F.xD(m),w&&(h.Ab.wr(n,A,F,f),P&&(w=n.jh(),T*=(A=n.tc().jh())/w)),h.Ab.vr(this.hf,F,x,f),P&&(w=n.tc().jh(),T*=(A=o.tc().jh())/w),x=NaN,p?x=o.Bi():isNaN(this.Dm)||(x=this.Dm),w=b.vv(n)|b.vv(o),A=10*u.Yd(0),this.Wv&&(w=3,A=0),n=h.Ab.PQ(m,n,F,u,x,a,w,A)}return E&&(n=h.Ab.RD(n,o,a)),p&&(n=h.Ab.Hz(n,o,this.Sm,a),P&&(n=h.Zl.local().W(n,T,a)),h.Ab.Kx(o,n,f)),n.B()||c!=null&&(n=c.al(n,!1),this.yp(c,h.dm.reverse,n),n=c.bl(n,!1)),n},b.prototype.XV=function(c,a){var n=(c.da()+c.S())/400;return n!=0?(n=h.Zl.local().W(c,n,a),n=this.OI(n,a),a=c.Ja(),n.dn(a)):(a=new h.Ta(c.Kp()),n=this.RI(a),a=c.Ja(),n.B()?a.Pa():(c.copyTo(a),c=n.D(),a.L(c.x,c.y,c.x,c.y))),a},b.prototype.YV=function(c,a){c=h.ba.ig(c);var n=this.hf.ef,o=this.hf.Zf,u=n.Tb(),p=o.Tb(),f=h.P.Hu(Math.min(c.I(),64));if(u==3){var m=n.Li;u=(n=m.gk()).Tb(),c=m.al(c,!0),this.yp(m,h.dm.forward,c),c=m.bl(c,!0)}if(u==2){if(this.mo==h.ui.Clip?c=h.Xk.local().W(c,n.ol(),n,a):n.Xc()&&(u=new h.l,c.yc(u),n.Le().contains(u)||(this.mo==h.ui.PannableFold&&(c=h.Ab.nj(c,n)),h.Ab.Lt(c,n.Le(),n.Yd(0),!0),c=h.Ab.Gn(c,n,0,!0,0,a))),c.B())return c;h.Ab.wr(n,0,c,f)}else h.Ab.Lt(c,n.Le(),n.Yd(0),!0);return h.Ab.vr(this.hf,c,!1,f),n=0,u=!1,m=null,p==3&&(u=!0,p=(o=(m=o.Li).gk()).Tb()),(p=p==2)?n=o.Bi():isNaN(this.Dm)||(n=this.Dm),p&&this.Sm!=h.ui.Clip||(c=h.Ab.Gn(c,o.tc(),n,!1,0,a)),p&&(c=h.Ab.Hz(c,o,this.Sm,a),h.Ab.Kx(o,c,f),c.B())||u&&(c=m.al(c,!0),this.yp(m,h.dm.reverse,c),c=m.bl(c,!0)),c},b.prototype.yp=function(c,a,n){var o=n.I();if(o!=0){for(var u=n.vb(0),p=h.P.lg(200,0),f=[],m=0;m<o;){var w=Math.min(100,o-m);u.Xw(2*m,2*w,p,2,!0);for(var x=0;x<w;++x)f[x]=h.h.construct(p[2*m],p[2*m+1]);c.St(a,f,w),m+=w}n.Qc(1993)}},b.Py=function(c,a,n){if(c==null||a==null||!a.Xc())throw h.i.ga("Invalid Arguement");if(c.B())return c;var o=c.K();return o==197?(o=new h.Ea(c.description)).bd(c,!1):h.ba.zd(o)?(o=new h.Ua(c.description)).oc(c,!0):o=c,(o=h.Ab.nj(o,a)).B()?o:h.Ab.Gn(o,a,0,o!=c,0,n)},b.pj=function(c,a,n,o){if(c==null||a==null||!a.Xc())throw h.i.ga("Invalid Arguement");if(c.B())return c;var u=c.K();if(h.ba.Ic(u)){c=h.Ab.nj(c,a),u=new h.l,c.A(u);for(var p=h.ta.oy(a,u,!1),f=a.ih(),m=Math.floor((u.v-f.v)/f.S())*f.S()+f.v;m<u.C;)m>u.v+p&&m<u.C-p&&(c=h.Ab.nS(c,a,n,m)),m+=f.S()}else{if(u==197)return(u=new h.Ea(c.description)).bd(c,!1),b.pj(u,a,n,o);if(h.ba.zd(u))return(u=new h.Ua(c.description)).oc(c,!0),b.pj(u,a,n,o)}return b.Py(c,a,o)},b}();h.du=L}(X||(X={})),function(h){var L=function(b){function c(a,n,o,u){var p=b.call(this)||this;return a===void 0?p.description=h.ee.og():o===void 0?p.description=a:(p.description=h.ee.og(),p.TB(a,n),p.Sl(o,u)),p}return ai(c,b),c.prototype.K=function(){return 322},c.prototype.Rb=function(){var a=this.sa-this.qa,n=this.oa-this.ma;return Math.sqrt(a*a+n*n)},c.prototype.Di=function(a){var n=this.sa-this.qa,o=this.oa-this.ma;return Math.sqrt(n*n+o*o)<=a},c.prototype.Qn=function(){return!1},c.prototype.jg=function(){var a=new h.h;return a.vc(this.xc(),this.ac()),a},c.XO=function(a,n){return new c(a.x,a.y,n.x,n.y)},c.prototype.dn=function(a){a.Pa(),a.kg(this.description);var n=new h.l;this.A(n),a.Yo(n),n=1;for(var o=this.description.Ba;n<o;n++)for(var u=this.description.qd(n),p=h.ua.Wa(u);n<p;n++){var f=this.Vg(u,0);a.setInterval(u,0,f)}},c.prototype.A=function(a){a.L(this.sa,this.oa,this.qa,this.ma),a.normalize()},c.prototype.Ro=function(a){a.Pa(),a.$b(this.sa,this.oa,this.Pd(0,1,0)),a.$b(this.qa,this.ma,this.Pd(1,1,0))},c.prototype.Pc=function(a){if(a instanceof h.Ed){this.wc();var n=new h.h;n.x=this.sa,n.y=this.oa,a.Gh(n,n),this.sa=n.x,this.oa=n.y,n.x=this.qa,n.y=this.ma,a.Gh(n,n),this.qa=n.x,this.ma=n.y}else this.wc(),(n=new h.Od).x=this.sa,n.y=this.oa,n.z=this.Pd(0,1,0),n=a.gp(n),this.sa=n.x,this.oa=n.y,this.vn(0,1,0,n.z),n.x=this.qa,n.y=this.ma,n.z=this.Pd(1,1,0),n=a.gp(n),this.qa=n.x,this.ma=n.y,this.vn(1,1,0,n.z)},c.prototype.Ja=function(){return new c(this.description)},c.prototype.Sx=function(a,n){return(this.qa-a-(this.sa-a))*(this.ma-n+(this.oa-n))*.5},c.prototype.ux=function(a){return a*this.Rb()},c.prototype.HG=function(a){return a/this.Rb()},c.prototype.xF=function(a){return h.mc.jq(this.sa,this.qa,a)},c.prototype.$Q=function(a){return h.mc.jq(this.oa,this.ma,a)},c.prototype.fl=function(a,n){var o=new h.hg;return this.dh(a,n,o),o.get()},c.prototype.dh=function(a,n,o){if(o==null)throw h.i.O();o.Qr(),(o=o.get()).kg(this.description);var u=new h.h;this.ic(a,u),o.TB(u.x,u.y),this.ic(n,u),o.Sl(u.x,u.y),u=1;for(var p=this.description.Ba;u<p;u++)for(var f=this.description.Fd(u),m=h.ua.Wa(f),w=0;w<m;w++){var x=this.Vc(a,f,w);o.SB(f,w,x),x=this.Vc(n,f,w),o.IB(f,w,x)}},c.prototype.Vc=function(a,n,o){if(n==0)return o==0?this.ic(a).x:this.ic(a).y;switch(h.ua.gz(n)){case 0:return .5>a?this.yv(n,o):this.jv(n,o);case 1:var u=this.yv(n,o);return n=this.jv(n,o),h.mc.jq(u,n,a);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},c.prototype.fe=function(a,n){var o=this.qa-this.sa,u=this.ma-this.oa,p=o*o+u*u;return p==0?.5:(a=((a.x-this.sa)*o+(a.y-this.oa)*u)/p,n||(0>a?a=0:1<a&&(a=1)),a)},c.prototype.fq=function(a,n,o,u){if(a){if((a=this.ma-this.oa)==0)return n==this.ma?-1:0;if(0>(n=(n-this.oa)/a)||1<n)return 0;o!=null&&(o[0]=this.xF(n))}else{if((a=this.qa-this.sa)==0)return n==this.qa?-1:0;if(0>(n=(n-this.sa)/a)||1<n)return 0;o!=null&&(o[0]=this.$Q(n))}return u!=null&&(u[0]=n),1},c.prototype.Me=function(a,n){var o=this.ma-this.oa;return o==0?a==this.ma?n:NaN:(a=(a-this.oa)/o,n=this.xF(a),a==1&&(n=this.qa),n)},c.prototype.tu=function(a,n,o){return 0<=this.sp(a.x,a.y,n,o)},c.prototype.xi=function(a,n,o){return 0<=this.sp(a,n,o,!0)},c.prototype.ss=function(a,n){return this.tu(a,n,!1)},c.prototype.lI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.sa){var a=this.sa;this.sa=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=0;for(var n=this.description.Qq-2;a<n;a++){var o=this.la[a];this.la[a]=this.la[a+n],this.la[a+n]=o}}},c.prototype.wu=function(a,n){(n=h.h.construct(a,n)).sub(this.ac());var o=new h.h;return o.vc(this.xc(),this.ac()),(a=o.yi(n))>(n=8881784197001252e-31*(Math.abs(o.x*n.y)+Math.abs(o.y*n.x)))?-1:a<-n?1:0},c.prototype.sp=function(a,n,o,u){var p=this.sa,f=this.oa,m=a-p,w=n-f;if((m=Math.sqrt(m*m+w*w))<=Math.max(o,6661338147750939e-31*m))return u&&m==0?NaN:0;if(m=a-this.qa,w=n-this.ma,(m=Math.sqrt(m*m+w*w))<=Math.max(o,6661338147750939e-31*m))return u&&m==0?NaN:1;if(m=this.qa-this.sa,w=this.ma-this.oa,0<(u=Math.sqrt(m*m+w*w))){var x=1/u,E=a-p,T=n-f,A=E*(m*=x)+T*(w*=x),P=17763568394002505e-31*(Math.abs(E*m)+Math.abs(T*w)),F=m;if(m=-w,w=F,A<-(P=Math.max(o,P))||A>u+P)return NaN;if(Math.abs(E*m+T*w)<=Math.max(o,17763568394002505e-31*(Math.abs(E*m)+Math.abs(T*w)))&&(.5>=(m=h.P.Sk(A*x,0,1))?(w=this.sa+(this.qa-this.sa)*m,u=this.oa+(this.ma-this.oa)*m):(w=this.qa-(this.qa-this.sa)*(1-m),u=this.ma-(this.ma-this.oa)*(1-m)),h.h.Jy(w,u,a,n)<=o)){if(.5>m){if(h.h.Jy(w,u,p,f)<=o)return 0}else if(h.h.Jy(w,u,this.qa,this.ma)<=o)return 1;return m}}return NaN},c.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.zM(a))},c.prototype.lD=function(a,n,o){var u=o?this.sa:this.qa;o=o?this.oa:this.ma;var p=new h.h;return p.x=a.qa-u,p.y=a.ma-o,!(n.Sh(p)>6661338147750939e-31*n.$C(p))||(p.x=a.sa-u,p.y=a.oa-o,n.Sh(p)<=6661338147750939e-31*n.$C(p))},c.prototype.kD=function(a){var n=new h.h;return n.x=this.qa-this.sa,n.y=this.ma-this.oa,!!this.lD(a,n,!1)&&(n.Uq(),!!this.lD(a,n,!0))},c.HM=function(a,n){var o=a.wu(n.sa,n.oa),u=a.wu(n.qa,n.ma);return!(0>o&&0>u||0<o&&0<u)&&(o=n.wu(a.sa,a.oa),u=n.wu(a.qa,a.ma),!(0>o&&0>u||0<o&&0<u)&&((o=a.Rb())>(u=n.Rb())?a.kD(n):n.kD(a)))},c.FM=function(a,n,o){var u=h.h.construct(NaN,NaN),p=a.qa-a.sa,f=a.ma-a.oa,m=n.qa-n.sa,w=n.ma-n.oa,x=m*f-p*w;if(x==0)return u;var E=8881784197001252e-31*(Math.abs(m*f)+Math.abs(p*w)),T=n.sa-a.sa,A=n.oa-a.oa,P=m*A-T*w,F=P/x,j=Math.abs(x);return F<-(m=(8881784197001252e-31*(Math.abs(m*A)+Math.abs(T*w))*j+E*Math.abs(P))/(x*x)+2220446049250313e-31*Math.abs(F))||F>1+m||(m=(w=p*A-T*f)/x)<-(p=(8881784197001252e-31*(Math.abs(p*A)+Math.abs(T*f))*j+E*Math.abs(w))/(x*x)+2220446049250313e-31*Math.abs(m))||m>1+p||(F=h.P.Sk(F,0,1),p=h.P.Sk(m,0,1),f=a.ic(F),x=n.ic(p),(E=new h.h).vc(f,x),E.length()>o&&(E.add(f,x),E.scale(.5),F=a.fe(E,!1),p=n.fe(E,!1),a=a.ic(F),n=n.ic(p),a.sub(n),a.length()>o)||u.na(F,p)),u},c.IM=function(a,n,o,u){var p=0;if((a.sa==n.sa&&a.oa==n.oa||a.sa==n.qa&&a.oa==n.ma)&&(p++,!u))return 1;if(a.qa==n.sa&&a.ma==n.oa||a.qa==n.qa&&a.ma==n.ma){if(++p==2)return 2;if(!u)return 1}return n.xi(a.sa,a.oa,o)||n.xi(a.qa,a.ma,o)||a.xi(n.sa,n.oa,o)||a.xi(n.qa,n.ma,o)?1:u&&p!=0||c.HM(a,n)==0?0:1},c.Yx=function(a,n,o,u,p,f){var m=0,w=a.sp(n.sa,n.oa,f,!1),x=a.sp(n.qa,n.ma,f,!1),E=n.sp(a.sa,a.oa,f,!1),T=n.sp(a.qa,a.ma,f,!1);return isNaN(w)||(u!=null&&(u[m]=w),p!=null&&(p[m]=0),o!=null&&(o[m]=h.h.construct(n.sa,n.oa)),m++),isNaN(x)||(u!=null&&(u[m]=x),p!=null&&(p[m]=1),o!=null&&(o[m]=h.h.construct(n.qa,n.ma)),m++),m==2||isNaN(E)||w==0&&E==0||x==0&&E==1||(u!=null&&(u[m]=0),p!=null&&(p[m]=E),o!=null&&(o[m]=h.h.construct(a.sa,a.oa)),m++),m==2||isNaN(T)||w==1&&T==0||x==1&&T==1||(u!=null&&(u[m]=1),p!=null&&(p[m]=T),o!=null&&(o[m]=h.h.construct(n.qa,n.ma)),m++),0<m?(m==2&&u!=null&&u[0]>u[1]&&(a=u[0],u[0]=u[1],u[1]=a,p!=null&&(u=p[0],p[0]=p[1],p[1]=u),o!=null&&(p=h.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=p)),m):(m=c.FM(a,n,f),isNaN(m.x)?0:(o!=null&&(o[0]=a.ic(m.x)),u!=null&&(u[0]=m.x),p!=null&&(p[0]=m.y),1))},c.prototype.ZF=function(){return 0},c.prototype.pp=function(){},c.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},c}(h.MC);h.zb=L}(X||(X={})),function(h){var L=function(){function b(){this.Lm=[],this.za=-1}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var c=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),c}return this.Lm=null},b.prototype.RX=function(c){this.Lm.push(c)},b.prototype.qe=function(){},b}();h.aL=L}(X||(X={})),function(h){var L;(L=h.ML||(h.ML={}))[L.enumFillRuleOddEven=0]="enumFillRuleOddEven",L[L.enumFillRuleWinding=1]="enumFillRuleWinding";var b=function(c){function a(n,o){var u=c.call(this)||this;if(u.yf=!1,u.Gq=null,u.uq=0,u.tq=0,u.Cj=null,u.Og=!1,u.nb=null,u.mb=null,u.Se=null,u.Nj=null,u.Td=null,u.vq=0,u.gb=0,u.zq=0,o===void 0)u.yf=n,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=h.ee.og();else{if(o==null)throw h.i.O();u.yf=n,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=o}return u.Cj=null,u.gb=0,u}return ai(a,c),a.prototype.vm=function(){return 0<this.vq},a.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.kg(this.description)},a.prototype.rx=function(n,o){var u=new h.h;u.x=n,u.y=o,this.Nt(u)},a.prototype.Nt=function(n){this.Xx(),this.Gq.Db(n),this.Og=!0},a.prototype.nf=function(n){if(n.B())throw h.i.O();this.Ll(n.description),this.Xx(),n.copyTo(this.Gq),this.Og=!0},a.prototype.Rx=function(){var n=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=h.Zc.Qh(2),this.nb.write(0,0),this.mb=h.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),n++);var o=this.xa;this.nb.write(this.nb.size-1,this.xa+n),this.fm(o+n),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(o,this.Gq),this.Og=!1)},a.prototype.Aj=function(n,o){this.Rx(),this.Db(this.xa-1,n,o)},a.prototype.Ei=function(n){this.Rx(),this.Db(this.xa-1,n)},a.prototype.lineTo=function(n){this.Rx(),this.It(this.xa-1,n)},a.prototype.uU=function(n){if(this.wc(),this.yf)throw h.i.Ra();var o=this.ea();if(n>o)throw h.i.Ra();if(this.ec(n)){if(this.mb==null)throw h.i.Ra();var u=this.xa,p=this.Ca(n),f=this.Wc(n);this.fm(this.xa+1),this.rc();for(var m=0,w=this.description.Ba;m<w;m++)if(this.Aa[m]!=null){var x=h.ua.Wa(this.description.Fd(m));this.Aa[m].Nn(x*f,this.Aa[m],x*p,x,!0,1,x*u)}for(;o>n;o--)u=this.nb.read(o),this.nb.write(o,u+1);this.mb.EE(n,1)}},a.prototype.Cp=function(){if(this.vx(),n===void 0){this.Og=!1;var n=this.ea()-1}var o=this.mb.read(n);this.mb.write(n,1|o),this.Se!=null&&(n=this.Wc(n)-1,this.Se.write(n,1),this.Nj.write(n,-1))},a.prototype.ec=function(n){return(1&this.mb.read(n))!=0},a.prototype.On=function(n){if(this.ec(n))return!0;var o=this.Ca(n);return!(o>(n=this.Wc(n)-1))&&(o=this.Oa(o),n=this.Oa(n),o.rb(n))},a.prototype.Av=function(n){return(2&this.mb.read(n))!=0},a.prototype.oc=function(n,o){if(this.Ll(n.description),n.K()!=322)throw h.i.Ra();var u=new h.Ta;(o||this.B())&&(n.Uo(u),this.nf(u)),n.Qo(u),this.lineTo(u)},a.prototype.vp=function(n){var o=this.xa==0;this.rx(n.v,n.G),this.Aj(n.v,n.H),this.Aj(n.C,n.H),this.Aj(n.C,n.G),this.Cp(),this.Og=!1,o&&this.Nf(256,!1)},a.prototype.bd=function(n,o){if(!n.B()){for(var u=this.xa==0,p=new h.Ta(this.description),f=0;4>f;f++)n.If(o?4-f-1:f,p),f==0?this.nf(p):this.lineTo(p);this.Cp(),this.Og=!1,u&&!o&&this.Nf(256,!1)}},a.prototype.add=function(n,o){for(var u=0;u<n.ea();u++)this.addPath(n,u,!o)},a.prototype.addPath=function(n,o,u){this.wf(-1,n,o,u)},a.prototype.$k=function(n,o){this.Cz(n,o)},a.prototype.Fr=function(n,o,u,p,f){if(f||this.ea()!=0||(f=!0),0>o&&(o=n.ea()-1),o>=n.ea()||0>u||0>p||p>n.tv(o))throw h.i.ga("index out of bounds");if(p!=0){var m=n.ec(o)&&u+p==n.tv(o);if(!m||p!=1){if(this.Og=!1,this.Ll(n.description),u=n.Ca(o)+u+1,f&&(p++,u--),m&&p--,m=this.xa,this.fm(this.xa+p),this.rc(),f){if(p==0)return;this.nb.add(this.xa),f=n.mb.read(o),f&=-5,this.yf&&(f|=1),this.mb.write(this.mb.size-1,f),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);f=0;for(var w=this.description.Ba;f<w;f++){var x=this.description.qd(f),E=h.ua.Wa(x),T=n.description.Qf(x);0>T||n.Aa[T]==null?this.Aa[f].Mn(E*m,h.ua.te(x),p*E,E*m):this.Aa[f].Nn(E*m,n.Aa[T],E*u,p*E,!0,E,E*m)}if(this.vm()||n.Av(o))throw h.i.Ra();this.Qc(1993)}}},a.prototype.iJ=function(){for(var n=0,o=this.ea();n<o;n++)this.wW(n)},a.prototype.wW=function(n){if(this.rc(),n>=this.ea())throw h.i.O();var o=this.Ca(n),u=this.Ka(n);n=this.ec(n)?1:0;for(var p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=h.ua.Wa(this.description.Fd(p));this.Aa[p].pi(m*(o+n),m*(u-n),m)}this.Qc(1993)},a.prototype.ar=function(n){this.rc();var o=this.ea();if(0>n&&(n=o-1),n>=o)throw h.i.O();for(var u=this.Ca(n),p=this.Ka(n),f=0,m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var w=h.ua.Wa(this.description.Fd(f));this.Aa[f].Fn(w*u,w*p,w*this.xa)}for(u=n+1;u<=o;u++)f=this.nb.read(u),this.nb.write(u-1,f-p);if(this.mb==null)for(u=n+1;u<=o;u++)n=this.mb.read(u),this.mb.write(u-1,n);this.nb.resize(o),this.mb.resize(o),this.xa-=p,this.Rg-=p,this.Qc(1993)},a.prototype.wf=function(n,o,u,p){if(o==this||u>=o.ea())throw h.i.O();var f=this.ea();if(n>f)throw h.i.O();0>n&&(n=f),0>u&&(u=o.ea()-1),this.Og=!1,this.Ll(o.description),o.rc();var m=o.Ca(u),w=o.Ka(u),x=this.xa,E=o.ec(u)&&!p?1:0;this.fm(this.xa+w),this.rc();for(var T=n<f?this.Ca(n):x,A=0,P=this.description.Ba;A<P;A++){var F=this.description.Fd(A),j=o.description.Qf(F),H=h.ua.Wa(F);0<=j&&o.Aa[j]!=null?(E!=0&&this.Aa[A].Nn(T*H,o.Aa[j],H*m,H,!0,H,H*x),this.Aa[A].Nn((T+E)*H,o.Aa[j],H*(m+E),H*(w-E),p,H,H*(x+E))):this.Aa[A].Mn(T*H,h.ua.te(F),H*w,H*x)}for(this.nb.add(x+w),p=f;p>=n+1;p--)m=this.nb.read(p-1),this.nb.write(p,m+w);for(o.Av(u),this.mb.add(0),p=f-1;p>=n+1;p--)f=this.mb.read(p),f&=-5,this.mb.write(p+1,f);f=o.DR().read(u),f&=-5,this.yf&&(f|=1),this.mb.write(n,f)},a.prototype.Cz=function(n,o){var u=-1,p=this.ea();if(u>p)throw h.i.O();0>u&&(u=p),this.Og=!1;var f=this.xa;this.fm(this.xa+o),this.rc();var m=u<p?this.Ca(u):f;if(n!=null)this.Aa[0].Dz(2*m,n,0,o,!0,2*f);else{var w=h.ua.te(0);this.Aa[0].Mn(2*m,w,2*o,2*f)}n=1;for(var x=this.description.Ba;n<x;n++){w=this.description.qd(n);var E=h.ua.Wa(w);w=h.ua.te(w),this.Aa[n].Mn(m*E,w,E*o,E*f)}for(this.nb.add(this.xa),f=p;f>=u+1;f--)m=this.nb.read(f-1),this.nb.write(f,m+o);for(this.mb.add(0),f=p-1;f>=u+1;f--)o=this.mb.read(f),o&=-5,this.mb.write(f+1,o);this.yf&&this.mb.write(u,1)},a.prototype.kG=function(n,o,u){var p=-1;if(0>n&&(n=this.ea()),n>this.ea()||p>this.Ka(n)||u>o.length)throw h.i.ga("index out of bounds");if(u!=0){n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ka(n)),this.rc();var f=this.xa;this.fm(this.xa+u),this.rc();for(var m=0,w=this.description.Ba;m<w;m++){var x=this.description.Fd(m),E=h.ua.Wa(x);this.Aa[m].Wt(E*(this.Ca(n)+p+u),(f-this.Ca(n)-p)*E,this.Aa[m],E*(this.Ca(n)+p),!0,E),m==0?this.Aa[m].pC(E*(this.Ca(n)+p),u,o,0,!0):this.Aa[m].Yj(h.ua.te(x),(this.Ca(n)+p)*E,u*E)}for(this.vm()&&(this.Se.Wt(this.Ca(n)+p+u,f-this.Ca(n)-p,this.Se,this.Ca(n)+p,!0,1),this.Nj.Wt(this.Ca(n)+p+u,f-this.Ca(n)-p,this.Nj,this.Ca(n)+p,!0,1),this.Se.Yj(1,this.Ca(n)+p,u),this.Nj.Yj(-1,this.Ca(n)+p,u)),n+=1,o=this.ea();n<=o;n++)this.nb.write(n,this.nb.read(n)+u)}},a.prototype.xf=function(n,o,u){var p=this.ea();if(0>n&&(n=this.ea()),n>=p||o>this.Ka(n))throw h.i.ga("index out of bounds");n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ka(n));var f=this.xa;this.fm(this.xa+1),this.rc();var m=this.Ca(n);this.Aa[0].xj(2*(m+o),u,2*f),u=1;for(var w=this.description.Ba;u<w;u++){var x=this.description.Fd(u),E=h.ua.Wa(x);this.Aa[u].Mn(E*(m+o),h.ua.te(x),E,E*f)}for(n+=1;n<=p;n++)this.nb.write(n,this.nb.read(n)+1)},a.prototype.xB=function(n,o){var u=this.ea();if(0>n&&(n=u-1),n>=u||o>=this.Ka(n))throw h.i.ga("index out of bounds");this.rc();var p=this.Ca(n);0>o&&(o=this.Ka(n)-1),o=p+o,p=0;for(var f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=h.ua.Wa(this.description.Fd(p));this.Aa[p].Fn(m*o,m,m*this.xa)}for(;u>=n+1;u--)o=this.nb.read(u),this.nb.write(u,o-1);this.xa--,this.Rg--,this.Qc(1993)},a.prototype.oE=function(n,o,u,p){if(n=this.Ca(n)+o,(u=this.Ca(u)+p)<n||0>n||u>this.I()-1)throw h.i.O();o=0,(p=this.Ha()).Wb(n);do{for(;p.Ia()&&(n=p.ia(),p.xb()!=u);)o+=n=n.Rb();if(p.xb()==u)break}while(p.ab());return o},a.prototype.$N=function(n,o,u){if(o=this.Ca(n)+o,u=this.Ca(n)+u,0>o||u>this.I()-1)throw h.i.O();var p=this.Ha();if(o>u){if(!this.ec(n))throw h.i.O("cannot iterate across an open path");p.DB()}var f=n=0;p.Wb(o);do f+=n,n=p.ia().Rb();while(p.xb()!=u);return f},a.prototype.mg=function(){return h.si.im(this,null)},a.prototype.DS=function(n,o,u){for(var p=n;p<u-1;p++)if(this.ec(p))throw h.i.O("cannot interpolate across closed paths");if((p=this.description.Ba)!=1){var f=this.oE(n,o,u,void 0);if(f!=0)for(var m=1;m<p;m++){var w=this.description.qd(m);if(h.ua.gz(w)!=2)for(var x=h.ua.Wa(w),E=0;E<x;E++)this.FS(w,n,o,u,f,E)}}},a.prototype.CS=function(n,o,u){var p=this.description.Ba;if(p!=1){var f=this.$N(n,o,u);if(f!=0)for(var m=1;m<p;m++){var w=this.description.qd(m);if(h.ua.gz(w)!=2)for(var x=h.ua.Wa(w),E=0;E<x;E++)this.ES(w,n,o,u,f,E)}}},a.prototype.FS=function(n,o,u,p,f,m){var w=this.Ha(),x=this.Ca(o)+u;p=this.Ca(p)+void 0,o=this.Vc(n,x,m),u=this.Vc(n,p,m);var E=o,T=0;w.Wb(x);do if(w.Ia()){if(w.ia(),w.xb()==p)break;this.setAttribute(n,w.xb(),m,E),w.ni();do{if(x=w.ia(),w.jk()==p)return;T+=x=x.Rb(),E=h.mc.jq(o,u,T/f),w.Pn()||this.setAttribute(n,w.jk(),m,E)}while(w.Ia())}while(w.ab())},a.prototype.ES=function(n,o,u,p,f,m){var w=this.Ha(),x=this.Ca(o)+u;if((o=this.Ca(o)+p)!=x){p=this.Vc(n,x,m),u=this.Vc(n,o,m);var E=0;w.Wb(x),w.DB(),x=p;do{var T=w.ia();this.setAttribute(n,w.xb(),m,x),E+=x=T.Rb(),x=h.mc.jq(p,u,E/f)}while(w.jk()!=o)}},a.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.qD()},a.prototype.Pc=function(n){n instanceof h.Ed?this.SD(n,-1):this.qN(n)},a.prototype.SD=function(n,o){if(!this.B()&&!n.isIdentity()){this.rc();var u=this.Aa[0],p=new h.h,f=new h.h;if(0>o){var m=this.vm(),w=0;o=this.xa}else m=this.Av(o),w=this.Ca(o),o=this.Wc(o);for(;w<o;w++){if(p.x=u.read(2*w),p.y=u.read(2*w+1),m){var x=this.Nj.read(w);if(0<=x)switch(7&this.Se.read(w)){case 2:f.x=this.Td.read(x),f.y=this.Td.read(x+1),n.Gh(f,f),this.Td.write(x,f.x),this.Td.write(x+1,f.y),f.x=this.Td.read(x+3),f.y=this.Td.read(x+4),n.Gh(f,f),this.Td.write(x+3,f.x),this.Td.write(x+4,f.y);break;case 4:throw h.i.Ra()}}n.Gh(p,p),u.write(2*w,p.x),u.write(2*w+1,p.y)}this.Qc(1993)}},a.prototype.qN=function(n){if(!this.B()){this.se(1),this.rc();for(var o=this.Aa[0],u=this.Aa[1],p=new h.Od,f=new h.Od,m=this.vm(),w=0;w<this.xa;w++){if(p.x=o.read(2*w),p.y=o.read(2*w+1),p.z=u.read(w),m){var x=this.Nj.read(w);if(0<=x)switch(7&this.Se.read(w)){case 2:f.x=this.Td.read(x),f.y=this.Td.read(x+1),f.z=this.Td.read(x+2),f=n.gp(f),this.Td.write(x,f.x),this.Td.write(x+1,f.y),this.Td.write(x+1,f.z),f.x=this.Td.read(x+3),f.y=this.Td.read(x+4),f.z=this.Td.read(x+5),f=n.gp(f),this.Td.write(x+3,f.x),this.Td.write(x+4,f.y),this.Td.write(x+5,f.z);break;case 4:throw h.i.Ra()}}p=n.gp(p),o.write(2*w,p.x),o.write(2*w+1,p.y),u.write(w,p.z)}this.Qc(1993)}},a.prototype.ey=function(){this.nb==null&&(this.nb=h.Zc.Qh(1,0),this.mb=h.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},a.prototype.pp=function(n){n.Og=!1,n.vq=this.vq,n.zq=this.zq,n.nb=this.nb!=null?h.ja.Cn(this.nb):null,n.mb=this.mb!=null?h.rn.Cn(this.mb):null,n.Nj=this.Nj!=null?h.ja.Cn(this.Nj):null,n.Se=this.Se!=null?h.rn.Cn(this.Se):null,n.Td=this.Td!=null?h.ce.Cn(this.Td):null,n.uq=this.uq,n.tq=this.tq,n.Cj=this.bk(1024)?null:this.Cj},a.prototype.Rb=function(){if(!this.bk(512))return this.uq;for(var n=this.Ha(),o=new h.Ex(0);n.ab();)for(;n.Ia();)o.add(n.ia().Rb());return this.uq=o.tm(),this.Nf(512,!1),o.tm()},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&c.prototype.Nb.call(this,n)))return!1;var o=this.ea();return!(o!=n.ea()||this.nb!=null&&!this.nb.Nb(n.nb,0,o+1)||this.zq!=n.zq||this.mb!=null&&!this.mb.Nb(n.mb,0,o))&&c.prototype.Nb.call(this,n)},a.prototype.Ha=function(){return new h.SL(this)},a.prototype.dy=function(n){if(c.prototype.dy.call(this,n),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Ap=function(n,o){if(c.prototype.Ap.call(this,n,o),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},a.prototype.Gv=function(n){return!!this.yf&&(this.bk(8)?(this.zu(),0<this.Cj.read(n)):(4&this.mb.read(n))!=0)},a.prototype.Kr=function(n){return this.yf?(this.zu(),this.Cj.read(n)):0},a.prototype.zu=function(){if(this.bk(1024)){var n=this.ea();this.Cj==null?this.Cj=new h.ce(n):this.Cj.size!=n&&this.Cj.resize(n),n=new h.Ex(0);for(var o=new h.Ex(0),u=new h.h,p=0,f=this.Ha();f.ab();){for(o.reset(),this.D(this.Ca(f.gb),u);f.Ia();)o.add(f.ia().Sx(u.x,u.y));n.add(o.tm());var m=p++;this.Cj.write(m,o.tm())}this.tq=n.tm(),this.Nf(1024,!1)}},a.prototype.zR=function(){if(this.yf){this.hm();for(var n=this.ea(),o=0;o<n;o++)4&this.mb.read(o)}},a.prototype.hm=function(){if(this.bk(8)){this.zu();var n=this.ea();(this.mb==null||this.mb.size<n)&&(this.mb=h.Zc.Or(n+1));for(var o=1,u=0;u<n;u++){var p=this.Cj.read(u);u==0&&(o=0<p?1:-1),0<p*o?this.mb.tJ(u,4):this.mb.EE(u,4)}this.Nf(8,!1)}},a.prototype.nz=function(n){var o=this.gb,u=this.ea();if(0<=o&&o<u){if(n<this.Wc(o)){if(n>=this.Ca(o))return o;o--}else o++;if(0<=o&&o<u&&n>=this.Ca(o)&&n<this.Wc(o))return this.gb=o}if(5>u){for(o=0;o<u;o++)if(n<this.Wc(o))return this.gb=o;throw h.i.ga("corrupted geometry")}for(o=0,--u;u>o;){var p=o+(u-o>>1);if(n<this.Ca(p))u=p-1;else{if(!(n>=(o=this.Wc(p))))return this.gb=p;o=p+1}}return this.gb=o},a.prototype.sz=function(){var n=this.I();if(!this.yf){n-=this.ea();for(var o=0,u=this.ea();o<u;o++)this.ec(o)&&n++}return n},a.prototype.tv=function(n){var o=this.Ka(n);return this.ec(n)||o--,o},a.prototype.Ja=function(){return new a(this.yf,this.description)},a.prototype.Eb=function(){return this.yf?2:1},a.prototype.K=function(){return this.yf?1736:1607},a.prototype.KJ=function(n){this.nb=n,this.Qc(16777215)},a.prototype.OR=function(){return this.vx(),this.Se},a.prototype.DR=function(){return this.vx(),this.mb},a.prototype.JJ=function(n){this.mb=n,this.Qc(16777215)},a.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Wc=function(n){return this.nb.read(n+1)},a.prototype.Ka=function(n){return this.nb.read(n+1)-this.nb.read(n)},a.prototype.Ca=function(n){return this.nb.read(n)},a.prototype.nu=function(n,o){this.Cb==null&&(this.Cb=new h.Vk),o=h.Mx.hW(o);var u=this.Cb.Gk;if(u!=null){if(!(u.Jk<n||o>u.KR()))return!0;this.Cb.sD(null)}return u=h.Mx.create(this,n,o),this.Cb.sD(u),!0},a.prototype.dc=function(){var n=c.prototype.dc.call(this);if(!this.Bc()){var o=this.ea();this.nb!=null&&this.nb.Bn(n,0,o+1),this.mb!=null&&this.mb.Bn(n,0,o)}return n},a.prototype.TF=function(n){return this.Se!=null?this.Se.read(n):1},a.prototype.cc=function(n,o,u){var p=this.nz(n);if(n==this.Wc(p)-1&&!this.ec(p))throw h.i.ga("index out of bounds");this.rc();var f=this.Se,m=1;if(f!=null&&(m=7&f.read(n)),m!==1)throw h.i.Ra();if(o.Qr(),o=o.get(),u?o.kg(h.ee.og()):o.kg(this.description),p=n==this.Wc(p)-1&&this.ec(p)?this.Ca(p):n+1,f=new h.h,this.D(n,f),o.Ec(f),this.D(p,f),o.Rc(f),!u)for(u=1,f=this.description.Ba;u<f;u++){m=this.description.Fd(u);for(var w=h.ua.Wa(m),x=0;x<w;x++){var E=this.Vc(m,n,x);o.SB(m,x,E),E=this.Vc(m,p,x),o.IB(m,x,E)}}},a.prototype.Tj=function(n,o){if(n>=this.ea())throw h.i.O();if(this.B())o.Pa();else{if(this.Av(n))throw h.i.ga("not implemented");var u=this.vb(0),p=new h.h,f=new h.l;f.Pa();var m=this.Ca(n);for(n=this.Wc(n);m<n;m++)u.uc(2*m,p),f.$b(p);o.L(f)}},a.prototype.hj=function(n){return this.Cb==null&&(this.Cb=new h.Vk),!(n==0||16>this.I())&&(n=h.ta.hE(this),this.Cb.QM(n),!0)},a.prototype.bM=function(){if(this.Cb==null&&(this.Cb=new h.Vk),this.Cb.Ao==null){this.Cb.rD(null);var n=h.ta.SN(this);this.Cb.rD(n)}},a.prototype.Zo=function(n){this.zq=n},a.prototype.Jn=function(){return this.zq},a.prototype.xD=function(n){if(this==n)throw h.i.ga("MultiPathImpl.add");for(var o=this.ea(),u=0;u<n.ea();u++)this.addPath(n,u,!0),this.uU(o),o++},a.prototype.eO=function(n){var o=this.nz(n),u=this.Ca(o);if(u!=n){if(n>=(o=this.Wc(o))||n<u)throw h.i.ga("change_ring_start_point");for(var p=0,f=this.description.Ba;p<f;p++){var m=this.description.qd(p);m=h.ua.Wa(m),this.Aa[p].rotate(u*m,n*m,o*m)}}},a}(h.Fx);h.Wk=b}(X||(X={})),function(h){var L=function(b){function c(a){var n=b.call(this)||this;if(a!==void 0){if(a==null)throw h.i.O();n.description=a}else n.description=h.ee.og();return n.xa=0,n}return ai(c,b),c.prototype.Ja=function(){return new c(this.description)},c.prototype.add=function(a){this.resize(this.xa+1),this.Fh(this.xa-1,a)},c.prototype.Du=function(a,n){this.resize(this.xa+1);var o=new h.h;o.na(a,n),this.Db(this.xa-1,o)},c.prototype.Gd=function(a,n,o){if(o=0>o?a.I():o,0>n||n>a.I()||o<n)throw h.i.O();if(n!=o){this.Ll(a.description),o-=n;var u=this.xa;this.resize(this.xa+o),this.rc();for(var p=0,f=a.description.Ba;p<f;p++){var m=a.description.Fd(p),w=h.ua.Wa(m),x=this.vb(m);m=a.vb(m),x.Nn(u*w,m,n*w,o*w,!0,1,u*w)}}},c.prototype.BD=function(a,n){var o=a.length;if(n=0>n?o:n,0>o||0>n)throw h.i.O();if(n!=0){o=n-0,n=this.xa,this.resize(this.xa+o);for(var u=0;u<o;u++)this.Db(n+u,a[0+u])}},c.prototype.xB=function(a){if(0>a||a>=this.I())throw h.i.ga("index out of bounds");this.rc();for(var n=0,o=this.description.Ba;n<o;n++)if(this.Aa[n]!=null){var u=h.ua.Wa(this.description.Fd(n));this.Aa[n].Fn(u*a,u,u*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},c.prototype.resize=function(a){this.fm(a)},c.prototype.pp=function(){},c.prototype.Pa=function(){b.prototype.qD.call(this)},c.prototype.Pc=function(a){if(a instanceof h.Ed){if(this.B())return;this.rc();for(var n=this.Aa[0],o=new h.h,u=0;u<this.xa;u++)o.x=n.read(2*u),o.y=n.read(2*u+1),a.Gh(o,o),n.write(2*u,o.x),n.write(2*u+1,o.y)}else{if(this.B())return;this.rc(),this.se(1),this.rc(),n=this.Aa[0],o=this.Aa[1];var p=new h.Od;for(u=0;u<this.xa;u++){p.x=n.read(2*u),p.y=n.read(2*u+1),p.z=o.read(u);var f=a.gp(p);n.write(2*u,f.x),n.write(2*u+1,f.y),o.write(u,f.z)}}this.Qc(1993)},c.prototype.Eb=function(){return 0},c.prototype.K=function(){return 550},c.prototype.He=function(){return 0},c.prototype.Rb=function(){return 0},c.prototype.Nb=function(a){return a==this||a instanceof c&&b.prototype.Nb.call(this,a)},c.prototype.dW=function(a,n){var o=this.xa;if(o=Math.min(o,n+1e3),0>n||n>=this.xa||o<n||a.length!=1e3)throw h.i.O();var u=o-n,p=[];for(this.vb(0).Xw(2*n,2*u,p,0,!0),n=0;n<u;n++)a[n]=h.h.construct(p[2*n],p[2*n+1]);return o},c.prototype.Zx=function(){},c.prototype.ey=function(){},c.prototype.nu=function(){return!1},c.prototype.hj=function(){return!1},c.prototype.mg=function(){return null},c}(h.Fx);h.de=L}(X||(X={})),function(h){var L;(L=h.cL||(h.cL={}))[L.NotDetermined=0]="NotDetermined",L[L.Structure=1]="Structure",L[L.DegenerateSegments=2]="DegenerateSegments",L[L.Clustering=3]="Clustering",L[L.Cracking=4]="Cracking",L[L.CrossOver=5]="CrossOver",L[L.RingOrientation=6]="RingOrientation",L[L.RingOrder=7]="RingOrder",L[L.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",L[L.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",L[L.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var b=function(){function c(a,n,o){a===void 0?(this.Lj=0,this.Lo=this.Ko=-1):(this.Lj=a,this.Ko=n,this.Lo=o)}return c.prototype.Yt=function(a){this.Lj=a.Lj,this.Ko=a.Ko,this.Lo=a.Lo},c}();h.Nd=b}(X||(X={})),function(h){h.P=function(){function L(){}return L.assert=function(b){if(b===!1)throw h.i.AK()},L.WJ=function(b){return isNaN(b)?NaN:b===0?b:0<b?1:-1},L.Hu=function(b){var c;c===void 0&&(c=0);for(var a=[],n=0;n<b;n++)a[n]=L.lg(2,c);return a},L.lg=function(b,c){c===void 0&&(c=0);for(var a=[],n=0;n<b;n++)a[n]=c;return a},L.bv=function(b,c){var a,n;for(a===void 0&&(a=0),n===void 0&&(n=b.length-1);a<=n;a++)b[a]=c},L.Sk=function(b,c,a){return b<c?c:b>a?a:b},L.Vh=function(b,c){var a=5381;return((a=((a=((a=c!==void 0?(c<<5)+c+(255&b):(a<<5)+a+(255&b))<<5)+a+(b>>8&255))<<5)+a+(b>>16&255))<<5)+a+(b>>24&255)&2147483647},L.wj=function(){throw Error("Not Implemented")},L.WA=function(b){return L.TT(b)+12345&2147483647},L.QG=function(b){var c=32,a=b%L.Px|0,n=b/L.Px|0;return(c&=63)==0?b:(32>c?(b=a>>>c|n<<32-c,c=n>>c):(b=n>>c-32,c=0<=n?0:-1),c*L.Px+(b>>>0))},L.TT=function(b){var c=1103515245,a=65535&c;return((c-a)*(b|=0)|0)+(a*b|0)|0},L.truncate=function(b){return 0>b?-1*Math.floor(Math.abs(b)):Math.floor(b)},L.MAX_SAFE_INTEGER=Math.pow(2,53)-1,L.MIN_SAFE_INTEGER=-L.MAX_SAFE_INTEGER,L.PC=65536,L.Px=L.PC*L.PC,L}()}(X||(X={})),function(h){var L;(L=h.wL||(h.wL={}))[L.Project=0]="Project",L[L.Union=1]="Union",L[L.Difference=2]="Difference",L[L.Proximity2D=3]="Proximity2D",L[L.Relate=4]="Relate",L[L.Equals=5]="Equals",L[L.Disjoint=6]="Disjoint",L[L.Intersects=7]="Intersects",L[L.Within=8]="Within",L[L.Contains=9]="Contains",L[L.Crosses=10]="Crosses",L[L.Touches=11]="Touches",L[L.Overlaps=12]="Overlaps",L[L.Buffer=13]="Buffer",L[L.Distance=14]="Distance",L[L.Intersection=15]="Intersection",L[L.Clip=16]="Clip",L[L.Cut=17]="Cut",L[L.DensifyByLength=18]="DensifyByLength",L[L.DensifyByAngle=19]="DensifyByAngle",L[L.LabelPoint=20]="LabelPoint",L[L.GeodesicBuffer=21]="GeodesicBuffer",L[L.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",L[L.ShapePreservingDensify=23]="ShapePreservingDensify",L[L.GeodeticLength=24]="GeodeticLength",L[L.GeodeticArea=25]="GeodeticArea",L[L.Simplify=26]="Simplify",L[L.SimplifyOGC=27]="SimplifyOGC",L[L.Offset=28]="Offset",L[L.Generalize=29]="Generalize",L[L.SymmetricDifference=30]="SymmetricDifference",L[L.ConvexHull=31]="ConvexHull",L[L.Boundary=32]="Boundary",L[L.SimpleRelation=33]="SimpleRelation";var b=function(){function c(){}return c.prototype.K=function(){return null},c.prototype.xn=function(){},c.prototype.Ku=function(){return!1},c}();h.Ge=b}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 13},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(p=new h.$c(a),this.W(p,n,[o],!1,u).next()):u===!0?(o=new h.vC(a,n,o,!1,p),h.Ih.local().W(o,n,p)):new h.vC(a,n,o,!1,p)},c.instance=null,c}(h.Ge);h.uC=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o,u){this.za=-1,this.Sd=c,this.Vz=a,this.Es=n,this.kT=new h.l,this.kT.Pa(),this.fo=-1,this.Vb=u}return b.prototype.next=function(){for(var c;(c=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.fo+1<this.Es.length&&this.fo++,this.buffer(c,this.Es[this.fo]);return null},b.prototype.Ma=function(){return this.za},b.prototype.buffer=function(c,a){return h.BK.buffer(c,a,this.Vz,NaN,96,this.Vb)},b.prototype.qe=function(){},b}();h.vC=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 16},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.fL(a,n,o,u)},c.instance=null,c}(h.Ge);h.eL=L}(X||(X={})),function(h){var L=function(){function b(c,a,n){if(this.za=-1,c==null)throw h.i.O();this.aa=a,this.zk=c,this.ra=h.ta.Xd(n,a,!1)}return b.prototype.next=function(){var c;return(c=this.zk.next())!=null?(this.za=this.zk.Ma(),h.Vd.clip(c,this.aa,this.ra,0)):null},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();h.fL=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 31},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){return a instanceof h.ba?h.xC.lE(a):new h.xC(n,a,o)},c.instance=null,c}(h.Ge);h.wC=L}(X||(X={})),function(h){var L=function(){function b(c,a,n){if(this.oA=new h.au,this.za=-1,a==null)throw h.i.O();this.XG=c,this.Jc=!1,this.zk=a,this.Vb=n}return b.prototype.next=function(){if(this.XG){if(!this.Jc){var c=this.YN(this.zk);return this.Jc=!0,c}return null}if(!this.Jc){if((c=this.zk.next())!=null)return this.za=this.zk.Ma(),b.lE(c);this.Jc=!0}return null},b.prototype.Ma=function(){return this.za},b.prototype.YN=function(c){for(var a;(a=c.next())!=null;)this.oA.Ib(a);return this.oA.XQ()},b.prototype.qe=function(){if(!this.Jc){if(!this.XG)throw h.i.ga("Invalid call for non merging convex hull.");var c=this.zk.next();if(c==null)throw h.i.ga("Expects a non-null geometry.");this.oA.Ib(c)}},b.lE=function(c){if(b.NS(c))return c;var a=c.K();if(h.Wk.zd(a))return(a=new h.Ua(c.description)).oc(c,!0),a;if(a==550&&c.I()==2){var n=new h.Ta;return a=new h.Ua(c.description),c.we(0,n),a.nf(n),c.we(1,n),a.lineTo(n),a}return h.au.LO(c)},b.NS=function(c){if(c.B())return!0;var a=c.K();return a==33||a==197||!h.Wk.zd(a)&&(a==550?c.I()==1:a==1607?c.ea()==1&&2>=c.I():c.ea()==1&&(2>=c.I()||h.au.DG(c,0)))},b}();h.xC=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 17},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return new h.hL(a,n,o,u,p)},c.instance=null,c}(h.Ge);h.gL=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o,u){if(this.Uf=null,a==null||n==null)throw h.i.ga("invalid argument");this.hT=c,this.hA=a,this.fH=n,c=h.ta.ov(a,n),this.ra=h.ta.Xd(o,c,!0),this.eH=-1,this.nd=u}return b.prototype.Ma=function(){return 0},b.prototype.next=function(){return this.LQ(),++this.eH<this.Uf.length?this.Uf[this.eH]:null},b.prototype.LQ=function(){if(this.Uf==null)switch(this.Uf=[],this.hA.K()){case 1607:this.NQ();break;case 1736:this.MQ()}},b.prototype.NQ=function(){var c=new h.Ua,a=new h.Ua,n=new h.Ua;this.Uf.push(c),this.Uf.push(a);var o=[];h.FK.DK(this.hT,this.hA,this.fH,this.ra,o,this.nd);for(var u=0;u<o.length;u++){var p=o[u];if(p.ct==0)c.add(p.Y,!1);else if(p.ct==1||p.ct==2)a.add(p.Y,!1);else if(p.ct==3)this.Uf.push(p.Y);else{if(p.ct!=4)throw h.i.ga("internal");n.add(p.Y,!1)}}n.B()||c.B()&&a.B()&&!(3<=this.Uf.length)||this.Uf.push(n),c.B()&&a.B()&&3>this.Uf.length&&(this.Uf.length=0)},b.prototype.MQ=function(){var c=new h.ja(0),a=new h.hd,n=a.VE(),o=a.Ib(this.hA),u=a.Ib(this.fH),p=new h.Hg;try{p.Gt(a,this.ra,this.nd),p.fl(n,o,u,c);var f=a.Ke(o),m=new h.Ea,w=new h.Ea;for(this.Uf.length=0,this.Uf.push(m),this.Uf.push(w),o=0;o<c.size;o++){var x=new h.hd,E=x.Ib(f),T=x.Ib(a.Ke(c.get(o)));p.fr(x,this.nd);var A=p.Cv(E,T),P=x.Ke(A);if(!P.B()){var F=a.EF(c.get(o),n);F==2?m.add(P,!1):F==1?w.add(P,!1):this.Uf.push(P);var j=new h.hd;E=j.Ib(f),T=j.Ib(a.Ke(c.get(o))),p.fr(j,this.nd),f=j.Ke(p.km(E,T))}}!f.B()&&0<c.size&&this.Uf.push(f),m.B()&&w.B()&&(this.Uf.length=0)}finally{p.Wg()}},b.prototype.qe=function(){},b}();h.hL=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){if(a instanceof h.ba)return a=new h.$c(a),this.W(a,n,o).next();if(0>=n)throw h.i.O();return new h.iL(a,n,o)},c.instance=null,c}(h.Ge);h.Zl=L}(X||(X={})),function(h){var L=function(){function b(c,a){this.za=-1,this.Sd=c,this.Rs=a}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){var c;return(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.HP(c)):null},b.prototype.HP=function(c){if(c.B()||1>c.Eb())return c;var a=c.K();if(a==1736||a==1607)return this.Iy(c);if(h.ba.zd(a))return this.JP(c);if(a==197)return this.IP(c);throw h.i.Ra()},b.prototype.JP=function(c){if(c.Rb()<=this.Rs)return c;var a=new h.Ua(c.description);return a.oc(c,!0),this.Iy(a)},b.prototype.IP=function(c){var a=new h.Ea(c.description);a.bd(c,!1);var n=new h.l;return c.A(n),c=n.da(),n.S()<=this.Rs&&c<=this.Rs?a:this.Iy(a)},b.prototype.Iy=function(c){for(var a=c.Ja(),n=c.Ha();n.ab();)for(var o=!0;n.Ia();){var u=n.ia();if(u.K()!=322)throw h.i.ga("not implemented");var p=n.Pn(),f=u.Rb();if(f>this.Rs){var m=Math.ceil(f/this.Rs);f=new h.Ta(c.description),o&&(u.Uo(f),a.nf(f));var w=o=1/m,x=0;for(--m;x<m;x++)u.Vw(w,f),a.lineTo(f),w+=o;p?a.Cp():(u.Qo(f),a.lineTo(f))}else p?a.Cp():a.oc(u,o);o=!1}return a},b.prototype.qe=function(){},b}();h.iL=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.K=function(){return 2},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u).next()):new h.jL(a,n,o,u)},c.km=function(a,n,o,u){if(a.B()||n.B())return a;var p=a.Eb(),f=n.Eb();if(p>f)return a;var m=a.K(),w=n.K(),x=new h.l,E=new h.l,T=new h.l;a.A(x),n.A(E),T.L(x),T.$b(E);var A=(T=h.ta.Xd(o,T,!0))*Math.sqrt(2)*1.00001,P=new h.l;if(P.L(x),P.X(A,A),!P.isIntersecting(E))return a;if(p==1&&f==2)return c.CV(a,n,w,o,u);if(m==33)switch(h.Wk.zd(w)?(o=new h.Ua(n.description),o.oc(n,!0)):o=n,w){case 1736:return c.PU(a,o,T);case 1607:return c.QU(a,o,T);case 550:return c.NU(a,o,T);case 197:return c.MU(a,o,T);case 33:return c.OU(a,o,T);default:throw h.i.O()}else if(m==550)switch(w){case 1736:return c.fU(a,n,T);case 197:return c.dU(a,n,T);case 33:return c.eU(a,n,T)}return h.Hg.km(a,n,o,u)},c.PU=function(a,n,o){return h.jd.EG(n,a,o)==0?a:a.Ja()},c.QU=function(a,n,o){var u=a.D();n=n.Ha();for(var p=o*Math.sqrt(2)*1.00001,f=p*p,m=new h.l;n.ab();)for(;n.Ia();){var w=n.ia();if(w.A(m),m.X(p,p),m.contains(u)){if(w.ss(u,o))return a.Ja();var x=w.ac();if(h.h.zc(u,x)<=f||(x=w.xc(),h.h.zc(u,x)<=f))return a.Ja()}}return a},c.NU=function(a,n,o){var u=n.vb(0);n=n.I();var p=a.D(),f=new h.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var m=0;m<n;m++)if(u.uc(2*m,f),h.h.zc(f,p)<=o)return a.Ja();return a},c.MU=function(a,n,o){var u=new h.l;return n.A(u),u.X(o,o),n=a.D(),u.contains(n)?a.Ja():a},c.OU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D();return n=n.D(),h.h.zc(u,n)<=o?a.Ja():a},c.fU=function(a,n,o){var u=new h.l;n.A(u),u.X(o,o);for(var p=a.I(),f=!1,m=[],w=0;w<p;w++)m[w]=!1;var x=new h.h;for(w=0;w<p;w++)a.D(w,x),u.contains(x)&&h.jd.Zd(n,x,o)!=0&&(f=!0,m[w]=!0);if(!f)return a;for(n=a.Ja(),w=0;w<p;w++)m[w]||n.Gd(a,w,w+1);return n},c.dU=function(a,n,o){var u=new h.l;n.A(u),u.X(o,o),n=a.I();var p=!1;o=[];for(var f=0;f<n;f++)o[f]=!1;var m=new h.h;for(f=0;f<n;f++)a.D(f,m),u.contains(m)&&(p=!0,o[f]=!0);if(!p)return a;for(u=a.Ja(),f=0;f<n;f++)o[f]||u.Gd(a,f,f+1);return u},c.eU=function(a,n,o){var u=a.vb(0),p=a.I(),f=n.D(),m=new h.h,w=!1;n=[];for(var x=0;x<p;x++)n[x]=!1;for(o=(x=o*Math.sqrt(2)*1.00001)*x,x=0;x<p;x++)u.uc(2*x,m),h.h.zc(m,f)<=o&&(w=!0,n[x]=!0);if(!w)return a;for(u=a.Ja(),x=0;x<p;x++)n[x]||u.Gd(a,x,x+1);return u},c.CV=function(a,n,o,u,p){var f=new h.Hh;a.dn(f);var m=new h.l;return n.A(m),f.$b(m),f.X(.1*f.S(),.1*f.da()),(m=new h.Ea).bd(f,!1),o==1736?m.add(n,!0):m.bd(n,!0),h.Xk.local().W(a,m,u,p)},c.instance=null,c}(h.Ge);h.lp=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o){this.vs=a==null,this.za=-1,this.Sd=c,this.Vz=n,this.nT=a.next(),this.Vb=o}return b.prototype.next=function(){return this.vs?null:(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.lp.km(c,this.nT,this.Vz,this.Vb)):null;var c},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();h.jL=L}(X||(X={})),function(h){var L=function(){function c(a){this.nd=a,this.Dj=new h.l,this.Dj.Pa(),this.qh=new h.l,this.qh.Pa()}return c.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=a,a=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=a,a=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=a,a=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=a},c.prototype.ZP=function(a,n){if(this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.hu("user_canceled");var o=!this.Dj.isIntersecting(this.qh);return h.ba.Ic(a.K())&&h.ba.Ic(n.K())?a.I()>n.I()?this.aE(a,n,o):(this.Pt(),a=this.aE(n,a,o),this.Pt(),a):a.K()==550&&h.ba.Ic(n.K())?(a=this.bE(n,a,o),this.Pt(),a):n.K()==550&&h.ba.Ic(a.K())?this.bE(a,n,o):a.K()==550&&n.K()==550?a.I()>n.I()?this.cE(a,n):(this.Pt(),a=this.cE(n,a),this.Pt(),a):0},c.prototype.aE=function(a,n,o){var u=a.Ha(),p=n.Ha(),f=new h.l,m=new h.l,w=17976931348623157e292;if(!o&&this.hY(a,n,u,p))return 0;for(;u.ab();)for(;u.Ia();)if((a=u.ia()).A(f),!(f.px(this.qh)>w)){for(;p.ab();)for(;p.Ia();)if((n=p.ia()).A(m),f.px(m)<w&&(n=a.ub(n,o),(n*=n)<w)){if(n==0)return 0;w=n}p.aj()}return Math.sqrt(w)},c.prototype.bE=function(a,n,o){var u=a.Ha(),p=new h.l,f=17976931348623157e292,m=new h.h,w=n.I();for(o=!o&&a.K()==1736;u.ab();)for(;u.Ia();){var x=u.ia();if(x.A(p),!(1<w&&p.px(this.qh)>f)){for(var E=0;E<w;E++){if(n.D(E,m),o&&h.jd.Zd(a,m,0)!=0)return 0;var T=x.fe(m,!1);if(m.sub(x.ic(T)),(T=m.Tk())<f){if(T==0)return 0;f=T}}o=!1}}return Math.sqrt(f)},c.prototype.cE=function(a,n){for(var o,u=17976931348623157e292,p=new h.h,f=new h.h,m=a.I(),w=n.I(),x=0;x<m;x++)if(a.D(x,p),!(1<w&&this.qh.cK(p)>u)){for(var E=0;E<w;E++)if(n.D(E,f),(o=h.h.zc(p,f))<u){if(o==0)return 0;u=o}}return Math.sqrt(u)},c.prototype.hY=function(a,n,o,u){if(a.K()==1736){for(;u.ab();)if(u.Ia()){var p=u.ia();if(h.jd.Zd(a,p.xc(),0)!=0)return!0}u.aj()}if(n.K()==1736){for(;o.ab();)if(o.Ia()&&(a=o.ia(),h.jd.Zd(n,a.xc(),0)!=0))return!0;o.aj()}return!1},c.prototype.im=function(a,n){return a.B()||n.B()?NaN:(a.A(this.Dj),n.A(this.qh),this.ZP(a,n))},c}(),b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return ai(a,c),a.prototype.W=function(n,o,u){if(n==null||o==null)throw h.i.O();if(n.B()||o.B())return NaN;var p=n.K(),f=o.K();if(p==33){if(f==33)return h.h.ub(n.D(),o.D());if(f==197)return u=new h.l,o.A(u),u.ub(n.D());(p=new h.de).add(n),n=p}else if(p==197){if(f==197)return f=new h.l,n.A(f),u=new h.l,o.A(u),u.ub(f);(p=new h.Ea).bd(n,!1),n=p}return f==33?((f=new h.de).add(o),o=f):f==197&&((f=new h.Ea).bd(o,!1),o=f),new L(u).im(n,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 14},a.instance=null,a}(h.Ge);h.kL=b}(X||(X={})),function(h){var L=function(){function b(c,a,n,o){this.tH=c,this.xH=a,this.nd=o,this.UG=n}return b.prototype.next=function(){var c=this.tH.next();return c==null?null:this.tC(c)},b.prototype.Ma=function(){return this.tH.Ma()},b.prototype.tC=function(c){var a=c.K();if(h.ba.Sn(a))return c;if(a==197)return(a=new h.Ea(c.description)).bd(c,!1),this.tC(a);if(c.B())return c;if(c==null)throw h.i.Ra();a=c.Ja();for(var n=new h.zb,o=0,u=c.ea();o<u;o++)this.NK(c,o,a,n);return a},b.prototype.NK=function(c,a,n,o){if(!(2>c.Ka(a))){var u=c.Ca(a),p=c.Wc(a)-1,f=c.vb(0),m=c.ec(a),w=new h.ja(0);w.Jb(c.Ka(a)+1);var x=new h.ja(0);for(x.Jb(c.Ka(a)+1),w.add(m?u:p),w.add(u),u=new h.h;1<w.size;){var E=w.Gc();w.Jf();var T=w.Gc();c.D(E,u),o.Ec(u),c.D(T,u),o.Rc(u),0<=(T=this.MK(o,u,f,E,T,p))?(w.add(T),w.add(E)):x.add(E)}if(m||x.add(w.get(0)),x.size==w.size)n.addPath(c,a,!0);else if(2<=x.size&&(!this.UG||x.size!=2||!(m||h.h.ub(c.Oa(x.get(0)),c.Oa(x.get(1)))<=this.xH))){for(a=new h.Ta,o=0,p=x.size;o<p;o++)c.we(x.get(o),a),o==0?n.nf(a):n.lineTo(a);m&&(this.UG||x.size!=2||n.lineTo(a),n.Cp())}}},b.prototype.MK=function(c,a,n,o,u,p){var f=u-1;for(u<=o&&(f=p),p=u=-1,o+=1;o<=f;o++){n.uc(2*o,a);var m=a.x,w=a.y;c.ic(c.fe(a,!1),a),a.x-=m,a.y-=w,(m=a.length())>this.xH&&m>p&&(u=o,p=m)}return u},b.prototype.qe=function(){},b}();h.lL=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 29},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.lL(a,n,o,u)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.yC=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 21},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p,f,m,w){return a instanceof h.ba?(w=new h.$c(a),this.W(w,n,o,[u],p,f,!1,m).next()):m===!0?(o=new h.AC(a,n,o,u,p,!1,!1,w),h.Ih.local().W(o,n,w)):new h.AC(a,n,o,u,p,!1,!1,w)},c.instance=null,c}(h.Ge);h.zC=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o,u,p,f,m){if(p)throw h.i.Fe();if(a==null)throw h.i.O();this.za=-1,this.Os=c,this.vg=a,this.Ae=n,this.Es=o,this.ao=u,this.fo=-1,this.Vb=m,this.lT=new h.l,this.lT.Pa()}return b.prototype.next=function(){for(var c;(c=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.fo+1<this.Es.length&&this.fo++,this.UQ(c,this.Es[this.fo]);return null},b.prototype.Ma=function(){return this.za},b.prototype.UQ=function(c,a){return h.PK.buffer(c,this.vg,this.Ae,a,this.ao,this.Vb)},b.prototype.qe=function(){},b}();h.AC=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 24},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){if(n==null)throw h.i.O();if(a.B()||1>a.Eb())return 0;if(o==4)throw h.i.Fe();var u=h.cb.tc(n),p=h.cb.xv(u),f=h.cb.gv(u);p*=2-p;var m=u.Id().ci,w=a.K();if(w==1736||w==197)var x=a.mg();else h.ba.zd(w)?(x=new h.Ua(a.description)).oc(a,!0):x=a;if(u.Nb(n)==0){if(h.cb.Xc(n)){x=h.Jh.nj(x,n),w==1607&&x==a&&(x=h.ba.ig(a)),a=new h.Oc,h.cb.ih(n).en(a),w=0;for(var E=x.I();w<E;w++){var T=x.Oa(w);T.x=h.Jh.an(T.x,a),x.Db(w,T)}}a=x.Ja(),x=h.Jh.QI(n,u,x,a)?a:h.cb.Bh(x,n,u)}return this.bQ(x,o,f,p,m)},c.prototype.bQ=function(a,n,o,u,p){var f=new h.ha(0),m=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var w=a.ia(),x=w.ac();w=w.xc(),x.scale(p),w.scale(p),h.kb.xd(o,u,x.x,x.y,w.x,w.y,f,null,null,n),m+=f.u}return m},c.instance=null,c}(h.Ge);h.oL=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u,p).next()):new h.nL(a,o,u,n,-1,-1,p)},c.instance=null,c}(h.Ge);h.mL=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o,u,p){if(0<p||n!=4&&0<u)throw h.i.Fe();if(a==null)throw h.i.O();this.za=-1,this.Os=c,this.vg=a,this.Ae=n,this.vT=o,this.uT=u}return b.prototype.next=function(){for(var c;(c=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(c);return null},b.prototype.Ma=function(){return this.za},b.prototype.Uy=function(c){return h.ej.Sr(c,this.vg,this.Ae,this.vT,this.uT,this.Vb)},b.prototype.qe=function(){},b}();h.nL=L}(X||(X={})),function(h){(function(L){L[L.Unknown=0]="Unknown",L[L.Contains=1]="Contains",L[L.Within=2]="Within",L[L.Equals=3]="Equals",L[L.Disjoint=4]="Disjoint",L[L.Touches=8]="Touches",L[L.Crosses=16]="Crosses",L[L.Overlaps=32]="Overlaps",L[L.NoThisRelation=64]="NoThisRelation",L[L.Intersects=1073741824]="Intersects",L[L.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.XK||(h.XK={})),h.qL=function(){function L(){}return L.fW=function(b,c){var a=b.K(),n=c.K();if(h.ba.zj(a)){var o=b.Cb;if(o!=null&&(o=o.Gk)!=null){if(n==33){var u=c.D();o=o.To(u.x,u.y)}else u=new h.l,c.A(u),o=o.So(u);if(o==1)return 1;if(o==0)return 4}}if(h.ba.zj(n)&&(o=c.Cb)!=null&&(o=o.Gk)!=null){if(a==33?(b=b.D(),o=o.To(b.x,b.y)):(c=new h.l,b.A(c),o=o.So(c)),o==1)return 2;if(o==0)return 4}return 0},L}()}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.K=function(){return 15},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u,p).next()):p===void 0?new h.BC(a,n,o,u,-1):new h.BC(a,n,o,u,p)},c.prototype.xn=function(a,n,o){this.Ku(a)&&(n=h.ta.mj(n,a,!1),a.hj(o)||a.nu(n,o))},c.prototype.Ku=function(a){return h.Mx.tE(a)},c.instance=null,c}(h.Ge);h.Xk=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o,u){if(this.vs=a==null,this.za=-1,this.Sd=c,this.vg=n,this.Pe=a.next(),this.Fj=this.Pe.K(),this.Vb=o,this.Hi=u,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw h.i.O("bad dimension mask")}return b.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var c=this.Bw.next();if(c!=null)return c;this.Bw=null}for(;(c=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?c=this.Fa(c):(this.Bw=this.IS(c),c=this.Bw.next()),c;return null},b.prototype.Ma=function(){return this.za},b.prototype.Fa=function(c){var a=this.tK(c);if(a!=null)return a;a=h.ta.ov(this.Pe,c);var n=h.ta.Xd(this.vg,a,!0);a=new h.l,this.Pe.A(a);var o=new h.l;return c.A(o),a.X(2*n,2*n),a.Fa(o),a.X(100*n,100*n),n=h.Vd.clip(this.Pe,a,0,0),c=h.Vd.clip(c,a,0,0),h.Hg.Cv(c,n,this.vg,this.Vb)},b.prototype.JI=function(c,a,n){var o=0;if((1&a)!=0)n[0]==null&&(n[0]=new h.de(c)),o++;else for(var u=0;u<n.length-1;u++)n[u]=n[u+1];if((2&a)!=0)n[o]==null&&(n[o]=new h.Ua(c)),o++;else for(u=o;u<n.length-1;u++)n[u]=n[u+1];if((4&a)!=0)n[o]==null&&(n[o]=new h.Ea(c)),o++;else for(u=o;u<n.length-1;u++)n[u]=n[u+1];if(o!=3){for(c=[],u=0;u<o;u++)c[u]=n[u];return new h.$c(c)}return new h.$c(n)},b.prototype.IS=function(c){var a=this.tK(c);if(a!=null){var n=[null,null,null];return n[a.Eb()]=a,this.JI(c.description,this.Hi,n)}a=h.ta.ov(this.Pe,c),n=h.ta.Xd(this.vg,a,!0),a=new h.l,this.Pe.A(a),a.X(2*n,2*n);var o=new h.l;return c.A(o),a.Fa(o),a.X(100*n,100*n),n=h.Vd.clip(this.Pe,a,0,0),a=h.Vd.clip(c,a,0,0),n=h.Hg.Kz(a,n,this.vg,this.Vb),this.JI(c.description,this.Hi,n)},b.prototype.tK=function(c){var a=h.ta.ov(c,this.Pe),n=h.ta.Xd(this.vg,a,!0);a=c.K();var o=c.B(),u=this.Pe.B();if(!(u=o||u)){u=new h.l,c.A(u);var p=new h.l;this.Pe.A(p),p.X(2*n,2*n),u=!u.isIntersecting(p)}if(!u)if((p=h.qL.fW(this.Pe,c))==4)u=!0;else{if((2&p)!=0)return this.Pe;if((1&p)!=0)return c}if(u)return(n=h.ba.uf(a))<(u=h.ba.uf(this.Fj))?b.BB(c,o):n>u||n==0&&a==550&&this.Fj==33?this.hJ():b.BB(c,o);if((this.Hi==-1||this.Hi==4)&&a==197&&this.Fj==197)return n=this.Pe,a=new h.l,c.A(a),o=new h.l,n.A(o),a.Fa(o),n=new h.Hh,c.copyTo(n),n.Yo(a),n;if(a==197&&h.ba.uf(this.Fj)==0||this.Fj==197&&h.ba.uf(a)==0)return o=a==197?c:this.Pe,c=a==197?this.Pe:c,a=new h.l,o.A(a),h.Vd.clip(c,a,n,0);if(h.ba.uf(a)==0&&0<h.ba.uf(this.Fj)||0<h.ba.uf(a)&&h.ba.uf(this.Fj)==0){if(n=h.ta.mj(this.vg,c,!1),a==550||a==33)return h.Hg.tG(c,this.Pe,n);if(this.Fj==550||this.Fj==33)return h.Hg.tG(this.Pe,c,n);throw h.i.Ra()}return this.Hi!=-1&&this.Hi!=2||a!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||a!=1736||this.Fj!=1607?null:this.qK(this.Pe,c):this.qK(c,this.Pe)},b.prototype.qK=function(c,a){var n=c,o=a,u=h.ta.mj(this.vg,a,!1),p=new h.l;o.A(p);var f=new h.l;n.A(f),f.X(2*u,2*u),p.Fa(f),p.X(10*u,10*u),n=c=h.Vd.clip(c,p,0,0),f=new h.ja(0);var m=-1,w=o.Cb;if(w!=null){var x=w.Gk;if(x!=null){m=0,f.Jb(n.I()+n.ea());for(var E=new h.l,T=n.Ha();T.ab();)for(;T.Ia();){T.ia().A(E);var A=x.So(E);A==1?f.add(1):A==0?f.add(0):(f.add(-1),m++)}}}if(5<a.I()&&(w=(o=a=h.Vd.clip(a,p,0,0)).Cb),0>m&&(m=n.sz()),p=n.I()+o.I(),m*o.I()>Math.log(p)*p*4)return null;p=null,m=o.Ha(),w!=null&&w.Gb!=null&&(p=w.Gb),p==null&&20<o.I()&&(p=h.ta.hE(o)),c=c.Ja(),o=null,w=n.Ha(),x=[0,0,0,0,0,0,0,0,0],E=new h.ce(0),T=new h.hg,A=-1;for(var P=0,F=0,j=0<f.size,H=-1;w.ab();){H=w.gb;var W=0;for(A=-1,P=0;w.Ia();){var G=j?h.P.truncate(f.get(F)):-1;F++;var ee=w.ia();if(0>G){if(p!=null)for(o==null?o=p.oR(ee,u):o.Vo(ee,u),G=o.next();G!=-1;G=o.next()){m.Wb(p.ka(G)),G=m.ia();var ae=ee.Fa(G,null,x,null,u);for(G=0;G<ae;G++)E.add(x[G])}else for(m.aj();m.ab();)for(;m.Ia();)for(G=m.ia(),ae=ee.Fa(G,null,x,null,u),G=0;G<ae;G++)E.add(x[G]);if(0<E.size){E.Wd(0,E.size,function(ze,Fe){return ze-Fe});var le=0;E.add(1),ae=-1,G=0;for(var ie=E.size;G<ie;G++){var be=E.get(G);if(be!=le){var Ie=!1;if(le!=0||be!=1?(ee.dh(le,be,T),le=T.get()):(le=ee,Ie=!0),2<=W){if(c.Fr(n,H,A,P,W==3),this.KD(a,le.ac(),u)!=1&&this.LD(a,le,u)!=1)return null;c.oc(le,!1),W=1,P=0}else switch(ae=this.LD(a,le,u),ae){case 1:Ie?2>W?(A=w.xb()-n.Ca(H),P=1,W=W==0?3:2):P++:(c.oc(le,W==0),W=1);break;case 0:W=0,A=-1,P=0;break;default:return null}le=be}}}else{if(0>(G=this.KD(a,ee.ac(),u)))return null;G==1?(2>W&&(A=w.xb()-n.Ca(H),W=W==0?3:2),P++):(A=-1,P=0)}E.clear(!1)}else G!=0&&G==1&&(W==0?(W=3,A=w.xb()-n.Ca(H)):W==1?(W=2,A=w.xb()-n.Ca(H)):P++)}2<=W&&(c.Fr(n,H,A,P,W==3),A=-1)}return c},b.prototype.KD=function(c,a,n){return h.Fg.ym(c,a,n)},b.prototype.LD=function(c,a,n){var o=a.ac();a=a.xc();var u=h.Fg.ym(c,o,n),p=h.Fg.ym(c,a,n);return u==1&&p==0||u==0&&p==1?-1:u==0||p==0?0:u==1||p==1?1:((u=new h.h).add(o,a),u.scale(.5),(c=h.Fg.ym(c,u,n))==0?0:c==1?1:-1)},b.BB=function(c,a){return a?c:c.Ja()},b.prototype.hJ=function(){return this.sH==null&&(this.sH=this.Pe.Ja()),this.sH},b.prototype.qe=function(){},b}();h.BC=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 28},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p,f,m){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u,p,f,m).next()):new h.rL(a,n,o,u,p,f,m)},c.instance=null,c}(h.Ge);h.CC=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o,u,p,f){this.za=-1,this.Sd=c,this.Oj=a,this.La=n,this.Mi=o,this.wA=u,this.oH=p,this.nd=f}return b.prototype.next=function(){var c=this.Sd.next();return c!=null?(this.za=this.Sd.Ma(),this.dL(c)):null},b.prototype.Ma=function(){return this.za},b.prototype.dL=function(c){var a=0>=this.oH?h.ta.mj(this.Oj,c,!1):this.oH;return h.CK.W(c,this.La,this.Mi,this.wA,a,this.nd)},b.prototype.qe=function(){},b}();h.rL=L}(X||(X={})),function(h){var L;(L=h.HK||(h.HK={}))[L.clipToDomainOnly=1]="clipToDomainOnly",L[L.clipWithHorizon=2]="clipWithHorizon",L[L.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return ai(a,c),a.prototype.K=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.W=function(n,o,u){return n instanceof h.ba?(n=new h.$c(n),this.W(n,o,u).next()):new h.sL(n,o,u)},a.prototype.transform=function(n,o,u,p){return h.du.transform(n,o,u,p,!0)},a.prototype.St=function(n,o,u,p){return h.du.St(n,o,u,p)},a.instance=null,a}(h.Ge);h.Gx=b}(X||(X={})),function(h){var L=function(){function b(c,a,n){this.za=-1,this.Sd=c,this.ET=a,this.nd=n}return b.prototype.next=function(){var c=this.Sd.next();return c!=null?(this.za=this.Sd.Ma(),h.du.Bh(c,this.ET,this.nd)):null},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();h.sL=L}(X||(X={})),function(h){var L=function(){function c(){}return c.prototype.reset=function(){this.rh=this.yk=-1,this.ws=this.mq=!1},c.prototype.uQ=function(a,n,o){for(a.Wb(n,o);a.Ia();){var u=a.ia();if((u=u.Rb())!=0)return a.xb()}for(a.Wb(n,o);a.zz();)if((u=(u=a.ni()).Rb())!=0)return a.xb();return-1},c.prototype.vQ=function(a,n){for(a.Wb(n,-1);a.zz();)if(a.ni().Rb()!=0)return a.xb();return-1},c.prototype.tQ=function(a,n){for(a.Wb(n,-1),a.ia();a.Ia();)if(a.ia().Rb()!=0)return a.xb();return-1},c.prototype.sQ=function(a,n,o,u){if(this.yk=this.uQ(n,o,u),this.yk!=-1){n.Wb(this.yk,-1);var p=n.ia(),f=p.ic(p.fe(a,!1));if(o=h.h.zc(f,a),(u=new h.h).N(f),u.sub(p.ac()),(f=new h.h).N(a),f.sub(p.ac()),this.mq=0>u.yi(f),this.rh=this.tQ(n,this.yk),this.rh!=-1){n.Wb(this.rh,-1);var m=(p=n.ia()).fe(a,!1);m=p.ic(m);var w=h.h.zc(m,a);w>o?this.rh=-1:(u.N(m),u.sub(p.ac()),f.N(a),f.sub(p.ac()),this.ws=0>u.yi(f))}this.rh==-1&&(this.rh=this.vQ(n,this.yk),this.rh!=-1&&(n.Wb(this.rh,-1),m=(p=n.ia()).fe(a,!1),m=p.ic(m),(w=h.h.zc(m,a))>o?this.rh=-1:(u.N(m),u.sub(p.ac()),f.N(a),f.sub(p.ac()),this.ws=0>u.yi(f),a=this.yk,this.yk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}},c.prototype.XN=function(a,n,o,u,p){return o=o.Ha(),this.sQ(a,o,u,p),this.yk!=-1&&this.rh==-1?this.mq:this.yk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(o.Wb(this.yk,-1),a=o.ia().jg(),o.Wb(this.rh,-1),n=o.ia().jg(),0<=a.yi(n)):n},c}(),b=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return ai(a,c),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 3},a.prototype.iz=function(n,o,u){var p;if(p===void 0&&(p=!1),n.B())return new h.bm;o=o.D();var f=n,m=n.K();switch(m==197&&((f=new h.Ea).bd(n,!1),m=1736),m){case 33:return this.rI(f,o);case 550:return this.dI(f,o);case 1607:case 1736:return this.UT(f,o,u,p);default:throw h.i.ga("not implemented")}},a.prototype.jz=function(n,o){if(n.B())return new h.bm;o=o.D();var u=n,p=n.K();switch(p==197&&((u=new h.Ea).bd(n,!1),p=1736),p){case 33:return this.rI(u,o);case 550:case 1607:case 1736:return this.dI(u,o);default:throw h.i.ga("not implemented")}},a.prototype.kz=function(n,o,u,p){if(0>p)throw h.i.O();if(n.B())return[];o=o.D();var f=n,m=n.K();switch(m==197&&((f=new h.Ea).bd(n,!1),m=1736),m){case 33:return this.LU(f,o,u,p);case 550:case 1607:case 1736:return this.lU(f,o,u,p);default:throw h.i.ga("not implemented")}},a.prototype.UT=function(n,o,u,p){if(n.K()==1736&&u&&(u=new h.l,n.A(u),u=h.ta.Xd(null,u,!1),(p?h.jd.Zd(n,o,0):h.jd.Zd(n,o,u))!=0)){var f=new h.bm(o,0,0);return p&&f.QJ(!0),f}var m=n.Ha();f=new h.h;for(var w=u=-1,x=17976931348623157e292,E=0;m.ab();)for(;m.Ia();){var T=m.ia();T=T.ic(T.fe(o,!1));var A=h.h.zc(T,o);A<x?(E=1,f=T,u=m.xb(),w=m.gb,x=A):A==x&&E++}return f=new h.bm(f,u,Math.sqrt(x)),p&&(m.Wb(u,w),T=m.ia(),p=0>h.h.Wq(o,T.ac(),T.xc()),1<E&&((E=new L).reset(),p=E.XN(o,p,n,u,w)),f.QJ(p)),f},a.prototype.rI=function(n,o){return n=n.D(),o=h.h.ub(n,o),new h.bm(n,0,o)},a.prototype.dI=function(n,o){for(var u=n.vb(0),p=n.I(),f=n=0,m=0,w=17976931348623157e292,x=0;x<p;x++){var E=new h.h;u.uc(2*x,E);var T=h.h.zc(E,o);T<w&&(f=E.x,m=E.y,n=x,w=T)}return(o=new h.bm).by(f,m,n,Math.sqrt(w)),o},a.prototype.LU=function(n,o,u,p){return p==0?[]:(u*=u,n=n.D(),(o=h.h.zc(n,o))<=u?(u=[],(p=new h.bm).by(n.x,n.y,0,Math.sqrt(o)),u[0]=p):u=[],u)},a.prototype.lU=function(n,o,u,p){if(p==0)return[];var f=n.vb(0),m=n.I();n=[],u*=u;for(var w=0;w<m;w++){var x=f.read(2*w),E=f.read(2*w+1),T=o.x-x,A=o.y-E;(T=T*T+A*A)<=u&&((A=new h.bm).by(x,E,w,Math.sqrt(T)),n.push(A))}return o=n.length,n.sort(function(P,F){return P.La<F.La?-1:P.La==F.La?0:1}),p>=o||(n.length=p),n.slice(0)},a.instance=null,a}(h.Ge);h.Hx=b}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 4},c.prototype.W=function(a,n,o,u,p){return h.cm.sB(a,n,o,u,p)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Ku=function(a){return h.Xt.ry(a)},c.prototype.xn=function(a,n,o){h.Xt.wD(a,n,o)},c.instance=null,c}(h.Ge);h.tL=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 33},c.prototype.W=function(a,n,o,u,p){return a===1073741824?!h.vd.tB(n,o,u,4,p):h.vd.tB(n,o,u,a,p)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Ku=function(a){return h.Xt.ry(a)},c.prototype.xn=function(a,n,o){h.Xt.wD(a,n,o)},c.instance=null,c}(h.Ge);h.fj=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o){if(this.nd=o,this.iT=n,this.za=-1,c==null)throw h.i.O();this.zk=c,this.Oj=a}return b.prototype.next=function(){var c;if((c=this.zk.next())!=null){if(this.za=this.zk.Ma(),this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.hu("user_canceled");return this.ZB(c)}return null},b.prototype.Ma=function(){return this.za},b.prototype.ZB=function(c){if(c==null)throw h.i.O();return h.Ix.XJ(c,this.Oj,this.iT,this.nd)},b.prototype.qe=function(){},b}();h.uL=L}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 26},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.uL(a,n,o,u)},c.prototype.ts=function(a,n,o,u,p){return 0<(u!==void 0?h.Ix.ts(a,n,o,u,p):h.Ix.ts(a,n,!1,null,o))},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.$l=L}(X||(X={})),function(h){var L=function(){function p(){this.Aq=0}return p.prototype.eX=function(f){this.Aq&=-2,this.Aq|=f?1:0},p.prototype.Yp=function(){return(1&this.Aq)!=0},p.prototype.RF=function(){return this.Yp()?0:1},p}();h.pY=L;var b=function(){},c=function(p,f,m,w){this.x=p,this.y=f,this.Ci=m,this.zm=w},a=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,m,w){return f=f.ka(w),m=this.Ce.lf.read(2*m),0>(m-=f=this.Ce.lf.read(2*f))?-1:0<m?1:0},p}(),n=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,m,w){m=this.Ce.hb[m],f=this.Ce.hb[f.ka(w)];var x=m.Yp(),E=f.Yp();w=m.ne.Me(this.Ce.No,0);var T=f.ne.Me(this.Ce.No,0);return w==T&&((x=.5*((w=Math.min(x?m.ne.oa:m.ne.ma,E?f.ne.oa:f.ne.ma))-this.Ce.No)+this.Ce.No)==this.Ce.No&&(x=w),w=m.ne.Me(x,0),T=f.ne.Me(x,0)),w<T?-1:w>T?1:0},p}(),o=function(){function p(f,m){this.SI=new h.h,this.parent=f,this.XR=m}return p.prototype.qr=function(f,m,w){var x=this.parent,E=this.XR;w.Wd(f,m,function(T,A){return x.Oh(T,A,E)})},p.prototype.bq=function(f){return f=this.parent.ii.get(f),this.parent.lf.uc(2*(f>>1),this.SI),this.SI.y+((1&f)!=0?this.parent.Qj:-this.parent.Qj)},p}(),u=function(){function p(f,m,w,x,E){this.hH=f.description,this.Y=f,this.Sg=m,this.Qj=h.ta.mj(this.Sg,f,!1),this.Co=h.ta.mj(this.Sg,f,!0),this.rA=w,this.gT=this.hH.Ba,this.hb=[],this.qo=[],this.oh=new h.kp,this.fb=new h.Zj,this.ke=new h.Nd,this.TG=this.sl=E}return p.prototype.XS=function(){return this.TG=!0,(!h.ba.Ic(this.Y.K())||this.AE()&&this.xE(!1))&&this.gO()?h.ba.Ic(this.Y.K())?this.jO()?this.Y.K()==1607?this.lO()?2:0:this.mO()?this.nO():0:0:2:0},p.prototype.eC=function(f,m){var w=this.lf.read(2*f);f=this.lf.read(2*f+1);var x=this.lf.read(2*m);m=this.lf.read(2*m+1);var E=!h.$t.Ev(w,f,x,m,this.Qj*this.Qj);return E||this.Y.Eb()!=0&&w==x&&f==m},p.prototype.AE=function(){for(var f=this.Y,m=f.yf?3:2,w=0,x=f.ea();w<x;w++)if(f.Ka(w)<m)return this.ke=new h.Nd(1,w,0),!1;return!0},p.prototype.xE=function(f){var m=this.Y,w=m.Ha(),x=m.hasAttribute(1);for(m=x?h.ta.qE(this.Sg,m,!1):0;w.ab();)for(;w.Ia();){var E=w.ia();if(!(E.Rb()>this.Qj)){if(f&&x){var T=E.yv(1,0);if(E=E.yv(1,0),Math.abs(E-T)>m)continue}return this.ke=new h.Nd(2,w.xb(),-1),!1}}return!0},p.prototype.gO=function(){var f=this.Y,m=null;h.ba.Ic(this.Y.K())&&(m=this.Y);var w=(this.TG||this.sl)&&m!=null,x=f.I();this.lf=f.vb(0),this.ii=new h.ja(0),this.ii.Jb(2*x),this.hi=new h.ja(0),this.hi.Jb(2*x),w&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(x));for(var E=f=0;E<x;E++)if(this.ii.add(2*E),this.ii.add(2*E+1),this.hi.add(2*E),this.hi.add(2*E+1),w){for(;E>=m.Wc(f);)f++;this.Hl.add(f)}for(new h.Zt().sort(this.hi,0,2*x,new o(this,w)),this.fb.clear(),this.fb.Wo(new a(this)),this.fb.Ee(x),m=0,x*=2;m<x;m++)if(w=this.hi.get(m),w=(f=this.ii.get(w))>>1,(1&f)==0){if(f=this.fb.addElement(w,-1),(E=this.fb.xe(f))!=-1&&!this.eC(this.fb.ka(E),w))return this.ke=new h.Nd(3,w,this.fb.ka(E)),!1;var T=this.fb.lb(f);if(T!=-1&&!this.eC(this.fb.ka(T),w))return this.ke=new h.Nd(3,w,this.fb.ka(T)),!1}else if(f=this.fb.search(w,-1),E=this.fb.xe(f),T=this.fb.lb(f),this.fb.wd(f,-1),E!=-1&&T!=-1&&!this.eC(this.fb.ka(E),this.fb.ka(T)))return this.ke=new h.Nd(3,this.fb.ka(E),this.fb.ka(T)),!1;return!0},p.prototype.jO=function(){return 10>this.Y.I()?this.hO():this.iO()},p.prototype.iO=function(){var f=new h.hd;f.Ib(this.Y);var m=new h.Nd;return!h.bu.eI(!1,f,this.Qj,m,this.nd)||(m.Ko=f.Va(m.Ko),m.Lo=f.Va(m.Lo),this.ke.Yt(m),!1)},p.prototype.hO=function(){var f=this.Y,m=f.Ha();for(f=f.Ha();m.ab();)for(;m.Ia();){var w=m.ia();if(!m.Rn()||!m.SS()){f.tW(m);do for(;f.Ia();){var x=f.ia();if((x=w.Br(x,this.Qj,!0))!=0)return this.ke=new h.Nd(x==2?5:4,m.xb(),f.xb()),!1}while(f.ab())}}return!0},p.prototype.mO=function(){var f=this.Y;this.hb.length=0,this.qo.length=0,this.$f=f.Ha(),this.$f.DB();var m=new h.ja(0);m.Jb(10);var w=NaN,x=0,E=0;for(f=2*f.I();E<f;E++){var T=this.hi.get(E);if((1&(T=this.ii.get(T)))==0){T>>=1;var A=this.lf.read(2*T),P=this.lf.read(2*T+1);if(m.size!=0&&(A!=w||P!=x)){if(!this.KI(m))return!1;m!=null&&m.clear(!1)}m.add(T),w=A,x=P}}return!!this.KI(m)},p.prototype.lO=function(){for(var f=this.Y,m=Array(f.ea()),w=0,x=f.ea();w<x;w++)m[w]=f.On(w);x=new b;var E=new h.h;w=this.hi.get(0);var T=(w=this.ii.get(w))>>1;this.lf.uc(2*T,E);var A=m[w=this.Hl.get(T)],P=f.Ca(w),F=f.Wc(w)-1;x.gl=T==P||T==F,x.jy=this.sl?!A&&x.gl:x.gl,x.Ci=w,x.x=E.x,x.y=E.y,x.zm=T;for(var j=new b,H=1,W=this.hi.size;H<W;H++)if(w=this.hi.get(H),(1&(w=this.ii.get(w)))==0){T=w>>1,this.lf.uc(2*T,E),(w=this.Hl.get(T))!=x.Ci&&(A=m[w],P=f.Ca(w),F=f.Wc(w)-1);var G=T==P||T==F,ee=this.sl?!A&&x.gl:x.gl;if(j.x=E.x,j.y=E.y,j.Ci=w,j.zm=T,j.jy=ee,j.gl=G,j.x==x.x&&j.y==x.y){if(this.sl){if(!(j.jy&&x.jy||j.Ci==x.Ci&&(j.gl||x.gl)))return this.ke=new h.Nd(8,j.zm,x.zm),!1}else if(!j.gl||!x.gl)return this.ke=new h.Nd(5,j.zm,x.zm),!1}w=x,x=j,j=w}return!0},p.prototype.DE=function(){for(var f=this.Y,m=[],w=-1,x=!1,E=0,T=f.ea();E<T;E++)f.Gv(E)&&(x=!1,w++,E<T-1&&(f.Gv(E+1)||(x=!0))),m[E]=x?w:-1;x=new h.h,E=this.hi.get(0);var A=(E=this.ii.get(E))>>1;this.lf.uc(2*A,x),E=this.Hl.get(A),w=new c(x.x,x.y,E,A,m[E]),f=[];var P=1;for(T=this.hi.size;P<T;P++)if(E=this.hi.get(P),(1&(E=this.ii.get(E)))==0){if(A=E>>1,this.lf.uc(2*A,x),E=this.Hl.get(A),(E=new c(x.x,x.y,E,A,m[E])).x==w.x&&E.y==w.y){if(E.Ci==w.Ci)return this.ke=new h.Nd(9,E.zm,w.zm),!1;0<=m[E.Ci]&&m[E.Ci]==m[w.Ci]&&(f.length!=0&&f[f.length-1]==w||f.push(w),f.push(E))}w=E}if(f.length==0)return!0;for(E=new h.kp(!0),h.P.bv(m,-1),x=-1,(P=new h.h).Sc(),w=0,T=f.length;w<T;w++){(A=f[w]).x==P.x&&A.y==P.y||(x=E.Rh(0),P.x=A.x,P.y=A.y);var F=m[A.Ci];F==-1&&(F=E.Rh(2),m[A.Ci]=F),E.addElement(F,x),E.addElement(x,F)}for((T=new h.ja(0)).Jb(10),w=E.je;w!=-1;w=E.lz(w))if((1&(f=E.JF(w)))==0&&(2&f)!=0){for(f=-1,T.add(w),T.add(-1);0<T.size;){if(x=T.Gc(),T.Jf(),P=T.Gc(),T.Jf(),(1&(A=E.JF(P)))!=0){f=(2&A)==0?x:P;break}for(E.XW(P,1|A),A=E.sc(P);A!=-1;A=E.lb(A))(F=E.getData(A))!=x&&(T.add(F),T.add(P))}if(f!=-1){for(E=-1,w=0,T=m.length;w<T;w++)if(m[w]==f){E=w;break}return this.ke=new h.Nd(10,E,-1),!1}}return!0},p.prototype.nO=function(){var f=this.Y;if(0>=f.He())return this.ke=new h.Nd(6,f.ea()==1?1:-1,-1),0;if(f.ea()==1)return this.sl&&!this.DE()?0:2;this.uo=h.ja.rf(f.ea(),0),this.DA=h.ja.rf(f.ea(),-1);for(var m=-1,w=0,x=0,E=f.ea();x<E;x++){var T=f.Kr(x);if(this.uo.write(x,0>T?0:256),0<T)m=x,w=T;else{if(T==0)return this.ke=new h.Nd(6,x,-1),0;if((0>m||w<Math.abs(T))&&(this.ke=new h.Nd(7,x,-1),this.sl))return 0;this.DA.write(x,m)}}for(this.et=f.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),E=f.I(),this.No=NaN,(f=new h.ja(0)).Jb(10),this.Sq=h.ja.rf(E,-1),this.Jw=h.ja.rf(E,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new h.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Wo(new n(this)),m=0,E*=2;0<this.et&&m<E;m++)if(w=this.hi.get(m),(1&(w=this.ii.get(w)))==0){if(w>>=1,(x=this.lf.read(2*w+1))!=this.No&&f.size!=0){if(!this.vt(f))return 0;f!=null&&f.clear(!1)}f.add(w),this.No=x}return 0<this.et&&!this.vt(f)?0:this.sl?this.ke.Lj==0&&this.DE()?2:0:this.ke.Lj==0?2:1},p.prototype.KI=function(f){if(f.size==1)return!0;for(var m=0,w=f.size;m<w;m++){var x=f.get(m);this.$f.Wb(x);var E=this.$f.ni();this.hb.push(this.Uu(E,x,this.$f.gb,!0)),this.$f.ia(),E=this.$f.ia(),this.hb.push(this.Uu(E,x,this.$f.gb,!1))}var T=this;for(this.hb.sort(function(F,j){return T.RP(F,j)}),(x=this.oh.je)==-1&&(x=this.oh.Rh(0)),this.oh.hn(this.hb.length),m=0,w=this.hb.length;m<w;m++)this.oh.addElement(x,m);m=!0;for(var A=w=-1;m&&(m=!1,(E=this.oh.sc(x))!=-1);)for(var P=this.oh.lb(E);P!=-1;)if(w=this.oh.getData(E),A=this.oh.getData(P),(w=this.hb[w].Jo)!=(A=this.hb[A].Jo))E=P,P=this.oh.lb(E);else if(m=!0,this.oh.kd(x,E),E=this.oh.xe(P),(P=this.oh.kd(x,P))==-1||E==-1)break;if(m=this.oh.ds(x),this.oh.FE(x),0<m)return this.ke=new h.Nd(5,w,A),!1;for(m=0,w=f.size;m<w;m++)this.pB(this.hb[m]);return this.hb.length=0,!0},p.prototype.vt=function(f){for(var m=0,w=f.size;m<w;m++){var x=f.get(m),E=this.Sq.read(x);if(E!=-1){var T=this.fb.ka(E);this.Bj.add(T),this.fb.wd(E,-1),this.pB(this.hb[T]),this.hb[T]=null,this.Sq.write(x,-1)}(E=this.Jw.read(x))!=-1&&(T=this.fb.ka(E),this.Bj.add(T),this.fb.wd(E,-1),this.pB(this.hb[T]),this.hb[T]=null,this.Jw.write(x,-1))}for(m=0,w=f.size;m<w;m++){if(x=f.get(m),this.$f.Wb(x),(E=this.$f.ni()).oa>E.ma){var A=this.$f.xb(),P=this.Uu(E,x,this.$f.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=P):(T=this.hb.length,this.hb.push(P)),E=this.fb.addElement(T,-1),this.Sq.read(A)==-1?this.Sq.write(A,E):this.Jw.write(A,E),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(E)}this.$f.ia(),(E=this.$f.ia()).oa<E.ma&&(A=this.$f.jk(),P=this.Uu(E,x,this.$f.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=P):(T=this.hb.length,this.hb.push(P)),E=this.fb.addElement(T,-1),this.Sq.read(A)==-1?this.Sq.write(A,E):this.Jw.write(A,E),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(E))}for(m=0,w=this.Qm.size;m<w&&0<this.et;m++)if(E=this.Qm.get(m),(3&this.uo.read(this.hb[this.fb.ka(E)].CA))==0){f=-1,x=this.fb.xe(E);var F=E;P=null,T=-1;for(var j=0;x!=-1&&(T=this.fb.ka(x),T=(P=this.hb[T]).CA,(3&(j=this.uo.read(T)))==0);)F=x,x=this.fb.xe(x);x==-1?(A=1,x=F):(f=(3&j)==1?T:this.DA.read(T),A=P.RF()!=0?0:1,x=this.fb.lb(x));do{if(T=this.fb.ka(x),T=(P=this.hb[T]).CA,(3&(F=this.uo.read(T)))==0){if(A!=P.RF())return this.ke=new h.Nd(6,T,-1),!1;if(F=252&F|(j=A==0||P.Yp()?2:1),this.uo.write(T,j),j==2&&this.ke.Lj==0&&this.DA.read(T)!=f&&(this.ke=new h.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&F)==1&&(f=T),F=x,x=this.fb.lb(x),A=A!=0?0:1}while(F!=E)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},p.prototype.Uu=function(f,m,w,x){if(f.K()!=322)throw h.i.Ra();return(f=this.mP(f)).Jo=m,f.CA=w,f.Aq=0,f.eX(x),f},p.prototype.mP=function(f){if(0<this.qo.length){var m=this.qo[this.qo.length-1];--this.qo.length,f.copyTo(m.ne)}else(m=new L).ne=h.MC.ig(f);return m},p.prototype.pB=function(f){f.ne.K()==322&&this.qo.push(f)},p.prototype.cU=function(){for(var f=this.Y.I(),m=new h.ja(0),w=0;w<f;w++)m.add(w);var x=this;for(m.Wd(0,f,function(E,T){return x.Qu(E,T)}),w=1;w<f;w++)if(this.Qu(m.get(w-1),m.get(w))==0)return this.ke=new h.Nd(3,m.get(w-1),m.get(w)),0;return 2},p.prototype.BV=function(){return this.AE()&&this.xE(!0)?2:0},p.prototype.gV=function(){return this.XS()},p.prototype.hU=function(){for(var f=this.Y.I(),m=new h.ja(0),w=0;w<f;w++)m.add(w);var x=this;m.Wd(0,f,function(F,j){return x.JO(F,j)});var E=Array(f);for(h.P.bv(E,!1),E[m.get(0)]=!0,w=1;w<f;w++){var T=m.get(w-1),A=m.get(w);this.Qu(T,A)==0?E[A]=!1:E[A]=!0}m=this.Y.Ja(),T=this.Y,A=0;var P=1;for(w=0;w<f;w++)E[w]?P=w+1:(A<P&&m.Gd(T,A,P),A=w+1);return A<P&&m.Gd(T,A,P),m.Eh(2,this.Co),m},p.prototype.FV=function(){var f=this.Y,m=f.Ha(),w=f.Ha(),x=this.Y.Ja(),E=this.Y,T=f.hasAttribute(1),A=T?h.ta.qE(this.Sg,f,!0):0,P=new h.ja(0),F=new h.ja(0);for(P.Jb(h.P.truncate(f.I()/2+1)),F.Jb(h.P.truncate(f.I()/2+1));m.ab();)if(w.ab(),!(2>f.Ka(m.gb))){w.vW();for(var j,H,W=!0;m.Ia();){var G=m.ia(),ee=w.ni();if(m.xb()>w.xb())break;W&&(P.add(m.xb()),F.add(w.jk()),W=!1),H=P.Gc();var ae=m.jk();if(1<ae-H){var le=new h.h;le.vc(f.Oa(H),f.Oa(ae)),j=le.length()}else j=G.Rb();H=F.Gc(),1<(ae=w.xb())-H?((le=new h.h).vc(f.Oa(H),f.Oa(ae)),H=le.length()):H=ee.Rb(),j>this.Co?P.add(m.jk()):T&&(j=f.Vc(1,P.Gc(),0),G=G.jv(1,0),Math.abs(G-j)>A&&P.add(m.jk())),H>this.Co?F.add(w.xb()):T&&(j=f.Vc(1,F.Gc(),0),G=ee.jv(1,0),Math.abs(G-j)>A&&F.add(w.xb()))}if(P.Gc()<F.Gc()?P.size>F.size?P.Jf():F.Jf():(P.Gc()!=F.Gc()&&F.Jf(),F.Jf()),2<=F.size+P.size){for(W=new h.Ta,ee=0,G=P.size;ee<G;ee++)E.we(P.get(ee),W),ee==0?x.nf(W):x.lineTo(W);for(ee=F.size-1;0<ee;ee--)E.we(F.get(ee),W),x.lineTo(W);E.ec(m.gb)?x.Cp():0<F.size&&(E.we(F.get(0),W),x.lineTo(W))}P!=null&&P.clear(!1),F!=null&&F.clear(!1)}return x.Eh(2,this.Co),x},p.prototype.jV=function(){return this.vX()},p.prototype.vX=function(){return this.Y.K()==1736&&this.Y.Jn()==1?h.Hg.Nk(this.Y,this.Co,!0,!1,this.nd):(this.Ji=new h.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.rA!=1&&h.Uk.W(this.Ji,this.Co,this.nd,!0),this.Y.K()==1736&&h.tn.W(this.Ji,this.Ji.ld,this.rA,!1,this.nd)),this.Y=this.Ji.Ke(this.Ji.ld),this.Y.K()==1736&&(this.Y.hm(),this.Y.Zo(0)),this.Y.Eh(2,this.Co),this.Y)},p.ts=function(f,m,w,x,E){if(x!=null&&(x.Lj=0,x.Ko=-1,x.Lo=-1),f.B())return 1;var T=f.K();if(T==33)return 1;var A=h.ta.mj(m,f,!1);if(T==197)return m=new h.l,f.A(m),m.Di(A)?(x!=null&&(x.Lj=2,x.Ko=-1,x.Lo=-1),0):1;if(h.ba.zd(T))return(A=new h.Ua(f.description)).oc(f,!0),p.ts(A,m,w,x,E);var P=f.qm(A);if((w=w?-1:P)!=-1)return w;if(m=new p(f,m,w,E,!1),T==550)w=m.cU();else if(T==1607)w=m.BV();else{if(T!=1736)throw h.i.Ra();w=m.gV()}return f.Eh(w,A),x!=null&&w==0&&x.Yt(m.ke),w},p.XJ=function(f,m,w,x){if(f.B())return f;var E=f.K();if(E==33)return f;var T=h.ta.mj(m,f,!1);if(E==197)return m=new h.l,f.A(m),m.Di(T)?f.Ja():f;if(h.ba.zd(E))return(E=new h.Ua(f.description)).oc(f,!0),p.XJ(E,m,w,x);if(T=f.qm(T),(w=w?-1:T)==2)return f;if(f=new p(f,m,w,x,!1),E==550)f=f.hU();else if(E==1607)f=f.FV();else{if(E!=1736)throw h.i.Ra();f=f.jV()}return f},p.prototype.Oh=function(f,m,w){if(f==m)return 0;f=this.ii.get(f);var x=this.ii.get(m);m=f>>1;var E=x>>1,T=new h.h,A=new h.h;return this.lf.uc(2*m,T),T.y+=(1&f)!=0?this.Qj:-this.Qj,this.lf.uc(2*E,A),A.y+=(1&x)!=0?this.Qj:-this.Qj,(f=T.compare(A))==0&&w?0>(w=this.Hl.get(m)-this.Hl.get(E))?-1:0<w?1:0:f},p.prototype.Qu=function(f,m){if(f==m)return 0;var w=this.Y,x=w.Oa(f),E=w.Oa(m);if(x.x<E.x)return-1;if(x.x>E.x)return 1;if(x.y<E.y)return-1;if(x.y>E.y)return 1;for(x=1;x<this.gT;x++){E=this.hH.qd(x);for(var T=h.ua.Wa(E),A=0;A<T;A++){var P=w.Vc(E,f,A),F=w.Vc(E,m,A);if(P<F)return-1;if(P>F)return 1}}return 0},p.prototype.JO=function(f,m){var w=this.Qu(f,m);return w==0?f<m?-1:1:w},p.prototype.RP=function(f,m){if(f===m)return 0;var w=f.ne.jg();f.Yp()&&w.Uq(),f=m.ne.jg(),m.Yp()&&f.Uq(),m=w.su();var x=f.su();return x==m?(m=w.yi(f),Math.abs(m)<=8881784197001252e-31*(Math.abs(f.x*w.y)+Math.abs(f.y*w.x))&&(m--,m++),0>m?1:0<m?-1:0):m<x?-1:1},p}();h.Ix=u}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 30},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u).next()):new h.vL(a,n,o,u)},c.fp=function(a,n,o,u){var p=a.Eb(),f=n.Eb();if(a.B()&&n.B())return p>f?a:n;if(a.B())return n;if(n.B())return a;var m=new h.l,w=new h.l,x=new h.l;return a.A(m),n.A(w),x.L(m),x.$b(w),m=h.ta.Xd(o,x,!0),w=a.K(),x=n.K(),w==33&&x==33?c.TU(a,n,m):w!=x?0<p||0<f?p>f?a:n:w==550?c.cI(a,n,m):c.cI(n,a,m):h.Hg.fp(a,n,o,u)},c.TU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D(),p=n.D(),f=new h.de(a.description);return h.h.zc(u,p)>o&&(f.add(a),f.add(n)),f},c.cI=function(a,n,o){var u=a.vb(0),p=a.I(),f=n.D(),m=a.Ja();o=o*Math.sqrt(2)*1.00001;var w=new h.l;if(a.A(w),w.X(o,o),w.contains(f)){o*=o,w=!1;for(var x=[],E=0;E<p;E++)x[E]=!1;for(E=0;E<p;E++){var T=u.read(2*E),A=u.read(2*E+1);(T-=f.x)*T+(A-=f.y)*A<=o&&(w=!0,x[E]=!0)}if(w)for(E=0;E<p;E++)x[E]||m.Gd(a,E,E+1);else m.Gd(a,0,p),m.add(n)}else m.Gd(a,0,p),m.add(n);return m},c.instance=null,c}(h.Ge);h.Jx=L}(X||(X={})),function(h){var L=function(){function b(c,a,n,o){this.vs=a==null,this.za=-1,this.Sd=c,this.vg=n,this.FT=a.next(),this.Vb=o}return b.prototype.next=function(){return this.vs?null:(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Jx.fp(c,this.FT,this.vg,this.Vb)):null;var c},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();h.vL=L}(X||(X={})),function(h){var L=function(){function a(){}return a.prototype.Az=function(){this.Vy=null,this.zx=-1,this.uK=!1},a}(),b=function(){function a(){this.Ir=0,this.rj=[]}return a.prototype.jN=function(n){this.Ir+=n.zx,this.rj.push(n)},a.prototype.LV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},a.prototype.iy=function(){return this.rj[this.rj.length-1]},a.prototype.Nb=function(n){return n===this},a}(),c=function(){function a(n,o,u){this.za=-1,this.Jc=!1,this.uH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Ak=-1,this.kq=0,this.co=-1,this.Eo=[],this.Sd=n,this.vg=o,this.Vb=u}return a.YD=function(n){var o=[],u=0;for(n=Object.keys(n);u<n.length;u++)o.push(Number(n[u]));return o.sort(function(p,f){return p-f}),o},a.prototype.$F=function(n){var o=this.Eo[n],u=a.YD(o)[0],p=o[u],f=p.iy().Vy;return p=p.iy().uK,delete o[u],p&&(f=h.$l.local().W(f,this.vg,!1,this.Vb),n==0&&f.K()==33&&(n=new h.de(f.description),f.B()||n.add(f),f=n)),f},a.prototype.next=function(){if(this.Jc&&this.co==this.Ak)return null;for(;!this.kK(););if(this.Ak==-1)return null;if(this.eA){for(this.co++;;){if(this.co>this.Ak||0>this.co)throw h.i.Ra();if(this.uH[this.co])break}return this.za++,this.$F(this.co)}return this.za=0,this.co=this.Ak,this.$F(this.Ak)},a.prototype.Ma=function(){return this.za},a.prototype.kK=function(){if(this.Jc)return!0;var n=null;if(this.Sd!=null&&(n=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.np.Bp(this.Vb),n!=null){var o=n.Eb();this.uH[o]=!0,o>=this.Ak&&!this.eA&&(this.GD(o,!1,n),o>this.Ak&&!this.eA&&this.rW(o))}if(0<this.kq)for(o=0;o<=this.Ak;o++)for(;1<this.wq[o]&&(n=this.zO(o)).length!=0;)n=h.Hg.PP(n,this.vg,this.Vb),this.GD(o,!0,n);return this.Jc},a.prototype.zO=function(n){for(var o=[],u=[],p=this.Eo[n],f=a.YD(p),m=0;m<f.length;m++){var w=f[m],x=p[w];if(this.Jc||1e4<x.Ir&&1<x.rj.length){for(this.wq[n]-=x.rj.length,this.kq-=x.rj.length;0<x.rj.length;)o.push(x.iy().Vy),x.LV();u.push(w)}}for(m=0;m<u.length;m++)delete p[u[m]];return o},a.prototype.rW=function(n){for(var o=0;o<n;o++)this.Eo[o]=[],this.kq-=this.wq[o],this.wq[o]=0},a.prototype.GD=function(n,o,u){var p=new L;if(p.Az(),p.Vy=u,u=a.YR(u),p.zx=u,u=a.WR(u),n+1>this.Eo.length)for(var f=0,m=Math.max(2,n+1);f<m;f++)this.Eo.push([]);(f=this.Eo[n][u])===void 0&&(f=new b,this.Eo[n][u]=f),p.uK=o,f.jN(p),this.wq[n]++,this.kq++,this.Ak=Math.max(this.Ak,n)},a.WR=function(n){return 0<n?h.P.truncate(Math.log(n)/Math.log(4)+.5):0},a.YR=function(n){var o=n.K();if(h.ba.zj(o))return n.I();if(o==33)return 1;if(o==197)return 4;if(h.ba.zd(o))return 2;throw h.i.Ra()},a.prototype.qe=function(){this.kK()},a}();h.xL=c}(X||(X={})),function(h){var L=function(b){function c(){return b!==null&&b.apply(this,arguments)||this}return ai(c,b),c.prototype.K=function(){return 1},c.prototype.W=function(a,n,o,u){return u===void 0?new h.xL(a,n,o):this.aQ(a,n,o,u)},c.prototype.aQ=function(a,n,o,u){return a=new h.$c([a,n]),this.W(a,o,u).next()},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.Ih=L}(X||(X={})),function(h){var L,b;(b=L||(L={}))[b.nextPath=0]="nextPath",b[b.nextSegment=1]="nextSegment",b[b.iterate=2]="iterate",L=function(){function c(a,n,o,u){this.Vs=new h.l,this.yT=a,this.zT=n,this.oq=u,this.vo=-1,this.tl=!1;var p=a.Cb;p!=null&&(p=u?p.Ao:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,u?this.vo=n.ea():this.td=n.Ha()),this.tl||(p=n.Cb)!=null&&(p=u?p.Ao:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,u?this.vo=a.ea():this.td=a.Ha()),this.tl||(this.ei=u?h.ta.gR(a,n,o,1<=a.qm(0),1<=n.qm(0)):h.ta.fR(a,n,o))}return c.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.pU();break;case 1:a=this.qU();break;case 2:a=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},c.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.vo:this.td.xb():this.ei.pl(this.ei.Wf)},c.prototype.jl=function(){return this.tl?this.pq?this.oq?this.vo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},c.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.AF(this.Hs):this.Vs:this.ei.oz(this.ei.Wf)},c.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.AF(this.Hs):this.ei.Wy(this.ei.Bf)},c.prototype.pU=function(){return this.oq?--this.vo==-1?(this.Jc=!0,!1):(this.pq?this.zT.Tj(this.vo,this.Vs):this.yT.Tj(this.vo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},c.prototype.qU=function(){if(!this.td.Ia())return this.Yb=0,!0;var a=this.td.ia();return this.zw.Vo(a,this.ra),this.Yb=2,!0},c.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},c}(),h.am=L}(X||(X={})),function(h){(h=h.IL||(h.IL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(X||(X={})),function(h){h.KC=function(){function L(){}return L.ub=function(b,c,a,n,o,u,p,f,m){var w=[0,0,0],x=[0,0,0],E=[0,0,0],T=[0,0,0,0],A=new h.ha(0),P=new h.ha(0),F=new h.ha(0);if(p!=null||f!=null||m!=null)if(h.s.vi(c))h.$g.ub(b,a,n,o,u,p,f,m);else{o=h.F.ca(o),a=h.F.ca(a);var j=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.$(a,o)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(b,c)),f!=null&&(f.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(m!=null&&(m.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(j),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(b,c)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else if(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897)||h.s.$(a,o)||h.s.$(h.s.R(j),3.141592653589793)||h.s.Dd(n))return void h.Yk.ub(b,c,a,n,o,u,p,f,m);var H=Math.sqrt(1-c);o=h.F.ca(o-a),a=0,h.F.el(1,c,n,a,0,A,P,F),w[0]=A.u,w[1]=P.u,w[2]=F.u,h.F.el(1,c,u,o,0,A,P,F),x[0]=A.u,x[1]=P.u,x[2]=F.u,E[0]=0,E[1]=0,E[2]=-1*c*h.F.n(1,c,n)*Math.sin(n),0>o?h.F.Yq(E,x,w,T,0):h.F.Yq(E,w,x,T,0),P=[0,0,0],F=[0,0,0];var W=[0,0,0];w=[0,0,0],A=[0,0,0];var G=Math.acos(T[2]/1),ee=1-c,ae=Math.tan(G),le=1+ae*ae/ee,ie=2*E[2]*ae/ee;for(ee=(-ie+(ae=Math.sqrt(ie*ie-4*le*(E[2]*E[2]/ee-1))))/(le*=2),ie=(-ie-ae)/le,ae=Math.tan(G),G=(ee+ie)/2,E=((le=ae*ee+E[2])+(ae*ie+E[2]))/2,ae=h.F.hp(ee-G,le-E),ee=E/H*1.570796326794897,ie=0;100>ie&&(le=(le=h.F.w(c,ee))*le/Math.cos(ee)*(Math.sin(ee)-E*le/(1-c)),!h.s.Dd(le));ie++)ee-=le;E=h.F.n(1,c,ee)*Math.cos(ee),ae=1-ae/(E=Math.sqrt((E-G)*(E+G))),ae*=2-ae,le=h.F.qn(P),G=h.F.qn(F),ee=h.F.qn(W);var be=h.F.Ut(W,P);ie=h.F.Ut(W,F),h.F.yx(W,P,w),h.F.yx(W,F,A),P=Math.acos(be/(ee*le)),F=Math.acos(ie/(ee*G)),F*=h.s.Mb(1,h.F.Ut(w,A)),(1.570796326794897<=h.s.R(P)&&1.570796326794897<=h.s.R(F)||3.141592653589793<h.s.R(P-F))&&(P=(3.141592653589793-h.s.R(P))*h.s.Mb(1,P),F=(3.141592653589793-h.s.R(F))*h.s.Mb(1,F)),w=h.F.Sj(ae,F),A=h.F.q(E,ae,h.F.Sj(ae,P)),w=h.F.q(E,ae,w),w=h.s.R(w-A)*b,P=new h.ha(0),F=new h.ha(0),W=T[1]/1,W*=-h.s.Mb(1,j),A=Math.acos(W)*h.s.Mb(1,j),L.sf(b,c,a,n,w,A,P,F),h.s.$(o,P.u)&&h.s.$(u,F.u)||(ae=h.F.hp(h.F.ca(o-P.u),u-F.u),L.sf(b,c,a,n,w,h.F.ca(A+3.141592653589793),P,F),(le=h.F.hp(h.F.ca(o-P.u),u-F.u))<ae&&(A=h.F.ca(A+3.141592653589793))),P=[0,0,0,0],F=[0,0,0,0],ae=[0,0,0],b=[0,0,0],a=[0,0,0],n=[0,0,0],W=[0,0,0],(E=[0,0,0])[0]=0,E[1]=0,E[2]=H,ae[0]=0,ae[1]=0,ae[2]=0,h.F.Yq(ae,E,x,P,0),h.s.Dd(u)?(b[0]=x[0],b[1]=x[1],b[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(c=h.F.n(1,c,u)*Math.cos(u),b[0]=0,b[1]=0,x[2]+=Math.tan(1.570796326794897-h.s.R(u))*c*h.s.Mb(1,u),a[0]=c*Math.cos(o)-c*Math.sin(o),a[1]=c*Math.sin(o)+c*Math.cos(o)),a[2]=x[2],h.F.Yq(x,a,b,F,1),h.F.yx(F,P,n),h.F.yx(F,T,W),W=h.F.Ut(n,W)/(h.F.qn(n)*h.F.qn(W)),W*=h.s.Mb(1,j),o=Math.acos(W)*-h.s.Mb(1,j),(0<A&&0<o||0>A&&0>o)&&(o=h.F.ca(o+3.141592653589793)),p!=null&&(p.u=w),f!=null&&(f.u=A),m!=null&&(m.u=o)}}},L.sf=function(b,c,a,n,o,u,p,f){var m=[0,0,0],w=[0,0,0],x=[0,0,0],E=[0,0,0],T=[0,0,0],A=[0,0,0],P=[0,0,0],F=[0,0,0,0],j=new h.ha(0),H=new h.ha(0),W=new h.ha(0),G=new h.ha(0),ee=new h.ha(0),ae=new h.ha(0);if(p!=null&&f!=null)if(h.s.vi(c))h.$g.sf(b,a,n,o,u,p,f);else if(h.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=n);else if(u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),a=h.F.ca(a),n=h.F.ca(n),1.570796326794897<h.s.R(n)&&(a=h.F.ca(a+3.141592653589793),n=h.s.Mb(3.141592653589793,n)-n),h.s.$(h.s.R(n),1.570796326794897)||h.s.Dd(n)||h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))h.Yk.sf(b,c,a,n,o,u,p,f);else{var le=Math.sqrt(1-c);for(b=o/b,h.F.el(1,c,n,0,0,G,ee,ae),m[0]=G.u,m[1]=ee.u,m[2]=ee.u,P[0]=0,P[1]=0,P[2]=-1*c*h.F.n(1,c,n)*Math.sin(n),G=h.F.n(1,c,n),ee=h.F.ca(1.570796326794897-u),ae=Math.sin(ee),o=Math.cos(n),n=Math.sin(n),T[0]=G*o-n*ae,T[1]=Math.cos(ee),T[2]=(1-c)*G*n+o*ae,0>u?h.F.Yq(P,T,m,F,0):h.F.Yq(P,m,T,F,0),m=Math.acos(F[2]/1),F=Math.atan2(-F[1],-F[0]),n=1-c,ee=1+(T=Math.tan(m))*T/n,n=(-(G=2*P[2]*T/n)+(T=Math.sqrt(G*G-4*ee*(P[2]*P[2]/n-1))))/(ee*=2),G=(-G-T)/ee,T=Math.tan(m),m=(n+G)/2,P=((ee=T*n+P[2])+(T*G+P[2]))/2,T=h.F.hp(n-m,ee-P),le=P/le*1.570796326794897,n=0;100>n&&(G=(G=h.F.w(c,le))*G/Math.cos(le)*(Math.sin(le)-P*G/(1-c)),!h.s.Dd(G));n++)le-=G;le=h.F.n(1,c,le)*Math.cos(le),P=1-T/(le=Math.sqrt((le-m)*(le+m))),P*=2-P,A=Math.acos(h.F.Ut(A,w)/(h.F.qn(A)*h.F.qn(w))),A*=h.s.Mb(1,w[0]),u=(h.F.q(le,P,h.F.Sj(P,A))+b*h.s.Mb(1,u))/h.F.Ch(le,P),u=h.F.ca(1.570796326794897*u),u=h.F.Tq(P,u),h.F.n(le,P,u),T=h.F.ca(F+a),a=Math.cos(T),u=Math.sin(T),x[0]=E[0]*a+E[1]*-u,x[1]=E[0]*u+E[1]*a,x[2]=E[2],h.F.dO(c,x[0],x[1],x[2],W,H,j),p!=null&&(p.u=H.u),f!=null&&(f.u=W.u)}},L}()}(X||(X={})),function(h){var L=function(){function o(u){this.Za=null,this.xt=new h.h,this.yt=new h.h,this.g=u}return o.prototype.compare=function(u,p,f){return this.g.Hc(p,this.xt),this.g.Hc(u.ka(f),this.yt),this.xt.compare(this.yt)},o}(),b=function(){function o(u){this.Cf=new h.h,this.Ek=new h.h,this.g=u}return o.prototype.Fh=function(u){this.Cf.N(u)},o.prototype.compare=function(u,p){return this.g.Hc(u.ka(p),this.Ek),this.Cf.compare(this.Ek)},o}(),c=function(o){function u(p){var f=o.call(this,p.g,p.ra,!1)||this;return f.ib=p,f}return ai(u,o),u.prototype.compare=function(p,f,m){if(this.rg)return-1;var w=this.ib.Rd.Kn(this.ib.Th(f));p=p.ka(m);var x=this.ib.Rd.Kn(this.ib.Th(p));return this.Fm=m,this.LE(f,w,p,x)},u}(h.OC),a=function(o){function u(p){var f=o.call(this,p.g,p.ra)||this;return f.ib=p,f}return ai(u,o),u.prototype.compare=function(p,f){return this.rg?-1:(p=this.ib.Rd.Kn(this.ib.Th(p.ka(f))),this.Fm=f,this.ME(f,p))},u}(h.VL),n=function(){function o(){this.Nc=this.df=this.ko=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.ie=this.Hk=this.ph=this.Bk=this.Gf=this.ae=null,this.zh=this.Lq=this.OA=this.ra=0,this.Zv=this.Xn=!1,this.zo=new h.h,this.Ri=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.nh=new h.cu,this.Rd=new h.cu,this.Pg=!1,this.xh=new h.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Xn=!1,this.g=null,this.df=new h.Zj,this.Nc=new h.Zj,this.ph=new h.ja(0),this.Hk=new h.NC,this.Gf=new h.ja(0),this.Bk=new h.ja(0),this.ko=new h.Ta}return o.prototype.HX=function(u,p){var f=new h.Ed;return f.UB(),u.Pc(f),this.gr(u),this.Xn=!1,this.ra=p,this.OA=p*p,p=this.dC(),u.Pc(f),p||(this.kQ(),p||this.dC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Xn},o.prototype.LX=function(u,p){this.gr(u),this.Xn=!1,this.ra=p,this.OA=p*p,this.Pg=!1,this.dC(),this.Pg||(this.Pg=u.Ip(p,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},o.prototype.pg=function(u,p){return this.hb.U(u,0+p)},o.prototype.FB=function(u,p,f){this.hb.T(u,0+p,f)},o.prototype.Th=function(u){return this.hb.U(u,2)},o.prototype.QW=function(u,p){this.hb.T(u,2,p)},o.prototype.LF=function(u,p){return this.hb.U(u,3+p)},o.prototype.Rp=function(u){return this.hb.U(u,7)},o.prototype.Rl=function(u,p){this.hb.T(u,7,p)},o.prototype.Tp=function(u,p){return this.hb.U(u,3+this.Qp(u,p))},o.prototype.hr=function(u,p,f){this.hb.T(u,3+this.Qp(u,p),f)},o.prototype.GR=function(u,p){return this.hb.U(u,5+this.Qp(u,p))},o.prototype.jr=function(u,p,f){this.hb.T(u,5+this.Qp(u,p),f)},o.prototype.Ur=function(u){return this.Ad.U(u,0)},o.prototype.MW=function(u,p){this.Ad.T(u,0,p)},o.prototype.$y=function(u){return this.Ad.U(u,4)},o.prototype.er=function(u,p){this.Ad.T(u,4,p)},o.prototype.kl=function(u){return this.Ad.U(u,1)},o.prototype.nn=function(u,p){this.Ad.T(u,1,p)},o.prototype.Zy=function(u){return this.Ad.U(u,3)},o.prototype.Ft=function(u,p){this.Ad.T(u,3,p)},o.prototype.$m=function(u){var p=this.Ad.De(),f=this.nh.Rh();return this.MW(p,f),u!=-1?(this.nh.addElement(f,u),this.g.Sa(u,this.zh,p),this.er(p,this.g.Va(u))):this.er(p,-1),p},o.prototype.BP=function(u){this.Ad.kd(u)},o.prototype.ED=function(u,p){this.nh.addElement(this.Ur(u),p),this.g.Sa(p,this.zh,u)},o.prototype.ot=function(u){var p=this.hb.De(),f=this.Rd.Rh();return this.QW(p,f),u!=-1&&this.Rd.addElement(f,u),p},o.prototype.FD=function(u,p){this.Rd.addElement(this.Th(u),p)},o.prototype.Wu=function(u){this.hb.kd(u),0<=(u=this.ph.fF(u))&&this.ph.KV(u)},o.prototype.jj=function(u,p){if(this.pg(u,0)==-1)this.FB(u,0,p);else{if(this.pg(u,1)!=-1)throw h.i.Ra();this.FB(u,1,p)}this.gy(u,p)},o.prototype.gy=function(u,p){var f=this.kl(p);if(f!=-1){var m=this.Tp(f,p);this.jr(m,p,u),this.hr(u,p,m),this.hr(f,p,u),this.jr(u,p,f)}else this.jr(u,p,u),this.hr(u,p,u),this.nn(p,u)},o.prototype.Qp=function(u,p){return this.pg(u,0)==p?0:1},o.prototype.Zm=function(u,p){var f,m=this.Zy(p);if(m!=-1&&(this.df.wd(m,-1),this.Ft(p,-1)),(m=this.kl(p))!=-1){var w=f=m;do{var x=!1,E=this.Qp(f,p),T=this.LF(f,E);if(this.pg(f,E+1&1)==u){if(this.Zu(f),this.Rd.eh(this.Th(f)),this.Wu(f),f==T){m=-1;break}m==f&&(m=this.kl(p),w=T,x=!0)}f=T}while(f!=w||x);if(m!=-1){do E=this.Qp(f,p),T=this.LF(f,E),this.FB(f,E,u),f=T;while(f!=w);(f=this.kl(u))!=-1?(w=this.Tp(f,u),x=this.Tp(m,u),w==f?(this.nn(u,m),this.gy(f,u),this.nn(u,f)):x==m&&this.gy(m,u),this.hr(m,u,w),this.jr(w,u,m),this.hr(f,u,x),this.jr(x,u,f)):this.nn(u,m)}}for(m=this.Ur(u),f=this.Ur(p),w=this.nh.sc(f);w!=-1;w=this.nh.lb(w))this.g.Sa(this.nh.ka(w),this.zh,u);this.nh.Cy(m,f),this.BP(p)},o.prototype.MT=function(u,p){var f=this.pg(u,0),m=this.pg(u,1),w=this.pg(p,0),x=this.pg(p,1);this.Rd.Cy(this.Th(u),this.Th(p)),p==this.kl(f)&&this.nn(f,u),p==this.kl(m)&&this.nn(m,u),this.Zu(p),this.Wu(p),f==w&&m==x||m==w&&f==x||(this.In(f,this.zo),this.In(w,this.Ri),this.zo.rb(this.Ri)?(f!=w&&this.Zm(f,w),m!=x&&this.Zm(m,x)):(m!=w&&this.Zm(m,w),f!=x&&this.Zm(f,x)))},o.prototype.Zu=function(u){var p=this.pg(u,1);this.YE(u,this.pg(u,0)),this.YE(u,p)},o.prototype.YE=function(u,p){var f=this.Tp(u,p),m=this.GR(u,p),w=this.kl(p);f!=u?(this.hr(m,p,f),this.jr(f,p,m),w==u&&this.nn(p,f)):this.nn(p,-1)},o.prototype.QD=function(u,p,f){var m=this.Rd.sc(u),w=this.Rd.ka(m);u=this.Ie(w);var x=this.Ie(this.g.V(w));for(this.g.lr(w,p,f,!0),m=this.Rd.lb(m);m!=-1;m=this.Rd.lb(m)){w=this.Rd.ka(m);var E=this.Ie(w)==u;this.g.lr(w,p,f,E)}m=p.Xp(f,0).ac(),p=p.Xp(f,p.ql(f)-1).xc(),this.vK(u,m),this.vK(x,p)},o.prototype.TE=function(u,p,f){var m=this.Th(u),w=this.pg(u,0),x=this.pg(u,1),E=this.ot(-1);for(this.ph.add(E),this.Rl(E,-3),this.Gf.add(E),this.jj(E,w),u=1,p=p.ql(f);u<p;u++)f=this.$m(-1),this.Bk.add(f),this.Gf.add(f),this.jj(E,f),E=this.ot(-1),this.ph.add(E),this.Rl(E,-3),this.Gf.add(E),this.jj(E,f);for(this.jj(E,x),m=this.Rd.sc(m);m!=-1;m=this.Rd.lb(m))if(x=this.Rd.ka(m),this.Ie(x)==w){u=0;do 0<u&&(E=this.Gf.get(u-1),this.ED(E,x),this.$y(E)==-1&&this.er(E,this.g.Va(x))),E=this.Gf.get(u),u+=2,this.FD(E,x),x=this.g.V(x);while(u<this.Gf.size)}else{u=this.Gf.size-1;do u<this.Gf.size-2&&(E=this.Gf.get(u+1),this.ED(E,x),0>this.$y(E)&&this.er(E,this.g.Va(x))),E=this.Gf.get(u),u-=2,this.FD(E,x),x=this.g.V(x);while(0<=u)}this.Gf.clear(!1)},o.prototype.Ie=function(u){return this.g.Qa(u,this.zh)},o.prototype.MI=function(u,p,f){var m=this.pg(p,0),w=new h.h;this.In(m,w);var x=new h.h,E=this.pg(p,1);this.In(E,x);var T=f.ql(u),A=f.Xp(u,0),P=new h.h;if(A.$p(P),!w.rb(P)){if(!this.Pg){var F=w.compare(this.xh);0>F*(P=P.compare(this.xh))&&(this.Pg=!0)}this.pF(m,this.Gf),this.Bk.add(m)}for(!this.Pg&&1<T&&(F=w.compare(x),A=A.xc(),(w.compare(A)!=F||A.compare(x)!=F||0>A.compare(this.xh))&&(this.Pg=!0)),u=(A=f.Xp(u,T-1)).xc(),x.rb(u)||(this.Pg||0>(F=x.compare(this.xh))*(P=u.compare(this.xh))&&(this.Pg=!0),this.pF(E,this.Gf),this.Bk.add(E)),this.Gf.add(p),x=0,E=this.Gf.size;x<E;x++)u=this.Gf.get(x),f=this.Rp(u),h.ad.FG(f)&&(this.Nc.wd(f,-1),this.Rl(u,-1)),u!=p&&this.Rp(u)!=-3&&(this.ph.add(u),this.Rl(u,-3));this.Gf.clear(!1)},o.prototype.fO=function(u,p){this.ae.compare(this.Nc,this.Nc.ka(u),p),this.ae.rg&&(this.ae.Mr(),this.iF(u,p))},o.prototype.iF=function(u,p){this.Xn=!0,u=this.Nc.ka(u),p=this.Nc.ka(p);var f=this.Rd.Kn(this.Th(u)),m=this.Rd.Kn(this.Th(p)),w=this.g.cc(f);w==null&&(this.ie==null&&(this.ie=new h.zb),this.g.fd(f,this.ie),w=this.ie),(f=this.g.cc(m))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(m,this.Pm),f=this.Pm),this.Hk.Po(w),this.Hk.Po(f),this.Hk.Fa(this.ra,!0)&&(this.Pg=!0),this.bK(u,p,-1,this.Hk),this.Hk.clear()},o.prototype.AQ=function(u,p){this.Xn=!0,p=this.Nc.ka(p);var f=this.Rd.Kn(this.Th(p)),m=this.g.cc(f);m==null&&(this.ie==null&&(this.ie=new h.zb),this.g.fd(f,this.ie),m=this.ie),f=this.vF(u),this.Hk.Po(m),this.g.Xi(f,this.ko),this.Hk.Fz(this.ra,this.ko,!0),this.bK(p,-1,u,this.Hk),this.Hk.clear()},o.prototype.qS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var u=this.ph.Gc();this.ph.Jf(),this.Rl(u,-1),this.OS(u)!=-1&&this.pS(u),this.Wn=!1}},o.prototype.pS=function(u){if(this.Wn){var p=this.Nc.Bu(this.GH,this.AH,u,!0);this.Wn=!1}else p=this.Nc.DD(u);p==-1?this.MT(this.Nc.ka(this.Nc.zF()),u):(this.Rl(u,p),this.ae.rg&&(this.ae.Mr(),this.iF(this.ae.Fm,p)))},o.prototype.OS=function(u){var p=this.pg(u,0);if(u=this.pg(u,1),this.In(p,this.zo),this.In(u,this.Ri),h.h.zc(this.zo,this.Ri)<=this.OA)return this.Pg=!0,-1;var f=this.zo.compare(this.xh),m=this.Ri.compare(this.xh);return 0>=f&&0<m?u:0>=m&&0<f?p:-1},o.prototype.iQ=function(){var u=new h.ja(0);u.Jb(this.g.gd);for(var p=this.g.$q(),f=p.next();f!=-1;f=p.next())this.g.Qa(f,this.zh)!=-1&&u.add(f);this.g.nx(u,u.size),this.jQ(u)},o.prototype.jQ=function(u){this.df.clear(),this.df.Ee(u.size),this.df.Wo(new L(this.g));var p=new h.h;p.Sc();for(var f=-1,m=new h.h,w=0,x=u.size;w<x;w++){var E=u.get(w);this.g.Hc(E,m),m.rb(p)?(E=this.g.Qa(E,this.zh),this.Zm(f,E)):(f=this.Ie(E),this.g.Hc(E,p),E=this.df.yn(E),this.Ft(f,E))}},o.prototype.kQ=function(){var u=new h.ja(0);u.Jb(this.g.gd);for(var p=this.df.sc(-1);p!=-1;p=this.df.lb(p))u.add(this.df.ka(p));this.df.clear(),this.g.nx(u,u.size),p=0;for(var f=u.size;p<f;p++){var m=u.get(p),w=this.Ie(m);m=this.df.yn(m),this.Ft(w,m)}},o.prototype.pF=function(u,p){var f=this.kl(u);if(f!=-1){var m=f;do h.ad.FG(this.Rp(m))&&p.add(m),m=this.Tp(m,u);while(m!=f)}},o.prototype.vK=function(u,p){for(u=this.nh.sc(this.Ur(u));u!=-1;u=this.nh.lb(u))this.g.mf(this.nh.ka(u),p)},o.prototype.bK=function(u,p,f,m){this.Zu(u),p!=-1&&this.Zu(p),this.MI(0,u,m),p!=-1&&this.MI(1,p,m),f!=-1&&(m.Cf.D(this.zo),this.In(f,this.Ri),this.Ri.rb(this.zo)||this.Bk.add(f)),f=0;for(var w=this.Bk.size;f<w;f++){var x=this.Bk.get(f),E=this.Zy(x);E!=-1&&(this.df.wd(E,-1),this.Ft(x,-1))}for(f=this.Th(u),w=p!=-1?this.Th(p):-1,this.QD(f,m,0),p!=-1&&this.QD(w,m,1),this.TE(u,m,0),p!=-1&&this.TE(p,m,1),this.Rd.eh(f),this.Wu(u),p!=-1&&(this.Rd.eh(w),this.Wu(p)),f=0,w=this.Bk.size;f<w;f++)(x=this.Bk.get(f))==this.Lq&&(this.Zv=!0),(E=this.Zy(x))==-1&&((E=this.df.DD(this.vF(x)))==-1?(u=this.Ie(this.df.ka(this.df.zF())),this.Zm(u,x)):this.Ft(x,E));this.Bk.clear(!1)},o.prototype.In=function(u,p){this.g.YF(this.$y(u),p)},o.prototype.vF=function(u){return this.nh.Kn(this.Ur(u))},o.prototype.dC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new c(this),this.Nc.$n=this.ae);var u=new h.ja(0),p=null,f=null;this.AH=this.GH=-1,this.Wn=!1;for(var m=this.df.sc(-1);m!=-1;){this.Wn=!1;var w=this.df.ka(m);this.Lq=this.Ie(w),this.g.Hc(w,this.xh),this.ae.UJ(this.xh.y,this.xh.x);var x=this.kl(this.Lq),E=x==-1;if(!E){w=x;do{var T=this.Rp(w);T==-1?(this.ph.add(w),this.Rl(w,-3)):T!=-3&&u.add(T),w=this.Tp(w,this.Lq)}while(w!=x)}if(0<u.size){for(this.Wn=u.size==1&&this.ph.size==1,E=0,x=u.size;E<x;E++)w=this.Nc.ka(u.get(E)),this.Rl(w,-2);var A=-2,P=-2;for(E=0,x=u.size;E<x;E++){if(T=u.get(E),A==-2){var F=this.Nc.xe(T);F!=-1?(w=this.Nc.ka(F),(w=this.Rp(w))!=-2&&(A=F)):A=-1}if(P==-2&&((T=this.Nc.lb(T))!=-1?(w=this.Nc.ka(T),(w=this.Rp(w))!=-2&&(P=T)):P=-1),A!=-2&&P!=-2)break}for(E=0,x=u.size;E<x;E++)T=u.get(E),w=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(w,-1);u.clear(!1),this.GH=A!=-1?A:-1,this.AH=P!=-1?P:-1,A!=-1&&P!=-1?this.Wn||this.fO(A,P):A==-1&&P==-1&&(this.Wn=!1)}else E&&(p==null&&(p=new a(this)),p.Fh(this.xh),this.Nc.oJ(p),p.rg&&(p.Mr(),this.AQ(this.Lq,p.Fm)));this.qS(),this.Zv?(this.Zv=!1,f==null&&(f=new b(this.g)),f.Fh(this.xh),m=this.df.oJ(f)):m=this.df.lb(m)}return this.Xn},o.prototype.gr=function(u){for(this.g=u,this.zh=this.g.Hd(),this.hb.Ee(u.gd+32),this.Ad.Ee(u.gd),this.nh.Bt(u.gd),this.nh.hn(u.gd),this.Rd.Bt(u.gd+32),this.Rd.hn(u.gd+32),u=this.g.ld;u!=-1;u=this.g.ve(u))if(h.ba.Ic(this.g.jc(u)))for(T=this.g.Ob(u);T!=-1;T=this.g.Sb(T)){var p=this.g.Ka(T),f=this.g.Ya(T),m=this.$m(f),w=this.ot(f);for(this.jj(w,m),A=this.g.V(f),f=0,p-=2;f<p;f++){var x=this.g.V(A),E=this.$m(A);this.jj(w,E),w=this.ot(A),this.jj(w,E),A=x}this.g.ec(T)?(E=this.$m(A),this.jj(w,E),w=this.ot(A),this.jj(w,E),this.jj(w,m)):(E=this.$m(A),this.jj(w,E))}else for(var T=this.g.Ob(u);T!=-1;T=this.g.Sb(T)){var A=this.g.Ya(T);for(m=0,p=this.g.Ka(T);m<p;m++)this.$m(A),A=this.g.V(A)}this.iQ()},o}();h.LC=n}(X||(X={})),function(h){var L=function(b){function c(a,n,o){var u=b.call(this)||this;if(a!==void 0)if(o!==void 0){u.description=h.ee.og();var p=new h.Od;p.L(a,n,o),u.YB(p)}else if(n!==void 0)u.description=h.ee.og(),u.Db(a,n);else if(a instanceof h.ua)u.description=a;else if(a instanceof h.h)u.description=h.ee.og(),u.Db(a);else{if(!(a instanceof c))throw h.i.O();u.description=a.description,u.Db(a.Ng(),a.kh()),a.la!==null&&(u.la=a.la.slice(0))}else u.description=h.ee.og();return u}return ai(c,b),c.prototype.D=function(a){if(a===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(a=new h.h).na(this.la[0],this.la[1]),a}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])},c.prototype.Db=function(a,n){typeof a=="number"?(this.wc(),this.la==null&&this.up(),this.la[0]=a,this.la[1]=n):(this.wc(),this.Db(a.x,a.y))},c.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var a=new h.Od;return a.x=this.la[0],a.y=this.la[1],a.z=this.description.cG()?this.la[2]:h.ua.te(1),a},c.prototype.YB=function(a){this.wc();var n=this.hasAttribute(1);n||h.ua.xG(1,a.z)||(this.se(1),n=!0),this.la==null&&this.up(),this.la[0]=a.x,this.la[1]=a.y,n&&(this.la[2]=a.z)},c.prototype.Ng=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},c.prototype.XB=function(a){this.setAttribute(0,0,a)},c.prototype.kh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},c.prototype.VJ=function(a){this.setAttribute(0,1,a)},c.prototype.VR=function(){return this.Vc(1,0)},c.prototype.oX=function(a){this.setAttribute(1,0,a)},c.prototype.tR=function(){return this.Vc(2,0)},c.prototype.ZW=function(a){this.setAttribute(2,0,a)},c.prototype.Fc=function(){return this.sF(3,0)},c.prototype.FJ=function(a){this.setAttribute(3,0,a)},c.prototype.Vc=function(a,n){var o=this.description.Qf(a);return 0<=o?this.la[this.description.ak(o)+n]:h.ua.te(a)},c.prototype.sF=function(a,n){var o=this.description.Qf(a);return 0<=o?this.la[this.description.ak(o)+n]:h.ua.te(a)},c.prototype.setAttribute=function(a,n,o){this.wc();var u=this.description.Qf(a);0>u&&(this.se(a),u=this.description.Qf(a)),this.la==null&&this.up(),this.la[this.description.ak(u)+n]=o},c.prototype.K=function(){return 33},c.prototype.Eb=function(){return 0},c.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},c.prototype.un=function(a){if(this.la!=null){for(var n=h.ee.Kw(a,this.description),o=[],u=0,p=0,f=a.Ba;p<f;p++){var m=a.qd(p),w=h.ua.Wa(m);if(n[p]==-1){var x=h.ua.te(m);for(m=0;m<w;m++)o[u]=x,u++}else for(x=this.description.ak(n[p]),m=0;m<w;m++)o[u]=this.la[x],u++,x++}this.la=o}this.description=a},c.prototype.up=function(){this.fJ(this.description.Be.length),c.XD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},c.prototype.Pc=function(a){if(a instanceof h.Ed){if(!this.Bc()){var n=this.D();a.Gh(n,n),this.Db(n)}}else this.Bc()||(this.se(1),n=this.xz(),this.YB(a.gp(n)))},c.prototype.copyTo=function(a){if(a.K()!=33)throw h.i.O();a.wc(),this.la==null?(a.Pa(),a.la=null,a.kg(this.description)):(a.kg(this.description),a.fJ(this.description.Be.length),c.XD(this.la,a.la,this.description.Be.length))},c.prototype.Ja=function(){return new c(this.description)},c.prototype.B=function(){return this.Bc()},c.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},c.prototype.dn=function(a){a.Pa(),this.description!=a.description&&a.kg(this.description),a.$b(this)},c.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])},c.prototype.Ro=function(a){if(this.Bc())a.Pa();else{var n=this.xz();a.v=n.x,a.G=n.y,a.Xe=n.z,a.C=n.x,a.H=n.y,a.Dg=n.z}},c.prototype.Vg=function(a,n){var o=new h.Oc;return this.Bc()?(o.Pa(),o):(a=this.Vc(a,n),o.pa=a,o.wa=a,o)},c.prototype.fJ=function(a){if(this.la==null)this.la=h.P.lg(a);else if(this.la.length<a){for(var n=this.la.slice(0),o=this.la.length;o<a;o++)n[o]=0;this.la=n}},c.XD=function(a,n,o){if(0<o)for(o=0;o<a.length;o++)n[o]=a[o]},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.Bc())return!!a.Bc();for(var n=0,o=this.description.Be.length;n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var n=0,o=this.description.Be.length;n<o;n++){var u=this.la[n];u=h.P.truncate(u^u>>>32),a=h.P.Vh(u,a)}return a},c.prototype.mg=function(){return null},c}(h.ba);h.Ta=L}(X||(X={})),function(h){var L=function(){function b(c,a,n){c!==void 0&&(this.x=c,this.y=a,this.z=n)}return b.construct=function(c,a,n){var o=new b;return o.x=c,o.y=a,o.z=n,o},b.prototype.L=function(c,a,n){this.x=c,this.y=a,this.z=n},b.prototype.lx=function(){this.z=this.y=this.x=0},b.prototype.normalize=function(){var c=this.length();c==0&&(this.x/=c,this.y/=c,this.z/=c)},b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},b.prototype.sub=function(c){return new b(this.x-c.x,this.y-c.y,this.z-c.z)},b.prototype.Ag=function(c){new b(this.x*c,this.y*c,this.z*c)},b.prototype.Sh=function(c){return this.x*c.x+this.y*c.y+this.z*c.z},b}();h.Od=L}(X||(X={})),function(h){var L=function(){function b(c,a,n){this.Iw=this.xA=null,this.Yf=a,this.xT=a.y-n,this.wT=a.y+n,this.Gw=0,this.Zz=c,this.ra=n,this.JT=n*n,this.$z=n!=0,this.Nv=!1}return b.prototype.result=function(){return this.Gw!=0?1:0},b.prototype.TM=function(c){return c=c.ic(c.fe(this.Yf,!1)),h.h.zc(c,this.Yf)<=this.JT},b.prototype.$E=function(c){if(!this.$z&&(this.Zz&&this.Yf.rb(c.ac())||this.Yf.rb(c.xc())))this.Nv=!0;else if(c.oa==this.Yf.y&&c.oa==c.ma){if(this.Zz&&!this.$z){var a=Math.max(c.sa,c.qa);this.Yf.x>Math.min(c.sa,c.qa)&&this.Yf.x<a&&(this.Nv=!0)}}else{var n=!1;if(a=Math.max(c.sa,c.qa),this.Yf.x>a?n=!0:this.Yf.x>=Math.min(c.sa,c.qa)&&(n=0<c.fq(!0,this.Yf.y,this.Iw,null)&&this.Iw[0]<=this.Yf.x),n){if(this.Yf.y==c.ac().y){if(this.Yf.y<c.xc().y)return}else if(this.Yf.y==c.xc().y&&this.Yf.y<c.ac().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(c.ac().y>c.xc().y?1:-1)}}},b.prototype.LI=function(c){var a=c.Vg(0,1);if(a.pa>this.wT||a.wa<this.xT)return!1;if(this.$z&&this.TM(c))return!0;if(a.pa>this.Yf.y||a.wa<this.Yf.y)return!1;if(this.xA==null&&(this.xA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(a=c.ZF()))for(c=0;c<a;c++){var n=this.xA[c].get();if(this.$E(n),this.Nv)return!0}else if(this.$E(c),this.Nv)return!0;return!1},b.JM=function(c,a,n){for(a=new b(c.Jn()==0,a,n),c=c.Ha();c.ab();)for(;c.Ia();)if(n=c.ia(),a.LI(n))return-1;return a.result()},b.KM=function(c,a,n,o){var u=new h.l;c.yc(u),u.X(o,o);var p=new b(c.Jn()==0,n,o);c=c.Ha();var f=new h.l;for(f.L(u),f.C=n.x+o,f.G=n.y-o,f.H=n.y+o,o=(n=a.GF(f,o)).next();o!=-1;o=n.next())if(c.Wb(a.ka(o)),c.Ia()&&(o=c.ia(),p.LI(o)))return-1;return p.result()},b.ym=function(c,a,n){if(c.B())return 0;var o=new h.l;if(c.yc(o),o.X(n,n),!o.contains(a))return 0;if((o=c.Cb)!=null){var u=o.Gk;if(u!=null){if((u=u.To(a.x,a.y))==1)return 1;if(u==0)return 0}if((o=o.Gb)!=null)return b.KM(c,o,a,n)}return b.JM(c,a,n)},b.US=function(c,a,n){return a.B()?0:b.ym(c,a.D(),n)},b.Ol=function(c,a){return!(16>(c=c.I()))&&2*c+Math.log(c)/Math.log(2)*a<1*c*a},b}();h.Fg=L}(X||(X={})),function(h){var L=function(b){function c(a){return b.call(this,!0,a)||this}return ai(c,b),c.prototype.Ja=function(){return new c(this.description)},c.prototype.Eb=function(){return 2},c.prototype.K=function(){return 1736},c.prototype.rG=function(a,n,o){this.CS(a,n,o)},c.prototype.jR=function(){this.zR()},c}(h.Wk);h.Ea=L}(X||(X={})),function(h){(function(L){L[L.PiPOutside=0]="PiPOutside",L[L.PiPInside=1]="PiPInside",L[L.PiPBoundary=2]="PiPBoundary"})(h.LL||(h.LL={})),h.jd=function(){function L(){}return L.EG=function(b,c,a){return(b=h.Fg.US(b,c,a))==0?0:b==1?1:2},L.Zd=function(b,c,a){return(b=h.Fg.ym(b,c,a))==0?0:b==1?1:2},L.OX=function(b,c,a,n,o){if(c.length<a||o.length<a)throw h.i.O();for(var u=0;u<a;u++)o[u]=L.Zd(b,c[u],n)},L.mK=function(b,c,a,n,o){if(b.K()==1736)L.OX(b,c,a,n,o);else{if(b.K()!=197)throw h.i.ga("invalid_call");var u=new h.l;b.A(u),L.UM(u,c,a,n,o)}},L.UM=function(b,c,a,n,o){if(c.length<a||o.length<a)throw h.i.O();if(b.B())for(n=0;n<a;n++)o[n]=0;else for(b.X(.5*-n,.5*-n),b.X(.5*n,.5*n),n=0;n<a;n++)b.contains(c[n])?o[n]=1:b.contains(c[n])?o[n]=2:o[n]=0},L.QX=function(b,c,a,n,o){for(var u=0;u<a;u++)o[u]=b.ss(c[u],n)?2:0},L.PX=function(b,c,a,n,o){var u=b.Cb,p=null;u!=null&&(p=u.Gk),u=a;for(var f=0;f<a;f++)if(o[f]=1,p!=null){var m=c[f];p.To(m.x,m.y)==0&&(o[f]=0,u--)}if(u!=0)for(b=b.Ha();b.ab()&&u!=0;)for(;b.Ia()&&u!=0;)for(p=b.ia(),f=0;f<a&&u!=0;f++)o[f]==1&&p.ss(c[f],n)&&(o[f]=2,u--);for(f=0;f<a;f++)o[f]==1&&(o[f]=0)},L.nK=function(b,c,a,n,o){var u=b.K();if(u==1607)L.PX(b,c,a,n,o);else{if(!h.ba.zd(u))throw h.i.ga("Invalid call.");L.QX(b,c,a,n,o)}},L}()}(X||(X={})),function(h){var L=function(b){function c(a,n){if(arguments.length==2){var o=b.call(this,!1,a.description)||this;o.nf(a),o.lineTo(n)}else o=b.call(this,!1,a)||this;return o}return ai(c,b),c.prototype.Ja=function(){return new c(this.description)},c.prototype.Eb=function(){return 1},c.prototype.K=function(){return 1607},c.prototype.rG=function(a,n,o){this.DS(a,n,o)},c}(h.Wk);h.Ua=L}(X||(X={})),function(h){var L=function(){function b(){}return b.prototype.progress=function(){return!0},b.Bp=function(c){if(c!=null&&!c.progress(-1,-1))throw h.i.QC()},b}();h.np=L}(X||(X={})),function(h){var L;(L=h.JK||(h.JK={}))[L.clipWithInputHorizon=1]="clipWithInputHorizon",L[L.clipWithOutputHorizon=2]="clipWithOutputHorizon";var b=function(){function n(){this.Mg=3,this.Xu=this.Lr=NaN}return n.prototype.HW=function(o){this.KB(1,o)},n.prototype.IW=function(o){this.KB(2,o)},n.prototype.aS=function(){return this.ks(1)},n.prototype.bS=function(){return this.ks(2)},n.prototype.KB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.prototype.Pf=function(){var o=new n;return o.Lr=this.Lr,o.Xu=this.Xu,o.Mg=this.Mg,o},n}();h.sC=b,function(n){n[n.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",n[n.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.KK||(h.KK={}));var c=function(){function n(){this.Mg=0}return n.prototype.KB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.ig=function(o){var u=new n;return u.Mg=o.Mg,u},n.prototype.gM=function(o){this.Mg=o.Mg},n}();h.sY=c;var a=function(){function n(o,u,p){this.ef=o,this.Zf=u,this.Vf=new h.l,this.Vf.L(p),this.sT=o.dc()+u.dc()+this.Vf.dc().toString()}return n.prototype.dc=function(){return this.sT},n.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.Zf.Nb(o.Zf)&&this.Vf.Nb(o.Vf)},n}();h.xY=a,a=function(){function n(){this.Zf=this.ef=null,this.lH=new b,this.mH=new c,this.yw=this.Xf=null,this.ow=this.Un=!0}return n.Pr=function(o,u,p,f){var m;f===void 0&&(f=null),m===void 0&&(m=null);var w=new n;return w.rp(o,u,p,f,m),w},n.prototype.rp=function(o,u,p,f,m){if(o==null||u==null)throw h.i.ga("invalidArgument");if(this.ef=o,this.Zf=u,this.ow=this.Un=!1,f!=null&&(this.lH=f.Pf()),m!=null&&this.mH.gM(m),m=!1,u.Tb()==1&&f!=null&&(f=f.Lr,isNaN(f)||f==0||(m=!0)),o==u)this.Un=!m,this.ow=!0;else{f=o.Tb();var w=u.Tb();if(f==0||w==0){if(p!=null)throw h.i.O();o.Id()!=null&&u.Id()!=null&&(this.Un=o.Id().Nb(u.Id()))}else f==3||w==3?this.Un=o.Nb(u):this.ef.dS(this.Zf)?this.Un=!m:this.Un=!1,this.Xf=p,this.Xf!=null&&this.Xf.ix(),this.ow=(this.Xf==null||this.Xf.count()==0)&&this.ef.tc().Nb(this.Zf.tc())}this.gY()},n.prototype.isIdentity=function(){return this.Un},n.prototype.hR=function(){return this.lH.Pf()},n.prototype.Nb=function(o){return o==this||!!(o instanceof n&&this.ef.Nb(o.ef)&&this.Zf.Nb(o.Zf))&&(this.Xf==o.Xf||!(this.Xf==null||o.Xf==null||!this.Xf.Nb(o.Xf)))},n.prototype.gY=function(){this.yw=new h.du(this)},n}(),h.xr=a}(X||(X={})),function(h){var L=function(){function b(){}return b.Ep=function(c){return c*b.gW},b.mx=function(c,a){return b.aP(a-c)},b.bP=function(c){return-360<=c&&720>c?(0>c?c+=360:360<=c&&(c-=360),c):(0>(c=h.mc.LK(c))&&(c+=360),c)},b.aP=function(c){return 180<(c=b.bP(c))&&(c-=360),c},b.gW=57.29577951308232,b}();h.sr=L,h.Jh=function(){function b(){}return b.nj=function(c,a){var n=new h.l;c.A(n);var o=h.cb.ih(a),u=new h.l;return u.L(o),u.v=n.v,u.C=n.C,u.X(.01*u.da(),0),a=h.ta.Xd(a,n,!1),u.contains(n)?c:h.Vd.clip(c,u,a,0)},b.ms=function(c,a,n,o,u){if(!h.cb.Xc(a))throw h.i.O();var p=h.ta.mj(a,c,!1),f=h.cb.ih(a),m=h.cb.tc(a),w=m.Id().ci,x=h.cb.xv(m);m=h.cb.gv(m),x*=2-x;var E=new h.Oc;f.en(E);var T=[[0,0],[0,0]];if(h.Gg.Tb(a)==2?o?(T[0][0]=b.an(u,E),T[0][1]=f.Lp(),h.cb.wt(),f=T[0][0]*w):(T[0][0]=f.hk(),T[0][1]=u,h.cb.wt(),f=T[0][1]*w):f=u*w,!o&&f!=0)throw h.i.O();var A=new h.ha,P=new h.hd;c=P.Ib(c);for(var F=[0],j=new h.h,H=new h.h,W=new h.h,G=new h.h,ee=new h.h,ae=new h.h,le=P.Ob(c);le!=-1;le=P.Sb(le)){var ie=P.Ya(le);P.D(ie,W);for(var be=!1,Ie=ie=P.V(ie);Ie!=-1;Ie=P.V(Ie)){if(Ie==ie){if(be)break;be=!0}if(P.D(Ie,G),o&&p<u-W.x&&G.x-u>p||p<u-G.x&&W.x-u>p||!o&&p<-W.y&&G.y>p||p<-G.y&&W.y>p)do if(!(Math.abs(W.x-G.x)>=.5*E.S())){if(h.Gg.Tb(a)==2?(T[0][0]=b.an(W.x,E),T[0][1]=W.y,T[1][0]=b.an(G.x,E),T[1][1]=G.y,h.cb.WV(),ee.x=T[0][0]*w,ee.y=T[0][1]*w,ae.x=T[1][0]*w,ae.y=T[1][1]*w):(ee.x=W.x*w,ee.y=W.y*w,ae.x=G.x*w,ae.y=G.y*w),ae.x=6.283185307179586*(G.x-W.x)/E.S()+ee.x,o){if(H.x=f,H.y=b.Iz(m,x,ee,ae,f,n),isNaN(H.y))break}else{if(H.x=b.Gz(m,x,ee,ae,n),isNaN(H.x))break;H.y=0}h.kb.xd(m,x,ee.x,ee.y,ae.x,ae.y,A,null,null,n);var ze=A.u;h.kb.xd(m,x,ee.x,ee.y,H.x,H.y,A,null,null,n);var Fe=A.u;h.Gg.Tb(a)==2?(T[0][0]=H.x/w,T[0][1]=H.y/w,h.cb.WQ(),o?(j.y=T[0][1],j.x=u):(j.x=b.qs(T[0][0],W.x,G.x,E),j.y=u)):o?(j.x=u,j.y=H.y/w):(j.x=b.qs(H.x/w,W.x,G.x,E),j.y=u),F[0]=0<ze?h.P.Sk(Fe/ze,0,1):.5,F[0]!=0&&F[0]!=1&&(ze=P.Na(Ie),P.Wl(ze,F,1),P.Db(P.V(ze),j.x,j.y))}while(0);W.N(G)}}return P.Ke(c)},b.Gn=function(c,a,n,o,u){if(c.B())return c;var p=h.cb.bf(a);return b.Jp(c,n-180*p,360*p,a,o,u,!0)},b.Iz=function(c,a,n,o,u,p){if(3.141592653589793<=Math.abs(n.x-o.x)||!b.Tn(n.x,o.x,u))return NaN;if(n.x>o.x)var f=o;else f=n,n=o;o=new h.ha(0);var m=new h.ha(0),w=new h.ha(0);h.kb.xd(c,a,f.x,f.y,n.x,n.y,m,o,null,p);var x=m.u,E=0,T=1,A=new h.h;for(A.N(f);x*(T-E)>1e-12*c;){var P=.5*(E+T);if(h.kb.qj(c,a,f.x,f.y,x*P,o.u,m,w,p),A.x=m.u,A.y=w.u,A.x==u)break;if(b.Tn(f.x,A.x,u))T=P;else{if(!b.Tn(n.x,A.x,u))return NaN;E=P}}return A.y},b.Tn=function(c,a,n){return c=L.Ep(c),a=L.mx(c,L.Ep(a)),(n=L.mx(c,L.Ep(n)))==0||0<a&&0<n&&n<=a||0>a&&0>n&&n>=a},b.an=function(c,a){var n=a.wa-a.pa;return a.Kt(c-Math.floor((c-a.pa)/n)*n)},b.qs=function(c,a,n,o){var u=new h.Oc;for(u.L(a,n),n=o.S(),c=Math.floor((c-a)/n)*n+c,u=u.tf();Math.abs(c-u)>Math.abs(c+n-u);)c+=n;return c},b.Gz=function(c,a,n,o,u){if(n.y>o.y)var p=o;else p=n,n=o;if((o=new h.Oc).L(p.y,n.y),!o.contains(0)||3.141592653589793<=Math.abs(p.x-n.x))return NaN;if(p.x==n.x)return p.x;var f=new h.ha(0),m=new h.ha(0),w=new h.ha(0);h.kb.xd(c,a,p.x,p.y,n.x,n.y,m,f,null,u);var x=m.u,E=0,T=1,A=new h.h;for(A.N(p);x*(T-E)>1e-12*c;){var P=.5*(E+T);if(h.kb.qj(c,a,p.x,p.y,x*P,f.u,m,w,u),A.x=m.u,A.y=w.u,o.L(p.y,A.y),A.y==0)break;if(o.contains(0))T=P;else{if(o.L(n.y,A.y),!o.contains(0))return NaN;E=P}}return A.x},b.Jp=function(c,a,n,o,u,p,f){var m=new h.l;if(c.A(m),m.B())return c;var w=new h.Oc;m.en(w);var x=new h.Oc;if(x.L(a,a+n),x.contains(w)&&x.wa!=w.wa)return c;var E=new h.l;E.L(m);var T=c.K();if(T==33)return((m=(E=u?c:c.Pf()).Ng())<x.pa||m>=x.wa||f&&m==x.wa)&&(m+=Math.ceil((x.pa-m)/n)*n,m=x.Kt(m),E.XB(m)),E;if(T==550){for(o=(E=u?c:c.Pf()).vb(0),T=2*E.I(),c=!1,u=0;u<T;u+=2)((m=o.read(u))<x.pa||m>=x.wa||f&&m==x.wa)&&(c=!0,m+=Math.ceil((x.pa-m)/n)*n,m=x.Kt(m),o.write(u,m));return c&&E.Qc(1993),E}if(x.contains(w))return c;if(T==197)return n=u?c:c.Pf(),m.Fa(E),n.Yo(m),n;var A=.1*Math.max(m.da(),m.S());for(E.X(0,A),f=c,x=o.Yd(0),c=h.Ih.local(),u=new h.Ed;;){var P=Math.floor((w.pa-a)/n),F=Math.ceil((w.wa-a)/n);if(!(3<F-P))break;P=Math.floor(.5*(F+P)),E.v=m.v-A,E.C=a+n*P;var j=h.Vd.clip(f,E,x,p);E.v=E.C,E.C=m.C+A;var H=h.Vd.clip(f,E,x,p);u.gg((P-F)*n,0),H.Pc(u),T==1736?f=c.W(j,H,o,null):(f=j).add(H,!1),f.A(m),m.en(w)}for(E.v=a,E.C=a+n,(a=new h.l).L(E),a.X(x,0),(a=Math.floor((m.v-E.v)/n)*n)!=0?(E.move(a,0),u.gg(-a,0)):u.LB(),a=T==1607?new h.Ua(f.description):new h.Ea(f.description),p=new h.l,w=new h.l;m.C>E.v;)(A=h.Vd.clip(f,E,x,0)).A(w),(T==1607?!A.B()&&(w.S()>x||w.da()>x):!A.B()&&(T!=1736||w.S()>x))&&(A.Pc(u),A.A(w),a.A(p),p.X(x,x),p.isIntersecting(w)&&T==1736?a=c.W(a,A,o,null):a.add(A,!1)),E.move(n,0),u.shift(-n,0);return a},b.QI=function(c,a,n,o){var u=new h.de(n.description);u.Gd(n,0,-1),u=h.cb.Bh(u,c,a);var p=n.I();if(o.Pa(),!h.cb.Xc(c)||p!=u.I())return!1;var f=new h.l;n.A(f);var m=new h.l;if(u.A(m),f=f.S(),m=m.S(),f!=0&&m!=0){if(m/=f,c=h.cb.ih(a).S()/h.cb.ih(c).S(),1e-10<Math.abs(m/c-1))return!1}else if(f!=0||m!=0)return!1;for(o.add(n,!1),n=0;n<p;n++)c=u.Oa(n),o.Db(n,c);return!0},b.Jz=function(){throw h.i.Fe()},b}()}(X||(X={})),function(h){var L,b,c;(b=L=h.ui||(h.ui={}))[b.Clip=0]="Clip",b[b.DontClip=1]="DontClip",b[b.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(c=h.QK||(h.QK={})),h.Ab=function(){function a(){}return a.zv=function(n,o,u){if(u||0<o){for(n=n.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),o=[],u=0;u<n.length;u++)o[u]="a"<=n[u]&&"z">=n[u]?o[u]=n[u].toUpperCase():n[u];return o.join()}return n.toString(h.Tc.PE_STR_AUTH_TOP)},a.wr=function(n,o,u,p){var f=p.length,m=u.I();if(m!=0){var w=u.vb(0),x=Math.min(m,f),E=0,T=n.gh();isNaN(o)&&(o=0);for(var A=n.Xc(),P=179*(n=A?n.tc().Le().S():0)/360;0<m;){if(w.oB(E<<1,x,p),h.gj.projToGeogCenter(T,x,p,o),A)for(var F=0;F<x;F++){var j=p[F][0]-o,H=h.mc.sign(j),W=w.read(2*(E+F));0>H*h.mc.sign(W)&&Math.abs(j)>P&&(p[F][0]+=-H*n)}w.oC(E<<1,x,p),E+=x,m-=x,x=Math.min(m,f)}u.Qc(1993)}},a.CL=function(n,o,u,p){var f=0,m=n.gh();isNaN(f)&&(f=0);var w=n.Xc(),x=n.bf();n=360*x,x*=179;for(var E=p.length,T=0;T<u;){for(var A=T;A<u&&o[A].isNaN();++A)T++;var P=Math.min(E,u-T);if(0<P){A=1;for(var F=T+1;A<P;++A,++F)if(o[F].isNaN()){P=A;break}if(h.ta.Ey(p,o,T,P),h.gj.projToGeogCenter(m,P,p,f),w)for(A=0,F=T;A<P;++A,++F){var j=o[F].x,H=p[A][0]-f,W=h.mc.sign(H);0>W*h.mc.sign(j)&&Math.abs(H)>x&&(p[A][0]-=W*n)}h.ta.Dy(o,T,p,P),T+=P}}},a.Kx=function(n,o,u){var p=u.length,f=o.I();if(!(1>f)){var m=o.vb(0),w=Math.min(f,p),x=0,E=n.gh(),T=n.Xc(),A=T?n.Le().S():0,P=179*A/360,F=0;for(T&&(F=n.Bi());0<f;){if(m.oB(x<<1,w,u),h.gj.geogToProj(E,w,u),T)for(n=0;n<w;n++){var j=u[n][0],H=h.mc.sign(j),W=m.read(2*(x+n))-F;0>H*h.mc.sign(W)&&Math.abs(j)>P&&(u[n][0]+=-H*A)}m.oC(x<<1,w,u),x+=w,f-=w,w=Math.min(f,p)}o.Qc(1993)}},a.BL=function(n,o,u,p){if(u!=0){var f=n.gh(),m=n.Xc(),w=m?n.Le().S():0,x=179*w/360,E=0;for(m&&(E=n.Bi()),n=0;n<u;){for(var T=n;T<u&&o[T].isNaN();++T)n++;var A=Math.min(p.length,u-n);if(0<A){T=1;for(var P=n+1;T<A;++T,++P)if(o[P].isNaN()){A=T;break}if(h.ta.Ey(p,o,n,A),h.gj.geogToProj(f,A,p),m)for(T=0,P=n;T<A;T++){var F=p[T][0],j=h.mc.sign(F);0>j*h.mc.sign(o[P].x-E)&&Math.abs(F)>x&&(p[T][0]-=j*w)}h.ta.Dy(o,n,p,A),n+=A}}}},a.vr=function(n,o,u,p){var f=o.I();if(f!=0){var m=o.vb(0),w=n.ef,x=n.Zf,E=w.tc().Sp(),T=x.tc().Sp(),A=w.bf(),P=x.bf();if((n=n.Xf)==null||n.count()==0){for(u=E/T,p=(w.Wp()-x.Wp())*P,T=-90*A,n=90*A,E=!1,P=1,w=2*f;P<w;)A=m.get(P),(x=h.P.Sk(A,T,n))!=A&&(m.set(P,x),E=!0),P+=2;if(p!=0||u!=1)for(E=!0,T=new h.h,P=0;P<f;P++)m.uc(2*P,T),T.x*=u,T.x+=p,T.y*=u,m.Vt(2*P,T);E&&o.Qc(1993)}else{w=p.length,x=Math.min(f,w);var F=h.P.lg(x),j=null,H=0,W=NaN,G=NaN,ee=360*P,ae=P/A;u&&(G=90*P,W=89.9*A,j=h.P.lg(x));for(var le=!0,ie=0;f!=0;){for(A=!1,m.oB(H<<1,x,p),P=0;P<x;P++)F[P]=p[P][0];if(u)for(P=0;P<x;P++){var be=Math.abs(p[P][1])-W;0<be&&(A=p[P][1],p[P][1]=h.mc.Dn(W,A),j[P]=h.mc.Dn(be,A),A=!0)}for(P=p[0][0],n.transform(p,x,E,T),le&&(ie=p[0][0]-ae*P,le=!1),P=0;P<x;P++)be=p[P][0]-F[P]*ae-ie,200<Math.abs(be)&&(p[P][0]=0<be?p[P][0]-ee:p[P][0]+ee);if(A){for(P=0;P<x;P++)j[P]!=0&&(p[P][1]+=ae*j[P],p[P][1]>G?p[P][1]=G:p[P][1]<-G&&(p[P][1]=-G));for(A=0;A<x;A++)j[A]=0}m.oC(H<<1,x,p),H+=x,f-=x,x=Math.min(f,w)}o.Qc(1993)}}},a.AL=function(n,o,u,p){if(n.ow)p=90*n.ef.bf(),h.ta.YJ(o,u,-p,p);else{var f=n.Xf,m=n.ef,w=n.Zf;n=m.Zr();var x=w.Zr(),E=m.bf(),T=90*E,A=w.bf();if(f==null||f.count()==0){if(p=n/x,f=(m.Wp()-w.Wp())*A,h.ta.YJ(o,u,-T,T),f!=0||p!=1)for(A=0;A<u;A++)o[A].x*=p,o[A].x+=f,o[A].y*=p}else{m=Math.min(u,p.length),T=h.P.lg(m),w=360*A,E=A/E;for(var P=!0,F=0,j=0;u!=0;){for(A=0;A<m;A++)T[A]=o[A+j].x;for(A=o[0].x,h.ta.Ey(p,o,j,m),f.transform(p,m,n,x),h.ta.Dy(o,j,p,m),P&&(F=o[0].x-E*A,P=!1),A=0;A<m;A++){var H=o[j+A].x-T[A]*E-F;200<Math.abs(H)&&(o[j+A].x=0<H?o[j+A].x-w:o[j+A].x+w)}j+=m,u-=m,m=Math.min(u,p.length)}}}},a.fv=function(n,o){return n=n.ih(),isNaN(o)||n.Lu(o,0),n},a.OQ=function(n,o,u,p,f,m,w,x){for(var E=a.fv(p,f),T=E.S(),A=T/360,P=a.jE*A,F=n.vb(0),j=o.Xc(),H=j?T/o.Le().S():0,W=!1,G=new h.Ea(u.description),ee=0,ae=u.ea();ee<ae;++ee){var le=j,ie=new h.Ua(u.description);if(ie.addPath(u,ee,!0),w!=0){var be=a.JD(!0,ie,E.H-x,E.H,w);(W=W||be)&&(le=!1)}var Ie=-1;le&&(Ie=n.Ca(ee));var ze=ie.vb(0),Fe=ie.I(),Oe=0,Ye=ze.read(0),yt=0;be=3*p.Yd(0);var bt=!1,Kt=new h.h;Kt.Sc();var Qt=new h.h;Qt.Sc();for(var br=!1,Ci=1;Ci<Fe;++Ci){var at=h.h.construct(ze.Bg(2*Ci),ze.Bg(2*Ci+1)),di=at.x,Vt=di+Oe,Fi=Vt-Ye;if(at.x=Vt,Math.abs(Fi)>P){if(le){var Di=Ie+(Ci+1<Fe?Ci:0),dn=F.read(2*(Ie+Ci-1));Di=(F.read(2*Di)-dn)*H,Math.abs(Fi-Di)>1*A&&(le=!1)}le||(Vt=di+(Oe-=h.mc.Dn(T,Vt-Ye)),++yt,br=Oe!=0,at.x=Vt)}else bt||h.ta.uG(Qt,Kt,at,be)&&(bt=!0);br&&ze.write(2*Ci,Vt),Ye=Vt,Qt.N(Kt),Kt.N(at)}0<yt&&ie.Qc(1993),le=ie.Oa(0),Fe=ie.Oa(Fe-1),ie=h.h.ub(le,Fe)<be?a.oQ(ie,p,f,m,bt):a.pQ(n,ee,ie,p,f),G.add(ie,!1)}return f=p.Yd(0),u=E.S()/180,a.Lt(G,E,.1*f,!1),G=G!=(f=h.ti.clip(G,E,f,u,m)),n=n.He(),w=0,0<(x=f.He())&&0>n?w=1:0>=x&&0<n&&(x==0?(x=NaN,o.Tb()==2?x=o.ol().He():o.Tb()==1&&(x=o.Le().qF()),n>.99*x&&(w=-1)):w=-1),w!=0&&((o=new h.Ea(f.description)).vp(E),(o=h.Zl.local().W(o,u,m)).add(f,!1),G=!0,f=o),G&&(f=h.$l.local().W(f,p,!1,m)),f},a.pQ=function(n,o,u,p,f){var m=u.I(),w=u.Oa(0),x=u.Oa(m-1);f=(p=a.fv(p,f)).S(),w=h.mc.sign(x.x-w.x);var E=new h.l;u.yc(E);var T=p.hk();if(x=T-f,T+=f,0<=w){var A=Math.ceil((x-E.v)/f);for(A*=f;x>E.v+A;)A+=f;for(;x<E.C+A;)A-=f;var P=A;720<E.S()&&(T=x+360*Math.ceil(E.S()/360))}else{for(A=Math.ceil((T-E.C)/f),A*=f;T<E.C+A;)A-=f;for(;T>E.v+A;)A+=f;P=A,720<E.S()&&(x=T-360*Math.ceil(E.S()/360))}A=w*f;var F=h.l.construct(E.v,E.G,E.C,E.H);F.move(P,0);var j=new h.Ed;j.gg(P,0),u.Pc(j),(E=new h.Ua(u.description)).add(u,!1),P=u.Oa(m-1),f=0;for(var H=E.Oa(0).x,W=0;0<w?F.C<T:F.v>x;)1024<=W&&(W=0),F.move(A,0),j.Lb=A,u.Pc(j),H+=A,p.v<=H&&p.C>=H&&(f=E.I()-1),u.Db(0,P),P=u.Oa(m-1),E.Fr(u,0,0,m-1,!1);return u=new h.Ea(E.description),m=0<n.Kr(o),u.add(E,!1),n=E.Oa(0),x=E.Oa(E.I()-1),o=u.ea()-1,(0>w?m:!m)?(w=h.h.construct(x.x,p.H),u.Ei(w),w=h.h.construct(p.hk(),p.H),u.Ei(w),p=h.h.construct(n.x,p.H)):(w=h.h.construct(x.x,p.G),u.Ei(w),w=h.h.construct(p.hk(),p.G),u.Ei(w),p=h.h.construct(n.x,p.G)),u.Ei(p),u.rG(0,o,0),u.eO(f),u},a.oQ=function(n,o,u,p,f){var m=new h.Ea(n.description);m.add(n,!1),m.xB(0,m.I()-1);var w=new h.l;m.yc(w);var x=(u=a.fv(o,u)).S(),E=Math.ceil((u.v-w.v)/x);for(E*=x;u.v>w.v+E;)E+=x;for(;u.v<w.C+E;)E-=x;if((E+=x)!=0){w.move(E,0);var T=new h.Ed;T.gg(E,0),m.Pc(T)}if(u.v<=w.v&&u.C>w.C)return f&&(f=m.He(),o=(m=h.$l.local().W(m,o,!0,p)).He(),(o=h.mc.sign(f)!=h.mc.sign(o))&&m.iJ()),m;for((n=new h.Ea(n.description)).add(m,!1),f=f||w.S()>x-o.Yd(0);w.v<u.C;)w.move(x,0),(T=new h.Ed).gg(x,0),m.Pc(T),n.add(m,!1);return f&&(f=n.He(),n.Zo(1),o=(n=h.$l.local().W(n,o,!0,p)).He(),(o=h.mc.sign(f)!=h.mc.sign(o))&&n.iJ()),n},a.JD=function(n,o,u,p,f){for(var m=o.vb(0),w=o.I(),x=!1,E=0;E<w;E++){var T=h.h.construct(m.Bg(2*E),m.Bg(2*E+1));if((1&f)!=0&&T.y>=u){x=!0;break}if((2&f)!=0&&T.y<=-u){x=!0;break}}if(!x)return!1;m=!1,n&&(m=o.On(0)),w=(n=new h.hd).Ib(o),x=n.Ob(w);var A=-1,P=!0,F=new h.h;F.Sc(),E=new h.Ta;for(var j=-1,H=n.Ya(x);H!=-1;H=n.V(H)){T=n.Oa(H);var W=(1&f)!=0&&90<=T.y?1:0;if(W|=(2&f)!=0&&T.y<=-u?2:0,0<A&&A!=W){if(F.x!=T.x){F.x=T.x,n.Xi(n.Na(H),E);var G=n.yj(x,H,E);n.mf(G,F)}if(m)for(j=j!=-1?n.V(j):n.Ya(x),G=n.Na(H);j!=G;)j=n.pd(j,!1);j=-1}0<W&&(T.y=h.mc.Dn(p,T.y),n.mf(H,T),P||A==W||(T.x!=F.x?(n.Xi(H,E),G=n.yj(x,H,E),n.Db(G,F.x,T.y),j=G):j=H)),A=W,F=T,P=!1}if(m){if(j!=-1)for(j=n.V(j);j!=-1;)j=n.pd(j,!1);u=n.Ya(x),n.hq(u,n.tj(x))||(n.Xi(u,E),n.yj(x,-1,E))}return n.Ke(w).copyTo(o),!0},a.Hz=function(n,o,u,p){var f=n;if(f.B()||u==L.DontClip)return f;var m=f.K();if(m==33)return f=[(p=f).D()],a.sG(f,1,o,u),f[0].isNaN()?p.Pa():p.Db(f[0]),n;var w=(n=o.tc()).bf(),x=90*w,E=180*w,T=360*w,A=o.Bi(),P=.5*w,F=new h.l;f.A(F);var j=o.Xr(),H=o.JQ(),W=j.K()==197;if(o=new h.l,j.A(o),u==L.PannableFold&&(u=n.Le().S(),o.v=A-.5*u,o.C=o.v+u),F.G<-x||F.H>x){if(new h.l().L(F.v-w,-x,F.C+w,x),(f=h.ti.Pu(f,o,n,NaN,0,p)).B())return f;f.A(F)}if(H&&(o.H<F.G||o.G>F.H))return f.Ja();if(F.S()>T&&(f=a.Jp(f,A-E,T,n,!0,0,!0,p)).A(F),(x=a.ZN(F.v,F.C,o.v,o.C,T))!=0&&F.move(x,0),F.C>o.C||F.v<o.v){if(F.C>o.C)for(;F.v>=o.C;)F.move(-T,0),x-=T;for(;F.v<o.C-T;)F.move(T,0),x+=T}if(u=h.ta.Ju(n,j),x!=0&&((w=new h.Ed).gg(x,0),f.Pc(w)),H){if(W&&o.contains(F))return f;for(H=[null,null],x=0;2>x;x++){if(W?w=h.ba.Ic(m)?h.ti.clip(f,o,u,P,p):h.ti.clip(f,o,u,0,p):(w=h.Xk.local().W(f,j,n,p))==j&&(w=h.ba.ig(w)),o.v<=F.v&&o.C>=F.C||o.v>=F.v&&o.C<=F.C)return w;H[x]=w,x==0&&(F.move(-T,0),(w=new h.Ed).gg(-T,0),f.Pc(w))}if(m==550)H[0].Gd(H[1],0,-1);else if(h.ba.Ic(m))H[0].add(H[1],!1);else{if(m!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");H[0].B()&&(H[0]=H[1])}return H[0]}if(o.H<F.G||o.G>F.H)return f;for(m=0;!f.B()&&F.C>o.v;)m!=0&&((w=new h.Ed).gg(m,0),f.Pc(w)),h.fj.local().W(4,f,j,n,p)||j==(f=h.lp.local().W(f,j,n,p))&&(f=h.ba.ig(f)),m!=0&&((P=new h.Ed).gg(-m,0),f.Pc(P)),m-=T,F.move(-T,0);return f},a.sG=function(n,o,u,p){if(o!=0&&p!=L.DontClip)if(p==L.PannableFold){p=u.BR();for(var f=o,m=0;m<o;m++)(n[m].y>p.H||n[m].y<p.G)&&(n[m].Sc(),f--);f!=0&&a.cv(n,o,p.v,p.S())}else{var w=90*(p=u.bf()),x=180*p;for(p*=360,f=o,m=0;m<o;m++)(n[m].y>w||n[m].y<-w)&&(n[m].Sc(),f--);if(f!=0){(f=new h.l).bx(n,o),w=u.Xr();var E=u.kv();m=w.K()==197;var T=new h.l;if(w.A(T),!E||!(T.H<f.G||T.G>f.H))if(E)if(a.cv(n,o,T.hk()-x,p),f=o,m)for(m=0;m<o;m++)T.contains(n[m])||(n[m].Sc(),f--);else for(u=h.ta.Ju(u.tc(),w),m=0;m<o;m++)(x=h.jd.Zd(w,n[m],u)!=0)||(n[m].Sc(),f--);else for(a.cv(n,o,-x,p),f=o,u=h.ta.Ju(u.tc(),w),m=0;m<o;m++)(x=n[m]).isNaN()&&f--,E=a.nE(x.x,T.v,T.C,p),x.x+=E,(x=h.jd.Zd(w,x,u)!=0)&&(n[m].Sc(),f--)}}},a.Jp=function(n,o,u,p,f,m,w,x){var E=n.K(),T=o+u;if(E===33){var A=(p=f?n:n.Pf()).Ng();return(A<o||A>=T||w&&A==T)&&(A+=Math.ceil((o-A)/u)*u,A=h.P.Sk(A,o,T),p.XB(A)),p}if(n.B()||(A=new h.l,n.A(A),A.B()))return n;var P=new h.Oc;A.en(P);var F=new h.Oc;if(F.L(o,T),F.contains(P))return n;if((T=new h.l).L(A),E===550){for(x=(p=f?n:n.Pf()).vb(0),E=2*p.I(),T=!1,o=0;o<E;o+=2)((A=x.read(o))<F.pa||A>=F.wa||w&&A==F.wa)&&(T=!0,A+=Math.ceil((F.pa-A)/u)*u,A=F.Kt(A),x.write(o,A));return T&&p.Qc(1993),p}if(E==197)return u=f?n:n.Pf(),A.Fa(T),u.Yo(A),u;var j=.1*Math.max(A.da(),A.S());for(T.X(0,j),w=n,F=p.Yd(0),n=h.Ih.local(),f=new h.Ed;;){var H=Math.floor((P.pa-o)/u),W=Math.ceil((P.wa-o)/u);if(!(3<W-H))break;H=Math.floor(.5*(W+H)),T.v=A.v-j,T.C=o+u*H;var G=h.ti.clip(w,T,F,m,x);T.v=T.C,T.C=A.C+j;var ee=h.ti.clip(w,T,F,m,x);f.gg((H-W)*u,0),ee.Pc(f),E==1736?w=n.W(G,ee,p,null):(w=G).add(ee,!1),w.A(A),A.en(P)}for(T.v=o,T.C=o+u,(o=new h.l).L(T),o.X(F,0),(o=Math.floor((A.v-T.v)/u)*u)!=0?(T.move(o,0),f.gg(-o,0)):f.LB(),o=E==1607?new h.Ua(w.description):new h.Ea(w.description),m=new h.l,P=new h.l;A.C>T.v;)(j=h.ti.clip(w,T,F,0,x)).A(P),(E==1607?!j.B()&&(P.S()>F||P.da()>F):!j.B()&&(E!=1736||P.S()>F))&&(j.Pc(f),j.A(P),o.A(m),m.X(F,F),m.isIntersecting(P)&&E==1736?o=n.W(o,j,p,null):o.add(j,!1)),T.move(u,0),f.shift(-u,0);return o},a.cv=function(n,o,u,p){for(var f=u+p,m=0;m<o;m++){var w=n[m].x;u<=w&&w<f||!(w<u||w>f||w==f)||(w+=Math.ceil((u-w)/p)*p,w=h.P.Sk(w,u,f),n[m].x=w)}},a.Gn=function(n,o,u,p,f,m){if(!o.Xc())throw h.i.ga("fold_into_360_degree_range");if(n.B())return n;if(o.Tb()==2){u=o.rv();var w=o.qv()-u}else{var x=o.bf();w=360*x,u-=180*x}return a.Jp(n,u,w,o,p,f,!0,m)},a.kF=function(n,o,u,p){if(u.Tb()==2)p=u.rv(),u=u.qv()-p;else{var f=u.bf();u=360*f,p-=180*f}a.cv(n,o,p,u)},a.nj=function(n,o){var u=o.Le();if(n.K()==33){var p=n.kh();return u.G<=p&&p<=u.H?n:n.Ja()}p=new h.l,n.A(p);var f=new h.l;return f.L(u),f.v=p.v,f.C=p.C,f.X(.01*f.da(),0),u=h.ta.py(o,p),f.contains(p)?n:h.ti.clip(n,f,u,0,null)},a.kr=function(n,o,u){return n>o.C&&n-o.C<u?o.C:n<o.v&&o.v-n<u?o.v:n},a.xX=function(n,o,u,p){p.x=a.kr(n.x,o,u),p.y=n.y},a.wX=function(n,o,u,p){for(var f=0;f<o;f++)n[f].y<u.G||n[f].y>u.H?n[f].Sc():n[f].x=a.kr(n[f].x,u,p)},a.Lt=function(n,o,u,p){if(!n.B()){var f=n.K();if(!p||f!=1736)if(h.ba.zj(f)){p=n.vb(0),f=0;for(var m=n.I();f<m;f++){var w=p.read(2*f),x=a.kr(w,o,u);x!=w&&p.write(2*f,x)}n.Qc(1993)}else if(f==197)p=new h.l,n.A(p),p.v=a.kr(p.v,o,u),p.C=a.kr(p.C,o,u),n.Yo(p);else{if(f!=33)throw h.i.ga("internal error");n.XB(a.kr(n.Ng(),o,u))}}},a.nS=function(n,o,u,p){var f=new h.hd,m=f.Ib(n);return n=h.ta.Ju(o,n),a.ms(f,m,o,n,u,!0,p),f.Ke(m)},a.ms=function(n,o,u,p,f,m,w){if(!u.Xc())throw h.i.O("invalid call");var x=u.Le(),E=u.tc(),T=E.gh().getDatum().getSpheroid();E=E.Id().ci;var A=T.getFlattening();T=T.getAxis(),A*=2-A;var P=new h.Oc;x.en(P);var F=null,j=[[0,0],[0,0]];if(u.Tb()==2?(F=u.gh(),m?(j[0][0]=a.an(w,P),j[0][1]=x.Lp(),h.gj.projToGeog(F,1,j),x=j[0][0]*E):(j[0][0]=x.hk(),j[0][1]=w,h.gj.projToGeog(F,1,j),x=j[0][1]*E)):x=w*E,!m&&x!=0&&f!=c.GreatElliptic)throw h.i.ga("invalid argument");var H=new h.ha,W=[0],G=new h.h,ee=new h.h,ae=new h.h,le=[null,null],ie=new h.h,be=new h.h,Ie=new h.h,ze=new h.h;for(o=n.Ob(o);o!=-1;o=n.Sb(o)){var Fe=n.Ya(o);n.D(Fe,ie);for(var Oe=!1,Ye=Fe=n.V(Fe);Ye!=-1;Ye=n.V(Ye)){if(Ye==Fe){if(Oe)break;Oe=!0}if(n.D(Ye,be),m&&(p<w-ie.x&&be.x-w>p||p<w-be.x&&ie.x-w>p)||!m&&(w!=0||p<-ie.y&&be.y>p||p<-be.y&&ie.y>p))do if(!(Math.abs(ie.x-be.x)>=.5*P.S())){if(u.Tb()==2?(j[0][0]=a.an(ie.x,P),j[0][1]=ie.y,j[1][0]=a.an(be.x,P),j[1][1]=be.y,h.gj.projToGeogCenter(F,2,j,0),Ie.x=j[0][0]*E,Ie.y=j[0][1]*E,ze.y=j[1][1]*E):(Ie.x=ie.x*E,Ie.y=ie.y*E,ze.y=be.y*E),ze.x=2*(be.x-ie.x)*Math.PI/P.S()+Ie.x,m){if(ee.x=x,ee.y=a.Iz(T,A,Ie,ze,x,f),isNaN(ee.y))break;le[0]=ee;var yt=1}else if(f==c.GreatElliptic){var bt=[0,0];if((yt=h.Nx.Jz(A,Ie,ze,x,bt))==0)break;ee.x=bt[0],ee.y=x,le[0]=ee,yt==2&&(ae.x=bt[1],ae.y=x,le[1]=ae)}else{if(ee.x=a.Gz(T,A,Ie,ze,f),isNaN(ee.x))break;ee.y=0,le[0]=ee,yt=1}var Kt=-1;for(bt=0;bt<yt;bt++){h.kb.xd(T,A,Ie.x,Ie.y,ze.x,ze.y,H,null,null,f);var Qt=H.u;h.kb.xd(T,A,Ie.x,Ie.y,le[bt].x,le[bt].y,H,null,null,f);var br=H.u;if(u.Tb()==2?(j[0][0]=le[bt].x/E,j[0][1]=le[bt].y/E,h.gj.geogToProj(F,1,j),m?(G.y=j[0][1],G.x=w):(G.x=a.qs(j[0][0],ie.x,be.x,P),G.y=w)):m?(G.x=w,G.y=le[bt].y/E):(G.x=a.qs(le[bt].x/E,ie.x,be.x,P),G.y=w),W[0]=0<Qt?h.P.Sk(br/Qt,0,1):.5,W[0]==0||W[0]==1)break;Kt>W[0]||(Kt=n.Na(Ye),n.Wl(Kt,W,1),n.Db(n.V(Kt),G.x,G.y),Kt=W[0])}}while(0);ie.N(be)}}},a.an=function(n,o){var u=o.wa-o.pa;return o.Kt(n-Math.floor((n-o.pa)/u)*u)},a.qs=function(n,o,u,p){var f=new h.Oc;for(f.L(o,u),u=p.S(),n=Math.floor((n-o)/u)*u+n,f=f.tf();Math.abs(n-f)>Math.abs(n+u-f);)n+=u;return n},a.Tn=function(n,o,u){return n=h.sr.Ep(n),o=h.sr.mx(n,h.sr.Ep(o)),(u=h.sr.mx(n,h.sr.Ep(u)))==0||0<o&&0<u&&u<=o||0>o&&0>u&&u>=o},a.Iz=function(n,o,u,p,f,m){if(m==c.GreatElliptic)return h.Nx.KS(o,u,p,f);if(Math.abs(u.x-p.x)>=Math.PI||!a.Tn(u.x,p.x,f))return NaN;if(u.x>p.x)var w=p;else w=u,u=p;p=new h.ha;var x=new h.ha,E=new h.ha;h.kb.xd(n,o,w.x,w.y,u.x,u.y,x,p,null,m);var T=x.u,A=0,P=1,F=new h.h;for(F.N(w);T*(P-A)>1e-12*n;){var j=.5*(A+P);if(h.kb.qj(n,o,w.x,w.y,T*j,p.u,x,E,m),F.x=x.u,F.y=E.u,F.x==f)break;if(a.Tn(w.x,F.x,f))P=j;else{if(!a.Tn(u.x,F.x,f))return NaN;A=j}}return F.y},a.Gz=function(n,o,u,p,f){if(f==c.GreatElliptic)return n=[0,0],h.Nx.Jz(o,u,p,0,n),n[0];if(u.y>p.y)var m=p;else m=u,u=p;if((p=new h.Oc).L(m.y,u.y),!p.contains(0)||Math.abs(m.x-u.x)>=Math.PI)return NaN;if(m.x==u.x)return m.x;var w=new h.ha,x=new h.ha,E=new h.ha;h.kb.xd(n,o,m.x,m.y,u.x,u.y,x,w,null,f);var T=x.u,A=0,P=1,F=new h.h;for(F.N(m);T*(P-A)>1e-12*n;){var j=.5*(A+P);if(h.kb.qj(n,o,m.x,m.y,T*j,w.u,x,E,f),F.x=x.u,F.y=E.u,p.L(m.y,F.y),F.y==0)break;if(p.contains(0))P=j;else{if(p.L(u.y,F.y),!p.contains(0))return NaN;A=j}}return F.x},a.QI=function(n,o,u,p){if(!n.ef.Xc())return!1;var f=new h.de(o.description);if(f.Gd(o,0,-1),p=h.Gx.local().W(f,n,p),f=o.I(),u.Pa(),f!=p.I())return!1;var m=new h.l;o.A(m);var w=new h.l;if(p.A(w),m=m.S(),w=w.S(),m!=0&&w!=0){if(w/=m,n=n.Zf.ih().S()/n.ef.ih().S(),1e-10<Math.abs(w/n-1))return!1}else if(m!=0||w!=0)return!1;for(u.add(o,!1),o=new h.h,n=0;n<f;n++)p.D(n,o),u.Db(n,o);return!0},a.kN=function(n,o){return(n%=360*o)>=180*o&&(n-=360*o),n},a.NI=function(n,o,u,p){if(u==L.Clip){var f=o.ol();f.K()==197?(u=new h.l,f.A(u),f=h.ta.py(o,u),n=h.ti.clip(n,u,f,5e4*o.rm(),p)):h.fj.local().W(1,f,n,o,p)||(n=h.Xk.local().W(n,f,o,p))==f&&(n=h.Wk.ig(n))}else o.Xc()&&(p=new h.l,n.yc(p),o.Le().contains(p)||(a.Lt(n,o.Le(),o.Yd(0),!0),u==L.PannableFold&&(n=a.nj(n,o)),n=a.Gn(n,o,0,!0,1e5*o.rm(),null)));return n},a.RD=function(n,o,u){var p=o.Yr();if(p==null)return n;var f=(o=o.tc()).Le().S(),m=new h.l;n.yc(m);var w=new h.Oc;m.en(w),m=p.Ha(),p=null;for(var x=new h.Ed;m.ab();)for(;m.Ia();){var E=m.ia(),T=E.Vg(0,0),A=new h.Oc;for(A.L(T.pa,T.wa),T=0;A.wa>w.pa;)A.move(-f),--T;for(;A.pa<=w.wa;){if(A.isIntersecting(w)){p==null&&(p=new h.Ua);var P=h.zb.XO(E.ac(),E.xc());T!=0&&(x.gg(T*f,0),P.Pc(x)),p.oc(P,!0)}A.move(f),++T}}return p!=null?(o=h.ta.aO(o,p),o=h.ta.Gr(o),h.bu.fP(n,p,o,u)):n},a.ZN=function(n,o,u,p,f){return n>=u&&o<=p?0:a.nE(.5*(o+n),u,p,f)},a.nE=function(n,o,u,p){return h.mc.round((.5*(u+o)-n)/p)*p},a.PQ=function(n,o,u,p,f,m,w,x){var E=a.fv(p,f),T=E.S(),A=T/360,P=a.jE*A,F=n.vb(0),j=o.Xc(),H=j?T/o.Le().S():0;o=n.Ja();for(var W=0,G=u.ea();W<G;++W){var ee=j,ae=new h.Ua(u.description);ae.addPath(u,W,!0);var le=u.ec(W);w!=0&&(le=a.JD(le,ae,E.H-x,E.H,w))&&(ee=!1);var ie=-1;le=ae.I();var be=!1;ee&&(ie=n.Ca(W),be=n.ec(W));var Ie=ae.vb(0),ze=0,Fe=Ie.read(0),Oe=0,Ye=3*p.Yd(0),yt=!1,bt=new h.h;bt.Sc();var Kt=new h.h;Kt.Sc();for(var Qt=!1,br=1;br<le;++br){var Ci=h.h.construct(Ie.Bg(2*br),Ie.Bg(2*br+1)),at=Ci.x,di=at+ze,Vt=di-Fe;if(Ci.x=di,Math.abs(Vt)>P){if(ee){var Fi=ie+br-1,Di=ie;(!be||br+1<le)&&(Di+=br),Fi=F.read(2*Fi),Di=(F.read(2*Di)-Fi)*H,Math.abs(Vt-Di)>1*A&&(j=!1)}ee||(di=at+(ze-=h.mc.Dn(T,di-Fe)),++Oe,Qt=ze!=0,Ci.x=di)}else yt||h.ta.uG(bt,Kt,Ci,Ye)&&(yt=!0);Qt&&Ie.write(2*br,di),Fe=di,bt.N(Kt),Kt.N(Ci)}Oe!=0&&ae.Qc(1993),ee=ae.Oa(0),le=ae.Oa(le-1),h.h.ub(ee,le),ae=a.qQ(ae,p,isNaN(f)?0:f,m),o.add(ae,!1)}return n=p.Yd(0),u=E.S()/180,a.Lt(o,E,.1*n,!1),h.ti.clip(o,E,n,u,m)},a.qQ=function(n,o,u,p){return a.Gn(n,o,u,!0,0,p)},a.HS=function(n,o,u,p){var f=n.K();if(f==1736)for(o=o!=null?o.Yd(0):0,f=0;f<p;f++)h.jd.Zd(n,u[f],o)!=1&&u[f].Sc();else{if(f!=197)throw h.i.O();for(f=0;f<p;f++)n.YO(u[f])||u[f].Sc()}},a.bl=function(n,o,u,p){if(32>u)for(var f=new h.Ta,m=0;m<u;m++)f.Db(o[m]),n.bl(f,p).D(o[m]);else{var w=new h.de;for(w.se(3),w.BD(o,u),f=w.vb(3),m=0;m<u;m++)f.write(m,m);for(m=n.bl(w,p),n=m.vb(0),f=m.vb(3),p=h.h.construct(NaN,NaN),w=0;w<u;w++)o[w]=p;for(u=m.I(),m=0;m<u;m++)p=f.read(m),n.uc(2*m,o[p])}},a.al=function(n,o,u,p){if(32>u)for(var f=new h.Ta,m=0;m<u;m++)f.Db(o[m]),n.al(f,p).D(o[m]);else{var w=new h.de;for(w.se(3),w.BD(o,u),f=w.vb(3),m=0;m<u;m++)f.write(m,m);for(m=n.al(w,p),n=m.vb(0),f=m.vb(3),p=h.h.construct(NaN,NaN),w=0;w<u;w++)o[w]=p;for(u=m.I(),m=0;m<u;m++)p=f.read(m),n.uc(2*m,o[p])}},a.jE=210,a}()}(X||(X={})),function(h){var L;(L=h.OL||(h.OL={}))[L.rightSide=1]="rightSide";var b=function(){function c(a,n,o){this.Ds=new h.h,a===void 0?this.Jo=-1:(this.Ds.N(a),this.Jo=n,this.La=o,this.pw=0)}return c.prototype.QJ=function(a){this.pw=a?1|this.pw:-2&this.pw},c.prototype.B=function(){return 0>this.Jo},c.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Ds.x,this.Ds.y)},c.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Jo},c.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},c.prototype.Nz=function(){return(1&this.pw)!=0},c.prototype.by=function(a,n,o,u){this.Ds.x=a,this.Ds.y=n,this.Jo=o,this.La=u},c}();h.bm=b}(X||(X={})),function(h){var L=function(){function c(){}return c.prototype.Vo=function(a,n){this.vh.resize(0),this.Ki.length=0,this.uk=-1,a.yc(this.Fk),this.Fk.X(n,n),this.Fk.isIntersecting(this.Gb.Da)?((this.xs=h.ba.zd(a.K()))?(this.NH=a.ac(),this.MH=a.xc(),this.ra=n):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},c.prototype.Zi=function(a,n){this.vh.resize(0),this.Ki.length=0,this.uk=-1,this.Fk.L(a),this.Fk.X(n,n),this.ra=NaN,this.Fk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},c.prototype.next=function(){if(this.vh.size==0)return-1;this.uk=this.Ss;var a=null,n=null,o=null,u=null;this.xs&&(a=new h.h,n=new h.h,o=new h.l);for(var p=!1;!p;){for(;this.uk!=-1;){var f=this.Gb.Xy(this.Gb.hv(this.uk));if(f.isIntersecting(this.Fk)){if(!this.xs){p=!0;break}if(a.N(this.NH),n.N(this.MH),o.L(f),o.X(this.ra,this.ra),0<o.uy(a,n)){p=!0;break}}this.uk=this.Gb.pv(this.uk)}if(this.uk==-1){f=this.vh.Gc();var m=this.Ki[this.Ki.length-1];for(u==null&&((u=[])[0]=new h.l,u[1]=new h.l,u[2]=new h.l,u[3]=new h.l),b.yJ(m,u),this.vh.Jf(),--this.Ki.length,m=0;4>m;m++){var w=this.Gb.Np(f,m);if(w!=-1&&0<this.Gb.PR(w)&&u[m].isIntersecting(this.Fk))if(this.xs){if(a.N(this.NH),n.N(this.MH),o.L(u[m]),o.X(this.ra,this.ra),0<o.uy(a,n)){var x=new h.l;x.L(u[m]),this.vh.add(w),this.Ki.push(x)}}else(x=new h.l).L(u[m]),this.vh.add(w),this.Ki.push(x)}if(this.vh.size==0)return-1;this.uk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.uk),this.uk},c.WO=function(a,n,o){var u=new c;return u.Gb=a,u.Fk=new h.l,u.vh=new h.ja(0),u.Ki=[],u.Vo(n,o),u},c.VO=function(a,n,o){var u=new c;return u.Gb=a,u.Fk=new h.l,u.vh=new h.ja(0),u.Ki=[],u.Zi(n,o),u},c.UO=function(a){var n=new c;return n.Gb=a,n.Fk=new h.l,n.vh=new h.ja(0),n.Ki=[],n},c}();h.yY=L;var b=function(){function c(a,n){this.jf=new h.ad(11),this.ai=new h.ad(5),this.ys=[],this.iw=new h.ja(0),this.Da=new h.l,this.Ok(a,n)}return c.prototype.reset=function(a,n){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Ok(a,n)},c.prototype.xj=function(a,n){return this.Bv(a,n,0,this.Da,this.kf,!1,-1)},c.prototype.Ez=function(a,n,o){o=o==-1?this.kf:this.QF(o);var u=this.da(o),p=this.iR(o);return this.Bv(a,n,u,p,o,!1,-1)},c.prototype.ka=function(a){return this.dR(a)},c.prototype.AF=function(a){return this.Xy(this.hv(a))},c.prototype.da=function(a){return this.lv(a)},c.prototype.iR=function(a){var n=new h.l;n.L(this.Da);var o=this.lv(a);a=this.KF(a);for(var u=0;u<2*o;u+=2){var p=h.P.truncate(3&a>>u);p==0?(n.v=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):p==1?(n.C=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):(p==2?n.C=.5*(n.v+n.C):n.v=.5*(n.v+n.C),n.H=.5*(n.G+n.H))}return n},c.prototype.PR=function(a){return this.vz(a)},c.prototype.oR=function(a,n){return L.WO(this,a,n)},c.prototype.GF=function(a,n){return L.VO(this,a,n)},c.prototype.getIterator=function(){return L.UO(this)},c.prototype.Ok=function(a,n){if(0>n||32<2*n)throw h.i.O("invalid height");this.tT=n,this.Da.L(a),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.HJ(this.kf,0),this.EJ(this.kf,0)},c.prototype.Bv=function(a,n,o,u,p,f,m){if(!u.contains(n))return o==0?-1:this.Bv(a,n,0,this.Da,this.kf,f,m);if(!f)for(var w=p;w!=-1;w=this.CR(w))this.jx(w,this.vz(w)+1);(w=new h.l).L(u),u=p;var x=[];for(x[0]=new h.l,x[1]=new h.l,x[2]=new h.l,x[3]=new h.l;o<this.tT&&this.cO(u);o++){c.yJ(w,x);for(var E=!1,T=0;4>T;T++)if(x[T].contains(n)){E=!0;var A=this.Np(u,T);A==-1&&(A=this.lP(u,T)),this.jx(A,this.vz(A)+1),u=A,w.L(x[T]);break}if(!E)break}return this.lS(a,n,o,w,u,f,p,m)},c.prototype.lS=function(a,n,o,u,p,f,m,w){var x=this.HF(p);if(f){if(p==m)return w;this.MP(w),f=w}else f=this.nP(),this.HB(f,a),this.BW(this.hv(f),n);return this.dX(f,p),x!=-1?(this.hx(f,x),this.ex(x,f)):this.AJ(p,f),this.MB(p,f),this.dx(p,this.nv(p)+1),this.bO(p)&&this.GQ(o,u,p),f},c.prototype.MP=function(a){var n=this.QF(a),o=this.HF(n),u=this.HR(a),p=this.pv(a);this.Wr(n)==a?(p!=-1?this.hx(p,-1):this.MB(n,-1),this.AJ(n,p)):o==a?(this.ex(u,-1),this.MB(n,u)):(this.hx(p,u),this.ex(u,p)),this.hx(a,-1),this.ex(a,-1),this.dx(n,this.nv(n)-1)},c.yJ=function(a,n){var o=.5*(a.v+a.C),u=.5*(a.G+a.H);n[0].L(o,u,a.C,a.H),n[1].L(a.v,u,o,a.H),n[2].L(a.v,a.G,o,u),n[3].L(o,a.G,a.C,u)},c.prototype.bO=function(a){return this.nv(a)==8&&!this.aG(a)},c.prototype.GQ=function(a,n,o){var u=this.Wr(o);do{var p=this.hv(u),f=this.ai.U(u,0);p=this.Xy(p),this.Bv(f,p,a,n,o,!0,u),u=f=this.pv(u)}while(u!=-1)},c.prototype.cO=function(a){return 8<=this.nv(a)||this.aG(a)},c.prototype.aG=function(a){return this.Np(a,0)!=-1||this.Np(a,1)!=-1||this.Np(a,2)!=-1||this.Np(a,3)!=-1},c.prototype.lP=function(a,n){var o=this.jf.De();return this.GW(a,n,o),this.jx(o,0),this.dx(o,0),this.Qk(o,a),this.EJ(o,this.lv(a)+1),this.HJ(o,n<<2*this.lv(a)|this.KF(a)),o},c.prototype.nP=function(){var a=this.ai.De();if(0<this.iw.size){var n=this.iw.Gc();this.iw.Jf()}else n=this.ys.length,this.ys.push(new h.l);return this.DW(a,n),a},c.prototype.Np=function(a,n){return this.jf.U(a,n)},c.prototype.GW=function(a,n,o){this.jf.T(a,n,o)},c.prototype.Wr=function(a){return this.jf.U(a,4)},c.prototype.AJ=function(a,n){this.jf.T(a,4,n)},c.prototype.HF=function(a){return this.jf.U(a,5)},c.prototype.MB=function(a,n){this.jf.T(a,5,n)},c.prototype.KF=function(a){return this.jf.U(a,6)},c.prototype.HJ=function(a,n){this.jf.T(a,6,n)},c.prototype.nv=function(a){return this.jf.U(a,7)},c.prototype.vz=function(a){return this.jf.U(a,8)},c.prototype.dx=function(a,n){this.jf.T(a,7,n)},c.prototype.jx=function(a,n){this.jf.T(a,8,n)},c.prototype.CR=function(a){return this.jf.U(a,9)},c.prototype.Qk=function(a,n){this.jf.T(a,9,n)},c.prototype.lv=function(a){return this.jf.U(a,10)},c.prototype.EJ=function(a,n){this.jf.T(a,10,n)},c.prototype.dR=function(a){return this.ai.U(a,0)},c.prototype.HB=function(a,n){this.ai.T(a,0,n)},c.prototype.HR=function(a){return this.ai.U(a,1)},c.prototype.pv=function(a){return this.ai.U(a,2)},c.prototype.hx=function(a,n){this.ai.T(a,1,n)},c.prototype.ex=function(a,n){this.ai.T(a,2,n)},c.prototype.QF=function(a){return this.ai.U(a,3)},c.prototype.dX=function(a,n){this.ai.T(a,3,n)},c.prototype.hv=function(a){return this.ai.U(a,4)},c.prototype.DW=function(a,n){this.ai.T(a,4,n)},c.prototype.Xy=function(a){return this.ys[a]},c.prototype.BW=function(a,n){this.ys[a].L(n)},c}();h.fu=b}(X||(X={})),function(h){var L;(L=h.VK||(h.VK={}))[L.Outside=0]="Outside",L[L.Inside=1]="Inside",L[L.Border=2]="Border";var b=function(){function a(n,o){this.HT=o,this.Xh=n}return a.prototype.ax=function(n,o){this.cH!=o&&n.flush(),this.cH=o},a.prototype.aF=function(n,o){for(var u=0;u<o;)for(var p=n[u++],f=n[u++],m=n[u++]*this.HT;p<f;p++)this.Xh[m+(p>>4)]|=this.cH<<2*(15&p)},a}();h.zY=b;var c=function(){function a(n,o,u){this.Xh=null,this.MA=this.Jk=this.XH=this.VH=this.Gs=this.kH=this.Hf=this.Wm=0,this.Ti=this.Kk=this.xl=null,this.Az(n,o,u)}return a.create=function(n,o,u){if(!a.tE(n))throw h.i.O();return a.qP(n,o,u)},a.hW=function(n){switch(n){case 0:n=1024;break;case 1:n=16384;break;case 2:n=262144;break;default:throw h.i.ga("Internal Error")}return n},a.tE=function(n){return!(n.B()||n.K()!=1607&&n.K()!=1736)},a.prototype.lQ=function(n,o){o=o.Ha();for(var u=new h.h,p=new h.h;o.ab();)for(;o.Ia();){var f=o.ia();if(f.K()!=322)throw h.i.ga("Internal Error");n.Gh(f.ac(),u),n.Gh(f.xc(),p),this.Ti.fy(u.x,u.y,p.x,p.y)}this.Ti.cJ(h.Ox.Bx)},a.prototype.mQ=function(){throw h.i.ga("Internal Error")},a.prototype.My=function(n,o){for(var u=1;4>u;u++)n.fy(o[u-1].x,o[u-1].y,o[u].x,o[u].y);n.fy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ti.cJ(h.Ox.Bx)},a.prototype.lK=function(n,o,u){for(var p=[null,null,null,null],f=0;f<p.length;f++)p[f]=new h.h;o=o.Ha(),u=this.Kk.WX(u)+1.5,f=new h.h;for(var m=new h.h,w=new h.h,x=new h.h,E=new h.h,T=new h.l,A=new h.h;o.ab();){var P=!1,F=!0;for(A.na(0,0);o.Ia();){var j=o.ia();if(x.x=j.sa,x.y=j.oa,E.x=j.qa,E.y=j.ma,T.Pa(),T.$b(x.x,x.y),T.Mk(E.x,E.y),this.xl.BG(T)){this.Kk.Gh(E,E),F?(this.Kk.Gh(x,x),A.N(x),F=!1):x.N(A),f.vc(E,x);var H=.5>(j=f.length());j==0?f.na(1,0):(H||A.N(E),f.scale(u/j),m.na(-f.y,f.x),w.na(f.y,-f.x),x.sub(f),E.add(f),p[0].add(x,m),p[1].add(x,w),p[2].add(E,w),p[3].add(E,m),H?P=!0:this.My(n,p))}else P&&(this.My(n,p),P=!1),F=!0}P&&this.My(n,p)}},a.prototype.mC=function(n){return h.P.truncate(n*this.kH+this.VH)},a.prototype.nC=function(n){return h.P.truncate(n*this.Gs+this.XH)},a.qP=function(n,o,u){return new a(n,o,u)},a.prototype.Az=function(n,o,u){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(u)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Jk=o,u=0;for(var p=this.Hf,f=this.Wm;8<=p;)u+=p*f,p=h.P.truncate(p/2),f=h.P.truncate((2*p+31)/32);this.Xh=h.P.lg(u,0),this.Ti=new h.Ox,u=new b(this.Xh,this.Wm,this),this.Ti.sX(this.Hf,this.Hf,u),n.A(this.xl),this.xl.X(o,o),p=new h.l;var m=o*(f=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(o*=f.da(),p.L(this.xl.tf(),Math.max(m,this.xl.S()),Math.max(o,this.xl.da())),this.MA=this.Jk,this.Kk=new h.Ed,this.Kk.iS(p,f),new h.Ed,n.K()){case 550:u.ax(this.Ti,2),this.mQ();break;case 1607:u.ax(this.Ti,2),this.lK(this.Ti,n,this.MA);break;case 1736:u.ax(this.Ti,1),this.lQ(this.Kk,n),u.ax(this.Ti,2),this.lK(this.Ti,n,this.MA)}this.kH=this.Kk.eb,this.Gs=this.Kk.bb,this.VH=this.Kk.Lb,this.XH=this.Kk.Qb,this.RN()},a.prototype.RN=function(){this.Ti.flush();for(var n=0,o=this.Hf*this.Wm,u=this.Hf,p=h.P.truncate(this.Hf/2),f=this.Wm,m=h.P.truncate((2*p+31)/32);8<u;){for(u=0;u<p;u++)for(var w=2*u,x=2*u+1,E=0;E<p;E++){var T=2*E,A=2*E+1,P=T>>4;T=2*(15&T);var F=A>>4;A=2*(15&A);var j=this.Xh[n+f*w+P]>>T&3;j|=this.Xh[n+f*w+F]>>A&3,j|=this.Xh[n+f*x+P]>>T&3,j|=this.Xh[n+f*x+F]>>A&3,this.Xh[o+m*u+(E>>4)]|=j<<2*(15&E)}u=p,f=m,n=o,p=h.P.truncate(u/2),m=h.P.truncate((2*p+31)/32),o=n+f*u}},a.prototype.To=function(n,o){return this.xl.contains(n,o)?(n=this.mC(n),o=this.nC(o),0>n||n>=this.Hf||0>o||o>=this.Hf||(o=this.Xh[this.Wm*o+(n>>4)]>>2*(15&n)&3)==0?0:o==1?1:2):0},a.prototype.So=function(n){if(!n.Fa(this.xl))return 0;var o=this.mC(n.v),u=this.mC(n.C),p=this.nC(n.G);if(n=this.nC(n.H),0>o&&(o=0),0>p&&(p=0),u>=this.Hf&&(u=this.Hf-1),n>=this.Hf&&(n=this.Hf-1),o>u||p>n)return 0;for(var f=Math.max(u-o,1)*Math.max(n-p,1),m=0,w=this.Wm,x=this.Hf,E=0;;){if(32>f||16>x){for(f=p;f<=n;f++)for(var T=o;T<=u;T++)if(1<(E=this.Xh[m+w*f+(T>>4)]>>2*(15&T)&3))return 2;if(E==0)return 0;if(E==1)return 1}m+=w*x,x=h.P.truncate(x/2),w=h.P.truncate((2*x+31)/32),o=h.P.truncate(o/2),p=h.P.truncate(p/2),u=h.P.truncate(u/2),n=h.P.truncate(n/2),f=Math.max(u-o,1)*Math.max(n-p,1)}},a.prototype.KR=function(){return this.Hf*this.Wm},a}();h.Mx=c}(X||(X={})),function(h){var L;(L=h.PL||(h.PL={}))[L.contains=1]="contains",L[L.within=2]="within",L[L.equals=3]="equals",L[L.disjoint=4]="disjoint",L[L.touches=8]="touches",L[L.crosses=16]="crosses",L[L.overlaps=32]="overlaps",L[L.unknown=0]="unknown",L[L.intersects=1073741824]="intersects";var b=function(){function a(){}return a.construct=function(n,o,u,p,f,m,w,x){var E=new a;return E.rw=n,E.Om=o,E.Mj=u,E.Ui=p,E.vH=f,E.KY=m,E.LY=w,E.MY=x,E},a}();h.Xt=function(){function a(){}return a.wD=function(n,o,u){if(a.ry(n)){var p=h.ta.mj(o,n,!1);o=!1,h.Vk.wE(n)&&(o=o||n.nu(p,u)),(p=n.K())!=1736&&p!=1607||!h.Vk.uE(n)||u==0||(o=o||n.hj(u)),p!=1736&&p!=1607||!h.Vk.vE(n)||u==0||o||n.bM()}},a.ry=function(n){return h.Vk.wE(n)||h.Vk.uE(n)||h.Vk.vE(n)},a}();var c=function(){function a(){this.th=[]}return a.tB=function(n,o,u,p,f){var m=n.K(),w=o.K();if(m==197){if(w==197)return a.lW(n,o,u,p);if(w==33)return p==2?p=1:p==1&&(p=2),a.bJ(o,n,u,p)}else if(m==33){if(w==197)return a.bJ(n,o,u,p);if(w==33)return a.nW(n,o,u,p)}if(n.B()||o.B())return p==4;var x=new h.l;n.A(x);var E=new h.l;o.A(E);var T=new h.l;if(T.L(x),T.$b(E),u=h.ta.Xd(u,T,!1),a.ek(x,E,u))return p==4;switch(x=!1,h.Wk.zd(m)&&((m=new h.Ua(n.description)).oc(n,!0),n=m,m=1607),h.Wk.zd(w)&&((w=new h.Ua(o.description)).oc(o,!0),o=w,w=1607),m!=197&&w!=197?(n.Eb()<o.Eb()||m==33&&w==550)&&(p==2?p=1:p==1&&(p=2)):m!=1736&&w!=197&&(p==2?p=1:p==1&&(p=2)),m){case 1736:switch(w){case 1736:x=a.st(n,o,u,p,f);break;case 1607:x=a.bn(n,o,u,p,f);break;case 33:x=a.rt(n,o,u,p);break;case 550:x=a.qt(n,o,u,p,f);break;case 197:x=a.AI(n,o,u,p,f)}break;case 1607:switch(w){case 1736:x=a.bn(o,n,u,p,f);break;case 1607:x=a.aB(n,o,u,p,f);break;case 33:x=a.ut(n,o,u,p,f);break;case 550:x=a.tt(n,o,u,p,f);break;case 197:x=a.GI(n,o,u,p)}break;case 33:switch(w){case 1736:x=a.rt(o,n,u,p);break;case 1607:x=a.ut(o,n,u,p,f);break;case 550:x=a.mt(o,n,u,p)}break;case 550:switch(w){case 1736:x=a.qt(o,n,u,p,f);break;case 1607:x=a.tt(o,n,u,p,f);break;case 550:x=a.TA(n,o,u,p,f);break;case 33:x=a.mt(n,o,u,p);break;case 197:x=a.bI(n,o,u,p)}break;case 197:switch(w){case 1736:x=a.AI(o,n,u,p,f);break;case 1607:x=a.GI(o,n,u,p);break;case 550:x=a.bI(o,n,u,p)}}return x},a.lW=function(n,o,u,p){if(n.B()||o.B())return p==4;var f=new h.l,m=new h.l,w=new h.l;switch(n.A(f),o.A(m),w.L(f),w.$b(m),n=h.ta.Xd(u,w,!1),p){case 4:return a.ek(f,m,n);case 2:return a.dF(m,f,n);case 1:return a.dF(f,m,n);case 3:return a.fk(f,m,n);case 8:return a.XP(f,m,n);case 32:return a.WP(f,m,n);case 16:return a.VP(f,m,n)}return!1},a.bJ=function(n,o,u,p){if(n.B()||o.B())return p==4;n=n.D();var f=new h.l,m=new h.l;switch(o.A(f),m.L(n),m.$b(f),o=h.ta.Xd(u,m,!1),p){case 4:return a.Tw(n,f,o);case 2:return a.ZA(n,f,o);case 1:return a.JU(n,f,o);case 3:return a.pI(n,f,o);case 8:return a.YA(n,f,o)}return!1},a.nW=function(n,o,u,p){if(n.B()||o.B())return p==4;n=n.D(),o=o.D();var f=new h.l;switch(f.L(n),f.$b(o),u=h.ta.Xd(u,f,!1),p){case 4:return a.KU(n,o,u);case 2:return a.oI(o,n,u);case 1:return a.oI(n,o,u);case 3:return a.qI(n,o,u)}return!1},a.st=function(n,o,u,p,f){switch(p){case 4:return a.cV(n,o,u);case 2:return a.Uw(o,n,u,f);case 1:return a.Uw(n,o,u,f);case 3:return a.fV(n,o,u);case 8:return a.nV(n,o,u);case 32:return a.iV(n,o,u,f)}return!1},a.bn=function(n,o,u,p,f){switch(p){case 4:return a.dV(n,o,u);case 1:return a.$A(n,o,u,f);case 8:return a.oV(n,o,u,f);case 16:return a.ZU(n,o,u)}return!1},a.rt=function(n,o,u,p){switch(p){case 4:return a.bV(n,o,u);case 1:return a.WU(n,o,u);case 8:return a.mV(n,o,u)}return!1},a.qt=function(n,o,u,p){switch(p){case 4:return a.aV(n,o,u);case 1:return a.VU(n,o,u);case 8:return a.lV(n,o,u);case 16:return a.YU(n,o,u)}return!1},a.AI=function(n,o,u,p,f){if(a.$U(n,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.pV(n,o,u);case 1:return a.UU(n,o,u);case 3:return a.eV(n,o,u);case 8:return a.kV(n,o,u,f);case 32:return a.hV(n,o,u,f);case 16:return a.XU(n,o,u,f)}return!1},a.aB=function(n,o,u,p){switch(p){case 4:return a.yV(n,o,u);case 2:return a.EI(o,n,u);case 1:return a.EI(n,o,u);case 3:return a.AV(n,o,u);case 8:return a.HI(n,o,u);case 32:return a.EV(n,o,u);case 16:return a.FI(n,o,u)}return!1},a.ut=function(n,o,u,p){switch(p){case 4:return a.xV(n,o,u);case 1:return a.sV(n,o,u);case 8:return a.IV(n,o,u)}return!1},a.tt=function(n,o,u,p){switch(p){case 4:return a.wV(n,o,u);case 1:return a.rV(n,o,u);case 8:return a.HV(n,o,u);case 16:return a.uV(n,o,u)}return!1},a.GI=function(n,o,u,p){if(a.vV(n,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.JV(n,o,u);case 1:return a.qV(n,o,u);case 3:return a.zV(n,o,u);case 8:return a.GV(n,o,u);case 32:return a.DV(n,o,u);case 16:return a.tV(n,o,u)}return!1},a.TA=function(n,o,u,p){switch(p){case 4:return a.ZT(n,o,u);case 2:return a.ZH(o,n,u);case 1:return a.ZH(n,o,u);case 3:return a.aU(n,o,u);case 32:return a.gU(n,o,u)}return!1},a.mt=function(n,o,u,p){switch(p){case 4:return a.$H(n,o,u);case 2:return a.kU(n,o,u);case 1:return a.WT(n,o,u);case 3:return a.Pw(n,o,u)}return!1},a.bI=function(n,o,u,p){switch(p){case 4:return a.YT(n,o,u);case 2:return a.jU(n,o,u);case 1:return a.VT(n,o,u);case 3:return a.$T(n,o,u);case 8:return a.iU(n,o,u);case 16:return a.XT(n,o,u)}return!1},a.fV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.fk(p,f,u)&&(p=a.qc(n,o,!1))!=4&&p!=1&&p!=2&&(!!a.YH(n,o,u)||(p=n.Rb(),f=o.Rb(),!(Math.abs(p-f)>4*Math.max(n.I(),o.I())*u)&&a.Rz(n,o,u,!0)))},a.cV=function(n,o,u){var p=a.qc(n,o,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&a.yI(n,o,u)},a.nV=function(n,o,u){var p=a.qc(n,o,!1);return p!=4&&p!=1&&p!=2&&a.CI(n,o,u,null)},a.iV=function(n,o,u,p){var f=a.qc(n,o,!1);return f!=4&&f!=1&&f!=2&&a.zI(n,o,u,p)},a.Uw=function(n,o,u,p){var f=new h.l,m=new h.l;return n.A(f),o.A(m),!!a.Ac(f,m,u)&&(f=a.qc(n,o,!1))!=4&&f!=2&&(f==1||a.vI(n,o,u,p))},a.dV=function(n,o,u){var p=a.qc(n,o,!0);return p==4||p!=1&&p!=1073741824&&a.yI(n,o,u)},a.oV=function(n,o,u,p){var f=a.qc(n,o,!1);return f!=4&&f!=1&&a.DI(n,o,u,p)},a.ZU=function(n,o,u){var p=a.qc(n,o,!1);return p!=4&&p!=1&&a.xI(n,o,u,null)},a.$A=function(n,o,u,p){var f=new h.l,m=new h.l;return n.A(f),o.A(m),!!a.Ac(f,m,u)&&(f=a.qc(n,o,!1))!=4&&(f==1||a.wI(n,o,u,p))},a.bV=function(n,o,u){return h.jd.EG(n,o,u)==0},a.mV=function(n,o,u){return o=o.D(),a.BI(n,o,u)},a.WU=function(n,o,u){return o=o.D(),a.uI(n,o,u)},a.aV=function(n,o,u){var p=a.qc(n,o,!1);if(p==4)return!0;if(p==1)return!1;p=new h.l,n.A(p),p.X(u,u);for(var f=new h.h,m=0;m<o.I();m++)if(o.D(m,f),p.contains(f)){var w=h.jd.Zd(n,f,u);if(w==1||w==2)return!1}return!0},a.lV=function(n,o,u){var p=this.qc(n,o,!1);if(p==4||p==1)return!1;p=new h.l,n.A(p),p.X(u,u);for(var f=!1,m=n,w=!1,x=0;x<o.I();x++){var E=o.Oa(x);if(p.contains(E)){if((E=h.jd.Zd(m,E,u))==2)f=!0;else if(E==1)return!1}w||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?m=n:(m=new h.Ea,n.copyTo(m),m.hj(1)),w=!0)}return!!f},a.YU=function(n,o,u){var p=this.qc(n,o,!1);if(p==4||p==1)return!1;var f=new h.l;p=new h.l;var m=new h.l;n.A(f),o.A(m),p.L(f),p.X(u,u),m=f=!1;for(var w=n,x=!1,E=0;E<o.I();E++){var T=o.Oa(E);if(p.contains(T)?(T=h.jd.Zd(w,T,u))==0?m=!0:T==1&&(f=!0):m=!0,f&&m)return!0;x||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new h.Ea,n.copyTo(w),w.hj(1)),x=!0)}return!1},a.VU=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),!this.Ac(p,f,u)||(f=this.qc(n,o,!1))==4)return!1;if(f==1)return!0;f=!1;for(var m=n,w=!1,x=0;x<o.I();x++){var E=o.Oa(x);if(!p.contains(E))return!1;if((E=h.jd.Zd(m,E,u))==1)f=!0;else if(E==0)return!1;w||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?m=n:(m=new h.Ea,n.copyTo(m),m.hj(1)),w=!0)}return f},a.eV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.fk(p,f,u)&&((p=new h.Ea).bd(o,!1),a.Rz(n,p,u,!0))},a.$U=function(n,o,u){var p=a.qc(n,o,!1);if(p==4)return!0;if(p==1||p==2)return!1;var f=new h.l;if(p=new h.l,n.A(f),o.A(p),a.Ac(p,f,u)||(f=new h.h,p.fn(f),(o=h.jd.Zd(n,f,u))!=0)||(p.UI(f),(o=h.jd.Zd(n,f,u))!=0)||(p.gn(f),(o=h.jd.Zd(n,f,u))!=0)||(p.XI(f),(o=h.jd.Zd(n,f,u))!=0))return!1;o=n.vb(0),(f=new h.l).L(p),f.X(u,u);for(var m=0,w=n.I();m<w;m++){var x=o.read(2*m),E=o.read(2*m+1);if(f.contains(x,E))return!1}return!a.MG(n,p,u)},a.kV=function(n,o,u,p){var f=a.qc(n,o,!1);if(f==4||f==1||f==2)return!1;f=new h.l;var m=new h.l;return n.A(f),o.A(m),!a.Ac(m,f,u)&&(m.S()<=u&&m.da()<=u?(o=o.Kp(),a.BI(n,o,u)):m.S()<=u||m.da()<=u?(f=new h.Ua,m=new h.Ta,o.If(0,m),f.nf(m),o.If(2,m),f.lineTo(m),a.DI(n,f,u,p)):((f=new h.Ea).bd(o,!1),a.CI(n,f,u,p)))},a.hV=function(n,o,u,p){var f=a.qc(n,o,!1);if(f==4||f==1||f==2)return!1;f=new h.l;var m=new h.l;return n.A(f),o.A(m),!(a.Ac(m,f,u)||m.S()<=u||m.da()<=u)&&((f=new h.Ea).bd(o,!1),a.zI(n,f,u,p))},a.pV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),a.Ac(f,p,u)},a.UU=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.Ac(p,f,u)&&(p=a.qc(n,o,!1))!=4&&p!=2&&(p==1||(f.S()<=u&&f.da()<=u?(o=o.Kp(),a.uI(n,o,u)):f.S()<=u||f.da()<=u?(f=new h.Ua,p=new h.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.wI(n,f,u,null)):((f=new h.Ea).bd(o,!1),a.vI(n,f,u,null))))},a.XU=function(n,o,u,p){var f=new h.l,m=new h.l;return n.A(f),o.A(m),!(a.Ac(m,f,u)||m.da()>u&&m.S()>u||m.da()<=u&&m.S()<=u)&&(f=new h.Ua,m=new h.Ta,o.If(0,m),f.nf(m),o.If(2,m),f.lineTo(m),a.xI(n,f,u,p))},a.AV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.fk(p,f,u)||a.qc(n,o,!1)==4)&&(!!a.YH(n,o,u)||a.Rz(n,o,u,!1))},a.yV=function(n,o,u){return this.qc(n,o,!1)==4||!!new h.am(n,o,u,!0).next()&&!this.NG(n,o,u)},a.HI=function(n,o,u){if(a.qc(n,o,!1)==4)return!1;var p=new h.ce(0);if(a.Sz(n,o,u,p)!=0)return!1;for(var f=new h.de,m=0;m<p.size;m+=2){var w=p.read(m),x=p.read(m+1);f.Du(w,x)}return n=n.mg(),o=o.mg(),n.Gd(o,0,o.I()),a.Ow(n,f,u)},a.FI=function(n,o,u){if(a.qc(n,o,!1)==4)return!1;var p=new h.ce(0);if(a.Sz(n,o,u,p)!=0)return!1;for(var f=new h.de,m=0;m<p.size;m+=2){var w=p.read(m),x=p.read(m+1);f.Du(w,x)}return n=n.mg(),o=o.mg(),n.Gd(o,0,o.I()),!a.Ow(n,f,u)},a.EV=function(n,o,u){return a.qc(n,o,!1)!=4&&a.PG(n,o,u)},a.EI=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.Ac(p,f,u)||a.qc(n,o,!1)==4)&&a.Am(o,n,u,!1)},a.xV=function(n,o,u){return a.qc(n,o,!1)==4||(o=o.D(),!a.Tz(n,o,u))},a.IV=function(n,o,u){return a.qc(n,o,!1)!=4&&(o=o.D(),a.Uz(n,o,u))},a.sV=function(n,o,u){return a.qc(n,o,!1)!=4&&(o=o.D(),a.LG(n,o,u))},a.wV=function(n,o,u){return a.qc(n,o,!1)==4||!a.OG(n,o,u,!1)},a.HV=function(n,o,u){if(this.qc(n,o,!1)==4)return!1;var p=n.Ha(),f=new h.l,m=new h.l,w=new h.l;n.A(f),o.A(m),f.X(u,u),m.X(u,u),w.L(f),w.Fa(m),f=null;var x=n.Cb;if(x!=null){var E=x.Gb;f=x.Ao,E==null&&(E=x=h.ta.lj(n,w))}else E=x=h.ta.lj(n,w);var T=E.getIterator(),A=null;f!=null&&(A=f.getIterator());var P=new h.h,F=new h.h,j=!1,H=u*u;for(f=new h.rn(o.I()),x=0;x<o.I();x++)f.write(x,0);for(x=0;x<o.I();x++)if(o.D(x,P),w.contains(P)){if(m.L(P.x,P.y,P.x,P.y),A!=null&&(A.Zi(m,u),A.next()==-1))continue;T.Zi(m,u);for(var W=T.next();W!=-1;W=T.next())if(p.Wb(E.ka(W)),(W=p.ia()).ic(W.fe(P,!1),F),h.h.zc(P,F)<=H){f.write(x,1),j=!0;break}}if(!j)return!1;for(n=n.mg(),p=new h.de,m=new h.h,x=0;x<o.I();x++)f.read(x)!=0&&(o.D(x,m),p.Du(m.x,m.y));return this.Ow(n,p,u)},a.uV=function(n,o,u){if(this.qc(n,o,!1)==4)return!1;var p=n.Ha(),f=new h.l,m=new h.l,w=new h.l;n.A(f),o.A(m),f.X(u,u),m.X(u,u),w.L(f),w.Fa(m),f=null;var x=n.Cb;if(x!=null){var E=x.Gb;f=x.Ao,E==null&&(E=x=h.ta.lj(n,w))}else E=x=h.ta.lj(n,w);var T=E.getIterator(),A=null;f!=null&&(A=f.getIterator());var P=new h.h,F=new h.h,j=!1,H=!1,W=u*u;for(f=new h.rn(o.I()),x=0;x<o.I();x++)f.write(x,0);for(x=0;x<o.I();x++)if(o.D(x,P),w.contains(P)){if(m.L(P.x,P.y,P.x,P.y),A!=null&&(A.Zi(m,u),A.next()==-1)){H=!0;continue}T.Zi(m,u);for(var G=!1,ee=T.next();ee!=-1;ee=T.next())if(p.Wb(E.ka(ee)),(ee=p.ia()).ic(ee.fe(P,!1),F),h.h.zc(P,F)<=W){f.write(x,1),G=j=!0;break}G||(H=!0)}else H=!0;if(!j||!H)return!1;for(n=n.mg(),p=new h.de,m=new h.h,x=0;x<o.I();x++)f.read(x)!=0&&(o.D(x,m),p.Du(m.x,m.y));return!this.Ow(n,p,u)},a.rV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.Ac(p,f,u)||a.qc(n,o,!1)==4||!a.OG(n,o,u,!0))&&(n=n.mg(),!a.aI(n,o,u))},a.zV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(f.da()>u&&f.S()>u)&&a.fk(p,f,u)},a.vV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!a.Ac(f,p,u)&&!a.MG(n,f,u)},a.GV=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),f.da()<=u&&f.S()<=u)return f=o.Kp(),a.Uz(n,f,u);if(f.da()<=u||f.S()<=u)return f=new h.Ua,p=new h.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.HI(n,f,u);n=n.Ha(),o=new h.l,p=new h.l,o.L(f),p.L(f),o.X(-u,-u),p.X(u,u),f=!1;for(var m=new h.l,w=new h.l;n.ab();)for(;n.Ia();){if(n.ia().A(m),w.L(o),w.Fa(m),!w.B()&&(w.da()>u||w.S()>u))return!1;w.L(p),w.Fa(m),w.B()||(f=!0)}return f},a.DV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(a.Ac(p,f,u)||a.Ac(f,p,u)||a.Ac(f,p,u)||f.da()>u&&f.S()>u||f.da()<=u&&f.S()<=u)&&(p=new h.Ua,f=new h.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.PG(n,p,u))},a.JV=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),!a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return a.Ac(f,p,u);n=n.Ha(),(o=new h.l).L(f),o.X(-u,-u),f=!1,p=new h.l;for(var m=new h.l;n.ab();)for(;n.Ia();)n.ia().A(p),o.jm(p)?f=!0:(m.L(o),m.Fa(p),!m.B()&&(m.da()>u||m.S()>u)&&(f=!0));return f},a.qV=function(n,o,u){var p=new h.l,f=new h.l;return o.A(f),n.A(p),!(!a.Ac(p,f,u)||f.da()>u&&f.S()>u)&&(f.da()<=u&&f.S()<=u?(o=o.Kp(),a.LG(n,o,u)):(p=new h.Ua,f=new h.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.Am(p,n,u,!1)))},a.tV=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return p=new h.Ua,f=new h.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.FI(n,p,u);n=n.Ha(),o=new h.l,(p=new h.l).L(f),o.L(f),p.X(-u,-u),o.X(u,u);for(var m=f=!1,w=new h.l,x=new h.l;n.ab();)for(;n.Ia();)if(n.ia().A(w),m||o.contains(w)||(m=!0),f||(x.L(p),x.Fa(w),!x.B()&&(x.da()>u||x.S()>u)&&(f=!0)),f&&m)return!0;return!1},a.aU=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.fk(p,f,u)&&(!!a.bU(n,o,u)||a.SA(n,o,u,!1,!0,!1))},a.ZT=function(n,o,u){return!a.aI(n,o,u)},a.gU=function(n,o,u){return a.SA(n,o,u,!1,!1,!0)},a.ZH=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.Ac(p,f,u)&&a.SA(o,n,u,!0,!1,!1)},a.Ow=function(n,o,u){u*=u;for(var p=new h.h,f=new h.h,m=0;m<o.I();m++){o.D(m,f);for(var w=!1,x=0;x<n.I();x++)if(n.D(x,p),h.h.zc(p,f)<=u){w=!0;break}if(!w)return!1}return!0},a.Pw=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),a.fk(p,f,u)},a.$H=function(n,o,u){return o=o.D(),a.lt(n,o,u)},a.kU=function(n,o,u){return a.Pw(n,o,u)},a.WT=function(n,o,u){return!a.$H(n,o,u)},a.$T=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(f.da()>u||f.S()>u)&&a.fk(p,f,u)},a.YT=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),a.Ac(f,p,u))return!1;for((o=new h.l).L(f),o.X(u,u),u=new h.h,f=0;f<n.I();f++)if(n.D(f,u),o.contains(u))return!1;return!0},a.iU=function(n,o,u){var p=new h.l,f=new h.l,m=new h.l;if(o.A(p),p.da()<=u&&p.S()<=u)return!1;if(p.da()<=u||p.S()<=u){o=new h.h;var w=!1;f.L(p),m.L(p),f.X(u,u),p.da()>u?m.X(0,-u):m.X(-u,0);for(var x=0;x<n.I();x++)if(n.D(x,o),f.contains(o)){if(p.da()>u){if(o.y>m.G&&o.y<m.H)return!1}else if(o.x>m.v&&o.x<m.C)return!1;w=!0}return w}for(f.L(p),m.L(p),f.X(u,u),m.X(-u,-u),o=new h.h,w=!1,x=0;x<n.I();x++)if(n.D(x,o),f.contains(o)){if(m.jm(o))return!1;w=!0}return w},a.jU=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),!a.Ac(f,p,u))return!1;if(f.da()<=u&&f.S()<=u)return a.fk(p,f,u);if(f.da()<=u||f.S()<=u){o=!1,p=new h.l;var m=new h.l;p.L(f),m.L(f),f.da()>u?p.X(0,-u):p.X(-u,0),m.X(u,u);for(var w=new h.h,x=0;x<n.I();x++){if(n.D(x,w),!m.contains(w))return!1;f.da()>u?w.y>p.G&&w.y<p.H&&(o=!0):w.x>p.v&&w.x<p.C&&(o=!0)}return o}for(o=!1,p=new h.l,m=new h.l,p.L(f),m.L(f),p.X(-u,-u),m.X(u,u),w=new h.h,x=0;x<n.I();x++){if(n.D(x,w),!m.contains(w))return!1;p.jm(w)&&(o=!0)}return o},a.VT=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.Ac(p,f,u)||f.da()>u||f.S()>u)&&(o=o.Kp(),!a.lt(n,o,u))},a.XT=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u){o=new h.l,p=new h.l,o.L(f),f.da()>u?o.X(0,-u):o.X(-u,0),p.L(f),p.X(u,u);for(var m=new h.h,w=!1,x=!1,E=0;E<n.I();E++)if(n.D(E,m),w||(f.da()>u?m.y>o.G&&m.y<o.H&&(w=!0):m.x>o.v&&m.x<o.C&&(w=!0)),x||p.contains(m)||(x=!0),w&&x)return!0;return!1}for(o=new h.l,p=new h.l,o.L(f),o.X(-u,-u),p.L(f),p.X(u,u),m=new h.h,x=w=!1,E=0;E<n.I();E++)if(n.D(E,m),!w&&o.jm(m)&&(w=!0),x||p.contains(m)||(x=!0),w&&x)return!0;return!1},a.qI=function(n,o,u){return h.h.zc(n,o)<=u*u},a.KU=function(n,o,u){return h.h.zc(n,o)>u*u},a.oI=function(n,o,u){return a.qI(n,o,u)},a.pI=function(n,o,u){var p=new h.l;return p.L(n),a.fk(p,o,u)},a.Tw=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),!p.contains(n)},a.YA=function(n,o,u){if(o.da()<=u&&o.S()<=u)return!1;var p=new h.l,f=new h.l;if(p.L(o),p.X(u,u),!p.contains(n))return!1;if(o.da()<=u||o.S()<=u){if(f.L(o),o.da()>u?f.X(0,-u):f.X(-u,0),o.da()>u){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;return!0}return f.L(o),f.X(-u,-u),!f.jm(n)},a.ZA=function(n,o,u){if(o.da()<=u&&o.S()<=u)return!0;if(o.da()<=u||o.S()<=u){var p=new h.l;p.L(o),o.da()>u?p.X(0,-u):p.X(-u,0);var f=!1;return o.da()>u?n.y>p.G&&n.y<p.H&&(f=!0):n.x>p.v&&n.x<p.C&&(f=!0),f}return(p=new h.l).L(o),p.X(-u,-u),p.jm(n)},a.JU=function(n,o,u){return a.pI(n,o,u)},a.fk=function(n,o,u){return a.Ac(n,o,u)&&a.Ac(o,n,u)},a.ek=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),!n.isIntersecting(p)},a.XP=function(n,o,u){if(n.da()<=u&&n.S()<=u){var p=n.tf();return a.YA(p,o,u)}if(o.da()<=u&&o.S()<=u)return p=o.tf(),a.YA(p,n,u);if(n.da()>u&&n.S()>u&&(o.da()<=u||o.S()<=u)?p=o:(p=n,n=o),p.da()<=u||p.S()<=u){if(n.da()<=u||n.S()<=u){o=new h.zb;var f=new h.zb,m=[0,0],w=[0,0],x=new h.h;return p.fn(x),o.Ec(x),p.gn(x),o.Rc(x),n.fn(x),f.Ec(x),n.gn(x),f.Rc(x),o.Fa(f,null,m,w,u),o.Fa(f,null,null,null,u)==1&&(m[0]==0||m[1]==1||w[0]==0||w[1]==1)}return o=new h.l,f=new h.l,o.L(n),o.X(-u,-u),f.L(o),f.Fa(p),!(!f.B()&&(f.da()>u||f.S()>u))}return n.X(u,u),(f=new h.l).L(p),f.Fa(n),!(f.B()||!f.B()&&f.da()>u&&f.S()>u)},a.WP=function(n,o,u){if(a.Ac(n,o,u)||a.Ac(o,n,u)||n.da()<=u&&n.S()<=u||o.da()<=u&&o.S()<=u)return!1;if(n.da()<=u||n.S()<=u){if(o.da()>u&&o.S()>u)return!1;var p=new h.zb,f=new h.zb,m=[0,0],w=[0,0],x=new h.h;return n.fn(x),p.Ec(x),n.gn(x),p.Rc(x),o.fn(x),f.Ec(x),o.gn(x),f.Rc(x),p.Fa(f,null,m,w,u),p.Fa(f,null,null,null,u)==2&&(0<m[0]||1>m[1])&&(0<w[0]||1>w[1])}return!(o.da()<=u||o.S()<=u)&&((p=new h.l).L(n),p.Fa(o),!(p.B()||p.da()<=u||p.S()<=u))},a.dF=function(n,o,u){if(!a.Ac(n,o,u))return!1;if(n.da()<=u&&n.S()<=u)return n=n.tf(),a.ZA(n,o,u);if(o.da()<=u&&o.S()<=u)return o=o.tf(),a.ZA(o,n,u);if(n.da()<=u||n.S()<=u)return a.Ac(n,o,u);if(o.da()<=u||o.S()<=u){var p=new h.l;return p.L(n),p.X(-u,-u),p.jm(o)?!0:((n=new h.l).L(p),n.Fa(o),!(n.B()||n.da()<=u&&n.S()<=u))}return a.Ac(n,o,u)},a.VP=function(n,o,u){if(a.Ac(n,o,u)||a.Ac(o,n,u)||n.da()<=u&&n.S()<=u||o.da()<=u&&o.S()<=u||o.da()>u&&o.S()>u&&n.da()>u&&n.S()>u)return!1;if(n.da()>u&&n.S()>u)var p=o;else p=n,n=o;if(n.da()>u&&n.S()>u){o=new h.l;var f=new h.l;return f.L(n),f.X(-u,-u),o.L(f),o.Fa(p),!(o.B()||o.da()<=u&&o.S()<=u)}o=new h.zb,f=new h.zb;var m=[0,0],w=[0,0],x=new h.h;return p.fn(x),o.Ec(x),p.gn(x),o.Rc(x),n.fn(x),f.Ec(x),n.gn(x),f.Rc(x),o.Fa(f,null,m,w,u),o.Fa(f,null,null,null,u)==1&&0<m[0]&&1>m[1]&&0<w[0]&&1>w[1]},a.yI=function(n,o,u){var p=new h.l,f=new h.l,m=new h.am(n,o,u,!0);if(!m.next())return!0;if(this.NG(n,o,u))return!1;var w=n,x=null;o.K()==1736&&(x=o);var E=!1,T=!1;do{var A=m.pl(),P=m.jl();if(P=o.Oa(o.Ca(P)),p.L(m.oz()),p.X(u,u),p.contains(P)&&(P=h.jd.Zd(w,P,0))!=0||o.K()==1736&&(A=n.Oa(n.Ca(A)),f.L(m.Wy()),f.X(u,u),f.contains(A)&&(P=h.jd.Zd(x,A,0))!=0))return!1;E||(!h.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new h.Ea,n.copyTo(w),w.hj(1)),E=!0),o.K()!=1736||T||(T=o,!h.Fg.Ol(T,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?x=o:(x=new h.Ea,T.copyTo(x),x.hj(1)),T=!0)}while(m.next());return!0},a.Ac=function(n,o,u){var p=new h.l;return p.L(n),p.X(u,u),p.contains(o)},a.ns=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),o=new h.h,n.fn(o),!p.contains(o)||(n.UI(o),!p.contains(o)||(n.XI(o),!p.contains(o)||(n.gn(o),!p.contains(o))))},a.YH=function(n,o,u){if(n.ea()!=o.ea()||n.I()!=o.I())return!1;var p=new h.h,f=new h.h,m=!0;u*=u;for(var w=0;w<n.ea();w++){if(n.Wc(w)!=o.Wc(w)){m=!1;break}for(var x=n.Ca(w);x<o.Wc(w);x++)if(n.D(x,p),o.D(x,f),h.h.zc(p,f)>u){m=!1;break}if(!m)break}return!!m},a.bU=function(n,o,u){if(n.I()!=o.I())return!1;var p=new h.h,f=new h.h,m=!0;u*=u;for(var w=0;w<n.I();w++)if(n.D(w,p),o.D(w,f),h.h.zc(p,f)>u){m=!1;break}return!!m},a.SA=function(n,o,u,p,f,m){var w=!1;if(n.I()>o.I()){p&&(p=!1,w=!0);var x=o}else x=n,n=o;if(o=null,f||m||w){o=new h.rn(n.I());for(var E=0;E<n.I();E++)o.write(E,0)}E=new h.l;var T=new h.l,A=new h.l;x.A(E),n.A(T),E.X(u,u),T.X(u,u),A.L(E),A.Fa(T),T=new h.h;for(var P=new h.h,F=!0,j=h.ta.iE(n,A),H=j.getIterator(),W=u*u,G=0;G<x.I();G++)if(x.D(G,T),A.contains(T)){var ee=!1;E.L(T.x,T.y,T.x,T.y),H.Zi(E,u);for(var ae=H.next();ae!=-1&&(ae=j.ka(ae),n.D(ae,P),!(h.h.zc(T,P)<=W&&((f||m||w)&&o.write(ae,1),ee=!0,p)));ae=H.next());if(!ee&&(F=!1,f||p))return!1}else{if(f||p)return!1;F=!1}if(m&&F)return!1;if(p)return!0;for(E=0;E<n.I();E++)if(o.read(E)==1){if(m)return!0}else if(f||w)return!1;return!m},a.aI=function(n,o,u){if(n.I()>o.I())var p=o;else p=n,n=o;o=new h.l;var f=new h.l,m=new h.l;p.A(o),n.A(f),o.X(u,u),f.X(u,u),m.L(o),m.Fa(f),f=new h.h;for(var w=new h.h,x=u*u,E=h.ta.iE(n,m),T=E.getIterator(),A=0;A<p.I();A++)if(p.D(A,f),m.contains(f)){o.L(f.x,f.y,f.x,f.y),T.Zi(o,u);for(var P=T.next();P!=-1;P=T.next())if(n.D(E.ka(P),w),h.h.zc(f,w)<=x)return!0}return!1},a.Rz=function(n,o,u,p){return a.Am(n,o,u,p)&&a.Am(o,n,u,p)},a.Am=function(n,o,u,p){function f(Oe,Ye){return P.KE(Oe,Ye)}var m,w=!0,x=[0,0],E=[0,0],T=0,A=new h.ja(0),P=new a,F=new h.l,j=new h.l,H=new h.l;n.A(F),o.A(j),F.X(u,u),j.X(u,u),H.L(F),H.Fa(j),n=n.Ha(),j=o.Ha();var W=null,G=W=null,ee=o.Cb;for(ee!=null?(W=ee.Gb,G=ee.Ao,W==null&&(W=h.ta.lj(o,H))):W=h.ta.lj(o,H),o=W.getIterator(),ee=null,G!=null&&(ee=G.getIterator());n.ab();)for(;n.Ia();){var ae=!1,le=n.ia();if(le.A(F),!F.isIntersecting(H)||ee!=null&&(ee.Zi(F,u),ee.next()==-1))return!1;for(G=le.Rb(),o.Vo(le,u),m=o.next();m!=-1;m=o.next()){j.Wb(W.ka(m)),m=j.ia();var ie=le.Fa(m,null,x,E,u);if(ie==2&&(!p||E[0]<=E[1])){ie=x[0];var be=x[1],Ie=E[0],ze=E[1];if(ie*G<=u&&(1-be)*G<=u){ae=!0,T=0,A.resize(0),P.th.length=0;var Fe=n.xb();for(Ie=!0;Ie;){if(n.Ia()){if(G=(le=n.ia()).Rb(),(ie=le.Fa(m,null,x,E,u))==2&&(!p||E[0]<=E[1])&&(ie=x[0],be=x[1],ie*G<=u&&(1-be)*G<=u)){Fe=n.xb();continue}if(j.Ia()&&(m=j.ia(),(ie=le.Fa(m,null,x,E,u))==2&&(!p||E[0]<=E[1])&&(ie=x[0],be=x[1],ie*G<=u&&(1-be)*G<=u))){Fe=n.xb();continue}}Ie=!1}Fe!=n.xb()&&(n.Wb(Fe),n.ia());break}Fe=n.xb(),m=b.construct(Fe,n.gb,ie,be,j.xb(),j.gb,Ie,ze),P.th.push(m),A.add(A.size)}}if(!ae){if(T==P.th.length)return!1;for(1<A.size-T&&A.Wd(T,A.size,f),ae=0;T<P.th.length;T++)if(!((m=P.th[A.get(T)]).Mj<ae&&m.Ui<ae)){if(G*(m.Mj-ae)>u)return!1;if(G*(1-(ae=m.Ui))<=u||ae==1)break}if(G*(1-ae)>u)return!1;T=0,A.resize(0),P.th.length=0}}return w},a.PG=function(n,o,u){if(1>a.Sz(n,o,u,null))return!1;var p=new h.l,f=new h.l;n.A(p),o.A(f);var m=a.ns(p,f,u);return p=a.ns(f,p,u),!(!m||!p)||(m&&!p?!a.Am(o,n,u,!1):p&&!m?!a.Am(n,o,u,!1):!a.Am(n,o,u,!1)&&!a.Am(o,n,u,!1))},a.Sz=function(n,o,u,p){function f(Kt,Qt){return F.KE(Kt,Qt)}if(n.sz()>o.sz())var m=o,w=n;else m=n,w=o;n=m.Ha(),o=w.Ha();var x=[0,0],E=[0,0],T=-1,A=0,P=new h.ja(0),F=new a,j=new h.l,H=new h.l,W=new h.l;m.A(j),w.A(H),j.X(u,u),H.X(u,u),W.L(j),W.Fa(H),m=null,p!=null&&(m=new h.h);var G=H=H=null,ee=w.Cb;for(ee!=null?(H=ee.Gb,G=ee.Ao,H==null&&(H=h.ta.lj(w,W))):H=h.ta.lj(w,W),w=H.getIterator(),ee=null,G!=null&&(ee=G.getIterator());n.ab();)for(G=0;n.Ia();){var ae=n.ia();if(ae.A(j),j.isIntersecting(W)){if(ee!=null&&(ee.Zi(j,u),ee.next()==-1))continue;var le=ae.Rb();w.Vo(ae,u);for(var ie=w.next();ie!=-1;ie=w.next()){var be=H.ka(ie);o.Wb(be);var Ie=o.ia(),ze=Ie.Rb(),Fe=ae.Fa(Ie,null,x,E,u);if(0<Fe){ie=x[0],T=E[0];var Oe=Fe==2?x[1]:NaN,Ye=Fe==2?E[1]:NaN;if(Fe==2){if(le*(Oe-ie)>u)return 1;var yt=le*(Oe-ie);if(o.Ia()){if(Ie=o.ia(),(Fe=ae.Fa(Ie,null,x,null,u))==2){Fe=x[0];var bt=x[1];if(yt+(Fe=le*(bt-Fe))>u)return 1}o.Wb(be),o.ia()}if(!o.xm()){if(o.ni(),Ie=o.ni(),(Fe=ae.Fa(Ie,null,x,null,u))==2&&(Fe=x[0],yt+(Fe=le*((bt=x[1])-Fe))>u))return 1;o.Wb(be),o.ia()}if(n.Ia()){if(be=n.xb(),(Fe=(ae=n.ia()).Fa(Ie,null,x,null,u))==2&&(Fe=x[0],yt+(Fe=le*((bt=x[1])-Fe))>u))return 1;n.Wb(be),n.ia()}if(!n.xm()){if(be=n.xb(),n.ni(),(Fe=(ae=n.ni()).Fa(Ie,null,x,null,u))==2&&(Fe=x[0],yt+(Fe=ze*((bt=x[1])-Fe))>u))return 1;n.Wb(be),n.ia()}Ie=b.construct(n.xb(),n.gb,ie,Oe,o.xb(),o.gb,T,Ye),F.th.push(Ie),P.add(P.size)}T=0,p!=null&&(ae.ic(ie,m),p.add(m.x),p.add(m.y))}}if(A<F.th.length){for(P.Wd(A,P.size,f),ae=0,ie=F.th[P.get(A)].Om;A<F.th.length;A++)if(!((Ie=F.th[P.get(A)]).Mj<ae&&Ie.Ui<ae))if(le*(Ie.Mj-ae)>u)G=le*(Ie.Ui-Ie.Mj),ae=Ie.Ui,ie=Ie.Om;else{if(Ie.Om!=ie?(G=le*(Ie.Ui-Ie.Mj),ie=Ie.Om):G+=le*(Ie.Ui-Ie.Mj),G>u)return 1;if((ae=Ie.Ui)==1)break}le*(1-ae)>u&&(G=0),A=0,P.resize(0),F.th.length=0}}}return T},a.NG=function(n,o,u){var p=n.Ha(),f=o.Ha();for(n=new h.am(n,o,u,!1);n.next();){o=n.pl();var m=n.jl();if(p.Wb(o),f.Wb(m),o=p.ia(),0<f.ia().Fa(o,null,null,null,u))return!0}return!1},a.OG=function(n,o,u,p){var f=n.Ha(),m=new h.l,w=new h.l,x=new h.l;n.A(m),o.A(w),m.X(u,u),m.contains(w),w.X(u,u),x.L(m),x.Fa(w),(m=n.Cb)!=null?(m=m.Gb)==null&&(m=h.ta.lj(n,x)):m=h.ta.lj(n,x),n=m.getIterator();for(var E=new h.h,T=new h.h,A=u*u,P=0;P<o.I();P++)if(o.D(P,E),x.contains(E)){w.L(E.x,E.y,E.x,E.y),n.Zi(w,u);for(var F=!1,j=n.next();j!=-1;j=n.next())if(f.Wb(m.ka(j)),(j=f.ia()).ic(j.fe(E,!1),T),h.h.zc(T,E)<=A){F=!0;break}if(p){if(!F)return!1}else if(F)return!0}return!!p},a.Tz=function(n,o,u){var p=new h.h,f=u*u,m=n.Ha();if((n=n.Cb)!=null&&(n=n.Gb)!=null){var w=new h.l;for(w.L(o),w=(u=n.GF(w,u)).next();w!=-1;w=u.next())if(m.Wb(n.ka(w)),m.Ia()){var x=(w=m.ia()).fe(o,!1);if(w.ic(x,p),h.h.zc(o,p)<=f)return!0}return!1}for(n=new h.l;m.ab();)for(;m.Ia();)if((w=m.ia()).A(n),n.X(u,u),n.contains(o)&&(x=w.fe(o,!1),w.ic(x,p),h.h.zc(o,p)<=f))return!0;return!1},a.LG=function(n,o,u){return a.Tz(n,o,u)&&!a.Uz(n,o,u)},a.Uz=function(n,o,u){return n=n.mg(),!a.lt(n,o,u)},a.MG=function(n,o,u){if(n.vm()){var p=new h.zb(o.v,o.G,o.v,o.H),f=new h.zb(o.v,o.H,o.C,o.H),m=new h.zb(o.C,o.H,o.C,o.G);for(o=new h.zb(o.C,o.G,o.v,o.G),n=n.Ha();n.ab();)for(;n.Ia();){var w=n.ia();if(w.isIntersecting(p,u)||w.isIntersecting(f,u)||w.isIntersecting(m,u)||w.isIntersecting(o,u))return!0}}else{(p=new h.l).L(o),p.X(u,u),u=n.vb(0),f=new h.h,m=new h.h,o=new h.h,w=new h.h;for(var x=0,E=n.ea();x<E;x++)for(var T=!0,A=n.Ca(x),P=n.Wc(x);A<P;A++)if(T)u.uc(2*A,m),T=!1;else{if(u.uc(2*A,f),o.N(m),w.N(f),p.uy(o,w)!=0)return!0;m.N(f)}}return!1},a.qc=function(n,o,u){var p=n.K(),f=o.K();if(h.ba.zj(p)){var m=n.Cb;if(m!=null&&(m=m.Gk)!=null)if(f==33){var w=o.D();if((w=m.To(w.x,w.y))==1)return 1;if(w==0)return 4}else{if(w=new h.l,o.A(w),(w=m.So(w))==1)return 1;if(w==0)return 4;if(u&&h.ba.zj(f)&&a.BE(o,m))return 1073741824}}if(h.ba.zj(f)&&(m=o.Cb)!=null&&(m=m.Gk)!=null)if(p==33){if(n=n.D(),(w=m.To(n.x,n.y))==1)return 2;if(w==0)return 4}else{if(o=new h.l,n.A(o),(w=m.So(o))==1)return 2;if(w==0)return 4;if(u&&h.ba.zj(p)&&a.BE(n,m))return 1073741824}return 0},a.BE=function(n,o){for(var u=n.I(),p=new h.h,f=0;f<u;f++)if(n.D(f,p),o.To(p.x,p.y)==1)return!0;return!1},a.CI=function(n,o,u,p){for(var f=1<=n.qm(0)&&1<=o.qm(0),m=n.Ha(),w=o.Ha(),x=[0,0],E=[0,0],T=new h.am(n,o,u,!1),A=!1;T.next();){var P=T.pl(),F=T.jl();if(m.Wb(P),w.Wb(F),P=m.ia(),(F=w.ia().Fa(P,null,E,x,u))==2){if(A=x[0],F=x[1],P=P.Rb(),f&&(F-A)*P>u)return!1;A=!0}else if(F!=0){if(A=x[0],P=E[0],0<A&&1>A&&0<P&&1>P)return!1;A=!0}}return!!A&&(m=new h.l,w=new h.l,f=new h.l,n.A(m),o.A(w),m.X(1e3*u,1e3*u),w.X(1e3*u,1e3*u),f.L(m),f.Fa(w),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,f,u,0),o.B()))&&h.cm.st(n,o,u,"F********",p))},a.zI=function(n,o,u,p){var f=1<=n.qm(0)&&1<=o.qm(0),m=new h.l,w=new h.l,x=new h.l;n.A(m),o.A(w);for(var E=!1,T=a.ns(m,w,u),A=a.ns(w,m,u),P=n.Ha(),F=o.Ha(),j=[0,0],H=[0,0],W=new h.am(n,o,u,!1);W.next();){var G=W.pl(),ee=W.jl();if(P.Wb(G),F.Wb(ee),ee=P.ia(),(G=F.ia().Fa(ee,null,H,j,u))==2){G=j[0];var ae=j[1];if(ee=ee.Rb(),f&&(ae-G)*ee>u&&(E=!0,T&&A))return!0}else if(G!=0&&(G=j[0],ee=H[0],0<G&&1>G&&0<ee&&1>ee))return!0}if(f=new h.l,P=new h.l,f.L(m),f.X(1e3*u,1e3*u),P.L(w),P.X(1e3*u,1e3*u),x.L(f),x.Fa(P),m="",m=E?m+"**":m+"T*",T){if(10<o.I()&&(o=h.Vd.clip(o,x,u,0)).B())return!1;m+="****"}else m+="T***";if(A){if(10<n.I()&&(n=h.Vd.clip(n,x,u,0)).B())return!1;m+="***"}else m+="T**";return h.cm.st(n,o,u,m.toString(),p)},a.vI=function(n,o,u,p){var f=[!1],m=a.tI(n,o,u,f);return f[0]?m:(f=new h.l,o.A(f),f.X(1e3*u,1e3*u),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B()))&&h.cm.Uw(n,o,u,p))},a.tI=function(n,o,u,p){p[0]=!1;for(var f=n.Ha(),m=o.Ha(),w=[0,0],x=[0,0],E=new h.am(n,o,u,!1),T=!1;E.next();){var A=E.pl(),P=E.jl();if(f.Wb(A,-1),m.Wb(P,-1),A=f.ia(),(A=m.ia().Fa(A,null,x,w,u))!=0&&(T=!0,A==1&&(A=w[0],P=x[0],0<A&&1>A&&0<P&&1>P)))return p[0]=!0,!1}if(!T){for(p[0]=!0,w=new h.l,n.A(w),w.X(u,u),E=n,T=!1,x=new h.l,p=0,f=o.ea();p<f;p++)if(0<o.Ka(p)){if(o.Tj(p,x),!w.isIntersecting(x)||(m=o.Oa(o.Ca(p)),(m=h.Fg.ym(E,m,0))==0))return!1;T||(!h.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?E=n:(m=new h.Ea,n.copyTo(m),m.hj(1),E=m),T=!0)}if(n.ea()==1||o.K()==1607)return!0;for(w=new h.l,o.A(w),w.X(u,u),x=o,E=!1,u=new h.l,p=0,f=n.ea();p<f;p++)if(0<n.Ka(p)){if(n.Tj(p,u),w.isIntersecting(u)&&(m=n.Oa(n.Ca(p)),(m=h.Fg.ym(x,m,0))==1))return!1;E||(!h.Fg.Ol(o,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?x=o:(m=new h.Ea,o.copyTo(m),m.hj(1),x=m),E=!0)}return!0}return!1},a.DI=function(n,o,u,p){for(var f=n.Ha(),m=o.Ha(),w=[0,0],x=[0,0],E=new h.am(n,o,u,!1),T=!1;E.next();){var A=E.pl(),P=E.jl();if(f.Wb(A),m.Wb(P),A=f.ia(),(A=m.ia().Fa(A,null,x,w,u))==2)T=!0;else if(A!=0){if(T=w[0],A=x[0],0<T&&1>T&&0<A&&1>A)return!1;T=!0}}return!!T&&(m=new h.l,w=new h.l,f=new h.l,n.A(m),o.A(w),m.X(1e3*u,1e3*u),w.X(1e3*u,1e3*u),f.L(m),f.Fa(w),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,f,u,0),o.B()))&&h.cm.bn(n,o,u,"F********",p))},a.xI=function(n,o,u,p){for(var f=n.Ha(),m=o.Ha(),w=[0,0],x=[0,0],E=new h.am(n,o,u,!1),T=!1;E.next();){var A=E.pl(),P=E.jl();if(f.Wb(A),m.Wb(P),A=f.ia(),(A=m.ia().Fa(A,null,x,w,u))==2)T=!0;else if(A!=0){if(T=w[0],A=x[0],0<T&&1>T&&0<A&&1>A)return!0;T=!0}}return!!T&&(m=new h.l,w=new h.l,x=new h.l,E=new h.l,f=new h.l,n.A(m),o.A(w),a.ns(w,m,u)?(x.L(m),x.X(1e3*u,1e3*u),E.L(w),E.X(1e3*u,1e3*u),f.L(x),f.Fa(E),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,f,u,0),o.B()))&&(u=h.cm.bn(n,o,u,"T********",p))):u=h.cm.bn(n,o,u,"T*****T**",p))},a.wI=function(n,o,u,p){var f=[!1],m=a.tI(n,o,u,f);return f[0]?m:(f=new h.l,o.A(f),f.X(1e3*u,1e3*u),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B()))&&h.cm.$A(n,o,u,p))},a.uI=function(n,o,u){return h.jd.Zd(n,o,u)==1},a.BI=function(n,o,u){return h.jd.Zd(n,o,u)==2},a.lt=function(n,o,u){var p=new h.h;u*=u;for(var f=0;f<n.I();f++)if(n.D(f,p),h.h.zc(p,o)<=u)return!1;return!0},a.prototype.KE=function(n,o){return n=this.th[n],o=this.th[o],n.Om<o.Om||n.Om==o.Om&&(n.rw<o.rw||n.rw==o.rw&&(n.Mj<o.Mj||n.Mj==o.Mj&&(n.Ui<o.Ui||n.Ui==o.Ui&&n.vH<o.vH)))?-1:1},a}();h.vd=c}(X||(X={})),function(h){var L,b,c;(b=L||(L={}))[b.InteriorInterior=0]="InteriorInterior",b[b.InteriorBoundary=1]="InteriorBoundary",b[b.InteriorExterior=2]="InteriorExterior",b[b.BoundaryInterior=3]="BoundaryInterior",b[b.BoundaryBoundary=4]="BoundaryBoundary",b[b.BoundaryExterior=5]="BoundaryExterior",b[b.ExteriorInterior=6]="ExteriorInterior",b[b.ExteriorBoundary=7]="ExteriorBoundary",b[b.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(c||(c={})),L=function(){function a(){this.le=0,this.j=new h.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return a.sB=function(n,o,u,p,f){if(p.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var m=0;9>m;m++){var w=p.charAt(m);if(w!="*"&&w!="T"&&w!="F"&&w!="0"&&w!="1"&&w!="2")throw h.i.ga("relation string")}if((m=this.FR(p,n.Eb(),o.Eb()))!=0)return h.vd.tB(n,o,u,m,f);m=new h.l,n.A(m),w=new h.l,o.A(w);var x=new h.l;if(x.L(m),x.$b(w),u=h.ta.Xd(u,x,!1),n=this.QE(n,u),o=this.QE(o,u),n.B()||o.B())return this.mW(n,o,p);switch(m=o.K(),w=!1,n.K()){case 1736:switch(m){case 1736:w=this.st(n,o,u,p,f);break;case 1607:w=this.bn(n,o,u,p,f);break;case 33:w=this.rt(n,o,u,p);break;case 550:w=this.qt(n,o,u,p,f)}break;case 1607:switch(m){case 1736:w=this.bn(o,n,u,this.aq(p),f);break;case 1607:w=this.aB(n,o,u,p,f);break;case 33:w=this.ut(n,o,u,p,f);break;case 550:w=this.tt(n,o,u,p,f)}break;case 33:switch(m){case 1736:w=this.rt(o,n,u,this.aq(p));break;case 1607:w=this.ut(o,n,u,this.aq(p),f);break;case 33:w=this.SU(n,o,u,p);break;case 550:w=this.mt(o,n,u,this.aq(p))}break;case 550:switch(m){case 1736:w=this.qt(o,n,u,this.aq(p),f);break;case 1607:w=this.tt(o,n,u,this.aq(p),f);break;case 550:w=this.TA(n,o,u,p,f);break;case 33:w=this.mt(n,o,u,p)}break;default:w=!1}return w},a.st=function(n,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.rJ();var w=new h.l,x=new h.l;return n.A(w),o.A(x),p=!1,h.vd.ek(w,x,u)&&(m.Eu(n,o),p=!0),p||((w=h.vd.qc(n,o,!1))==4?(m.Eu(n,o),p=!0):w==1?(m.hy(o),p=!0):w==2&&(m.TD(n),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),m.Xo(p,u,f),m.Dp(n,o),m.j.Wg()),a.fg(m.J,m.Yc)},a.Uw=function(n,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.rJ();var m=new h.l,w=new h.l;n.A(m),o.A(w);var x=!1;return h.vd.ek(m,w,u)&&(f.Eu(n,o),x=!0),x||((m=h.vd.qc(n,o,!1))==4?(f.Eu(n,o),x=!0):m==1?(f.hy(o),x=!0):m==2&&(f.TD(n),x=!0)),x?this.fg(f.J,f.Yc):(n=(x=new h.hd).Ib(n),m=x.Ib(o),h.Uk.W(x,u,p,!1),u=x.Ke(m).mg(),x.Ip(0,!0,!0),h.tn.W(x,n,-1,!1,p),x.I(n)!=0&&(h.tn.W(x,m,-1,!1,p),f.gr(x,p),(o=x.I(m)==0)||(f.Dp(n,m),f.j.Wg(),m=this.fg(f.J,f.Yc))?(n=x.Ke(n),n=(x=new h.hd).Ib(n),m=x.Ib(u),f.gr(x,p),f.le=0,f.$i(),f.dj(o?"T*****F**":"******F**"),f.CB(),f.Dp(n,m),f.j.Wg(),this.fg(f.J,f.Yc)):m))},a.bn=function(n,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.CB();var w=new h.l,x=new h.l;return n.A(w),o.A(x),p=!1,h.vd.ek(w,x,u)&&(m.Fu(n,o),p=!0),p||((w=h.vd.qc(n,o,!1))==4?(m.Fu(n,o),p=!0):w==1&&(m.UD(o),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),m.Xo(p,u,f),m.mh=m.j.Fp(),a.Lw(o,m.j,m.mh),m.Dp(n,o),m.j.Gp(m.mh),m.j.Wg()),a.fg(m.J,m.Yc)},a.$A=function(n,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.CB();var m=new h.l,w=new h.l;n.A(m),o.A(w);var x=!1;return h.vd.ek(m,w,u)&&(f.Fu(n,o),x=!0),x||((m=h.vd.qc(n,o,!1))==4?(f.Fu(n,o),x=!0):m==1&&(f.UD(o),x=!0)),x?this.fg(f.J,f.Yc):(n=(x=new h.hd).Ib(n),o=x.Ib(o),f.Xo(x,u,p),x.I(n)!=0&&(f.Dp(n,o),f.j.Wg(),this.fg(f.J,f.Yc)))},a.qt=function(n,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.sJ();var w=new h.l,x=new h.l;return n.A(w),o.A(x),p=!1,h.vd.ek(w,x,u)&&(m.Gu(n),p=!0),p||((w=h.vd.qc(n,o,!1))==4?(m.Gu(n),p=!0):w==1&&(m.tN(),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),m.Xo(p,u,f),m.By(n,o),m.j.Wg()),a.fg(m.J,m.Yc)},a.aB=function(n,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.WW(),p=new h.l;var w=new h.l;n.A(p),o.A(w);var x=!1;return h.vd.ek(p,w,u)&&(m.JG(n,o),x=!0),x||h.vd.qc(n,o,!1)!=4||(m.JG(n,o),x=!0),x||(n=(p=new h.hd).Ib(n),o=p.Ib(o),m.Xo(p,u,f),m.$h=m.j.Fp(),m.mh=m.j.Fp(),a.Lw(n,m.j,m.$h),a.Lw(o,m.j,m.mh),m.Dp(n,o),m.j.Gp(m.$h),m.j.Gp(m.mh),m.j.Wg()),a.fg(m.J,m.Yc)},a.tt=function(n,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.GJ(),p=new h.l;var w=new h.l;n.A(p),o.A(w);var x=!1;return h.vd.ek(p,w,u)&&(m.Qz(n),x=!0),x||h.vd.qc(n,o,!1)!=4||(m.Qz(n),x=!0),x||(n=(p=new h.hd).Ib(n),o=p.Ib(o),m.Xo(p,u,f),m.$h=m.j.Fp(),a.Lw(n,m.j,m.$h),m.By(n,o),m.j.Gp(m.$h),m.j.Wg()),a.fg(m.J,m.Yc)},a.TA=function(n,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.LJ(),p=new h.l;var w=new h.l;n.A(p),o.A(w);var x=!1;return h.vd.ek(p,w,u)&&(m.sI(),x=!0),x||(n=(p=new h.hd).Ib(n),o=p.Ib(o),m.Xo(p,u,f),m.By(n,o),m.j.Wg()),a.fg(m.J,m.Yc)},a.rt=function(n,o,u,p){var f=new a;f.$i(),f.dj(p),f.sJ();var m=new h.l;n.A(m),o=o.D();var w=!1;return h.vd.Tw(o,m,u)&&(f.Gu(n),w=!0),w||((u=h.jd.Zd(n,o,u))==1?(f.J[0]=0,f.J[2]=2,f.J[3]=-1,f.J[5]=1,f.J[6]=-1):u==2?(f.J[6]=-1,n.He()!=0?(f.J[0]=-1,f.J[3]=0,f.J[2]=2,f.J[5]=1):(f.J[0]=0,f.J[3]=-1,f.J[5]=-1,u=new h.l,n.A(u),f.J[2]=u.da()==0&&u.S()==0?-1:1)):f.Gu(n)),this.fg(f.J,p)},a.ut=function(n,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.GJ();var w=new h.l;n.A(w),p=o.D();var x=!1;if(h.vd.Tw(p,w,u)&&(m.Qz(n),x=!0),!x){w=null;var E=x=!1;(m.fa[0]||m.fa[6])&&(h.vd.Tz(n,p,u)?(m.fa[0]&&(w=h.si.im(n,f),E=!h.vd.lt(w,p,u),x=!0,m.J[0]=E?-1:0),m.J[6]=-1):(m.J[0]=-1,m.J[6]=0)),m.fa[3]&&(w!=null&&w.B()?m.J[3]=-1:(x||(w==null&&(w=h.si.im(n,f)),E=!h.vd.lt(w,p,u),x=!0),m.J[3]=E?0:-1)),m.fa[5]&&(w!=null&&w.B()?m.J[5]=-1:x&&!E?m.J[5]=0:(w==null&&(w=h.si.im(n,f)),f=h.vd.Pw(w,o,u),m.J[5]=f?-1:0)),m.fa[2]&&(n.Rb()!=0?m.J[2]=1:((f=new h.de(n.description)).Gd(n,0,n.I()),n=h.vd.Pw(f,o,u),m.J[2]=n?-1:0))}return this.fg(m.J,m.Yc)},a.mt=function(n,o,u,p){var f=new a;f.$i(),f.dj(p),f.LJ();var m=new h.l;n.A(m),o=o.D();var w=!1;if(h.vd.Tw(o,m,u)&&(f.sI(),w=!0),!w){m=!1,w=!0,u*=u;for(var x=0;x<n.I();x++){var E=n.Oa(x);if(h.h.zc(E,o)<=u?m=!0:w=!1,m&&!w)break}m?(f.J[0]=0,f.J[2]=w?-1:0,f.J[6]=-1):(f.J[0]=-1,f.J[2]=0,f.J[6]=0)}return a.fg(f.J,p)},a.SU=function(n,o,u,p){n=n.D(),o=o.D();for(var f=[],m=0;9>m;m++)f[m]=-1;return h.h.zc(n,o)<=u*u?f[0]=0:(f[2]=0,f[6]=0),f[8]=2,a.fg(f,p)},a.fg=function(n,o){for(var u=0;9>u;u++)switch(o.charAt(u)){case"T":if(n[u]==-1)return!1;break;case"F":if(n[u]!=-1)return!1;break;case"0":if(n[u]!=0)return!1;break;case"1":if(n[u]!=1)return!1;break;case"2":if(n[u]!=2)return!1}return!0},a.mW=function(n,o,u){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(n.B()&&o.B()){for(var f=0;9>f;f++)p[f]=-1;return this.fg(p,u)}return f=!1,n.B()&&(n=o,f=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,o=n.K(),h.ba.Ic(o)?o==1736?n.He()!=0?(p[2]=2,p[5]=1):(p[5]=-1,o=new h.l,n.A(o),p[2]=o.da()==0&&o.S()==0?0:1):(o=n.Rb()!=0,p[2]=o?1:0,p[5]=h.si.cq(n)?0:-1):(p[2]=0,p[5]=-1),f&&this.pK(p),this.fg(p,u)},a.FR=function(n,o,u){return a.YP(n)?3:a.OP(n)?4:a.VX(n,o,u)?8:a.wP(n,o,u)?16:a.ZO(n)?1:a.wU(n,o,u)?32:0},a.YP=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="F"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="F"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.OP=function(n){return n.charAt(0)=="F"&&n.charAt(1)=="F"&&n.charAt(2)=="*"&&n.charAt(3)=="F"&&n.charAt(4)=="F"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.VX=function(n,o,u){return(o!=0||u!=0)&&((o!=2||u!=2)&&(n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="T"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"||o==1&&u==1&&n.charAt(0)=="F"&&n.charAt(1)=="T"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")||u!=0&&n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="T"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")},a.wP=function(n,o,u){return o>u?n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*":o==1&&u==1&&n.charAt(0)=="0"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.ZO=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.wU=function(n,o,u){if(o==u){if(o!=1)return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*";if(n.charAt(0)=="1"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*")return!0}return!1},a.Lw=function(n,o,u){n=o.Ma(n);for(var p=o.Oe;p!=-1;p=o.Sf(p))if((o.yd(p)&n)!=0){var f=o.Je(p);if(f==-1)o.pn(p,u,0);else{var m=f,w=0;do(o.fh(m)&n)!=0&&w++,m=o.kc(o.ya(m));while(m!=f);o.pn(p,u,w)}}},a.aq=function(n){var o=""+n.charAt(0);return o+=n.charAt(3),o+=n.charAt(6),o+=n.charAt(1),o+=n.charAt(4),o+=n.charAt(7),o+=n.charAt(2),(o+=n.charAt(5))+n.charAt(8)},a.prototype.$i=function(){for(var n=0;9>n;n++)this.J[n]=-2,this.$a[n]=-2},a.pK=function(n){var o=n[1],u=n[2],p=n[5];n[1]=n[3],n[2]=n[6],n[5]=n[7],n[3]=o,n[6]=u,n[7]=p},a.prototype.dj=function(n){for(this.Yc=n,n=0;9>n;n++)this.Yc.charAt(n)!="*"?(this.fa[n]=!0,this.le++):this.fa[n]=!1},a.prototype.OJ=function(){for(var n=0;9>n;n++)this.fa[n]&&this.J[n]==-2&&(this.J[n]=-1,this.fa[n]=!1)},a.prototype.pc=function(n){return this.J[n]!=-2&&(this.J[n]==-1?(this.fa[n]=!1,this.le--,!0):this.Yc.charAt(n)!="T"&&this.Yc.charAt(n)!="F"?!(this.J[n]<this.$a[n])&&(this.fa[n]=!1,this.le--,!0):(this.fa[n]=!1,this.le--,!0))},a.prototype.rJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.CB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.WW=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.sJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.GJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.LJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.rN=function(n,o,u){var p=!0;return this.fa[0]&&(this.vS(n,o,u),p=p&&this.pc(0)),this.fa[1]&&(this.mG(n,o,1),p=p&&this.pc(1)),this.fa[2]&&(this.nG(n,o,u,2),p=p&&this.pc(2)),this.fa[3]&&(this.mG(n,u,3),p=p&&this.pc(3)),this.fa[4]&&(this.vN(n,o,u),p=p&&this.pc(4)),this.fa[5]&&(this.ZD(n,u,5),p=p&&this.pc(5)),this.fa[6]&&(this.nG(n,u,o,6),p=p&&this.pc(6)),this.fa[7]&&(this.ZD(n,o,7),p=p&&this.pc(7)),p},a.prototype.Eu=function(n,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(o,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},a.prototype.Hr=function(n,o,u,p,f){o==-1&&p==-1||((u!="T"&&u!="F"&&o!=-1||f!="T"&&f!="F"&&p!=-1)&&n.He()==0?(p!=-1&&(this.J[p]=-1),o!=-1&&(u=new h.l,n.A(u),this.J[o]=u.da()==0&&u.S()==0?0:1)):(o!=-1&&(this.J[o]=2),p!=-1&&(this.J[p]=1)))},a.prototype.hy=function(n){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(n,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},a.prototype.TD=function(n){this.hy(n),a.pK(this.J)},a.prototype.Fu=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var u=this.Yc.charAt(6);u=u=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0}this.fa[7]&&(o=h.si.cq(o),this.J[7]=o?0:-1),this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.UD=function(n){if(this.fa[0]){var o=this.Yc.charAt(0);o=o=="T"||o=="F"||n.Rb()!=0,this.J[0]=o?1:0}this.fa[1]&&(n=h.si.cq(n),this.J[1]=n?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Gu=function(n){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.tN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.JG=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var u=this.Yc.charAt(2);u=u=="T"||u=="F"||n.Rb()!=0,this.J[2]=u?1:0}this.fa[5]&&(n=h.si.cq(n),this.J[5]=n?0:-1),this.fa[6]&&(u=(u=this.Yc.charAt(6))=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0),this.fa[7]&&(o=h.si.cq(o),this.J[7]=o?0:-1)},a.prototype.Qz=function(n){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var o=this.Yc.charAt(2);o=o=="T"||o=="F"||n.Rb()!=0,this.J[2]=o?1:0}this.fa[5]&&(n=h.si.cq(n),this.J[5]=n?0:-1),this.J[6]=0},a.prototype.sI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.sN=function(n,o,u){var p=!0;return this.fa[0]&&(this.wS(n,o),p=p&&this.pc(0)),this.fa[1]&&(this.sS(n,o,u,this.mh),p=p&&this.pc(1)),this.fa[2]&&(this.tS(n,o),p=p&&this.pc(2)),this.fa[3]&&(this.zN(n,o,u,this.mh),p=p&&this.pc(3)),this.fa[4]&&(this.wN(n,o,u,this.mh),p=p&&this.pc(4)),this.fa[5]&&(this.xN(n,o,u),p=p&&this.pc(5)),this.fa[6]&&(this.fQ(n,o),p=p&&this.pc(6)),this.fa[7]&&(this.eQ(n,o,u,this.mh),p=p&&this.pc(7)),p},a.prototype.eT=function(n,o,u){var p=!0;return this.fa[0]&&(this.zS(n,o,u,this.$h,this.mh),p=p&&this.pc(0)),this.fa[1]&&(this.oG(n,o,u,this.$h,this.mh,1),p=p&&this.pc(1)),this.fa[2]&&(this.pG(n,o,u,2),p=p&&this.pc(2)),this.fa[3]&&(this.oG(n,u,o,this.mh,this.$h,3),p=p&&this.pc(3)),this.fa[4]&&(this.BN(n,o,u,this.$h,this.mh),p=p&&this.pc(4)),this.fa[5]&&(this.$D(n,u,this.$h,5),p=p&&this.pc(5)),this.fa[6]&&(this.pG(n,u,o,6),p=p&&this.pc(6)),this.fa[7]&&(this.$D(n,o,this.mh,7),p=p&&this.pc(7)),p},a.prototype.VD=function(n,o,u){var p=!0;return this.fa[0]&&(this.xS(n,o),p=p&&this.pc(0)),this.fa[2]&&(this.uS(n,o),p=p&&this.pc(2)),this.fa[3]&&(this.AN(n,o,u),p=p&&this.pc(3)),this.fa[5]&&(this.yN(n,o),p=p&&this.pc(5)),this.fa[6]&&(this.gQ(n,o),p=p&&this.pc(6)),p},a.prototype.KG=function(n,o,u){var p=!0;return this.fa[0]&&(this.AS(n,o,u,this.$h),p=p&&this.pc(0)),this.fa[2]&&(this.yS(n,u),p=p&&this.pc(2)),this.fa[3]&&(this.DN(n,o,u,this.$h),p=p&&this.pc(3)),this.fa[5]&&(this.CN(n,o,u,this.$h),p=p&&this.pc(5)),this.fa[6]&&(this.hQ(n,o,u),p=p&&this.pc(6)),p},a.prototype.RU=function(n,o,u){var p=!0;return this.fa[0]&&(this.BS(n,o,u),p=p&&this.pc(0)),this.fa[2]&&(this.qG(n,o,u,2),p=p&&this.pc(2)),this.fa[6]&&(this.qG(n,u,o,6),p=p&&this.pc(6)),p},a.prototype.vS=function(n,o,u){this.J[0]!=2&&((n=this.j.af(n))&o)!=0&&(n&u)!=0&&(this.J[0]=2)},a.prototype.mG=function(n,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(p&o)!=0&&(this.J[u]=1)}},a.prototype.nG=function(n,o,u,p){this.J[p]!=2&&((n=this.j.af(n))&o)!=0&&(n&u)==0&&(this.J[p]=2)},a.prototype.vN=function(n,o,u){if(this.J[4]!=1){var p=this.j.fh(n);(p&o)!=0&&(p&u)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&((n=this.j.yd(this.j.vf(n)))&o)!=0&&(n&u)!=0&&(this.J[4]=0)}},a.prototype.ZD=function(n,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(p&o)==0&&(this.J[u]=1)}},a.prototype.wS=function(n,o){if(this.J[0]!=1){var u=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(u&o)!=0&&(this.J[0]=1)}},a.prototype.sS=function(n,o,u,p){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var f=this.j.vf(n),m=this.j.yd(f);(m&o)==0&&(this.j.af(n)&o)!=0&&(n=this.j.ng(f,p),(m&u)!=0&&n%2!=0&&(this.J[1]=0))}},a.prototype.tS=function(n,o){this.J[2]!=2&&(this.j.fh(n)&o)!=0&&(this.J[2]=2)},a.prototype.zN=function(n,o,u,p){if(this.J[3]!=1){var f=this.j.fh(n);(f&o)!=0&&(f&u)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(f=this.j.vf(n),((n=this.j.yd(f))&o)!=0&&(o=this.j.ng(f,p),(n&u)!=0&&o%2==0&&(this.J[3]=0)))}},a.prototype.wN=function(n,o,u,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var f=this.j.vf(n);((n=this.j.yd(f))&o)!=0&&(o=this.j.ng(f,p),(n&u)!=0&&o%2!=0&&(this.J[4]=0))}},a.prototype.xN=function(n,o,u){this.J[5]!=1&&((n=this.j.fh(n))&o)!=0&&(n&u)==0&&(this.J[5]=1)},a.prototype.fQ=function(n,o){if(this.J[6]!=1){var u=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(u&o)==0&&(this.J[6]=1)}},a.prototype.eQ=function(n,o,u,p){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var f=this.j.vf(n),m=this.j.yd(f);(m&o)==0&&(this.j.af(n)&o)==0&&(n=this.j.ng(f,p),(m&u)!=0&&n%2!=0&&(this.J[7]=0))}},a.prototype.zS=function(n,o,u,p,f){if(this.J[0]!=1){var m=this.j.fh(n);(m&o)!=0&&(m&u)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),((m=this.j.yd(n))&o)!=0&&(m&u)!=0&&(o=this.j.ng(n,p),f=this.j.ng(n,f),o%2==0&&f%2==0&&(this.J[0]=0)))}},a.prototype.oG=function(n,o,u,p,f,m){if(this.J[m]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var w=this.j.yd(n);(w&o)!=0&&(w&u)!=0&&(o=this.j.ng(n,p),f=this.j.ng(n,f),o%2==0&&f%2!=0&&(this.J[m]=0))}},a.prototype.pG=function(n,o,u,p){this.J[p]!=1&&((n=this.j.fh(n))&o)!=0&&(n&u)==0&&(this.J[p]=1)},a.prototype.BN=function(n,o,u,p,f){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var m=this.j.yd(n);(m&o)!=0&&(m&u)!=0&&(o=this.j.ng(n,p),f=this.j.ng(n,f),o%2!=0&&f%2!=0&&(this.J[4]=0))}},a.prototype.$D=function(n,o,u,p){this.J[p]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),(this.j.yd(n)&o)==0&&this.j.ng(n,u)%2!=0&&(this.J[p]=0))},a.prototype.xS=function(n,o){this.J[0]!=0&&(this.j.yd(n)&o)==0&&(this.j.ik(this.j.Yy(n))&o)!=0&&(this.J[0]=0)},a.prototype.uS=function(n,o){this.J[2]!=2&&(this.j.yd(n)&o)!=0&&(this.J[2]=2)},a.prototype.AN=function(n,o,u){this.J[3]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)!=0&&(this.J[3]=0)},a.prototype.yN=function(n,o){this.J[5]!=1&&(this.j.yd(n)&o)!=0&&(this.J[5]=1)},a.prototype.gQ=function(n,o){this.J[6]!=0&&(this.j.yd(n)&o)==0&&(this.j.ik(this.j.Yy(n))&o)==0&&(this.J[6]=0)},a.prototype.AS=function(n,o,u,p){if(this.J[0]!=0){var f=this.j.yd(n);(f&o)!=0&&(f&u)!=0&&this.j.ng(n,p)%2==0&&(this.J[0]=0)}},a.prototype.yS=function(n,o){this.J[2]!=1&&(this.j.Je(n)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.yd(n)&o)==0&&(this.J[2]=0))},a.prototype.DN=function(n,o,u,p){if(this.J[3]!=0){var f=this.j.yd(n);(f&o)!=0&&(f&u)!=0&&this.j.ng(n,p)%2!=0&&(this.J[3]=0)}},a.prototype.CN=function(n,o,u,p){if(this.J[5]!=0){var f=this.j.yd(n);(f&o)!=0&&(f&u)==0&&this.j.ng(n,p)%2!=0&&(this.J[5]=0)}},a.prototype.hQ=function(n,o,u){this.J[6]!=0&&((n=this.j.yd(n))&o)==0&&(n&u)!=0&&(this.J[6]=0)},a.prototype.BS=function(n,o,u){this.J[0]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)!=0&&(this.J[0]=0)},a.prototype.qG=function(n,o,u,p){this.J[p]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)==0&&(this.J[p]=0)},a.prototype.Dp=function(n,o){var u=!1;n=this.j.Ma(n),o=this.j.Ma(o),this.Wi=this.j.bh();for(var p=this.j.Oe;p!=-1;p=this.j.Sf(p)){var f=this.j.Je(p);if(f==-1){if(this.Um!=-1)switch(this.Um){case 3:u=this.VD(p,n,o);break;case 4:u=this.KG(p,n,o);break;default:throw h.i.ga("internal error")}}else{var m=f;do{var w=m;if(this.j.Bb(w,this.Wi)!=1)do{switch(this.xw){case 0:u=this.rN(w,n,o);break;case 1:u=this.sN(w,n,o);break;case 2:u=this.eT(w,n,o);break;default:throw h.i.ga("internal error")}if(u)break;this.j.Kb(w,this.Wi,1),w=this.j.kc(w)}while(w!=m&&!u);if(u)break;m=this.j.kc(this.j.ya(w))}while(m!=f);if(u)break}}u||this.OJ(),this.j.Lg(this.Wi)},a.prototype.By=function(n,o){var u=!1;n=this.j.Ma(n),o=this.j.Ma(o);for(var p=this.j.Oe;p!=-1;p=this.j.Sf(p)){switch(this.Um){case 3:u=this.VD(p,n,o);break;case 4:u=this.KG(p,n,o);break;case 5:u=this.RU(p,n,o);break;default:throw h.i.Ra()}if(u)break}u||this.OJ()},a.prototype.gr=function(n,o){this.j.fr(n,o)},a.prototype.Xo=function(n,o,u){this.SP(n,o,u),this.gr(n,u)},a.prototype.SP=function(n,o,u){for(h.Uk.W(n,o,u,!1),n.Ip(0,!0,!0),o=n.ld;o!=-1;o=n.ve(o))n.jc(o)==1736&&h.tn.W(n,o,-1,!1,u)},a.QE=function(n,o){var u=n.K();return h.ba.zd(u)?((o=new h.Ua(n.description)).oc(n,!0),o):u==197?(u=new h.l,n.A(u),u.da()<=o&&u.S()<=o?(o=new h.Ta(n.description),n.tf(o),o):u.da()<=o||u.S()<=o?(o=new h.Ua(n.description),u=new h.Ta,n.If(0,u),o.nf(u),n.If(2,u),o.lineTo(u),o):((o=new h.Ea(n.description)).bd(n,!1),o)):n},a}(),h.cm=L}(X||(X={})),function(h){var L=function(){function a(n){this.Gm=new h.ja(0),this.fw=new h.ja(0),this.xt=new h.h,this.yt=new h.h,this.g=n,this.Js=-1}return a.prototype.cc=function(n){return this.g.cc(this.uz(n))},a.prototype.Dv=function(n){var o=this.dz(n);if(n=this.BF(n),this.g.Na(o)==n){var u=o;o=n,n=u}return this.g.Hc(o,this.xt),this.g.Hc(n,this.yt),this.xt.y<this.yt.y},a.prototype.uz=function(n){var o=this.dz(n);return n=this.BF(n),this.g.V(o)==n?o:n},a.prototype.dz=function(n){return this.Gm.get(n)},a.prototype.BF=function(n){return this.fw.get(n)},a.prototype.lF=function(n){this.Gm.set(n,this.Js),this.Js=n},a.prototype.hI=function(n){if(this.Js!=-1){var o=this.Js;return this.Js=this.Gm.get(o),this.Gm.set(o,n),this.fw.set(o,this.g.V(n)),o}return this.Gm==null&&(this.Gm=new h.ja(0),this.fw=new h.ja(0)),o=this.Gm.size,this.Gm.add(n),this.fw.add(this.g.V(n)),o},a.prototype.mz=function(n){return this.g.cd(this.dz(n))},a}();h.qY=L;var b=function(){function a(n){this.Ce=n,this.ie=new h.zb,this.Pm=new h.zb,this.wH=0,this.Bo=null,this.sA=-1}return a.prototype.compare=function(n,o,u){u=n.ka(u);var p=this.Ce.hb;if(this.sA==o)var f=this.wH;else this.Bo=p.cc(o),this.Bo==null?((n=p.g).fd(p.uz(o),this.ie),this.Bo=this.ie,f=this.ie.Me(this.Ce.Ah,0)):f=this.Bo.Me(this.Ce.Ah,0),this.wH=f,this.sA=o;if((n=p.cc(u))==null){(n=p.g).fd(p.uz(u),this.Pm),n=this.Pm;var m=this.Pm.Me(this.Ce.Ah,0)}else m=n.Me(this.Ce.Ah,0);return f==m&&(o=p.Dv(o),u=p.Dv(u),(o=.5*((u=Math.min(o?this.Bo.ma:this.Bo.oa,u?n.ma:n.oa))+this.Ce.Ah))==this.Ce.Ah&&(o=u),f=this.Bo.Me(o,0),m=n.Me(o,0)),f<m?-1:f>m?1:0},a.prototype.reset=function(){this.sA=-1},a}(),c=function(){function a(){this.Ym=this.Il=null,this.fb=new h.Zj,this.fb.LP(),this.ae=new b(this),this.fb.Wo(this.ae)}return a.prototype.BQ=function(){var n=!1;if(this.hw&&(n=this.CQ()),this.g.ea(this.Y)==1){var o=this.g.Ob(this.Y);return n=this.g.qz(o),this.g.JB(o,!0),0>n&&(n=this.g.Ya(o),this.g.jJ(n),this.g.Yg(o,this.g.Na(n)),!0)}for(this.Gl=this.g.Fy(),this.xo=this.g.Fy(),o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))this.g.ir(o,this.Gl,0),this.g.ir(o,this.xo,-1);o=new h.ja(0),this.Ah=NaN;var u=new h.h;this.ft=this.g.ea(this.Y),this.so=this.g.Hd(),this.Ts=this.g.Hd();for(var p=this.Il.sc(this.Il.je);p!=-1;p=this.Il.lb(p)){var f=this.Il.getData(p);if(this.g.Hc(f,u),u.y!=this.Ah&&o.size!=0&&(n=this.vt(o)||n,this.ae.reset(),o.clear(!1)),o.add(f),this.Ah=u.y,this.ft==0)break}for(0<this.ft&&(n=this.vt(o)||n,o.clear(!1)),this.g.Ud(this.so),this.g.Ud(this.Ts),o=this.g.Ob(this.Y);o!=-1;)if(this.g.uj(o,this.Gl)==3){for(this.g.JB(o,!0),u=o,o=this.g.uj(o,this.xo);o!=-1;)p=this.g.uj(o,this.xo),this.g.RT(this.Y,this.g.Sb(u),o),u=o,o=p;o=this.g.Sb(u)}else this.g.JB(o,!1),o=this.g.Sb(o);return this.g.wB(this.Gl),this.g.wB(this.xo),n},a.prototype.vt=function(n){return this.SV(n)},a.prototype.SV=function(n){var o=!1;this.hb==null&&(this.hb=new L(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.RV(n);for(var u=0,p=n.size;u<p;u++){var f=n.get(u);f!=-1&&this.iG(f,-1)}for(u=0;u<this.Ym.size&&0<this.ft;u++)if(n=this.Ym.get(u),f=this.hb.mz(this.fb.ka(n)),p=-1,this.g.uj(f,this.Gl)==0){f=this.fb.xe(n);for(var m,w=n;f!=-1;){var x=this.fb.ka(f),E=this.hb.mz(x),T=this.g.uj(E,this.Gl);if(T!=0){p=E;break}w=f,f=this.fb.xe(f)}f==-1?(m=!0,f=w):(x=this.fb.ka(f),m=this.hb.Dv(x),f=this.fb.lb(f),m=!m);do{if(x=this.fb.ka(f),E=this.hb.mz(x),(T=this.g.uj(E,this.Gl))==0&&(m!=this.hb.Dv(x)&&(o=this.g.Ya(E),this.g.jJ(o),this.g.Yg(E,this.g.Na(o)),o=!0),this.g.ir(E,this.Gl,m?3:2),m||(w=this.g.uj(p,this.xo),this.g.ir(p,this.xo,E),this.g.ir(E,this.xo,w)),this.ft--,this.ft==0))return o;p=E,w=f,f=this.fb.lb(f),m=!m}while(w!=n)}return o},a.prototype.RV=function(n){for(var o=0,u=n.size;o<u;o++){var p=n.get(o),f=this.g.Qa(p,this.so),m=this.g.Qa(p,this.Ts);if(f!=-1){var w=this.fb.ka(f);this.hb.lF(w),this.g.Sa(p,this.so,-1)}m!=-1&&(w=this.fb.ka(m),this.hb.lF(w),this.g.Sa(p,this.Ts,-1)),w=-1,f!=-1&&m!=-1?(this.fb.wd(f,-1),this.fb.wd(m,-1),n.set(o,-1)):w=f!=-1?f:m,w!=-1&&(this.iG(p,w)||this.fb.wd(w,-1),n.set(o,-1))}},a.prototype.iG=function(n,o){var u=new h.h,p=new h.h;this.g.Hc(n,u);var f=this.g.V(n);this.g.Hc(f,p);var m=!1;if(u.y<p.y){m=!0;var w=this.hb.hI(n);if(o==-1)var x=this.fb.addElement(w,-1);else x=o,this.fb.Uj(x,w);(w=this.g.Qa(f,this.so))==-1?this.g.Sa(f,this.so,x):this.g.Sa(f,this.Ts,x),f=this.g.cd(n),this.g.uj(f,this.Gl)==0&&this.Ym.add(x)}return f=this.g.Na(n),this.g.Hc(f,p),u.y<p.y&&(m=!0,w=this.hb.hI(f),o==-1?x=this.fb.addElement(w,-1):(x=o,this.fb.Uj(x,w)),(w=this.g.Qa(f,this.so))==-1?this.g.Sa(f,this.so,x):this.g.Sa(f,this.Ts,x),f=this.g.cd(n),this.g.uj(f,this.Gl)==0&&this.Ym.add(x)),m},a.W=function(n,o,u,p){var f=new a;return f.g=n,f.Y=o,f.Il=u,f.hw=p,f.BQ()},a.prototype.CQ=function(){var n=new h.ja(0),o=new h.ja(0),u=-1,p=-1,f=new h.h;f.Sc();for(var m=-1,w=-1,x=-1,E=new h.h,T=this.Il.sc(this.Il.je);T!=-1;T=this.Il.lb(T)){var A=this.Il.getData(T);this.g.Hc(A,E);var P=this.g.cd(A);f.rb(E)&&w==P?(p==-1&&(u=this.g.Fy(),p=this.g.Hd()),x==-1&&(x=o.size,this.g.Sa(m,p,x),o.add(1),this.g.uj(P,u)==-1&&(this.g.ir(P,u,m),n.add(P))),this.g.Sa(A,p,x),o.TW(o.Gc()+1)):(x=-1,f.N(E)),m=A,w=P}if(n.size==0)return!1;for(f=new h.ja(0),m=new h.ja(0),w=0,x=n.size;w<x;w++){P=n.get(w);var F=this.g.uj(P,u);for(A=this.g.Qa(F,p),f.clear(!1),m.clear(!1),f.add(F),m.add(A),A=this.g.V(F);A!=F;A=this.g.V(A)){var j=A;if((E=this.g.Qa(j,p))!=-1)if(m.size==0)m.add(E),f.add(j);else if(m.Gc()==E){T=f.Gc();var H=this.g.V(T);F=this.g.V(j),this.g.Cc(T,F),this.g.Dc(F,T),this.g.Cc(j,H),this.g.Dc(H,j),j=[!1],H=this.g.hG(this.Y,H,this.g.Ya(P),j),this.g.Sa(A,p,-1),j[0]&&this.g.Kf(P,F),A=this.g.Ka(P),A-=F=this.g.Ka(H),this.g.Xj(P,A),o.set(E,o.get(E)-1),o.get(E)==1&&(o.set(E,0),m.Jf(),f.Jf()),A=F=T}else f.add(A),m.add(E)}}return this.g.wB(u),this.g.Ud(p),!0},a}();h.QL=c}(X||(X={})),function(h){var L=function(){function b(){}return b.prototype.hg=function(){this.JA=this.tb=null},b.prototype.get=function(){return this.JA},b.prototype.set=function(c){if(this.JA=c,c!=null)throw c.K()==322&&(this.tb=c),h.i.Ra()},b.prototype.create=function(c){if(c!=322)throw h.i.ga("Not Implemented");this.Qr()},b.prototype.Qr=function(){this.tb==null&&(this.tb=new h.zb),this.JA=this.tb},b}();h.hg=L}(X||(X={})),function(h){(h=h.RL||(h.RL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(X||(X={})),function(h){var L=function(c){this.bj=c,this.kC=this.lC=1,this.mB=this.lB=this.nB=0},b=function(){function c(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Ck=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Ew=0,this.no=[],this.bt=[],this.Aw=[],this.Kq=[],this.GA=[]}return c.prototype.qB=function(a){if(a!=null){for(var n=0,o=a.length;n<o;n++)this.jW(a[n]);a.length=0}},c.prototype.jW=function(a){a.bj=null,this.Kq.push(a)},c.prototype.Qw=function(a){if(this.Kq.length===0)var n=new L(a);else(n=this.Kq[this.Kq.length-1]).bj=a,--this.Kq.length;return n},c.prototype.LR=function(a,n){return a==0?this.bt[n]:this.Aw[n]},c.prototype.VA=function(){this.Ew>=this.GA.length&&this.GA.push(new h.hg);var a=this.GA[this.Ew];return this.Ew++,a},c.prototype.clear=function(){this.qB(this.no),this.qB(this.bt),this.qB(this.Aw),this.Ew=0},c.prototype.Po=function(a){this.no.push(this.Qw(a))},c.prototype.ql=function(a){return a==0?this.bt.length:this.Aw.length},c.prototype.Xp=function(a,n){return this.LR(a,n).bj},c.prototype.Fa=function(a,n){if(this.no.length!=2)throw h.i.Ra();this.ra=a;var o=h.mc.ox(.01*a),u=!1,p=this.no[0],f=this.no[1];if(n||(5&p.bj.Br(f.bj,a,!0))!=0){if(p.bj.K()==322){var m=p.bj;if(f.bj.K()==322){n=f.bj;var w=h.zb.Yx(m,n,null,this.Hq,this.Ck,a);if(w==0)throw h.zb.Yx(m,n,null,this.Hq,this.Ck,a),h.i.Ra();a=Array(9),h.P.bv(a,null);for(var x=0;x<w;x++){var E=this.Hq[x],T=this.Ck[x],A=p.mB,P=1;E==0?(A=p.nB,P=p.lC):E==1&&(A=p.lB,P=p.kC);var F=f.mB,j=1;T==0?(F=f.nB,j=f.lC):T==1&&(F=f.lB,j=f.kC);var H=new h.h;A==F?(A=new h.h,m.ic(E,A),E=new h.h,n.ic(T,E),j/=T=P+j,h.mc.IG(A,E,j,H),h.h.zc(H,A)+h.h.zc(H,E)>o&&(u=!0)):A>F?(m.ic(E,H),E=new h.h,n.ic(T,E),h.h.zc(H,E)>o&&(u=!0)):(n.ic(T,H),A=new h.h,m.ic(E,A),h.h.zc(H,A)>o&&(u=!0)),a[x]=H}for(p=0,f=-1,x=0;x<=w;x++)(j=x<w?this.Hq[x]:1)!=p&&(o=this.VA(),m.dh(p,j,o),f!=-1&&o.get().Ec(a[f]),x!=w&&o.get().Rc(a[x]),p=j,this.bt.push(this.Qw(o.get()))),f=x;for(m=[0,0,0,0,0,0,0,0,0],x=0;x<w;x++)m[x]=x;for(1<w&&this.Ck[0]>this.Ck[1]&&(j=this.Ck[0],this.Ck[0]=this.Ck[1],this.Ck[1]=j,x=m[0],m[0]=m[1],m[1]=x),p=0,f=-1,x=0;x<=w;x++)(j=x<w?this.Ck[x]:1)!=p&&(o=this.VA(),n.dh(p,j,o),f!=-1&&(p=m[f],o.get().Ec(a[p])),x!=w&&(p=m[x],o.get().Rc(a[p])),p=j,this.Aw.push(this.Qw(o.get()))),f=x;return u}}throw h.i.Ra()}return!1},c.prototype.Fz=function(a,n,o){if(n.copyTo(this.Cf),this.no.length!=1)throw h.i.Ra();this.ra=a;var u=this.no[0];if(o||u.bj.tu(n.D(),a,!0)){if(u.bj.K()!=322)throw h.i.Ra();var p=(a=u.bj).fe(n.D(),!1);this.Hq[0]=p;var f=u.mB;for(o=1,p==0?(f=u.nB,o=u.lC):p==1&&(f=u.lB,o=u.kC),u=new h.h,f==0?(f=new h.h,a.ic(p,f),n=n.D(),h.mc.IG(f,n,1/(o+1),u)):0<f?(u=new h.h,a.ic(p,u)):u=n.D(),o=0,p=-1,f=0;1>=f;f++){if((n=1>f?this.Hq[f]:1)!=o){var m=this.VA();a.dh(o,n,m),p!=-1&&m.get().Ec(u),f!=1&&m.get().Rc(u),o=n,this.bt.push(this.Qw(m.get()))}p=f}this.Cf.Db(u)}},c}();h.NC=b}(X||(X={})),function(h){var L=function(){function b(c){this.Fs=this.sk=this.tb=null,this.bg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=c,this.bg=this.Vx(this.El),this.Bm=!1,this.sk=null,this.Fs=new h.h}return b.prototype.tW=function(c){if(this.ib!=c.ib)throw h.i.Hb();this.Af=c.Af,this.Kd=c.Kd,this.gb=c.gb,this.El=c.El,this.bg=c.bg,this.Bm=c.Bm,this.sk=null},b.prototype.ia=function(){if(this.Af!=this.Kd&&this.vD(),this.Bm)this.Kd=(this.Kd+1)%this.bg;else{if(this.Kd==this.bg)throw h.i.re();this.Kd++}return this.sk},b.prototype.ni=function(){if(this.Bm)this.Kd=(this.bg+this.Kd-1)%this.bg;else{if(this.Kd==0)throw h.i.re();this.Kd--}return this.Kd!=this.Af&&this.vD(),this.sk},b.prototype.uW=function(){this.Af=-1,this.Kd=0},b.prototype.vW=function(){this.Kd=this.bg,this.Af=-1},b.prototype.Wb=function(c,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.ea()){var n=this.CM();if(c>=n&&c<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=c-n)}a=0<=a&&a<this.ib.ea()&&c>=this.ib.Ca(a)&&c<this.ib.Wc(a)?a:this.ib.nz(c),this.El=a+1,this.gb=a,this.Af=-1,this.Kd=c-this.ib.Ca(a),this.bg=this.Vx(a),this.ib.Ca(this.gb),this.ib.ec(this.gb)},b.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.bg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},b.prototype.aj=function(){this.bg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},b.prototype.Vx=function(c){if(this.ib.Bc())return 0;var a=1;return this.ib.ec(c)&&(a=0),this.ib.Ka(c)-a},b.prototype.Pn=function(){return this.Af==this.bg-1&&this.ib.ec(this.gb)},b.prototype.DB=function(){this.Bm=!0},b.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},b.prototype.CM=function(){return this.ib.Ca(this.gb)},b.prototype.jk=function(){return this.Pn()?this.ib.Ca(this.gb):this.xb()+1},b.prototype.xm=function(){return this.Af==0},b.prototype.Rn=function(){return this.Af==this.bg-1},b.prototype.Ia=function(){return this.Kd<this.bg},b.prototype.zz=function(){return 0<this.Kd},b.prototype.Pf=function(){var c=new b(this.ib);return c.Af=this.Af,c.Kd=this.Kd,c.bg=this.bg,c.gb=this.gb,c.El=this.El,c.ib=this.ib,c.Bm=this.Bm,c},b.prototype.vD=function(){if(0>this.Kd||this.Kd>=this.bg)throw h.i.re();this.Af=this.Kd;var c=this.xb();this.ib.rc();var a=this.ib.Se,n=1;switch(a!=null&&(n=7&a.read(c)),a=this.ib.description,n){case 1:this.tb==null&&(this.tb=new h.zb),this.sk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.sk.kg(a),n=this.jk(),this.ib.Hc(c,this.Fs),this.sk.Ec(this.Fs),this.ib.Hc(n,this.Fs),this.sk.Rc(this.Fs);for(var o=1,u=a.Ba;o<u;o++)for(var p=a.qd(o),f=h.ua.Wa(p),m=0;m<f;m++){var w=this.ib.Vc(p,c,m);this.sk.SB(p,m,w),w=this.ib.Vc(p,n,m),this.sk.IB(p,m,w)}},b.prototype.SS=function(){return this.gb==this.ib.ea()-1},b.prototype.Qn=function(){var c=this.ib.OR();return c!=null&&(7&c.read(this.Af))!=1},b}();h.SL=L}(X||(X={})),function(h){var L=function(){function b(c){c instanceof h.ba?(this.rH=c,this.za=-1,this.Gi=1):(this.mT=c.slice(0),this.za=-1,this.Gi=c.length)}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.rH!=null?this.rH:this.mT[this.za]):null},b.prototype.qe=function(){},b}();h.$c=L}(X||(X={})),function(h){var L=function(){this.next=null},b=function(){function c(){this.Vq=this.Mw=this.Nw=0,this.eF=!1,this.aK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return c.prototype.sX=function(a,n,o){this.ri=a,this.rl=n,this.Lh=this.Yl=null,this.Vq=0,this.qy=o,this.jn==null&&(this.jn=h.P.lg(384,0)),this.hK()},c.prototype.S=function(){return this.ri},c.prototype.da=function(){return this.rl},c.prototype.flush=function(){0<this.Ql&&(this.qy.aF(this.jn,this.Ql),this.Ql=0)},c.prototype.hK=function(){if(0<this.Vq){for(var a=0;a<this.rl;a++){for(var n=this.Yl[a];n!=null;){var o=n;n=n.next,o.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},c.prototype.cJ=function(a){for(this.eF=a==c.Bx,a=this.Nw;a<=this.Mw;a++)this.mN(),this.fN(a),this.TP();this.hK()},c.prototype.fy=function(a,n,o,u){if(n!=u){var p=1;if(n>u&&(p=a,a=o,o=p,p=n,n=u,u=p,p=-1),!(0>u||n>=this.rl)){0>a&&0>o?o=a=-1:a>=this.ri&&o>=this.ri&&(o=a=this.ri);var f=(o-a)/(u-n);u>this.rl&&(o=f*((u=this.rl)-n)+a),0>n&&(a=f*(0-n)+a,n=0);var m=Math.max(this.ri+1,8388607);-8388607>a?(n=(0-a)/f+n,a=0):a>m&&(n=(this.ri-a)/f+n,a=this.ri),-8388607>o?u=(0-a)/f+n:o>m&&(u=(this.ri-a)/f+n),(n=h.P.truncate(n))!=(u=h.P.truncate(u))&&((o=new L).x=h.P.truncate(4294967296*a),o.y=n,o.H=u,o.QP=h.P.truncate(4294967296*f),o.dir=p,this.Yl==null&&(this.Yl=h.P.lg(this.rl,null)),o.next=this.Yl[o.y],this.Yl[o.y]=o,o.y<this.Nw&&(this.Nw=o.y),o.H>this.Mw&&(this.Mw=o.H),this.Vq++)}}},c.prototype.mN=function(){if(this.Lh!=null){for(var a=!1,n=null,o=this.Lh;o!=null;)if(o.y++,o.y==o.H){var u=o;o=o.next,n!=null?n.next=o:this.Lh=o,u.next=null}else o.x+=o.QP,n!=null&&n.x>o.x&&(a=!0),n=o,o=o.next;a&&(this.Lh=this.$J(this.Lh))}},c.prototype.fN=function(a){if(!(a>=this.rl)){var n=this.Yl[a];if(n!=null){this.Yl[a]=null,n=this.$J(n),this.Vq-=this.aK,a=this.Lh;for(var o=!0,u=n,p=null;a!=null&&u!=null;)a.x>u.x?(o&&(this.Lh=u),o=u.next,u.next=a,p!=null&&(p.next=u),p=u,u=o):(o=a.next,a.next=u,p!=null&&(p.next=a),p=a,a=o),o=!1;this.Lh==null&&(this.Lh=n)}}},c.ZJ=function(a,n){return 0>a?0:a>n?n:a},c.prototype.TP=function(){if(this.Lh!=null){for(var a=0,n=this.Lh,o=h.P.truncate(h.P.QG(n.x)),u=n.next;u!=null;u=u.next)if(a=this.eF?1^a:a+u.dir,u.x>n.x){var p=h.P.truncate(h.P.QG(u.x));a!=0&&(n=c.ZJ(o,this.ri),(o=c.ZJ(p,this.ri))>n&&n<this.ri&&(this.jn[this.Ql++]=n,this.jn[this.Ql++]=o,this.jn[this.Ql++]=u.y,this.Ql==this.jn.length&&(this.qy.aF(this.jn,this.Ql),this.Ql=0))),n=u,o=p}}},c.prototype.$J=function(a){for(var n=0,o=a;o!=null;o=o.next)n++;if(this.aK=n,n==1)return a;this.Lf==null?this.Lf=h.P.lg(Math.max(n,16),null):this.Lf.length<n&&(this.Lf=h.P.lg(Math.max(n,2*this.Lf.length),null));var u=0;for(o=a;o!=null;o=o.next)this.Lf[u++]=o;for(n==2?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):c.uN(this.Lf,n,function(p,f){return p==f?0:p.x<f.x?-1:p.x>f.x?1:0}),a=this.Lf[0],this.Lf[0]=null,o=a,u=1;u<n;u++)o.next=this.Lf[u],o=this.Lf[u],this.Lf[u]=null;return o.next=null,a},c.uN=function(a,n,o){if(n==a.length)a.sort(o);else{var u=a.slice(0,0),p=a.slice(n);n=a.slice(0,n).sort(o),a.length=0,a.push.apply(a,u.concat(n).concat(p))}},c.Bx=0,c}();h.Ox=b}(X||(X={})),function(h){var L=function(){function b(){}return b.prototype.wi=function(c,a){var n=this.g.Qa(c,this.Rq);if(this.Fl==n&&(this.Fl=this.oe.lb(this.Fl)),this.io==n&&(this.io=this.oe.lb(this.io)),this.oe.kd(this.LA,n),this.ck(c),a&&(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c){var o=this.g.V(c);if(o!=c){if((n=this.g.cd(o))==a)return void this.g.Kf(a,o);if((o=this.g.Na(c))!=c&&(n=this.g.cd(o))==a)return void this.g.Kf(a,o)}this.g.Kf(a,-1),this.g.Yg(a,-1)}},b.prototype.jD=function(){for(var c=!1,a=new h.h;;){this.Yh==null?(this.Yh=new h.ja(0),this.Bs=new h.ja(0),this.ye=new h.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var n=this.io,o=0,u=!0;n!=this.Fl;){var p=this.oe.getData(n),f=new h.h;this.g.Hc(p,f),u&&(this.g.Hc(p,a),u=!1),f=this.g.Na(p);var m=this.g.V(p);this.g.Qa(f,this.zg)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.zg,-559038737),this.Bs.add(p),this.ye.add(o++)),this.g.Qa(m,this.zg)!=-559038737&&(this.Yh.add(m),this.g.Sa(m,this.zg,-559038737),this.Bs.add(p),this.ye.add(o++)),n=this.oe.lb(n)}if(2>this.Yh.size)break;var w=this;for(this.ye.Wd(0,this.ye.size,function(x,E){return w.jM(x,E)}),n=0,o=this.ye.size;n<o;n++)u=this.ye.get(n),u=this.Yh.get(u),this.g.Sa(u,this.zg,n),f=new h.h,this.g.Hc(u,f);for(f=this.NM(a),n=0,o=this.ye.size;n<o;n++)(u=this.ye.get(n))!=-1&&(u=this.Yh.get(u),this.g.Sa(u,this.zg,-1));if(!f)break;c=!0}return c},b.prototype.NM=function(c){for(var a=!1,n=!0;n;){n=!1;var o=0;this.ye.get(o)==-1&&(o=this.em(o));for(var u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++){var m=this.ye.get(o);u=this.ye.get(u),m=this.Yh.get(m),u=this.Yh.get(u);var w=this.g.V(m);this.g.Fv(w,c)||(w=this.g.Na(m));var x=this.g.V(u);this.g.Fv(x,c)||(x=this.g.Na(u));var E=this.ru(w,m),T=this.ru(x,u),A=E?this.g.Na(w):this.g.V(w),P=T?this.g.Na(x):this.g.V(x),F=!1;(this.tp(w)||this.tp(x)||this.tp(m)||this.tp(u)||this.tp(A)||this.tp(P))&&(F=!0),!F&&this.g.hq(m,u)&&(F=!0,this.nD(E,T,w,m,x,u)),!F&&this.g.hq(A,P)&&(F=!0,this.nD(!E,!T,w,A,x,P)),F&&(a=!0),n=n||F,o=this.em(o),u=this.em(o)}}if(!a)for(o=0,this.ye.get(o)==-1&&(o=this.em(o)),u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++)m=this.ye.get(o),u=this.ye.get(u),m=this.Yh.get(m),u=this.Yh.get(u),w=this.g.V(m),this.g.Fv(w,c)||(w=this.g.Na(m)),x=this.g.V(u),this.g.Fv(x,c)||(x=this.g.Na(u)),E=this.ru(w,m),T=this.ru(x,u),A=E?this.g.Na(w):this.g.V(w),P=T?this.g.Na(x):this.g.V(x),this.xM(E,T,m,w,A,u,x,P)&&(a=!0),o=this.em(o),u=this.em(o);return a},b.prototype.RM=function(){this.g.jc(this.Y)==1736&&this.g.Jn(this.Y)==1&&new h.Hg().EU(this.hw,this.g,this.Y,this.nd);var c=!1,a=!0;this.zg=this.Rq=-1;var n=this.g.I(this.Y),o=new h.ja(0);o.Jb(n);for(var u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++)o.add(p),p=this.g.V(p);var w=this.g.ud.o,x=this.g.ud.Mf;this.g.wb.rc();var E=this.g.wb.Aa[0].o;for(o.Wd(0,n,function(A,P){var F=w[x*A],j=w[x*P],H=E[2*F];F=E[2*F+1];var W=E[2*j];return(H=F<(j=E[2*j+1])?-1:F>j?1:H<W?-1:H>W?1:0)==0&&(H=(A=w[x*A+3])<(P=w[x*P+3])?-1:A==P?0:1),H}),this.Rq=this.g.Hd(),this.oe=new h.kp,this.LA=this.oe.Rh(0),this.oe.hn(n),u=0;u<n;u++)p=o.get(u),f=this.oe.addElement(this.LA,p),this.g.Sa(p,this.Rq,f);for(this.zg=this.g.Hd(),this.Fl=-1,this.XC()&&(c=!0);a;){a=!1,n=0,o=!1;do{o=!1,this.io=-1,m=0,u=new h.h,f=new h.h;for(var T=this.oe.sc(this.LA);T!=-1;)p=this.oe.getData(T),this.io!=-1?(this.g.Hc(p,f),u.rb(f)?m++:(u.N(f),this.Fl=T,0<m&&(p=this.jD())&&(o=!0,this.Fl!=-1&&(p=this.oe.getData(this.Fl),this.g.Hc(p,u))),this.io=T=this.Fl,m=0)):(this.io=T,this.g.Hc(this.oe.getData(T),u),m=0),T!=-1&&(T=this.oe.lb(T));if(this.Fl=-1,0<m&&(p=this.jD())&&(o=!0),10<n++)throw h.i.Ra();o&&this.AM(),this.XC()&&(o=!0),a=a||o&&!1,c=c||o}while(o)}return this.g.Ud(this.Rq),this.g.Ud(this.zg),h.QL.W(this.g,this.Y,this.oe,this.hw)||c},b.prototype.ru=function(c,a){return this.g.V(a)!=c},b.prototype.xM=function(c,a,n,o,u,p,f,m){if(o==f)return this.ck(n),this.ck(p),!1;var w=this.g.Qa(n,this.zg),x=this.g.Qa(u,this.zg),E=this.g.Qa(p,this.zg),T=this.g.Qa(m,this.zg),A=[0,0,0,0];for((n=[0,0,0,0,0,0,0,0])[0]=0,A[0]=w,n[1]=0,A[1]=x,n[2]=1,A[2]=E,n[3]=1,A[3]=T,w=1;4>w;w++){for(x=A[w],E=n[w],T=w-1;0<=T&&A[T]>x;)A[T+1]=A[T],n[T+1]=n[T],T--;A[T+1]=x,n[T+1]=E}return A=0,n[0]!=0&&(A|=1),n[1]!=0&&(A|=2),n[2]!=0&&(A|=4),n[3]!=0&&(A|=8),(A==5||A==10)&&(c==a?c?(this.g.Cc(m,o),this.g.Dc(o,m),this.g.Cc(u,f),this.g.Dc(f,u)):(this.g.Dc(m,o),this.g.Cc(o,m),this.g.Dc(u,f),this.g.Cc(f,u)):c?(this.g.Dc(o,p),this.g.Cc(p,o),this.g.Dc(f,u),this.g.Cc(u,f)):(this.g.Cc(o,p),this.g.Dc(p,o),this.g.Cc(f,u),this.g.Dc(u,f)),!0)},b.prototype.nD=function(c,a,n,o,u,p){this.EY?this.PM():this.OM(c,a,n,o,u,p)},b.prototype.PM=function(){throw h.i.ga("not implemented.")},b.prototype.OM=function(c,a,n,o,u,p){if(c!=a)c?(this.g.Cc(n,u),this.g.Dc(u,n),this.g.Cc(p,o),this.g.Dc(o,p),this.wn(u,n),this.wi(u,!0),this.g.oi(u,!0),this.ck(n),this.wn(p,o),this.wi(p,!0),this.g.oi(p,!1)):(this.g.Cc(u,n),this.g.Dc(n,u),this.g.Cc(o,p),this.g.Dc(p,o),this.wn(u,n),this.wi(u,!0),this.g.oi(u,!1),this.ck(n),this.wn(p,o),this.wi(p,!0),this.g.oi(p,!0)),this.ck(o);else{var f=c?n:o,m=a?u:p;for(c=c?o:n,a=a?p:u,u=!1,this.g.Cc(f,m),this.g.Cc(m,f),this.g.Dc(c,a),this.g.Dc(a,c),p=a;p!=m;)n=this.g.Na(p),o=this.g.V(p),this.g.Dc(p,o),this.g.Cc(p,n),u=u||p==f,p=o;u||(n=this.g.Na(m),o=this.g.V(m),this.g.Dc(m,o),this.g.Cc(m,n)),this.wn(m,f),this.wi(m,!0),this.g.oi(m,!1),this.ck(f),this.wn(a,c),this.wi(a,!0),this.g.oi(a,!1),this.ck(c)}},b.prototype.XC=function(){for(var c=!1,a=this.g.Ob(this.Y);a!=-1;){for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u&&1<u;){var p=this.g.Na(n),f=this.g.V(n);this.g.hq(p,f)?(c=!0,this.wi(n,!1),this.g.pd(n,!0),this.wi(f,!1),this.g.pd(f,!0),n=p,o=0,u=this.g.Ka(a)):(n=f,o++)}if(2>this.g.Ka(a)){for(c=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++)this.wi(c,!1),c=this.g.V(c);a=this.g.ar(a),c=!0}else a=this.g.Sb(a)}return c},b.prototype.tp=function(c){for(var a=!1;;){var n=this.g.V(c),o=this.g.Na(c);if(n==c)return this.wi(c,!0),this.g.oi(c,!1),!0;if(!this.g.hq(n,o)||(a=!0,this.ck(o),this.ck(n),this.wi(c,!0),this.g.oi(c,!1),this.wn(n,o),this.wi(n,!0),this.g.oi(n,!0),n==o))break;c=o}return a},b.prototype.AM=function(){for(var c=0,a=this.oe.sc(this.oe.je);a!=-1;a=this.oe.lb(a)){var n=this.oe.getData(a);this.g.cj(n,-1)}for(var o=0,u=this.g.Ob(this.Y);u!=-1;)if((a=this.g.Ya(u))==-1||this.g.cd(a)!=-1)n=u,u=this.g.Sb(u),this.g.br(n);else{this.g.cj(a,u);var p=1;for(n=this.g.V(a);n!=a;n=this.g.V(n))this.g.cj(n,u),p++;this.g.ep(u,!1),this.g.Xj(u,p),this.g.Yg(u,this.g.Na(a)),o+=p,c++,u=this.g.Sb(u)}for(a=this.oe.sc(this.oe.je);a!=-1;a=this.oe.lb(a))n=this.oe.getData(a),this.g.cd(n)==-1&&(u=this.g.hG(this.Y,n,n,null),o+=this.g.Ka(u),c++);for(this.g.Tl(this.Y,c),this.g.Vj(this.Y,o),c=0,o=this.g.ld;o!=-1;o=this.g.ve(o))c+=this.g.I(o);this.g.WB(c)},b.prototype.em=function(c){for(var a=0,n=this.ye.size-1;a<n;a++)if(c=(c+1)%this.ye.size,this.ye.get(c)!=-1)return c;return-1},b.prototype.wn=function(c,a){var n=this.g.Qa(a,this.Rq),o=this.g.Qa(a,this.zg);this.g.fC(c,a),this.g.Sa(a,this.Rq,n),this.g.Sa(a,this.zg,o)},b.prototype.ck=function(c){var a=this.g.Qa(c,this.zg);a!=-1&&(this.ye.set(a,-1),this.g.Sa(c,this.zg,-1))},b.W=function(c,a,n,o,u){var p=new b;return p.g=c,p.Y=a,p.rA=n,p.hw=o,p.nd=u,p.RM()},b.prototype.jM=function(c,a){var n=this.Yh.get(c),o=new h.h;this.g.Hc(n,o),n=new h.h;var u=this.Yh.get(a);return this.g.Hc(u,n),o.rb(n)?0:(u=this.Bs.get(c),c=new h.h,this.g.Hc(u,c),u=this.Bs.get(a),a=new h.h,this.g.Hc(u,a),(u=new h.h).vc(o,c),(o=new h.h).vc(n,a),h.h.pu(u,o))},b}();h.tn=L}(X||(X={})),function(h){var L;(L=h.UL||(h.UL={}))[L.Local=0]="Local",L[L.Geographic=1]="Geographic",L[L.Projected=2]="Projected",L[L.Image=3]="Image",L[L.Unknown=4]="Unknown",function(c){c[c.Integer32=0]="Integer32",c[c.Integer64=1]="Integer64",c[c.FloatingPoint=2]="FloatingPoint"}(h.NL||(h.NL={}));var b=function(){function c(){this.qp="",this.uu=null,this.eg=0,this.TH=this.Io=-1,this.yh=null}return c.prototype.Fc=function(){return this.eg},c.prototype.PF=function(){return 1},c.prototype.Yd=function(){var a=.001;return this.eg!=0?a=h.yr.wQ(this.eg):this.yh!=null&&(a=h.RC.xQ(this.yh)),a},c.prototype.wz=function(){return this.yh},c.prototype.Id=function(){return this.eg!=0?h.Uc.ah(h.yr.Ny(this.eg)):this.yh!=null?h.RC.yQ(this.yh):void 0},c.Tb=function(a){if(a.eg!=0){if(h.yr.RS(a.eg)===!0)return 1;if(h.yr.TS(a.eg)===!0)return 2}return 4},c.prototype.cs=function(){var a=this.Fc();return this.Io!=-1?this.Io:(this.Io=h.yr.zK(a),this.Io!=-1?this.Io:a)},c.create=function(a){if(0>=a)throw h.i.O("Invalid or unsupported wkid: "+a);var n=new c;return n.eg=a,n},c.kP=function(a){if(a==null||a.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var n=new c;return n.yh=a,n},c.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.eg==a.eg&&(this.eg!=0||this.yh===a.yh)},c.prototype.toString=function(){return"[ tol: "+this.Ln()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},c.prototype.dc=function(){if(this.qp!=="")return this.qp;var a=this.toString();if(Array.prototype.reduce)return this.qp="S"+a.split("").reduce(function(u,p){return(u=(u<<5)-u+p.charCodeAt(0))&u},0);var n=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)n=(n<<5)-n+a.charCodeAt(o),n&=n;return this.qp="S"+n},c.prototype.Ln=function(){return this.Yd(0)},c.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=h.iu.sP(this)},c.TN=2147483645,c.UN=9007199254740990,c}();h.Gg=b}(X||(X={})),function(h){var L=function(b){function c(){var a=b!==null&&b.apply(this,arguments)||this;return a.Li=null,a.KT=null,a.Jq=new h.TL,a.Fo=null,a.lw=null,a}return ai(c,b),c.sP=function(a){var n=new c;if(n.eg=a.eg,n.Io=a.Io,n.TH=a.TH,n.yh=a.yh,n.yh!==""&&n.yh!==null){a=c.eM(n.yh);var o=c.cM(n.yh);n.Jq.Wx(a,o,h.ju.Integer64),n.ay(a),n.cy(o),n.eg=a.cs()}else a=c.dM(n.eg),n.ay(a),n.cy(null),n.Jq.Wx(a,null,h.ju.Integer64);return n},c.prototype.Yd=function(a){return this.Jq.Ln(a)},c.cM=function(a){if(0>=a.length)throw h.i.O();var n=null;try{n=h.HC.fromString(a)}catch{n=null}return n==null?null:c.WC(n,!0)},c.prototype.ay=function(a){this.Ld=a,this.Fo=this.Ld.Id()},c.prototype.cy=function(a){this.EH=a,this.KT=this.EH!=null?this.EH.Fo:null},c.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},c.prototype.CG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.gk().Xc():this.Ld.Xc())},c.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},c.prototype.rm=function(){return this.Ld.rm()},c.prototype.bf=function(){return this.Ld.bf()},c.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},c.prototype.Wp=function(){return this.Ld.Wp()},c.prototype.Yr=function(){return this.Ld.Yr()},c.prototype.lk=function(){return this.Ld.lk()},c.prototype.dS=function(a){return h.IC.Ky(this.Ld,a.Ld)},c.prototype.ol=function(){return this.Ld.ol()},c.prototype.Xr=function(){return this.Ld.Xr()},c.prototype.Bi=function(){return this.Tb()==3?this.Li.gk().Bi():this.Ld.Bi()},c.prototype.ih=function(){if(!this.Xc())throw h.i.O("!isPannable()");var a=new h.l;return this.Ld.ih(a),a},c.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.to},c.prototype.BR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var a=new h.l;return this.Ld.AR(a),a},c.prototype.rv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.rv()},c.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},c.prototype.Zr=function(){return this.Li!=null?this.Li.gk().Zr():this.Ld.Zr()},c.prototype.JQ=function(){return this.Ld.kv()},c.prototype.Sp=function(){return this.Fo.getUnitFactor()},c.prototype.pz=function(a){return this.Jq.pz(a)},c.prototype.tc=function(){var a=this.Tb();if(a==1)return this;if(a==3)return this.Li.gk().tc();if(a==0||a===4)throw h.i.ga("invalid call");if(this.lw!==null)return this.lw;if((a=this.gh().getGeogcs())==null)throw h.i.Ra();return this.lw=c.WE(a,this.Jq.PF())},c.WE=function(a,n){if(a==null)throw h.i.O("null pointer.");var o=new c;return a=c.ou(a,!0),o.Jq.Wx(a,null,n),o.ay(a),o.cy(null),o.eg=a.cs(),o},c.prototype.Tb=function(){var a=this.gh();if(a!=null)switch(a.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},c.prototype.kv=function(){return this.Ld.kv()},c.ou=function(a,n){var o=a.getCode();if(0>=o&&0<(o=h.qf.getCode(a))){if((a=h.qf.coordsys(o))==null)throw h.i.O("Text to wkid mapping had failed: "+o);return c.ou(a,n)}if(n&&0<o&&(n=c.qx[o]))return n;n=h.Ab.zv(a,o,!1);var u=c.fK[n];return u||(a=0>=o?a:h.qf.coordsys(o),a=new h.IC(a),c.fK[n]=a,0<o&&(c.qx[o]=a),a)},c.dM=function(a){if(0>=a)throw h.i.O("Invalid or unsupported wkid: "+a);var n=c.qx[a];if(n!=null)return n;if((n=h.qf.coordsys(a))==null)throw h.i.O("Invalid or unsupported wkid: "+a);return(n=c.ou(n,!1)).cs()!=a&&(c.qx[a]=n),n},c.eM=function(a){if(a==null||a===void 0||a.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var n=null;try{n=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,a)}catch(o){throw h.i.O("Cannot create SpatialReference from text. "+o.message)}if(n===null)throw h.i.O("Cannot create SpatialReference from text. ");return c.ou(n,!0)},c.WC=function(a,n){var o,u=a.getCode();if(0>=u&&0<(u=h.qf.getCode(a))){if((u=h.qf.vertcs(u))===null)throw h.i.O();return c.WC(u,n)}if(n&&0<u&&(n=c.eK[u])||(a=h.Ab.zv(a,u,!1),n=c.gK[a]))return n;if(0>=u||(o=h.qf.vertcs(u)),o===null)throw h.i.O();return o=new h.JL(o),c.gK[a]=o,0<u&&(c.eK[u]=o),o},c.mI=function(a,n){if(n===null||n.B())return null;var o=new h.l;if(n!==null&&a.Tb()!=1){var u=a.tc(),p=u.gh();a=h.xr.Pr(a,u,null,null),(n=h.Gx.local().W(n,a,null)).A(o)}else p=a.gh(),n.A(o);return n=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new h.FC(o.v,o.G,o.C,o.H,n,p)},c.fD=function(a){var n={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var u=a[o],p={DY:!1,RY:"",QY:-1,geogtran:null};u.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var f=u.getGeogtran().getCode();-1<f?p.wkid=f:p.wkt=u.getGeogtran().toString(),n.steps.push(p)}return n},c.QR=function(a,n,o,u){return o===void 0&&(o=null),o=c.mI(u,o),a=h.mp.getGTlist(a.gh(),n.gh(),2,h.mp.PE_GTLIST_OPTS_COMMON,o,1),n=null,a&&0<a.length&&(n=this.fD(a[0]),h.Lx.destroy(a)),o!==null&&o.destroy(),n},c.RR=function(a,n,o,u){var p;if(o===void 0&&(o=null),u===void 0&&(u=null),p===void 0&&(p=30),o=c.mI(u,o),a=h.mp.getGTlist(a.gh(),n.gh(),2,h.mp.PE_GTLIST_OPTS_COMMON,o,p),n=[],a&&0<a.length){for(p=0;p<a.length;p++)n.push(this.fD(a[p]));h.Lx.destroy(a)}return o!==null&&o.destroy(),n},c.qx={},c.fK={},c.eK={},c.gK={},c}(h.Gg);h.iu=L}(X||(X={})),function(h){var L,b;(b=L=h.ju||(h.ju={}))[b.Integer32=0]="Integer32",b[b.Integer64=1]="Integer64",b[b.FloatingPoint=2]="FloatingPoint";var c=function(){function a(){this.rp()}return a.prototype.assign=function(n){this.Hm=n.Hm,this.Im=n.Im,this.Rj=n.Rj,this.mA=n.mA,this.Go=n.Go,this.lA=n.lA,this.Jk=n.Jk,this.Oq=n.Oq,this.Nq=n.Nq,this.Tm=n.Tm},a.prototype.PF=function(){return this.Tm},a.prototype.rp=function(){this.Im=this.Hm=0,this.Rj=1,this.mA=0,this.Go=1,this.lA=0,this.Nq=this.Oq=this.Jk=2220446049250313e-29,this.Tm=L.FloatingPoint},a.prototype.Wx=function(n,o,u){if(this.rp(),this.Tm=u,u!=L.FloatingPoint){var p=new h.l;n.bR(p),this.Hm=p.v,this.Im=p.G}else this.Im=this.Hm=-17976931348623157e292;(p=n.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(p=(u==L.Integer64?1e-9:1/18e5)*n.bf(),this.Rj=1/p):p==h.Tc.PE_TYPE_PROJCS&&(p=(u==L.Integer64?1e-4:.001)*n.rm(),this.Rj=1/p),o!=null?(p=(u==L.Integer32?.001:1e-4)*o.CH,this.Go=1/p):this.Go=1e4,this.SM(),this.Jk=n.uw,this.Oq=o!=null?.001*o.CH:.001,this.Nq=2220446049250313e-29},a.prototype.SM=function(){if(this.Tm!=L.FloatingPoint){var n=this.Tm==L.Integer64?h.Gg.UN:h.Gg.TN,o=n/this.Rj,u=this.Hm+o,p=h.P.truncate((u-this.Hm)*this.Rj);p>n&&(this.Rj=n/(u-this.Hm)),o=this.Im+o,(p=h.P.truncate((o-this.Im)*this.Rj))>n&&(this.Rj=n/(o-this.Im))}},a.prototype.VB=function(n){switch(n){case 0:this.Jk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},a.prototype.Ln=function(n){switch(n){case 0:return this.Jk;case 1:return this.Oq;case 2:return this.Nq}return 0},a.prototype.pz=function(n){if(this.Tm==L.FloatingPoint)return 0;switch(n){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Go;default:return 0}},a.prototype.toString=function(){var n="SRPD [m_toleranceXY: "+this.Jk.toString();return(n=(n=(n=(n=(n=(n=(n=(n=(n=n+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.mA.toString())+";m_unitsZ: "+this.Go.toString())+";m_falseM: "+this.lA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},a}();h.TL=c}(X||(X={})),function(h){function L(u,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*u,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function b(u,p,f){return u=u/6378137*57.29577951308232,f?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function c(u,p,f){var m=u.Pf();if(u.K()===33)p=p(m.Ng(),m.kh()),m.Db(p[0],p[1]);else if(u.K()===197){var w=p(u.gs(),u.js(),f);p=p(u.fs(),u.hs(),f),m.L(w[0],w[1],p[0],p[1])}else for(w=new h.h,u=0;u<m.I();u++){m.D(u,w);var x=p(w.x,w.y,f);w.na(x[0],x[1]),m.Db(u,w)}return m}function a(u){return c(u,b,!0)}function n(u){return c(u,L,!0)}var o=Math.PI/180;h.OK=function(){function u(){}return u.xu=function(p){var f=Math.sqrt(.006694379990197414),m=Math.sin(p.y*o);return h.h.construct(6378137*p.x*o,3.1677196636462314e6*(m/(1-.006694379990197414*m*m)-1/(2*f)*Math.log((1-f*m)/(1+f*m))))},u.Ux=function(p,f,m,w){var x=.0033528106647474805,E=Math.sin(m);m=Math.cos(m);var T=(1-x)*Math.tan(p),A=T*(p=1/Math.sqrt(1+T*T)),P=Math.atan2(T,m),F=(T=p*E)*T,j=1-F,H=27233160610754688e-5*j/4040829998466145e-2,W=1+H/16384*(4096+H*(H*(320-175*H)-768)),G=H/1024*(256+H*(H*(74-47*H)-128));H=w/(635675231424518e-8*W);for(var ee,ae,le,ie=2*Math.PI;1e-12<Math.abs(H-ie);)le=Math.cos(2*P+H),ie=H,H=w/(635675231424518e-8*W)+G*(ee=Math.sin(H))*(le+G/4*((ae=Math.cos(H))*(2*le*le-1)-G/6*le*(4*ee*ee-3)*(4*le*le-3)));return w=A*ee-p*ae*m,j=x/16*j*(4+x*(4-3*j)),h.h.construct((f+(Math.atan2(ee*E,p*ae-A*ee*m)-(1-j)*x*T*(H+j*ee*(le+j*ae*(2*le*le-1)))))/o,Math.atan2(A*ae+p*ee*m,(1-x)*Math.sqrt(F+w*w))/o)},u.GM=function(p,f,m,w){var x=.0033528106647474805,E=w-f,T=Math.atan((1-x)*Math.tan(p)),A=Math.atan((1-x)*Math.tan(m)),P=Math.sin(T);T=Math.cos(T);var F=Math.sin(A);A=Math.cos(A);var j=E,H=1e3;do{var W=Math.sin(j),G=Math.cos(j),ee=Math.sqrt(A*W*A*W+(T*F-P*A*G)*(T*F-P*A*G));if(ee===0)return 0;G=P*F+T*A*G;var ae=Math.atan2(ee,G),le=T*A*W/ee,ie=1-le*le;W=G-2*P*F/ie,isNaN(W)&&(W=0);var be=x/16*ie*(4+x*(4-3*ie)),Ie=j;j=E+(1-be)*x*le*(ae+be*ee*(W+be*G*(2*W*W-1)))}while(1e-12<Math.abs(j-Ie)&&0<--H);return H===0?(P=w-f,{azimuth:Math.atan2(Math.sin(P)*Math.cos(m),Math.cos(p)*Math.sin(m)-Math.sin(p)*Math.cos(m)*Math.cos(P)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(m)+Math.cos(p)*Math.cos(m)*Math.cos(w-f))}):(f=(p=27233160610754688e-5*ie/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(A*Math.sin(j),T*F-P*A*Math.cos(j)),SQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(ae-f*ee*(W+f/4*(G*(2*W*W-1)-f/6*W*(4*ee*ee-3)*(4*W*W-3)))),PY:Math.atan2(T*Math.sin(j),T*F*Math.cos(j)-P*A)})},u.dQ=function(p){var f=p.hasAttribute(1),m=p.hasAttribute(2),w=[],x=p.ea(),E=null,T=null;f&&(E=p.vb(1)),m&&(T=p.vb(2));for(var A=new h.h,P=0;P<x;P++){for(var F=p.Ca(P),j=p.Ka(P),H=0,W=0,G=NaN,ee=NaN,ae=NaN,le=NaN,ie=p.ec(P),be=[],Ie=F;Ie<F+j;Ie++){p.D(Ie,A),le=ae=NaN;var ze=[A.x,A.y];f&&(ae=E.get(Ie),ze.push(ae)),m&&(x=T.get(Ie),ze.push(le)),Ie==F&&ie&&(H=A.x,W=A.y,G=ae,ee=le),be.push(ze)}!ie||H==A.x&&W==A.y&&(!f||isNaN(G)&&isNaN(ae)||G==ae)&&(!m||isNaN(ee)&&isNaN(le)||ee==le)||be.push(be[0].slice(0)),w.push(be)}return w},u.Ry=function(p,f){p=u.dQ(p),637.100877141506>f&&(f=637.100877141506);for(var m,w=[],x=0;x<p.length;x++){var E,T,A=p[x];w.push(m=[]),m.push([A[0][0],A[0][1]]);var P=A[0][0]*o,F=A[0][1]*o;for(E=0;E<A.length-1;E++){var j=A[E+1][0]*o,H=A[E+1][1]*o;if(P!==j||F!==H){j=(H=u.GM(F,P,H,j)).azimuth;var W=(H=H.SQ)/f;if(1<W){for(T=1;T<=W-1;T++){var G=u.Ux(F,P,j,T*f);m.push([G.x,G.y])}T=u.Ux(F,P,j,(H+Math.floor(W-1)*f)/2),m.push([T.x,T.y])}F=u.Ux(F,P,j,H),m.push([F.x,F.y]),P=F.x*o,F=F.y*o}}}return{kJ:w}},u.RQ=function(p){for(var f=[],m=0;m<p.length;m++){var w=p[m];w=u.Ry(w,1e4),f.push(w)}p=[];for(var x=0;x<f.length;x++){w=f[x];var E=0;for(m=0;m<w.kJ.length;m++){var T,A=w.kJ[m],P=u.xu(h.h.construct(A[0][0],A[0][1])),F=u.xu(h.h.construct(A[A.length-1][0],A[A.length-1][1])),j=F.x*P.y-P.x*F.y;for(T=0;T<A.length-1;T++)P=u.xu(h.h.construct(A[T+1][0],A[T+1][1])),j+=(F=u.xu(h.h.construct(A[T][0],A[T][1]))).x*P.y-P.x*F.y;E+=j}E/=1,p.push(E/-2)}return p},u}(),h.cb=function(){function u(){}return u.rB=function(p,f,m,w,x,E,T){u.aD[p.dc()]=f,isNaN(m)==0&&(u.gD[p.dc()]=m),isNaN(w)==0&&(u.tD[p.dc()]=w),isNaN(x)==0&&(u.VC[p.dc()]=x),u.hD[p.dc()]=E,T!==null&&(u.iD[p.dc()]=T)},u.Yw=function(p,f,m){u.mD[p.dc()+"-"+f.dc()]=m},u.tc=function(p){if((p=u.aD[p.dc()])==null)throw h.i.Fe();return p},u.bf=function(p){if((p=u.gD[p.dc()])==null)throw h.i.Fe();return p},u.xv=function(p){if((p=u.tD[p.dc()])==null)throw h.i.Fe();return p},u.gv=function(p){if((p=u.VC[p.dc()])==null)throw h.i.Fe();return p},u.ih=function(p){if((p=u.iD[p.dc()])==null)throw h.i.Fe();return h.l.construct(p[0],p[1],p[2],p[3])},u.Xc=function(p){if((p=u.hD[p.dc()])==null)throw h.i.Fe();return p},u.Bh=function(p,f,m){if(f.Nb(m))return p;var w=u.mD[f.dc()+"-"+m.dc()];if(w!==void 0)return w(p,f,m);throw h.i.Fe()},u.wt=function(){throw h.i.Fe()},u.WQ=function(){throw h.i.Fe()},u.WV=function(){throw h.i.Fe()},u.ol=function(){throw h.i.Fe()},u.kW=function(){var p=h.Gg.create(102100),f=h.Gg.create(3857),m=h.Gg.create(4326);h.cb.rB(p,m,NaN,NaN,NaN,!1,null),h.cb.rB(m,m,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.rB(f,m,NaN,NaN,NaN,!1,null),h.cb.Yw(p,m,a),h.cb.Yw(m,p,n),h.cb.Yw(f,m,a),h.cb.Yw(m,f,n)},u.aD=[],u.gD=[],u.tD=[],u.VC=[],u.hD=[],u.iD=[],u.mD=[],u}()}(X||(X={})),X.cb.kW(),function(h){var L=function(){function b(c){this.o=new Int32Array(0),this.jo=-1,this.Jg=this.size=this.Dl=0,this.Mf=c}return b.prototype.kd=function(c){c<this.Dl?(this.o[c*this.Mf]=this.jo,this.jo=c):this.Dl--,this.size--},b.prototype.U=function(c,a){return this.o[c*this.Mf+a]},b.prototype.T=function(c,a,n){this.o[c*this.Mf+a]=n},b.prototype.De=function(){var c=this.jo;if(c==-1){if(this.Dl==this.Jg){if(2147483647<(c=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(c=2147483647),c==this.Jg)throw h.i.re();this.yz(c)}c=this.Dl,this.Dl++}else this.jo=this.o[c*this.Mf];this.size++;for(var a=c*this.Mf;a<c*this.Mf+this.Mf;a++)this.o[a]=-1;return c},b.prototype.Nl=function(c){var a=this.jo;if(a==-1){if(this.Dl==this.Jg){if(2147483647<(a=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(a=2147483647),a==this.Jg)throw h.i.re();this.yz(a)}a=this.Dl,this.Dl++}else this.jo=this.o[a*this.Mf];this.size++;for(var n=a*this.Mf,o=0;o<c.length;o++)this.o[n+o]=c[o];return a},b.prototype.oj=function(c){this.jo=-1,this.size=this.Dl=0,c&&(this.o=null,this.Jg=0)},b.prototype.Ee=function(c){c>this.Jg&&this.yz(c)},b.prototype.sx=function(c,a){c*=this.Mf,a*=this.Mf;for(var n=0;n<this.Mf;n++){var o=this.o[a+n];this.o[a+n]=this.o[c+n],this.o[c+n]=o}},b.prototype.aC=function(c,a,n){var o=this.o[this.Mf*a+n];this.o[this.Mf*a+n]=this.o[this.Mf*c+n],this.o[this.Mf*c+n]=o},b.FG=function(c){return 0<=c},b.prototype.yz=function(c){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*c);a.set(this.o,0),this.o=a,this.Jg=c},b}();h.ad=L}(X||(X={})),function(h){var L,b;(b=L||(L={}))[b.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",b[b.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",b[b.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",b[b.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var c=function(){function n(o){this.Ce=o,this.Ah=NaN,this.ZG=new h.hg,this.$G=new h.hg,this.os=new h.Oc,this.ps=new h.Oc}return n.prototype.compare=function(o,u,p){if(o=o.ka(p),this.Ce.jB(u,this.ZG),this.Ce.jB(o,this.$G),u=this.ZG.get(),o=this.$G.get(),this.os.L(u.sa,u.qa),this.ps.L(o.sa,o.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;p=u.oa==u.ma;var f=o.oa==o.ma;if(p||f){if(p&&f)return 0;if(u.oa==o.oa&&u.sa==o.sa)return p?1:-1;if(u.ma==o.ma&&u.qa==o.qa)return p?-1:1}return(p=u.Me(this.Ah,this.os.pa))==(f=o.Me(this.Ah,this.ps.pa))&&((f=.5*((p=Math.min(u.ma,o.ma))+this.Ah))==this.Ah&&(f=p),p=u.Me(f,this.os.pa),f=o.Me(f,this.ps.pa)),p<f?-1:p>f?1:0},n.prototype.VJ=function(o){this.Ah=o},n}(),a=function(){function n(o){this.ib=o,this.QH=new h.hg,this.Cf=new h.h,this.qA=new h.Oc}return n.prototype.bX=function(o){this.Cf.N(o)},n.prototype.compare=function(o,u){return this.ib.jB(o.ka(u),this.QH),o=this.QH.get(),this.qA.L(o.sa,o.qa),this.Cf.x<this.qA.pa?-1:this.Cf.x>this.qA.wa?1:(o=o.Me(this.Cf.y,this.Cf.x),this.Cf.x<o?-1:this.Cf.x>o?1:0)},n}();L=function(){function n(){this.bH=this.Fi=this.Ii=this.fA=this.Zn=this.ze=this.Lc=this.lh=this.ge=null,this.Ho=this.xg=-1,this.aH=!0,this.jA=!1,this.gA=NaN,this.Pi=new h.Nd,this.WN=2147483647,this.VN=h.P.truncate(-2147483648),this.dg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return n.prototype.ty=function(o){this.gA=o},n.prototype.$m=function(){this.ge==null&&(this.ge=new h.ad(8));var o=this.ge.De();return this.ge.T(o,1,0),o},n.prototype.nU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var o=this.Lc.De();this.Lc.T(o,2,0),this.Lc.T(o,3,0);var u=this.Lc.De();return this.Lc.T(u,2,0),this.Lc.T(u,3,0),this.DJ(o,u),this.DJ(u,o),o},n.prototype.gI=function(){this.ze==null&&(this.ze=new h.ad(8));var o=this.ze.De();return this.ze.T(o,2,0),o},n.prototype.LW=function(o,u){this.ge.T(o,7,u)},n.prototype.on=function(o,u){this.ge.T(o,2,u)},n.prototype.KW=function(o,u){this.ge.T(o,1,u)},n.prototype.cX=function(o,u){this.ge.T(o,3,u)},n.prototype.$W=function(o,u){this.ge.T(o,4,u)},n.prototype.er=function(o,u){this.ge.T(o,5,u)},n.prototype.ZQ=function(o){return this.ge.U(o,5)},n.prototype.JW=function(o,u){this.ge.T(o,6,u)},n.prototype.XM=function(o,u){this.JW(u,o)},n.prototype.CJ=function(o,u){this.Lc.T(o,1,u)},n.prototype.DJ=function(o,u){this.Lc.T(o,4,u)},n.prototype.Vl=function(o,u){this.Lc.T(o,5,u)},n.prototype.Ul=function(o,u){this.Lc.T(o,6,u)},n.prototype.RW=function(o,u){this.Lc.T(o,2,u)},n.prototype.cx=function(o,u){this.Lc.T(o,3,u)},n.prototype.FF=function(o){return this.Lc.U(o,3)},n.prototype.Ht=function(o,u){this.Lc.T(o,7,u)},n.prototype.yK=function(o,u){if(this.om(o)!=-1)for(u=u?-1:o,o=this.om(o);o!=-1;o=this.ls(o))this.g.Sa(this.vj(o),this.Eq,u)},n.prototype.xx=function(o,u){o!=-1&&(this.yK(o,u),this.yK(this.ya(o),u))},n.prototype.Et=function(o,u){this.ze.T(o,1,u)},n.prototype.Xg=function(o,u){this.ze.T(o,2,u)},n.prototype.ln=function(o,u){this.ze.T(o,3,u),this.FW(o,this.YQ(u)),this.EW(u,o)},n.prototype.EW=function(o,u){this.ze.T(o,4,u)},n.prototype.FW=function(o,u){this.ze.T(o,5,u)},n.prototype.xJ=function(o,u){this.ze.T(o,6,u)},n.prototype.vJ=function(o,u){this.ze.T(o,7,u)},n.prototype.uJ=function(o,u){this.Zn.write(o,u)},n.prototype.wJ=function(o,u){this.fA.write(o,u)},n.prototype.cY=function(o){var u=0,p=0,f=this.uF(o),m=new h.h,w=new h.h,x=new h.h;this.$r(f,m),w.N(m);var E=f;do this.nm(E,x),p+=h.h.ub(w,x),this.$e(this.ya(E))!=o&&(u+=(x.x-m.x-(w.x-m.x))*(x.y-m.y+(w.y-m.y))*.5),w.N(x),E=this.kc(E);while(E!=f);this.Zn.write(o,u),this.fA.write(o,p)},n.prototype.HU=function(o,u){var p=new c(this),f=new h.Zj;f.Ee(h.P.truncate(this.xa/2)),f.Wo(p);for(var m=new h.ja(0),w=this.bh(),x=null,E=0,T=new h.h,A=this.Oe;A!=-1;A=this.Sf(A)){if((255&++E)==0&&u!=null&&!u.progress(-1,-1))throw h.i.QC();var P=this.Je(A);if(P!=-1){if(m.Dh(0),!this.ZX(f,w,m,P)){this.D(A,T),p.VJ(T.y);var F=P;do{var j=this.Bb(F,w);j!=-1&&(f.wd(j,-1),this.Kb(F,w,-2)),F=this.kc(this.ya(F))}while(P!=F);F=P;do(j=this.Bb(F,w))==-1&&(j=f.addElement(F,-1),m.add(j)),F=this.kc(this.ya(F));while(P!=F)}for(P=m.size-1;0<=P;P--)j=m.get(P),F=f.ka(j),this.Kb(this.ya(F),w,j),this.GU(f,j,o)}else this.Yy(A)==-1&&(x==null&&(x=new a(this)),this.D(A,T),x.bX(T),F=f.zW(x),P=this.Jl,F!=-1&&(j=f.ka(F),this.$e(j)==this.$e(this.ya(j))&&(j=this.IF(f,F)),j!=-1&&(P=this.$e(j))),this.XM(P,A))}this.Lg(w)},n.prototype.GU=function(o,u,p){var f=o.ka(u),m=this.$e(f);if(this.Hn(m)==-1){var w=this.IF(o,u),x=this.ya(f),E=this.$e(x);this.Mp(m),this.Mp(E);var T=this.Hn(m),A=this.Hn(E);if(w==-1&&T==-1&&(E==m?(this.ln(E,this.Jl),T=A=this.Jl):(A==-1&&(this.ln(E,this.Jl),A=this.Jl),this.ln(m,E),T=E)),w!=-1){var P=this.$e(w);A==-1&&(0>=this.Mp(P)?(A=this.Hn(P),this.ln(E,A)):(this.ln(E,P),A=P),E==m&&(T=A))}T==-1&&this.$X(m,E),p==0?this.bW(o,u,f,w,m,E):p==5?this.cW(o,u,f,x,m,E):p==4&&this.aW(f,w,m,E)}},n.prototype.bW=function(o,u,p,f,m,w){var x=this.ik(m);if(f!=-1){var E=this.ik(w),T=this.ik(this.$e(f));f=x&E&T,T^=T&this.fh(p),(T|=f)!=0&&(this.Xg(w,E|T),this.Xg(m,T|x),x=x||T)}for(u=o.lb(u);u!=-1&&(f=o.ka(u),p=this.$e(this.ya(f)),m=this.ik(p),w=this.fh(f),E=this.$e(f),f=m&(T=this.ik(E))&x,x^=x&w,(x|=f)!=0);u=o.lb(u))this.Xg(p,m|x),this.Xg(E,T|x)},n.prototype.cW=function(o,u,p,f,m,w){if(m!=w){p=this.Bb(p,this.dg),p+=this.Bb(f,this.dg),f=0;var x=new h.ja(0),E=new h.ja(0);E.add(0);for(var T=o.sc(-1);T!=u;T=o.lb(T)){var A=o.ka(T),P=this.ya(A),F=this.$e(A),j=this.$e(P);if(F!=j){if(A=this.Bb(A,this.dg),f+=A+=this.Bb(P,this.dg),P=!1,x.size!=0&&x.Gc()==j&&(E.Jf(),x.Jf(),P=!0),this.Hn(j)==-1)throw h.i.Ra();P&&this.Hn(j)==F||(E.add(f),x.add(F))}}f+=p,x.size!=0&&x.Gc()==w&&(E.Jf(),x.Jf()),f!=0?E.Gc()==0&&(o=this.g.ld,o=this.Ma(o),this.Xg(m,o)):E.Gc()!=0&&(o=this.g.ld,o=this.Ma(o),this.Xg(m,o))}},n.prototype.aW=function(o,u,p,f){var m=this.Ma(this.g.ld);if(u==-1)this.Xg(f,this.Ho),(1&(o=this.Bb(o,this.xg)))!=0?this.Xg(p,m):this.Xg(p,this.Ho);else{var w=this.ik(f);w==0?(w=this.ik(this.$e(u)),this.Xg(f,w),(1&(o=this.Bb(o,this.xg)))!=0?this.Xg(p,w==m?this.Ho:m):this.Xg(p,w)):(1&(o=this.Bb(o,this.xg)))!=0?this.Xg(p,w==m?this.Ho:m):this.Xg(p,w)}},n.prototype.ZX=function(o,u,p,f){var m=f,w=-1,x=-1,E=0;do{if(E==2)return!1;var T=this.Bb(m,u);if(T!=-1){if(w!=-1)return!1;w=T}else{if(x!=-1)return!1;x=m}E++,m=this.kc(this.ya(m))}while(f!=m);return x!=-1&&w!=-1&&(this.Kb(o.ka(w),u,-2),o.Uj(w,x),p.add(w),!0)},n.prototype.$X=function(o,u){var p=this.Mp(o);if(p!=0){var f=this.Mp(u);0<p&&0>f||0>p&&0<f?this.ln(o,u):(u=this.Hn(u))!=-1&&this.ln(o,u)}},n.prototype.pP=function(o,u){this.Eq=this.g.Hd();for(var p=0,f=u.size;p<f;p++){var m=u.get(p),w=this.g.Qa(m,this.Em),x=this.g.Rf(this.g.cd(m)),E=this.g.jc(x);if(h.ba.Ic(E)){var T=this.g.V(m);if(T!=-1){var A=this.g.Qa(T,this.Em);if(w!=A){var P=this.nU(),F=this.ya(P),j=this.lh.De();this.lh.T(j,0,m),this.lh.T(j,1,-1),this.Ht(P,j),this.CJ(P,w),(j=this.Je(w))==-1?(this.on(w,P),this.Vl(P,F),this.Ul(F,P)):(w=this.ue(j),this.Vl(j,F),this.Ul(F,j),this.Ul(w,P),this.Vl(P,w)),this.CJ(F,A),(w=this.Je(A))==-1?(this.on(A,F),this.Ul(P,F),this.Vl(F,P)):(A=this.ue(w),this.Vl(w,P),this.Ul(P,w),this.Ul(A,F),this.Vl(F,A)),x=this.Ma(x),o==0?(this.Kb(F,this.be,0),this.Kb(P,this.be,E==1736?x:0)):o==5?(A=new h.h,this.g.D(m,A),m=new h.h,this.g.D(T,m),w=T=0,0>A.compare(m)?T=1:w=-1,this.Kb(F,this.be,0),this.Kb(P,this.be,0),this.Kb(P,this.dg,T),this.Kb(F,this.dg,w)):o==7?(this.Kb(F,this.be,this.Ho),this.Kb(P,this.be,E==1736?x:0)):o==4&&(this.Kb(F,this.be,0),this.Kb(P,this.be,0),this.Kb(P,this.xg,1),this.Kb(F,this.xg,1)),E=E==1736?this.VN:0,this.cx(P,x|E),this.cx(F,x|E)}}}}},n.prototype.NT=function(o,u){var p=this.om(u);if(p!=-1){var f=this.om(o);this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1)}o=this.ya(o),u=this.ya(u),(p=this.om(u))!=-1&&(f=this.om(o),this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1))},n.prototype.AX=function(o){function u(ae,le){return f.BO(ae,le)}var p=new h.ja(0);p.Jb(10);for(var f=this,m=this.Oe;m!=-1;m=this.Sf(m)){p.clear(!1);var w=this.Je(m);if(w!=-1){var x=w;do p.add(x),x=this.kc(this.ya(x));while(x!=w);if(1<p.size){if(x=!0,2<p.size)p.Wd(0,p.size,u),p.add(p.get(0));else if(0<this.AO(p.get(0),p.get(1))){var E=p.get(0);p.set(0,p.get(1)),p.set(1,E)}else x=!1;for(var T=E=p.get(0),A=this.vf(T),P=this.ya(T),F=-1,j=1,H=p.size;j<H;j++){var W=p.get(j),G=this.ya(W),ee=this.kk(G);if(ee==A&&W!=T){if(o==0)F=this.FF(T)|this.FF(W),this.cx(T,F),this.cx(P,F),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(W,this.be)),this.Kb(P,this.be,this.Bb(P,this.be)|this.Bb(G,this.be));else if(this.dg!=-1)F=this.Bb(T,this.dg)+this.Bb(W,this.dg),G=this.Bb(P,this.dg)+this.Bb(G,this.dg),this.Kb(T,this.dg,F),this.Kb(P,this.dg,G);else{if(o==7)return void(this.Pi=new h.Nd(5,m,-1));this.xg!=-1&&(F=this.Bb(T,this.xg)+this.Bb(W,this.xg),G=this.Bb(P,this.xg)+this.Bb(G,this.xg),this.Kb(T,this.xg,F),this.Kb(P,this.xg,G))}this.NT(T,W),this.Gy(W),F=T,p.set(j,-1),W==E&&(p.set(0,-1),E=-1)}else this.xx(F,!1),F=-1,T=W,A=ee,P=G}if(this.xx(F,!1),F=-1,x){for(E=-1,j=0,H=p.size;j<H;j++)if((W=p.get(j))!=-1){if(E==-1)T=E=W,A=this.vf(T),P=this.ya(T);else if(W!=T&&(G=this.ya(W),ee=this.kk(G),this.Ul(P,W),this.Vl(W,P),T=W,A=ee,P=G,o==7&&(this.Bb(W,this.be)|this.Bb(this.ue(W),this.be))==(1|this.Ho)))return void(this.Pi=new h.Nd(5,m,-1))}this.on(m,E)}else{for(E=-1,j=0,H=p.size;j<H;j++)if((W=p.get(j))!=-1){E=W;break}w!=E&&this.on(m,E)}}}}},n.prototype.QN=function(){for(var o=-1,u=this.bh(),p=this.Oe;p!=-1;p=this.Sf(p)){var f=this.Je(p);if(f!=-1){var m=f;do{if(this.Bb(m,u)!=1){var w=this.gI();this.Et(w,m),this.vJ(w,o),o!=-1&&this.xJ(o,w),o=w;var x=0,E=m;do x|=this.Bb(E,this.be),this.RW(E,w),this.Kb(E,u,1),E=this.kc(E);while(E!=m);this.Xg(w,x)}m=this.kc(this.ya(m))}while(m!=f)}}w=this.gI(),this.Et(w,-1),this.vJ(w,o),o!=-1&&this.xJ(o,w),this.Jl=w,this.Zn=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.uJ(this.Jl,1/0),this.wJ(this.Jl,1/0),this.Lg(u)},n.prototype.lR=function(o,u,p){if((u=u!=-1?u:this.Je(o))==-1)return-1;for(o=u;;){if(this.Bb(u,p)!=1)return u;if((u=this.kc(this.ya(u)))==o)return-1}},n.prototype.qW=function(){for(var o=this.bh(),u=this.Oe;u!=-1;u=this.Sf(u))for(var p=-1;;){var f=this.lR(u,p,o);if(f==-1)break;p=this.kc(this.ya(f));for(var m=f;;){var w=this.kc(m),x=this.ue(m),E=this.ya(m);if(x==E){if(this.CP(m),p!=m&&p!=E||(p=-1),m==f||x==f){if(m==(f=w)||x==f)break;m=w;continue}}else this.Kb(m,o,1);if((m=w)==f)break}}this.Lg(o)},n.prototype.GB=function(o,u,p,f,m){this.Wg(),this.aH=m,this.g=o,this.Dq=this.g.VE(),(o=new h.ja(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.gd);var w=0,x=1,E=p!=null?p.get(0):this.g.ld;for(m=1;E!=-1;){this.g.BJ(E,this.Dq,x),x<<=1;for(var T=this.g.Ob(E);T!=-1;T=this.g.Sb(T))for(var A=this.g.Ya(T),P=0,F=this.g.Ka(T);P<F;P++)o.add(A),A=this.g.V(A);h.ba.Sn(this.g.jc(E))||(w+=this.g.ea(E)),p!=null?(E=m<p.size?p.get(m):-1,m++):E=this.g.ve(E)}for(this.Ho=x,this.xa=o.size,this.g.nx(o,this.xa),this.lh==null&&(this.lh=new h.ad(2),this.ge=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.lh.Ee(this.xa),h.np.Bp(f),this.ge.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,w)),this.Em=this.g.Hd(),p=new h.h,m=0,w=new h.h,p.Sc(),x=0;x<=this.xa;x++)if(x<this.xa?(A=o.get(x),this.g.D(A,w)):w.Sc(),!p.rb(w)){if(m<x){for(A=this.$m(),F=P=-1;m<x;m++)F=o.get(m),this.g.Sa(F,this.Em,A),E=this.lh.De(),this.lh.T(E,0,F),this.lh.T(E,1,P),P=E,T=this.g.cd(F),E=this.g.Rf(T),E=this.Ma(E),this.KW(A,this.yd(A)|E);this.LW(A,P),this.er(A,this.g.Va(F)),this.Qs!=-1&&this.$W(this.Qs,A),this.cX(A,this.Qs),this.Qs=A,this.Oe==-1&&(this.Oe=A)}m=x,p.N(w)}h.np.Bp(f),this.be=this.bh(),u==5&&(this.dg=this.bh()),u==4&&(this.xg=this.bh()),this.pP(u,o),this.Pi.Lj==0&&(this.AX(u),this.Pi.Lj==0&&(isNaN(this.gA)||this.rO()?(this.QN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.aH&&this.HU(u,f))):this.jA=!0))},n.prototype.Gy=function(o){var u=this.kc(o),p=this.ue(o),f=this.ya(o),m=this.kc(f),w=this.ue(f);u!=f&&(this.Ul(w,u),this.Vl(u,w)),p!=f&&(this.Ul(p,m),this.Vl(m,p)),p=this.kk(o),this.Je(p)==o&&(m!=o?this.on(p,m):this.on(p,-1)),m=this.kk(f),this.Je(m)==f&&(u!=f?this.on(m,u):this.on(m,-1)),this.Lc.kd(o),this.Lc.kd(f)},n.prototype.IF=function(o,u){for(;;){if((u=o.xe(u))==-1)return-1;var p=o.ka(u);if(this.$e(p)!=this.$e(this.ya(p)))return p}},n.prototype.fr=function(o,u){var p;p===void 0&&(p=!0),this.GB(o,0,null,u,p)},n.prototype.pJ=function(o,u,p){var f=new h.ja(0);f.add(u),this.GB(o,4,f,p,o.jc(u)==1736)},n.prototype.qJ=function(o,u,p){var f=new h.ja(0);f.add(u),this.GB(o,5,f,p,!0)},n.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.pW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.dg!=-1&&(this.Lg(this.dg),this.dg=-1),this.xg!=-1&&(this.Lg(this.xg),this.xg=-1),this.g=null,this.ge.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.bH!=null&&(this.bH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.Zn=null)},n.prototype.Je=function(o){return this.ge.U(o,2)},n.prototype.D=function(o,u){this.g.YF(this.ZQ(o),u)},n.prototype.yd=function(o){return this.ge.U(o,1)},n.prototype.Sf=function(o){return this.ge.U(o,4)},n.prototype.Yy=function(o){return this.ge.U(o,6)},n.prototype.mm=function(o){return this.ge.U(o,7)},n.prototype.ls=function(o){return this.lh.U(o,1)},n.prototype.vj=function(o){return this.lh.U(o,0)},n.prototype.ng=function(o,u){return(u=this.Fi[u]).size<=o?-1:u.read(o)},n.prototype.pn=function(o,u,p){(u=this.Fi[u]).size<=o&&u.resize(this.ge.size,-1),u.write(o,p)},n.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var o=h.ja.rf(this.ge.Jg,-1),u=0,p=this.Fi.length;u<p;u++)if(this.Fi[u]==null)return this.Fi[u]=o,u;return this.Fi.push(o),this.Fi.length-1},n.prototype.Gp=function(o){this.Fi[o]=null},n.prototype.kk=function(o){return this.Lc.U(o,1)},n.prototype.vf=function(o){return this.kk(this.ya(o))},n.prototype.ya=function(o){return this.Lc.U(o,4)},n.prototype.ue=function(o){return this.Lc.U(o,5)},n.prototype.kc=function(o){return this.Lc.U(o,6)},n.prototype.$e=function(o){return this.Lc.U(o,2)},n.prototype.af=function(o){return this.ik(this.Lc.U(o,2))},n.prototype.om=function(o){return this.Lc.U(o,7)},n.prototype.$r=function(o,u){this.D(this.kk(o),u)},n.prototype.nm=function(o,u){this.D(this.vf(o),u)},n.prototype.fh=function(o){return this.Lc.U(o,3)&this.WN},n.prototype.Bb=function(o,u){return(u=this.Ii[u]).size<=o?-1:u.read(o)},n.prototype.Kb=function(o,u,p){(u=this.Ii[u]).size<=o&&u.resize(this.Lc.size,-1),u.write(o,p)},n.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var o=h.ja.rf(this.Lc.Jg,-1),u=0,p=this.Ii.length;u<p;u++)if(this.Ii[u]==null)return this.Ii[u]=o,u;return this.Ii.push(o),this.Ii.length-1},n.prototype.Lg=function(o){this.Ii[o]=null},n.prototype.CP=function(o){var u=this.$e(o),p=this.ya(o),f=this.kc(o);f==p&&(f=this.kc(f))==o&&(f=-1);var m=this.uF(u);m!==o&&m!=p||this.Et(u,f),p=this.Zn.read(u),isNaN(p)||(this.uJ(u,NaN),this.wJ(u,NaN)),this.xx(o,!0),this.Gy(o)},n.prototype.DP=function(o){for(var u=0,p=o.size;u<p;u++){var f=o.get(u),m=this.$e(this.ya(f));this.Et(this.$e(f),-1),this.Et(m,-1),this.xx(f,!0),this.Gy(f)}},n.prototype.uF=function(o){return this.ze.U(o,1)},n.prototype.ik=function(o){return this.ze.U(o,2)},n.prototype.Hn=function(o){return this.ze.U(o,3)},n.prototype.YQ=function(o){return this.ze.U(o,4)},n.prototype.Mp=function(o){var u=this.Zn.read(o);return isNaN(u)&&(this.cY(o),u=this.Zn.read(o)),u},n.prototype.Ma=function(o){return this.g.EF(o,this.Dq)},n.prototype.Ie=function(o){return this.g.Qa(o,this.Em)},n.prototype.nR=function(o){return this.g.Qa(o,this.Eq)},n.prototype.mR=function(o,u){var p=this.Je(o);if(p==-1)return-1;var f=p,m=-1,w=-1;do{if(this.vf(f)==u)return f;if(m==-1){if((m=this.Je(u))==-1)break;w=m}if(this.vf(w)==o)return this.ya(w);f=this.kc(this.ya(f)),w=this.kc(this.ya(w))}while(f!=p&&w!=m);return-1},n.prototype.jB=function(o,u){u.Qr(),u=u.get();var p=new h.h;this.$r(o,p),u.Ec(p),this.nm(o,p),u.Rc(p)},n.prototype.BO=function(o,u){if(o==u)return 0;var p=new h.h;this.nm(o,p);var f=new h.h;return this.nm(u,f),p.rb(f)?0:(u=new h.h,this.$r(o,u),(o=new h.h).vc(p,u),(p=new h.h).vc(f,u),h.h.pu(o,p))},n.prototype.AO=function(o,u){if(o==u)return 0;var p=new h.h;this.nm(o,p);var f=new h.h;return this.nm(u,f),p.rb(f)?0:(u=new h.h,this.$r(o,u),(o=new h.h).vc(p,u),(p=new h.h).vc(f,u),0<=p.y&&0<o.y?h.h.pu(o,p):0)},n.prototype.rO=function(){for(var o=h.mc.ox(this.gA),u=new h.h,p=new h.h,f=new h.h,m=new h.h,w=new h.h,x=this.Oe;x!=-1;x=this.Sf(x)){var E=this.Je(x);if(E!=-1){var T=E;this.$r(T,u),this.nm(T,p),w.vc(p,u);var A=w.Tk();do{var P=T;if((T=this.kc(this.ya(T)))!=P){this.nm(T,f),m.vc(f,u),P=m.Tk();var F=m.yi(w);if(F*F/(P*A)*Math.min(P,A)<=o)return!1;w.N(m),A=P,p.N(f)}}while(T!=E)}}return!0},n}(),h.ku=L}(X||(X={})),function(h){var L=function(){function b(){this.j=null,this.iH=new h.h,this.jH=new h.h,this.Ij=null,this.Ov=!1,this.vl=-1}return b.prototype.cf=function(c){return c<this.Ij.length&&this.Ij[c]},b.prototype.fl=function(c,a,n,o){var u=h.ba.uf(this.j.g.jc(n));if(h.ba.uf(this.j.g.jc(a))!=2||u!=1)throw h.i.Ra();this.zP(c,a,n,o)},b.prototype.fr=function(c,a){this.j==null&&(this.j=new h.ku),this.j.fr(c,a)},b.prototype.Gt=function(c,a,n){for(h.Uk.W(c,a,n,!0),a=c.ld;a!=-1;a=c.ve(a))c.jc(a)==1736&&h.tn.W(c,a,-1,this.Ov,n);this.fr(c,n)},b.prototype.GE=function(c,a,n,o,u){var p=this.j.g;if(p.jc(c)==1736)for(c=p.Ob(c);c!=-1;c=p.Sb(c)){var f=p.Ya(c);this.j.Ie(f),this.j.Ie(p.V(f));var m=this.j.nR(f);if(m!=-1){var w=this.j.Bb(m,n);if(w!=1&&w!=2)if(this.cf(this.j.af(m))){this.j.Kb(m,n,1),w=p.wf(a,-1);var x=m,E=this.j.Ie(f),T=1;do{var A=this.um(f,u);p.kj(w,A),o!=-1&&this.j.pn(E,o,1),this.j.Kb(x,n,1),x=this.j.kc(x);do var P=(A=T==1?p.V(f):p.Na(f))!=-1?this.j.Ie(A):-1;while(P==E);var F=this.j.kk(x);if(F!=P){do P=(A=T==1?p.Na(f):p.V(f))!=-1?this.j.Ie(A):-1;while(P==E);F!=P?(P=F,A=this.j.vj(this.j.mm(P))):T=-T}E=P,f=A}while(x!=m);p.mn(w,!0)}else this.j.Kb(m,n,2)}}},b.prototype.ZE=function(){for(var c=this.j.bh(),a=new h.ja(0),n=this.j.Oe;n!=-1;n=this.j.Sf(n)){var o=this.j.Je(n),u=o;if(o!=-1)do{if(this.j.Bb(u,c)!=1){var p=this.j.ya(u);this.j.Kb(p,c,1),this.j.Kb(u,c,1),this.cf(this.j.af(u))&&this.cf(this.j.af(p))&&a.add(u)}u=this.j.kc(this.j.ya(u))}while(u!=o)}this.j.Lg(c),this.j.DP(a)},b.prototype.um=function(c,a){return a==-1?c:this.UR(c,a)},b.prototype.UR=function(c,a){var n=this.j.g,o=this.j.mm(this.j.Ie(c));do{var u=this.j.vj(o);if(n.Rf(n.cd(u))==a)return u;o=this.j.ls(o)}while(o!=-1);return c},b.prototype.Qt=function(c,a,n){this.ZE();var o=this.j.g,u=o.Kg(1736),p=this.j.bh();return this.oK(c,a,u,n,p,-1),this.j.Lg(p),h.tn.W(o,u,1,this.Ov,null),u},b.prototype.oK=function(c,a,n,o,u,p){for(this.GE(c,n,u,p,o),a!=-1&&this.GE(a,n,u,p,o),c=this.j.g,a=this.j.Oe;a!=-1;a=this.j.Sf(a)){var f=this.j.Je(a);if(f!=-1){var m=f;do{var w=this.j.Bb(m,u);if(w!=1&&w!=2)if(this.cf(this.j.af(m))){w=c.wf(n,-1);var x=m;do{var E=this.j.om(x);E!=-1?E=this.j.vj(E):(E=this.j.vj(this.j.om(this.j.ya(x))),E=this.j.g.V(E)),E=this.um(E,o),c.kj(w,E),this.j.Kb(x,u,1),p!=-1&&(E=this.j.Ie(E),this.j.pn(E,p,1)),x=this.j.kc(x)}while(x!=m);c.mn(w,!0)}else this.j.Kb(m,u,2);m=this.j.kc(this.j.ya(m))}while(m!=f)}}},b.prototype.TX=function(c,a,n){var o=this.j.g,u=o.Kg(1736),p=o.Kg(1607),f=o.Kg(550);this.ZE();var m=-1,w=this.j.bh(),x=this.j.Fp();for(this.oK(c,a,u,n,w,x),c=this.j.Oe;c!=-1;c=this.j.Sf(c))if((a=this.j.Je(c))!=-1){var E=a;do{var T=this.j.Bb(E,w),A=this.j.Bb(this.j.ya(E),w);if((T|=A)==2)if(T=this.j.fh(E),this.cf(T)){var P=o.wf(p,-1),F=E;T=this.$w(c,o),T=this.um(T,n),o.kj(P,T),this.j.pn(c,x,1);do{if(T=this.j.vf(F),A=this.$w(T,o),A=this.um(A,n),o.kj(P,A),this.j.Kb(F,w,1),this.j.Kb(this.j.ya(F),w,1),this.j.pn(T,x,1),F=this.j.kc(F),T=this.j.Bb(F,w),(T|=A=this.j.Bb(this.j.ya(F),w))!=2)break;if(T=this.j.fh(F),!this.cf(T)){this.j.Kb(F,w,1),this.j.Kb(this.j.ya(F),w,1);break}}while(F!=E)}else this.j.Kb(E,w,1),this.j.Kb(this.j.ya(E),w,1);E=this.j.kc(this.j.ya(E))}while(E!=a)}for(c=this.j.Oe;c!=-1;c=this.j.Sf(c))(T=this.j.ng(c,x))!=1&&(T=this.j.yd(c),this.cf(T)&&(m==-1&&(m=o.wf(f,-1)),(a=this.j.mm(c))!=-1&&(a=this.j.vj(a),T=this.um(a,n),o.kj(m,T))));return this.j.Gp(x),this.j.Lg(w),h.tn.W(o,u,1,this.Ov,null),(n=[])[0]=f,n[1]=p,n[2]=u,n},b.prototype.$w=function(c,a){var n=-1;for(c=this.j.mm(c);c!=-1;c=this.j.ls(c)){var o=this.j.vj(c);n==-1&&(n=o);var u=this.j.Ma(a.Rf(a.cd(o)));if(this.cf(u)){n=o;break}}return n},b.prototype.fB=function(c,a){for(var n=this.ll(a),o=this.j.kk(a),u=this.j.vf(a),p=0,f=0,m=this.j.mm(o);m!=-1;m=this.j.ls(m)){var w=this.j.vj(m),x=c.cd(w),E=this.j.Ma(c.Rf(x));x=c.Ya(x),(E=(E&n)!=0)&&x==w&&(this.vl=a);var T=c.V(w);T!=-1&&this.j.Ie(T)==u?(p++,E&&(this.vl===-1&&x==T&&(w=this.j.kc(a),this.cf(this.ll(w))&&(this.vl=w)),f++)):(w=c.Na(w))!=-1&&this.j.Ie(w)==u&&(p--,E&&(this.vl===-1&&x===w&&(w=this.j.kc(a),this.cf(this.ll(w))&&(this.vl=w)),f--))}return this.j.D(o,this.iH),this.j.D(u,this.jH),(f!=0?f:p)*(c=h.h.ub(this.iH,this.jH))},b.prototype.ll=function(c){return this.j.fh(c)|this.j.af(c)|this.j.af(this.j.ya(c))},b.prototype.rK=function(c){for(var a=this.j.ya(this.j.ue(c)),n=-1;a!=c;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.ue(a))}return n!=-1?this.j.ya(n):-1},b.prototype.sK=function(c){for(var a=this.j.ya(this.j.kc(c)),n=-1;a!=c;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.kc(a))}return n!=-1?this.j.ya(n):-1},b.prototype.gJ=function(c,a,n,o,u){var p=this.j.g,f=c,m=this.j.ya(f);this.j.Kb(f,n,1),this.j.Kb(m,n,1),this.vl=-1;for(var w=this.fB(p,f),x=f,E=-1,T=!1,A=1;;){var P=this.j.ue(f);if(P==m)break;if(m=this.j.kc(m),this.j.ya(P)!=m){if((f=this.rK(f))==-1){T=!0;break}m=this.j.ya(f)}else f=P;if(f==c){E=c;break}if(P=this.ll(f),!this.cf(P))break;this.j.Kb(f,n,1),this.j.Kb(m,n,1),x=f,w+=this.fB(p,f),A++}if(E==-1)for(f=c,m=this.j.ya(f),E=f;(c=this.j.kc(f))!=m;){if(m=this.j.ue(m),this.j.ya(c)!=m){if((f=this.sK(f))==-1){T=!0;break}m=this.j.ya(f)}else f=c;if(P=this.ll(f),!this.cf(P))break;this.j.Kb(f,n,1),this.j.Kb(m,n,1),E=f,w+=this.fB(p,f),A++}else if(this.vl!=-1&&(x=this.vl,E=this.j.ue(this.vl),this.j.ya(E)!=this.j.kc(this.j.ya(x))&&(E=this.rK(x))==-1))throw h.i.Ra();for(0<=w||(f=E,E=this.j.ya(x),x=this.j.ya(f)),n=p.wf(a,-1),f=x,x=this.j.kk(x),T=this.j.vf(E)==x&&T,w=this.$w(x,p),w=this.um(w,u),p.kj(n,w),o!=-1&&this.j.pn(x,o,1),x=0,A=T?h.P.truncate((A+1)/2):-1;c=this.j.vf(f),w=this.$w(c,p),w=this.um(w,u),p.kj(n,w),x++,o!=-1&&this.j.pn(c,o,1),T&&x==A&&(n=p.wf(a,-1),p.kj(n,w)),f!=E;)if(c=this.j.kc(f),this.j.ue(this.j.ya(f))!=this.j.ya(c)){if((f=this.sK(f))==-1)throw h.i.Ra()}else f=c},b.prototype.Rt=function(c){for(var a=this.j.g.Kg(1607),n=this.j.bh(),o=this.j.Oe;o!=-1;o=this.j.Sf(o)){var u=this.j.Je(o),p=u;do this.j.Bb(p,n)!=1&&this.cf(this.ll(p))&&this.gJ(p,a,n,-1,c),p=this.j.kc(this.j.ya(p));while(p!=u)}return this.j.Lg(n),a},b.prototype.UX=function(c){for(var a=this.j.g,n=a.Kg(1607),o=a.Kg(550),u=this.j.bh(),p=this.j.Fp(),f=-1,m=this.j.Oe;m!=-1;m=this.j.Sf(m)){var w=this.j.Je(m),x=w;do{var E=this.j.Bb(x,u);E!=1&&(E=this.ll(x),this.cf(E)&&this.gJ(x,n,u,p,c)),x=this.j.kc(this.j.ya(x))}while(x!=w)}for(m=this.j.Oe;m!=-1;m=this.j.Sf(m))(E=this.j.ng(m,p))!=1&&(E=this.j.yd(m),this.cf(E)&&(f==-1&&(f=a.wf(o,-1)),(w=this.j.mm(m))!=-1&&(w=this.j.vj(w),w=this.um(w,c),a.kj(f,w))));return this.j.Lg(u),this.j.Gp(p),(c=[])[0]=o,c[1]=n,c},b.prototype.pr=function(){for(var c=this.j.g,a=c.Kg(550),n=c.wf(a,-1),o=this.j.Oe;o!=-1;o=this.j.Sf(o))if(this.cf(this.j.yd(o))){for(var u=-1,p=this.j.mm(o);p!=-1;p=this.j.ls(p)){var f=this.j.vj(p);u==-1&&(u=f);var m=this.j.Ma(c.Rf(c.cd(f)));if(this.cf(m)){u=f;break}}c.kj(n,u)}return a},b.prototype.eq=function(c){this.Ij=[];for(var a=0;a<c;a++)this.Ij[a]=!1},b.TV=function(c,a,n){var o=c.Ja(),u=Array(1e3);h.P.bv(u,null);var p=h.P.lg(1e3,0),f=c.I(),m=!0,w=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw h.i.Ra();for(var x=0;x<f;){var E=h.P.truncate(c.dW(u,x)-x);w?h.jd.mK(a,u,E,n,p):h.jd.nK(a,u,E,n,p);for(var T=0,A=0;A<E;A++)p[A]==0&&(m&&(m=!1,o.Gd(c,0,x)),T!=A&&o.Gd(c,x+T,x+A),T=A+1);m||T==E||o.Gd(c,x+T,x+E),x+=E}return m?c:o},b.tG=function(c,a,n){return c instanceof h.de?b.TV(c,a,n):a instanceof h.Ta?c.B()||a.B()?c.Ja():h.Uk.rU(n,c,a)?h.Uk.wO(c,a):c.Ja():b.UV(c,a,n)},b.Cv=function(c,a,n,o){var u=new h.l;c.A(u);var p=new h.l;a.A(p);var f=new h.l;if(f.L(u),f.$b(p),n=h.ta.Xd(n,f,!0),(f=new h.l).L(p),p=h.ta.Gr(n),f.X(p,p),!u.isIntersecting(f)){if(c.Eb()<=a.Eb())return b.mi(b.Ue(c.Ja()),c,"&");if(c.Eb()>a.Eb())return b.mi(b.Ue(a.Ja()),c,"&")}return p=new b,f=(u=new h.hd).Ib(b.Ue(c)),a=u.Ib(b.Ue(a)),p.Gt(u,n,o),o=p.Cv(f,a),c=b.mi(u.Ke(o),c,"&"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},b.UV=function(c,a,n){if(c.B()||a.B())return c.Ja();var o=[null],u=[0],p=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw h.i.Ra();return o[0]=c.D(),p?h.jd.mK(a,o,1,n,u):h.jd.nK(a,o,1,n,u),u[0]==0?c.Ja():c},b.prototype.DU=function(c,a,n,o,u){if(c.B())return c;var p=new h.hd;return c=p.Ib(c),this.Nk(p,c,a,n,o,u)},b.prototype.FU=function(c,a,n,o,u,p){if(u&&c.jc(a)!=550){var f=new h.LC;f.LX(c,n),f.Pg?(h.Uk.W(c,n,p,!0),u=!1):this.j.ty(n)}else h.Uk.W(c,n,p,!0),u=!1;if(o&&c.jc(a)!=550?this.j.qJ(c,a,p):this.j.pJ(c,a,p),this.j.jA)return this.j.Wg(),this.j=null,this.Nk(c,a,n,o,!1,p);if(this.j.ty(NaN),p=this.j.Ma(a),this.eq(p+1),this.Ij[p]=!0,c.jc(a)==1736||o&&c.jc(a)!=550)return c.Zo(a,0),a=this.Qt(a,-1,-1),(c=c.Ke(a)).Zo(0),u?c.Eh(1,0):(c.Eh(2,n),c.hm()),c;if(c.jc(a)==1607)return a=this.Rt(-1),c=c.Ke(a),u||c.Eh(2,n),c;if(c.jc(a)==550)return a=this.pr(),c=c.Ke(a),u||c.Eh(2,n),c;throw h.i.Ra()},b.prototype.Nk=function(c,a,n,o,u,p){this.j=new h.ku;try{return this.FU(c,a,n,o,u,p)}finally{this.j.Wg()}},b.Nk=function(c,a,n,o,u){return new b().DU(c,a,n,o,u)},b.prototype.EU=function(c,a,n,o){this.Ov=c,this.j=new h.ku,c=a.Jn(n);var u=a.jc(n);if(c!=1||u==550?this.j.pJ(a,n,o):this.j.qJ(a,n,o),!this.j.jA)if(this.j.ty(NaN),o=this.j.Ma(n),this.eq(o+1),this.Ij[o]=!0,a.jc(n)==1736||c==1&&a.jc(n)!=550)a.Zo(n,0),o=this.Qt(n,-1,-1),a.bC(o,n),a.vB(o);else if(a.jc(n)==1607)o=this.Rt(-1),a.bC(o,n),a.vB(o);else{if(a.jc(n)!=550)throw h.i.ga("internal error");o=this.pr(),a.bC(o,n),a.vB(o)}},b.prototype.km=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a));if(n>o)return c;var u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)]=!0,n==2&&o==2)return this.Qt(c,a,-1);if(n==1&&o==2||n==1&&o==1)return this.Rt(-1);if(n==0)return this.pr();throw h.i.Ra()},b.prototype.Cv=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=c),n==2&&o==2)return this.Qt(c,a,u);if(n==1&&0<o||o==1&&0<n)return this.Rt(u);if(n==0||o==0)return this.pr();throw h.i.Ra()},b.prototype.Kz=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=c),n==2&&o==2)return this.TX(c,a,u);if(n==1&&0<o||o==1&&0<n)return this.UX(u);if(n==0||o==0)return(c=[])[0]=this.pr(),c;throw h.i.Ra()},b.prototype.fp=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)]=!0,this.Ij[this.j.Ma(a)]=!0,n==2&&o==2)return this.Qt(c,a,-1);if(n==1&&o==1)return this.Rt(-1);if(n==0&&o==0)return this.pr();throw h.i.Ra()},b.Ue=function(c){var a=c.K();return a==197?(a=new h.Ea(c.description),c.B()||a.bd(c,!1),a):a==33?(a=new h.de(c.description),c.B()||a.add(c),a):a==322?(a=new h.Ua(c.description),c.B()||a.oc(c,!0),a):c},b.mi=function(c,a,n){var o=c.K();return o==197?(a=new h.Ea(c.description),c.B()||a.bd(c,!1),a):o!=33||n!="|"&&n!="^"?o==322?(a=new h.Ua(c.description),c.B()||a.oc(c,!0),a):o==33&&n=="-"&&a.K()==33||o==550&&n=="&"&&a.K()==33?(a=new h.Ta(c.description),c.B()||c.we(0,a),a):c:(a=new h.de(c.description),c.B()||a.add(c),a)},b.km=function(c,a,n,o){if(c.B()||a.B()||c.Eb()>a.Eb())return b.mi(b.Ue(c),c,"-");var u=new h.l;c.A(u);var p=new h.l;if(a.A(p),!u.isIntersecting(p))return b.mi(b.Ue(c),c,"-");var f=new h.l;return f.L(u),f.$b(p),n=h.ta.Xd(n,f,!0),p=new b,f=(u=new h.hd).Ib(b.Ue(c)),a=u.Ib(b.Ue(a)),p.Gt(u,n,o),o=p.km(f,a),o=u.Ke(o),c=b.mi(o,c,"-"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},b.PP=function(c,a,n){if(2>c.length)throw h.i.O("not enough geometries to dissolve");for(var o=0,u=0,p=c.length;u<p;u++)o=Math.max(c[u].Eb(),o);var f=new h.l;f.Pa();var m=new h.hd,w=-1,x=0,E=-1;for(u=0,p=c.length;u<p;u++)if(c[u].Eb()==o)if(c[u].B())E==-1&&(E=u);else{E=u,w==-1?w=m.Ib(b.Ue(c[u])):m.oN(w,b.Ue(c[u]));var T=new h.l;c[u].yc(T),f.$b(T),x++}return 2>x?b.Ue(c[E]):(c=o==2,a=h.ta.Xd(o==0?a:null,f,!0),new b().Nk(m,w,a,c,!0,n))},b.Kz=function(c,a,n,o){var u=[null,null,null],p=new h.l;c.A(p);var f=new h.l;a.A(f);var m=new h.l;if(m.L(p),m.$b(f),n=h.ta.Xd(n,m,!0),(m=new h.l).L(f),f=h.ta.Gr(n),m.X(f,f),!p.isIntersecting(m)){if(c.Eb()<=a.Eb())return u[(c=b.mi(b.Ue(c.Ja()),c,"&")).Eb()]=c,u;if(c.Eb()>a.Eb())return u[(c=b.mi(b.Ue(a.Ja()),c,"&")).Eb()]=c,u}for(f=new b,m=(p=new h.hd).Ib(b.Ue(c)),a=p.Ib(b.Ue(a)),f.Gt(p,n,o),o=f.Kz(m,a),a=0;a<o.length;a++)f=b.mi(p.Ke(o[a]),c,"&"),h.ba.Ic(f.K())&&(f.Eh(2,n),f.K()==1736&&f.hm()),u[f.Eb()]=f;return u},b.fp=function(c,a,n,o){if(c.Eb()>a.Eb())return b.mi(b.Ue(c),c,"^");if(c.Eb()<a.Eb()||c.B())return b.mi(b.Ue(a),c,"^");if(a.B())return b.mi(b.Ue(c),c,"^");var u=new h.l;c.A(u);var p=new h.l;a.A(p);var f=new h.l;return f.L(u),f.$b(p),n=h.ta.Xd(n,f,!0),p=new b,f=(u=new h.hd).Ib(b.Ue(c)),a=u.Ib(b.Ue(a)),p.Gt(u,n,o),o=p.fp(f,a),c=b.mi(u.Ke(o),c,"^"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},b.prototype.FQ=function(c,a){var n=this.j.g;c=n.wf(c,-1);for(var o=a.size,u=0;u<o;u++){var p=a.get(u);n.kj(c,p)}n.mn(c,!0)},b.prototype.SW=function(c,a){for(var n=this.j.g,o=n.ld;o!=-1;o=n.ve(o))if(o==a)for(var u=n.Ob(o);u!=-1;u=n.Sb(u)){var p=n.Ya(u);if(p!=-1)for(var f=n.V(p);f!=-1;){p=this.j.Ie(p);var m=this.j.Ie(f);(p=this.j.mR(p,m))!=-1&&(m=this.j.ya(p),this.j.Kb(p,c,1),this.j.Kb(m,c,2)),p=f,f=n.V(p)}}},b.prototype.VV=function(c,a,n,o){n=this.j.Ma(n),o=this.j.Ma(o);var u=new h.ja(0);u.Jb(256);for(var p=this.j.g,f=this.j.bh(),m=this.j.Oe;m!=-1;m=this.j.Sf(m)){var w=this.j.Je(m);if(w!=-1){var x=w;do{if(this.j.Bb(x,f)!=1){var E=x,T=x,A=!1,P=0;do{if(this.j.Kb(E,f,1),!A){var F=this.j.fh(E);(F&o)!=0&&(this.j.af(E)&n)!=0&&(T=E,A=!0)}A&&(u.add(this.j.vj(this.j.mm(this.j.kk(E)))),c!=-1&&((F=this.j.fh(E))&o)!=0&&(P|=F=this.j.Bb(E,c))),E=this.j.kc(E)}while(E!=T);A&&0<this.j.Mp(this.j.$e(T))&&(E=p.Kg(1736),this.FQ(E,u),a!=-1&&p.BJ(E,a,P)),u.clear(!1)}x=this.j.kc(this.j.ya(x))}while(x!=w)}}this.j.Lg(f)},b.prototype.zP=function(c,a,n,o){this.j.qW();var u=-1;c!=-1&&(u=this.j.bh(),this.SW(u,n)),this.VV(u,c,a,n),u!=-1&&(this.j.Lg(u),u=-1);var p=this.j.g;for(c=0,u=p.ld;u!=-1;u=p.ve(u))u!=a&&u!=n&&(o.add(u),c++);o.Wd(0,c,function(f,m){return(f=p.qz(p.Ob(f)))<(m=p.qz(p.Ob(m)))?-1:f==m?0:1})},b.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},b}();h.Hg=L}(X||(X={})),function(h){var L=function(){function b(c){c!==void 0?this.Jt(c):this.LB()}return b.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},b.prototype.Nb=function(c){return this==c||c instanceof b&&this.eb==c.eb&&this.jb==c.jb&&this.Lb==c.Lb&&this.qb==c.qb&&this.bb==c.bb&&this.Qb==c.Qb},b.prototype.dc=function(){return h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj()},b.prototype.Gh=function(c,a){var n=this.qb*c.x+this.bb*c.y+this.Qb;a.x=this.eb*c.x+this.jb*c.y+this.Lb,a.y=n},b.prototype.XX=function(c,a,n){for(var o=0;o<a;o++){var u=c[o].x,p=c[o].y,f=this.eb*u+this.jb*p+this.Lb;u=this.qb*u+this.bb*p+this.Qb,n[o]!=null?n[o].na(f,u):n[o]=h.h.construct(f,u)}},b.prototype.multiply=function(c){b.multiply(this,c,this)},b.multiply=function(c,a,n){var o=c.eb*a.eb+c.qb*a.jb,u=c.jb*a.eb+c.bb*a.jb,p=c.Lb*a.eb+c.Qb*a.jb+a.Lb,f=c.eb*a.qb+c.qb*a.bb,m=c.jb*a.qb+c.bb*a.bb;c=c.Lb*a.qb+c.Qb*a.bb+a.Qb,n.eb=o,n.jb=u,n.Lb=p,n.qb=f,n.bb=m,n.Qb=c},b.prototype.Pf=function(){var c=new b;return c.eb=this.eb,c.jb=this.jb,c.Lb=this.Lb,c.qb=this.qb,c.bb=this.bb,c.Qb=this.Qb,c},b.prototype.gC=function(c){if(!c.B()){for(var a=[],n=0;4>n;n++)a[n]=new h.h;c.hB(a),this.YX(a,a),c.bx(a,4)}},b.prototype.YX=function(c,a){for(var n=0;n<c.length;n++){var o=new h.h,u=c[n];o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.Qb,a[n]=o}},b.prototype.iS=function(c,a){c.B()||a.B()||c.S()==0||c.da()==0?this.lx():(this.jb=this.qb=0,this.eb=a.S()/c.S(),this.bb=a.da()/c.da(),this.Lb=a.v-c.v*this.eb,this.Qb=a.G-c.G*this.bb)},b.prototype.WX=function(c){var a=new h.h,n=new h.h;a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.sub(a);var o=.5*a.Tk();return a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.add(n),c*(o>(a=.5*a.Tk())?Math.sqrt(o):Math.sqrt(a))},b.prototype.LB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},b.prototype.isIdentity=function(c){if(c!==void 0){var a=h.h.construct(0,1);return this.Gh(a,a),a.sub(h.h.construct(0,1)),a.Tk()>c*c?!1:(a.na(0,0),this.Gh(a,a),!(a.Tk()>c*c)&&(a.na(1,0),this.Gh(a,a),a.sub(h.h.construct(1,0)),a.Tk()<=c*c))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},b.prototype.Di=function(c){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*c*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},b.prototype.gg=function(c,a){this.eb=1,this.jb=0,this.Lb=c,this.qb=0,this.bb=1,this.Qb=a},b.prototype.Jt=function(c,a){a!==void 0?(this.eb=c,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(c,c)},b.prototype.UB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},b.prototype.gX=function(c){this.hX(Math.cos(c),Math.sin(c))},b.prototype.hX=function(c,a){this.eb=c,this.jb=-a,this.Lb=0,this.qb=a,this.bb=c,this.Qb=0},b.prototype.shift=function(c,a){this.Lb+=c,this.Qb+=a},b.prototype.scale=function(c,a){this.eb*=c,this.jb*=c,this.Lb*=c,this.qb*=a,this.bb*=a,this.Qb*=a},b.prototype.flipX=function(c,a){this.eb=-this.eb,this.jb=-this.jb,this.Lb=c+a-this.Lb},b.prototype.flipY=function(c,a){this.qb=-this.qb,this.bb=-this.bb,this.Qb=c+a-this.Qb},b.prototype.rotate=function(c){var a=new b;a.gX(c),this.multiply(a)},b.prototype.inverse=function(c){if(c!==void 0){var a=this.eb*this.bb-this.jb*this.qb;a==0?c.lx():(a=1/a,c.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,c.Qb=(this.Lb*this.qb-this.eb*this.Qb)*a,c.eb=this.bb*a,c.jb=-this.jb*a,c.qb=-this.qb*a,c.bb=this.eb*a)}else this.inverse(this)},b}();h.Ed=L}(X||(X={})),function(h){var L=function(){function b(){}return b.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},b.prototype.Jt=function(c,a){this.eb=c,this.jb=this.pf=this.qb=0,this.bb=a,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},b.prototype.translate=function(c,a,n){this.Lb+=c,this.Qb+=a,this.Cg+=n},b.prototype.gC=function(c){if(!c.B()){for(var a=new h.Od[8],n=0;8>n;n++)a[n]=new h.Od;c.hB(a),this.transform(a,8,a),c.bx(a)}},b.prototype.transform=function(c,a,n){for(var o=0;o<a;o++){var u=new h.Od,p=c[o];u.x=this.eb*p.x+this.jb*p.y+this.Ve*p.z+this.Lb,u.y=this.qb*p.x+this.bb*p.y+this.We*p.z+this.Qb,u.z=this.pf*p.x+this.Ye*p.y+this.Ze*p.z+this.Cg,n[o]=u}},b.prototype.gp=function(c){var a=new h.Od;return a.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,a.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,a.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,a},b.prototype.Ag=function(c){b.multiply(this,c,this)},b.multiply=function(c,a,n){var o=c.eb*a.eb+c.qb*a.jb+c.pf*a.Ve,u=c.eb*a.qb+c.qb*a.bb+c.pf*a.We,p=c.eb*a.pf+c.qb*a.Ye+c.pf*a.Ze,f=c.jb*a.eb+c.bb*a.jb+c.Ye*a.Ve,m=c.jb*a.qb+c.bb*a.bb+c.Ye*a.We,w=c.jb*a.pf+c.bb*a.Ye+c.Ye*a.Ze,x=c.Ve*a.eb+c.We*a.jb+c.Ze*a.Ve,E=c.Ve*a.qb+c.We*a.bb+c.Ze*a.We,T=c.Ve*a.pf+c.We*a.Ye+c.Ze*a.Ze,A=c.Lb*a.eb+c.Qb*a.jb+c.Cg*a.Ve+a.Lb,P=c.Lb*a.qb+c.Qb*a.bb+c.Cg*a.We+a.Qb;c=c.Lb*a.pf+c.Qb*a.Ye+c.Cg*a.Ze+a.Cg,n.eb=o,n.qb=u,n.pf=p,n.jb=f,n.bb=m,n.Ye=w,n.Ve=x,n.We=E,n.Ze=T,n.Lb=A,n.Qb=P,n.Cg=c},b.inverse=function(c,a){var n=c.eb*(c.bb*c.Ze-c.Ye*c.We)-c.qb*(c.jb*c.Ze-c.Ye*c.Ve)+c.pf*(c.jb*c.We-c.bb*c.Ve);if(n==0)throw h.i.ga("math singularity");var o=1/n;n=(c.bb*c.Ze-c.Ye*c.We)*o;var u=-(c.jb*c.Ze-c.Ye*c.Ve)*o,p=(c.jb*c.We-c.bb*c.Ve)*o,f=-(c.qb*c.Ze-c.We*c.pf)*o,m=(c.eb*c.Ze-c.pf*c.Ve)*o,w=-(c.eb*c.We-c.qb*c.Ve)*o,x=(c.qb*c.Ye-c.pf*c.bb)*o,E=-(c.eb*c.Ye-c.pf*c.jb)*o;o*=c.eb*c.bb-c.qb*c.jb;var T=-(c.Lb*n+c.Qb*u+c.Cg*p),A=-(c.Lb*f+c.Qb*m+c.Cg*w);c=-(c.Lb*x+c.Qb*E+c.Cg*o),a.eb=n,a.qb=f,a.pf=x,a.jb=u,a.bb=m,a.Ye=E,a.Ve=p,a.We=w,a.Ze=o,a.Lb=T,a.Qb=A,a.Cg=c},b.prototype.Pf=function(){var c=new b;return c.eb=this.eb,c.qb=this.qb,c.pf=this.pf,c.jb=this.jb,c.bb=this.bb,c.Ye=this.Ye,c.Ve=this.Ve,c.We=this.We,c.Ze=this.Ze,c.Lb=this.Lb,c.Qb=this.Qb,c.Cg=this.Cg,c},b}();h.BY=L}(X||(X={})),function(h){var L=function(c){function a(n){if(n!==void 0)n=c.call(this,n.dc(),n)||this;else{(n=c.call(this)||this).cg=[],n.cg[0]=0,n.Ba=1,n.wh=[];for(var o=0;10>o;o++)n.wh[o]=-1;n.wh[n.cg[0]]=0}return n.lq=!0,n}return ai(a,c),a.prototype.se=function(n){this.hasAttribute(n)||(this.wh[n]=0,this.dD())},a.prototype.removeAttribute=function(n){if(n==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(n)&&(this.wh[n]=-1,this.dD())},a.prototype.reset=function(){this.cg[0]=0,this.Ba=1;for(var n=0;n<this.wh.length;n++)this.wh[n]=-1;this.wh[this.cg[0]]=0,this.lq=!0},a.prototype.yF=function(){return b.fz().add(this)},a.og=function(){return b.fz().TR()},a.prototype.nM=function(){var n=this.dc();return new h.ua(n,this)},a.prototype.dD=function(){for(var n=this.Ba=0,o=0;10>n;n++)0<=this.wh[n]&&(this.cg[o]=n,this.wh[n]=o,o++,this.Ba++);this.lq=!0},a.prototype.dc=function(){return this.lq&&(this.yl=this.Bn(),this.lq=!1),this.yl},a.prototype.Nb=function(n){if(n==null)return!1;if(n==this)return!0;if(!(n instanceof a)||n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.cg[o]!=n.cg[o])return!1;return this.lq==n.lq},a.prototype.AG=function(n){if(n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.cg[o]!=n.cg[o])return!1;return!0},a.Kw=function(n,o){for(var u=[],p=0;p<n.Ba;p++)u[p]=-1;p=0;for(var f=n.Ba;p<f;p++)u[p]=o.Qf(n.qd(p));return u},a.vR=function(n,o){return(n=new a(n)).se(o),n.yF()},a.wR=function(n,o){for(var u=null,p=0;10>p;p++)!n.hasAttribute(p)&&o.hasAttribute(p)&&(u==null&&(u=new a(n)),u.se(p));return u!=null?u.yF():n},a}(h.ua);h.ee=L;var b=function(){function c(){this.map=[];var a=new L;this.add(a),(a=new L).se(1),this.add(a)}return c.fz=function(){return c.WK},c.prototype.TR=function(){return c.gt},c.prototype.add=function(a){var n=a.dc();if(c.gt!=null&&c.gt.dc()==n&&a.AG(c.gt))return c.gt;if(c.Fw!=null&&c.Fw.dc()==n&&a.AG(c.Fw))return c.Fw;var o=null;return this.map[n]!==void 0&&(o=this.map[n]),o==null&&((o=a.nM()).Ba==1?c.gt=o:o.Ba==2&&o.qd(1)==1?c.Fw=o:this.map[n]=o),o},c.WK=new c,c}()}(X||(X={}));var iy={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},Fl={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},vp=new(function(){function h(){this.LM=50,this.op=new Map,this.ij=[]}return h.prototype.clear=function(){this.ij.length=0,this.op.clear()},h.prototype.delete=function(L){return!!this.op.delete(L)&&(this.ij.splice(this.ij.indexOf(L),1),!0)},h.prototype.get=function(L){var b=this.op.get(L);if(b!==void 0)return this.ij[0]!==L&&(this.ij.splice(this.ij.indexOf(L),1),this.ij.unshift(L)),b},h.prototype.has=function(L){return this.op.has(L)},h.prototype.set=function(L,b){return this.get(L)!==void 0&&this.delete(L),this.ij.unshift(L),this.op.set(L,b),this.iM(),this},h.prototype.iM=function(){for(;this.ij.length&&this.ij.length>this.LM;){var L=this.ij.pop();this.op.delete(L)}},h}()),We=((Ii={}).convertJSONToGeometry=function(h){return X.bc.$O(h)},Ii.hasM=function(h){return h.hasAttribute(X.Kh.M)},Ii.hasZ=function(h){return h.hasAttribute(X.Kh.Z)},Ii.getPointX=function(h){return h.Ng()},Ii.getPointY=function(h){return h.kh()},Ii.getPointZ=function(h){return h.VR()},Ii.getPointM=function(h){return h.tR()},Ii.getXMin=function(h){return h.gs()},Ii.getYMin=function(h){return h.js()},Ii.getXMax=function(h){return h.fs()},Ii.getYMax=function(h){return h.hs()},Ii.getZExtent=function(h){return h.Vg(X.Kh.Z,0)},Ii.getMExtent=function(h){return h.Vg(X.Kh.M,0)},Ii.exportPaths=function(h){var L=[],b=h.ea(),c=null,a=null,n=h.hasAttribute(X.Kh.Z),o=h.hasAttribute(X.Kh.M);n&&(c=h.vb(X.Kh.Z)),o&&(a=h.vb(X.Kh.M));for(var u=new X.h,p=0;p<b;p++){for(var f=h.Ca(p),m=h.Ka(p),w=0,x=0,E=NaN,T=NaN,A=NaN,P=NaN,F=h.ec(p),j=[],H=f;H<f+m;H++){h.D(H,u),P=A=NaN;var W=[u.x,u.y];n&&(A=c.get(H),W.push(A)),o&&(P=a.get(H),W.push(P)),H==f&&F&&(w=u.x,x=u.y,E=A,T=P),j.push(W)}!F||w==u.x&&x==u.y&&(!n||isNaN(E)&&isNaN(A)||E==A)&&(!o||isNaN(T)&&isNaN(P)||T==P)||j.push(j[0].slice(0)),L.push(j)}return L},Ii.exportPathsFlat=function(){},Ii.exportPoints=function(h){var L=h.hasAttribute(X.Kh.Z),b=h.hasAttribute(X.Kh.M),c=null,a=null;L&&(c=h.vb(X.Kh.Z)),b&&(a=h.vb(X.Kh.M));for(var n=new X.h,o=h.I(),u=[],p=0;p<o;p++){h.D(p,n);var f=[n.x,n.y];L&&f.push(c.get(p)),b&&f.push(a.get(p)),u.push(f)}return u},Ii.exportPointsFlat=function(){},Ii);return function(){function h(){}return h.buffer=pi,h.clip=O,h.contains=D,h.convexHull=Ce,h.crosses=z,h.cut=R,h.densify=qe,h.difference=Ge,h.disjoint=re,h.distance=B,h.equals=V,h.extendedSpatialReferenceInfo=k,h.generalize=Re,h.geodesicArea=tn,h.geodesicBuffer=he,h.geodesicDensify=ft,h.geodesicLength=Ar,h.intersect=lt,h.intersects=q,h.isSimple=xe,h.nearestCoordinate=me,h.nearestVertex=we,h.nearestVertices=Ee,h.offset=zt,h.overlaps=ue,h.planarArea=jt,h.planarLength=bi,h.relate=_e,h.simplify=Ne,h.symmetricDifference=Ze,h.touches=J,h.union=et,h.within=ne,h.rotate=X.Dx.rotate,h.flipHorizontal=X.Dx.DQ,h.flipVertical=X.Dx.EQ,h.ExtendedParams=X.sC,h._enableProjection=Ki,h._project=gp,h._getTransformation=gi,h._getTransformationBySuitability=ti,h}()}var r=i();r!==void 0&&(e.exports=r)})(zN);const ui=zN.exports,Sze=xze({__proto__:null,default:ui},[zN.exports]),$ze=Object.freeze(Object.defineProperty({__proto__:null,G:ui,g:Sze},Symbol.toStringTag,{value:"Module"})),Ti={convertToGEGeometry:Mze,exportPoint:Eze,exportPolygon:Tze,exportPolyline:Ize,exportMultipoint:Cze,exportExtent:kze};function Mze(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function Eze(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new ut({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(l.z=e.getPointZ(t)),s&&(l.m=e.getPointM(t)),l.cache._geVersion=t,l}function Tze(e,t,i){const r=new go({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function Ize(e,t,i){const r=new zr({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function Cze(e,t,i){const r=new B1({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function kze(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new yi({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const d=e.getZExtent(t);l.zmin=d.vmin,l.zmax=d.vmax}if(s){const d=e.getMExtent(t);l.mmin=d.vmin,l.mmax=d.vmax}return l.cache._geVersion=t,l}const Aze=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Ti},Symbol.toStringTag,{value:"Module"}));function Li(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function Oze(e){return ui.extendedSpatialReferenceInfo(e)}function Lze(e,t){return ui.clip(Ti,Li(e),e,t)}function Pze(e,t){return ui.cut(Ti,Li(e),e,t)}function Rze(e,t){return ui.contains(Ti,Li(e),e,t)}function Nze(e,t){return ui.crosses(Ti,Li(e),e,t)}function Fze(e,t,i){return ui.distance(Ti,Li(e),e,t,i)}function Dze(e,t){return ui.equals(Ti,Li(e),e,t)}function jze(e,t){return ui.intersects(Ti,Li(e),e,t)}function zze(e,t){return ui.touches(Ti,Li(e),e,t)}function Vze(e,t){return ui.within(Ti,Li(e),e,t)}function Uze(e,t){return ui.disjoint(Ti,Li(e),e,t)}function Bze(e,t){return ui.overlaps(Ti,Li(e),e,t)}function Gze(e,t,i){return ui.relate(Ti,Li(e),e,t,i)}function qze(e){return ui.isSimple(Ti,Li(e),e)}function Hze(e){return ui.simplify(Ti,Li(e),e)}function Wze(e,t=!1){return ui.convexHull(Ti,Li(e),e,t)}function Jze(e,t){return ui.difference(Ti,Li(e),e,t)}function Kze(e,t){return ui.symmetricDifference(Ti,Li(e),e,t)}function Zze(e,t){return ui.intersect(Ti,Li(e),e,t)}function Ule(e,t=null){return ui.union(Ti,Li(e),e,t)}function Yze(e,t,i,r,s,l){return ui.offset(Ti,Li(e),e,t,i,r,s,l)}function Xze(e,t,i,r=!1){return ui.buffer(Ti,Li(e),e,t,i,r)}function Ble(e,t,i,r,s,l){return ui.geodesicBuffer(Ti,Li(e),e,t,i,r,s,l)}function Qze(e,t,i=!0){return ui.nearestCoordinate(Ti,Li(e),e,t,i)}function eVe(e,t){return ui.nearestVertex(Ti,Li(e),e,t)}function tVe(e,t,i,r){return ui.nearestVertices(Ti,Li(e),e,t,i,r)}function VN(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent.center:null}function iVe(e,t,i){if(e==null)throw new Error("Illegal Argument Exception");const r=e.spatialReference;if((i=i!=null?i:VN(e))==null)throw new Error("Illegal Argument Exception");const s=e.constructor.fromJSON(ui.rotate(e,t,i));return s.spatialReference=r,s}function rVe(e,t){if(e==null)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if((t=t!=null?t:VN(e))==null)throw new Error("Illegal Argument Exception");const r=e.constructor.fromJSON(ui.flipHorizontal(e,t));return r.spatialReference=i,r}function nVe(e,t){if(e==null)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if((t=t!=null?t:VN(e))==null)throw new Error("Illegal Argument Exception");const r=e.constructor.fromJSON(ui.flipVertical(e,t));return r.spatialReference=i,r}function sVe(e,t,i,r){return ui.generalize(Ti,Li(e),e,t,i,r)}function oVe(e,t,i){return ui.densify(Ti,Li(e),e,t,i)}function Gle(e,t,i,r=0){return ui.geodesicDensify(Ti,Li(e),e,t,i,r)}function aVe(e,t){return ui.planarArea(Ti,Li(e),e,t)}function qle(e,t){return ui.planarLength(Ti,Li(e),e,t)}function Hle(e,t,i){return ui.geodesicArea(Ti,Li(e),e,t,i)}function V$(e,t,i){return ui.geodesicLength(Ti,Li(e),e,t,i)}const VKe=Object.freeze(Object.defineProperty({__proto__:null,buffer:Xze,clip:Lze,contains:Rze,convexHull:Wze,crosses:Nze,cut:Pze,densify:oVe,difference:Jze,disjoint:Uze,distance:Fze,equals:Dze,extendedSpatialReferenceInfo:Oze,flipHorizontal:rVe,flipVertical:nVe,generalize:sVe,geodesicArea:Hle,geodesicBuffer:Ble,geodesicDensify:Gle,geodesicLength:V$,intersect:Zze,intersects:jze,isSimple:qze,nearestCoordinate:Qze,nearestVertex:eVe,nearestVertices:tVe,offset:Yze,overlaps:Bze,planarArea:aVe,planarLength:qle,relate:Gze,rotate:iVe,simplify:Hze,symmetricDifference:Kze,touches:zze,union:Ule,within:Vze},Symbol.toStringTag,{value:"Module"}));function Wle(e){if(!e)return null;if(z6(e)&&e.wkid){const t=r4e[e.wkid];if(t)return t}if(e.wkt){const t=lVe(e.wkt);if(t)return t}return null}function lVe(e){const t=t4e.exec(e);if(!t||t.length!==2)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(r)||isNaN(s)?null:{a:r,f:s===0?0:1/s}}function U$(e){const t=Wle(e||Ct.WGS84);if(uVe(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function uVe(e){return"b"in e&&"eSq"in e&&"radius"in e}function M5(e,t,i){const{a:r,eSq:s}=U$(i),l=Math.sqrt(s),d=Math.sin(t[1]*Do),y=r*t[0]*Do;let v;return s>0?v=r*((1-s)*(d/(1-s*(d*d))-1/(2*l)*Math.log((1-l*d)/(1+l*d))))*.5:v=r*d,e[0]=y,e[1]=v,e}function ey(e){return Wle(e)!==null}function Jle(e,t="square-meters"){if(e.some(d=>!ey(d.spatialReference)))throw new ge("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let d=0;d<e.length;d++){const y=e[d],v=y.spatialReference,{radius:_,densificationRatio:M}=U$(v),k=_*M;i.push(u4(y,k))}const r=[],s=[0,0],l=[0,0];for(let d=0;d<i.length;d++){const{rings:y,spatialReference:v}=i[d];let _=0;for(let M=0;M<y.length;M++){const k=y[M];M5(s,k[0],v),M5(l,k[k.length-1],v);let O=l[0]*s[1]-s[0]*l[1];for(let R=0;R<k.length-1;R++)M5(s,k[R+1],v),M5(l,k[R],v),O+=l[0]*s[1]-s[0]*l[1];_+=O}_=xi(_,"square-meters",t),r.push(_/-2)}return r}function gb(e,t="meters"){if(!e)throw new ge("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(r=>!ey(r.spatialReference)))throw new ge("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const s=e[r],{spatialReference:l}=s,d=s.type==="polyline"?s.paths:s.rings;let y=0;for(let v=0;v<d.length;v++){const _=d[v];let M=0;for(let k=1;k<_.length;k++){const O=_[k-1][0],R=_[k][0],D=_[k-1][1],z=_[k][1];if(D!==z||O!==R){const B={distance:null};l_(B,[O,D],[R,z],l),M+=B.distance}}y+=M}y=xi(y,"meters",t),i.push(y)}return i}function u4(e,t){if(e.type!=="polyline"&&e.type!=="polygon")throw new ge("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!ey(i))throw new ge("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=e.type==="polyline"?e.paths:e.rings,s=[],l=[0,0],d={distance:null};for(const y of r){const v=[];s.push(v),v.push([y[0][0],y[0][1]]);let _,M,k=y[0][0],O=y[0][1];for(let R=0;R<y.length-1;R++){if(_=y[R+1][0],M=y[R+1][1],k===_&&O===M)continue;const D=[k,O];l_(d,[k,O],[_,M],i);const{azimuth:z,distance:B}=d,V=B/t;if(V>1){for(let q=1;q<=V-1;q++)E8(l,D,z,q*t,i),v.push(l.slice(0));E8(l,D,z,(B+Math.floor(V-1)*t)/2,i),v.push(l.slice(0))}E8(l,D,z,B,i),v.push(l.slice(0)),k=l[0],O=l[1]}}return e.type==="polyline"?new zr({paths:s,spatialReference:i}):new go({rings:s,spatialReference:i})}function E8(e,t,i,r,s){const l=t[0],d=t[1],y=l*Do,v=d*Do,_=i*Do,{a:M,b:k,f:O}=U$(s),R=Math.sin(_),D=Math.cos(_),z=(1-O)*Math.tan(v),B=1/Math.sqrt(1+z*z),V=z*B,q=Math.atan2(z,D),J=B*R,ne=J*J,re=1-ne,ue=re*(M*M-k*k)/(k*k),_e=1+ue/16384*(4096+ue*(ue*(320-175*ue)-768)),xe=ue/1024*(256+ue*(ue*(74-47*ue)-128));let Ne,Ce,Ge,Ze,lt=r/(k*_e),et=2*Math.PI;for(;Math.abs(lt-et)>1e-12;)Ge=Math.cos(2*q+lt),Ne=Math.sin(lt),Ce=Math.cos(lt),Ze=xe*Ne*(Ge+xe/4*(Ce*(2*Ge*Ge-1)-xe/6*Ge*(4*Ne*Ne-3)*(4*Ge*Ge-3))),et=lt,lt=r/(k*_e)+Ze;const zt=V*Ne-B*Ce*D,pi=Math.atan2(V*Ce+B*Ne*D,(1-O)*Math.sqrt(ne+zt*zt)),he=Math.atan2(Ne*R,B*Ce-V*Ne*D),pe=O/16*re*(4+O*(4-3*re)),me=pi/Do,we=(y+(he-(1-pe)*O*J*(lt+pe*Ne*(Ge+pe*Ce*(2*Ge*Ge-1)))))/Do;return e[0]=we,e[1]=me,e}function l_(e,t,i,r){const s=t[0]*Do,l=t[1]*Do,d=i[0]*Do,y=i[1]*Do,{a:v,b:_,f:M,radius:k}=U$(r),O=d-s,R=Math.atan((1-M)*Math.tan(l)),D=Math.atan((1-M)*Math.tan(y)),z=Math.sin(R),B=Math.cos(R),V=Math.sin(D),q=Math.cos(D);let J,ne,re,ue,_e,xe,Ne,Ce,Ge,Ze,lt=1e3,et=O;do{if(Ne=Math.sin(et),Ce=Math.cos(et),re=Math.sqrt(q*Ne*(q*Ne)+(B*V-z*q*Ce)*(B*V-z*q*Ce)),re===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;_e=z*V+B*q*Ce,xe=Math.atan2(re,_e),Ge=B*q*Ne/re,ne=1-Ge*Ge,ue=_e-2*z*V/ne,isNaN(ue)&&(ue=0),Ze=M/16*ne*(4+M*(4-3*ne)),J=et,et=O+(1-Ze)*M*Ge*(xe+Ze*re*(ue+Ze*_e*(2*ue*ue-1)))}while(Math.abs(et-J)>1e-12&&--lt>0);if(lt===0){const we=k,Ee=Math.acos(Math.sin(l)*Math.sin(y)+Math.cos(l)*Math.cos(y)*Math.cos(d-s))*we,Re=d-s,qe=Math.sin(Re)*Math.cos(y),ft=Math.cos(l)*Math.sin(y)-Math.sin(l)*Math.cos(y)*Math.cos(Re),jt=Math.atan2(qe,ft);return e.azimuth=jt/Do,e.distance=Ee,e.reverseAzimuth=void 0,e}const zt=ne*(v*v-_*_)/(_*_),pi=zt/1024*(256+zt*(zt*(74-47*zt)-128)),he=_*(1+zt/16384*(4096+zt*(zt*(320-175*zt)-768)))*(xe-pi*re*(ue+pi/4*(_e*(2*ue*ue-1)-pi/6*ue*(4*re*re-3)*(4*ue*ue-3)))),pe=Math.atan2(q*Math.sin(et),B*V-z*q*Math.cos(et)),me=Math.atan2(B*Math.sin(et),B*V*Math.cos(et)-z*q);return e.azimuth=pe/Do,e.distance=he,e.reverseAzimuth=me/Do,e}let Ch=class extends nN(oN(zg)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new m1,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};g([S({type:sN})],Ch.prototype,"elevationInfo",void 0),g([S(KA(m1,"graphics"))],Ch.prototype,"graphics",void 0),g([S({type:["show","hide"]})],Ch.prototype,"listMode",void 0),g([S()],Ch.prototype,"screenSizePerspectiveEnabled",void 0),g([S({readOnly:!0})],Ch.prototype,"type",void 0),g([S({constructOnly:!0})],Ch.prototype,"internal",void 0),Ch=g([Q("esri.layers.GraphicsLayer")],Ch);const a6=Ch;function Kle(e,t){return!!cVe(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function cVe(e,t){return e===t||e&&t&&e.equals(t)}class UKe{constructor(t,i,r){this.uid=t,this.geometry=i,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null}}class BKe{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function UN(e,t,i,r){return{x:e,y:t,z:i,hasZ:i!=null,hasM:!1,spatialReference:r,type:"point"}}Y6();Va();var jH,zH,VH,UH,BH,GH,qH,HH,WH,JH,KH,ZH,YH,XH,QH,eW,tW,iW,rW,nW,sW,oW,aW,lW,uW,cW,hW,pW,dW,fW,yW,mW,gW,vW,wW,wO,bW,_W,xW,bO,SW,$W,MW,EW,TW,IW,CW,kW,AW,OW,LW,PW,RW,NW,FW,DW,jW,zW,VW,UW,BW;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(jH||(jH={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(zH||(zH={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(VH||(VH={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(UH||(UH={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(BH||(BH={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(GH||(GH={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(qH||(qH={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(HH||(HH={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(WH||(WH={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(JH||(JH={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(KH||(KH={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(ZH||(ZH={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(YH||(YH={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(XH||(XH={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(QH||(QH={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(eW||(eW={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(tW||(tW={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(iW||(iW={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(rW||(rW={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(nW||(nW={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(sW||(sW={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(oW||(oW={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(aW||(aW={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(lW||(lW={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(uW||(uW={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(cW||(cW={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(hW||(hW={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(pW||(pW={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(dW||(dW={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(fW||(fW={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(yW||(yW={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(mW||(mW={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(gW||(gW={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(vW||(vW={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(wW||(wW={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(wO||(wO={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(bW||(bW={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(_W||(_W={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(xW||(xW={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(bO||(bO={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(SW||(SW={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}($W||($W={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(MW||(MW={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(EW||(EW={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(TW||(TW={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(IW||(IW={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(CW||(CW={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(kW||(kW={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(AW||(AW={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(OW||(OW={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(LW||(LW={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(PW||(PW={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(RW||(RW={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(NW||(NW={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(FW||(FW={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(DW||(DW={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(jW||(jW={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(zW||(zW={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(VW||(VW={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(UW||(UW={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(BW||(BW={}));const Tr={main:new ot([255,127,0]),selected:new ot([255,255,255]),outline:new ot([0,0,0,.5]),selectedOutline:new ot([255,255,255]),hoverOutline:new ot([255,255,255]),secondary:new ot([255,255,255]),secondaryOutline:new ot([100,100,100]),transparent:new ot([0,0,0,0])};function Rv(e,t){if(t)for(const i in t)e[i]=t[i]}class vb{constructor(t){this.size=8,this.hoverSize=10,this.color=Tr.main,this.hoverColor=Tr.main,this.outlineColor=Tr.outline,this.hoverOutlineColor=Tr.hoverOutline,Rv(this,t)}}class hVe{constructor(t){this.color=Tr.secondary,this.hoverColor=Tr.main,Rv(this,t)}}class pVe{constructor(t){this.color=Tr.transparent,this.hoverColor=Tr.transparent,this.outlineColor=Tr.main,this.hoverOutlineColor=Tr.main,this.stagedColor=Tr.transparent,this.stagedOutlineColor=Tr.secondary,Rv(this,t)}}class dVe{constructor(t){this.vertex=new vb,this.midpoint=new vb({color:Tr.secondary,outlineColor:Tr.secondaryOutline,size:6}),this.selected=new vb({color:Tr.selected,hoverColor:Tr.selected,hoverOutlineColor:Tr.hoverOutline}),Rv(this,t)}}class fVe{constructor(t){this.center=new vb({color:Tr.secondaryOutline}),this.fill=new pVe,this.line=new hVe,this.vertex=new vb({color:Tr.selected,outlineColor:Tr.main,hoverColor:Tr.selected,hoverOutlineColor:Tr.secondaryOutline}),Rv(this,t)}}class yVe{constructor(t){this.reshapeGraphics=new dVe,this.transformGraphics=new fVe,Rv(this,t)}}new yVe;let Cu=class extends Ve{constructor(){super(...arguments),this.enabled=!0}};g([S({type:Boolean})],Cu.prototype,"enabled",void 0),Cu=g([Q("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],Cu);let Nr=class extends Ve{constructor(e){super(e),this.lineSnapper=new Cu,this.parallelLineSnapper=new Cu,this.rightAngleSnapper=new Cu,this.rightAngleTriangleSnapper=new Cu,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new ot([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};g([S({type:Cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Nr.prototype,"lineSnapper",void 0),g([S({type:Cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Nr.prototype,"parallelLineSnapper",void 0),g([S({type:Cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Nr.prototype,"rightAngleSnapper",void 0),g([S({type:Cu,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Nr.prototype,"rightAngleTriangleSnapper",void 0),g([S({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Nr.prototype,"shortLineThreshold",void 0),g([S({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Nr.prototype,"distance",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Nr.prototype,"pointThreshold",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Nr.prototype,"intersectionParallelLineThreshold",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Nr.prototype,"parallelLineThreshold",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Nr.prototype,"touchSensitivityMultiplier",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Nr.prototype,"pointOnLineThreshold",void 0),g([S({type:ot,nonNullable:!0})],Nr.prototype,"orange",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Nr.prototype,"lineHintWidthReference",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Nr.prototype,"lineHintWidthTarget",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Nr.prototype,"lineHintFadedExtensions",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Nr.prototype,"parallelLineHintWidth",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],Nr.prototype,"parallelLineHintLength",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Nr.prototype,"parallelLineHintOffset",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],Nr.prototype,"rightAngleHintSize",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],Nr.prototype,"rightAngleHintOutlineSize",void 0),Nr=g([Q("esri.views.interactive.snapping.Settings.Defaults")],Nr);const _O=new Nr;function Yh(e,t){const i=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return i;case 3:return i&&e[2]===t[2];case 4:return i&&e[3]===t[3]}return!1}var GW;(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(GW||(GW={}));class u_{constructor(t){this.elevationInfo=t}}class BN extends u_{constructor(t,i){super(i),this.intersectionPoint=t}equals(t){return t instanceof BN&&Yh(this.intersectionPoint,t.intersectionPoint)}}Ke.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");class GN extends u_{constructor(t,i,r,s,l=!0,d=!0){super(s),this.type=t,this.lineStart=i,this.lineEnd=r,this.fadeLeft=l,this.fadeRight=d}equals(t){return t instanceof GN&&this.type===t.type&&Yh(this.lineStart,t.lineStart)&&Yh(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}}Ke.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");class qN extends u_{constructor(t,i,r){super(r),this.lineStart=t,this.lineEnd=i}equals(t){return t instanceof qN&&Yh(this.lineStart,t.lineStart)&&Yh(this.lineEnd,t.lineEnd)}}class HN extends u_{constructor(t,i){super(i),this.point=t}equals(t){return t instanceof HN&&Yh(this.point,t.point)}}Ke.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");class WN extends u_{constructor(t,i,r,s){super(s),this.previousVertex=t,this.centerVertex=i,this.nextVertex=r}equals(t){return t instanceof WN&&Yh(this.previousVertex,t.previousVertex)&&Yh(this.centerVertex,t.centerVertex)&&Yh(this.nextVertex,t.nextVertex)}}class mVe{draw(t,i){const r=this._getUniqueHints(t),s=[];for(const l of r)l instanceof BN&&s.push(this.visualizeIntersectionPoint(l,i)),l instanceof GN&&s.push(this.visualizeLine(l,i)),l instanceof qN&&s.push(this.visualizeParallelSign(l,i)),l instanceof WN&&s.push(this.visualizeRightAngleQuad(l,i)),l instanceof HN&&s.push(this.visualizePoint(l,i));return I3(s)}_getUniqueHints(t){const i=[];for(const r of t){let s=!0;for(const l of i)if(r.equals(l)){s=!1;break}s&&i.push(r)}return i}}class gVe extends mVe{constructor(t){super(),this.graphicsLayer=t}visualizeIntersectionPoint(t,i){return this._visualizeSnappingIndicator(new ut({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:i.coordinateHelper.spatialReference}),wVe)}visualizePoint(t,i){return this._visualizeSnappingIndicator(new ut({x:t.point[0],y:t.point[1],spatialReference:i.coordinateHelper.spatialReference}),bVe)}visualizeLine(t,i){return this._visualizeSnappingIndicator(new zr({paths:[[t.lineStart,t.lineEnd]],spatialReference:i.coordinateHelper.spatialReference}),_Ve)}visualizeParallelSign(t,i){return this._visualizeSnappingIndicator(new zr({paths:[[t.lineStart,t.lineEnd]],spatialReference:i.coordinateHelper.spatialReference}),xVe)}visualizeRightAngleQuad(t,i){return this._visualizeSnappingIndicator(new zr({paths:[[t.previousVertex,t.centerVertex,t.nextVertex]],spatialReference:i.coordinateHelper.spatialReference}),MVe(t))}_visualizeSnappingIndicator(t,i){const r=new pn({geometry:t,symbol:i});return this.graphicsLayer.add(r),V1(()=>{this.graphicsLayer.remove(r)})}}const tv=Tr.main.toArray(),vVe=[...Tr.main.toRgb(),100],wVe=new is({outline:new $o({width:1.5,color:tv}),size:15,color:[0,0,0,0]}),bVe=new is({outline:{width:.5,color:[0,0,0,1]},size:10,color:tv}),_Ve=new fp({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:wO.Butt,joinStyle:bO.Round,miterLimit:10,width:bo(_O.lineHintWidthTarget),color:tv}]}}}),xVe=new fp({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:tv}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:tv}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),Zle=e=>new fp({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:bo(_O.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:bo(_O.rightAngleHintOutlineSize),color:tv},{type:"CIMSolidFill",enable:!0,color:vVe}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),SVe=Zle(45),$Ve=Zle(225),MVe=(()=>{const e=wi(),t=wi(),i=wt();return r=>(kl(e,r.centerVertex,r.previousVertex),kl(t,r.nextVertex,r.previousVertex),_N(i,e,t),i[2]<0?SVe:$Ve)})();var _n;(function(e){e[e.Z=0]="Z",e[e.M=1]="M"})(_n||(_n={}));class EVe{constructor(t){this.spatialReference=t}createVector(){return this._tag(wi())}pointToVector(t){return this._tag(Zh(t.x,t.y))}arrayToVector(t){return this._tag(Zh(t[0],t[1]))}vectorToArray(t){return[t[0],t[1]]}pointToArray(t){return[t.x,t.y]}vectorToPoint(t,i=new ut){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new ut){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return Qoe(s,t,i,r)}addDelta(t,i,r){t[0]+=i,t[1]+=r}distance(t,i){return Q1(t,i)}getZ(t,i){return i}hasZ(){return!1}getM(t,i){return i}hasM(){return!1}clone(t){return this._tag(tae(t))}copy(t,i){return Xg(i,t)}fromXYZ(t){return this._tag(Zh(t[0],t[1]))}toXYZ(t,i=0){return Qn(t[0],t[1],i)}_tag(t){return t}}class qW{constructor(t,i){this.valueType=t,this.spatialReference=i}createVector(){return this._tag(wt())}pointToVector(t){return this._tag(Qn(t.x,t.y,this.valueType===_n.Z?t.z:t.m))}arrayToVector(t){return this._tag(Qn(t[0],t[1],t[2]||0))}vectorToArray(t){return[t[0],t[1],t[2]]}pointToArray(t){return this.valueType===_n.Z?[t.x,t.y,t.z]:[t.x,t.y,t.m]}vectorToPoint(t,i=new ut){return i.x=t[0],i.y=t[1],i.z=this.valueType===_n.Z?t[2]:void 0,i.m=this.valueType===_n.M?t[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new ut){return i.x=t[0],i.y=t[1],i.z=this.valueType===_n.Z?t[2]:void 0,i.m=this.valueType===_n.M?t[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){const r=this.valueType===_n.Z,s=this.valueType===_n.M;return i.x=t[0],i.y=t[1],i.z=r?t[2]:void 0,i.m=s?t[2]:void 0,i.hasZ=r,i.hasM=s,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return WX(s,t,i,r)}addDelta(t,i,r,s){t[0]+=i,t[1]+=r,this.valueType===_n.Z&&(t[2]+=s)}distance(t,i){return this.valueType===_n.Z?Jh(t,i):Q1(t,i)}getZ(t,i){return this.valueType===_n.Z?t[2]:i}hasZ(){return this.valueType===_n.Z}getM(t,i){return this.valueType===_n.M?t[2]:i}hasM(){return this.valueType===_n.M}clone(t){return this._tag(FX(t))}copy(t,i){return xl(i,t)}fromXYZ(t,i=0,r=0){return this._tag(Qn(t[0],t[1],this.valueType===_n.Z?t.length>2?t[2]:i:r))}toXYZ(t,i=0){return this._tag(Qn(t[0],t[1],this.valueType===_n.Z?t[2]:i))}_tag(t){return t}}class TVe{constructor(t){this.spatialReference=t}createVector(){return this._tag(Ov())}pointToVector(t){return this._tag(Ru(t.x,t.y,t.z,t.m))}arrayToVector(t){return this._tag(Ru(t[0],t[1],t[2]||0,t[3]||0))}vectorToArray(t){return[t[0],t[1],t[2],t[3]]}pointToArray(t){return[t.x,t.y,t.z,t.m]}vectorToPoint(t,i=new ut){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new ut){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return H6(s,t,i,r)}addDelta(t,i,r,s){t[0]+=i,t[1]+=r,t[2]+=s}distance(t,i){return Jh(t,i)}getZ(t){return t[2]}hasZ(){return!0}getM(t){return t[3]}hasM(){return!0}clone(t){return this._tag(rse(t))}copy(t,i){return q6(i,t)}fromXYZ(t,i=0,r=0){return this._tag(Ru(t[0],t[1],t.length>2?t[2]:i,r))}toXYZ(t){return Qn(t[0],t[1],t[2])}_tag(t){return t}}function JN(e,t,i){return e&&t?new TVe(i):t?new qW(_n.M,i):e?new qW(_n.Z,i):new EVe(i)}function IVe(e,t){if(!t.supported)return;let i=1/0,r=-1/0;const s=t.upperBoundX-t.lowerBoundX;e.forEach(d=>{let y=d.pos[0];for(;y<t.lowerBoundX;)y+=s;for(;y>t.upperBoundX;)y-=s;i=Math.min(i,y),r=Math.max(r,y),d.pos[0]=y});const l=r-i;s-l<l&&e.forEach(d=>{d.pos[0]<0&&(d.pos[0]+=s)})}function CVe(e,t){const i=La(e);return t===_o.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}class wb{constructor(t){this.component=t,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(t){this._pos=t,this.component.unnormalizeVertexPositions()}}class Xh{constructor(t,i,r){this.component=t,this.leftVertex=i,this.rightVertex=r,this.type="edge",i.rightEdge=this,r.leftEdge=this}}class Sg{constructor(t,i){this.spatialReference=t,this.viewingMode=i,this.vertices=[],this.edges=[]}unnormalizeVertexPositions(){this.vertices.length<=1||IVe(this.vertices,CVe(this.spatialReference,this.viewingMode))}updateVertexIndex(t,i){if(this.vertices.length===0)return;const r=this.vertices[0];let s=null,l=t,d=i;do s=l,s.index=d++,l=s.rightEdge?s.rightEdge.rightVertex:null;while(l!=null&&l!==r);s.leftEdge&&s!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(s),this.vertices.length-1)}getFirstVertex(){return this.vertices.length===0?null:this.vertices[0]}getLastVertex(){return this.vertices.length===0?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(t,i){const r=this.vertices[t];this.vertices[t]=this.vertices[i],this.vertices[i]=r}iterateVertices(t){if(this.vertices.length===0)return;const i=this.vertices[0];let r=i;do t(r,r.index),r=K(r.rightEdge)?r.rightEdge.rightVertex:null;while(r!==i&&r!=null)}}class Nv extends bs{constructor(t,i){super(),this.type=t,this.coordinateHelper=i,this._geometry=null,this.dirty=!0,this.components=[]}get geometry(){if(this.dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon()}this.dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}notifyChanges(t){this.dirty=!0,this.emit("change",t)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const t=[],i=this.coordinateHelper.vectorToArray;for(const r of this.components){if(r.vertices.length<1)continue;const s=[];let l=r.vertices.find(y=>y.leftEdge==null);const d=l;do s.push(i(l.pos)),l=l.rightEdge?l.rightEdge.rightVertex:null;while(l&&l!==d);t.push(s)}return new zr({paths:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const t=[],i=this.coordinateHelper.vectorToArray;for(const r of this.components){if(r.vertices.length<1)continue;const s=[],l=r.vertices[0];let d=l;const y=d;do s.push(i(d.pos)),d=K(d.rightEdge)?d.rightEdge.rightVertex:null;while(d&&d!==y);r.isClosed()&&s.push(i(l.pos)),t.push(s)}return new go({rings:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(t,i){const r=t.spatialReference,s=JN(t.hasZ,t.hasM,r),l=new Nv(t.type,s);switch(t.type){case"polygon":{const d=t.rings;for(let y=0;y<d.length;++y){const v=d[y],_=new Sg(r,i),M=v.length>2&&$1(v[0],v[v.length-1]),k=M?v.length-1:v.length;for(let R=0;R<k;++R){const D=s.arrayToVector(v[R]),z=new wb(_);_.vertices.push(z),z.pos=D,z.index=R}const O=_.vertices.length-1;for(let R=0;R<O;++R){const D=_.vertices[R],z=_.vertices[R+1],B=new Xh(_,D,z);_.edges.push(B)}if(M){const R=new Xh(_,_.vertices[_.vertices.length-1],_.vertices[0]);_.edges.push(R)}l.components.push(_)}break}case"polyline":for(const d of t.paths){const y=new Sg(r,i),v=d.length;for(let M=0;M<v;++M){const k=s.arrayToVector(d[M]),O=new wb(y);y.vertices.push(O),O.pos=k,O.index=M}const _=y.vertices.length-1;for(let M=0;M<_;++M){const k=y.vertices[M],O=y.vertices[M+1],R=new Xh(y,k,O);y.edges.push(R)}l.components.push(y)}break;case"point":{const d=new Sg(r,i),y=new wb(d);y.index=0,y.pos=s.pointToVector(t),d.vertices.push(y),l.components.push(d);break}}return l}}var Ph;(function(e){e[e.NEW_STEP=0]="NEW_STEP",e[e.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(Ph||(Ph={}));class kVe{constructor(t,i,r){this.editGeometry=t,this.component=i,this.pos=r,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}apply(){let t="redo";ce(this.addedVertex)&&(t="apply",this.addedVertex=new wb(this.component));const i=this.component.getLastVertex();if(ce(i))this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{let r=null;i.rightEdge&&(this.originalEdge=i.rightEdge,r=this.originalEdge.rightVertex,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,ce(this.left)&&(this.left=new Xh(this.component,i,this.addedVertex)),this.component.edges.push(this.left),i.rightEdge=this.left,K(this.originalEdge)&&K(r)&&(ce(this.right)&&(this.right=new Xh(this.component,this.addedVertex,r)),this.component.edges.push(this.right),r.leftEdge=this.right),this.component.updateVertexIndex(this.addedVertex,i.index+1)}this.editGeometry.notifyChanges({operation:t,addedVertices:[this.addedVertex]})}undo(){if(ce(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),K(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.leftVertex.rightEdge=null),K(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.rightVertex.leftEdge=null),K(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.leftVertex.rightEdge=this.originalEdge,this.originalEdge.rightVertex.leftEdge=this.originalEdge),K(this.left)?this.component.updateVertexIndex(this.left.leftVertex,this.left.leftVertex.index):this.component.updateVertexIndex(this.addedVertex,0),this.editGeometry.notifyChanges({operation:"undo",removedVertices:[this.addedVertex]})}accumulate(){return!1}}class KN{constructor(t,i,r){this.editGeometry=t,this.vertices=i,this.operation=r,this.undone=!1}apply(){this.vertices.forEach(t=>this.operation.apply(t)),this.editGeometry.components.forEach(t=>t.unnormalizeVertexPositions()),this.editGeometry.notifyChanges({operation:this.undone?"redo":"apply",updatedVertices:this.vertices})}undo(){this.vertices.forEach(t=>this.operation.undo(t)),this.editGeometry.notifyChanges({operation:"undo",updatedVertices:this.vertices}),this.undone=!0}canAccumulate(t){if(this.undone||t.vertices.length!==this.vertices.length)return!1;for(let i=0;i<t.vertices.length;++i)if(t.vertices[i]!==this.vertices[i])return!1;return this.operation.canAccumulate(t.operation)}accumulate(t){return!!(t instanceof KN&&this.canAccumulate(t))&&(this.vertices.forEach(i=>this.operation.accumulate(i,t.operation)),this.operation.accumulateParams(t.operation),this.editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this.editGeometry.notifyChanges({operation:"apply",updatedVertices:this.vertices}),!0)}}var Cc;(function(e){e[e.CUMULATIVE=0]="CUMULATIVE",e[e.REPLACE=1]="REPLACE"})(Cc||(Cc={}));class AVe{constructor(t,i,r=0){this.editGeometry=t,this.vertices=i,this.minNumberOfVertices=r,this.removedVertices=null}apply(){let t="redo";this.removedVertices==null?(this.removedVertices=[],this.vertices.forEach(i=>{const r=this._removeVertex(i);K(r)&&this.removedVertices.push(r)}),t="apply"):this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)}),this.editGeometry.notifyChanges({operation:t,removedVertices:this.vertices})}undo(){this.removedVertices.forEach(t=>{this._undoRemoveVertex(t)}),this.editGeometry.notifyChanges({operation:"undo",addedVertices:this.vertices})}accumulate(){return!1}_removeVertex(t){const i=t.component;if(i.vertices.length<=this.minNumberOfVertices)return null;const r={removedVertex:t,createdEdge:null},s=t.leftEdge,l=t.rightEdge;return i.vertices.splice(i.vertices.indexOf(t),1),s&&(i.edges.splice(i.edges.indexOf(s),1),s.leftVertex.rightEdge=null),l&&(i.edges.splice(i.edges.indexOf(l),1),l.rightVertex.leftEdge=null),t.index===0&&l&&this.vertices.length>0&&i.swapVertices(i.vertices.indexOf(l.rightVertex),0),s&&l&&(r.createdEdge=new Xh(i,s.leftVertex,l.rightVertex),i.edges.push(r.createdEdge)),l&&i.updateVertexIndex(l.rightVertex,l.rightVertex.index-1),r}_undoRemoveVertex(t){const i=t.removedVertex,r=t.removedVertex.component,s=i.leftEdge,l=i.rightEdge;t.createdEdge&&r.edges.splice(r.edges.indexOf(t.createdEdge),1),r.vertices.push(i),s&&(r.edges.push(s),s.leftVertex.rightEdge=s),l&&(r.edges.push(l),l.rightVertex.leftEdge=l),r.updateVertexIndex(i,i.index)}}class OVe{constructor(t,i,r){this.editGeometry=t,this.edge=i,this.t=r,this.createdVertex=null,this.left=null,this.right=null}apply(){let t="redo";const i=this.edge,r=i.component,s=i.leftVertex,l=i.rightVertex;r.edges.splice(r.edges.indexOf(i),1),ce(this.createdVertex)&&(t="apply",this.createdVertex=new wb(i.component)),r.vertices.push(this.createdVertex),this.createdVertex.pos=this.editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this.t,this.editGeometry.coordinateHelper.createVector()),ce(this.left)&&(this.left=new Xh(r,s,this.createdVertex)),this.left.leftVertex.leftEdge?r.edges.push(this.left):r.edges.unshift(this.left),s.rightEdge=this.left,ce(this.right)&&(this.right=new Xh(r,this.createdVertex,l)),r.edges.push(this.right),l.leftEdge=this.right,r.updateVertexIndex(this.createdVertex,s.index+1),this.editGeometry.notifyChanges({operation:t,addedVertices:[this.createdVertex]})}undo(){if(ce(this.createdVertex)||ce(this.left)||ce(this.right))return null;const t=this.edge,i=t.component,r=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,l=r.leftVertex,d=s.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this.left),1),i.edges.splice(i.edges.indexOf(this.right),1),this.edge.leftVertex.leftEdge?i.edges.push(this.edge):i.edges.unshift(this.edge),l.rightEdge=t,d.leftEdge=t,i.updateVertexIndex(l,l.index),this.editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class ZN{constructor(t,i,r){this.editGeometry=t,this.vertex=i,this.pos=r}apply(){const t=ce(this.originalPosition);t&&(this.originalPosition=this.vertex.pos),this._apply(t?"apply":"redo")}undo(){this.vertex.pos=this.originalPosition,this.editGeometry.notifyChanges({operation:"undo",updatedVertices:[this.vertex]})}accumulate(t){return t instanceof ZN&&t.vertex===this.vertex&&(this.pos=t.pos,this._apply("apply"),!0)}_apply(t){this.vertex.pos=this.pos,this.editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this.editGeometry.notifyChanges({operation:t,updatedVertices:[this.vertex]})}}class LVe{constructor(t,i){this.editGeometry=t,this.component=i,this.createdEdge=null}apply(){let t="redo";if(ce(this.createdEdge)){t="apply";const i=this.component.getFirstVertex(),r=this.component.getLastVertex();if(this.component.isClosed()||this.component.vertices.length<3||ce(i)||ce(r))return;this.createdEdge=new Xh(this.component,r,i)}this.createdEdge.leftVertex.rightEdge=this.createdEdge,this.createdEdge.rightVertex.leftEdge=this.createdEdge,this.component.edges.push(this.createdEdge),this.editGeometry.notifyChanges({operation:t})}undo(){ce(this.createdEdge)||(oY(this.component.edges,this.createdEdge),this.createdEdge.leftVertex.rightEdge=null,this.createdEdge.rightVertex.leftEdge=null,this.editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class YN{constructor(t,i,r,s){this.helper=t,this.dx=i,this.dy=r,this.dz=s}_move(t,i,r,s){this.helper.addDelta(t.pos,i,r,s)}apply(t){this._move(t,this.dx,this.dy,this.dz)}undo(t){this._move(t,-this.dx,-this.dy,-this.dz)}canAccumulate(t){return t instanceof YN}accumulate(t,i){this._move(t,i.dx,i.dy,i.dz)}accumulateParams(t){this.dx+=t.dx,this.dy+=t.dy,this.dz+=t.dz}}var Qh;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Qh||(Qh={}));class B${constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&Lg(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*HW);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,HW));t++)this._items.push(this.allocator())}}const HW=1024;function Yle(){return[1,0,0,0,1,0,0,0,1]}function PVe(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function RVe(e,t,i,r,s,l,d,y,v){return[e,t,i,r,s,l,d,y,v]}function Xle(e,t){return new Float64Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:Yle,clone:PVe,fromValues:RVe,createView:Xle},Symbol.toStringTag,{value:"Module"}));function Qle(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function NVe(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function FVe(e,t,i,r,s,l,d,y,v,_,M,k,O,R,D,z){return[e,t,i,r,s,l,d,y,v,_,M,k,O,R,D,z]}function eue(e,t){return new Float64Array(e,t,16)}const DVe=Qle();Object.freeze(Object.defineProperty({__proto__:null,create:Qle,clone:NVe,fromValues:FVe,createView:eue,IDENTITY:DVe},Symbol.toStringTag,{value:"Module"}));function iv(){return[0,0,0,1]}function jVe(e){return[e[0],e[1],e[2],e[3]]}function zVe(e,t,i,r){return[e,t,i,r]}function tue(e,t){return new Float64Array(e,t,4)}const VVe=iv();Object.freeze(Object.defineProperty({__proto__:null,create:iv,clone:jVe,fromValues:zVe,createView:tue,IDENTITY:VVe},Symbol.toStringTag,{value:"Module"}));class Ta{constructor(t,i,r){this.itemByteSize=t,this.itemCreate=i,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this.itemByteSize)}get(){this._itemsPtr===0&&Lg(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const i=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let r=0;r<this._itemsPerBuffer;++r)this._items.push(this.itemCreate(i,r*this.itemByteSize));this._buffers.push(i)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=Ly){return new Ta(16,iae,t)}static createVec3f64(t=Ly){return new Ta(24,DX,t)}static createVec4f64(t=Ly){return new Ta(32,nse,t)}static createMat3f64(t=Ly){return new Ta(72,Xle,t)}static createMat4f64(t=Ly){return new Ta(128,eue,t)}static createQuatf64(t=Ly){return new Ta(32,tue,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const Ly=4*l3.KILOBYTES;Ta.createVec2f64();const Da=Ta.createVec3f64(),UVe=Ta.createVec4f64();Ta.createMat3f64();const BVe=Ta.createMat4f64();Ta.createQuatf64();function GKe(e){return e?{origin:Wb(e.origin),direction:Wb(e.direction)}:{origin:wt(),direction:wt()}}function qKe(e,t){const i=HVe.get();return i.origin=e,i.direction=t,i}function GVe(e,t,i){const r=Ds(e.direction,ts(i,t,e.origin));return Ia(i,e.origin,Nl(i,e.direction,r)),i}function qVe(){return{origin:null,direction:null}}const HVe=new B$(qVe);function bb(e,t){return Ds(e,t)/Pl(e)}function iue(e,t){const i=Ds(e,t)/(Pl(e)*Pl(t));return-uQ(i)}const WVe=Ke.getLogger("esri.geometry.support.sphere");function XN(){return Ov()}function rue(e,t=XN()){return q6(t,e)}function JVe(e,t){return Ru(e[0],e[1],e[2],t)}function KVe(e){return e}function ZVe(e){e[0]=e[1]=e[2]=e[3]=0}function YVe(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e}function G$(e){return e[3]}function XVe(e){return e}function QVe(e,t,i,r){return Ru(e,t,i,r)}function eUe(e,t,i){return e!==i&&xl(i,e),i[3]=e[3]+t,i}function tUe(e,t,i){return WVe.error("sphere.setExtent is not yet supported"),e===i?i:rue(e,i)}function q$(e,t,i){if(ce(t))return!1;const{origin:r,direction:s}=t,l=iUe;l[0]=r[0]-e[0],l[1]=r[1]-e[1],l[2]=r[2]-e[2];const d=s[0]*s[0]+s[1]*s[1]+s[2]*s[2],y=2*(s[0]*l[0]+s[1]*l[1]+s[2]*l[2]),v=y*y-4*d*(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]-e[3]*e[3]);if(v<0)return!1;const _=Math.sqrt(v);let M=(-y-_)/(2*d);const k=(-y+_)/(2*d);return(M<0||k<M&&k>0)&&(M=k),!(M<0)&&(i&&(i[0]=r[0]+s[0]*M,i[1]=r[1]+s[1]*M,i[2]=r[2]+s[2]*M),!0)}const iUe=wt();function rUe(e,t){return q$(e,t,null)}function nUe(e,t,i){if(q$(e,t,i))return i;const r=nue(e,t,Da.get());return Ia(i,t.origin,Nl(Da.get(),t.direction,Jh(t.origin,r)/Pl(t.direction))),i}function nue(e,t,i){const r=Da.get(),s=BVe.get();Ra(r,t.origin,t.direction);const l=G$(e);Ra(i,r,t.origin),Nl(i,i,1/Pl(i)*l);const d=oue(e,t.origin),y=iue(t.origin,i);return tte(s,y+d,r),JX(i,i,s),i}function sUe(e,t,i){return q$(e,t,i)?i:(GVe(t,e,i),sue(e,i,i))}function sue(e,t,i){const r=ts(Da.get(),t,e),s=Nl(Da.get(),r,e[3]/Pl(r));return Ia(i,s,e)}function oUe(e,t){const i=ts(Da.get(),t,e),r=G6(i),s=e[3]*e[3];return Math.sqrt(Math.abs(r-s))}function oue(e,t){const i=ts(Da.get(),t,e),r=Pl(i),s=G$(e),l=s+Math.abs(s-r);return uQ(s/l)}const T8=wt();function aue(e,t,i,r){const s=ts(T8,t,e);switch(i){case Qh.X:{const l=OV(s,T8)[2];return ju(r,-Math.sin(l),Math.cos(l),0)}case Qh.Y:{const l=OV(s,T8),d=l[1],y=l[2],v=Math.sin(d);return ju(r,-v*Math.cos(y),-v*Math.sin(y),Math.cos(d))}case Qh.Z:return Sl(r,s);default:return}}function lue(e,t){const i=ts(xO,t,e);return Pl(i)-e[3]}function aUe(e,t,i,r){const s=lue(e,t),l=aue(e,t,Qh.Z,xO),d=Nl(xO,l,i-s);return Ia(r,t,d)}function lUe(e,t){const i=pP(e,t),r=G$(e);return i<=r*r}const xO=wt(),uUe=XN();Object.freeze(Object.defineProperty({__proto__:null,create:XN,copy:rue,fromCenterAndRadius:JVe,wrap:KVe,clear:ZVe,fromRadius:YVe,getRadius:G$,getCenter:XVe,fromValues:QVe,elevate:eUe,setExtent:tUe,intersectRay:q$,intersectsRay:rUe,intersectRayClosestSilhouette:nUe,closestPointOnSilhouette:nue,closestPoint:sUe,projectPoint:sue,distanceToSilhouette:oUe,angleToSilhouette:oue,axisAt:aue,altitudeAt:lue,setAltitudeAt:aUe,containsPoint:lUe,tmpSphere:uUe},Symbol.toStringTag,{value:"Module"}));function cUe(e,t,i){Math.abs(e[0])>Math.abs(e[1])?ju(t,0,1,0):ju(t,1,0,0),Ra(i,e,t),Sl(t,t),Ra(t,i,e),Sl(i,i)}function l6(e=P2){return[e[0],e[1],e[2],e[3]]}function hUe(e=P2[0],t=P2[1],i=P2[2],r=P2[3]){return uue(e,t,i,r,UVe.get())}function I8(e,t){return uue(t[0],t[1],t[2],t[3],e)}function uue(e,t,i,r,s=l6()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function pUe(e,t,i){const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=-(i[0]*e[0]+i[1]*e[1]+i[2]*e[2]),i}function dUe(e,t,i,r=l6()){const s=i[0]-t[0],l=i[1]-t[1],d=i[2]-t[2],y=e[0]-t[0],v=e[1]-t[1],_=e[2]-t[2],M=l*_-d*v,k=d*y-s*_,O=s*v-l*y,R=M*M+k*k+O*O,D=Math.abs(R-1)>1e-5&&R>1e-12?1/Math.sqrt(R):1;return r[0]=M*D,r[1]=k*D,r[2]=O*D,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}function fUe(e,t,i,r){return yUe(e,t,ts(Da.get(),i,t),mUe,r)}function WW(e,t,i,r){const s=e,l=Da.get(),d=Da.get();cUe(s,l,d);const y=ts(Da.get(),i,t),v=bb(l,y),_=bb(d,y),M=bb(s,y);return ju(r,v,_,M)}function E5(e,t){return Ds(e,t)+e[3]}function yUe(e,t,i,r,s){const l=Ds(e,i);if(l===0)return!1;let d=-(Ds(e,t)+e[3])/l;return r&nf.CLAMP&&(d=Bs(d,0,1)),!(!(r&nf.INFINITE_MIN)&&d<0||!(r&nf.INFINITE_MAX)&&d>1)&&(Ia(s,t,Nl(s,i,d)),!0)}const P2=[0,0,1,0];var nf;(function(e){e[e.NONE=0]="NONE",e[e.CLAMP=1]="CLAMP",e[e.INFINITE_MIN=4]="INFINITE_MIN",e[e.INFINITE_MAX=8]="INFINITE_MAX"})(nf||(nf={}));const mUe=nf.INFINITE_MIN|nf.INFINITE_MAX;nf.INFINITE_MAX;function C8(e,t){return e[0]*t[1]-e[1]*t[0]}function gUe(e,t){const i=e.start,r=e.end,s=t.start,l=t.end,d=kl(wUe,r,i),y=kl(bUe,l,s),v=C8(d,y);if(Math.abs(v)<=vUe)return[];const _=kl(_Ue,i,s),M=C8(y,_)/v,k=C8(d,_)/v;if(M>=0){if(k>=0||t.type===g1.LINE)return[QA(JW,i,d,M)]}else if(e.type===g1.LINE&&(k>=0||t.type===g1.LINE))return[QA(JW,i,d,M)];return[]}var g1;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})(g1||(g1={}));const vUe=1e-6,wUe=wi(),bUe=wi(),_Ue=wi(),JW=wi();class u6{constructor(t,i,r,s=0,l=_b.IMMEDIATE){this.helper=t,this.planeType=i,this.edge=r,this.distance=s,this._plane=l6(),this._offsetPlane=l6(),this._minDistance=-1/0,this._maxDistance=1/0,l===_b.IMMEDIATE&&this._initialize()}get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var l,d,y,v;const t=this._toXYZ(this.edge.leftVertex.pos),i=this._toXYZ((d=(l=this.edge.leftVertex.leftEdge)==null?void 0:l.leftVertex)==null?void 0:d.pos),r=this._toXYZ(this.edge.rightVertex.pos),s=this._toXYZ((v=(y=this.edge.rightVertex.rightEdge)==null?void 0:y.rightVertex)==null?void 0:v.pos);this._edgeDirection=_I(wt(),t,r),this._left=this._computeNeighbor(t,i,this._edgeDirection),this._right=this._computeNeighbor(r,s,this._edgeDirection)}_toXYZ(t){return K(t)?this.helper.toXYZ(t):null}_computeNeighbor(t,i,r){if(ce(i))return{start:t,end:i,direction:Qn(-r[1],r[0],0),isOriginalDirection:!0};const s=_I(wt(),t,i),l=!this._passesBisectingAngleThreshold(s,r);return{start:t,end:i,direction:l?this._bisectVectorsPerpendicular(r,s):s,isOriginalDirection:!l}}_passesBisectingAngleThreshold(t,i){const r=Math.abs(iue(i,t));return r>=KW&&r<=Math.PI-KW}_bisectVectorsPerpendicular(t,i){const r=Ds(t,i)<0?t:vI(wt(),t),s=Math.abs(Ds(r,i));if(!(s<.001||s>.999))return this._bisectDirection(r,i);const l=Ra(wt(),r,[0,0,1]);return Sl(l,l)}_bisectDirection(t,i){const r=Ia(wt(),t,i);return Sl(r,r)}_initializePlane(){const t=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);Ds(t,i)<0&&vI(i,i),pUe(this._left.start,this._bisectDirection(t,i),this._plane)}_computeNormalDirection(t){const i=Ra(wt(),t.direction,this._edgeDirection);Sl(i,i);const r=Ra(wt(),this._edgeDirection,i);return this.planeType===SO.XY&&(r[2]=0),Sl(r,r)}_initializeDistanceConstraints(){K(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint(E5(this._plane,this._left.end)),K(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint(E5(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(t){t<=0&&(this._minDistance=Math.max(this._minDistance,t)),t>=0&&(this._maxDistance=Math.min(this._maxDistance,t))}_updateIntersectDistanceConstraint(t){const i=t,r=this._edgeDirection,s=Ia(wt(),this._left.start,this._left.direction),l=Ia(wt(),this._right.start,this._right.direction),d=this._pointInBasis2D(wi(),i,r,this._left.start),y=this._pointInBasis2D(wi(),i,r,s),v=this._pointInBasis2D(wi(),i,r,this._right.start),_=this._pointInBasis2D(wi(),i,r,l),[M]=gUe({start:y,end:d,type:g1.LINE},{start:_,end:v,type:g1.LINE});if(!M)return;const k=kl(wi(),d,y);e6(k,k);const O=kl(wi(),M,y),R=bN(k,O),D=Ia(wt(),s,Nl(wt(),this._left.direction,-R)),z=E5(t,D);this._updateDistanceConstraint(z)}_pointInBasis2D(t,i,r,s){return t[0]=bb(i,s),t[1]=bb(r,s),t}_offset(t,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),I8(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const r=(l,d,y)=>K(d)&&fUe(this._offsetPlane,l,Ia(wt(),l,d),y),s=wt();(t===this.edge.leftVertex?r(this._left.start,this._left.direction,s):r(this._right.start,this._right.direction,s))&&this.helper.copy(this.helper.fromXYZ(s,void 0,this.helper.getM(t.pos)),t.pos)}signedDistanceToPoint(t){return E5(this.plane,this.helper.toXYZ(this.helper.pointToVector(t)))}apply(t){this._offset(t,this.distance)}undo(t){this._offset(t,0)}canAccumulate(t){return t instanceof u6&&this.edge.leftVertex.index===t.edge.leftVertex.index&&this.edge.rightVertex.index===t.edge.rightVertex.index&&this.edge.component===t.edge.component&&this._maybeEqualsVec3(this._left.direction,t._left.direction)&&this._maybeEqualsVec3(this._right.direction,t._right.direction)&&bI(this._plane,t._plane)}accumulate(t,i){const r=this._plane[3]-i._plane[3]+i.distance;this._offset(t,r)}accumulateParams(t){const i=t.distance-t._plane[3];this.distance=i+this._plane[3]}clone(){const t=new u6(this.helper,this.planeType,this.edge,this.distance,_b.DEFERRED);return I8(t._plane,this._plane),I8(t._offsetPlane,this._offsetPlane),t._maxDistance=this._maxDistance,t._minDistance=this._minDistance,t._left=this._cloneNeighbor(this._left),t._right=this._cloneNeighbor(this._right),t._edgeDirection=xl(wt(),this._edgeDirection),t}_maybeEqualsVec3(t,i){return ce(t)&&ce(i)||K(t)&&K(i)&&bI(t,i)}_cloneNeighbor({start:t,end:i,direction:r,isOriginalDirection:s}){return{start:xl(wt(),t),end:K(i)?xl(wt(),i):null,direction:xl(wt(),r),isOriginalDirection:s}}}const KW=zm(15);var SO,_b;(function(e){e[e.XYZ=0]="XYZ",e[e.XY=1]="XY"})(SO||(SO={})),function(e){e[e.IMMEDIATE=0]="IMMEDIATE",e[e.DEFERRED=1]="DEFERRED"}(_b||(_b={}));class QN{constructor(t,i,r=Cc.CUMULATIVE){this.origin=t,this.angle=i,this.accumulationType=r}_rotate(t,i){eae(t.pos,t.pos,this.origin,i)}apply(t){this._rotate(t,this.angle)}undo(t){this._rotate(t,-this.angle)}canAccumulate(t){return t instanceof QN&&$1(this.origin,t.origin)}accumulate(t,i){const r=i.accumulationType===Cc.REPLACE;this._rotate(t,r?i.angle-this.angle:i.angle)}accumulateParams(t){const i=t.accumulationType===Cc.REPLACE;this.angle=i?t.angle:this.angle+t.angle}}class eF{constructor(t,i,r,s,l=Cc.CUMULATIVE){this.origin=t,this.axis1=i,this.factor1=r,this.factor2=s,this.accumulationType=l,this.axis2=Zh(i[1],-i[0])}_scale(t,i,r){eO(t.pos,t.pos,this.origin,this.axis1,i),eO(t.pos,t.pos,this.origin,this.axis2,r)}apply(t){this._scale(t,this.factor1,this.factor2)}undo(t){this._scale(t,1/this.factor1,1/this.factor2)}canAccumulate(t){return t instanceof eF&&$1(this.origin,t.origin)&&$1(this.axis1,t.axis1)}accumulate(t,i){i.accumulationType===Cc.REPLACE?this._scale(t,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(t,i.factor1,i.factor2)}accumulateParams(t){const i=t.accumulationType===Cc.REPLACE;this.factor1=i?t.factor1:this.factor1*t.factor1,this.factor2=i?t.factor2:this.factor2*t.factor2}}class xUe{constructor(){this.operations=[],this.closed=!1}close(){this.closed=!0}apply(){for(const t of this.operations)t.apply()}undo(){for(let t=this.operations.length-1;t>=0;t--)this.operations[t].undo()}accumulate(t){if(this.closed)return!1;const i=this.operations.length?this.operations[this.operations.length-1]:null;return i&&i.accumulate(t)||(this.operations.push(t),t.apply()),!0}}class c_ extends bs{constructor(t){super(),this.data=t,this.undoStack=[],this.redoStack=[],this.listener=this.data.on("change",i=>{i.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:i.addedVertices,operation:i.operation}),i.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:i.removedVertices,operation:i.operation}),i.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:i.updatedVertices,operation:i.operation})})}destroy(){this.listener.remove()}splitEdge(t,i){return this._apply(new OVe(this.data,t,i))}updateVertices(t,i,r=Ph.ACCUMULATE_STEPS){return this._apply(new KN(this.data,t,i),r)}moveVertices(t,i,r,s,l=Ph.ACCUMULATE_STEPS){return this.updateVertices(t,new YN(this.data.coordinateHelper,i,r,s),l)}scaleVertices(t,i,r,s,l,d=Ph.ACCUMULATE_STEPS,y=Cc.CUMULATIVE){return this.updateVertices(t,new eF(i,r,s,l,y),d)}rotateVertices(t,i,r,s=Ph.ACCUMULATE_STEPS,l=Cc.CUMULATIVE){return this.updateVertices(t,new QN(i,r,l),s)}removeVertices(t){return this._apply(new AVe(this.data,t,this._minNumVerticesPerType))}appendVertex(t){return this.data.components.length===0?null:this._apply(new kVe(this.data,this.data.components[0],t))}setVertexPosition(t,i){return this._apply(new ZN(this.data,t,i))}offsetEdge(t,i,r,s=Ph.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new u6(this.data.coordinateHelper,t,i,r),s)}closeComponent(t){return this.data.components.includes(t)?this._apply(new LVe(this.data,t)):null}canRemoveVertex(){return this.data.components[0].vertices.length>this._minNumVerticesPerType}createUndoGroup(){const t=new xUe;return this._apply(t),{remove:()=>t.close()}}undo(){if(this.undoStack.length>0){const t=this.undoStack.pop();return t.undo(),this.redoStack.push(t),t}return null}redo(){if(this.redoStack.length>0){const t=this.redoStack.pop();return t.apply(),this.undoStack.push(t),t}return null}get canUndo(){return this.undoStack.length>0}get canRedo(){return this.redoStack.length>0}get lastOperation(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(t,i=Ph.ACCUMULATE_STEPS){return i!==Ph.NEW_STEP&&!ce(this.lastOperation)&&this.lastOperation.accumulate(t)||(t.apply(),this.undoStack.push(t),this.redoStack=[]),t}static fromGeometry(t,i){return new c_(Nv.fromGeometry(t,i))}}class c6{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}}let Qm=class extends st{constructor(e){super(e),this.stagedPoint=null,this._abortController=null,this._snap=cv(async(t,i,r,s)=>{const l=await this._frameTask.schedule(()=>i.snap(t,r,s),s);l.valid&&await this._frameTask.schedule(()=>{this.stagedPoint=l.apply(),t!==this._snapMapPoint&&(this.stagedPoint=i.update(this._snapMapPoint,r))},s)})}initialize(){var t,i;const e=this.view.type==="3d"?(i=(t=this.view)==null?void 0:t.resourceController)==null?void 0:i.scheduler:null;this._frameTask=K(e)?e.registerTask(Xt.SNAPPING):w3}destroy(){this._abortController=S1(this._abortController),this._frameTask=po(this._frameTask)}async snap(e,t,i){return this.stagedPoint=t.update(e,i),this._snapMapPoint=e,ce(this._abortController)&&(this._abortController=new AbortController),this._snap(e,t,i,this._abortController.signal)}abort(){this._abortController=S1(this._abortController)}};g([S({constructOnly:!0})],Qm.prototype,"view",void 0),g([S()],Qm.prototype,"stagedPoint",void 0),Qm=g([Q("esri.views.interactive.snapping.SnappingOperation")],Qm);var $O;let io=$O=class extends bs.EventedAccessor{constructor(e){var t;super(e),this._hasZ=null,this._cursorScreenPoint=null,this._activePointerId=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._handles=new ir,this._viewHandlesKey="view-handles",this._undoRedoHandlesKey="undo-redo-handles",this._drawToolHandlesKey="draw-tool",this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=JN(e.hasZ,!1,e.view.spatialReference),this._snappingManager=e.snappingManager,this._editGeometryOperations=new c_(new Nv((t=e.editGeometryType)!=null?t:"polygon",this._coordinateHelper)),this._snappingGraphicsLayer=new a6({id:$O.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0}),this._snappingContext=new c6({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new gVe(this._snappingGraphicsLayer)}),this._activeComponent=new Sg(e.view.spatialReference,_o.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}normalizeCtorArgs(e){const t={...e};return delete t.editGeometryType,t}initialize(){this._snappingOperation=new Qm({view:this.view}),this.view.type==="2d"&&this.view.map.layers.add(this._snappingGraphicsLayer)}destroy(){this._handles.destroy(),this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy(),K(this._snappingManager)&&this._snappingManager.doneSnapping(),this._snappingOperation=Oi(this._snappingOperation),this._editGeometryOperations.destroy()}get _committedVertices(){return this._editGeometryOperations.data.components[0].vertices.map(e=>e.pos)}get vertices(){return K(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return K(this._hasZ)?this._hasZ:this.view.type==="3d"}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}get _stagedVertex(){return this._snappingOperation.stagedPoint}set _stagedVertex(e){this._snappingOperation.stagedPoint=Me(e)}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this.canUndo&&this._editGeometryOperations.undo()}redo(){this.canRedo&&this._editGeometryOperations.redo()}getCoordsFromScreenPoint(e){const t=this.screenToMap(e);return ce(t)?null:t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]}getCoordsAndPointFromScreenPoint(e){const t=this.screenToMap(e);return ce(t)?null:t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}}screenToMap(e){let t=null;if(this.view.type==="3d")if(this.hasZ){const i=hn(this.elevationInfo,SUe);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(e3(e.x,e.y),i,this._getGeometryZValue())}else{const i=hn(this.elevationInfo,$Ue);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(e3(e.x,e.y),i,0),K(t)&&(t.z=void 0)}else t=this.view.toMap(e),K(t)&&(t.z=this.hasZ?this._getGeometryZValue():void 0);return t}_pushCursorVertex(e,t){const i=UN(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=i;const r=this._snappingManager;if(ce(r))return this._stagedVertex=i,void t();M1(this._snappingOperation.snap(i,r,this._snappingContext)).then(()=>{t()})}_popCursorVertex(){this._stagedVertexUnsnapped=null,this._stagedVertex=null}_getGeometryZValue(){return this.defaultZ}_abortSnapping(){this._snappingOperation.abort()}_isDuplicateOfLastVertex(e){const t=this._editGeometryOperations.data.components[0].getLastVertex();if(K(t)&&e[0]===t[0]&&e[1]===t[1])return!0;const{x:i,y:r}=this._coordinateHelper.vectorToDehydratedPoint(e);return!(!K(this._lastVertexUnsnapped)||i!==this._lastVertexUnsnapped.x||r!==this._lastVertexUnsnapped.y)}_shouldHandlePointerEvent(e){return this._isPrimaryPointerAction(e)&&(ce(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=K(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);K(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}_isPrimaryPointerAction(e){return e.pointerType!=="mouse"||e.button===0}};io.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer",g([S({readOnly:!0})],io.prototype,"vertices",null),g([S({type:Boolean,nonNullable:!0})],io.prototype,"interactiveUndoDisabled",void 0),g([S({readOnly:!0})],io.prototype,"history",void 0),g([S({readOnly:!0})],io.prototype,"redoHistory",void 0),g([S()],io.prototype,"snapToScene",void 0),g([S()],io.prototype,"view",void 0),g([S()],io.prototype,"elevationInfo",void 0),g([S({nonNullable:!0})],io.prototype,"defaultZ",void 0),g([S()],io.prototype,"hasZ",null),g([S()],io.prototype,"_snappingOperation",void 0),g([S()],io.prototype,"_stagedVertex",null),io=$O=g([Q("esri.views.draw.DrawAction")],io);const SUe={mode:"absolute-height",offset:0},$Ue={mode:"on-the-ground",offset:0},h_=io;class kc{constructor(t,i,r,s){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class tF{constructor(t,i,r,s){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class cp{constructor(t,i,r,s,l=null){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.mapPoint=l,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=s.length===1?s[0]:null}preventDefault(){this.defaultPrevented=!0}}class hp{constructor(t,i){this.native=t,this.vertices=i,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=i.length===1?i[0]:null}preventDefault(){this.defaultPrevented=!0}}const Ir={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};let h6=class extends h_{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},St.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=ar(e),e.pointerType==="touch"&&this._updateCursor(e.native))},St.TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=ar(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},St.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},St.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},St.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},St.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},St.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},St.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===Ir.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==Ir.complete||i?t!==Ir.undo||this.interactiveUndoDisabled||i?t!==Ir.redo||this.interactiveUndoDisabled||i?t!==Ir.pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},St.TOOL),this.view.on("key-up",e=>{e.key===Ir.pan&&e.stopPropagation()},St.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];K(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new tF(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new kc(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];K(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new kc(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);K(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new cp(this.view,e,this._activeComponent.vertices.length,this.vertices,K(this._stagedVertex)?new ut(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),K(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new hp(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};h6=g([Q("esri.views.draw.MultipointDrawAction")],h6);Object.freeze(Object.defineProperty({__proto__:null,get MultipointDrawAction(){return h6}},Symbol.toStringTag,{value:"Module"}));function MUe(e,t){return{type:Gg(t),value:e,unit:t}}function Yo(e,t){return{type:Gg(t),value:e,unit:t}}function p_(e,t){return{type:Gg(t),value:e,unit:t}}function cue(e,t){return MUe(xi(e.value,e.unit,t),t)}Yo(0,"meters");function EUe(e,t){return ce(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function TUe(e,t){return EUe(!!K(e)&&e.hasZ,t)}function IUe(e){const t=CUe(e);return TUe(e.geometry,t)}function CUe(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function kUe(e,t,i){if(ce(i)||!i.mode)return;const r=e.hasZ?e.z:0,s=K(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return r-s;case"on-the-ground":return 0;case"relative-to-ground":return r-(hn(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+s);case"relative-to-scene":return r-(hn(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+s)}}function iF(e,t,i,r=null){return AUe(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,r)}function AUe(e,t,i,r,s,l,d=null){if(ce(l))return;const y=K(d)?d.mode:"absolute-height";if(y==="on-the-ground")return 0;const{absoluteZ:v}=OUe(t,i,r,s,e,l);return LUe(v,t,i,r,s,e,d,y)}function OUe(e,t,i,r,s,l){const d=K(l.offset)?l.offset:0;switch(l.mode){case"absolute-height":return{absoluteZ:i+d,elevation:0};case"on-the-ground":{const y=hn(s.elevationProvider.getElevation(e,t,0,r,"ground"),0);return{absoluteZ:y,elevation:y}}case"relative-to-ground":{const y=hn(s.elevationProvider.getElevation(e,t,i,r,"ground"),0);return{absoluteZ:i+y+d,elevation:y}}case"relative-to-scene":{const y=hn(s.elevationProvider.getElevation(e,t,i,r,"scene"),0);return{absoluteZ:i+y+d,elevation:y}}}}function LUe(e,t,i,r,s,l,d,y){const v=K(d)&&K(d.offset)?d.offset:0;switch(y){case"absolute-height":return e-v;case"relative-to-ground":return e-(hn(l.elevationProvider.getElevation(t,i,r,s,"ground"),0)+v);case"relative-to-scene":return e-(hn(l.elevationProvider.getElevation(t,i,r,s,"scene"),0)+v)}}const hue=["freehand","hybrid","click"],H$="click";class PUe{constructor({grabbableForEvent:t}){this.events=new bs,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,i){return 0}attach(){}detach(){}}function pue(e,t,i,r){if(r==null||e.hasZ||(r=void 0),e.type==="point")return e.x+=t,e.y+=i,e.hasZ&&r!=null&&(e.z+=r),e;if(e.type==="multipoint"){const d=e.points;for(let y=0;y<d.length;y++)d[y]=ZW(d[y],t,i,r);return e}if(e.type==="extent")return e.xmin+=t,e.xmax+=t,e.ymin+=i,e.ymax+=i,r!=null&&(e.zmin+=r,e.zmax+=r),e;const s=X3e(e),l=e.type==="polyline"?e.paths:e.rings;for(let d=0;d<s.length;d++){const y=s[d];for(let v=0;v<y.length;v++)y[v]=ZW(y[v],t,i,r)}return"paths"in e?e.paths=l:e.rings=l,e}function ZW(e,t,i,r){return RUe(e,e[0]+t,e[1]+i,e[2]!=null&&r!=null?e[2]+r:void 0)}function RUe(e,t,i,r){const s=[t,i];return e.length>2&&s.push(r!=null?r:e[2]),e.length>3&&s.push(e[3]),s}function NUe(e,t){let i=null,r=null;return s=>{if(s.action==="cancel")return void(K(r)&&(r.execute({action:"cancel"}),i=null,r=null));const l={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};s.action==="start"&&ce(i)&&(i=new rv,r=new rv,t(e,i,r,s.pointerType,l)),K(i)&&i.execute(l),s.action==="end"&&K(i)&&(i=null,r=null)}}function c4(e,t){return e.events.on("drag",NUe(e,t))}function FUe(e,t){let i=null;return r=>{if(r.action==="start"&&(i=DUe(e,r.mapStart.spatialReference,t)),ce(i))return null;const s=r.mapEnd.x-r.mapStart.x,l=r.mapEnd.y-r.mapStart.y,d=r.mapEnd.z-r.mapStart.z;return i.move(s,l,d),{...r,translationX:s,translationY:l,translationZ:d}}}function due(e,t){return ce(e)?null:e.spatialReference.equals(t)?e.clone():uo(e,t)}function DUe(e,t,i){const r=e.geometry;if(ce(r))return null;if(r.type==="mesh")return jUe(e,r,t,i);const s=due(r,t),l=r.spatialReference;return ce(s)?null:{move:(d,y,v)=>{const _=pue(s.clone(),d,y,v);_.spatialReference.equals(l)?e.geometry=_:e.geometry=uo(_,l)}}}function jUe(e,t,i,r){if(K(t.transform))return zUe(e,t,t.transform,i);if(!t.spatialReference.equals(i))return null;let s=0,l=0,d=0;return{move:(y,v,_)=>{const M=y-s,k=v-l,O=_-d;if(M||k||O){const R=new ut(t.origin.x+M,t.origin.y+k,t.origin.z+O,t.origin.spatialReference);t.centerAt(R,{geographic:r===_o.Global}),e.notifyGeometryChanged(),s=y,l=v,d=_}}}}function zUe(e,t,i,r){const s=due(i.getOriginPoint(t.spatialReference),r),l=t.spatialReference;return ce(s)?null:{move:(d,y,v)=>{const _=pue(s.clone(),d,y,v);if(_.spatialReference.equals(l))i.origin=Qn(_.x,_.y,_.z);else{const M=uo(_,l);K(M)&&(i.origin=Qn(M.x,M.y,M.z))}e.notifyMeshTransformChanged(),e.notifyGeometryChanged()}}}function VUe(e,t=null,i){let r=null;const s=K(t)&&!e.spatialReference.equals(t)?d=>K(d)?uo(d,t):d:d=>d,l={exclude:[],...i};return d=>{if(d.action==="start"&&(r=s(e.toMap(d.screenStart,l))),ce(r))return null;const y=s(e.toMap(d.screenEnd,l));return K(y)?{...d,mapStart:r,mapEnd:y}:null}}class rv{constructor(){this.execute=()=>{}}next(t,i=new rv){return K(t)&&(this.execute=r=>{const s=t(r);K(s)&&i.execute(s)}),i}}let h4=class extends st{constructor(e){super(e),this.enabled=!1}};g([S({type:Boolean,nonNullable:!0})],h4.prototype,"enabled",void 0),h4=g([Q("esri.views.interactive.sketch.SketchLabelOptions")],h4);const fue=h4;let xb=class extends st{constructor(e){super(e),this.mode="absolute-height"}};g([S({type:String,nonNullable:!0})],xb.prototype,"mode",void 0),xb=g([Q("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],xb);let xa=class extends st{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0}};g([S({type:Boolean,nonNullable:!0})],xa.prototype,"distance",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"elevation",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"size",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"scale",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"rotation",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"orientation",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"totalLength",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"area",void 0),g([S({type:Boolean,nonNullable:!0})],xa.prototype,"radius",void 0),xa=g([Q("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],xa);let M0=class extends st{constructor(e){super(e),this.enabled=!1,this.elevation=new xb,this.visibleElements=new xa,this.visualVariables=null}};g([S({type:Boolean,nonNullable:!0})],M0.prototype,"enabled",void 0),g([S({type:xb,nonNullable:!0})],M0.prototype,"elevation",void 0),g([S({type:xa,nonNullable:!0})],M0.prototype,"visibleElements",void 0),g([S()],M0.prototype,"visualVariables",void 0),M0=g([Q("esri.widgets.Sketch.SketchTooltipOptions")],M0);const yue=M0;class UUe{constructor(){this.next=new rv}createSnapDragEventPipelineStep({predicate:t=()=>!0,cancel:i,snappingManager:r,snappingContext:s,updatingHandles:l}){if(ce(r))return O=>O;let d=null,y=null;const v=()=>{d=S1(d),r.doneSnapping(),K(y)&&y.frameTask.remove(),y=null};i.next(O=>(v(),O)),this.next=new rv;const _=cv(async({frameTask:O,point:R,context:D,event:z,dx:B,dy:V},q)=>{const J=await O.schedule(()=>r.snap(R,D,q),q);if(J.valid){let ne=await O.schedule(()=>J.apply(),q);R!==M&&(ne=r.update(M,D)),Kle(ne,k)||(z.mapEnd.x=ne.x+B,z.mapEnd.y=ne.y+V,this.next.execute(z))}});let M,k;return O=>{if(!t(O))return O;if(O.action==="start"){const R=r.view.type==="3d"?r.view.resourceController.scheduler.registerTask(Xt.SNAPPING):w3;y={context:new c6({editGeometryOperations:s.editGeometryOperations,elevationInfo:s.elevationInfo,pointer:s.pointer,vertexHandle:K(O.info)?O.info.handle:null,excludeFeature:s.excludeFeature,visualizer:s.visualizer}),originalPos:K(O.snapOrigin)?s.coordinateHelper.vectorToDehydratedPoint(O.snapOrigin):O.mapStart,frameTask:R}}if(K(y)){const R=y.context.coordinateHelper.vectorToDehydratedPoint(y.context.coordinateHelper.arrayToVector([y.originalPos.x,y.originalPos.y,y.originalPos.z]));R.x+=O.mapEnd.x-O.mapStart.x,R.y+=O.mapEnd.y-O.mapStart.y;const D=O.mapStart.x-y.originalPos.x,z=O.mapStart.y-y.originalPos.y,B={...O,action:"update"},V=y.context,q=r.update(R,y.context);if(k=q,O.mapEnd.x=q.x+D,O.mapEnd.y=q.y+z,M=R,O.action!=="end"){const J=y.frameTask;K(d)||(d=new AbortController),l.addPromise(M1(_({frameTask:J,event:B,context:V,point:R,dx:D,dy:z},d.signal)))}}return O.action==="end"&&v(),O}}}let $g=class extends st{constructor(e){super(e)}};g([S()],$g.prototype,"tooltipOptions",void 0),$g=g([Q("esri.views.interactive.tooltip.SketchTooltipInfo")],$g);let R2=class extends $g{constructor(e){super(e),this.type="draw-point"}};g([S()],R2.prototype,"type",void 0),g([S()],R2.prototype,"elevation",void 0),R2=g([Q("esri.views.interactive.tooltip.DrawPointTooltipInfo")],R2);let bm=class extends $g{constructor(e){super(e),this.type="draw-polyline"}};g([S()],bm.prototype,"type",void 0),g([S()],bm.prototype,"elevation",void 0),g([S()],bm.prototype,"totalLength",void 0),bm=g([Q("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],bm);let _m=class extends $g{constructor(e){super(e),this.type="draw-polygon"}};g([S()],_m.prototype,"type",void 0),g([S()],_m.prototype,"elevation",void 0),g([S()],_m.prototype,"area",void 0),_m=g([Q("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],_m);const W$="esri-tooltip",kr=`${W$}-content`;function rF(e,t,i,r=2,s="abbr"){return wf(e,cue(t,i).value,i,r,s)}function mue(e,t,i,r=2,s="abbr"){return q3(e,cue(t,i).value,i,r,s)}function BUe(e,t,i=2,r="abbr"){return hie(e,t.value,t.unit,i,r)}function GUe(e,t,i=2,r="abbr"){return y$e(e,t.value,t.unit,i,r)}function qUe(e,t,i=2,r="abbr"){return m$e(e,t.value,t.unit,i,r)}function HUe(e,t,i=2,r="abbr"){return g$e(e,t.value,t.unit,i,r)}function WUe(e,t,i=2,r="abbr"){return _$e(e,t.value,t.unit,i,r)}function JUe(e,t,i=2,r="abbr"){return pie(e,t.value,t.unit,i,r)}function KUe(e,t,i=2,r="abbr"){return v$e(e,t.value,t.unit,i,r)}function ZUe(e,t,i=2,r="abbr"){return w$e(e,t.value,t.unit,i,r)}function YUe(e,t,i=2,r="abbr"){return b$e(e,t.value,t.unit,i,r)}function XUe(e,t,i=2,r="abbr"){return x$e(e,t.value,t.unit,i,r)}function gue(e,t,i){return S$e(e.value,e.unit,e.rotationType,t,i)}function QUe(e,t,i){return T$e(e.value,e.unit,e.rotationType,t,i)}function YW(e,t,i,r,s="abbr"){switch(r=hn(r,2),i){case"imperial":return JUe(e,t,r,s);case"metric":return BUe(e,t,r,s);default:return rF(e,t,i,r,s)}}function eBe(e,t,i,r=2,s="abbr"){switch(i){case"imperial":return KUe(e,t,r,s);case"metric":return GUe(e,t,r,s);default:return mue(e,t,i,r,s)}}function tBe(e,t,i,r=2,s="abbr"){switch(i){case"imperial":return ZUe(e,t,r,s);case"metric":return qUe(e,t,r,s);default:return rF(e,t,i,r,s)}}function iBe(e,t,i,r=2,s="abbr"){switch(i){case"imperial":return YUe(e,t,r,s);case"metric":return HUe(e,t,r,s);default:return mue(e,t,i,r,s)}}function rBe(e,t,i,r=2,s="abbr"){switch(i){case"imperial":return XUe(e,t,r,s);case"metric":return WUe(e,t,r,s);default:return rF(e,t,i,r,s)}}let zn=class extends rr{constructor(){super(...arguments),this._messagesUnits=null,this._messagesTooltip=null}get _units(){const e=Zee(this.tooltip.view);return{length:e,verticalLength:e,area:e}}_formatScale(e){return fs(e,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(e){return fs(e,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(e,t,i){return YW(this._messagesUnits,e,hn(t,this._units.length),i)}_formatRelativeLength(e){return eBe(this._messagesUnits,e,this._units.length)}_formatVerticalLength(e){return tBe(this._messagesUnits,e,this._units.verticalLength)}_formatRelativeVerticalLength(e){return iBe(this._messagesUnits,e,this._units.verticalLength)}_formatTotalLength(e){return YW(this._messagesUnits,e,this._units.length)}_formatArea(e){return rBe(this._messagesUnits,e,this._units.area)}_formatPercentage(e){return fs(e.value,{style:"percent"})}};g([S()],zn.prototype,"info",void 0),g([S()],zn.prototype,"tooltip",void 0),g([S()],zn.prototype,"_units",null),g([Gi("esri/core/t9n/Units"),S()],zn.prototype,"_messagesUnits",void 0),g([Gi("esri/views/interactive/tooltip/t9n/Tooltip"),S()],zn.prototype,"_messagesTooltip",void 0),zn=g([Q("esri.views.interactive.tooltip.content.TooltipContent")],zn);const k8=`${W$}-field`,A8={base:k8,title:`${k8}__title`,value:`${k8}__value`};let wr=class extends rr{render(){return Z("div",{class:A8.base},Z("div",{class:A8.title},this.title),Z("div",{class:A8.value},this.value))}};g([S()],wr.prototype,"title",void 0),g([S()],wr.prototype,"value",void 0),wr=g([Q("esri.views.interactive.tooltip.support.TooltipField")],wr);const nBe={base:`${kr} ${`${kr}--draw-point`}`};let MO=class extends zn{render(){var i;const{elevation:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return Z("div",{class:nBe.base},Z(wr,{title:t==null?void 0:t.elevation,value:this._formatVerticalLength(e)}))}};MO=g([Q("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],MO);const sBe={base:`${kr} ${`${kr}--draw-polygon`}`};let EO=class extends zn{render(){var r;const{area:e,elevation:t}=this.info,i=(r=this._messagesTooltip)==null?void 0:r.sketch;return Z("div",{class:sBe.base},Z(wr,{title:i==null?void 0:i.elevation,value:this._formatVerticalLength(t)}),Z(wr,{title:i==null?void 0:i.area,value:this._formatArea(e)}))}};EO=g([Q("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],EO);const oBe={base:`${kr} ${`${kr}--draw-polyline`}`};let TO=class extends zn{render(){var r;const{elevation:e,totalLength:t}=this.info,i=(r=this._messagesTooltip)==null?void 0:r.sketch;return Z("div",{class:oBe.base},Z(wr,{title:i==null?void 0:i.elevation,value:this._formatVerticalLength(e)}),Z(wr,{title:i==null?void 0:i.totalLength,value:this._formatLength(t)}))}};TO=g([Q("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],TO);const aBe={base:`${kr} ${`${kr}--extent-rotate`}`};let IO=class extends zn{render(){var i;const{angle:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return Z("div",{class:aBe.base},Z(wr,{title:t==null?void 0:t.rotation,value:this._formatRelativeOrientation(e)}))}};IO=g([Q("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],IO);const lBe={base:`${W$}-value-by-value`};let V0=class extends rr{constructor(){super(...arguments),this.divider="\xD7"}render(){return Z("div",{class:lBe.base},Z("span",null,this.left),Z("span",null,this.divider),Z("span",null,this.right))}};g([S()],V0.prototype,"left",void 0),g([S()],V0.prototype,"divider",void 0),g([S()],V0.prototype,"right",void 0),V0=g([Q("esri.views.interactive.tooltip.support.ValueByValue")],V0);const uBe={base:`${kr} ${`${kr}--extent-scale`}`};let CO=class extends zn{render(){var l;const{xScale:e,yScale:t,xSize:i,ySize:r}=this.info,s=(l=this._messagesTooltip)==null?void 0:l.sketch;return Z("div",{class:uBe.base},Z(wr,{title:s==null?void 0:s.size,value:Z(V0,{left:this._formatLength(i),right:this._formatLength(r)})}),Z(wr,{title:s==null?void 0:s.scale,value:Z(V0,{left:this._formatScale(e),right:this._formatScale(t)})}))}};CO=g([Q("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],CO);const cBe={base:`${kr} ${`${kr}--reshape-edge-offset`}`};let kO=class extends zn{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return Z("div",{class:cBe.base},Z(wr,{title:t==null?void 0:t.distance,value:this._formatRelativeLength(e)}))}};kO=g([Q("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],kO);const hBe={base:`${kr} ${`${kr}--reshape-move-graphic`}`};let AO=class extends zn{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return Z("div",{class:hBe.base},Z(wr,{title:t==null?void 0:t.distance,value:this._formatLength(e)}))}};AO=g([Q("esri.views.interactive.tooltip.content.TooltipContentReshapeMoveGraphic")],AO);const pBe={base:`${kr} ${`${kr}--transform-absolute`}`};let OO=class extends zn{render(){var _;const{orientation:e,orientationEnabled:t,orientationPrecision:i,rotationType:r,size:s,sizeEnabled:l,sizeUnit:d,sizePrecision:y}=this.info,v=(_=this._messagesTooltip)==null?void 0:_.sketch;return Z("div",{class:pBe.base},t&&Z(wr,{title:v==null?void 0:v.orientation,value:gue(e,r,i)}),l&&Z(wr,{title:v==null?void 0:v.size,value:this._formatLength(s,d,y)}))}};OO=g([Q("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],OO);const dBe={base:`${kr} ${`${kr}--transform-rotate`}`};let LO=class extends zn{render(){var d;const{rotation:e,rotationPrecision:t,orientation:i,orientationPrecision:r,rotationType:s}=this.info,l=(d=this._messagesTooltip)==null?void 0:d.sketch;return Z("div",{class:dBe.base},Z(wr,{title:l==null?void 0:l.rotation,value:QUe(e,s,t)}),Z(wr,{title:l==null?void 0:l.orientation,value:gue(i,s,r)}))}};LO=g([Q("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],LO);const fBe={base:`${kr} ${`${kr}--transform-scale`}`};let PO=class extends zn{render(){var l;const{scale:e,size:t,sizePrecision:i,sizeUnit:r}=this.info,s=(l=this._messagesTooltip)==null?void 0:l.sketch;return Z("div",{class:fBe.base},Z(wr,{title:s==null?void 0:s.scale,value:this._formatPercentage(e)}),Z(wr,{title:s==null?void 0:s.size,value:this._formatLength(t,r,i)}))}};PO=g([Q("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],PO);const yBe={base:`${kr} ${`${kr}--translate-vertex`}`};let RO=class extends zn{render(){var l;const{area:e,distance:t,elevation:i,totalLength:r}=this.info,s=(l=this._messagesTooltip)==null?void 0:l.sketch;return Z("div",{class:yBe.base},Z(wr,{title:s==null?void 0:s.distance,value:this._formatLength(t)}),K(i)&&Z(wr,{title:s==null?void 0:s.elevation,value:this._formatVerticalLength(i)}),K(e)&&Z(wr,{title:s==null?void 0:s.area,value:this._formatArea(e)}),K(r)&&Z(wr,{title:s==null?void 0:s.totalLength,value:this._formatLength(r)}))}};RO=g([Q("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],RO);const mBe={base:`${kr} ${`${kr}--extent-move-z`}`};let NO=class extends zn{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return Z("div",{class:mBe.base},Z(wr,{title:t==null?void 0:t.distance,value:this._formatRelativeVerticalLength(e)}))}};NO=g([Q("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],NO);function gBe(e,t){if(ce(t))return null;const i=document.createElement("div");switch(t.type){case"draw-point":return new MO({tooltip:e,info:t,container:i});case"draw-polygon":return new EO({tooltip:e,info:t,container:i});case"draw-polyline":return new TO({tooltip:e,info:t,container:i});case"extent-rotate":return new IO({tooltip:e,info:t,container:i});case"extent-scale":return new CO({tooltip:e,info:t,container:i});case"reshape-edge-offset":return new kO({tooltip:e,info:t,container:i});case"transform-absolute":return new OO({tooltip:e,info:t,container:i});case"transform-rotate":return new LO({tooltip:e,info:t,container:i});case"transform-scale":return new PO({tooltip:e,info:t,container:i});case"translate-graphic":return new AO({tooltip:e,info:t,container:i});case"translate-vertex":return new RO({tooltip:e,info:t,container:i});case"translate-z":return new NO({tooltip:e,info:t,container:i})}}const vBe={base:`${W$}`};let E0=class extends st{constructor(e){super(e),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(vBe.base),t})(),this._contentWidget=null}initialize(){const e=this._contentContainer;this.own([Pe(()=>{var t;return(t=this.view.overlay)==null?void 0:t.surface},t=>{e.remove(),Uo(t,i=>i.appendChild(e))},vl),Pe(()=>this.info,(t,i)=>{K(this._contentWidget)&&K(t)&&K(i)&&t.type===i.type?this._contentWidget.info=t:(this._contentWidget=Oi(this._contentWidget),Uo(gBe(this,t),r=>{this._contentWidget=r,e.appendChild(r.container)}))},vl),Pe(()=>{var t;return{container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:(t=this.view.inputManager)==null?void 0:t.latestPointerLocation}},wBe,vl)])}destroy(){this._contentWidget=Oi(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get test(){return{contentContainer:this._contentContainer}}};function wBe({container:e,contentWidget:t,screenPoint:i}){const{style:r}=e;if(K(i)&&K(t)){r.display="block";const s=$l(e),l=`translate(${Math.round(i.x)+XW[0]*(s?-1:1)}px, ${Math.round(i.y)+XW[1]}px)`;r.transform=s?`translate(-100%, 0) ${l}`:l}else r.display="none"}g([S({nonNullable:!0})],E0.prototype,"view",void 0),g([S()],E0.prototype,"info",void 0),g([S()],E0.prototype,"_contentContainer",void 0),g([S()],E0.prototype,"_contentWidget",void 0),E0=g([Q("esri.views.interactive.tooltip.Tooltip")],E0);const XW=[20,20];var QW,eJ,tJ,vue={exports:{}};QW=vue,eJ=function(){function e(he,pe,me){me=me||2;var we,Ee,Re,qe,ft,jt,bi,tn=pe&&pe.length,Ar=tn?pe[0]*me:he.length,Ki=t(he,0,Ar,me,!0),gi=[];if(!Ki||Ki.next===Ki.prev)return gi;if(tn&&(Ki=v(he,pe,Ki,me)),he.length>80*me){we=Re=he[0],Ee=qe=he[1];for(var ti=me;ti<Ar;ti+=me)(ft=he[ti])<we&&(we=ft),(jt=he[ti+1])<Ee&&(Ee=jt),ft>Re&&(Re=ft),jt>qe&&(qe=jt);bi=(bi=Math.max(Re-we,qe-Ee))!==0?1/bi:0}return r(Ki,gi,me,we,Ee,bi),gi}function t(he,pe,me,we,Ee){var Re,qe;if(Ee===pi(he,pe,me,we)>0)for(Re=pe;Re<me;Re+=we)qe=lt(Re,he[Re],he[Re+1],qe);else for(Re=me-we;Re>=pe;Re-=we)qe=lt(Re,he[Re],he[Re+1],qe);if(qe&&re(qe,qe.next)){var ft=qe.next;et(qe),qe=ft}return qe}function i(he,pe){if(!he)return he;pe||(pe=he);var me,we=he;do if(me=!1,we.steiner||!re(we,we.next)&&ne(we.prev,we,we.next)!==0)we=we.next;else{var Ee=we.prev;if(et(we),(we=pe=Ee)===we.next)break;me=!0}while(me||we!==pe);return pe}function r(he,pe,me,we,Ee,Re,qe){if(he){!qe&&Re&&D(he,we,Ee,Re);for(var ft,jt,bi=he;he.prev!==he.next;)if(ft=he.prev,jt=he.next,Re?l(he,we,Ee,Re):s(he))pe.push(ft.i/me),pe.push(he.i/me),pe.push(jt.i/me),et(he),he=jt.next,bi=jt.next;else if((he=jt)===bi){qe?qe===1?r(he=d(i(he),pe,me),pe,me,we,Ee,Re,2):qe===2&&y(he,pe,me,we,Ee,Re):r(i(he),pe,me,we,Ee,Re,1);break}}}function s(he){var pe=he.prev,me=he,we=he.next;if(ne(pe,me,we)>=0)return!1;for(var Ee=he.next.next;Ee!==he.prev;){if(q(pe.x,pe.y,me.x,me.y,we.x,we.y,Ee.x,Ee.y)&&ne(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function l(he,pe,me,we){var Ee=he.prev,Re=he,qe=he.next;if(ne(Ee,Re,qe)>=0)return!1;for(var ft=Ee.x<Re.x?Ee.x<qe.x?Ee.x:qe.x:Re.x<qe.x?Re.x:qe.x,jt=Ee.y<Re.y?Ee.y<qe.y?Ee.y:qe.y:Re.y<qe.y?Re.y:qe.y,bi=Ee.x>Re.x?Ee.x>qe.x?Ee.x:qe.x:Re.x>qe.x?Re.x:qe.x,tn=Ee.y>Re.y?Ee.y>qe.y?Ee.y:qe.y:Re.y>qe.y?Re.y:qe.y,Ar=B(ft,jt,pe,me,we),Ki=B(bi,tn,pe,me,we),gi=he.prevZ,ti=he.nextZ;gi&&gi.z>=Ar&&ti&&ti.z<=Ki;){if(gi!==he.prev&&gi!==he.next&&q(Ee.x,Ee.y,Re.x,Re.y,qe.x,qe.y,gi.x,gi.y)&&ne(gi.prev,gi,gi.next)>=0||(gi=gi.prevZ,ti!==he.prev&&ti!==he.next&&q(Ee.x,Ee.y,Re.x,Re.y,qe.x,qe.y,ti.x,ti.y)&&ne(ti.prev,ti,ti.next)>=0))return!1;ti=ti.nextZ}for(;gi&&gi.z>=Ar;){if(gi!==he.prev&&gi!==he.next&&q(Ee.x,Ee.y,Re.x,Re.y,qe.x,qe.y,gi.x,gi.y)&&ne(gi.prev,gi,gi.next)>=0)return!1;gi=gi.prevZ}for(;ti&&ti.z<=Ki;){if(ti!==he.prev&&ti!==he.next&&q(Ee.x,Ee.y,Re.x,Re.y,qe.x,qe.y,ti.x,ti.y)&&ne(ti.prev,ti,ti.next)>=0)return!1;ti=ti.nextZ}return!0}function d(he,pe,me){var we=he;do{var Ee=we.prev,Re=we.next.next;!re(Ee,Re)&&ue(Ee,we,we.next,Re)&&Ce(Ee,Re)&&Ce(Re,Ee)&&(pe.push(Ee.i/me),pe.push(we.i/me),pe.push(Re.i/me),et(we),et(we.next),we=he=Re),we=we.next}while(we!==he);return i(we)}function y(he,pe,me,we,Ee,Re){var qe=he;do{for(var ft=qe.next.next;ft!==qe.prev;){if(qe.i!==ft.i&&J(qe,ft)){var jt=Ze(qe,ft);return qe=i(qe,qe.next),jt=i(jt,jt.next),r(qe,pe,me,we,Ee,Re),void r(jt,pe,me,we,Ee,Re)}ft=ft.next}qe=qe.next}while(qe!==he)}function v(he,pe,me,we){var Ee,Re,qe,ft=[];for(Ee=0,Re=pe.length;Ee<Re;Ee++)(qe=t(he,pe[Ee]*we,Ee<Re-1?pe[Ee+1]*we:he.length,we,!1))===qe.next&&(qe.steiner=!0),ft.push(V(qe));for(ft.sort(_),Ee=0;Ee<ft.length;Ee++)me=i(me=k(ft[Ee],me),me.next);return me}function _(he,pe){return he.x-pe.x}function M(he){if(he.next.prev===he)return he;let pe=he;for(;;){const me=pe.next;if(me.prev===pe||me===pe||me===he)break;pe=me}return pe}function k(he,pe){var me=O(he,pe);if(!me)return pe;var we=Ze(me,he),Ee=i(me,me.next);let Re=M(we);return i(Re,Re.next),Ee=M(Ee),M(pe===me?Ee:pe)}function O(he,pe){var me,we=pe,Ee=he.x,Re=he.y,qe=-1/0;do{if(Re<=we.y&&Re>=we.next.y&&we.next.y!==we.y){var ft=we.x+(Re-we.y)*(we.next.x-we.x)/(we.next.y-we.y);if(ft<=Ee&&ft>qe){if(qe=ft,ft===Ee){if(Re===we.y)return we;if(Re===we.next.y)return we.next}me=we.x<we.next.x?we:we.next}}we=we.next}while(we!==pe);if(!me)return null;if(Ee===qe)return me;var jt,bi=me,tn=me.x,Ar=me.y,Ki=1/0;we=me;do Ee>=we.x&&we.x>=tn&&Ee!==we.x&&q(Re<Ar?Ee:qe,Re,tn,Ar,Re<Ar?qe:Ee,Re,we.x,we.y)&&(jt=Math.abs(Re-we.y)/(Ee-we.x),Ce(we,he)&&(jt<Ki||jt===Ki&&(we.x>me.x||we.x===me.x&&R(me,we)))&&(me=we,Ki=jt)),we=we.next;while(we!==bi);return me}function R(he,pe){return ne(he.prev,he,pe.prev)<0&&ne(pe.next,he,he.next)<0}function D(he,pe,me,we){var Ee=he;do Ee.z===null&&(Ee.z=B(Ee.x,Ee.y,pe,me,we)),Ee.prevZ=Ee.prev,Ee.nextZ=Ee.next,Ee=Ee.next;while(Ee!==he);Ee.prevZ.nextZ=null,Ee.prevZ=null,z(Ee)}function z(he){var pe,me,we,Ee,Re,qe,ft,jt,bi=1;do{for(me=he,he=null,Re=null,qe=0;me;){for(qe++,we=me,ft=0,pe=0;pe<bi&&(ft++,we=we.nextZ);pe++);for(jt=bi;ft>0||jt>0&&we;)ft!==0&&(jt===0||!we||me.z<=we.z)?(Ee=me,me=me.nextZ,ft--):(Ee=we,we=we.nextZ,jt--),Re?Re.nextZ=Ee:he=Ee,Ee.prevZ=Re,Re=Ee;me=we}Re.nextZ=null,bi*=2}while(qe>1);return he}function B(he,pe,me,we,Ee){return(he=1431655765&((he=858993459&((he=252645135&((he=16711935&((he=32767*(he-me)*Ee)|he<<8))|he<<4))|he<<2))|he<<1))|(pe=1431655765&((pe=858993459&((pe=252645135&((pe=16711935&((pe=32767*(pe-we)*Ee)|pe<<8))|pe<<4))|pe<<2))|pe<<1))<<1}function V(he){var pe=he,me=he;do(pe.x<me.x||pe.x===me.x&&pe.y<me.y)&&(me=pe),pe=pe.next;while(pe!==he);return me}function q(he,pe,me,we,Ee,Re,qe,ft){return(Ee-qe)*(pe-ft)-(he-qe)*(Re-ft)>=0&&(he-qe)*(we-ft)-(me-qe)*(pe-ft)>=0&&(me-qe)*(Re-ft)-(Ee-qe)*(we-ft)>=0}function J(he,pe){return he.next.i!==pe.i&&he.prev.i!==pe.i&&!Ne(he,pe)&&(Ce(he,pe)&&Ce(pe,he)&&Ge(he,pe)&&(ne(he.prev,he,pe.prev)||ne(he,pe.prev,pe))||re(he,pe)&&ne(he.prev,he,he.next)>0&&ne(pe.prev,pe,pe.next)>0)}function ne(he,pe,me){return(pe.y-he.y)*(me.x-pe.x)-(pe.x-he.x)*(me.y-pe.y)}function re(he,pe){return he.x===pe.x&&he.y===pe.y}function ue(he,pe,me,we){var Ee=xe(ne(he,pe,me)),Re=xe(ne(he,pe,we)),qe=xe(ne(me,we,he)),ft=xe(ne(me,we,pe));return Ee!==Re&&qe!==ft||!(Ee!==0||!_e(he,me,pe))||!(Re!==0||!_e(he,we,pe))||!(qe!==0||!_e(me,he,we))||!(ft!==0||!_e(me,pe,we))}function _e(he,pe,me){return pe.x<=Math.max(he.x,me.x)&&pe.x>=Math.min(he.x,me.x)&&pe.y<=Math.max(he.y,me.y)&&pe.y>=Math.min(he.y,me.y)}function xe(he){return he>0?1:he<0?-1:0}function Ne(he,pe){var me=he;do{if(me.i!==he.i&&me.next.i!==he.i&&me.i!==pe.i&&me.next.i!==pe.i&&ue(me,me.next,he,pe))return!0;me=me.next}while(me!==he);return!1}function Ce(he,pe){return ne(he.prev,he,he.next)<0?ne(he,pe,he.next)>=0&&ne(he,he.prev,pe)>=0:ne(he,pe,he.prev)<0||ne(he,he.next,pe)<0}function Ge(he,pe){var me=he,we=!1,Ee=(he.x+pe.x)/2,Re=(he.y+pe.y)/2;do me.y>Re!=me.next.y>Re&&me.next.y!==me.y&&Ee<(me.next.x-me.x)*(Re-me.y)/(me.next.y-me.y)+me.x&&(we=!we),me=me.next;while(me!==he);return we}function Ze(he,pe){var me=new zt(he.i,he.x,he.y),we=new zt(pe.i,pe.x,pe.y),Ee=he.next,Re=pe.prev;return he.next=pe,pe.prev=he,me.next=Ee,Ee.prev=me,we.next=me,me.prev=we,Re.next=we,we.prev=Re,we}function lt(he,pe,me,we){var Ee=new zt(he,pe,me);return we?(Ee.next=we.next,Ee.prev=we,we.next.prev=Ee,we.next=Ee):(Ee.prev=Ee,Ee.next=Ee),Ee}function et(he){he.next.prev=he.prev,he.prev.next=he.next,he.prevZ&&(he.prevZ.nextZ=he.nextZ),he.nextZ&&(he.nextZ.prevZ=he.prevZ)}function zt(he,pe,me){this.i=he,this.x=pe,this.y=me,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pi(he,pe,me,we){for(var Ee=0,Re=pe,qe=me-we;Re<me;Re+=we)Ee+=(he[qe]-he[Re])*(he[Re+1]+he[qe+1]),qe=Re;return Ee}return e.deviation=function(he,pe,me,we){var Ee=pe&&pe.length,Re=Ee?pe[0]*me:he.length,qe=Math.abs(pi(he,0,Re,me));if(Ee)for(var ft=0,jt=pe.length;ft<jt;ft++){var bi=pe[ft]*me,tn=ft<jt-1?pe[ft+1]*me:he.length;qe-=Math.abs(pi(he,bi,tn,me))}var Ar=0;for(ft=0;ft<we.length;ft+=3){var Ki=we[ft]*me,gi=we[ft+1]*me,ti=we[ft+2]*me;Ar+=Math.abs((he[Ki]-he[ti])*(he[gi+1]-he[Ki+1])-(he[Ki]-he[gi])*(he[ti+1]-he[Ki+1]))}return qe===0&&Ar===0?0:Math.abs((Ar-qe)/qe)},e.flatten=function(he){for(var pe=he[0][0].length,me={vertices:[],holes:[],dimensions:pe},we=0,Ee=0;Ee<he.length;Ee++){for(var Re=0;Re<he[Ee].length;Re++)for(var qe=0;qe<pe;qe++)me.vertices.push(he[Ee][Re][qe]);Ee>0&&(we+=he[Ee-1].length,me.holes.push(we))}return me},e},(tJ=eJ())!==void 0&&(QW.exports=tJ);const bBe=vue.exports;function wue(e){return e?{origin:Wb(e.origin),vector:Wb(e.vector)}:{origin:wt(),vector:wt()}}function HKe(e,t,i=wue()){return xl(i.origin,e),ts(i.vector,t,e),i}function WKe(e,t,i){return _Be(e,t,0,1,i)}function _Be(e,t,i,r,s){const{vector:l,origin:d}=e,y=ts(Da.get(),t,d),v=Ds(l,y)/G6(l);return Nl(s,l,Bs(v,i,r)),Ia(s,s,e.origin)}new B$(()=>({origin:null,vector:null}));function xBe(e,t,i){const r=t[0]-e[0],s=t[1]-e[1],l=i[0]-e[0],d=i[1]-e[1];return .5*Math.abs(r*d-s*l)}function JKe(e,t,i){return ts(O8,t,e),ts(iJ,i,e),Pl(Ra(O8,O8,iJ))/2}new B$(wue);new B$(()=>({p0:null,p1:null,p2:null}));const O8=wt(),iJ=wt();function nF(e){const t=J5e(e),i=t===HP?Dee:t;return zu(e,i)?i:e}function SBe(e,t=J$()){return bue(e,t)}function $Be(e,t=J$()){return bue(e,t,!1)}function bue(e,t,i=e.hasZ){const r=nF(e.spatialReference),s=u9e(r);if(ce(s))return null;const l=(y,v)=>!(v.length<2)&&(ju(y,v[0],v[1],i&&v[2]||0),!0);let d=0;for(const y of e.rings){if(y.length<3)continue;const{positionsWorldCoords:v}=t;for(;v.length<y.length;)v.push(wt());const _=MBe;for(let R=0;R<3;R++)if(!l(_,y[R])||!eb(_,e.spatialReference,v[R],r))return null;if(e9(v[0],v[1])||e9(v[0],v[2])||e9(v[1],v[2]))continue;const M=dUe(v[0],v[1],v[2],hUe()),k=xl(Da.get(),v[0]);for(let R=0;R<3;R++)WW(M,k,v[R],v[R]);for(let R=3;R<y.length;R++){if(!l(_,y[R]))return null;eb(_,e.spatialReference,v[R],r),WW(M,k,v[R],v[R])}const O=EBe(v);for(let R=0;R<O.length;R+=3)d+=xBe(v[O[R]],v[O[R+1]],v[O[R+2]])}return p_(d,s)}const MBe=wt();function J$(){return{positionsWorldCoords:[]}}function EBe(e){return bBe(TBe(e),[],2)}function TBe(e){const t=new Float64Array(2*e.length);for(let i=0;i<e.length;++i){const r=e[i],s=2*i;t[s+0]=r[0],t[s+1]=r[1]}return t}function sF(e,t,i,r,...s){return z6(e)&&ey(e)?t.apply(void 0,s):af(e)?i.apply(void 0,s):r.apply(void 0,s)}function IBe(e){const{spatialReference:t}=e;return sF(t,CBe,kBe,ABe,e)}function CBe(e){return p_(Math.abs(Jle([e],"square-meters")[0]),"square-meters")}function kBe(e){try{return p_(Math.abs(Hle(e,"square-meters")),"square-meters")}catch{return null}}function ABe(e){const t=[];return m4e(e,t)?p_(Math.abs(Jle([{type:"polygon",rings:t,spatialReference:Ct.WGS84}],"square-meters")[0]),"square-meters"):null}function OBe(e,t,i=J$()){if(t){const r=IBe(e);return K(r)?r:$Be(e,i)}return SBe(e,i)}function LBe(e){return _ue(e,"direct")}function PBe(e){return _ue(e,"horizontal")}function _ue(e,t){const{hasZ:i,spatialReference:r}=e,s=nF(r);let l=0;const d=Wee(s);if(ce(d))return null;const y=t==="direct"?xue:Sue;for(const v of e.paths){if(v.length<2)continue;const _=v.length-1;for(let M=0;M<_;++M){const k=v[M];T5[0]=k[0],T5[1]=k[1],T5[2]=i?k[2]:0;const O=v[M+1];I5[0]=O[0],I5[1]=O[1],I5[2]=i?O[2]:0;const R=y(T5,I5,r);if(ce(R))return null;l+=R.value}}return Yo(l,d)}function xue(e,t,i){const r=$ue(e,t,i,"direct");return K(r)?Yo(r.direct,r.unit):null}function Sue(e,t,i){const r=$ue(e,t,i,"horizontal");return K(r)?Yo(r.horizontal,r.unit):null}function $ue(e,t,i,r){const s=nF(i),l=Wee(s);if(ce(l))return null;const d=t[2]-e[2];if(r==="vertical")return{verticalSigned:d,unit:l};if(!eb(e,i,L8,s)||!eb(t,i,C5,s))return null;if(r==="direct")return{direct:Jh(C5,L8),unit:l};if(ju(k5,e[0],e[1],t[2]),!eb(k5,i,k5,s))return null;const y=Jh(k5,C5);return r==="horizontal"?{horizontal:y,unit:l}:{direct:Jh(C5,L8),horizontal:y,vertical:Math.abs(d),unit:l}}const T5=wt(),I5=wt(),L8=wt(),C5=wt(),k5=wt();function RBe(e){const{spatialReference:t}=e;return sF(t,zBe,VBe,UBe,e)}function NBe(e,t,i){return sF(i,FBe,DBe,jBe,e,t,i)}function FBe(e,t,i){return Yo(l_(oF,e,t,i).distance,"meters")}function DBe(e,t,i){return Yo(V$(BBe(e,t,i),"meters"),"meters")}function jBe(e,t,i){return vU(e,i,rJ)&&vU(t,i,nJ)?Yo(l_(oF,rJ,nJ).distance,"meters"):null}function zBe(e){return Yo(gb([e],"meters")[0],"meters")}function VBe(e){return Yo(V$(e,"meters"),"meters")}function UBe(e){const t=[];if(!y4e(e,t))return null;let i=0;for(const r of t){let s=0;for(let l=1;l<r.length;++l)s+=l_(oF,r[l-1],r[l]).distance;i+=s}return Yo(i,"meters")}function BBe(e,t,i){return{type:"polyline",spatialReference:i,paths:[[[...e],[...t]]]}}const oF={distance:null},rJ=wt(),nJ=wt();function GBe(e,t){return Mue(LBe,RBe,PBe,t,e)}function qBe(e,t,i,r){return Mue(xue,NBe,Sue,r,e,t,i)}function Mue(e,t,i,r,...s){if(r==="on-the-ground"){const l=t.apply(void 0,s);return K(l)?l:i.apply(void 0,s)}return e.apply(void 0,s)}function HBe(e,t){var _,M,k;const i=O=>GBe(O,t),r=(O,R,D)=>qBe(O,R,D,t),s=i(e),l=(k=(M=e.paths[0])==null?void 0:M[((_=e.paths[0])==null?void 0:_.length)-1])!=null?k:null,{hasZ:d,spatialReference:y}=e,v=l?Qn(l[0],l[1],d?l[2]:0):null;return O=>{if(ce(O)||ce(s)||ce(v))return s;A5[0]=O.x,A5[1]=O.y,A5[2]=d?O.z:0;const R=r(v,A5,y);return ce(R)?s:Yo(s.value+R.value,s.unit)}}function WBe(e,t){const i=J$(),r=s=>OBe(s,t,i);return s=>{if(ce(s)||e.rings.length<1||e.rings[0].length<2)return r(e);const l=e.clone();return l.rings[0].push([s.x,s.y]),r(l)}}const A5=wt();let $r=class extends bs.EventedMixin(Ng){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new UUe,this._tooltip=null,this._tooltipContext={calculateElevation:null,calculateTotalLength:null,calculateArea:null},this.isDraped=!0,this.labelOptions=new fue,this.tooltipOptions=new yue,this.snapToSceneEnabled=null,ce(e.elevationInfo)&&(this.elevationInfo={mode:e.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){const{geometryType:e,view:t}=this,{spatialReference:i}=t,r="viewingMode"in t.state?t.state.viewingMode:_o.Local,s=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=JN(this.hasZ,this.hasM,i),this._editGeometryOperations=new c_(new Nv(s,this.coordinateHelper)),this._snappingOperation=new Qm({view:t}),this.handles.add(Pe(()=>this.stagedVertex,(d,y)=>{K(this._tooltip)&&(K(y)!==K(d)?this._tooltip.info=this._getTooltipInfo():this._updateTooltipInfo()),ce(d)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(d)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(d,y)=>iY(d,y,Kle)})),this._activeComponent=new Sg(i,r),this._editGeometryOperations.data.components.push(this._activeComponent);const l=this.segmentLabels;K(l)&&(l.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([Pe(()=>this.labelOptions.enabled,d=>{l.visible=d},vl),this.on("cursor-update",()=>{const d=this.stagedVertex;l.stagedVertex=K(d)?this.coordinateHelper.pointToVector(d):null})])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],d=>{const y=d.vertices.map(_=>({componentIndex:0,vertexIndex:_.index,coordinates:this.coordinateHelper.vectorToArray(_.pos)})),v=y.map(_=>_.coordinates);switch(d.type){case"vertex-add":this.emit(d.type,{...d,added:v,vertices:y});break;case"vertex-update":this.emit(d.type,{...d,updated:v,vertices:y});break;case"vertex-remove":this.emit(d.type,{...d,removed:v,vertices:y})}})),this._manipulator=new PUe({grabbableForEvent:d=>this.drawingMode!=="click"||d.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1}),this.manipulators.add(this._manipulator),this._manipulator.grabbable=e!=="point",this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",d=>this._onImmediateClick(d)),this._manipulator.events.on("immediate-double-click",d=>this._onImmediateDoubleClick(d)),Pe(()=>this.tooltipOptions.enabled,d=>{this._tooltip=d?new E0({view:t,info:this._getTooltipInfo()}):Oi(this._tooltip)},Jt),this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],()=>Uo(this._tooltip,d=>{d.info=this._getTooltipInfo()}))])}destroy(){Oi(this.segmentLabels),Oi(this._snappingOperation),this._tooltip=Oi(this._tooltip),this._editGeometryOperations=Oi(this._editGeometryOperations)}get _snappingEnabled(){return K(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _defaultElevation(){return Yo(this.defaultZ,"meters")}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}set drawingMode(e){this._set("drawingMode",e!=null?e:H$)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return K(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=Me(e)}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return K(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}get stagedOrLastVertex(){if(K(this.stagedVertex))return this.stagedVertex;const e=this._activeComponent.getLastVertex();return ce(e)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(e.pos)}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),K(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),K(this.snappingManager)&&this.snappingManager.doneSnapping(),this.geometryType==="segment"||this.geometryType==="point"?this.commitStagedVertex():this.stagedVertex=null;const i=this.geometryType==="multipoint"&&this.numVertices===0||this.geometryType==="polyline"&&this.numVertices<2||this.geometryType==="polygon"&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map((r,s)=>({componentIndex:0,vertexIndex:s,coordinates:r})),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){K(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if(this.geometryType==="polygon"&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return c4(e,(t,i,r,s)=>{const l=s==="touch"&&this._snappingEnabled;!this.isCompleted&&l&&(i.next(this._screenToMapDragEventStep()).next(d=>(d.action==="start"&&(this.stagedVertex=d.mapStart,(this.geometryType==="segment"||l&&this.numVertices===0)&&this.commitStagedVertex()),d)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>l,cancel:r,snappingManager:this.snappingManager,snappingContext:new c6({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:s,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(d=>(l&&(this.stagedVertex=d.mapEnd,d.action==="end"&&this.commitStagedVertex()),d)).next(d=>(d.action==="end"&&(this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),d)),r.next(()=>{l&&K(this.snappingManager)&&this.snappingManager.doneSnapping()}))})}_createManipulatorDragPipelineFreehand(e){return c4(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(r=>(r.action==="start"&&(ce(this.stagedVertex)&&(this.stagedVertex=r.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),r)).next(r=>{switch(r.action){case"start":case"update":this.stagedVertex=r.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return r})})}_createManipulatorDragPipelineHybrid(e){return c4(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(r=>(r.action==="start"&&(ce(this.stagedVertex)&&(this.stagedVertex=r.mapStart),this.commitStagedVertex()),r)).next(r=>{switch(r.action){case"start":case"update":this.stagedVertex=r.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return r})})}_getDrawSurface(){if(ce(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;K(this.elevationInfo)&&this.elevationInfo.mode==="absolute-height"&&(t=!0),K(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),K(this.elevationInfo)&&this.elevationInfo.mode==="on-the-ground"&&(t=!1);const i=this._activeComponent.vertices.length;return(this.geometryType==="segment"||this.geometryType==="polygon")&&i>0&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(K(i))return e.stopPropagation(),void this.complete();const r=this._screenToMap(e.screenPoint);if(K(r))switch(this.drawingMode){case"freehand":this.geometryType==="point"&&(K(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),K(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),(this.geometryType==="point"||this.geometryType==="segment"&&t.vertices.length===2||this.geometryType==="segment"&&this.drawingMode==="hybrid"&&t.vertices.length===1)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=Un(e.x,e.y);if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void this._snappingOperation.abort();e.stopPropagation();const i=this._closeOnClickVertexIndex(t);if(K(i))return this._closeOnVertex(i),void this._snappingOperation.abort();const r=this._screenToMap(t);if(this._manipulator.cursor=K(r)?"crosshair":null,ce(r))return void this._snappingOperation.abort();if(ce(this.snappingManager))return this.stagedVertex=r,void this._snappingOperation.abort();const s=this.snappingManager,l=new c6({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise(M1(this._snappingOperation.snap(r,s,l)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if(t.action==="start"&&(e=this._screenToMap(t.screenStart)),ce(e))return null;const i=this._screenToMap(t.screenEnd);return K(i)?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const r=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!K(r)&&JBe(r,t,25)}_calculateVertexTooltipElevation(e){const{tooltipOptions:t,view:i}=this;if(ce(e)||i.type==="2d")return this._defaultElevation;const r=this.elevationInfo,s=t.elevation.mode,{spatialReference:l}=e,d=R1(l),y=iF(i,e,r,{mode:s,offset:0});return Yo(y*d,"meters")}_getTooltipInfo(){const{tooltipOptions:e,stagedOrLastVertex:t}=this;if(ce(t))return null;this._tooltipContext.calculateElevation=r=>this._calculateVertexTooltipElevation(r);const i=this._elevationTooltipDetail(t);switch(this.geometryType){case"point":return new R2({tooltipOptions:e,elevation:i});case"polyline":return this._tooltipContext.calculateTotalLength=HBe(this._editGeometryOperations.data.geometry,this.isDraped?"on-the-ground":"absolute-height"),new bm({tooltipOptions:e,elevation:i,totalLength:this._totalLengthTooltipDetail(t)});case"polygon":return this._tooltipContext.calculateArea=WBe(this._editGeometryOperations.data.geometry,this.isDraped),new _m({tooltipOptions:e,elevation:i,area:this._areaTooltipDetail(t)});default:return null}}_elevationTooltipDetail(e){return{mode:this.elevationInfo.mode,...(0,this._tooltipContext.calculateElevation)(e)}}_totalLengthTooltipDetail(e){return{...hn((0,this._tooltipContext.calculateTotalLength)(e),Yo(0,"meters"))}}_areaTooltipDetail(e){return{...hn((0,this._tooltipContext.calculateArea)(e),p_(0,"square-meters"))}}_updateTooltipInfo(){const e=this._tooltip;if(ce(e))return;const{stagedOrLastVertex:t}=this,i=this._elevationTooltipDetail(t);switch(this.geometryType){case"point":e.info.elevation=i;break;case"polyline":{const r=e.info;r.elevation=i,r.totalLength=this._totalLengthTooltipDetail(t);break}case"polygon":{const r=e.info;r.elevation=i,r.area=this._areaTooltipDetail(t);break}}}get test(){return{tooltip:this._tooltip}}};function JBe(e,t,i){const r=e.x-t.x,s=e.y-t.y;return r*r+s*s<=i}g([S()],$r.prototype,"_defaultElevation",null),g([S()],$r.prototype,"defaultZ",void 0),g([S()],$r.prototype,"isDraped",void 0),g([S({value:H$})],$r.prototype,"drawingMode",null),g([S({constructOnly:!0})],$r.prototype,"elevationDrawSurface",void 0),g([S({constructOnly:!0})],$r.prototype,"elevationInfo",void 0),g([S({constructOnly:!0,type:fue})],$r.prototype,"labelOptions",void 0),g([S({constructOnly:!0,type:yue})],$r.prototype,"tooltipOptions",void 0),g([S({constructOnly:!0})],$r.prototype,"geometryType",void 0),g([S({constructOnly:!0})],$r.prototype,"hasM",void 0),g([S({constructOnly:!0})],$r.prototype,"hasZ",void 0),g([S({constructOnly:!0})],$r.prototype,"manipulators",void 0),g([S({constructOnly:!0})],$r.prototype,"drawSurface",void 0),g([S({constructOnly:!0})],$r.prototype,"segmentLabels",void 0),g([S({constructOnly:!0})],$r.prototype,"snappingManager",void 0),g([S({constructOnly:!0})],$r.prototype,"snappingVisualizer",void 0),g([S()],$r.prototype,"snapToSceneEnabled",void 0),g([S()],$r.prototype,"_snappingOperation",void 0),g([S()],$r.prototype,"stagedVertex",null),g([S()],$r.prototype,"updating",null),g([S({constructOnly:!0})],$r.prototype,"view",void 0),$r=g([Q("esri.views.draw.DrawOperation")],$r);class KBe{constructor(t,i,r,s=null){this.elevationInfo=t,this.defaultZ=i,this.view=r,this.excludeGraphics=s}screenToMap(t){if(K(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(e3(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const i=this.view.sceneIntersectionHelper.intersectElevationFromScreen(e3(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return K(i)&&(i.z=void 0),i}mapToScreen(t){const i=UN(t.x,t.y,iF(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(i)}}class ZBe{constructor(t,i,r=[]){this.view=t,this.elevationInfo=i,this.exclude=r}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return K(i)&&(i.z=kUe(i,this.view,this.elevationInfo)),i}mapToScreen(t){let i=t;return K(this.elevationInfo)&&(i=UN(t.x,t.y,iF(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(i)}}var U0;(function(e){e[e.WhenToolEditable=0]="WhenToolEditable",e[e.WhenToolNotEditable=1]="WhenToolNotEditable",e[e.Always=2]="Always"})(U0||(U0={}));class YBe{constructor(){this._isToolEditable=!0,this._manipulators=new vt,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,i=U0.WhenToolEditable){return this.addMany([t],i)[0]}addMany(t,i=U0.WhenToolEditable){return t.map(r=>{const s=this._nextManipulatorId++,l={id:s,manipulator:r,visibilityPredicate:i,attached:!1};return this._manipulators.add(l),this._attached&&this._updateManipulatorAttachment(l),s})}remove(t){if(typeof t=="number"){const r=t;for(let s=0;s<this._manipulators.length;s++)if(this._manipulators.getItemAt(s).id===r){const l=this._manipulators.splice(s,1)[0];return this._detachManipulator(l),l.id}return null}const i=t;for(let r=0;r<this._manipulators.length;r++)if(this._manipulators.getItemAt(r).manipulator===i){const s=this._manipulators.splice(r,1)[0];return this._detachManipulator(s),s.id}return null}removeAll(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(t=>{this._updateManipulatorAttachment(t)}),this._attached=!0}detach(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._attached=!1}destroy(){this._manipulators.forEach(({manipulator:t})=>{t.destroy&&t.destroy()}),this._manipulators.destroy(),this._resourceContexts=null}on(t,i){return this._manipulators.on(t,r=>{i(r)})}forEach(t){for(const i of this._manipulators.items)t(i)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach(i=>t.push(i.manipulator)),t}intersect(t,i){let r=null,s=Number.MAX_VALUE;return this._manipulators.forEach(({id:l,manipulator:d,attached:y})=>{if(!y||!d.interactive)return;const v=d.intersectionDistance(t,i);K(v)&&v<s&&(s=v,r={id:l,manipulator:d})}),r}findById(t){if(ce(t))return null;for(const i of this._manipulators.items)if(t===i.id)return i.manipulator;return null}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const i=t.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===U0.Always||(this._isToolEditable?t.visibilityPredicate===U0.WhenToolEditable:t.visibilityPredicate===U0.WhenToolNotEditable)}}const XBe=Ke.getLogger("esri.views.interactive.InteractiveToolBase");let Ps=class extends st{constructor(e){super(e),this.manipulators=new YBe,this.preferManipulatorCursor=!1,this.automaticManipulatorSelection=!0,this.hasFocusedManipulators=!1,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[fl.MANAGER,!0],[fl.USER,!0]]),this._creationFinishedResolver=VL()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(fl.USER)}set editable(e){this.setEditableFlag(fl.USER,e)}get updating(){return!1}get cursor(){return null}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){ce(this.view)?XBe.error("Can't activate tool if view is not defined."):(dPe(this.view)&&this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===fl.USER&&this.notifyChange("editable"),this.onEditableChange()}getEditableFlag(e){return this._editableFlags.get(e)}whenCreated(){return this._creationFinishedResolver.promise}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(fl.USER)&&this.getEditableFlag(fl.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.constructed){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};g([S({constructOnly:!0})],Ps.prototype,"view",void 0),g([S({readOnly:!0})],Ps.prototype,"active",null),g([S({value:!0})],Ps.prototype,"visible",null),g([S({value:!0})],Ps.prototype,"editable",null),g([S({readOnly:!0})],Ps.prototype,"manipulators",void 0),g([S({readOnly:!0})],Ps.prototype,"updating",null),g([S()],Ps.prototype,"cursor",null),g([S({readOnly:!0})],Ps.prototype,"preferManipulatorCursor",void 0),g([S({readOnly:!0})],Ps.prototype,"automaticManipulatorSelection",void 0),g([S()],Ps.prototype,"hasFocusedManipulators",void 0),g([S({readOnly:!0})],Ps.prototype,"created",void 0),g([S({readOnly:!0})],Ps.prototype,"removeIncompleteOnCancel",void 0),Ps=g([Q("esri.views.interactive.InteractiveToolBase")],Ps);let cs=class extends Uu(bs.EventedMixin(Ps)){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=hn(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0}),t=this.view;this.drawOperation=new $r({view:t,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:t.type==="3d"?new ZBe(t,e):null,elevationDrawSurface:t.type==="3d"?new KBe(e,this.defaultZ,t):null,hasM:!1,elevationInfo:e}),this.handles.add([this.drawOperation.on("vertex-add",i=>this.onVertexAdd(i)),this.drawOperation.on("vertex-remove",i=>this.onVertexRemove(i)),this.drawOperation.on("vertex-update",i=>this.onVertexUpdate(i)),this.drawOperation.on("cursor-update",i=>this.onCursorUpdate(i)),this.drawOperation.on("complete",i=>this.onComplete(i))]),this.finishToolCreation()}destroy(){this.drawOperation=Oi(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){var e,t;return(t=(e=this.drawOperation)==null?void 0:e.updating)!=null?t:!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};g([S({constructOnly:!0,nonNullable:!0})],cs.prototype,"defaultZ",void 0),g([S()],cs.prototype,"drawOperation",void 0),g([S({constructOnly:!0})],cs.prototype,"elevationInfo",void 0),g([S({value:!0})],cs.prototype,"enabled",null),g([S({constructOnly:!0})],cs.prototype,"geometryType",void 0),g([S({constructOnly:!0})],cs.prototype,"hasZ",void 0),g([S({constructOnly:!0})],cs.prototype,"mode",void 0),g([S()],cs.prototype,"snapToScene",void 0),g([S({readOnly:!0})],cs.prototype,"type",void 0),g([S({readOnly:!0})],cs.prototype,"updating",null),g([S({constructOnly:!0,nonNullable:!0})],cs.prototype,"view",void 0),cs=g([Q("esri.views.draw.DrawTool")],cs);let FO=class extends h_{constructor(e){super(e),this._addVertexOnPointerUp=!1}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=ar(e),e.pointerType==="touch"&&this._updateCursor(e.native))},St.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=ar(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},St.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},St.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler(e);else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},St.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},St.TOOL),this.view.on("key-down",e=>{e.key===Ir.complete&&this._cursorScreenPoint&&(this._abortSnapping(),this._vertexAddHandler(e))},St.TOOL)],this._viewHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new cs({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new cp(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new hp(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Oi(this._drawTool)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),this.notifyChange("vertices"),this._completeDrawing())}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);K(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new cp(this.view,e,this._activeComponent.vertices.length,this.vertices,K(this._stagedVertex)?new ut(this._stagedVertex):null)))}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),K(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new hp(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};FO=g([Q("esri.views.draw.PointDrawAction")],FO);let xm=class extends h_{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=H$}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},St.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=ar(e),e.pointerType==="touch"&&this._updateCursor(e.native))},St.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=ar(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},St.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=ar(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},St.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},St.TOOL),this.view.on("drag",e=>{this._dragEnabled&&K(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},St.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},St.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},St.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},St.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===Ir.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==Ir.complete||i?t!==Ir.undo||this.interactiveUndoDisabled||i?t!==Ir.redo||this.interactiveUndoDisabled||i?t!==Ir.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},St.TOOL),this.view.on("key-up",e=>{e.key===Ir.pan&&(e.stopPropagation(),this._panEnabled=!1)},St.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];K(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new tF(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new kc(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];K(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new kc(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new cs({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new kc(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new cp(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new hp(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);K(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new cp(this.view,e,this._activeComponent.vertices.length,this.vertices,K(this._stagedVertex)?new ut(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<3)return;this._abortSnapping(),K(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new hp(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};g([S()],xm.prototype,"_dragEnabled",null),g([S()],xm.prototype,"_clickEnabled",null),g([S({type:hue})],xm.prototype,"mode",void 0),xm=g([Q("esri.views.draw.PolygonDrawAction")],xm);let Sm=class extends h_{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=H$}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},St.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=ar(e),e.pointerType==="touch"&&this._updateCursor(e.native))},St.TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=ar(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},St.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=ar(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},St.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},St.TOOL),this.view.on("drag",e=>{this._dragEnabled&&K(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},St.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},St.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},St.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},St.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===Ir.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==Ir.complete||i?t!==Ir.undo||this.interactiveUndoDisabled||i?t!==Ir.redo||this.interactiveUndoDisabled||i?t!==Ir.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},St.TOOL),this.view.on("key-up",e=>{e.key===Ir.pan&&(e.stopPropagation(),this._panEnabled=!1)},St.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];K(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new tF(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new kc(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];K(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new kc(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new cs({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new kc(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new cp(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new hp(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);K(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new cp(this.view,e,this._activeComponent.vertices.length,this.vertices,K(this._stagedVertex)?new ut(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<2)return;this._abortSnapping(),K(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new hp(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};g([S()],Sm.prototype,"_clickEnabled",null),g([S()],Sm.prototype,"_dragEnabled",null),g([S({type:hue})],Sm.prototype,"mode",void 0),Sm=g([Q("esri.views.draw.PolylineDrawAction")],Sm);function QBe(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Eue(e,t,i){i*=.5;const r=Math.sin(i);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i),e}function eGe(e,t){const i=2*Math.acos(t[3]),r=Math.sin(i/2);return r>Ot?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),i}function Tue(e,t,i){const r=t[0],s=t[1],l=t[2],d=t[3],y=i[0],v=i[1],_=i[2],M=i[3];return e[0]=r*M+d*y+s*_-l*v,e[1]=s*M+d*v+l*y-r*_,e[2]=l*M+d*_+r*v-s*y,e[3]=d*M-r*y-s*v-l*_,e}function tGe(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],d=t[3],y=Math.sin(i),v=Math.cos(i);return e[0]=r*v+d*y,e[1]=s*v+l*y,e[2]=l*v-s*y,e[3]=d*v-r*y,e}function iGe(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],d=t[3],y=Math.sin(i),v=Math.cos(i);return e[0]=r*v-l*y,e[1]=s*v+d*y,e[2]=l*v+r*y,e[3]=d*v-s*y,e}function rGe(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],d=t[3],y=Math.sin(i),v=Math.cos(i);return e[0]=r*v+s*y,e[1]=s*v-r*y,e[2]=l*v+d*y,e[3]=d*v-l*y,e}function nGe(e,t){const i=t[0],r=t[1],s=t[2];return e[0]=i,e[1]=r,e[2]=s,e[3]=Math.sqrt(Math.abs(1-i*i-r*r-s*s)),e}function p4(e,t,i,r){const s=t[0],l=t[1],d=t[2],y=t[3];let v,_,M,k,O,R=i[0],D=i[1],z=i[2],B=i[3];return _=s*R+l*D+d*z+y*B,_<0&&(_=-_,R=-R,D=-D,z=-z,B=-B),1-_>Ot?(v=Math.acos(_),M=Math.sin(v),k=Math.sin((1-r)*v)/M,O=Math.sin(r*v)/M):(k=1-r,O=r),e[0]=k*s+O*R,e[1]=k*l+O*D,e[2]=k*d+O*z,e[3]=k*y+O*B,e}function sGe(e){const t=Tu(),i=Tu(),r=Tu(),s=Math.sqrt(1-t),l=Math.sqrt(t);return e[0]=s*Math.sin(2*Math.PI*i),e[1]=s*Math.cos(2*Math.PI*i),e[2]=l*Math.sin(2*Math.PI*r),e[3]=l*Math.cos(2*Math.PI*r),e}function Iue(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],d=i*i+r*r+s*s+l*l,y=d?1/d:0;return e[0]=-i*y,e[1]=-r*y,e[2]=-s*y,e[3]=l*y,e}function oGe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Cue(e,t){const i=t[0]+t[4]+t[8];let r;if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);const l=(s+1)%3,d=(s+2)%3;r=Math.sqrt(t[3*s+s]-t[3*l+l]-t[3*d+d]+1),e[s]=.5*r,r=.5/r,e[3]=(t[3*l+d]-t[3*d+l])*r,e[l]=(t[3*l+s]+t[3*s+l])*r,e[d]=(t[3*d+s]+t[3*s+d])*r}return e}function aGe(e,t,i,r){const s=.5*Math.PI/180;t*=s,i*=s,r*=s;const l=Math.sin(t),d=Math.cos(t),y=Math.sin(i),v=Math.cos(i),_=Math.sin(r),M=Math.cos(r);return e[0]=l*v*M-d*y*_,e[1]=d*y*M+l*v*_,e[2]=d*v*_-l*y*M,e[3]=d*v*M+l*y*_,e}function lGe(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}const uGe=q6,cGe=ZX,hGe=YX,pGe=Tue,dGe=tQ,fGe=sQ,yGe=H6,kue=dP,mGe=kue,Aue=fP,gGe=Aue,aF=nQ,vGe=oQ,wGe=aQ;function Oue(e,t,i){const r=Ds(t,i);return r<-.999999?(Ra(Xu,bGe,t),KX(Xu)<1e-6&&Ra(Xu,_Ge,t),Sl(Xu,Xu),Eue(e,Xu,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Ra(Xu,t,i),e[0]=Xu[0],e[1]=Xu[1],e[2]=Xu[2],e[3]=1+r,aF(e,e))}const Xu=wt(),bGe=Qn(1,0,0),_Ge=Qn(0,1,0);function xGe(e,t,i,r,s,l){return p4(sJ,t,s,l),p4(oJ,i,r,l),p4(e,sJ,oJ,2*l*(1-l)),e}const sJ=iv(),oJ=iv();function SGe(e,t,i,r){const s=$Ge;return s[0]=i[0],s[3]=i[1],s[6]=i[2],s[1]=r[0],s[4]=r[1],s[7]=r[2],s[2]=-t[0],s[5]=-t[1],s[8]=-t[2],aF(e,Cue(e,s))}const $Ge=Yle();Object.freeze(Object.defineProperty({__proto__:null,identity:QBe,setAxisAngle:Eue,getAxisAngle:eGe,multiply:Tue,rotateX:tGe,rotateY:iGe,rotateZ:rGe,calculateW:nGe,slerp:p4,random:sGe,invert:Iue,conjugate:oGe,fromMat3:Cue,fromEuler:aGe,str:lGe,copy:uGe,set:cGe,add:hGe,mul:pGe,scale:dGe,dot:fGe,lerp:yGe,length:kue,len:mGe,squaredLength:Aue,sqrLen:gGe,normalize:aF,exactEquals:vGe,equals:wGe,rotationTo:Oue,sqlerp:xGe,setAxes:SGe},Symbol.toStringTag,{value:"Module"}));function p6(e,t,i=null){return K(i)?[e,t,i]:[e,t]}function Lue(e,t,i=null){return K(i)?{x:e,y:t,z:i}:{x:e,y:t}}class Pue{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return Ige(t.map(i=>this.mapToLocal(i)))}get doUnnormalization(){return!1}}class MGe extends Pue{constructor(t,i,r=null){super(i),this.defaultZ=r,this.transform=Ic(),this.transformInv=Ic(),this.transform=Woe(t),A$(this.transformInv,this.transform)}makeMapPoint(t,i){return p6(t,i,this.defaultZ)}mapToLocal(t){return Lue(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return p6(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class EGe extends Pue{constructor(t,i){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=wt(),this.tangentFrameUpWS=wt(),this.tangentFrameRightWS=wt(),this.tangentFrameForwardWS=wt(),this.localFrameRightWS=wt(),this.localFrameUpWS=wt(),this.worldToLocalTransform=iv(),this.localToWorldTransform=iv(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const r=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Qh.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Qh.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Qh.Z,this.tangentFrameForwardWS);const s=wt();Nl(s,this.tangentFrameForwardWS,Ds(r,this.tangentFrameForwardWS)),ts(this.localFrameRightWS,r,s),Sl(this.localFrameRightWS,this.localFrameRightWS),Ra(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Oue(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),Iue(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(t,i){return p6(t,i,this.defaultZ)}mapToLocal(t){const i=wt();this.view.renderCoordsHelper.toRenderCoords(new ut({x:t[0],y:t[1],spatialReference:this.spatialReference}),i),wI(i,i,this.worldToLocalTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return K(r)?Lue(r.x/this.scale,r.y/this.scale):null}localToMap(t){const i=wt();this.view.renderCoordsHelper.toRenderCoords(new ut({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),i),wI(i,i,this.localToWorldTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return K(r)?p6(r.x,r.y,this.defaultZ):null}}function TGe(e,t){if(e.type==="2d")return new MGe(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if(e.type==="3d"){const i=t.length>2?new ut({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new ut({x:t[0],y:t[1],spatialReference:e.spatialReference});return new EGe(e,i)}return null}const IGe=["freehand","click"];let d4=class extends h_{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this.mode==="click"?this._handles.add(this._getClickModeViewHandles(),this._viewHandlesKey):this._handles.add(this._getDragModeViewHandles(),this._viewHandlesKey)}_getDragModeViewHandles(){return[this.view.on("immediate-click",e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){const t=this.getCoordsFromScreenPoint(ar(e));K(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}},St.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=ar(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,e.pointerType==="touch"&&this._updateCursor(e.native)))},St.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),ce(this._activePointerId)&&e.pointerType!=="touch"&&(this._cursorScreenPoint=ar(e),this._updateCursor(e.native))},St.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=ar(e),this._updateCursor(e.native))},St.TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),this._committedVertices.length===2&&this._drawCompleteHandler(e),this._isDragging=!1)},St.TOOL),this.view.on("key-down",e=>{e.key===Ir.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===Ir.pan&&(this._panEnabled=!0)},St.TOOL),this.view.on("key-up",e=>{e.key===Ir.pan&&(this._panEnabled=!1)},St.TOOL),this.view.on("drag",e=>{K(this._activePointerId)&&e.stopPropagation()},St.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},St.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",e=>{this._abortSnapping(),this._cursorScreenPoint=ar(e),this._activePointerId=e.pointerId,this._isDragging=!1,e.pointerType==="touch"&&this._updateCursor(e.native)},St.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=ar(e),ce(this._activePointerId)&&e.pointerType!=="touch"&&this._updateCursor(e.native)},St.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)},St.TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),this.vertices.length!==2||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)},St.TOOL),this.view.on("key-down",e=>{e.key===Ir.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),this.vertices.length===2&&this._drawCompleteHandler(e)),e.key===Ir.complete&&this._cursorScreenPoint&&this.vertices.length===2&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))},St.TOOL)]}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new cs({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new kc(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new cp(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new hp(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=Oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i),this._committedVertices.length===1&&(this.viewAlignedCoordinateSystem=TGe(this.view,this._committedVertices[0]));const r=this._committedVertices.length-1,s=new kc(this.view,t,r,this.vertices);this.emit("vertex-add",s)}_updateCursor(e){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);K(t)&&this._pushCursorVertex(t.vertex,()=>this.emit("cursor-update",new cp(this.view,e,this._activeComponent.vertices.length,this.vertices,K(this._stagedVertex)?new ut(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),K(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new hp(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new c_(new Nv("polygon",this._coordinateHelper)),this._activeComponent=new Sg(this._coordinateHelper.spatialReference,_o.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};g([S({type:IGe})],d4.prototype,"mode",void 0),d4=g([Q("esri/views/2d/engine/markup/SegmentDrawAction")],d4);let $m=class extends st{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();const i={view:this.view,...t};switch(e){case"point":i.editGeometryType="point",this.activeAction=new FO(i);break;case"polyline":i.editGeometryType="polyline",this.activeAction=new Sm(i);break;case"multipoint":i.editGeometryType="polygon",this.activeAction=new h6(i);break;case"polygon":i.editGeometryType="polygon",this.activeAction=new xm(i);break;case"rectangle":case"circle":case"ellipse":case"triangle":i.editGeometryType="polygon",this.activeAction=new d4(i)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};g([S()],$m.prototype,"activeAction",void 0),g([S({readOnly:!0})],$m.prototype,"type",void 0),g([S()],$m.prototype,"view",void 0),$m=g([Q("esri.views.draw.Draw")],$m);const CGe=$m;function P8(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function kGe(e){let t=0,i=0;for(let r=0;r<e.length;r++){const s=e[r].size;typeof s=="number"&&(t+=s,i++)}return t/i}function aJ(e,t){return typeof e=="number"?e:e&&e.stops&&e.stops.length?kGe(e.stops):t}function AGe(e,t){if(!t)return e;const i=t.filter(d=>d.type==="size").map(d=>{const{maxSize:y,minSize:v}=d;return(aJ(y,e)+aJ(v,e))/2});let r=0;const s=i.length;if(s===0)return e;for(let d=0;d<s;d++)r+=i[d];const l=Math.floor(r/s);return Math.max(l,e)}function OGe(e){const t=e&&e.renderer,i=(e&&e.event&&e.event.pointerType)==="touch"?9:6;if(!t)return i;const r="visualVariables"in t?AGe(i,t.visualVariables):i;if(t.type==="simple")return P8(r,t.symbol);if(t.type==="unique-value"){let s=r;return t.uniqueValueInfos.forEach(l=>{s=P8(s,l.symbol)}),s}if(t.type==="class-breaks"){let s=r;return t.classBreakInfos.forEach(l=>{s=P8(s,l.symbol)}),s}return t.type==="dot-density"||t.type,r}function LGe(e,t,i,r=new yi){let s;if(i.type==="2d")s=t*i.resolution;else if(i.type==="3d"){const M=i.overlayPixelSizeInMapUnits(e),k=i.basemapSpatialReference;s=K(k)&&!k.equals(i.spatialReference)?cf(k)/cf(i.spatialReference):t*M}const l=e.x-s,d=e.y-s,y=e.x+s,v=e.y+s,{spatialReference:_}=i;return r.xmin=Math.min(l,y),r.ymin=Math.min(d,v),r.xmax=Math.max(l,y),r.ymax=Math.max(d,v),r.spatialReference=_,r}function PGe(e,t,i){const r=i.toMap(e);return ce(r)?!1:LGe(r,OGe(),i,RGe).intersects(t)}const RGe=new yi;let Os=class extends st{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new bs.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()}get elevationInfo(){const e="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=IUe(this.graphic),i=e?e.offset:0;return new sN({mode:t,offset:i})}set focusedSymbol(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}set selected(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(e){const t=this.graphic;if(t.visible===!1)return null;const i=t.geometry;if(ce(i))return null;const r=this._get("focusedSymbol"),s=K(r)?r:t.symbol;return this.view.type==="2d"?this._intersectDistance2D(this.view,e,i,s):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),K(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),K(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=Pe(()=>{var e;return(e=this.graphic)==null?void 0:e.symbol},e=>{K(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&K(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))},L1)}detachSymbolChanged(){K(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&K(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,i,r){if(r=r||qAe(i),ce(r))return null;const s=1;let l=this._circleCollisionCache;if(i.type!=="point"||r.type!=="simple-marker")return PGe(t,i,e)?s:null;if(ce(l)||!l.originalPoint.equals(i)){const d=i,y=e.spatialReference;if(zu(d.spatialReference,y)){const v=uo(d,y);l={originalPoint:d.clone(),mapPoint:v,radiusPx:Xi(r.size)},this._circleCollisionCache=l}}if(K(l)){const d=cxe(t,NGe),y=e.toScreen(l.mapPoint),v=l.radiusPx,_=y.x+Xi(r.xoffset),M=y.y-Xi(r.yoffset);return b3(d,[_,M])<v*v?s:null}return null}_intersectDistance3D(e,t,i){const r=e.toMap(t,{include:[i]});return r&&v4e(r,lJ,e.renderSpatialReference)?Jh(lJ,e.state.camera.eye):null}};g([S({constructOnly:!0,nonNullable:!0})],Os.prototype,"graphic",null),g([S()],Os.prototype,"elevationInfo",null),g([S({constructOnly:!0,nonNullable:!0})],Os.prototype,"view",void 0),g([S({value:null})],Os.prototype,"focusedSymbol",null),g([S({constructOnly:!0})],Os.prototype,"layer",void 0),g([S()],Os.prototype,"interactive",void 0),g([S()],Os.prototype,"selectable",void 0),g([S()],Os.prototype,"grabbable",void 0),g([S({value:!1})],Os.prototype,"grabbing",null),g([S()],Os.prototype,"dragging",void 0),g([S()],Os.prototype,"hovering",null),g([S({value:!1})],Os.prototype,"selected",null),g([S()],Os.prototype,"cursor",void 0),Os=g([Q("esri.views.interactive.GraphicManipulator")],Os);const lJ=wt(),NGe=e3(),O5=1e5;let ba=class extends Ps{constructor(e){super(e),this._drawActive=!1,this._handles=new ir,this._measurementLayer=new a6({internal:!0,listMode:"hide",visible:!1}),this._manipulatorLayer=new a6({internal:!0,listMode:"hide",visible:!1}),this._vertices=[],this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null}initialize(){Hb("esri/core/t9n/Units").then(t=>{this.messages=t}),this._handles.add(B6(async()=>{this.messages=await Hb("esri/core/t9n/Units")}));const e=this.view;this._draw=new CGe({view:e}),e.map.addMany([this._measurementLayer,this._manipulatorLayer]),e.focus(),this._handles.add([Pe(()=>[this.unit,this.geodesicDistanceThreshold,this.palette,this.messages],()=>{this._vertices.length>0&&this._updatePolylines()},Jt)])}destroy(){const{map:e}=this.view;this._draw.view=null,this._draw=Oi(this._draw),e.removeMany([this._measurementLayer,this._manipulatorLayer]),this._handles.removeAll(),this._measurementLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._handles=Oi(this._handles),this._measurementLayer=Oi(this._measurementLayer),this._manipulatorLayer=Oi(this._manipulatorLayer)}get cursor(){return this._drawActive?"crosshair":null}set editable(e){this._set("editable",e),e||this._draw.reset()}onActivate(){this._drawActive||this._vertices.length!==0||this._startSketch()}onShow(){this._measurementLayer.visible=!0,this._manipulatorLayer.visible=!0}onHide(){this._measurementLayer.visible=!1,this._manipulatorLayer.visible=!1}reset(){this._vertices=[],this._measurementLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}_startSketch(){this._drawActive=!0;const e=this._draw.create("polyline",{mode:"click"});e.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],t=>this._updateSketch(t.vertices)),e.on("draw-complete",()=>{this._stopSketch()})}_stopSketch(){this.manipulators.forEach(e=>{e.manipulator.interactive=!0}),this._drawActive=!1,this.finishToolCreation()}_updateSketch(e){if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._measurementLayer.removeAll();const{spatialReference:t}=this.view;for(;this._vertices.length>e.length;){const{manipulatorId:y}=this._vertices.pop();this.manipulators.remove(y)}for(let y=this._vertices.length;y<e.length;y++){const[v,_]=e[y],M=FGe(new ut({x:v,y:_,spatialReference:t}),this.view,this._manipulatorLayer,this.palette),k=this.manipulators.add(M);c4(M,(O,R)=>{R.next(VUe(this.view)).next(FUe(O.graphic,_o.Local)).next(()=>{const D=O.graphic.geometry;this._vertices[y].coord=[D.x,D.y],this._updatePolylines()})}),this._vertices.push({manipulatorId:k,coord:[v,_]})}const i=this._vertices.length-1,r=this._vertices[i],[s,l]=e[i];if(r.coord[0]!==s||r.coord[1]!==l){r.coord=[s,l];const y=new ut({x:s,y:l,spatialReference:t});this.manipulators.findById(r.manipulatorId).graphic.geometry=y}const d=this._drawActive?this._vertices[i].manipulatorId:null;this.manipulators.forEach(y=>{y.manipulator.interactive=d==null||y.id!==d}),this._updatePolylines()}_updatePolylines(){const e=this._vertices.map(v=>v.coord),{measurement:t,drawing:i,original:r}=DGe(e,this.view.spatialReference,this.geodesicDistanceThreshold);this._set("measurement",t);const s=VGe(this.messages,t,this.unit);let l,d;this._set("measurementLabel",s);const{graphics:y}=this._measurementLayer;if(y.length===2)l=y.getItemAt(0),d=y.getItemAt(1);else{const{pathPrimaryColor:v,pathSecondaryColor:_,pathWidth:M}=this.palette;l=new pn({symbol:new fp({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[14,12],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:M-1.5,color:_},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:M,color:v}]}}})}),d=new pn({symbol:new W1({color:[255,255,255,1],haloColor:[0,0,0,.5],haloSize:2,font:new D3({size:14,family:"sans-serif"})})}),y.removeAll(),y.addMany([l,d])}l.geometry=i,d.geometry=r.extent.center,d.symbol.text=s}};function FGe(e,t,i,r){const s=new is({style:"circle",color:r.handleColor,size:r.handleWidth,outline:{type:"simple-line",width:0}}),l=new is({style:"circle",color:r.handleColor,size:1.5*r.handleWidth,outline:{type:"simple-line",width:0}}),d=new pn({geometry:e,symbol:s});return new Os({view:t,layer:i,graphic:d,focusedSymbol:l})}function DGe(e,t,i){const r=new zr({paths:[e],spatialReference:t});let s,l;if(t.isGeographic)if(ey(t))s=gb([r],"meters")[0],l=u4(r,O5);else{const d=uo(r,Ct.WGS84),y=u4(d,O5);s=gb([d],"meters")[0],l=uo(y,t)}else if(t.isWebMercator)s=V$(r,"meters"),l=Gle(r,O5,"meters");else{const d=qle(r,"meters");if(d>=i){const y=uo(r,Ct.WGS84),v=u4(y,O5);s=gb([y],"meters")[0],l=uo(v,t)}else s=d,l=r}return{measurement:{geometry:l,length:s},original:r,drawing:l}}function jGe(e){return e!=null}function zGe(e){if(!e)return!1;const{isGeographic:t,isWebMercator:i,isWGS84:r}=e;return t&&!r&&!ey(e)||!t&&!i}function VGe(e,t,i){if(!t||!e)return null;switch(i){case"metric":return hie(e,t.length,"meters");case"imperial":return pie(e,t.length,"meters");default:return wf(e,xi(t.length,"meters",i),i)}}g([S()],ba.prototype,"_drawActive",void 0),g([S({readOnly:!0})],ba.prototype,"cursor",null),g([S({value:!0})],ba.prototype,"editable",null),g([S({type:Number})],ba.prototype,"geodesicDistanceThreshold",void 0),g([S({readOnly:!0})],ba.prototype,"measurement",void 0),g([S({readOnly:!0})],ba.prototype,"measurementLabel",void 0),g([S()],ba.prototype,"messages",void 0),g([S()],ba.prototype,"palette",void 0),g([S()],ba.prototype,"unit",void 0),g([S({constructOnly:!0})],ba.prototype,"view",void 0),ba=g([Q("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DTool")],ba);let kh=class extends st{constructor(e){super(e),this.tool=null,this._baseHandles=new ir,this._loggedUnsupportedErrorOnce=!1,this.logger=Ke.getLogger(this.declaredClass),e&&e.visible!=null&&(this.visible=e.visible)}initialize(){this._baseHandles.add(Pe(()=>({ready:K(this.view)&&this.view.ready,supported:this.supported}),({ready:e,supported:t})=>{!e||t||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)},vl))}destroy(){this.removeTool(),this.view=null,this._baseHandles=Oi(this._baseHandles)}get supported(){return ce(this.view)||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this._baseHandles.remove(t),ce(e)||this._baseHandles.add(e.tools.on("after-remove",i=>{i.item===this.tool&&this._set("tool",null)}),t)}set visible(e){this._set("visible",e),K(this.tool)&&(this.tool.visible=e)}get active(){return K(this.tool)&&this.tool.active}get disabled(){return ce(this.view)||!this.view.ready||!this.supported}createTool(e={interactive:!1}){if(this.removeTool(),ce(this.view)||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),gs(()=>t.created,()=>{t.active&&K(this.view)&&(this.view.activeTool=null)},{initial:!0,once:!0})):t.destroy()}removeTool(){const e=this.tool;if(ce(e))return;const t=Uo(this.view,i=>i.tools);K(t)?t.remove(e):e.destroy(),this._set("tool",null)}logError(...e){this.logger.error(...e)}};g([S({constructOnly:!0})],kh.prototype,"tool",void 0),g([S()],kh.prototype,"supported",null),g([S({value:null})],kh.prototype,"view",null),g([S({type:Boolean,value:!0})],kh.prototype,"visible",null),g([S()],kh.prototype,"active",null),g([S()],kh.prototype,"disabled",null),kh=g([Q("esri.widgets.support.InteractiveToolViewModel")],kh);const UGe={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:5,pathPrimaryColor:[255,128,0,255],pathSecondaryColor:[255,255,255,255]};let fu=class extends kh{constructor(e){super(e),this.supportedViewType="2d",this.unsupportedErrorMessage="DistanceMeasurement2DViewModel is only supported in 2D views.",this._handles=new ir,this.geodesicDistanceThreshold=1e5,this.measurement=null,this.measurementLabel=null,this.palette=UGe}initialize(){this._handles.add([Pe(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},()=>this.clear()),Pe(()=>this.unit,e=>{K(this.tool)&&(this.tool.unit=e)},Jt),Pe(()=>this.geodesicDistanceThreshold,e=>{K(this.tool)&&(this.tool.geodesicDistanceThreshold=e)},Jt),Pe(()=>this.palette,e=>{K(this.tool)&&(this.tool.palette=e)},Jt)])}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}get state(){var e;return this.disabled||ce(this.view)||!jGe((e=this.view)==null?void 0:e.spatialReference)?"disabled":K(this.tool)&&this.measurement?this.tool.active?"measuring":"measured":"ready"}get unit(){return this._validateUnit(this.defaultUnit)}set unit(e){e!==void 0?this._override("unit",this._validateUnit(e)):this._clearOverride("unit")}get unitOptions(){return $9}set unitOptions(e){e!==void 0?this._override("unitOptions",this._validateUnits(e)):this._clearOverride("unitOptions")}async start(){const e=this.view;K(e)&&(await mv(()=>e.ready),zGe(e.spatialReference)&&await lp()),this.createTool({interactive:!0})}clear(){this.removeTool()}constructTool(){return new ba({view:this.view,visible:this.visible,geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})}_validateUnit(e){return this.unitOptions.includes(e)?e:this.unitOptions.includes(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}_validateUnits(e=[]){const t=e.filter(i=>$9.includes(i));return t.length===0?$9.slice():t}};g([S(_ze)],fu.prototype,"defaultUnit",void 0),g([S({type:Number})],fu.prototype,"geodesicDistanceThreshold",void 0),g([S({readOnly:!0,aliasOf:"tool.measurement"})],fu.prototype,"measurement",void 0),g([S({readOnly:!0,aliasOf:"tool.measurementLabel"})],fu.prototype,"measurementLabel",void 0),g([S()],fu.prototype,"palette",void 0),g([S({readOnly:!0})],fu.prototype,"state",null),g([S({type:String})],fu.prototype,"unit",null),g([S({type:[String]})],fu.prototype,"unitOptions",null),fu=g([Q("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel")],fu);const Rue=fu,ls="esri-distance-measurement-2d",on={buttonDisabled:"esri-button--disabled",widgetIcon:"esri-icon-measure-line",base:`${ls} esri-widget esri-widget--panel`,container:`${ls}__container`,hint:`${ls}__hint`,hintText:`${ls}__hint-text`,panelError:`${ls}__panel--error`,measurement:`${ls}__measurement`,measurementItem:`${ls}__measurement-item`,measurementItemDisabled:`${ls}__measurement-item--disabled`,measurementItemTitle:`${ls}__measurement-item-title`,measurementItemValue:`${ls}__measurement-item-value`,settings:`${ls}__settings`,units:`${ls}__units`,unitsLabel:`${ls}__units-label`,unitsSelect:`${ls}__units-select esri-select`,unitsSelectWrapper:`${ls}__units-select-wrapper`,actionSection:`${ls}__actions`,newMeasurementButton:`${ls}__clear-button esri-button esri-button--primary`};let Ls=class extends rr{constructor(e,t){super(e,t),this.iconClass=on.widgetIcon,this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new Rue}render(){const{id:e,messages:t,messagesUnits:i,viewModel:r,visible:s}=this,{active:l,supported:d,measurementLabel:y,state:v,unit:_,unitOptions:M}=r,k=v==="disabled",O=v==="measuring"||v==="measured",R=l&&v==="ready"?Z("section",{key:"hint",class:on.hint},Z("p",{class:on.hintText},t.hint)):null,D=d?null:Z("section",{key:"unsupported",class:on.panelError},Z("p",null,t.unsupported)),z=(ue,_e,xe)=>_e?Z("div",{key:`${xe}-enabled`,class:on.measurementItem},Z("span",{class:on.measurementItemTitle},ue),Z("span",{class:on.measurementItemValue},_e)):Z("div",{key:`${xe}-disabled`,class:this.classes(on.measurementItem,on.measurementItemDisabled),"aria-disabled":"true"},Z("span",{class:on.measurementItemTitle},ue)),B=O?Z("section",{key:"measurement",class:on.measurement},z(t.distance,y,"distance")):null,V=`${e}-units`,q=O?Z("section",{key:"units",class:on.units},Z("label",{class:on.unitsLabel,for:V},t.unit),Z("div",{class:on.unitsSelectWrapper},Z("select",{class:on.unitsSelect,id:V,onchange:this._changeUnit,bind:this,value:_},M.map(ue=>{var _e;return Z("option",{key:ue,value:ue},r9e(ue)?i.systems[ue]:(_e=i.units[ue])==null?void 0:_e.pluralCapitalized)})))):null,J=O?Z("div",{key:"settings",class:on.settings},q):null,ne=!d||l&&!O?null:Z("div",{class:on.actionSection},Z("button",{disabled:k,class:this.classes(on.newMeasurementButton,k&&on.buttonDisabled),bind:this,onclick:this._newMeasurement,title:t.newMeasurement,"aria-label":t.newMeasurement,type:"button"},t.newMeasurement)),re=s?Z("div",{class:on.container},D,R,J,B,ne):null;return Z("div",{class:on.base},re)}_newMeasurement(){M1(this.viewModel.start())}_changeUnit(e){const t=e.target,i=t.options[t.selectedIndex];i&&(this.viewModel.unit=i.value)}};g([tt("viewModel.active")],Ls.prototype,"active",void 0),g([S()],Ls.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ls.prototype,"label",void 0),g([S()],Ls.prototype,"uiStrings",void 0),g([S(),Gi("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],Ls.prototype,"messages",void 0),g([S(),Gi("esri/core/t9n/Units")],Ls.prototype,"messagesUnits",void 0),g([tt("viewModel.unit")],Ls.prototype,"unit",void 0),g([tt("viewModel.unitOptions")],Ls.prototype,"unitOptions",void 0),g([tt("viewModel.view")],Ls.prototype,"view",void 0),g([S({type:Rue})],Ls.prototype,"viewModel",void 0),g([tt("viewModel.visible")],Ls.prototype,"visible",void 0),g([Dn()],Ls.prototype,"_newMeasurement",null),g([Dn()],Ls.prototype,"_changeUnit",null),Ls=g([Q("esri.widgets.DistanceMeasurement2D")],Ls);const BGe=Ls;function GGe(e){const{wkid:t}=e;if(te[t]!=null)return te.values[te[t]];const{wkt:i}=e,r=i.lastIndexOf(",")+1,s=i.lastIndexOf("]]");return parseFloat(i.substring(r,s))}function uJ(e,t){return e&&e.includes(t)}function cJ(e,t){const{x:i,y:r}=e==="decimal-degrees"?jm(t,!0):t;return[i,r]}function hJ({state:{paddedViewState:e},spatialReference:t,width:i}){return t.isWrappable&&e.worldScreenWidth<i}let Mm=class extends st{constructor(e){super(e),this.scaleComputedFrom=Un(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t)return null;const i=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(ce(i))return null;if(t==="metric")return this._getScaleBarProps(e,i,"metric");const r=i/1.609;return this._getScaleBarProps(e,r,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:t,wkid:i,wkt:r}=e;return t||uJ(r,"WGS_1984_Web_Mercator")?"decimal-degrees":te[i]!=null||uJ(r,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,t){const{state:i,spatialReference:r}=e,s=this._getLocationUnit();if(s==="linear-unit")return i.extent.width*GGe(r)/1e3;const[l,d]=this._getScaleMeasuringPoints(e,t),y=s==="decimal-degrees"||r.isGeographic&&!ey(r)?Ct.WGS84:r,v=new zr({paths:[[cJ(s,l),cJ(s,d)]],spatialReference:y}),_=tre(v,10);let M;try{[M]=gb([_],"kilometers")}catch{return null}return M}_getScaleMeasuringPoints(e,t){const{width:i,height:r,position:s,spatialReference:l}=e;if(hJ(e)){const{valid:_}=La(l);return[new ut(_[0],0,l),new ut(_[1],0,l)]}let d=t.y-s[1];d>r?d=r:d<0&&(d=0);const y=Un(0,d),v=Un(i,d);return[e.toMap(y),e.toMap(v)]}_getScaleBarProps(e,t,i){const{view:r}=this;let s=e*t/(hJ(r)?r.state.paddedViewState.worldScreenWidth:r.width),l=i==="metric"?"km":"mi";s<.1&&(l==="mi"?(s*=5280,l="ft"):l==="km"&&(s*=1e3,l="m"));let d=0;for(;s>=1;)s/=10,d++;const y=this._getConstraints(s);if(!y)return null;const{min:v,max:_}=y,M=_/s>=s/v?v:_;return{length:e*(M/s),value:10**d*M,unit:l}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};g([S()],Mm.prototype,"scaleComputedFrom",void 0),g([S({readOnly:!0})],Mm.prototype,"state",null),g([S()],Mm.prototype,"view",void 0),Mm=g([Q("esri.widgets.Scalebar.ScaleBarViewModel")],Mm);const qGe=Mm,Pr={base:"esri-scale-bar esri-widget",labelContainer:"esri-scale-bar__label-container",rulerLabelContainer:"esri-scale-bar__label-container--ruler",lineLabelContainer:"esri-scale-bar__label-container--line",topLabelContainer:"esri-scale-bar__label-container--top",bottomLabelContainer:"esri-scale-bar__label-container--bottom",label:"esri-scale-bar__label",line:"esri-scale-bar__line",topLine:"esri-scale-bar__line--top",bottomLine:"esri-scale-bar__line--bottom",ruler:"esri-scale-bar__ruler",rulerBlock:"esri-scale-bar__ruler-block",barContainer:"esri-scale-bar__bar-container",rulerBarContainer:"esri-scale-bar__bar-container--ruler",lineBarContainer:"esri-scale-bar__bar-container--line",disabled:"esri-disabled"};function L5(e){return 2*e}let yu=class extends rr{constructor(e,t){super(e,t),this.label=void 0,this.messages=null,this.unit="non-metric",this.view=null,this.viewModel=new qGe}initialize(){this.own([Pe(()=>{const{view:e}=this;return[e==null?void 0:e.stationary,e==null?void 0:e.center,e==null?void 0:e.scale,e==null?void 0:e.zoom]},([e])=>{e&&this.scheduleRender()})])}set style(e){const t=this.unit==="dual"?"line":e;this._set("style",t)}castStyle(e){return e==="line"?e:"ruler"}castUnit(e){return e==="metric"||e==="dual"?e:"non-metric"}render(){const e=this.get("viewModel.state")==="disabled",t={[Pr.disabled]:e};let i,r;if(!e){const{unit:s,style:l}=this,d=s==="metric"||s==="dual",y=50;if(s==="non-metric"||s==="dual"){const v=this.viewModel.getScaleBarProperties(y,"non-metric");v&&(r=l==="ruler"?this._renderRuler(v):this._renderLine(v,"bottom"))}if(d){const v=this.viewModel.getScaleBarProperties(y,"metric");v&&(i=l==="ruler"?this._renderRuler(v):this._renderLine(v,"top"))}}return Z("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(Pr.base,t)},i,r)}_renderRuler(e){const t=L5(Math.round(e.length)),{messages:i}=this,r=i[e.unit]||i.unknownUnit,s=`${L5(e.value)} ${r}`;return Z("div",{class:this.classes(Pr.barContainer,Pr.rulerBarContainer),key:"esri-scale-bar__ruler"},Z("div",{class:Pr.ruler,styles:{width:`${t}px`}},Z("div",{class:Pr.rulerBlock}),Z("div",{class:Pr.rulerBlock}),Z("div",{class:Pr.rulerBlock}),Z("div",{class:Pr.rulerBlock})),Z("div",{class:this.classes(Pr.labelContainer,Pr.rulerLabelContainer)},Z("div",{class:Pr.label},"0"),Z("div",{class:Pr.label},s)))}_renderLine(e,t){const{messages:i}=this,r=i[e.unit]||i.unknownUnit,s=`${L5(e.value)} ${r}`,l={[Pr.topLabelContainer]:t==="top",[Pr.bottomLabelContainer]:t==="bottom"},d=Z("div",{class:this.classes(Pr.labelContainer,Pr.lineLabelContainer,l),key:"esri-scale-bar__label"},Z("div",{class:Pr.label},s)),y={[Pr.topLine]:t==="top",[Pr.bottomLine]:t==="bottom"},v=L5(Math.round(e.length)),_=Z("div",{class:this.classes(Pr.line,y),key:"esri-scale-bar__line",styles:{width:`${v}px`}});return Z("div",{class:this.classes(Pr.barContainer,Pr.lineBarContainer),key:"esri-scale-bar__line-container"},[_,d])}_handleRootCreateOrUpdate(e){const t=this.viewModel;if(!t)return;const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset,l=Un(r,s);(l.x!==t.scaleComputedFrom.x||l.y!==t.scaleComputedFrom.y)&&(t.scaleComputedFrom=l)}};g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],yu.prototype,"label",void 0),g([S(),Gi("esri/widgets/ScaleBar/t9n/ScaleBar")],yu.prototype,"messages",void 0),g([S()],yu.prototype,"style",null),g([oi("style")],yu.prototype,"castStyle",null),g([S()],yu.prototype,"unit",void 0),g([oi("unit")],yu.prototype,"castUnit",null),g([tt("viewModel.view")],yu.prototype,"view",void 0),g([S()],yu.prototype,"viewModel",void 0),yu=g([Q("esri.widgets.ScaleBar")],yu);const HGe=yu;new Dt({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Dt({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let Uf=class extends Ve{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};g([S({type:String,json:{write:!0}})],Uf.prototype,"deviationUnit",void 0),g([S({json:{read:{reader:e=>e?e.map(t=>vo(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],Uf.prototype,"geometries",void 0),g([S({type:Number,json:{write:!0}})],Uf.prototype,"maxDeviation",void 0),Uf=g([Q("esri.rest.support.GeneralizeParameters")],Uf),Uf.from=er(Uf);new Dt({preserveShape:"preserve-shape"});let qp=class extends Ve{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};g([S({type:String,json:{write:!0}})],qp.prototype,"calculationType",void 0),g([S({type:Boolean,json:{write:!0}})],qp.prototype,"geodesic",void 0),g([S({json:{write:!0}})],qp.prototype,"lengthUnit",void 0),g([S({type:[zr],json:{read:{reader:e=>e?e.map(t=>vo(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],qp.prototype,"polylines",void 0),qp=g([Q("esri.rest.support.LengthsParameters")],qp),qp.from=er(qp);new Dt({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Dt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let oh=class extends Ve{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};g([S({type:Number,json:{write:!0}})],oh.prototype,"bevelRatio",void 0),g([S({json:{read:{reader:e=>e?e.map(t=>vo(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],oh.prototype,"geometries",void 0),g([S({type:Number,json:{write:!0}})],oh.prototype,"offsetDistance",void 0),g([S({type:String,json:{write:!0}})],oh.prototype,"offsetHow",void 0),g([S({type:String,json:{write:!0}})],oh.prototype,"offsetUnit",void 0),oh=g([Q("esri.rest.support.OffsetParameters")],oh),oh.from=er(oh);function WGe(e,t,i){const r=CQ(t);return e.map(s=>{const l=r.fromJSON(s);return l.spatialReference=i,l})}let T0=class extends Ve{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:gv(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};g([S()],T0.prototype,"geometries",void 0),g([S({json:{read:{source:"outSR"}}})],T0.prototype,"outSpatialReference",void 0),g([S()],T0.prototype,"transformation",void 0),g([S()],T0.prototype,"transformForward",void 0),T0=g([Q("esri.rest.support.ProjectParameters")],T0);const Nue=T0,JGe=er(Nue);async function KGe(e,t,i){t=JGe(t);const r=Xie(e),s={...r.query,f:"json",...t.toJSON()},l=t.outSpatialReference,d=gv(t.geometries[0]),y=uEe(s,i);return Bi(r.path+"/project",y).then(({data:{geometries:v}})=>WGe(v,d,l))}new Dt({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Hp=class extends Ve{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};g([S({json:{read:{reader:e=>e?e.map(t=>vo(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(i=>i.toJSON())}}}})],Hp.prototype,"geometries1",void 0),g([S({json:{read:{reader:e=>e?e.map(t=>vo(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(i=>i.toJSON())}}}})],Hp.prototype,"geometries2",void 0),g([S({type:String,json:{write:!0}})],Hp.prototype,"relation",void 0),g([S({type:String,json:{write:!0}})],Hp.prototype,"relationParameter",void 0),Hp=g([Q("esri.rest.support.RelationParameters")],Hp),Hp.from=er(Hp);new Dt({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let Bf=class extends Ve{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};g([S({type:String,json:{write:!0}})],Bf.prototype,"extendHow",void 0),g([S({type:[zr],json:{read:{reader:e=>e?e.map(t=>vo(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Bf.prototype,"polylines",void 0),g([S({json:{read:{reader:e=>e?vo(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],Bf.prototype,"trimExtendTo",void 0),Bf=g([Q("esri.rest.support.TrimExtendParameters")],Bf),Bf.from=er(Bf);const Fue=Ke.getLogger("esri.widgets.support.geolocationUtils"),ZGe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function YGe(){const e=ke("esri-geolocation");return e||Fue.warn("geolocation-unsupported","Geolocation unsupported."),e}function XGe(){const e=window.isSecureContext;return e||Fue.warn("insecure-context","Geolocation requires a secure origin."),e}function QGe(){return YGe()&&XGe()}function eqe(e){return e||(e=ZGe),new Promise((i,r)=>{setTimeout(()=>r(new ge("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e)})}function tqe(e,t){const{position:i,view:r}=e;return nqe(rqe(iqe(i)),r,t)}function iqe(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:i,timestamp:e.timestamp}}function rqe(e){const t=e&&e.coords;return t?new ut({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function nqe(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(Wh(e)):sqe(i).then(s=>{if(!s)throw new ge("geometry-service:missing-url","Geometry service URL is missing");const l=new Nue({geometries:[e],outSpatialReference:r});return KGe(s,l,i).then(d=>d[0])})}function sqe(e){if(hi.geometryServiceUrl)return Promise.resolve(hi.geometryServiceUrl);const t=Bn.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}const oqe=2500;let mc=class extends R$(bs.EventedMixin(st)){constructor(){super(...arguments),this._geolocationUsable=!0,this._iconPath=li("esri/images/support/sdk_gps_location.png"),this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new pn({symbol:new V3({url:this._iconPath,width:21,height:21})}),this.scale=null,this.useHeadingEnabled=!0,this.view=null}initialize(){QGe()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){this.view&&this.view.graphics.remove(this.graphic)}_getScaleWithinConstraints(e,t){if(!t)return e;if(t.type==="2d"){const{effectiveMaxScale:i,effectiveMinScale:r}=t.constraints;return Math.min(r,Math.max(i,e))}return e}_getScale(e){const{scale:t}=this,i=typeof t=="number"?t:oqe;return this._getScaleWithinConstraints(i,e)}_getHeading(e,t){const i=t&&t.spatialReference,r=i&&(i.isWebMercator||i.isGeographic),s=e.coords&&e.coords.heading;if(!(!r||typeof s!="number"||isNaN(s)||s<0||s>360))return s}_addHeading(e){const{heading:t,target:i,view:r}=e;r&&typeof t=="number"&&!isNaN(t)&&(r.type!=="3d"?r.type==="2d"&&(i.rotation=360-t):i.heading=t)}_animatePoint(e,t,i,r){const{view:s}=this;if(!this.goToLocationEnabled||!s)return Promise.resolve(t);const l=this.useHeadingEnabled?this._getHeading(t,s):void 0,d={target:e,scale:i};return this._addHeading({heading:l,target:d,view:s}),this.callGoTo({target:d,options:r}).then(()=>t)}async _setPosition(e,t){try{const i=await tqe({position:e,view:this.view},t),{graphic:r}=this,{timestamp:s}=e,{coords:l}=e,{accuracy:d,altitude:y,altitudeAccuracy:v,heading:_,latitude:M,longitude:k,speed:O}=l,R={timestamp:s,accuracy:d,altitude:y,altitudeAccuracy:v,heading:_,latitude:M,longitude:k,speed:O};r&&(r.geometry=i,r.attributes=R);const D=this._getScale(this.view);return this._animatePoint(i,e,D,t)}catch(i){throw new ge("positioning:invalid-point","Cannot position invalid point",{error:i})}}};g([S()],mc.prototype,"_geolocationUsable",void 0),g([S()],mc.prototype,"geolocationOptions",void 0),g([S()],mc.prototype,"goToLocationEnabled",void 0),g([S()],mc.prototype,"graphic",void 0),g([S()],mc.prototype,"scale",void 0),g([S()],mc.prototype,"useHeadingEnabled",void 0),g([S()],mc.prototype,"view",void 0),mc=g([Q("esri.widgets.support.GeolocationPositioning")],mc);const aqe=mc;async function lqe(){const e=await Hb("esri/widgets/Locate/t9n/Locate");return new H1({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[JA.clone()],content:[{type:"fields"}]})}let _d=class extends aqe{constructor(e){super(e),this._locateController=null,this._handles=new ir,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this._handles.add([B6(()=>{var r;const{graphic:e,view:t}=this;((r=t==null?void 0:t.graphics)==null?void 0:r.includes(e))&&this._updatePopupTemplate(e)})])}destroy(){this.cancelLocate(),this._handles.destroy(),this._handles=null}get state(){return this._geolocationUsable?this.get("view.ready")?this._locateController?"locating":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new ge("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new ge("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const e=new AbortController;this._locateController=e;try{let t=await eqe(this.geolocationOptions);return t=await this._setPosition(t,{signal:e.signal}),this._locateController!==e?null:(this.graphic&&(this.graphic=this.graphic.clone(),await this._updatePopupTemplate(this.graphic),this.view.graphics.push(this.graphic)),this.emit("locate",{position:t}),this._locateController=null,t)}catch(t){throw this._locateController=null,this.emit("locate-error",{error:t}),t}}cancelLocate(){this._clear(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(e){if(!this.popupEnabled)return;const t=await lqe(),i=e!==this.graphic;this.destroyed||i||(e.popupTemplate=t)}};g([S()],_d.prototype,"_locateController",void 0),g([S()],_d.prototype,"popupEnabled",void 0),g([S({readOnly:!0})],_d.prototype,"state",null),g([S()],_d.prototype,"locate",null),g([S()],_d.prototype,"cancelLocate",null),_d=g([Q("esri.widgets.Locate.LocateViewModel")],_d);const Due=_d,ah={base:"esri-locate esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-icon",locate:"esri-icon-locate",loading:"esri-icon-loading-indicator",rotating:"esri-rotating",widgetIcon:"esri-icon-north-navigation",disabled:"esri-disabled",hidden:"esri-hidden"};let Pn=class extends rr{constructor(e,t){super(e,t),this.geolocationOptions=null,this.goToLocationEnabled=null,this.goToOverride=null,this.graphic=null,this.iconClass=ah.widgetIcon,this.label=void 0,this.messages=null,this.messagesCommon=null,this.popupEnabled=null,this.scale=null,this.useHeadingEnabled=null,this.view=null,this.viewModel=new Due}cancelLocate(){}locate(){}render(){const e=this.get("viewModel.state"),t=e==="locating",i={[ah.disabled]:e==="disabled",[ah.hidden]:e==="feature-unsupported"},r={[ah.loading]:t,[ah.rotating]:t,[ah.locate]:!t},s=e==="locating"?this.messagesCommon.cancel:this.messages.title;return Z("div",{bind:this,class:this.classes(ah.base,i),hidden:e==="feature-unsupported",onclick:this._locate,onkeydown:this._locate,role:"button",tabIndex:0,"aria-label":s,title:s},Z("span",{"aria-hidden":"true",class:this.classes(ah.icon,r)}),Z("span",{class:ah.text},this.messages.title))}_locate(){const{viewModel:e}=this;e.state==="locating"?e.cancelLocate():e.locate()}};g([tt("viewModel.geolocationOptions")],Pn.prototype,"geolocationOptions",void 0),g([tt("viewModel.goToLocationEnabled")],Pn.prototype,"goToLocationEnabled",void 0),g([tt("viewModel.goToOverride")],Pn.prototype,"goToOverride",void 0),g([tt("viewModel.graphic")],Pn.prototype,"graphic",void 0),g([S()],Pn.prototype,"iconClass",void 0),g([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Pn.prototype,"label",void 0),g([S(),Gi("esri/widgets/Locate/t9n/Locate")],Pn.prototype,"messages",void 0),g([S(),Gi("esri/t9n/common")],Pn.prototype,"messagesCommon",void 0),g([tt("viewModel.popupEnabled")],Pn.prototype,"popupEnabled",void 0),g([tt("viewModel.scale")],Pn.prototype,"scale",void 0),g([tt("viewModel.useHeadingEnabled")],Pn.prototype,"useHeadingEnabled",void 0),g([tt("viewModel.view")],Pn.prototype,"view",void 0),g([S({type:Due}),yR(["locate","locate-error"])],Pn.prototype,"viewModel",void 0),g([tt("viewModel.cancelLocate")],Pn.prototype,"cancelLocate",null),g([tt("viewModel.locate")],Pn.prototype,"locate",null),g([Dn()],Pn.prototype,"_locate",null),Pn=g([Q("esri.widgets.Locate")],Pn);const uqe=Pn,Pw="top-right";function cqe(e){const t=new vze({view:e,source:[Tc.fromId("topo-vector"),Tc.fromId("streets-vector"),Tc.fromId("satellite")]});e.ui.components=["attribution"],e.ui.add(new BGe({view:e,unit:"miles"}),Pw),e.ui.add(new bze({view:e,content:t,expandTooltip:"Basemap Gallery"}),Pw),e.ui.add(new uqe({view:e}),Pw),e.ui.add(new wze({view:e}),Pw),e.ui.add(new Bae({view:e}),Pw),e.ui.add(new HGe({view:e}),"bottom-right")}const hqe={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function KKe(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?Jse:e==="esriGeometryPolyline"?Kse:Zse}}}const pqe=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let dqe=1;function ZKe(e,t){if(ke("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const s in e)i+=`this${pqe.test(s)?`.${s}`:`["${s}"]`} = ${JSON.stringify(e[s])};`;const r=new Function(`
      return class AttributesClass$${dqe++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[t]:null,...e})}}function YKe(e={}){return[{name:"New Feature",description:"",prototype:{attributes:Me(e)}}]}function fqe(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:hqe,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}const pJ=Ke.getLogger("esri.layers.graphics.sources.GeoJSONSource");let I0=class extends za{constructor(){super(...arguments),this.type="geojson",this.refresh=cv(async e=>{await this.load();const{extent:t,timeExtent:i}=await this._connection.invoke("refresh",e);return this.sourceJSON.extent=t,i&&(this.sourceJSON.timeInfo.timeExtent=[i.start,i.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const t=K(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t)).then(i=>K3.fromJSON(i))}queryFeaturesJSON(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t))}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:yi.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}_applyEdits(e){if(!this._connection)throw new ge("geojson-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField,i=[],r=[],s=[];if(e.addFeatures)for(const l of e.addFeatures)i.push(this._serializeFeature(l));if(e.deleteFeatures)for(const l of e.deleteFeatures)"objectId"in l&&l.objectId!=null?r.push(l.objectId):"attributes"in l&&l.attributes[t]!=null&&r.push(l.attributes[t]);if(e.updateFeatures)for(const l of e.updateFeatures)s.push(this._serializeFeature(l));return this._connection.invoke("applyEdits",{adds:i,updates:s,deletes:r}).then(({extent:l,timeExtent:d,featureEditResults:y})=>(this.sourceJSON.extent=l,d&&(this.sourceJSON.timeInfo.timeExtent=[d.start,d.end]),this._createEditsResult(y)))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new ge("geojson-layer-source:edit-failure",t.description,{code:t.code}):null}}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e);return i?{geometry:i.toJSON(),attributes:t}:{attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ce(t)?null:t.type==="mesh"||t.type==="extent"?go.fromExtent(t.extent):t}async _startWorker(e){this._connection=await Nee("GeoJSONSourceWorker",{strategy:ke("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,hasZ:r,geometryType:s,objectIdField:l,url:d,timeInfo:y,customParameters:v}=this.layer,_=this.layer.originOf("spatialReference")==="defaults",M={url:d,customParameters:v,fields:t&&t.map(O=>O.toJSON()),geometryType:bP.toJSON(s),hasZ:r,objectIdField:l,timeInfo:y?y.toJSON():null,spatialReference:_?null:i&&i.toJSON()},k=await this._connection.invoke("load",M,{signal:e});for(const O of k.warnings)pJ.warn(O.message,{layer:this.layer,warning:O});k.featureErrors.length&&pJ.warn(`Encountered ${k.featureErrors.length} validation errors while loading features`,k.featureErrors),this.sourceJSON=k.layerDefinition,this.capabilities=fqe(this.sourceJSON.hasZ,!0)}};g([S()],I0.prototype,"capabilities",void 0),g([S()],I0.prototype,"type",void 0),g([S({constructOnly:!0})],I0.prototype,"layer",void 0),g([S()],I0.prototype,"sourceJSON",void 0),I0=g([Q("esri.layers.graphics.sources.GeoJSONSource")],I0);const yqe=toe();let ni=class extends Dse(Ise(Cse(nN(Bse(oN(Vse(Nse(tN(zg))))))))){constructor(e){super(e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new I0({layer:this}),this.spatialReference=Ct.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null}destroy(){var e;(e=this.source)==null||e.destroy()}load(e){return this.addResolvingPromise(this.source.load(e).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),aS(this.renderer,this.fieldsIndex),MP(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return this.url?en(this.url):null}set renderer(e){aS(e,this.fieldsIndex),this._set("renderer",e)}set url(e){if(!e)return void this._set("url",e);const t=en(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async applyEdits(e,t){const i=await Le(()=>import("./editingSupport.f709eb0e.js"),[],import.meta.url);await this.load();const r=await i.applyEdits(this,this.source,e,t);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),r}on(e,t){return super.on(e,t)}createPopupTemplate(e){return ioe(this,e)}createQuery(){const e=new lo,t=this.get("capabilities.data");e.returnGeometry=!0,t&&t.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:r}=this;return e.timeExtent=i!=null&&r!=null?r.offset(-i.value,i.unit):r||null,e}getFieldDomain(e,t){let i,r=!1;const s=t&&t.feature,l=s&&s.attributes,d=this.typeIdField&&l&&l[this.typeIdField];return d!=null&&this.types&&(r=this.types.some(y=>y.id==d&&(i=y.domains&&y.domains[e],i&&i.type==="inherited"&&(i=this._getLayerDomain(e)),!0))),r||i||(i=this._getLayerDomain(e)),i}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(lo.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(lo.from(e)||this.createQuery(),t))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(lo.from(e)||this.createQuery(),t))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(lo.from(e)||this.createQuery(),t))}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return K(t)&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_getLayerDomain(e){if(!this.fields)return null;let t=null;return this.fields.some(i=>(i.name===e&&(t=i.domain),!!t)),t}};g([S({readOnly:!0,json:{read:!1,write:!1}})],ni.prototype,"capabilities",null),g([S({type:String})],ni.prototype,"copyright",void 0),g([S({readOnly:!0})],ni.prototype,"createQueryVersion",null),g([S({readOnly:!0})],ni.prototype,"defaultPopupTemplate",null),g([S({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ni.prototype,"definitionExpression",void 0),g([S({type:String})],ni.prototype,"displayField",void 0),g([S({type:Boolean})],ni.prototype,"editingEnabled",void 0),g([S(Lse)],ni.prototype,"elevationInfo",void 0),g([S(eoe)],ni.prototype,"featureReduction",void 0),g([S({type:[J3],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],ni.prototype,"fields",void 0),g([S(yqe.fieldsIndex)],ni.prototype,"fieldsIndex",void 0),g([S({type:yi,json:{name:"extent"}})],ni.prototype,"fullExtent",void 0),g([S({type:["point","polygon","polyline","multipoint"],json:{read:{reader:bP.read}}})],ni.prototype,"geometryType",void 0),g([S({type:Boolean})],ni.prototype,"hasZ",void 0),g([S(Pse)],ni.prototype,"id",void 0),g([S({type:Boolean,readOnly:!0})],ni.prototype,"isTable",null),g([S(I$)],ni.prototype,"labelsVisible",void 0),g([S({type:[r_],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:GA},write:!0}})],ni.prototype,"labelingInfo",void 0),g([S(Ose)],ni.prototype,"legendEnabled",void 0),g([S({type:["show","hide"]})],ni.prototype,"listMode",void 0),g([S({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],ni.prototype,"objectIdField",void 0),g([S(hb)],ni.prototype,"opacity",void 0),g([S({type:["GeoJSON"]})],ni.prototype,"operationalLayerType",void 0),g([S({readOnly:!0})],ni.prototype,"parsedUrl",null),g([S(T$)],ni.prototype,"popupEnabled",void 0),g([S({type:H1,json:{name:"popupInfo",write:!0}})],ni.prototype,"popupTemplate",void 0),g([S({types:i_,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:yse}}}})],ni.prototype,"renderer",null),g([S(kse)],ni.prototype,"screenSizePerspectiveEnabled",void 0),g([S({readOnly:!0})],ni.prototype,"source",void 0),g([S({type:Ct})],ni.prototype,"spatialReference",void 0),g([S({type:[C$]})],ni.prototype,"templates",void 0),g([S()],ni.prototype,"title",void 0),g([S({json:{read:!1},readOnly:!0})],ni.prototype,"type",void 0),g([S({type:String,readOnly:!0})],ni.prototype,"typeIdField",void 0),g([S({type:[cN]})],ni.prototype,"types",void 0),g([S(Ase)],ni.prototype,"url",null),ni=g([Q("esri.layers.GeoJSONLayer")],ni);const lF=ni,XKe=Object.freeze(Object.defineProperty({__proto__:null,default:lF},Symbol.toStringTag,{value:"Module"})),mqe="#294f89",gqe="#8db9d4",vqe="rgba(41, 79, 137, 0.125)",jue={FC_BRAND_BLUE_DARK:mqe,FC_BRAND_BLUE_LIGHT:gqe,FC_BRAND_BLUE_DARK_RGB:vqe},{FC_BRAND_BLUE_LIGHT:QKe,FC_BRAND_BLUE_DARK:wqe,FC_BRAND_BLUE_DARK_RGB:bqe}=jue;function _qe(e){const t=new lF({url:"./Jurisdictional_Boundary.json",title:"Falls Church - Jurisdictional Boundary",id:"Jurisdictional_Boundary",opacity:1,renderer:{type:"simple",symbol:{type:"simple-fill",style:"solid",color:bqe,outline:{color:wqe,width:.5}}}});e.add(t)}const{FC_BRAND_BLUE_LIGHT:eZe,FC_BRAND_BLUE_DARK:xqe}=jue;function Sqe(e){const t={title:"{Name}",content:[{type:"fields",fieldInfos:[{fieldName:"Shape_Area",label:"Park Area"},{fieldName:"Shape_Leng",label:"Park Length"},{fieldName:"Link",label:"Link"}]}]},i=new lF({url:"./FallsChurchParks_v2.json",title:"Falls Church - Parks",id:"FallsChurchParks",popupTemplate:t,opacity:.5,renderer:{type:"simple",symbol:{type:"simple-fill",style:"solid",color:"#65a74c",outline:{color:xqe,width:1}}},labelingInfo:[{symbol:{type:"text",color:"#000",haloSize:.5,haloColor:"#fff",font:{size:"14px",family:"Merriweather",style:"italic",weight:"bold"}},labelExpressionInfo:{expression:"Text($feature.Name)"}}]});e.add(i)}var zue={exports:{}},uF={exports:{}},Vue=function(t,i){return function(){for(var s=new Array(arguments.length),l=0;l<s.length;l++)s[l]=arguments[l];return t.apply(i,s)}},$qe=Vue,cF=Object.prototype.toString,hF=function(e){return function(t){var i=cF.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())}}(Object.create(null));function ty(e){return e=e.toLowerCase(),function(i){return hF(i)===e}}function pF(e){return Array.isArray(e)}function d6(e){return typeof e>"u"}function Mqe(e){return e!==null&&!d6(e)&&e.constructor!==null&&!d6(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Uue=ty("ArrayBuffer");function Eqe(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Uue(e.buffer),t}function Tqe(e){return typeof e=="string"}function Iqe(e){return typeof e=="number"}function Bue(e){return e!==null&&typeof e=="object"}function f4(e){if(hF(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var Cqe=ty("Date"),kqe=ty("File"),Aqe=ty("Blob"),Oqe=ty("FileList");function dF(e){return cF.call(e)==="[object Function]"}function Lqe(e){return Bue(e)&&dF(e.pipe)}function Pqe(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||cF.call(e)===t||dF(e.toString)&&e.toString()===t)}var Rqe=ty("URLSearchParams");function Nqe(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Fqe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function fF(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),pF(e))for(var i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function DO(){var e={};function t(s,l){f4(e[l])&&f4(s)?e[l]=DO(e[l],s):f4(s)?e[l]=DO({},s):pF(s)?e[l]=s.slice():e[l]=s}for(var i=0,r=arguments.length;i<r;i++)fF(arguments[i],t);return e}function Dqe(e,t,i){return fF(t,function(s,l){i&&typeof s=="function"?e[l]=$qe(s,i):e[l]=s}),e}function jqe(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function zqe(e,t,i,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)}function Vqe(e,t,i){var r,s,l,d={};t=t||{};do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)l=r[s],d[l]||(t[l]=e[l],d[l]=!0);e=Object.getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t}function Uqe(e,t,i){e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;var r=e.indexOf(t,i);return r!==-1&&r===i}function Bqe(e){if(!e)return null;var t=e.length;if(d6(t))return null;for(var i=new Array(t);t-- >0;)i[t]=e[t];return i}var Gqe=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),xs={isArray:pF,isArrayBuffer:Uue,isBuffer:Mqe,isFormData:Pqe,isArrayBufferView:Eqe,isString:Tqe,isNumber:Iqe,isObject:Bue,isPlainObject:f4,isUndefined:d6,isDate:Cqe,isFile:kqe,isBlob:Aqe,isFunction:dF,isStream:Lqe,isURLSearchParams:Rqe,isStandardBrowserEnv:Fqe,forEach:fF,merge:DO,extend:Dqe,trim:Nqe,stripBOM:jqe,inherits:zqe,toFlatObject:Vqe,kindOf:hF,kindOfTest:ty,endsWith:Uqe,toArray:Bqe,isTypedArray:Gqe,isFileList:Oqe},Py=xs;function dJ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Gue=function(t,i,r){if(!i)return t;var s;if(r)s=r(i);else if(Py.isURLSearchParams(i))s=i.toString();else{var l=[];Py.forEach(i,function(v,_){v===null||typeof v>"u"||(Py.isArray(v)?_=_+"[]":v=[v],Py.forEach(v,function(k){Py.isDate(k)?k=k.toISOString():Py.isObject(k)&&(k=JSON.stringify(k)),l.push(dJ(_)+"="+dJ(k))}))}),s=l.join("&")}if(s){var d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},qqe=xs;function K$(){this.handlers=[]}K$.prototype.use=function(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};K$.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};K$.prototype.forEach=function(t){qqe.forEach(this.handlers,function(r){r!==null&&t(r)})};var Hqe=K$,Wqe=xs,Jqe=function(t,i){Wqe.forEach(t,function(s,l){l!==i&&l.toUpperCase()===i.toUpperCase()&&(t[i]=s,delete t[l])})},que=xs;function nv(e,t,i,r,s){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s)}que.inherits(nv,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Hue=nv.prototype,Wue={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Wue[e]={value:e}});Object.defineProperties(nv,Wue);Object.defineProperty(Hue,"isAxiosError",{value:!0});nv.from=function(e,t,i,r,s,l){var d=Object.create(Hue);return que.toFlatObject(e,d,function(v){return v!==Error.prototype}),nv.call(d,e.message,t,i,r,s),d.name=e.name,l&&Object.assign(d,l),d};var Fv=nv,Jue={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zl=xs;function Kqe(e,t){t=t||new FormData;var i=[];function r(l){return l===null?"":Zl.isDate(l)?l.toISOString():Zl.isArrayBuffer(l)||Zl.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}function s(l,d){if(Zl.isPlainObject(l)||Zl.isArray(l)){if(i.indexOf(l)!==-1)throw Error("Circular reference detected in "+d);i.push(l),Zl.forEach(l,function(v,_){if(!Zl.isUndefined(v)){var M=d?d+"."+_:_,k;if(v&&!d&&typeof v=="object"){if(Zl.endsWith(_,"{}"))v=JSON.stringify(v);else if(Zl.endsWith(_,"[]")&&(k=Zl.toArray(v))){k.forEach(function(O){!Zl.isUndefined(O)&&t.append(M,r(O))});return}}s(v,M)}}),i.pop()}else t.append(d,r(l))}return s(e),t}var Kue=Kqe,R8,fJ;function Zqe(){if(fJ)return R8;fJ=1;var e=Fv;return R8=function(i,r,s){var l=s.config.validateStatus;!s.status||!l||l(s.status)?i(s):r(new e("Request failed with status code "+s.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))},R8}var N8,yJ;function Yqe(){if(yJ)return N8;yJ=1;var e=xs;return N8=e.isStandardBrowserEnv()?function(){return{write:function(r,s,l,d,y,v){var _=[];_.push(r+"="+encodeURIComponent(s)),e.isNumber(l)&&_.push("expires="+new Date(l).toGMTString()),e.isString(d)&&_.push("path="+d),e.isString(y)&&_.push("domain="+y),v===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),N8}var Xqe=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},Qqe=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t},eHe=Xqe,tHe=Qqe,Zue=function(t,i){return t&&!eHe(i)?tHe(t,i):i},F8,mJ;function iHe(){if(mJ)return F8;mJ=1;var e=xs,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return F8=function(r){var s={},l,d,y;return r&&e.forEach(r.split(`
`),function(_){if(y=_.indexOf(":"),l=e.trim(_.substr(0,y)).toLowerCase(),d=e.trim(_.substr(y+1)),l){if(s[l]&&t.indexOf(l)>=0)return;l==="set-cookie"?s[l]=(s[l]?s[l]:[]).concat([d]):s[l]=s[l]?s[l]+", "+d:d}}),s},F8}var D8,gJ;function rHe(){if(gJ)return D8;gJ=1;var e=xs;return D8=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function l(d){var y=d;return i&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=l(window.location.href),function(y){var v=e.isString(y)?l(y):y;return v.protocol===s.protocol&&v.host===s.host}}():function(){return function(){return!0}}(),D8}var j8,vJ;function Z$(){if(vJ)return j8;vJ=1;var e=Fv,t=xs;function i(r){e.call(this,r==null?"canceled":r,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(i,e,{__CANCEL__:!0}),j8=i,j8}var z8,wJ;function nHe(){return wJ||(wJ=1,z8=function(t){var i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return i&&i[1]||""}),z8}var V8,bJ;function _J(){if(bJ)return V8;bJ=1;var e=xs,t=Zqe(),i=Yqe(),r=Gue,s=Zue,l=iHe(),d=rHe(),y=Jue,v=Fv,_=Z$(),M=nHe();return V8=function(O){return new Promise(function(D,z){var B=O.data,V=O.headers,q=O.responseType,J;function ne(){O.cancelToken&&O.cancelToken.unsubscribe(J),O.signal&&O.signal.removeEventListener("abort",J)}e.isFormData(B)&&e.isStandardBrowserEnv()&&delete V["Content-Type"];var re=new XMLHttpRequest;if(O.auth){var ue=O.auth.username||"",_e=O.auth.password?unescape(encodeURIComponent(O.auth.password)):"";V.Authorization="Basic "+btoa(ue+":"+_e)}var xe=s(O.baseURL,O.url);re.open(O.method.toUpperCase(),r(xe,O.params,O.paramsSerializer),!0),re.timeout=O.timeout;function Ne(){if(!!re){var Ze="getAllResponseHeaders"in re?l(re.getAllResponseHeaders()):null,lt=!q||q==="text"||q==="json"?re.responseText:re.response,et={data:lt,status:re.status,statusText:re.statusText,headers:Ze,config:O,request:re};t(function(pi){D(pi),ne()},function(pi){z(pi),ne()},et),re=null}}if("onloadend"in re?re.onloadend=Ne:re.onreadystatechange=function(){!re||re.readyState!==4||re.status===0&&!(re.responseURL&&re.responseURL.indexOf("file:")===0)||setTimeout(Ne)},re.onabort=function(){!re||(z(new v("Request aborted",v.ECONNABORTED,O,re)),re=null)},re.onerror=function(){z(new v("Network Error",v.ERR_NETWORK,O,re,re)),re=null},re.ontimeout=function(){var lt=O.timeout?"timeout of "+O.timeout+"ms exceeded":"timeout exceeded",et=O.transitional||y;O.timeoutErrorMessage&&(lt=O.timeoutErrorMessage),z(new v(lt,et.clarifyTimeoutError?v.ETIMEDOUT:v.ECONNABORTED,O,re)),re=null},e.isStandardBrowserEnv()){var Ce=(O.withCredentials||d(xe))&&O.xsrfCookieName?i.read(O.xsrfCookieName):void 0;Ce&&(V[O.xsrfHeaderName]=Ce)}"setRequestHeader"in re&&e.forEach(V,function(lt,et){typeof B>"u"&&et.toLowerCase()==="content-type"?delete V[et]:re.setRequestHeader(et,lt)}),e.isUndefined(O.withCredentials)||(re.withCredentials=!!O.withCredentials),q&&q!=="json"&&(re.responseType=O.responseType),typeof O.onDownloadProgress=="function"&&re.addEventListener("progress",O.onDownloadProgress),typeof O.onUploadProgress=="function"&&re.upload&&re.upload.addEventListener("progress",O.onUploadProgress),(O.cancelToken||O.signal)&&(J=function(Ze){!re||(z(!Ze||Ze&&Ze.type?new _:Ze),re.abort(),re=null)},O.cancelToken&&O.cancelToken.subscribe(J),O.signal&&(O.signal.aborted?J():O.signal.addEventListener("abort",J))),B||(B=null);var Ge=M(xe);if(Ge&&["http","https","file"].indexOf(Ge)===-1){z(new v("Unsupported protocol "+Ge+":",v.ERR_BAD_REQUEST,O));return}re.send(B)})},V8}var U8,xJ;function sHe(){return xJ||(xJ=1,U8=null),U8}var Zn=xs,SJ=Jqe,$J=Fv,oHe=Jue,aHe=Kue,lHe={"Content-Type":"application/x-www-form-urlencoded"};function MJ(e,t){!Zn.isUndefined(e)&&Zn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function uHe(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=_J()),e}function cHe(e,t,i){if(Zn.isString(e))try{return(t||JSON.parse)(e),Zn.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}var Y$={transitional:oHe,adapter:uHe(),transformRequest:[function(t,i){if(SJ(i,"Accept"),SJ(i,"Content-Type"),Zn.isFormData(t)||Zn.isArrayBuffer(t)||Zn.isBuffer(t)||Zn.isStream(t)||Zn.isFile(t)||Zn.isBlob(t))return t;if(Zn.isArrayBufferView(t))return t.buffer;if(Zn.isURLSearchParams(t))return MJ(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var r=Zn.isObject(t),s=i&&i["Content-Type"],l;if((l=Zn.isFileList(t))||r&&s==="multipart/form-data"){var d=this.env&&this.env.FormData;return aHe(l?{"files[]":t}:t,d&&new d)}else if(r||s==="application/json")return MJ(i,"application/json"),cHe(t);return t}],transformResponse:[function(t){var i=this.transitional||Y$.transitional,r=i&&i.silentJSONParsing,s=i&&i.forcedJSONParsing,l=!r&&this.responseType==="json";if(l||s&&Zn.isString(t)&&t.length)try{return JSON.parse(t)}catch(d){if(l)throw d.name==="SyntaxError"?$J.from(d,$J.ERR_BAD_RESPONSE,this,null,this.response):d}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sHe()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Zn.forEach(["delete","get","head"],function(t){Y$.headers[t]={}});Zn.forEach(["post","put","patch"],function(t){Y$.headers[t]=Zn.merge(lHe)});var yF=Y$,hHe=xs,pHe=yF,dHe=function(t,i,r){var s=this||pHe;return hHe.forEach(r,function(d){t=d.call(s,t,i)}),t},B8,EJ;function Yue(){return EJ||(EJ=1,B8=function(t){return!!(t&&t.__CANCEL__)}),B8}var TJ=xs,G8=dHe,fHe=Yue(),yHe=yF,mHe=Z$();function q8(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mHe}var gHe=function(t){q8(t),t.headers=t.headers||{},t.data=G8.call(t,t.data,t.headers,t.transformRequest),t.headers=TJ.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),TJ.forEach(["delete","get","head","post","put","patch","common"],function(s){delete t.headers[s]});var i=t.adapter||yHe.adapter;return i(t).then(function(s){return q8(t),s.data=G8.call(t,s.data,s.headers,t.transformResponse),s},function(s){return fHe(s)||(q8(t),s&&s.response&&(s.response.data=G8.call(t,s.response.data,s.response.headers,t.transformResponse))),Promise.reject(s)})},pa=xs,Xue=function(t,i){i=i||{};var r={};function s(M,k){return pa.isPlainObject(M)&&pa.isPlainObject(k)?pa.merge(M,k):pa.isPlainObject(k)?pa.merge({},k):pa.isArray(k)?k.slice():k}function l(M){if(pa.isUndefined(i[M])){if(!pa.isUndefined(t[M]))return s(void 0,t[M])}else return s(t[M],i[M])}function d(M){if(!pa.isUndefined(i[M]))return s(void 0,i[M])}function y(M){if(pa.isUndefined(i[M])){if(!pa.isUndefined(t[M]))return s(void 0,t[M])}else return s(void 0,i[M])}function v(M){if(M in i)return s(t[M],i[M]);if(M in t)return s(void 0,t[M])}var _={url:d,method:d,data:d,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:v};return pa.forEach(Object.keys(t).concat(Object.keys(i)),function(k){var O=_[k]||l,R=O(k);pa.isUndefined(R)&&O!==v||(r[k]=R)}),r},H8,IJ;function Que(){return IJ||(IJ=1,H8={version:"0.27.2"}),H8}var vHe=Que().version,Ad=Fv,mF={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){mF[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var CJ={};mF.transitional=function(t,i,r){function s(l,d){return"[Axios v"+vHe+"] Transitional option '"+l+"'"+d+(r?". "+r:"")}return function(l,d,y){if(t===!1)throw new Ad(s(d," has been removed"+(i?" in "+i:"")),Ad.ERR_DEPRECATED);return i&&!CJ[d]&&(CJ[d]=!0,console.warn(s(d," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(l,d,y):!0}};function wHe(e,t,i){if(typeof e!="object")throw new Ad("options must be an object",Ad.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),s=r.length;s-- >0;){var l=r[s],d=t[l];if(d){var y=e[l],v=y===void 0||d(y,l,e);if(v!==!0)throw new Ad("option "+l+" must be "+v,Ad.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ad("Unknown option "+l,Ad.ERR_BAD_OPTION)}}var bHe={assertOptions:wHe,validators:mF},ece=xs,_He=Gue,kJ=Hqe,AJ=gHe,X$=Xue,xHe=Zue,tce=bHe,Ry=tce.validators;function sv(e){this.defaults=e,this.interceptors={request:new kJ,response:new kJ}}sv.prototype.request=function(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=X$(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var r=i.transitional;r!==void 0&&tce.assertOptions(r,{silentJSONParsing:Ry.transitional(Ry.boolean),forcedJSONParsing:Ry.transitional(Ry.boolean),clarifyTimeoutError:Ry.transitional(Ry.boolean)},!1);var s=[],l=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(i)===!1||(l=l&&R.synchronous,s.unshift(R.fulfilled,R.rejected))});var d=[];this.interceptors.response.forEach(function(R){d.push(R.fulfilled,R.rejected)});var y;if(!l){var v=[AJ,void 0];for(Array.prototype.unshift.apply(v,s),v=v.concat(d),y=Promise.resolve(i);v.length;)y=y.then(v.shift(),v.shift());return y}for(var _=i;s.length;){var M=s.shift(),k=s.shift();try{_=M(_)}catch(O){k(O);break}}try{y=AJ(_)}catch(O){return Promise.reject(O)}for(;d.length;)y=y.then(d.shift(),d.shift());return y};sv.prototype.getUri=function(t){t=X$(this.defaults,t);var i=xHe(t.baseURL,t.url);return _He(i,t.params,t.paramsSerializer)};ece.forEach(["delete","get","head","options"],function(t){sv.prototype[t]=function(i,r){return this.request(X$(r||{},{method:t,url:i,data:(r||{}).data}))}});ece.forEach(["post","put","patch"],function(t){function i(r){return function(l,d,y){return this.request(X$(y||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}sv.prototype[t]=i(),sv.prototype[t+"Form"]=i(!0)});var SHe=sv,W8,OJ;function $He(){if(OJ)return W8;OJ=1;var e=Z$();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(d){r=d});var s=this;this.promise.then(function(l){if(!!s._listeners){var d,y=s._listeners.length;for(d=0;d<y;d++)s._listeners[d](l);s._listeners=null}}),this.promise.then=function(l){var d,y=new Promise(function(v){s.subscribe(v),d=v}).then(l);return y.cancel=function(){s.unsubscribe(d)},y},i(function(d){s.reason||(s.reason=new e(d),r(s.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(!!this._listeners){var s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}},t.source=function(){var r,s=new t(function(d){r=d});return{token:s,cancel:r}},W8=t,W8}var J8,LJ;function MHe(){return LJ||(LJ=1,J8=function(t){return function(r){return t.apply(null,r)}}),J8}var K8,PJ;function EHe(){if(PJ)return K8;PJ=1;var e=xs;return K8=function(i){return e.isObject(i)&&i.isAxiosError===!0},K8}var RJ=xs,THe=Vue,y4=SHe,IHe=Xue,CHe=yF;function ice(e){var t=new y4(e),i=THe(y4.prototype.request,t);return RJ.extend(i,y4.prototype,t),RJ.extend(i,t),i.create=function(s){return ice(IHe(e,s))},i}var ea=ice(CHe);ea.Axios=y4;ea.CanceledError=Z$();ea.CancelToken=$He();ea.isCancel=Yue();ea.VERSION=Que().version;ea.toFormData=Kue;ea.AxiosError=Fv;ea.Cancel=ea.CanceledError;ea.all=function(t){return Promise.all(t)};ea.spread=MHe();ea.isAxiosError=EHe();uF.exports=ea;uF.exports.default=ea;(function(e){e.exports=uF.exports})(zue);const kHe=HJ(zue.exports);var NJ={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var i,r="4.17.21",s=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",y="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",_=500,M="__lodash_placeholder__",k=1,O=2,R=4,D=1,z=2,B=1,V=2,q=4,J=8,ne=16,re=32,ue=64,_e=128,xe=256,Ne=512,Ce=30,Ge="...",Ze=800,lt=16,et=1,zt=2,pi=3,he=1/0,pe=9007199254740991,me=17976931348623157e292,we=0/0,Ee=4294967295,Re=Ee-1,qe=Ee>>>1,ft=[["ary",_e],["bind",B],["bindKey",V],["curry",J],["curryRight",ne],["flip",Ne],["partial",re],["partialRight",ue],["rearg",xe]],jt="[object Arguments]",bi="[object Array]",tn="[object AsyncFunction]",Ar="[object Boolean]",Ki="[object Date]",gi="[object DOMException]",ti="[object Error]",gp="[object Function]",bf="[object GeneratorFunction]",Ii="[object Map]",X="[object Number]",Gn="[object Null]",Mo="[object Object]",ai="[object Promise]",cr="[object Proxy]",ns="[object RegExp]",Gr="[object Set]",Ss="[object String]",Eo="[object Symbol]",iy="[object Undefined]",Fl="[object WeakMap]",vp="[object WeakSet]",We="[object ArrayBuffer]",h="[object DataView]",L="[object Float32Array]",b="[object Float64Array]",c="[object Int8Array]",a="[object Int16Array]",n="[object Int32Array]",o="[object Uint8Array]",u="[object Uint8ClampedArray]",p="[object Uint16Array]",f="[object Uint32Array]",m=/\b__p \+= '';/g,w=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,E=/&(?:amp|lt|gt|quot|#39);/g,T=/[&<>"']/g,A=RegExp(E.source),P=RegExp(T.source),F=/<%-([\s\S]+?)%>/g,j=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,le=RegExp(ae.source),ie=/^\s+/,be=/\s/,Ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,Oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ye=/[()=,{}\[\]\/\s]/,yt=/\\(\\)?/g,bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kt=/\w*$/,Qt=/^[-+]0x[0-9a-f]+$/i,br=/^0b[01]+$/i,Ci=/^\[object .+?Constructor\]$/,at=/^0o[0-7]+$/i,di=/^(?:0|[1-9]\d*)$/,Vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fi=/($^)/,Di=/['\n\r\u2028\u2029\\]/g,dn="\\ud800-\\udfff",Zt="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",It="\\u20d0-\\u20ff",Vc=Zt+rn+It,Gu="\\u2700-\\u27bf",Uc="a-z\\xdf-\\xf6\\xf8-\\xff",_f="\\xac\\xb1\\xd7\\xf7",eM="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tM="\\u2000-\\u206f",iM=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gs="A-Z\\xc0-\\xd6\\xd8-\\xde",d_="\\ufe0e\\ufe0f",f_=_f+eM+tM+iM,de="['\u2019]",De="["+dn+"]",He="["+f_+"]",Ut="["+Vc+"]",fn="\\d+",hr="["+Gu+"]",qs="["+Uc+"]",xf="[^"+dn+f_+fn+Gu+Uc+Gs+"]",rM="\\ud83c[\\udffb-\\udfff]",nce="(?:"+Ut+"|"+rM+")",vF="[^"+dn+"]",nM="(?:\\ud83c[\\udde6-\\uddff]){2}",sM="[\\ud800-\\udbff][\\udc00-\\udfff]",ry="["+Gs+"]",wF="\\u200d",bF="(?:"+qs+"|"+xf+")",sce="(?:"+ry+"|"+xf+")",_F="(?:"+de+"(?:d|ll|m|re|s|t|ve))?",xF="(?:"+de+"(?:D|LL|M|RE|S|T|VE))?",SF=nce+"?",$F="["+d_+"]?",oce="(?:"+wF+"(?:"+[vF,nM,sM].join("|")+")"+$F+SF+")*",ace="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lce="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",MF=$F+SF+oce,uce="(?:"+[hr,nM,sM].join("|")+")"+MF,cce="(?:"+[vF+Ut+"?",Ut,nM,sM,De].join("|")+")",hce=RegExp(de,"g"),pce=RegExp(Ut,"g"),oM=RegExp(rM+"(?="+rM+")|"+cce+MF,"g"),dce=RegExp([ry+"?"+qs+"+"+_F+"(?="+[He,ry,"$"].join("|")+")",sce+"+"+xF+"(?="+[He,ry+bF,"$"].join("|")+")",ry+"?"+bF+"+"+_F,ry+"+"+xF,lce,ace,fn,uce].join("|"),"g"),fce=RegExp("["+wF+dn+Vc+d_+"]"),yce=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mce=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gce=-1,pr={};pr[L]=pr[b]=pr[c]=pr[a]=pr[n]=pr[o]=pr[u]=pr[p]=pr[f]=!0,pr[jt]=pr[bi]=pr[We]=pr[Ar]=pr[h]=pr[Ki]=pr[ti]=pr[gp]=pr[Ii]=pr[X]=pr[Mo]=pr[ns]=pr[Gr]=pr[Ss]=pr[Fl]=!1;var nr={};nr[jt]=nr[bi]=nr[We]=nr[h]=nr[Ar]=nr[Ki]=nr[L]=nr[b]=nr[c]=nr[a]=nr[n]=nr[Ii]=nr[X]=nr[Mo]=nr[ns]=nr[Gr]=nr[Ss]=nr[Eo]=nr[o]=nr[u]=nr[p]=nr[f]=!0,nr[ti]=nr[gp]=nr[Fl]=!1;var vce={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},wce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xce=parseFloat,Sce=parseInt,EF=typeof Qv=="object"&&Qv&&Qv.Object===Object&&Qv,$ce=typeof self=="object"&&self&&self.Object===Object&&self,ss=EF||$ce||Function("return this")(),aM=t&&!t.nodeType&&t,Sf=aM&&!0&&e&&!e.nodeType&&e,TF=Sf&&Sf.exports===aM,lM=TF&&EF.process,Ga=function(){try{var Se=Sf&&Sf.require&&Sf.require("util").types;return Se||lM&&lM.binding&&lM.binding("util")}catch{}}(),IF=Ga&&Ga.isArrayBuffer,CF=Ga&&Ga.isDate,kF=Ga&&Ga.isMap,AF=Ga&&Ga.isRegExp,OF=Ga&&Ga.isSet,LF=Ga&&Ga.isTypedArray;function ra(Se,je,Ae){switch(Ae.length){case 0:return Se.call(je);case 1:return Se.call(je,Ae[0]);case 2:return Se.call(je,Ae[0],Ae[1]);case 3:return Se.call(je,Ae[0],Ae[1],Ae[2])}return Se.apply(je,Ae)}function Mce(Se,je,Ae,mt){for(var qt=-1,Pi=Se==null?0:Se.length;++qt<Pi;){var En=Se[qt];je(mt,En,Ae(En),Se)}return mt}function qa(Se,je){for(var Ae=-1,mt=Se==null?0:Se.length;++Ae<mt&&je(Se[Ae],Ae,Se)!==!1;);return Se}function Ece(Se,je){for(var Ae=Se==null?0:Se.length;Ae--&&je(Se[Ae],Ae,Se)!==!1;);return Se}function PF(Se,je){for(var Ae=-1,mt=Se==null?0:Se.length;++Ae<mt;)if(!je(Se[Ae],Ae,Se))return!1;return!0}function wp(Se,je){for(var Ae=-1,mt=Se==null?0:Se.length,qt=0,Pi=[];++Ae<mt;){var En=Se[Ae];je(En,Ae,Se)&&(Pi[qt++]=En)}return Pi}function y_(Se,je){var Ae=Se==null?0:Se.length;return!!Ae&&ny(Se,je,0)>-1}function uM(Se,je,Ae){for(var mt=-1,qt=Se==null?0:Se.length;++mt<qt;)if(Ae(je,Se[mt]))return!0;return!1}function _r(Se,je){for(var Ae=-1,mt=Se==null?0:Se.length,qt=Array(mt);++Ae<mt;)qt[Ae]=je(Se[Ae],Ae,Se);return qt}function bp(Se,je){for(var Ae=-1,mt=je.length,qt=Se.length;++Ae<mt;)Se[qt+Ae]=je[Ae];return Se}function cM(Se,je,Ae,mt){var qt=-1,Pi=Se==null?0:Se.length;for(mt&&Pi&&(Ae=Se[++qt]);++qt<Pi;)Ae=je(Ae,Se[qt],qt,Se);return Ae}function Tce(Se,je,Ae,mt){var qt=Se==null?0:Se.length;for(mt&&qt&&(Ae=Se[--qt]);qt--;)Ae=je(Ae,Se[qt],qt,Se);return Ae}function hM(Se,je){for(var Ae=-1,mt=Se==null?0:Se.length;++Ae<mt;)if(je(Se[Ae],Ae,Se))return!0;return!1}var Ice=pM("length");function Cce(Se){return Se.split("")}function kce(Se){return Se.match(Oe)||[]}function RF(Se,je,Ae){var mt;return Ae(Se,function(qt,Pi,En){if(je(qt,Pi,En))return mt=Pi,!1}),mt}function m_(Se,je,Ae,mt){for(var qt=Se.length,Pi=Ae+(mt?1:-1);mt?Pi--:++Pi<qt;)if(je(Se[Pi],Pi,Se))return Pi;return-1}function ny(Se,je,Ae){return je===je?Uce(Se,je,Ae):m_(Se,NF,Ae)}function Ace(Se,je,Ae,mt){for(var qt=Ae-1,Pi=Se.length;++qt<Pi;)if(mt(Se[qt],je))return qt;return-1}function NF(Se){return Se!==Se}function FF(Se,je){var Ae=Se==null?0:Se.length;return Ae?fM(Se,je)/Ae:we}function pM(Se){return function(je){return je==null?i:je[Se]}}function dM(Se){return function(je){return Se==null?i:Se[je]}}function DF(Se,je,Ae,mt,qt){return qt(Se,function(Pi,En,Qi){Ae=mt?(mt=!1,Pi):je(Ae,Pi,En,Qi)}),Ae}function Oce(Se,je){var Ae=Se.length;for(Se.sort(je);Ae--;)Se[Ae]=Se[Ae].value;return Se}function fM(Se,je){for(var Ae,mt=-1,qt=Se.length;++mt<qt;){var Pi=je(Se[mt]);Pi!==i&&(Ae=Ae===i?Pi:Ae+Pi)}return Ae}function yM(Se,je){for(var Ae=-1,mt=Array(Se);++Ae<Se;)mt[Ae]=je(Ae);return mt}function Lce(Se,je){return _r(je,function(Ae){return[Ae,Se[Ae]]})}function jF(Se){return Se&&Se.slice(0,BF(Se)+1).replace(ie,"")}function na(Se){return function(je){return Se(je)}}function mM(Se,je){return _r(je,function(Ae){return Se[Ae]})}function Dv(Se,je){return Se.has(je)}function zF(Se,je){for(var Ae=-1,mt=Se.length;++Ae<mt&&ny(je,Se[Ae],0)>-1;);return Ae}function VF(Se,je){for(var Ae=Se.length;Ae--&&ny(je,Se[Ae],0)>-1;);return Ae}function Pce(Se,je){for(var Ae=Se.length,mt=0;Ae--;)Se[Ae]===je&&++mt;return mt}var Rce=dM(vce),Nce=dM(wce);function Fce(Se){return"\\"+_ce[Se]}function Dce(Se,je){return Se==null?i:Se[je]}function sy(Se){return fce.test(Se)}function jce(Se){return yce.test(Se)}function zce(Se){for(var je,Ae=[];!(je=Se.next()).done;)Ae.push(je.value);return Ae}function gM(Se){var je=-1,Ae=Array(Se.size);return Se.forEach(function(mt,qt){Ae[++je]=[qt,mt]}),Ae}function UF(Se,je){return function(Ae){return Se(je(Ae))}}function _p(Se,je){for(var Ae=-1,mt=Se.length,qt=0,Pi=[];++Ae<mt;){var En=Se[Ae];(En===je||En===M)&&(Se[Ae]=M,Pi[qt++]=Ae)}return Pi}function g_(Se){var je=-1,Ae=Array(Se.size);return Se.forEach(function(mt){Ae[++je]=mt}),Ae}function Vce(Se){var je=-1,Ae=Array(Se.size);return Se.forEach(function(mt){Ae[++je]=[mt,mt]}),Ae}function Uce(Se,je,Ae){for(var mt=Ae-1,qt=Se.length;++mt<qt;)if(Se[mt]===je)return mt;return-1}function Bce(Se,je,Ae){for(var mt=Ae+1;mt--;)if(Se[mt]===je)return mt;return mt}function oy(Se){return sy(Se)?qce(Se):Ice(Se)}function Dl(Se){return sy(Se)?Hce(Se):Cce(Se)}function BF(Se){for(var je=Se.length;je--&&be.test(Se.charAt(je)););return je}var Gce=dM(bce);function qce(Se){for(var je=oM.lastIndex=0;oM.test(Se);)++je;return je}function Hce(Se){return Se.match(oM)||[]}function Wce(Se){return Se.match(dce)||[]}var Jce=function Se(je){je=je==null?ss:ay.defaults(ss.Object(),je,ay.pick(ss,mce));var Ae=je.Array,mt=je.Date,qt=je.Error,Pi=je.Function,En=je.Math,Qi=je.Object,vM=je.RegExp,Kce=je.String,Ha=je.TypeError,v_=Ae.prototype,Zce=Pi.prototype,ly=Qi.prototype,w_=je["__core-js_shared__"],b_=Zce.toString,qi=ly.hasOwnProperty,Yce=0,GF=function(){var $=/[^.]+$/.exec(w_&&w_.keys&&w_.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}(),__=ly.toString,Xce=b_.call(Qi),Qce=ss._,ehe=vM("^"+b_.call(qi).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x_=TF?je.Buffer:i,xp=je.Symbol,S_=je.Uint8Array,qF=x_?x_.allocUnsafe:i,$_=UF(Qi.getPrototypeOf,Qi),HF=Qi.create,WF=ly.propertyIsEnumerable,M_=v_.splice,JF=xp?xp.isConcatSpreadable:i,jv=xp?xp.iterator:i,$f=xp?xp.toStringTag:i,E_=function(){try{var $=Cf(Qi,"defineProperty");return $({},"",{}),$}catch{}}(),the=je.clearTimeout!==ss.clearTimeout&&je.clearTimeout,ihe=mt&&mt.now!==ss.Date.now&&mt.now,rhe=je.setTimeout!==ss.setTimeout&&je.setTimeout,T_=En.ceil,I_=En.floor,wM=Qi.getOwnPropertySymbols,nhe=x_?x_.isBuffer:i,KF=je.isFinite,she=v_.join,ohe=UF(Qi.keys,Qi),Tn=En.max,$s=En.min,ahe=mt.now,lhe=je.parseInt,ZF=En.random,uhe=v_.reverse,bM=Cf(je,"DataView"),zv=Cf(je,"Map"),_M=Cf(je,"Promise"),uy=Cf(je,"Set"),Vv=Cf(je,"WeakMap"),Uv=Cf(Qi,"create"),C_=Vv&&new Vv,cy={},che=kf(bM),hhe=kf(zv),phe=kf(_M),dhe=kf(uy),fhe=kf(Vv),k_=xp?xp.prototype:i,Bv=k_?k_.valueOf:i,YF=k_?k_.toString:i;function se($){if(qr($)&&!Ht($)&&!($ instanceof fi)){if($ instanceof Wa)return $;if(qi.call($,"__wrapped__"))return XD($)}return new Wa($)}var hy=function(){function $(){}return function(C){if(!Or(C))return{};if(HF)return HF(C);$.prototype=C;var N=new $;return $.prototype=i,N}}();function A_(){}function Wa($,C){this.__wrapped__=$,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=i}se.templateSettings={escape:F,evaluate:j,interpolate:H,variable:"",imports:{_:se}},se.prototype=A_.prototype,se.prototype.constructor=se,Wa.prototype=hy(A_.prototype),Wa.prototype.constructor=Wa;function fi($){this.__wrapped__=$,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ee,this.__views__=[]}function yhe(){var $=new fi(this.__wrapped__);return $.__actions__=To(this.__actions__),$.__dir__=this.__dir__,$.__filtered__=this.__filtered__,$.__iteratees__=To(this.__iteratees__),$.__takeCount__=this.__takeCount__,$.__views__=To(this.__views__),$}function mhe(){if(this.__filtered__){var $=new fi(this);$.__dir__=-1,$.__filtered__=!0}else $=this.clone(),$.__dir__*=-1;return $}function ghe(){var $=this.__wrapped__.value(),C=this.__dir__,N=Ht($),U=C<0,Y=N?$.length:0,oe=Cpe(0,Y,this.__views__),fe=oe.start,ve=oe.end,Te=ve-fe,Ue=U?ve:fe-1,Be=this.__iteratees__,Je=Be.length,ct=0,xt=$s(Te,this.__takeCount__);if(!N||!U&&Y==Te&&xt==Te)return _D($,this.__actions__);var Lt=[];e:for(;Te--&&ct<xt;){Ue+=C;for(var ei=-1,Pt=$[Ue];++ei<Je;){var ci=Be[ei],vi=ci.iteratee,aa=ci.type,Js=vi(Pt);if(aa==zt)Pt=Js;else if(!Js){if(aa==et)continue e;break e}}Lt[ct++]=Pt}return Lt}fi.prototype=hy(A_.prototype),fi.prototype.constructor=fi;function Mf($){var C=-1,N=$==null?0:$.length;for(this.clear();++C<N;){var U=$[C];this.set(U[0],U[1])}}function vhe(){this.__data__=Uv?Uv(null):{},this.size=0}function whe($){var C=this.has($)&&delete this.__data__[$];return this.size-=C?1:0,C}function bhe($){var C=this.__data__;if(Uv){var N=C[$];return N===v?i:N}return qi.call(C,$)?C[$]:i}function _he($){var C=this.__data__;return Uv?C[$]!==i:qi.call(C,$)}function xhe($,C){var N=this.__data__;return this.size+=this.has($)?0:1,N[$]=Uv&&C===i?v:C,this}Mf.prototype.clear=vhe,Mf.prototype.delete=whe,Mf.prototype.get=bhe,Mf.prototype.has=_he,Mf.prototype.set=xhe;function Bc($){var C=-1,N=$==null?0:$.length;for(this.clear();++C<N;){var U=$[C];this.set(U[0],U[1])}}function She(){this.__data__=[],this.size=0}function $he($){var C=this.__data__,N=O_(C,$);if(N<0)return!1;var U=C.length-1;return N==U?C.pop():M_.call(C,N,1),--this.size,!0}function Mhe($){var C=this.__data__,N=O_(C,$);return N<0?i:C[N][1]}function Ehe($){return O_(this.__data__,$)>-1}function The($,C){var N=this.__data__,U=O_(N,$);return U<0?(++this.size,N.push([$,C])):N[U][1]=C,this}Bc.prototype.clear=She,Bc.prototype.delete=$he,Bc.prototype.get=Mhe,Bc.prototype.has=Ehe,Bc.prototype.set=The;function Gc($){var C=-1,N=$==null?0:$.length;for(this.clear();++C<N;){var U=$[C];this.set(U[0],U[1])}}function Ihe(){this.size=0,this.__data__={hash:new Mf,map:new(zv||Bc),string:new Mf}}function Che($){var C=G_(this,$).delete($);return this.size-=C?1:0,C}function khe($){return G_(this,$).get($)}function Ahe($){return G_(this,$).has($)}function Ohe($,C){var N=G_(this,$),U=N.size;return N.set($,C),this.size+=N.size==U?0:1,this}Gc.prototype.clear=Ihe,Gc.prototype.delete=Che,Gc.prototype.get=khe,Gc.prototype.has=Ahe,Gc.prototype.set=Ohe;function Ef($){var C=-1,N=$==null?0:$.length;for(this.__data__=new Gc;++C<N;)this.add($[C])}function Lhe($){return this.__data__.set($,v),this}function Phe($){return this.__data__.has($)}Ef.prototype.add=Ef.prototype.push=Lhe,Ef.prototype.has=Phe;function jl($){var C=this.__data__=new Bc($);this.size=C.size}function Rhe(){this.__data__=new Bc,this.size=0}function Nhe($){var C=this.__data__,N=C.delete($);return this.size=C.size,N}function Fhe($){return this.__data__.get($)}function Dhe($){return this.__data__.has($)}function jhe($,C){var N=this.__data__;if(N instanceof Bc){var U=N.__data__;if(!zv||U.length<s-1)return U.push([$,C]),this.size=++N.size,this;N=this.__data__=new Gc(U)}return N.set($,C),this.size=N.size,this}jl.prototype.clear=Rhe,jl.prototype.delete=Nhe,jl.prototype.get=Fhe,jl.prototype.has=Dhe,jl.prototype.set=jhe;function XF($,C){var N=Ht($),U=!N&&Af($),Y=!N&&!U&&Tp($),oe=!N&&!U&&!Y&&yy($),fe=N||U||Y||oe,ve=fe?yM($.length,Kce):[],Te=ve.length;for(var Ue in $)(C||qi.call($,Ue))&&!(fe&&(Ue=="length"||Y&&(Ue=="offset"||Ue=="parent")||oe&&(Ue=="buffer"||Ue=="byteLength"||Ue=="byteOffset")||Jc(Ue,Te)))&&ve.push(Ue);return ve}function QF($){var C=$.length;return C?$[OM(0,C-1)]:i}function zhe($,C){return q_(To($),Tf(C,0,$.length))}function Vhe($){return q_(To($))}function xM($,C,N){(N!==i&&!zl($[C],N)||N===i&&!(C in $))&&qc($,C,N)}function Gv($,C,N){var U=$[C];(!(qi.call($,C)&&zl(U,N))||N===i&&!(C in $))&&qc($,C,N)}function O_($,C){for(var N=$.length;N--;)if(zl($[N][0],C))return N;return-1}function Uhe($,C,N,U){return Sp($,function(Y,oe,fe){C(U,Y,N(Y),fe)}),U}function eD($,C){return $&&Hu(C,qn(C),$)}function Bhe($,C){return $&&Hu(C,Co(C),$)}function qc($,C,N){C=="__proto__"&&E_?E_($,C,{configurable:!0,enumerable:!0,value:N,writable:!0}):$[C]=N}function SM($,C){for(var N=-1,U=C.length,Y=Ae(U),oe=$==null;++N<U;)Y[N]=oe?i:r7($,C[N]);return Y}function Tf($,C,N){return $===$&&(N!==i&&($=$<=N?$:N),C!==i&&($=$>=C?$:C)),$}function Ja($,C,N,U,Y,oe){var fe,ve=C&k,Te=C&O,Ue=C&R;if(N&&(fe=Y?N($,U,Y,oe):N($)),fe!==i)return fe;if(!Or($))return $;var Be=Ht($);if(Be){if(fe=Ape($),!ve)return To($,fe)}else{var Je=Ms($),ct=Je==gp||Je==bf;if(Tp($))return $D($,ve);if(Je==Mo||Je==jt||ct&&!Y){if(fe=Te||ct?{}:BD($),!ve)return Te?bpe($,Bhe(fe,$)):wpe($,eD(fe,$))}else{if(!nr[Je])return Y?$:{};fe=Ope($,Je,ve)}}oe||(oe=new jl);var xt=oe.get($);if(xt)return xt;oe.set($,fe),vj($)?$.forEach(function(Pt){fe.add(Ja(Pt,C,N,Pt,$,oe))}):mj($)&&$.forEach(function(Pt,ci){fe.set(ci,Ja(Pt,C,N,ci,$,oe))});var Lt=Ue?Te?BM:UM:Te?Co:qn,ei=Be?i:Lt($);return qa(ei||$,function(Pt,ci){ei&&(ci=Pt,Pt=$[ci]),Gv(fe,ci,Ja(Pt,C,N,ci,$,oe))}),fe}function Ghe($){var C=qn($);return function(N){return tD(N,$,C)}}function tD($,C,N){var U=N.length;if($==null)return!U;for($=Qi($);U--;){var Y=N[U],oe=C[Y],fe=$[Y];if(fe===i&&!(Y in $)||!oe(fe))return!1}return!0}function iD($,C,N){if(typeof $!="function")throw new Ha(d);return Yv(function(){$.apply(i,N)},C)}function qv($,C,N,U){var Y=-1,oe=y_,fe=!0,ve=$.length,Te=[],Ue=C.length;if(!ve)return Te;N&&(C=_r(C,na(N))),U?(oe=uM,fe=!1):C.length>=s&&(oe=Dv,fe=!1,C=new Ef(C));e:for(;++Y<ve;){var Be=$[Y],Je=N==null?Be:N(Be);if(Be=U||Be!==0?Be:0,fe&&Je===Je){for(var ct=Ue;ct--;)if(C[ct]===Je)continue e;Te.push(Be)}else oe(C,Je,U)||Te.push(Be)}return Te}var Sp=CD(qu),rD=CD(MM,!0);function qhe($,C){var N=!0;return Sp($,function(U,Y,oe){return N=!!C(U,Y,oe),N}),N}function L_($,C,N){for(var U=-1,Y=$.length;++U<Y;){var oe=$[U],fe=C(oe);if(fe!=null&&(ve===i?fe===fe&&!oa(fe):N(fe,ve)))var ve=fe,Te=oe}return Te}function Hhe($,C,N,U){var Y=$.length;for(N=Yt(N),N<0&&(N=-N>Y?0:Y+N),U=U===i||U>Y?Y:Yt(U),U<0&&(U+=Y),U=N>U?0:bj(U);N<U;)$[N++]=C;return $}function nD($,C){var N=[];return Sp($,function(U,Y,oe){C(U,Y,oe)&&N.push(U)}),N}function os($,C,N,U,Y){var oe=-1,fe=$.length;for(N||(N=Ppe),Y||(Y=[]);++oe<fe;){var ve=$[oe];C>0&&N(ve)?C>1?os(ve,C-1,N,U,Y):bp(Y,ve):U||(Y[Y.length]=ve)}return Y}var $M=kD(),sD=kD(!0);function qu($,C){return $&&$M($,C,qn)}function MM($,C){return $&&sD($,C,qn)}function P_($,C){return wp(C,function(N){return Kc($[N])})}function If($,C){C=Mp(C,$);for(var N=0,U=C.length;$!=null&&N<U;)$=$[Wu(C[N++])];return N&&N==U?$:i}function oD($,C,N){var U=C($);return Ht($)?U:bp(U,N($))}function Hs($){return $==null?$===i?iy:Gn:$f&&$f in Qi($)?Ipe($):Vpe($)}function EM($,C){return $>C}function Whe($,C){return $!=null&&qi.call($,C)}function Jhe($,C){return $!=null&&C in Qi($)}function Khe($,C,N){return $>=$s(C,N)&&$<Tn(C,N)}function TM($,C,N){for(var U=N?uM:y_,Y=$[0].length,oe=$.length,fe=oe,ve=Ae(oe),Te=1/0,Ue=[];fe--;){var Be=$[fe];fe&&C&&(Be=_r(Be,na(C))),Te=$s(Be.length,Te),ve[fe]=!N&&(C||Y>=120&&Be.length>=120)?new Ef(fe&&Be):i}Be=$[0];var Je=-1,ct=ve[0];e:for(;++Je<Y&&Ue.length<Te;){var xt=Be[Je],Lt=C?C(xt):xt;if(xt=N||xt!==0?xt:0,!(ct?Dv(ct,Lt):U(Ue,Lt,N))){for(fe=oe;--fe;){var ei=ve[fe];if(!(ei?Dv(ei,Lt):U($[fe],Lt,N)))continue e}ct&&ct.push(Lt),Ue.push(xt)}}return Ue}function Zhe($,C,N,U){return qu($,function(Y,oe,fe){C(U,N(Y),oe,fe)}),U}function Hv($,C,N){C=Mp(C,$),$=WD($,C);var U=$==null?$:$[Wu(Za(C))];return U==null?i:ra(U,$,N)}function aD($){return qr($)&&Hs($)==jt}function Yhe($){return qr($)&&Hs($)==We}function Xhe($){return qr($)&&Hs($)==Ki}function Wv($,C,N,U,Y){return $===C?!0:$==null||C==null||!qr($)&&!qr(C)?$!==$&&C!==C:Qhe($,C,N,U,Wv,Y)}function Qhe($,C,N,U,Y,oe){var fe=Ht($),ve=Ht(C),Te=fe?bi:Ms($),Ue=ve?bi:Ms(C);Te=Te==jt?Mo:Te,Ue=Ue==jt?Mo:Ue;var Be=Te==Mo,Je=Ue==Mo,ct=Te==Ue;if(ct&&Tp($)){if(!Tp(C))return!1;fe=!0,Be=!1}if(ct&&!Be)return oe||(oe=new jl),fe||yy($)?zD($,C,N,U,Y,oe):Epe($,C,Te,N,U,Y,oe);if(!(N&D)){var xt=Be&&qi.call($,"__wrapped__"),Lt=Je&&qi.call(C,"__wrapped__");if(xt||Lt){var ei=xt?$.value():$,Pt=Lt?C.value():C;return oe||(oe=new jl),Y(ei,Pt,N,U,oe)}}return ct?(oe||(oe=new jl),Tpe($,C,N,U,Y,oe)):!1}function epe($){return qr($)&&Ms($)==Ii}function IM($,C,N,U){var Y=N.length,oe=Y,fe=!U;if($==null)return!oe;for($=Qi($);Y--;){var ve=N[Y];if(fe&&ve[2]?ve[1]!==$[ve[0]]:!(ve[0]in $))return!1}for(;++Y<oe;){ve=N[Y];var Te=ve[0],Ue=$[Te],Be=ve[1];if(fe&&ve[2]){if(Ue===i&&!(Te in $))return!1}else{var Je=new jl;if(U)var ct=U(Ue,Be,Te,$,C,Je);if(!(ct===i?Wv(Be,Ue,D|z,U,Je):ct))return!1}}return!0}function lD($){if(!Or($)||Npe($))return!1;var C=Kc($)?ehe:Ci;return C.test(kf($))}function tpe($){return qr($)&&Hs($)==ns}function ipe($){return qr($)&&Ms($)==Gr}function rpe($){return qr($)&&Y_($.length)&&!!pr[Hs($)]}function uD($){return typeof $=="function"?$:$==null?ko:typeof $=="object"?Ht($)?pD($[0],$[1]):hD($):Aj($)}function CM($){if(!Zv($))return ohe($);var C=[];for(var N in Qi($))qi.call($,N)&&N!="constructor"&&C.push(N);return C}function npe($){if(!Or($))return zpe($);var C=Zv($),N=[];for(var U in $)U=="constructor"&&(C||!qi.call($,U))||N.push(U);return N}function kM($,C){return $<C}function cD($,C){var N=-1,U=Io($)?Ae($.length):[];return Sp($,function(Y,oe,fe){U[++N]=C(Y,oe,fe)}),U}function hD($){var C=qM($);return C.length==1&&C[0][2]?qD(C[0][0],C[0][1]):function(N){return N===$||IM(N,$,C)}}function pD($,C){return WM($)&&GD(C)?qD(Wu($),C):function(N){var U=r7(N,$);return U===i&&U===C?n7(N,$):Wv(C,U,D|z)}}function R_($,C,N,U,Y){$!==C&&$M(C,function(oe,fe){if(Y||(Y=new jl),Or(oe))spe($,C,fe,N,R_,U,Y);else{var ve=U?U(KM($,fe),oe,fe+"",$,C,Y):i;ve===i&&(ve=oe),xM($,fe,ve)}},Co)}function spe($,C,N,U,Y,oe,fe){var ve=KM($,N),Te=KM(C,N),Ue=fe.get(Te);if(Ue){xM($,N,Ue);return}var Be=oe?oe(ve,Te,N+"",$,C,fe):i,Je=Be===i;if(Je){var ct=Ht(Te),xt=!ct&&Tp(Te),Lt=!ct&&!xt&&yy(Te);Be=Te,ct||xt||Lt?Ht(ve)?Be=ve:nn(ve)?Be=To(ve):xt?(Je=!1,Be=$D(Te,!0)):Lt?(Je=!1,Be=MD(Te,!0)):Be=[]:Xv(Te)||Af(Te)?(Be=ve,Af(ve)?Be=_j(ve):(!Or(ve)||Kc(ve))&&(Be=BD(Te))):Je=!1}Je&&(fe.set(Te,Be),Y(Be,Te,U,oe,fe),fe.delete(Te)),xM($,N,Be)}function dD($,C){var N=$.length;if(!!N)return C+=C<0?N:0,Jc(C,N)?$[C]:i}function fD($,C,N){C.length?C=_r(C,function(oe){return Ht(oe)?function(fe){return If(fe,oe.length===1?oe[0]:oe)}:oe}):C=[ko];var U=-1;C=_r(C,na(kt()));var Y=cD($,function(oe,fe,ve){var Te=_r(C,function(Ue){return Ue(oe)});return{criteria:Te,index:++U,value:oe}});return Oce(Y,function(oe,fe){return vpe(oe,fe,N)})}function ope($,C){return yD($,C,function(N,U){return n7($,U)})}function yD($,C,N){for(var U=-1,Y=C.length,oe={};++U<Y;){var fe=C[U],ve=If($,fe);N(ve,fe)&&Jv(oe,Mp(fe,$),ve)}return oe}function ape($){return function(C){return If(C,$)}}function AM($,C,N,U){var Y=U?Ace:ny,oe=-1,fe=C.length,ve=$;for($===C&&(C=To(C)),N&&(ve=_r($,na(N)));++oe<fe;)for(var Te=0,Ue=C[oe],Be=N?N(Ue):Ue;(Te=Y(ve,Be,Te,U))>-1;)ve!==$&&M_.call(ve,Te,1),M_.call($,Te,1);return $}function mD($,C){for(var N=$?C.length:0,U=N-1;N--;){var Y=C[N];if(N==U||Y!==oe){var oe=Y;Jc(Y)?M_.call($,Y,1):RM($,Y)}}return $}function OM($,C){return $+I_(ZF()*(C-$+1))}function lpe($,C,N,U){for(var Y=-1,oe=Tn(T_((C-$)/(N||1)),0),fe=Ae(oe);oe--;)fe[U?oe:++Y]=$,$+=N;return fe}function LM($,C){var N="";if(!$||C<1||C>pe)return N;do C%2&&(N+=$),C=I_(C/2),C&&($+=$);while(C);return N}function ii($,C){return ZM(HD($,C,ko),$+"")}function upe($){return QF(my($))}function cpe($,C){var N=my($);return q_(N,Tf(C,0,N.length))}function Jv($,C,N,U){if(!Or($))return $;C=Mp(C,$);for(var Y=-1,oe=C.length,fe=oe-1,ve=$;ve!=null&&++Y<oe;){var Te=Wu(C[Y]),Ue=N;if(Te==="__proto__"||Te==="constructor"||Te==="prototype")return $;if(Y!=fe){var Be=ve[Te];Ue=U?U(Be,Te,ve):i,Ue===i&&(Ue=Or(Be)?Be:Jc(C[Y+1])?[]:{})}Gv(ve,Te,Ue),ve=ve[Te]}return $}var gD=C_?function($,C){return C_.set($,C),$}:ko,hpe=E_?function($,C){return E_($,"toString",{configurable:!0,enumerable:!1,value:o7(C),writable:!0})}:ko;function ppe($){return q_(my($))}function Ka($,C,N){var U=-1,Y=$.length;C<0&&(C=-C>Y?0:Y+C),N=N>Y?Y:N,N<0&&(N+=Y),Y=C>N?0:N-C>>>0,C>>>=0;for(var oe=Ae(Y);++U<Y;)oe[U]=$[U+C];return oe}function dpe($,C){var N;return Sp($,function(U,Y,oe){return N=C(U,Y,oe),!N}),!!N}function N_($,C,N){var U=0,Y=$==null?U:$.length;if(typeof C=="number"&&C===C&&Y<=qe){for(;U<Y;){var oe=U+Y>>>1,fe=$[oe];fe!==null&&!oa(fe)&&(N?fe<=C:fe<C)?U=oe+1:Y=oe}return Y}return PM($,C,ko,N)}function PM($,C,N,U){var Y=0,oe=$==null?0:$.length;if(oe===0)return 0;C=N(C);for(var fe=C!==C,ve=C===null,Te=oa(C),Ue=C===i;Y<oe;){var Be=I_((Y+oe)/2),Je=N($[Be]),ct=Je!==i,xt=Je===null,Lt=Je===Je,ei=oa(Je);if(fe)var Pt=U||Lt;else Ue?Pt=Lt&&(U||ct):ve?Pt=Lt&&ct&&(U||!xt):Te?Pt=Lt&&ct&&!xt&&(U||!ei):xt||ei?Pt=!1:Pt=U?Je<=C:Je<C;Pt?Y=Be+1:oe=Be}return $s(oe,Re)}function vD($,C){for(var N=-1,U=$.length,Y=0,oe=[];++N<U;){var fe=$[N],ve=C?C(fe):fe;if(!N||!zl(ve,Te)){var Te=ve;oe[Y++]=fe===0?0:fe}}return oe}function wD($){return typeof $=="number"?$:oa($)?we:+$}function sa($){if(typeof $=="string")return $;if(Ht($))return _r($,sa)+"";if(oa($))return YF?YF.call($):"";var C=$+"";return C=="0"&&1/$==-he?"-0":C}function $p($,C,N){var U=-1,Y=y_,oe=$.length,fe=!0,ve=[],Te=ve;if(N)fe=!1,Y=uM;else if(oe>=s){var Ue=C?null:$pe($);if(Ue)return g_(Ue);fe=!1,Y=Dv,Te=new Ef}else Te=C?[]:ve;e:for(;++U<oe;){var Be=$[U],Je=C?C(Be):Be;if(Be=N||Be!==0?Be:0,fe&&Je===Je){for(var ct=Te.length;ct--;)if(Te[ct]===Je)continue e;C&&Te.push(Je),ve.push(Be)}else Y(Te,Je,N)||(Te!==ve&&Te.push(Je),ve.push(Be))}return ve}function RM($,C){return C=Mp(C,$),$=WD($,C),$==null||delete $[Wu(Za(C))]}function bD($,C,N,U){return Jv($,C,N(If($,C)),U)}function F_($,C,N,U){for(var Y=$.length,oe=U?Y:-1;(U?oe--:++oe<Y)&&C($[oe],oe,$););return N?Ka($,U?0:oe,U?oe+1:Y):Ka($,U?oe+1:0,U?Y:oe)}function _D($,C){var N=$;return N instanceof fi&&(N=N.value()),cM(C,function(U,Y){return Y.func.apply(Y.thisArg,bp([U],Y.args))},N)}function NM($,C,N){var U=$.length;if(U<2)return U?$p($[0]):[];for(var Y=-1,oe=Ae(U);++Y<U;)for(var fe=$[Y],ve=-1;++ve<U;)ve!=Y&&(oe[Y]=qv(oe[Y]||fe,$[ve],C,N));return $p(os(oe,1),C,N)}function xD($,C,N){for(var U=-1,Y=$.length,oe=C.length,fe={};++U<Y;){var ve=U<oe?C[U]:i;N(fe,$[U],ve)}return fe}function FM($){return nn($)?$:[]}function DM($){return typeof $=="function"?$:ko}function Mp($,C){return Ht($)?$:WM($,C)?[$]:YD(ji($))}var fpe=ii;function Ep($,C,N){var U=$.length;return N=N===i?U:N,!C&&N>=U?$:Ka($,C,N)}var SD=the||function($){return ss.clearTimeout($)};function $D($,C){if(C)return $.slice();var N=$.length,U=qF?qF(N):new $.constructor(N);return $.copy(U),U}function jM($){var C=new $.constructor($.byteLength);return new S_(C).set(new S_($)),C}function ype($,C){var N=C?jM($.buffer):$.buffer;return new $.constructor(N,$.byteOffset,$.byteLength)}function mpe($){var C=new $.constructor($.source,Kt.exec($));return C.lastIndex=$.lastIndex,C}function gpe($){return Bv?Qi(Bv.call($)):{}}function MD($,C){var N=C?jM($.buffer):$.buffer;return new $.constructor(N,$.byteOffset,$.length)}function ED($,C){if($!==C){var N=$!==i,U=$===null,Y=$===$,oe=oa($),fe=C!==i,ve=C===null,Te=C===C,Ue=oa(C);if(!ve&&!Ue&&!oe&&$>C||oe&&fe&&Te&&!ve&&!Ue||U&&fe&&Te||!N&&Te||!Y)return 1;if(!U&&!oe&&!Ue&&$<C||Ue&&N&&Y&&!U&&!oe||ve&&N&&Y||!fe&&Y||!Te)return-1}return 0}function vpe($,C,N){for(var U=-1,Y=$.criteria,oe=C.criteria,fe=Y.length,ve=N.length;++U<fe;){var Te=ED(Y[U],oe[U]);if(Te){if(U>=ve)return Te;var Ue=N[U];return Te*(Ue=="desc"?-1:1)}}return $.index-C.index}function TD($,C,N,U){for(var Y=-1,oe=$.length,fe=N.length,ve=-1,Te=C.length,Ue=Tn(oe-fe,0),Be=Ae(Te+Ue),Je=!U;++ve<Te;)Be[ve]=C[ve];for(;++Y<fe;)(Je||Y<oe)&&(Be[N[Y]]=$[Y]);for(;Ue--;)Be[ve++]=$[Y++];return Be}function ID($,C,N,U){for(var Y=-1,oe=$.length,fe=-1,ve=N.length,Te=-1,Ue=C.length,Be=Tn(oe-ve,0),Je=Ae(Be+Ue),ct=!U;++Y<Be;)Je[Y]=$[Y];for(var xt=Y;++Te<Ue;)Je[xt+Te]=C[Te];for(;++fe<ve;)(ct||Y<oe)&&(Je[xt+N[fe]]=$[Y++]);return Je}function To($,C){var N=-1,U=$.length;for(C||(C=Ae(U));++N<U;)C[N]=$[N];return C}function Hu($,C,N,U){var Y=!N;N||(N={});for(var oe=-1,fe=C.length;++oe<fe;){var ve=C[oe],Te=U?U(N[ve],$[ve],ve,N,$):i;Te===i&&(Te=$[ve]),Y?qc(N,ve,Te):Gv(N,ve,Te)}return N}function wpe($,C){return Hu($,HM($),C)}function bpe($,C){return Hu($,VD($),C)}function D_($,C){return function(N,U){var Y=Ht(N)?Mce:Uhe,oe=C?C():{};return Y(N,$,kt(U,2),oe)}}function py($){return ii(function(C,N){var U=-1,Y=N.length,oe=Y>1?N[Y-1]:i,fe=Y>2?N[2]:i;for(oe=$.length>3&&typeof oe=="function"?(Y--,oe):i,fe&&Ws(N[0],N[1],fe)&&(oe=Y<3?i:oe,Y=1),C=Qi(C);++U<Y;){var ve=N[U];ve&&$(C,ve,U,oe)}return C})}function CD($,C){return function(N,U){if(N==null)return N;if(!Io(N))return $(N,U);for(var Y=N.length,oe=C?Y:-1,fe=Qi(N);(C?oe--:++oe<Y)&&U(fe[oe],oe,fe)!==!1;);return N}}function kD($){return function(C,N,U){for(var Y=-1,oe=Qi(C),fe=U(C),ve=fe.length;ve--;){var Te=fe[$?ve:++Y];if(N(oe[Te],Te,oe)===!1)break}return C}}function _pe($,C,N){var U=C&B,Y=Kv($);function oe(){var fe=this&&this!==ss&&this instanceof oe?Y:$;return fe.apply(U?N:this,arguments)}return oe}function AD($){return function(C){C=ji(C);var N=sy(C)?Dl(C):i,U=N?N[0]:C.charAt(0),Y=N?Ep(N,1).join(""):C.slice(1);return U[$]()+Y}}function dy($){return function(C){return cM(Cj(Ij(C).replace(hce,"")),$,"")}}function Kv($){return function(){var C=arguments;switch(C.length){case 0:return new $;case 1:return new $(C[0]);case 2:return new $(C[0],C[1]);case 3:return new $(C[0],C[1],C[2]);case 4:return new $(C[0],C[1],C[2],C[3]);case 5:return new $(C[0],C[1],C[2],C[3],C[4]);case 6:return new $(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new $(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var N=hy($.prototype),U=$.apply(N,C);return Or(U)?U:N}}function xpe($,C,N){var U=Kv($);function Y(){for(var oe=arguments.length,fe=Ae(oe),ve=oe,Te=fy(Y);ve--;)fe[ve]=arguments[ve];var Ue=oe<3&&fe[0]!==Te&&fe[oe-1]!==Te?[]:_p(fe,Te);if(oe-=Ue.length,oe<N)return ND($,C,j_,Y.placeholder,i,fe,Ue,i,i,N-oe);var Be=this&&this!==ss&&this instanceof Y?U:$;return ra(Be,this,fe)}return Y}function OD($){return function(C,N,U){var Y=Qi(C);if(!Io(C)){var oe=kt(N,3);C=qn(C),N=function(ve){return oe(Y[ve],ve,Y)}}var fe=$(C,N,U);return fe>-1?Y[oe?C[fe]:fe]:i}}function LD($){return Wc(function(C){var N=C.length,U=N,Y=Wa.prototype.thru;for($&&C.reverse();U--;){var oe=C[U];if(typeof oe!="function")throw new Ha(d);if(Y&&!fe&&B_(oe)=="wrapper")var fe=new Wa([],!0)}for(U=fe?U:N;++U<N;){oe=C[U];var ve=B_(oe),Te=ve=="wrapper"?GM(oe):i;Te&&JM(Te[0])&&Te[1]==(_e|J|re|xe)&&!Te[4].length&&Te[9]==1?fe=fe[B_(Te[0])].apply(fe,Te[3]):fe=oe.length==1&&JM(oe)?fe[ve]():fe.thru(oe)}return function(){var Ue=arguments,Be=Ue[0];if(fe&&Ue.length==1&&Ht(Be))return fe.plant(Be).value();for(var Je=0,ct=N?C[Je].apply(this,Ue):Be;++Je<N;)ct=C[Je].call(this,ct);return ct}})}function j_($,C,N,U,Y,oe,fe,ve,Te,Ue){var Be=C&_e,Je=C&B,ct=C&V,xt=C&(J|ne),Lt=C&Ne,ei=ct?i:Kv($);function Pt(){for(var ci=arguments.length,vi=Ae(ci),aa=ci;aa--;)vi[aa]=arguments[aa];if(xt)var Js=fy(Pt),la=Pce(vi,Js);if(U&&(vi=TD(vi,U,Y,xt)),oe&&(vi=ID(vi,oe,fe,xt)),ci-=la,xt&&ci<Ue){var sn=_p(vi,Js);return ND($,C,j_,Pt.placeholder,N,vi,sn,ve,Te,Ue-ci)}var Vl=Je?N:this,Yc=ct?Vl[$]:$;return ci=vi.length,ve?vi=Upe(vi,ve):Lt&&ci>1&&vi.reverse(),Be&&Te<ci&&(vi.length=Te),this&&this!==ss&&this instanceof Pt&&(Yc=ei||Kv(Yc)),Yc.apply(Vl,vi)}return Pt}function PD($,C){return function(N,U){return Zhe(N,$,C(U),{})}}function z_($,C){return function(N,U){var Y;if(N===i&&U===i)return C;if(N!==i&&(Y=N),U!==i){if(Y===i)return U;typeof N=="string"||typeof U=="string"?(N=sa(N),U=sa(U)):(N=wD(N),U=wD(U)),Y=$(N,U)}return Y}}function zM($){return Wc(function(C){return C=_r(C,na(kt())),ii(function(N){var U=this;return $(C,function(Y){return ra(Y,U,N)})})})}function V_($,C){C=C===i?" ":sa(C);var N=C.length;if(N<2)return N?LM(C,$):C;var U=LM(C,T_($/oy(C)));return sy(C)?Ep(Dl(U),0,$).join(""):U.slice(0,$)}function Spe($,C,N,U){var Y=C&B,oe=Kv($);function fe(){for(var ve=-1,Te=arguments.length,Ue=-1,Be=U.length,Je=Ae(Be+Te),ct=this&&this!==ss&&this instanceof fe?oe:$;++Ue<Be;)Je[Ue]=U[Ue];for(;Te--;)Je[Ue++]=arguments[++ve];return ra(ct,Y?N:this,Je)}return fe}function RD($){return function(C,N,U){return U&&typeof U!="number"&&Ws(C,N,U)&&(N=U=i),C=Zc(C),N===i?(N=C,C=0):N=Zc(N),U=U===i?C<N?1:-1:Zc(U),lpe(C,N,U,$)}}function U_($){return function(C,N){return typeof C=="string"&&typeof N=="string"||(C=Ya(C),N=Ya(N)),$(C,N)}}function ND($,C,N,U,Y,oe,fe,ve,Te,Ue){var Be=C&J,Je=Be?fe:i,ct=Be?i:fe,xt=Be?oe:i,Lt=Be?i:oe;C|=Be?re:ue,C&=~(Be?ue:re),C&q||(C&=~(B|V));var ei=[$,C,Y,xt,Je,Lt,ct,ve,Te,Ue],Pt=N.apply(i,ei);return JM($)&&JD(Pt,ei),Pt.placeholder=U,KD(Pt,$,C)}function VM($){var C=En[$];return function(N,U){if(N=Ya(N),U=U==null?0:$s(Yt(U),292),U&&KF(N)){var Y=(ji(N)+"e").split("e"),oe=C(Y[0]+"e"+(+Y[1]+U));return Y=(ji(oe)+"e").split("e"),+(Y[0]+"e"+(+Y[1]-U))}return C(N)}}var $pe=uy&&1/g_(new uy([,-0]))[1]==he?function($){return new uy($)}:u7;function FD($){return function(C){var N=Ms(C);return N==Ii?gM(C):N==Gr?Vce(C):Lce(C,$(C))}}function Hc($,C,N,U,Y,oe,fe,ve){var Te=C&V;if(!Te&&typeof $!="function")throw new Ha(d);var Ue=U?U.length:0;if(Ue||(C&=~(re|ue),U=Y=i),fe=fe===i?fe:Tn(Yt(fe),0),ve=ve===i?ve:Yt(ve),Ue-=Y?Y.length:0,C&ue){var Be=U,Je=Y;U=Y=i}var ct=Te?i:GM($),xt=[$,C,N,U,Y,Be,Je,oe,fe,ve];if(ct&&jpe(xt,ct),$=xt[0],C=xt[1],N=xt[2],U=xt[3],Y=xt[4],ve=xt[9]=xt[9]===i?Te?0:$.length:Tn(xt[9]-Ue,0),!ve&&C&(J|ne)&&(C&=~(J|ne)),!C||C==B)var Lt=_pe($,C,N);else C==J||C==ne?Lt=xpe($,C,ve):(C==re||C==(B|re))&&!Y.length?Lt=Spe($,C,N,U):Lt=j_.apply(i,xt);var ei=ct?gD:JD;return KD(ei(Lt,xt),$,C)}function DD($,C,N,U){return $===i||zl($,ly[N])&&!qi.call(U,N)?C:$}function jD($,C,N,U,Y,oe){return Or($)&&Or(C)&&(oe.set(C,$),R_($,C,i,jD,oe),oe.delete(C)),$}function Mpe($){return Xv($)?i:$}function zD($,C,N,U,Y,oe){var fe=N&D,ve=$.length,Te=C.length;if(ve!=Te&&!(fe&&Te>ve))return!1;var Ue=oe.get($),Be=oe.get(C);if(Ue&&Be)return Ue==C&&Be==$;var Je=-1,ct=!0,xt=N&z?new Ef:i;for(oe.set($,C),oe.set(C,$);++Je<ve;){var Lt=$[Je],ei=C[Je];if(U)var Pt=fe?U(ei,Lt,Je,C,$,oe):U(Lt,ei,Je,$,C,oe);if(Pt!==i){if(Pt)continue;ct=!1;break}if(xt){if(!hM(C,function(ci,vi){if(!Dv(xt,vi)&&(Lt===ci||Y(Lt,ci,N,U,oe)))return xt.push(vi)})){ct=!1;break}}else if(!(Lt===ei||Y(Lt,ei,N,U,oe))){ct=!1;break}}return oe.delete($),oe.delete(C),ct}function Epe($,C,N,U,Y,oe,fe){switch(N){case h:if($.byteLength!=C.byteLength||$.byteOffset!=C.byteOffset)return!1;$=$.buffer,C=C.buffer;case We:return!($.byteLength!=C.byteLength||!oe(new S_($),new S_(C)));case Ar:case Ki:case X:return zl(+$,+C);case ti:return $.name==C.name&&$.message==C.message;case ns:case Ss:return $==C+"";case Ii:var ve=gM;case Gr:var Te=U&D;if(ve||(ve=g_),$.size!=C.size&&!Te)return!1;var Ue=fe.get($);if(Ue)return Ue==C;U|=z,fe.set($,C);var Be=zD(ve($),ve(C),U,Y,oe,fe);return fe.delete($),Be;case Eo:if(Bv)return Bv.call($)==Bv.call(C)}return!1}function Tpe($,C,N,U,Y,oe){var fe=N&D,ve=UM($),Te=ve.length,Ue=UM(C),Be=Ue.length;if(Te!=Be&&!fe)return!1;for(var Je=Te;Je--;){var ct=ve[Je];if(!(fe?ct in C:qi.call(C,ct)))return!1}var xt=oe.get($),Lt=oe.get(C);if(xt&&Lt)return xt==C&&Lt==$;var ei=!0;oe.set($,C),oe.set(C,$);for(var Pt=fe;++Je<Te;){ct=ve[Je];var ci=$[ct],vi=C[ct];if(U)var aa=fe?U(vi,ci,ct,C,$,oe):U(ci,vi,ct,$,C,oe);if(!(aa===i?ci===vi||Y(ci,vi,N,U,oe):aa)){ei=!1;break}Pt||(Pt=ct=="constructor")}if(ei&&!Pt){var Js=$.constructor,la=C.constructor;Js!=la&&"constructor"in $&&"constructor"in C&&!(typeof Js=="function"&&Js instanceof Js&&typeof la=="function"&&la instanceof la)&&(ei=!1)}return oe.delete($),oe.delete(C),ei}function Wc($){return ZM(HD($,i,tj),$+"")}function UM($){return oD($,qn,HM)}function BM($){return oD($,Co,VD)}var GM=C_?function($){return C_.get($)}:u7;function B_($){for(var C=$.name+"",N=cy[C],U=qi.call(cy,C)?N.length:0;U--;){var Y=N[U],oe=Y.func;if(oe==null||oe==$)return Y.name}return C}function fy($){var C=qi.call(se,"placeholder")?se:$;return C.placeholder}function kt(){var $=se.iteratee||a7;return $=$===a7?uD:$,arguments.length?$(arguments[0],arguments[1]):$}function G_($,C){var N=$.__data__;return Rpe(C)?N[typeof C=="string"?"string":"hash"]:N.map}function qM($){for(var C=qn($),N=C.length;N--;){var U=C[N],Y=$[U];C[N]=[U,Y,GD(Y)]}return C}function Cf($,C){var N=Dce($,C);return lD(N)?N:i}function Ipe($){var C=qi.call($,$f),N=$[$f];try{$[$f]=i;var U=!0}catch{}var Y=__.call($);return U&&(C?$[$f]=N:delete $[$f]),Y}var HM=wM?function($){return $==null?[]:($=Qi($),wp(wM($),function(C){return WF.call($,C)}))}:c7,VD=wM?function($){for(var C=[];$;)bp(C,HM($)),$=$_($);return C}:c7,Ms=Hs;(bM&&Ms(new bM(new ArrayBuffer(1)))!=h||zv&&Ms(new zv)!=Ii||_M&&Ms(_M.resolve())!=ai||uy&&Ms(new uy)!=Gr||Vv&&Ms(new Vv)!=Fl)&&(Ms=function($){var C=Hs($),N=C==Mo?$.constructor:i,U=N?kf(N):"";if(U)switch(U){case che:return h;case hhe:return Ii;case phe:return ai;case dhe:return Gr;case fhe:return Fl}return C});function Cpe($,C,N){for(var U=-1,Y=N.length;++U<Y;){var oe=N[U],fe=oe.size;switch(oe.type){case"drop":$+=fe;break;case"dropRight":C-=fe;break;case"take":C=$s(C,$+fe);break;case"takeRight":$=Tn($,C-fe);break}}return{start:$,end:C}}function kpe($){var C=$.match(ze);return C?C[1].split(Fe):[]}function UD($,C,N){C=Mp(C,$);for(var U=-1,Y=C.length,oe=!1;++U<Y;){var fe=Wu(C[U]);if(!(oe=$!=null&&N($,fe)))break;$=$[fe]}return oe||++U!=Y?oe:(Y=$==null?0:$.length,!!Y&&Y_(Y)&&Jc(fe,Y)&&(Ht($)||Af($)))}function Ape($){var C=$.length,N=new $.constructor(C);return C&&typeof $[0]=="string"&&qi.call($,"index")&&(N.index=$.index,N.input=$.input),N}function BD($){return typeof $.constructor=="function"&&!Zv($)?hy($_($)):{}}function Ope($,C,N){var U=$.constructor;switch(C){case We:return jM($);case Ar:case Ki:return new U(+$);case h:return ype($,N);case L:case b:case c:case a:case n:case o:case u:case p:case f:return MD($,N);case Ii:return new U;case X:case Ss:return new U($);case ns:return mpe($);case Gr:return new U;case Eo:return gpe($)}}function Lpe($,C){var N=C.length;if(!N)return $;var U=N-1;return C[U]=(N>1?"& ":"")+C[U],C=C.join(N>2?", ":" "),$.replace(Ie,`{
/* [wrapped with `+C+`] */
`)}function Ppe($){return Ht($)||Af($)||!!(JF&&$&&$[JF])}function Jc($,C){var N=typeof $;return C=C==null?pe:C,!!C&&(N=="number"||N!="symbol"&&di.test($))&&$>-1&&$%1==0&&$<C}function Ws($,C,N){if(!Or(N))return!1;var U=typeof C;return(U=="number"?Io(N)&&Jc(C,N.length):U=="string"&&C in N)?zl(N[C],$):!1}function WM($,C){if(Ht($))return!1;var N=typeof $;return N=="number"||N=="symbol"||N=="boolean"||$==null||oa($)?!0:G.test($)||!W.test($)||C!=null&&$ in Qi(C)}function Rpe($){var C=typeof $;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?$!=="__proto__":$===null}function JM($){var C=B_($),N=se[C];if(typeof N!="function"||!(C in fi.prototype))return!1;if($===N)return!0;var U=GM(N);return!!U&&$===U[0]}function Npe($){return!!GF&&GF in $}var Fpe=w_?Kc:h7;function Zv($){var C=$&&$.constructor,N=typeof C=="function"&&C.prototype||ly;return $===N}function GD($){return $===$&&!Or($)}function qD($,C){return function(N){return N==null?!1:N[$]===C&&(C!==i||$ in Qi(N))}}function Dpe($){var C=K_($,function(U){return N.size===_&&N.clear(),U}),N=C.cache;return C}function jpe($,C){var N=$[1],U=C[1],Y=N|U,oe=Y<(B|V|_e),fe=U==_e&&N==J||U==_e&&N==xe&&$[7].length<=C[8]||U==(_e|xe)&&C[7].length<=C[8]&&N==J;if(!(oe||fe))return $;U&B&&($[2]=C[2],Y|=N&B?0:q);var ve=C[3];if(ve){var Te=$[3];$[3]=Te?TD(Te,ve,C[4]):ve,$[4]=Te?_p($[3],M):C[4]}return ve=C[5],ve&&(Te=$[5],$[5]=Te?ID(Te,ve,C[6]):ve,$[6]=Te?_p($[5],M):C[6]),ve=C[7],ve&&($[7]=ve),U&_e&&($[8]=$[8]==null?C[8]:$s($[8],C[8])),$[9]==null&&($[9]=C[9]),$[0]=C[0],$[1]=Y,$}function zpe($){var C=[];if($!=null)for(var N in Qi($))C.push(N);return C}function Vpe($){return __.call($)}function HD($,C,N){return C=Tn(C===i?$.length-1:C,0),function(){for(var U=arguments,Y=-1,oe=Tn(U.length-C,0),fe=Ae(oe);++Y<oe;)fe[Y]=U[C+Y];Y=-1;for(var ve=Ae(C+1);++Y<C;)ve[Y]=U[Y];return ve[C]=N(fe),ra($,this,ve)}}function WD($,C){return C.length<2?$:If($,Ka(C,0,-1))}function Upe($,C){for(var N=$.length,U=$s(C.length,N),Y=To($);U--;){var oe=C[U];$[U]=Jc(oe,N)?Y[oe]:i}return $}function KM($,C){if(!(C==="constructor"&&typeof $[C]=="function")&&C!="__proto__")return $[C]}var JD=ZD(gD),Yv=rhe||function($,C){return ss.setTimeout($,C)},ZM=ZD(hpe);function KD($,C,N){var U=C+"";return ZM($,Lpe(U,Bpe(kpe(U),N)))}function ZD($){var C=0,N=0;return function(){var U=ahe(),Y=lt-(U-N);if(N=U,Y>0){if(++C>=Ze)return arguments[0]}else C=0;return $.apply(i,arguments)}}function q_($,C){var N=-1,U=$.length,Y=U-1;for(C=C===i?U:C;++N<C;){var oe=OM(N,Y),fe=$[oe];$[oe]=$[N],$[N]=fe}return $.length=C,$}var YD=Dpe(function($){var C=[];return $.charCodeAt(0)===46&&C.push(""),$.replace(ee,function(N,U,Y,oe){C.push(Y?oe.replace(yt,"$1"):U||N)}),C});function Wu($){if(typeof $=="string"||oa($))return $;var C=$+"";return C=="0"&&1/$==-he?"-0":C}function kf($){if($!=null){try{return b_.call($)}catch{}try{return $+""}catch{}}return""}function Bpe($,C){return qa(ft,function(N){var U="_."+N[0];C&N[1]&&!y_($,U)&&$.push(U)}),$.sort()}function XD($){if($ instanceof fi)return $.clone();var C=new Wa($.__wrapped__,$.__chain__);return C.__actions__=To($.__actions__),C.__index__=$.__index__,C.__values__=$.__values__,C}function Gpe($,C,N){(N?Ws($,C,N):C===i)?C=1:C=Tn(Yt(C),0);var U=$==null?0:$.length;if(!U||C<1)return[];for(var Y=0,oe=0,fe=Ae(T_(U/C));Y<U;)fe[oe++]=Ka($,Y,Y+=C);return fe}function qpe($){for(var C=-1,N=$==null?0:$.length,U=0,Y=[];++C<N;){var oe=$[C];oe&&(Y[U++]=oe)}return Y}function Hpe(){var $=arguments.length;if(!$)return[];for(var C=Ae($-1),N=arguments[0],U=$;U--;)C[U-1]=arguments[U];return bp(Ht(N)?To(N):[N],os(C,1))}var Wpe=ii(function($,C){return nn($)?qv($,os(C,1,nn,!0)):[]}),Jpe=ii(function($,C){var N=Za(C);return nn(N)&&(N=i),nn($)?qv($,os(C,1,nn,!0),kt(N,2)):[]}),Kpe=ii(function($,C){var N=Za(C);return nn(N)&&(N=i),nn($)?qv($,os(C,1,nn,!0),i,N):[]});function Zpe($,C,N){var U=$==null?0:$.length;return U?(C=N||C===i?1:Yt(C),Ka($,C<0?0:C,U)):[]}function Ype($,C,N){var U=$==null?0:$.length;return U?(C=N||C===i?1:Yt(C),C=U-C,Ka($,0,C<0?0:C)):[]}function Xpe($,C){return $&&$.length?F_($,kt(C,3),!0,!0):[]}function Qpe($,C){return $&&$.length?F_($,kt(C,3),!0):[]}function ede($,C,N,U){var Y=$==null?0:$.length;return Y?(N&&typeof N!="number"&&Ws($,C,N)&&(N=0,U=Y),Hhe($,C,N,U)):[]}function QD($,C,N){var U=$==null?0:$.length;if(!U)return-1;var Y=N==null?0:Yt(N);return Y<0&&(Y=Tn(U+Y,0)),m_($,kt(C,3),Y)}function ej($,C,N){var U=$==null?0:$.length;if(!U)return-1;var Y=U-1;return N!==i&&(Y=Yt(N),Y=N<0?Tn(U+Y,0):$s(Y,U-1)),m_($,kt(C,3),Y,!0)}function tj($){var C=$==null?0:$.length;return C?os($,1):[]}function tde($){var C=$==null?0:$.length;return C?os($,he):[]}function ide($,C){var N=$==null?0:$.length;return N?(C=C===i?1:Yt(C),os($,C)):[]}function rde($){for(var C=-1,N=$==null?0:$.length,U={};++C<N;){var Y=$[C];U[Y[0]]=Y[1]}return U}function ij($){return $&&$.length?$[0]:i}function nde($,C,N){var U=$==null?0:$.length;if(!U)return-1;var Y=N==null?0:Yt(N);return Y<0&&(Y=Tn(U+Y,0)),ny($,C,Y)}function sde($){var C=$==null?0:$.length;return C?Ka($,0,-1):[]}var ode=ii(function($){var C=_r($,FM);return C.length&&C[0]===$[0]?TM(C):[]}),ade=ii(function($){var C=Za($),N=_r($,FM);return C===Za(N)?C=i:N.pop(),N.length&&N[0]===$[0]?TM(N,kt(C,2)):[]}),lde=ii(function($){var C=Za($),N=_r($,FM);return C=typeof C=="function"?C:i,C&&N.pop(),N.length&&N[0]===$[0]?TM(N,i,C):[]});function ude($,C){return $==null?"":she.call($,C)}function Za($){var C=$==null?0:$.length;return C?$[C-1]:i}function cde($,C,N){var U=$==null?0:$.length;if(!U)return-1;var Y=U;return N!==i&&(Y=Yt(N),Y=Y<0?Tn(U+Y,0):$s(Y,U-1)),C===C?Bce($,C,Y):m_($,NF,Y,!0)}function hde($,C){return $&&$.length?dD($,Yt(C)):i}var pde=ii(rj);function rj($,C){return $&&$.length&&C&&C.length?AM($,C):$}function dde($,C,N){return $&&$.length&&C&&C.length?AM($,C,kt(N,2)):$}function fde($,C,N){return $&&$.length&&C&&C.length?AM($,C,i,N):$}var yde=Wc(function($,C){var N=$==null?0:$.length,U=SM($,C);return mD($,_r(C,function(Y){return Jc(Y,N)?+Y:Y}).sort(ED)),U});function mde($,C){var N=[];if(!($&&$.length))return N;var U=-1,Y=[],oe=$.length;for(C=kt(C,3);++U<oe;){var fe=$[U];C(fe,U,$)&&(N.push(fe),Y.push(U))}return mD($,Y),N}function YM($){return $==null?$:uhe.call($)}function gde($,C,N){var U=$==null?0:$.length;return U?(N&&typeof N!="number"&&Ws($,C,N)?(C=0,N=U):(C=C==null?0:Yt(C),N=N===i?U:Yt(N)),Ka($,C,N)):[]}function vde($,C){return N_($,C)}function wde($,C,N){return PM($,C,kt(N,2))}function bde($,C){var N=$==null?0:$.length;if(N){var U=N_($,C);if(U<N&&zl($[U],C))return U}return-1}function _de($,C){return N_($,C,!0)}function xde($,C,N){return PM($,C,kt(N,2),!0)}function Sde($,C){var N=$==null?0:$.length;if(N){var U=N_($,C,!0)-1;if(zl($[U],C))return U}return-1}function $de($){return $&&$.length?vD($):[]}function Mde($,C){return $&&$.length?vD($,kt(C,2)):[]}function Ede($){var C=$==null?0:$.length;return C?Ka($,1,C):[]}function Tde($,C,N){return $&&$.length?(C=N||C===i?1:Yt(C),Ka($,0,C<0?0:C)):[]}function Ide($,C,N){var U=$==null?0:$.length;return U?(C=N||C===i?1:Yt(C),C=U-C,Ka($,C<0?0:C,U)):[]}function Cde($,C){return $&&$.length?F_($,kt(C,3),!1,!0):[]}function kde($,C){return $&&$.length?F_($,kt(C,3)):[]}var Ade=ii(function($){return $p(os($,1,nn,!0))}),Ode=ii(function($){var C=Za($);return nn(C)&&(C=i),$p(os($,1,nn,!0),kt(C,2))}),Lde=ii(function($){var C=Za($);return C=typeof C=="function"?C:i,$p(os($,1,nn,!0),i,C)});function Pde($){return $&&$.length?$p($):[]}function Rde($,C){return $&&$.length?$p($,kt(C,2)):[]}function Nde($,C){return C=typeof C=="function"?C:i,$&&$.length?$p($,i,C):[]}function XM($){if(!($&&$.length))return[];var C=0;return $=wp($,function(N){if(nn(N))return C=Tn(N.length,C),!0}),yM(C,function(N){return _r($,pM(N))})}function nj($,C){if(!($&&$.length))return[];var N=XM($);return C==null?N:_r(N,function(U){return ra(C,i,U)})}var Fde=ii(function($,C){return nn($)?qv($,C):[]}),Dde=ii(function($){return NM(wp($,nn))}),jde=ii(function($){var C=Za($);return nn(C)&&(C=i),NM(wp($,nn),kt(C,2))}),zde=ii(function($){var C=Za($);return C=typeof C=="function"?C:i,NM(wp($,nn),i,C)}),Vde=ii(XM);function Ude($,C){return xD($||[],C||[],Gv)}function Bde($,C){return xD($||[],C||[],Jv)}var Gde=ii(function($){var C=$.length,N=C>1?$[C-1]:i;return N=typeof N=="function"?($.pop(),N):i,nj($,N)});function sj($){var C=se($);return C.__chain__=!0,C}function qde($,C){return C($),$}function H_($,C){return C($)}var Hde=Wc(function($){var C=$.length,N=C?$[0]:0,U=this.__wrapped__,Y=function(oe){return SM(oe,$)};return C>1||this.__actions__.length||!(U instanceof fi)||!Jc(N)?this.thru(Y):(U=U.slice(N,+N+(C?1:0)),U.__actions__.push({func:H_,args:[Y],thisArg:i}),new Wa(U,this.__chain__).thru(function(oe){return C&&!oe.length&&oe.push(i),oe}))});function Wde(){return sj(this)}function Jde(){return new Wa(this.value(),this.__chain__)}function Kde(){this.__values__===i&&(this.__values__=wj(this.value()));var $=this.__index__>=this.__values__.length,C=$?i:this.__values__[this.__index__++];return{done:$,value:C}}function Zde(){return this}function Yde($){for(var C,N=this;N instanceof A_;){var U=XD(N);U.__index__=0,U.__values__=i,C?Y.__wrapped__=U:C=U;var Y=U;N=N.__wrapped__}return Y.__wrapped__=$,C}function Xde(){var $=this.__wrapped__;if($ instanceof fi){var C=$;return this.__actions__.length&&(C=new fi(this)),C=C.reverse(),C.__actions__.push({func:H_,args:[YM],thisArg:i}),new Wa(C,this.__chain__)}return this.thru(YM)}function Qde(){return _D(this.__wrapped__,this.__actions__)}var efe=D_(function($,C,N){qi.call($,N)?++$[N]:qc($,N,1)});function tfe($,C,N){var U=Ht($)?PF:qhe;return N&&Ws($,C,N)&&(C=i),U($,kt(C,3))}function ife($,C){var N=Ht($)?wp:nD;return N($,kt(C,3))}var rfe=OD(QD),nfe=OD(ej);function sfe($,C){return os(W_($,C),1)}function ofe($,C){return os(W_($,C),he)}function afe($,C,N){return N=N===i?1:Yt(N),os(W_($,C),N)}function oj($,C){var N=Ht($)?qa:Sp;return N($,kt(C,3))}function aj($,C){var N=Ht($)?Ece:rD;return N($,kt(C,3))}var lfe=D_(function($,C,N){qi.call($,N)?$[N].push(C):qc($,N,[C])});function ufe($,C,N,U){$=Io($)?$:my($),N=N&&!U?Yt(N):0;var Y=$.length;return N<0&&(N=Tn(Y+N,0)),X_($)?N<=Y&&$.indexOf(C,N)>-1:!!Y&&ny($,C,N)>-1}var cfe=ii(function($,C,N){var U=-1,Y=typeof C=="function",oe=Io($)?Ae($.length):[];return Sp($,function(fe){oe[++U]=Y?ra(C,fe,N):Hv(fe,C,N)}),oe}),hfe=D_(function($,C,N){qc($,N,C)});function W_($,C){var N=Ht($)?_r:cD;return N($,kt(C,3))}function pfe($,C,N,U){return $==null?[]:(Ht(C)||(C=C==null?[]:[C]),N=U?i:N,Ht(N)||(N=N==null?[]:[N]),fD($,C,N))}var dfe=D_(function($,C,N){$[N?0:1].push(C)},function(){return[[],[]]});function ffe($,C,N){var U=Ht($)?cM:DF,Y=arguments.length<3;return U($,kt(C,4),N,Y,Sp)}function yfe($,C,N){var U=Ht($)?Tce:DF,Y=arguments.length<3;return U($,kt(C,4),N,Y,rD)}function mfe($,C){var N=Ht($)?wp:nD;return N($,Z_(kt(C,3)))}function gfe($){var C=Ht($)?QF:upe;return C($)}function vfe($,C,N){(N?Ws($,C,N):C===i)?C=1:C=Yt(C);var U=Ht($)?zhe:cpe;return U($,C)}function wfe($){var C=Ht($)?Vhe:ppe;return C($)}function bfe($){if($==null)return 0;if(Io($))return X_($)?oy($):$.length;var C=Ms($);return C==Ii||C==Gr?$.size:CM($).length}function _fe($,C,N){var U=Ht($)?hM:dpe;return N&&Ws($,C,N)&&(C=i),U($,kt(C,3))}var xfe=ii(function($,C){if($==null)return[];var N=C.length;return N>1&&Ws($,C[0],C[1])?C=[]:N>2&&Ws(C[0],C[1],C[2])&&(C=[C[0]]),fD($,os(C,1),[])}),J_=ihe||function(){return ss.Date.now()};function Sfe($,C){if(typeof C!="function")throw new Ha(d);return $=Yt($),function(){if(--$<1)return C.apply(this,arguments)}}function lj($,C,N){return C=N?i:C,C=$&&C==null?$.length:C,Hc($,_e,i,i,i,i,C)}function uj($,C){var N;if(typeof C!="function")throw new Ha(d);return $=Yt($),function(){return--$>0&&(N=C.apply(this,arguments)),$<=1&&(C=i),N}}var QM=ii(function($,C,N){var U=B;if(N.length){var Y=_p(N,fy(QM));U|=re}return Hc($,U,C,N,Y)}),cj=ii(function($,C,N){var U=B|V;if(N.length){var Y=_p(N,fy(cj));U|=re}return Hc(C,U,$,N,Y)});function hj($,C,N){C=N?i:C;var U=Hc($,J,i,i,i,i,i,C);return U.placeholder=hj.placeholder,U}function pj($,C,N){C=N?i:C;var U=Hc($,ne,i,i,i,i,i,C);return U.placeholder=pj.placeholder,U}function dj($,C,N){var U,Y,oe,fe,ve,Te,Ue=0,Be=!1,Je=!1,ct=!0;if(typeof $!="function")throw new Ha(d);C=Ya(C)||0,Or(N)&&(Be=!!N.leading,Je="maxWait"in N,oe=Je?Tn(Ya(N.maxWait)||0,C):oe,ct="trailing"in N?!!N.trailing:ct);function xt(sn){var Vl=U,Yc=Y;return U=Y=i,Ue=sn,fe=$.apply(Yc,Vl),fe}function Lt(sn){return Ue=sn,ve=Yv(ci,C),Be?xt(sn):fe}function ei(sn){var Vl=sn-Te,Yc=sn-Ue,Oj=C-Vl;return Je?$s(Oj,oe-Yc):Oj}function Pt(sn){var Vl=sn-Te,Yc=sn-Ue;return Te===i||Vl>=C||Vl<0||Je&&Yc>=oe}function ci(){var sn=J_();if(Pt(sn))return vi(sn);ve=Yv(ci,ei(sn))}function vi(sn){return ve=i,ct&&U?xt(sn):(U=Y=i,fe)}function aa(){ve!==i&&SD(ve),Ue=0,U=Te=Y=ve=i}function Js(){return ve===i?fe:vi(J_())}function la(){var sn=J_(),Vl=Pt(sn);if(U=arguments,Y=this,Te=sn,Vl){if(ve===i)return Lt(Te);if(Je)return SD(ve),ve=Yv(ci,C),xt(Te)}return ve===i&&(ve=Yv(ci,C)),fe}return la.cancel=aa,la.flush=Js,la}var $fe=ii(function($,C){return iD($,1,C)}),Mfe=ii(function($,C,N){return iD($,Ya(C)||0,N)});function Efe($){return Hc($,Ne)}function K_($,C){if(typeof $!="function"||C!=null&&typeof C!="function")throw new Ha(d);var N=function(){var U=arguments,Y=C?C.apply(this,U):U[0],oe=N.cache;if(oe.has(Y))return oe.get(Y);var fe=$.apply(this,U);return N.cache=oe.set(Y,fe)||oe,fe};return N.cache=new(K_.Cache||Gc),N}K_.Cache=Gc;function Z_($){if(typeof $!="function")throw new Ha(d);return function(){var C=arguments;switch(C.length){case 0:return!$.call(this);case 1:return!$.call(this,C[0]);case 2:return!$.call(this,C[0],C[1]);case 3:return!$.call(this,C[0],C[1],C[2])}return!$.apply(this,C)}}function Tfe($){return uj(2,$)}var Ife=fpe(function($,C){C=C.length==1&&Ht(C[0])?_r(C[0],na(kt())):_r(os(C,1),na(kt()));var N=C.length;return ii(function(U){for(var Y=-1,oe=$s(U.length,N);++Y<oe;)U[Y]=C[Y].call(this,U[Y]);return ra($,this,U)})}),e7=ii(function($,C){var N=_p(C,fy(e7));return Hc($,re,i,C,N)}),fj=ii(function($,C){var N=_p(C,fy(fj));return Hc($,ue,i,C,N)}),Cfe=Wc(function($,C){return Hc($,xe,i,i,i,C)});function kfe($,C){if(typeof $!="function")throw new Ha(d);return C=C===i?C:Yt(C),ii($,C)}function Afe($,C){if(typeof $!="function")throw new Ha(d);return C=C==null?0:Tn(Yt(C),0),ii(function(N){var U=N[C],Y=Ep(N,0,C);return U&&bp(Y,U),ra($,this,Y)})}function Ofe($,C,N){var U=!0,Y=!0;if(typeof $!="function")throw new Ha(d);return Or(N)&&(U="leading"in N?!!N.leading:U,Y="trailing"in N?!!N.trailing:Y),dj($,C,{leading:U,maxWait:C,trailing:Y})}function Lfe($){return lj($,1)}function Pfe($,C){return e7(DM(C),$)}function Rfe(){if(!arguments.length)return[];var $=arguments[0];return Ht($)?$:[$]}function Nfe($){return Ja($,R)}function Ffe($,C){return C=typeof C=="function"?C:i,Ja($,R,C)}function Dfe($){return Ja($,k|R)}function jfe($,C){return C=typeof C=="function"?C:i,Ja($,k|R,C)}function zfe($,C){return C==null||tD($,C,qn(C))}function zl($,C){return $===C||$!==$&&C!==C}var Vfe=U_(EM),Ufe=U_(function($,C){return $>=C}),Af=aD(function(){return arguments}())?aD:function($){return qr($)&&qi.call($,"callee")&&!WF.call($,"callee")},Ht=Ae.isArray,Bfe=IF?na(IF):Yhe;function Io($){return $!=null&&Y_($.length)&&!Kc($)}function nn($){return qr($)&&Io($)}function Gfe($){return $===!0||$===!1||qr($)&&Hs($)==Ar}var Tp=nhe||h7,qfe=CF?na(CF):Xhe;function Hfe($){return qr($)&&$.nodeType===1&&!Xv($)}function Wfe($){if($==null)return!0;if(Io($)&&(Ht($)||typeof $=="string"||typeof $.splice=="function"||Tp($)||yy($)||Af($)))return!$.length;var C=Ms($);if(C==Ii||C==Gr)return!$.size;if(Zv($))return!CM($).length;for(var N in $)if(qi.call($,N))return!1;return!0}function Jfe($,C){return Wv($,C)}function Kfe($,C,N){N=typeof N=="function"?N:i;var U=N?N($,C):i;return U===i?Wv($,C,i,N):!!U}function t7($){if(!qr($))return!1;var C=Hs($);return C==ti||C==gi||typeof $.message=="string"&&typeof $.name=="string"&&!Xv($)}function Zfe($){return typeof $=="number"&&KF($)}function Kc($){if(!Or($))return!1;var C=Hs($);return C==gp||C==bf||C==tn||C==cr}function yj($){return typeof $=="number"&&$==Yt($)}function Y_($){return typeof $=="number"&&$>-1&&$%1==0&&$<=pe}function Or($){var C=typeof $;return $!=null&&(C=="object"||C=="function")}function qr($){return $!=null&&typeof $=="object"}var mj=kF?na(kF):epe;function Yfe($,C){return $===C||IM($,C,qM(C))}function Xfe($,C,N){return N=typeof N=="function"?N:i,IM($,C,qM(C),N)}function Qfe($){return gj($)&&$!=+$}function e0e($){if(Fpe($))throw new qt(l);return lD($)}function t0e($){return $===null}function i0e($){return $==null}function gj($){return typeof $=="number"||qr($)&&Hs($)==X}function Xv($){if(!qr($)||Hs($)!=Mo)return!1;var C=$_($);if(C===null)return!0;var N=qi.call(C,"constructor")&&C.constructor;return typeof N=="function"&&N instanceof N&&b_.call(N)==Xce}var i7=AF?na(AF):tpe;function r0e($){return yj($)&&$>=-pe&&$<=pe}var vj=OF?na(OF):ipe;function X_($){return typeof $=="string"||!Ht($)&&qr($)&&Hs($)==Ss}function oa($){return typeof $=="symbol"||qr($)&&Hs($)==Eo}var yy=LF?na(LF):rpe;function n0e($){return $===i}function s0e($){return qr($)&&Ms($)==Fl}function o0e($){return qr($)&&Hs($)==vp}var a0e=U_(kM),l0e=U_(function($,C){return $<=C});function wj($){if(!$)return[];if(Io($))return X_($)?Dl($):To($);if(jv&&$[jv])return zce($[jv]());var C=Ms($),N=C==Ii?gM:C==Gr?g_:my;return N($)}function Zc($){if(!$)return $===0?$:0;if($=Ya($),$===he||$===-he){var C=$<0?-1:1;return C*me}return $===$?$:0}function Yt($){var C=Zc($),N=C%1;return C===C?N?C-N:C:0}function bj($){return $?Tf(Yt($),0,Ee):0}function Ya($){if(typeof $=="number")return $;if(oa($))return we;if(Or($)){var C=typeof $.valueOf=="function"?$.valueOf():$;$=Or(C)?C+"":C}if(typeof $!="string")return $===0?$:+$;$=jF($);var N=br.test($);return N||at.test($)?Sce($.slice(2),N?2:8):Qt.test($)?we:+$}function _j($){return Hu($,Co($))}function u0e($){return $?Tf(Yt($),-pe,pe):$===0?$:0}function ji($){return $==null?"":sa($)}var c0e=py(function($,C){if(Zv(C)||Io(C)){Hu(C,qn(C),$);return}for(var N in C)qi.call(C,N)&&Gv($,N,C[N])}),xj=py(function($,C){Hu(C,Co(C),$)}),Q_=py(function($,C,N,U){Hu(C,Co(C),$,U)}),h0e=py(function($,C,N,U){Hu(C,qn(C),$,U)}),p0e=Wc(SM);function d0e($,C){var N=hy($);return C==null?N:eD(N,C)}var f0e=ii(function($,C){$=Qi($);var N=-1,U=C.length,Y=U>2?C[2]:i;for(Y&&Ws(C[0],C[1],Y)&&(U=1);++N<U;)for(var oe=C[N],fe=Co(oe),ve=-1,Te=fe.length;++ve<Te;){var Ue=fe[ve],Be=$[Ue];(Be===i||zl(Be,ly[Ue])&&!qi.call($,Ue))&&($[Ue]=oe[Ue])}return $}),y0e=ii(function($){return $.push(i,jD),ra(Sj,i,$)});function m0e($,C){return RF($,kt(C,3),qu)}function g0e($,C){return RF($,kt(C,3),MM)}function v0e($,C){return $==null?$:$M($,kt(C,3),Co)}function w0e($,C){return $==null?$:sD($,kt(C,3),Co)}function b0e($,C){return $&&qu($,kt(C,3))}function _0e($,C){return $&&MM($,kt(C,3))}function x0e($){return $==null?[]:P_($,qn($))}function S0e($){return $==null?[]:P_($,Co($))}function r7($,C,N){var U=$==null?i:If($,C);return U===i?N:U}function $0e($,C){return $!=null&&UD($,C,Whe)}function n7($,C){return $!=null&&UD($,C,Jhe)}var M0e=PD(function($,C,N){C!=null&&typeof C.toString!="function"&&(C=__.call(C)),$[C]=N},o7(ko)),E0e=PD(function($,C,N){C!=null&&typeof C.toString!="function"&&(C=__.call(C)),qi.call($,C)?$[C].push(N):$[C]=[N]},kt),T0e=ii(Hv);function qn($){return Io($)?XF($):CM($)}function Co($){return Io($)?XF($,!0):npe($)}function I0e($,C){var N={};return C=kt(C,3),qu($,function(U,Y,oe){qc(N,C(U,Y,oe),U)}),N}function C0e($,C){var N={};return C=kt(C,3),qu($,function(U,Y,oe){qc(N,Y,C(U,Y,oe))}),N}var k0e=py(function($,C,N){R_($,C,N)}),Sj=py(function($,C,N,U){R_($,C,N,U)}),A0e=Wc(function($,C){var N={};if($==null)return N;var U=!1;C=_r(C,function(oe){return oe=Mp(oe,$),U||(U=oe.length>1),oe}),Hu($,BM($),N),U&&(N=Ja(N,k|O|R,Mpe));for(var Y=C.length;Y--;)RM(N,C[Y]);return N});function O0e($,C){return $j($,Z_(kt(C)))}var L0e=Wc(function($,C){return $==null?{}:ope($,C)});function $j($,C){if($==null)return{};var N=_r(BM($),function(U){return[U]});return C=kt(C),yD($,N,function(U,Y){return C(U,Y[0])})}function P0e($,C,N){C=Mp(C,$);var U=-1,Y=C.length;for(Y||(Y=1,$=i);++U<Y;){var oe=$==null?i:$[Wu(C[U])];oe===i&&(U=Y,oe=N),$=Kc(oe)?oe.call($):oe}return $}function R0e($,C,N){return $==null?$:Jv($,C,N)}function N0e($,C,N,U){return U=typeof U=="function"?U:i,$==null?$:Jv($,C,N,U)}var Mj=FD(qn),Ej=FD(Co);function F0e($,C,N){var U=Ht($),Y=U||Tp($)||yy($);if(C=kt(C,4),N==null){var oe=$&&$.constructor;Y?N=U?new oe:[]:Or($)?N=Kc(oe)?hy($_($)):{}:N={}}return(Y?qa:qu)($,function(fe,ve,Te){return C(N,fe,ve,Te)}),N}function D0e($,C){return $==null?!0:RM($,C)}function j0e($,C,N){return $==null?$:bD($,C,DM(N))}function z0e($,C,N,U){return U=typeof U=="function"?U:i,$==null?$:bD($,C,DM(N),U)}function my($){return $==null?[]:mM($,qn($))}function V0e($){return $==null?[]:mM($,Co($))}function U0e($,C,N){return N===i&&(N=C,C=i),N!==i&&(N=Ya(N),N=N===N?N:0),C!==i&&(C=Ya(C),C=C===C?C:0),Tf(Ya($),C,N)}function B0e($,C,N){return C=Zc(C),N===i?(N=C,C=0):N=Zc(N),$=Ya($),Khe($,C,N)}function G0e($,C,N){if(N&&typeof N!="boolean"&&Ws($,C,N)&&(C=N=i),N===i&&(typeof C=="boolean"?(N=C,C=i):typeof $=="boolean"&&(N=$,$=i)),$===i&&C===i?($=0,C=1):($=Zc($),C===i?(C=$,$=0):C=Zc(C)),$>C){var U=$;$=C,C=U}if(N||$%1||C%1){var Y=ZF();return $s($+Y*(C-$+xce("1e-"+((Y+"").length-1))),C)}return OM($,C)}var q0e=dy(function($,C,N){return C=C.toLowerCase(),$+(N?Tj(C):C)});function Tj($){return s7(ji($).toLowerCase())}function Ij($){return $=ji($),$&&$.replace(Vt,Rce).replace(pce,"")}function H0e($,C,N){$=ji($),C=sa(C);var U=$.length;N=N===i?U:Tf(Yt(N),0,U);var Y=N;return N-=C.length,N>=0&&$.slice(N,Y)==C}function W0e($){return $=ji($),$&&P.test($)?$.replace(T,Nce):$}function J0e($){return $=ji($),$&&le.test($)?$.replace(ae,"\\$&"):$}var K0e=dy(function($,C,N){return $+(N?"-":"")+C.toLowerCase()}),Z0e=dy(function($,C,N){return $+(N?" ":"")+C.toLowerCase()}),Y0e=AD("toLowerCase");function X0e($,C,N){$=ji($),C=Yt(C);var U=C?oy($):0;if(!C||U>=C)return $;var Y=(C-U)/2;return V_(I_(Y),N)+$+V_(T_(Y),N)}function Q0e($,C,N){$=ji($),C=Yt(C);var U=C?oy($):0;return C&&U<C?$+V_(C-U,N):$}function e1e($,C,N){$=ji($),C=Yt(C);var U=C?oy($):0;return C&&U<C?V_(C-U,N)+$:$}function t1e($,C,N){return N||C==null?C=0:C&&(C=+C),lhe(ji($).replace(ie,""),C||0)}function i1e($,C,N){return(N?Ws($,C,N):C===i)?C=1:C=Yt(C),LM(ji($),C)}function r1e(){var $=arguments,C=ji($[0]);return $.length<3?C:C.replace($[1],$[2])}var n1e=dy(function($,C,N){return $+(N?"_":"")+C.toLowerCase()});function s1e($,C,N){return N&&typeof N!="number"&&Ws($,C,N)&&(C=N=i),N=N===i?Ee:N>>>0,N?($=ji($),$&&(typeof C=="string"||C!=null&&!i7(C))&&(C=sa(C),!C&&sy($))?Ep(Dl($),0,N):$.split(C,N)):[]}var o1e=dy(function($,C,N){return $+(N?" ":"")+s7(C)});function a1e($,C,N){return $=ji($),N=N==null?0:Tf(Yt(N),0,$.length),C=sa(C),$.slice(N,N+C.length)==C}function l1e($,C,N){var U=se.templateSettings;N&&Ws($,C,N)&&(C=i),$=ji($),C=Q_({},C,U,DD);var Y=Q_({},C.imports,U.imports,DD),oe=qn(Y),fe=mM(Y,oe),ve,Te,Ue=0,Be=C.interpolate||Fi,Je="__p += '",ct=vM((C.escape||Fi).source+"|"+Be.source+"|"+(Be===H?bt:Fi).source+"|"+(C.evaluate||Fi).source+"|$","g"),xt="//# sourceURL="+(qi.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gce+"]")+`
`;$.replace(ct,function(Pt,ci,vi,aa,Js,la){return vi||(vi=aa),Je+=$.slice(Ue,la).replace(Di,Fce),ci&&(ve=!0,Je+=`' +
__e(`+ci+`) +
'`),Js&&(Te=!0,Je+=`';
`+Js+`;
__p += '`),vi&&(Je+=`' +
((__t = (`+vi+`)) == null ? '' : __t) +
'`),Ue=la+Pt.length,Pt}),Je+=`';
`;var Lt=qi.call(C,"variable")&&C.variable;if(!Lt)Je=`with (obj) {
`+Je+`
}
`;else if(Ye.test(Lt))throw new qt(y);Je=(Te?Je.replace(m,""):Je).replace(w,"$1").replace(x,"$1;"),Je="function("+(Lt||"obj")+`) {
`+(Lt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(Te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Je+`return __p
}`;var ei=kj(function(){return Pi(oe,xt+"return "+Je).apply(i,fe)});if(ei.source=Je,t7(ei))throw ei;return ei}function u1e($){return ji($).toLowerCase()}function c1e($){return ji($).toUpperCase()}function h1e($,C,N){if($=ji($),$&&(N||C===i))return jF($);if(!$||!(C=sa(C)))return $;var U=Dl($),Y=Dl(C),oe=zF(U,Y),fe=VF(U,Y)+1;return Ep(U,oe,fe).join("")}function p1e($,C,N){if($=ji($),$&&(N||C===i))return $.slice(0,BF($)+1);if(!$||!(C=sa(C)))return $;var U=Dl($),Y=VF(U,Dl(C))+1;return Ep(U,0,Y).join("")}function d1e($,C,N){if($=ji($),$&&(N||C===i))return $.replace(ie,"");if(!$||!(C=sa(C)))return $;var U=Dl($),Y=zF(U,Dl(C));return Ep(U,Y).join("")}function f1e($,C){var N=Ce,U=Ge;if(Or(C)){var Y="separator"in C?C.separator:Y;N="length"in C?Yt(C.length):N,U="omission"in C?sa(C.omission):U}$=ji($);var oe=$.length;if(sy($)){var fe=Dl($);oe=fe.length}if(N>=oe)return $;var ve=N-oy(U);if(ve<1)return U;var Te=fe?Ep(fe,0,ve).join(""):$.slice(0,ve);if(Y===i)return Te+U;if(fe&&(ve+=Te.length-ve),i7(Y)){if($.slice(ve).search(Y)){var Ue,Be=Te;for(Y.global||(Y=vM(Y.source,ji(Kt.exec(Y))+"g")),Y.lastIndex=0;Ue=Y.exec(Be);)var Je=Ue.index;Te=Te.slice(0,Je===i?ve:Je)}}else if($.indexOf(sa(Y),ve)!=ve){var ct=Te.lastIndexOf(Y);ct>-1&&(Te=Te.slice(0,ct))}return Te+U}function y1e($){return $=ji($),$&&A.test($)?$.replace(E,Gce):$}var m1e=dy(function($,C,N){return $+(N?" ":"")+C.toUpperCase()}),s7=AD("toUpperCase");function Cj($,C,N){return $=ji($),C=N?i:C,C===i?jce($)?Wce($):kce($):$.match(C)||[]}var kj=ii(function($,C){try{return ra($,i,C)}catch(N){return t7(N)?N:new qt(N)}}),g1e=Wc(function($,C){return qa(C,function(N){N=Wu(N),qc($,N,QM($[N],$))}),$});function v1e($){var C=$==null?0:$.length,N=kt();return $=C?_r($,function(U){if(typeof U[1]!="function")throw new Ha(d);return[N(U[0]),U[1]]}):[],ii(function(U){for(var Y=-1;++Y<C;){var oe=$[Y];if(ra(oe[0],this,U))return ra(oe[1],this,U)}})}function w1e($){return Ghe(Ja($,k))}function o7($){return function(){return $}}function b1e($,C){return $==null||$!==$?C:$}var _1e=LD(),x1e=LD(!0);function ko($){return $}function a7($){return uD(typeof $=="function"?$:Ja($,k))}function S1e($){return hD(Ja($,k))}function $1e($,C){return pD($,Ja(C,k))}var M1e=ii(function($,C){return function(N){return Hv(N,$,C)}}),E1e=ii(function($,C){return function(N){return Hv($,N,C)}});function l7($,C,N){var U=qn(C),Y=P_(C,U);N==null&&!(Or(C)&&(Y.length||!U.length))&&(N=C,C=$,$=this,Y=P_(C,qn(C)));var oe=!(Or(N)&&"chain"in N)||!!N.chain,fe=Kc($);return qa(Y,function(ve){var Te=C[ve];$[ve]=Te,fe&&($.prototype[ve]=function(){var Ue=this.__chain__;if(oe||Ue){var Be=$(this.__wrapped__),Je=Be.__actions__=To(this.__actions__);return Je.push({func:Te,args:arguments,thisArg:$}),Be.__chain__=Ue,Be}return Te.apply($,bp([this.value()],arguments))})}),$}function T1e(){return ss._===this&&(ss._=Qce),this}function u7(){}function I1e($){return $=Yt($),ii(function(C){return dD(C,$)})}var C1e=zM(_r),k1e=zM(PF),A1e=zM(hM);function Aj($){return WM($)?pM(Wu($)):ape($)}function O1e($){return function(C){return $==null?i:If($,C)}}var L1e=RD(),P1e=RD(!0);function c7(){return[]}function h7(){return!1}function R1e(){return{}}function N1e(){return""}function F1e(){return!0}function D1e($,C){if($=Yt($),$<1||$>pe)return[];var N=Ee,U=$s($,Ee);C=kt(C),$-=Ee;for(var Y=yM(U,C);++N<$;)C(N);return Y}function j1e($){return Ht($)?_r($,Wu):oa($)?[$]:To(YD(ji($)))}function z1e($){var C=++Yce;return ji($)+C}var V1e=z_(function($,C){return $+C},0),U1e=VM("ceil"),B1e=z_(function($,C){return $/C},1),G1e=VM("floor");function q1e($){return $&&$.length?L_($,ko,EM):i}function H1e($,C){return $&&$.length?L_($,kt(C,2),EM):i}function W1e($){return FF($,ko)}function J1e($,C){return FF($,kt(C,2))}function K1e($){return $&&$.length?L_($,ko,kM):i}function Z1e($,C){return $&&$.length?L_($,kt(C,2),kM):i}var Y1e=z_(function($,C){return $*C},1),X1e=VM("round"),Q1e=z_(function($,C){return $-C},0);function eye($){return $&&$.length?fM($,ko):0}function tye($,C){return $&&$.length?fM($,kt(C,2)):0}return se.after=Sfe,se.ary=lj,se.assign=c0e,se.assignIn=xj,se.assignInWith=Q_,se.assignWith=h0e,se.at=p0e,se.before=uj,se.bind=QM,se.bindAll=g1e,se.bindKey=cj,se.castArray=Rfe,se.chain=sj,se.chunk=Gpe,se.compact=qpe,se.concat=Hpe,se.cond=v1e,se.conforms=w1e,se.constant=o7,se.countBy=efe,se.create=d0e,se.curry=hj,se.curryRight=pj,se.debounce=dj,se.defaults=f0e,se.defaultsDeep=y0e,se.defer=$fe,se.delay=Mfe,se.difference=Wpe,se.differenceBy=Jpe,se.differenceWith=Kpe,se.drop=Zpe,se.dropRight=Ype,se.dropRightWhile=Xpe,se.dropWhile=Qpe,se.fill=ede,se.filter=ife,se.flatMap=sfe,se.flatMapDeep=ofe,se.flatMapDepth=afe,se.flatten=tj,se.flattenDeep=tde,se.flattenDepth=ide,se.flip=Efe,se.flow=_1e,se.flowRight=x1e,se.fromPairs=rde,se.functions=x0e,se.functionsIn=S0e,se.groupBy=lfe,se.initial=sde,se.intersection=ode,se.intersectionBy=ade,se.intersectionWith=lde,se.invert=M0e,se.invertBy=E0e,se.invokeMap=cfe,se.iteratee=a7,se.keyBy=hfe,se.keys=qn,se.keysIn=Co,se.map=W_,se.mapKeys=I0e,se.mapValues=C0e,se.matches=S1e,se.matchesProperty=$1e,se.memoize=K_,se.merge=k0e,se.mergeWith=Sj,se.method=M1e,se.methodOf=E1e,se.mixin=l7,se.negate=Z_,se.nthArg=I1e,se.omit=A0e,se.omitBy=O0e,se.once=Tfe,se.orderBy=pfe,se.over=C1e,se.overArgs=Ife,se.overEvery=k1e,se.overSome=A1e,se.partial=e7,se.partialRight=fj,se.partition=dfe,se.pick=L0e,se.pickBy=$j,se.property=Aj,se.propertyOf=O1e,se.pull=pde,se.pullAll=rj,se.pullAllBy=dde,se.pullAllWith=fde,se.pullAt=yde,se.range=L1e,se.rangeRight=P1e,se.rearg=Cfe,se.reject=mfe,se.remove=mde,se.rest=kfe,se.reverse=YM,se.sampleSize=vfe,se.set=R0e,se.setWith=N0e,se.shuffle=wfe,se.slice=gde,se.sortBy=xfe,se.sortedUniq=$de,se.sortedUniqBy=Mde,se.split=s1e,se.spread=Afe,se.tail=Ede,se.take=Tde,se.takeRight=Ide,se.takeRightWhile=Cde,se.takeWhile=kde,se.tap=qde,se.throttle=Ofe,se.thru=H_,se.toArray=wj,se.toPairs=Mj,se.toPairsIn=Ej,se.toPath=j1e,se.toPlainObject=_j,se.transform=F0e,se.unary=Lfe,se.union=Ade,se.unionBy=Ode,se.unionWith=Lde,se.uniq=Pde,se.uniqBy=Rde,se.uniqWith=Nde,se.unset=D0e,se.unzip=XM,se.unzipWith=nj,se.update=j0e,se.updateWith=z0e,se.values=my,se.valuesIn=V0e,se.without=Fde,se.words=Cj,se.wrap=Pfe,se.xor=Dde,se.xorBy=jde,se.xorWith=zde,se.zip=Vde,se.zipObject=Ude,se.zipObjectDeep=Bde,se.zipWith=Gde,se.entries=Mj,se.entriesIn=Ej,se.extend=xj,se.extendWith=Q_,l7(se,se),se.add=V1e,se.attempt=kj,se.camelCase=q0e,se.capitalize=Tj,se.ceil=U1e,se.clamp=U0e,se.clone=Nfe,se.cloneDeep=Dfe,se.cloneDeepWith=jfe,se.cloneWith=Ffe,se.conformsTo=zfe,se.deburr=Ij,se.defaultTo=b1e,se.divide=B1e,se.endsWith=H0e,se.eq=zl,se.escape=W0e,se.escapeRegExp=J0e,se.every=tfe,se.find=rfe,se.findIndex=QD,se.findKey=m0e,se.findLast=nfe,se.findLastIndex=ej,se.findLastKey=g0e,se.floor=G1e,se.forEach=oj,se.forEachRight=aj,se.forIn=v0e,se.forInRight=w0e,se.forOwn=b0e,se.forOwnRight=_0e,se.get=r7,se.gt=Vfe,se.gte=Ufe,se.has=$0e,se.hasIn=n7,se.head=ij,se.identity=ko,se.includes=ufe,se.indexOf=nde,se.inRange=B0e,se.invoke=T0e,se.isArguments=Af,se.isArray=Ht,se.isArrayBuffer=Bfe,se.isArrayLike=Io,se.isArrayLikeObject=nn,se.isBoolean=Gfe,se.isBuffer=Tp,se.isDate=qfe,se.isElement=Hfe,se.isEmpty=Wfe,se.isEqual=Jfe,se.isEqualWith=Kfe,se.isError=t7,se.isFinite=Zfe,se.isFunction=Kc,se.isInteger=yj,se.isLength=Y_,se.isMap=mj,se.isMatch=Yfe,se.isMatchWith=Xfe,se.isNaN=Qfe,se.isNative=e0e,se.isNil=i0e,se.isNull=t0e,se.isNumber=gj,se.isObject=Or,se.isObjectLike=qr,se.isPlainObject=Xv,se.isRegExp=i7,se.isSafeInteger=r0e,se.isSet=vj,se.isString=X_,se.isSymbol=oa,se.isTypedArray=yy,se.isUndefined=n0e,se.isWeakMap=s0e,se.isWeakSet=o0e,se.join=ude,se.kebabCase=K0e,se.last=Za,se.lastIndexOf=cde,se.lowerCase=Z0e,se.lowerFirst=Y0e,se.lt=a0e,se.lte=l0e,se.max=q1e,se.maxBy=H1e,se.mean=W1e,se.meanBy=J1e,se.min=K1e,se.minBy=Z1e,se.stubArray=c7,se.stubFalse=h7,se.stubObject=R1e,se.stubString=N1e,se.stubTrue=F1e,se.multiply=Y1e,se.nth=hde,se.noConflict=T1e,se.noop=u7,se.now=J_,se.pad=X0e,se.padEnd=Q0e,se.padStart=e1e,se.parseInt=t1e,se.random=G0e,se.reduce=ffe,se.reduceRight=yfe,se.repeat=i1e,se.replace=r1e,se.result=P0e,se.round=X1e,se.runInContext=Se,se.sample=gfe,se.size=bfe,se.snakeCase=n1e,se.some=_fe,se.sortedIndex=vde,se.sortedIndexBy=wde,se.sortedIndexOf=bde,se.sortedLastIndex=_de,se.sortedLastIndexBy=xde,se.sortedLastIndexOf=Sde,se.startCase=o1e,se.startsWith=a1e,se.subtract=Q1e,se.sum=eye,se.sumBy=tye,se.template=l1e,se.times=D1e,se.toFinite=Zc,se.toInteger=Yt,se.toLength=bj,se.toLower=u1e,se.toNumber=Ya,se.toSafeInteger=u0e,se.toString=ji,se.toUpper=c1e,se.trim=h1e,se.trimEnd=p1e,se.trimStart=d1e,se.truncate=f1e,se.unescape=y1e,se.uniqueId=z1e,se.upperCase=m1e,se.upperFirst=s7,se.each=oj,se.eachRight=aj,se.first=ij,l7(se,function(){var $={};return qu(se,function(C,N){qi.call(se.prototype,N)||($[N]=C)}),$}(),{chain:!1}),se.VERSION=r,qa(["bind","bindKey","curry","curryRight","partial","partialRight"],function($){se[$].placeholder=se}),qa(["drop","take"],function($,C){fi.prototype[$]=function(N){N=N===i?1:Tn(Yt(N),0);var U=this.__filtered__&&!C?new fi(this):this.clone();return U.__filtered__?U.__takeCount__=$s(N,U.__takeCount__):U.__views__.push({size:$s(N,Ee),type:$+(U.__dir__<0?"Right":"")}),U},fi.prototype[$+"Right"]=function(N){return this.reverse()[$](N).reverse()}}),qa(["filter","map","takeWhile"],function($,C){var N=C+1,U=N==et||N==pi;fi.prototype[$]=function(Y){var oe=this.clone();return oe.__iteratees__.push({iteratee:kt(Y,3),type:N}),oe.__filtered__=oe.__filtered__||U,oe}}),qa(["head","last"],function($,C){var N="take"+(C?"Right":"");fi.prototype[$]=function(){return this[N](1).value()[0]}}),qa(["initial","tail"],function($,C){var N="drop"+(C?"":"Right");fi.prototype[$]=function(){return this.__filtered__?new fi(this):this[N](1)}}),fi.prototype.compact=function(){return this.filter(ko)},fi.prototype.find=function($){return this.filter($).head()},fi.prototype.findLast=function($){return this.reverse().find($)},fi.prototype.invokeMap=ii(function($,C){return typeof $=="function"?new fi(this):this.map(function(N){return Hv(N,$,C)})}),fi.prototype.reject=function($){return this.filter(Z_(kt($)))},fi.prototype.slice=function($,C){$=Yt($);var N=this;return N.__filtered__&&($>0||C<0)?new fi(N):($<0?N=N.takeRight(-$):$&&(N=N.drop($)),C!==i&&(C=Yt(C),N=C<0?N.dropRight(-C):N.take(C-$)),N)},fi.prototype.takeRightWhile=function($){return this.reverse().takeWhile($).reverse()},fi.prototype.toArray=function(){return this.take(Ee)},qu(fi.prototype,function($,C){var N=/^(?:filter|find|map|reject)|While$/.test(C),U=/^(?:head|last)$/.test(C),Y=se[U?"take"+(C=="last"?"Right":""):C],oe=U||/^find/.test(C);!Y||(se.prototype[C]=function(){var fe=this.__wrapped__,ve=U?[1]:arguments,Te=fe instanceof fi,Ue=ve[0],Be=Te||Ht(fe),Je=function(ci){var vi=Y.apply(se,bp([ci],ve));return U&&ct?vi[0]:vi};Be&&N&&typeof Ue=="function"&&Ue.length!=1&&(Te=Be=!1);var ct=this.__chain__,xt=!!this.__actions__.length,Lt=oe&&!ct,ei=Te&&!xt;if(!oe&&Be){fe=ei?fe:new fi(this);var Pt=$.apply(fe,ve);return Pt.__actions__.push({func:H_,args:[Je],thisArg:i}),new Wa(Pt,ct)}return Lt&&ei?$.apply(this,ve):(Pt=this.thru(Je),Lt?U?Pt.value()[0]:Pt.value():Pt)})}),qa(["pop","push","shift","sort","splice","unshift"],function($){var C=v_[$],N=/^(?:push|sort|unshift)$/.test($)?"tap":"thru",U=/^(?:pop|shift)$/.test($);se.prototype[$]=function(){var Y=arguments;if(U&&!this.__chain__){var oe=this.value();return C.apply(Ht(oe)?oe:[],Y)}return this[N](function(fe){return C.apply(Ht(fe)?fe:[],Y)})}}),qu(fi.prototype,function($,C){var N=se[C];if(N){var U=N.name+"";qi.call(cy,U)||(cy[U]=[]),cy[U].push({name:C,func:N})}}),cy[j_(i,V).name]=[{name:"wrapper",func:i}],fi.prototype.clone=yhe,fi.prototype.reverse=mhe,fi.prototype.value=ghe,se.prototype.at=Hde,se.prototype.chain=Wde,se.prototype.commit=Jde,se.prototype.next=Kde,se.prototype.plant=Yde,se.prototype.reverse=Xde,se.prototype.toJSON=se.prototype.valueOf=se.prototype.value=Qde,se.prototype.first=se.prototype.head,jv&&(se.prototype[jv]=Zde),se},ay=Jce();Sf?((Sf.exports=ay)._=ay,aM._=ay):ss._=ay}).call(Qv)})(NJ,NJ.exports);const AHe=async e=>{const{data:t}=await kHe({method:"GET",url:"./FallsChurchParks_v2.json"}),i=new a6({});e.add(i);const r={type:"simple-fill",color:[101,167,76,.25],style:"solid",outline:{color:[0,0,0,.25],width:1}};let s;t.features.forEach((d,y)=>{const v={type:"polygon",rings:d.geometry.coordinates},_=new pn({id:"BikeShareStationsBuffer",geometry:v}),M=Ble(_.geometry,.5,"miles");new pn({geometry:M,symbol:r}),y===0?s=M:s=Ule([s,M])});const l=new pn({geometry:s,symbol:r});i.add(l)};var gF={exports:{}},Q$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OHe=Mg.exports,LHe=Symbol.for("react.element"),PHe=Symbol.for("react.fragment"),RHe=Object.prototype.hasOwnProperty,NHe=OHe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FHe={key:!0,ref:!0,__self:!0,__source:!0};function rce(e,t,i){var r,s={},l=null,d=null;i!==void 0&&(l=""+i),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)RHe.call(t,r)&&!FHe.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:LHe,type:e,key:l,ref:d,props:s,_owner:NHe.current}}Q$.Fragment=PHe;Q$.jsx=rce;Q$.jsxs=rce;(function(e){e.exports=Q$})(gF);const x3=gF.exports.jsx,DHe=gF.exports.jsxs,jHe=()=>x3("h1",{className:"App__title",children:"Falls Church - Parks"});function zHe(){const[e,t]=Mg.exports.useState(!1);Mg.exports.useEffect(()=>{i().then(r=>{t(!0)})},[]);const i=async()=>{try{const r=new AQ({basemap:"gray-vector"}),s=new cDe({map:r,container:"mapContainer",center:[-77.1711,38.8863],zoom:14,constraints:{minZoom:13}});cqe(s),_qe(r),Sqe(r),await AHe(r);const l=new Fje({view:s,layerInfos:[{layer:r.findLayerById("Jurisdictional_Boundary")},{layer:r.findLayerById("FallsChurchParks")},{layer:r.findLayerById("BikeShareStationsBuffer")}]});return s.ui.add(l,"bottom-left"),r}catch(r){console.error(r)}};return DHe("div",{className:"App",children:[x3("main",{id:"mapContainer",className:"mapContainer"}),x3(jHe,{})]})}const VHe=document.getElementById("root");Z8.createRoot(VHe).render(x3(gye.StrictMode,{children:x3(zHe,{})}));export{nR as $,xae as A,wt as B,t4 as C,ju as D,YRe as E,KRe as F,bae as G,Zh as H,hP as I,bs as J,Qn as K,Uo as L,sO as M,hn as N,zL as O,Aae as P,Pg as Q,O6 as R,Pe as S,Jt as T,Bi as U,RKe as V,LKe as W,Bs as X,jn as Y,Bne as Z,Uu as _,jge as a,nW as a$,g as a0,S as a1,Q as a2,st as a3,St as a4,Un as a5,Pl as a6,Nl as a7,Lu as a8,ut as a9,kB as aA,bre as aB,_P as aC,kxe as aD,yo as aE,t6 as aF,PJe as aG,YWe as aH,HWe as aI,kWe as aJ,$P as aK,DFe as aL,Exe as aM,Txe as aN,Ct as aO,O3 as aP,IQ as aQ,TWe as aR,xP as aS,SKe as aT,$Ke as aU,xKe as aV,wae as aW,TN as aX,Qg as aY,Me as aZ,uW as a_,gs as aa,N$ as ab,e3 as ac,hae as ad,Joe as ae,pae as af,wi as ag,bRe as ah,CKe as ai,ARe as aj,Xg as ak,kKe as al,Le as am,ir as an,CY as ao,yWe as ap,La as aq,Va as ar,go as as,gv as at,VJe as au,u1 as av,r_e as aw,SP as ax,xre as ay,JJe as az,QHe as b,fse as b$,sW as b0,bW as b1,oW as b2,pW as b3,TW as b4,BH as b5,IW as b6,Su as b7,CW as b8,kW as b9,VL as bA,fc as bB,dKe as bC,jH as bD,zH as bE,af as bF,jx as bG,Qie as bH,IWe as bI,i1 as bJ,Dm as bK,J2 as bL,fJe as bM,Us as bN,ms as bO,Y5 as bP,mU as bQ,Vo as bR,XJe as bS,BJe as bT,Si as bU,VH as bV,yN as bW,EJe as bX,dse as bY,Mke as bZ,XR as b_,KS as ba,boe as bb,N0 as bc,oLe as bd,bc as be,Yg as bf,s_ as bg,WWe as bh,wO as bi,bO as bj,Fu as bk,eW as bl,qH as bm,HH as bn,WH as bo,dW as bp,kJe as bq,DW as br,VW as bs,tW as bt,jW as bu,bo as bv,FS as bw,KWe as bx,SWe as by,ot as bz,HHe as c,F6 as c$,Bn as c0,en as c1,uf as c2,$ke as c3,wDe as c4,SH as c5,DAe as c6,jAe as c7,zAe as c8,Du as c9,cf as cA,cS as cB,li as cC,NL as cD,b7e as cE,w7e as cF,IJe as cG,N3 as cH,AJe as cI,OJe as cJ,Dt as cK,CJe as cL,U1 as cM,mX as cN,oi as cO,Ve as cP,Qr as cQ,nOe as cR,nS as cS,vt as cT,jm as cU,uo as cV,JWe as cW,Cxe as cX,V6 as cY,Mxe as cZ,gve as c_,JCe as ca,PWe as cb,pt as cc,JR as cd,Hm as ce,ECe as cf,vse as cg,s8e as ch,vo as ci,Ere as cj,qJe as ck,UJe as cl,_Ee as cm,YJe as cn,AB as co,wke as cp,JHe as cq,KHe as cr,ZAe as cs,dRe as ct,ZRe as cu,n8e as cv,Mre as cw,bBe as cx,vae as cy,jw as cz,YHe as d,Bb as d$,B1 as d0,zr as d1,Axe as d2,OGe as d3,ANe as d4,AKe as d5,OKe as d6,LGe as d7,Qo as d8,yi as d9,q_e as dA,cv as dB,K3 as dC,mv as dD,zWe as dE,tb as dF,H1 as dG,Tke as dH,YR as dI,iX as dJ,L1 as dK,Ng as dL,m1 as dM,zm as dN,hf as dO,lp as dP,zu as dQ,jC as dR,mr as dS,DC as dT,VC as dU,gS as dV,u4e as dW,CRe as dX,$X as dY,pX as dZ,Xie as d_,T1 as da,vl as db,Ko as dc,R3 as dd,pn as de,eS as df,M1 as dg,Nee as dh,ev as di,nAe as dj,rAe as dk,hAe as dl,OQ as dm,RWe as dn,yve as dp,lo as dq,FKe as dr,op as ds,VWe as dt,NWe as du,DWe as dv,FWe as dw,jWe as dx,Kb as dy,Cl as dz,ke as e,ui as e$,vr as e0,Z5 as e1,Y6 as e2,YV as e3,AWe as e4,eJe as e5,aJe as e6,fDe as e7,xH as e8,G1 as e9,T6e as eA,V1 as eB,oY as eC,iAe as eD,Nse as eE,gAe as eF,tN as eG,WHe as eH,E$ as eI,Ase as eJ,zg as eK,eWe as eL,l3 as eM,oWe as eN,l1 as eO,I1 as eP,LL as eQ,mWe as eR,Zg as eS,Yke as eT,fWe as eU,m2e as eV,mKe as eW,pke as eX,ta as eY,wCe as eZ,bCe as e_,jc as ea,BL as eb,nt as ec,GV as ed,ire as ee,cEe as ef,uEe as eg,va as eh,pJe as ei,dJe as ej,CX as ek,DY as el,Fg as em,_s as en,ia as eo,h1 as ep,Mt as eq,yNe as er,vke as es,IKe as et,n_ as eu,TKe as ev,D0 as ew,bJe as ex,gJe as ey,qte as ez,ge as f,_v as f$,LIe as f0,O_e as f1,ZKe as f2,Nc as f3,g2e as f4,KKe as f5,XWe as f6,oJe as f7,KJe as f8,Lie as f9,Ia as fA,Sl as fB,tWe as fC,iWe as fD,xl as fE,Ds as fF,uQ as fG,_I as fH,Ra as fI,ts as fJ,Jh as fK,_We as fL,ZX as fM,Eue as fN,Tue as fO,lQ as fP,eGe as fQ,iv as fR,M9e as fS,_9e as fT,w9e as fU,m9e as fV,Qle as fW,JX as fX,J5e as fY,mJe as fZ,Qee as f_,hqe as fa,MJe as fb,po as fc,Oi as fd,Nxe as fe,Noe as ff,rY as fg,sY as fh,g7e as fi,UWe as fj,EQ as fk,OWe as fl,CWe as fm,X2e as fn,sbe as fo,U6 as fp,wWe as fq,i$ as fr,z6 as fs,ZJe as ft,jJe as fu,Sre as fv,gre as fw,ZHe as fx,dFe as fy,bY as fz,xWe as g,v$ as g$,K9e as g0,DVe as g1,e9 as g2,J9e as g3,Wb as g4,BRe as g5,qRe as g6,e3e as g7,xV as g8,gWe as g9,TP as gA,GWe as gB,qWe as gC,BWe as gD,O3e as gE,BKe as gF,lte as gG,J3 as gH,EWe as gI,UKe as gJ,H2 as gK,DEe as gL,OEe as gM,wB as gN,lre as gO,WJe as gP,I5e as gQ,gKe as gR,vve as gS,$E as gT,ME as gU,Ege as gV,tr as gW,RJe as gX,Ige as gY,vFe as gZ,GJe as g_,fv as ga,yv as gb,Yle as gc,rNe as gd,pNe as ge,b9e as gf,R1 as gg,xi as gh,lWe as gi,$1 as gj,Tse as gk,UEe as gl,jEe as gm,NJe as gn,HJe as go,are as gp,VEe as gq,SJe as gr,$Je as gs,ZWe as gt,sp as gu,pg as gv,Use as gw,sEe as gx,YKe as gy,zJe as gz,GHe as h,S7e as h$,rWe as h0,oGe as h1,wI as h2,Yi as h3,wg as h4,NMe as h5,Ud as h6,fN as h7,B$ as h8,GKe as h9,rr as hA,Z as hB,pl as hC,HC as hD,AS as hE,aY as hF,ug as hG,pWe as hH,Il as hI,D6 as hJ,uv as hK,Mu as hL,vWe as hM,xJe as hN,wJe as hO,_Je as hP,vJe as hQ,Nue as hR,KGe as hS,Mn as hT,k7e as hU,c3 as hV,HA as hW,EKe as hX,o_ as hY,A7e as hZ,Um as h_,rue as ha,qKe as hb,G$ as hc,pP as hd,XVe as he,zKe as hf,rUe as hg,XN as hh,WX as hi,wue as hj,Kbe as hk,HKe as hl,WKe as hm,lUe as hn,Oge as ho,UHe as hp,t2e as hq,Gb as hr,tP as hs,BHe as ht,bP as hu,ao as hv,iJe as hw,lJe as hx,uJe as hy,Gi as hz,Fge as i,UIe as i$,TJe as i0,_7e as i1,LJe as i2,so as i3,oo as i4,ps as i5,zc as i6,O9 as i7,y3 as i8,GR as i9,mP as iA,rCe as iB,nCe as iC,sCe as iD,UR as iE,aCe as iF,oCe as iG,lCe as iH,f3 as iI,PIe as iJ,QIe as iK,YIe as iL,HIe as iM,gCe as iN,fCe as iO,dCe as iP,lKe as iQ,yCe as iR,mCe as iS,WIe as iT,JIe as iU,XIe as iV,hCe as iW,AR as iX,hKe as iY,zIe as iZ,jIe as i_,US as ia,Fr as ib,iCe as ic,ef as id,Rs as ie,eCe as ig,Rl as ih,KIe as ii,qIe as ij,GIe as ik,D1 as il,Ea as im,Ane as io,dp as ip,k8e as iq,DIe as ir,VIe as is,Gt as it,kne as iu,Pa as iv,tCe as iw,ZIe as ix,pI as iy,Z1 as iz,WT as j,Ise as j$,BIe as j0,cWe as j1,_2e as j2,O$e as j3,rre as j4,ek as j5,Ck as j6,xk as j7,zx as j8,_u as j9,Lse as jA,Pse as jB,Xke as jC,rN as jD,eAe as jE,tAe as jF,NP as jG,P1 as jH,fqe as jI,x_e as jJ,b_e as jK,J3e as jL,kV as jM,zs as jN,qb as jO,Ose as jP,$o as jQ,V3 as jR,is as jS,Dc as jT,tt as jU,hb as jV,JT as jW,SE as jX,Kve as jY,gl as jZ,Bse as j_,KEe as ja,za as jb,Gke as jc,Xo as jd,zEe as je,uP as jf,XHe as jg,noe as jh,bWe as ji,nN as jj,oN as jk,Vse as jl,bKe as jm,LG as jn,ioe as jo,sN as jp,yse as jq,T$ as jr,toe as js,mo as jt,Fwe as ju,tee as jv,a6e as jw,Jke as jx,uX as jy,_Ke as jz,d1 as k,YG as k$,rOe as k0,Av as k1,Nne as k2,zne as k3,J7e as k4,DCe as k5,K7e as k6,Wne as k7,ese as k8,qS as k9,UL as kA,Rc as kB,Zy as kC,tOe as kD,r_ as kE,i_ as kF,cN as kG,jKe as kH,U4 as kI,W1 as kJ,a6 as kK,Cse as kL,Dse as kM,aS as kN,MP as kO,eoe as kP,GA as kQ,I$ as kR,kse as kS,QP as kT,Lc as kU,Ac as kV,ZQ as kW,vX as kX,qHe as kY,mse as kZ,tf as k_,QR as ka,aWe as kb,Rne as kc,HS as kd,Qke as ke,yJe as kf,P3 as kg,GY as kh,C6 as ki,j3 as kj,t3 as kk,jd as kl,Oa as km,Kxe as kn,j6 as ko,cJe as kp,er as kq,nWe as kr,iY as ks,eU as kt,PP as ku,tJe as kv,QWe as kw,TUe as kx,Ft as ky,DKe as kz,KH as l,Lne as l$,Jb as l0,dAe as l1,pAe as l2,pv as l3,kee as l4,vKe as l5,hv as l6,Ou as l7,iP as l8,uWe as l9,_o as lA,FX as lB,sJe as lC,HX as lD,hWe as lE,E9e as lF,NVe as lG,JKe as lH,aKe as lI,pG as lJ,QJe as lK,hG as lL,cCe as lM,oKe as lN,cKe as lO,cre as lP,uKe as lQ,tKe as lR,eKe as lS,iKe as lT,rKe as lU,sKe as lV,FIe as lW,fG as lX,nKe as lY,uCe as lZ,$$ as l_,dee as la,cAe as lb,wKe as lc,Cwe as ld,tV as le,te as lf,hJe as lg,yKe as lh,fKe as li,uN as lj,LWe as lk,ap as ll,fs as lm,qse as ln,kP as lo,Lle as lp,Pge as lq,S2e as lr,$We as ls,rJe as lt,nJe as lu,Z9e as lv,Pbe as lw,Ov as lx,l$ as ly,Ru as lz,Cr as m,Pne as m0,PKe as m1,v4e as m2,QL as m3,tte as m4,vGe as m5,VVe as m6,jVe as m7,GX as m8,aGe as m9,dWe as ma,MWe as mb,D2e as mc,FJe as md,DJe as me,pKe as mf,MKe as mg,VKe as mh,XKe as mi,NKe as n,un as o,sWe as p,Vs as q,K as r,Ke as s,ce as t,ur as u,Ll as v,Tae as w,hi as x,Yn as y,Xi as z};
